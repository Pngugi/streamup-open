function close_popup(e){for(var t=0;t<popups.length;t++)if(e==popups[t])return Array.remove(popups,t),document.getElementById(e).style.display="none",void calculate_popups()}function display_popups(){var e=220,t=0;for(t;total_popups>t;t++)if(void 0!=popups[t]){var n=document.getElementById(popups[t]);n.style.right=e+"px",e+=320,n.style.display="block"}for(var o=t;o<popups.length;o++){var n=document.getElementById(popups[o]);n.style.display="none"}}function register_popup(e,t){for(var n=0;n<popups.length;n++)if(e==popups[n])return Array.remove(popups,n),popups.unshift(e),void calculate_popups();var o='<div class="popup-box chat-popup" id="'+e+'">';o+='<div style="background:#ddd;color:#fff;" class="header">Group<div class="close_btn">&nbsp;</div></div>',o+=' <div class="toggle_chat">',o+='<div class="message_box"></div>',o+='<textarea style="background:white;margin-top:180px;" id="chat" class="form-control" rows="3" required="required"></textarea>',document.getElementsByTagName("body")[0].innerHTML=document.getElementsByTagName("body")[0].innerHTML+o,popups.unshift(e),calculate_popups()}function calculate_popups(){var e=window.innerWidth;540>e?total_popups=0:(e-=200,total_popups=parseInt(e/320)),display_popups()}!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["angular-file-upload"]=t():e["angular-file-upload"]=t()}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var o=function(e){return e&&e.__esModule?e["default"]:e},r=o(n(1)),i=o(n(2)),s=o(n(3)),a=o(n(4)),u=o(n(5)),c=o(n(6)),l=o(n(7)),f=o(n(8)),p=o(n(9)),d=o(n(10)),m=o(n(11)),v=o(n(12));angular.module(r.name,[]).value("fileUploaderOptions",i).factory("FileUploader",s).factory("FileLikeObject",a).factory("FileItem",u).factory("FileDirective",c).factory("FileSelect",l).factory("FileDrop",f).factory("FileOver",p).directive("nvFileSelect",d).directive("nvFileDrop",m).directive("nvFileOver",v).run(["FileUploader","FileLikeObject","FileItem","FileDirective","FileSelect","FileDrop","FileOver",function(e,t,n,o,r,i,s){e.FileLikeObject=t,e.FileItem=n,e.FileDirective=o,e.FileSelect=r,e.FileDrop=i,e.FileOver=s}])},function(e,t){e.exports={name:"angularFileUpload"}},function(e,t){"use strict";e.exports={url:"/",alias:"file",headers:{authorization:"Bearer 8EuqcMNkF2yP50Dicpv9hLRRp7WOSabPlCu22liY"},queue:[],progress:0,autoUpload:!1,removeAfterUpload:!1,method:"POST",filters:[],formData:[],queueLimit:Number.MAX_VALUE,withCredentials:!1}},function(e,t,n){"use strict";var o=function(e){return e&&e.__esModule?e["default"]:e},r=function(){function e(e,t){for(var n in t){var o=t[n];o.configurable=!0,o.value&&(o.writable=!0)}Object.defineProperties(e,t)}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},s=(o(n(1)),angular.copy),a=angular.extend,u=angular.forEach,c=angular.isObject,l=angular.isNumber,f=angular.isDefined,p=angular.isArray,d=angular.element;e.exports=function(e,t,n,o,m,v){var g=o.File,h=o.FormData,y=function(){function o(t){i(this,o);var n=s(e);a(this,n,t,{isUploading:!1,_nextIndex:0,_failFilterIndex:-1,_directives:{select:[],drop:[],over:[]}}),this.filters.unshift({name:"queueLimit",fn:this._queueLimitFilter}),this.filters.unshift({name:"folder",fn:this._folderFilter})}return r(o,{addToQueue:{value:function(e,t,n){var o=this,r=this.isArrayLikeObject(e)?e:[e],i=this._getFilters(n),s=this.queue.length,a=[];u(r,function(e){var n=new m(e);if(o._isValidFile(n,i,t)){var r=new v(o,e,t);a.push(r),o.queue.push(r),o._onAfterAddingFile(r)}else{var s=i[o._failFilterIndex];o._onWhenAddingFileFailed(n,s,t)}}),this.queue.length!==s&&(this._onAfterAddingAll(a),this.progress=this._getTotalProgress()),this._render(),this.autoUpload&&this.uploadAll()}},removeFromQueue:{value:function(e){var t=this.getIndexOfItem(e),n=this.queue[t];n.isUploading&&n.cancel(),this.queue.splice(t,1),n._destroy(),this.progress=this._getTotalProgress()}},clearQueue:{value:function(){for(;this.queue.length;)this.queue[0].remove();this.progress=0}},uploadItem:{value:function(e){var t=this.getIndexOfItem(e),n=this.queue[t],o=this.isHTML5?"_xhrTransport":"_iframeTransport";n._prepareToUploading(),this.isUploading||(this.isUploading=!0,this[o](n))}},cancelItem:{value:function(e){var t=this.getIndexOfItem(e),n=this.queue[t],o=this.isHTML5?"_xhr":"_form";n&&n.isUploading&&n[o].abort()}},uploadAll:{value:function(){var e=this.getNotUploadedItems().filter(function(e){return!e.isUploading});e.length&&(u(e,function(e){return e._prepareToUploading()}),e[0].upload())}},cancelAll:{value:function(){var e=this.getNotUploadedItems();u(e,function(e){return e.cancel()})}},isFile:{value:function(e){return this.constructor.isFile(e)}},isFileLikeObject:{value:function(e){return this.constructor.isFileLikeObject(e)}},isArrayLikeObject:{value:function(e){return this.constructor.isArrayLikeObject(e)}},getIndexOfItem:{value:function(e){return l(e)?e:this.queue.indexOf(e)}},getNotUploadedItems:{value:function(){return this.queue.filter(function(e){return!e.isUploaded})}},getReadyItems:{value:function(){return this.queue.filter(function(e){return e.isReady&&!e.isUploading}).sort(function(e,t){return e.index-t.index})}},destroy:{value:function(){var e=this;u(this._directives,function(t){u(e._directives[t],function(e){e.destroy()})})}},onAfterAddingAll:{value:function(e){}},onAfterAddingFile:{value:function(e){}},onWhenAddingFileFailed:{value:function(e,t,n){}},onBeforeUploadItem:{value:function(e){}},onProgressItem:{value:function(e,t){}},onProgressAll:{value:function(e){}},onSuccessItem:{value:function(e,t,n,o){}},onErrorItem:{value:function(e,t,n,o){}},onCancelItem:{value:function(e,t,n,o){}},onCompleteItem:{value:function(e,t,n,o){}},onCompleteAll:{value:function(){}},_getTotalProgress:{value:function(e){if(this.removeAfterUpload)return e||0;var t=this.getNotUploadedItems().length,n=t?this.queue.length-t:this.queue.length,o=100/this.queue.length,r=(e||0)*o/100;return Math.round(n*o+r)}},_getFilters:{value:function(e){if(!e)return this.filters;if(p(e))return e;var t=e.match(/[^\s,]+/g);return this.filters.filter(function(e){return-1!==t.indexOf(e.name)})}},_render:{value:function(){t.$$phase||t.$apply()}},_folderFilter:{value:function(e){return!(!e.size&&!e.type)}},_queueLimitFilter:{value:function(){return this.queue.length<this.queueLimit}},_isValidFile:{value:function(e,t,n){var o=this;return this._failFilterIndex=-1,t.length?t.every(function(t){return o._failFilterIndex++,t.fn.call(o,e,n)}):!0}},_isSuccessCode:{value:function(e){return e>=200&&300>e||304===e}},_transformResponse:{value:function(e,t){var o=this._headersGetter(t);return u(n.defaults.transformResponse,function(t){e=t(e,o)}),e}},_parseHeaders:{value:function(e){var t,n,o,r={};return e?(u(e.split("\n"),function(e){o=e.indexOf(":"),t=e.slice(0,o).trim().toLowerCase(),n=e.slice(o+1).trim(),t&&(r[t]=r[t]?r[t]+", "+n:n)}),r):r}},_headersGetter:{value:function(e){return function(t){return t?e[t.toLowerCase()]||null:e}}},_xhrTransport:{value:function(e){var t=this,n=e._xhr=new XMLHttpRequest,o=new h;if(this._onBeforeUploadItem(e),u(e.formData,function(e){u(e,function(e,t){o.append(t,e)})}),"number"!=typeof e._file.size)throw new TypeError("The file specified is no longer valid");o.append(e.alias,e._file,e.file.name),n.upload.onprogress=function(n){var o=Math.round(n.lengthComputable?100*n.loaded/n.total:0);t._onProgressItem(e,o)},n.onload=function(){var o=t._parseHeaders(n.getAllResponseHeaders()),r=t._transformResponse(n.response,o),i=t._isSuccessCode(n.status)?"Success":"Error",s="_on"+i+"Item";t[s](e,r,n.status,o),t._onCompleteItem(e,r,n.status,o)},n.onerror=function(){var o=t._parseHeaders(n.getAllResponseHeaders()),r=t._transformResponse(n.response,o);t._onErrorItem(e,r,n.status,o),t._onCompleteItem(e,r,n.status,o)},n.onabort=function(){var o=t._parseHeaders(n.getAllResponseHeaders()),r=t._transformResponse(n.response,o);t._onCancelItem(e,r,n.status,o),t._onCompleteItem(e,r,n.status,o)},n.open(e.method,e.url,!0),n.withCredentials=e.withCredentials,u(e.headers,function(e,t){n.setRequestHeader(t,e)}),n.send(o),this._render()}},_iframeTransport:{value:function(e){var t=this,n=d('<form style="display: none;" />'),o=d('<iframe name="iframeTransport'+Date.now()+'">'),r=e._input;e._form&&e._form.replaceWith(r),e._form=n,this._onBeforeUploadItem(e),r.prop("name",e.alias),u(e.formData,function(e){u(e,function(e,t){var o=d('<input type="hidden" name="'+t+'" />');o.val(e),n.append(o)})}),n.prop({action:e.url,method:"POST",target:o.prop("name"),enctype:"multipart/form-data",encoding:"multipart/form-data"}),o.bind("load",function(){var n="",r=200;try{n=o[0].contentDocument.body.innerHTML}catch(i){r=500}var s={response:n,status:r,dummy:!0},a={},u=t._transformResponse(s.response,a);t._onSuccessItem(e,u,s.status,a),t._onCompleteItem(e,u,s.status,a)}),n.abort=function(){var i,s={status:0,dummy:!0},a={};o.unbind("load").prop("src","javascript:false;"),n.replaceWith(r),t._onCancelItem(e,i,s.status,a),t._onCompleteItem(e,i,s.status,a)},r.after(n),n.append(r).append(o),n[0].submit(),this._render()}},_onWhenAddingFileFailed:{value:function(e,t,n){this.onWhenAddingFileFailed(e,t,n)}},_onAfterAddingFile:{value:function(e){this.onAfterAddingFile(e)}},_onAfterAddingAll:{value:function(e){this.onAfterAddingAll(e)}},_onBeforeUploadItem:{value:function(e){e._onBeforeUpload(),this.onBeforeUploadItem(e)}},_onProgressItem:{value:function(e,t){var n=this._getTotalProgress(t);this.progress=n,e._onProgress(t),this.onProgressItem(e,t),this.onProgressAll(n),this._render()}},_onSuccessItem:{value:function(e,t,n,o){e._onSuccess(t,n,o),this.onSuccessItem(e,t,n,o)}},_onErrorItem:{value:function(e,t,n,o){e._onError(t,n,o),this.onErrorItem(e,t,n,o)}},_onCancelItem:{value:function(e,t,n,o){e._onCancel(t,n,o),this.onCancelItem(e,t,n,o)}},_onCompleteItem:{value:function(e,t,n,o){e._onComplete(t,n,o),this.onCompleteItem(e,t,n,o);var r=this.getReadyItems()[0];return this.isUploading=!1,f(r)?void r.upload():(this.onCompleteAll(),this.progress=this._getTotalProgress(),void this._render())}}},{isFile:{value:function(e){return g&&e instanceof g}},isFileLikeObject:{value:function(e){return e instanceof m}},isArrayLikeObject:{value:function(e){return c(e)&&"length"in e}},inherit:{value:function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.super_=t}}}),o}();return y.prototype.isHTML5=!(!g||!h),y.isHTML5=y.prototype.isHTML5,y},e.exports.$inject=["fileUploaderOptions","$rootScope","$http","$window","FileLikeObject","FileItem"]},function(e,t,n){"use strict";var o=function(e){return e&&e.__esModule?e["default"]:e},r=function(){function e(e,t){for(var n in t){var o=t[n];o.configurable=!0,o.value&&(o.writable=!0)}Object.defineProperties(e,t)}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},s=(o(n(1)),angular.copy),a=angular.isElement,u=angular.isString;e.exports=function(){var e=function(){function e(t){i(this,e);var n=a(t),o=n?t.value:t,r=u(o)?"FakePath":"Object",s="_createFrom"+r;this[s](o)}return r(e,{_createFromFakePath:{value:function(e){this.lastModifiedDate=null,this.size=null,this.type="like/"+e.slice(e.lastIndexOf(".")+1).toLowerCase(),this.name=e.slice(e.lastIndexOf("/")+e.lastIndexOf("\\")+2)}},_createFromObject:{value:function(e){this.lastModifiedDate=s(e.lastModifiedDate),this.size=e.size,this.type=e.type,this.name=e.name}}}),e}();return e},e.exports.$inject=[]},function(e,t,n){"use strict";var o=function(e){return e&&e.__esModule?e["default"]:e},r=function(){function e(e,t){for(var n in t){var o=t[n];o.configurable=!0,o.value&&(o.writable=!0)}Object.defineProperties(e,t)}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},s=(o(n(1)),angular.copy),a=angular.extend,u=angular.element,c=angular.isElement;e.exports=function(e,t){var n=function(){function n(e,o,r){i(this,n);var l=c(o),f=l?u(o):null,p=l?null:o;a(this,{url:e.url,alias:e.alias,headers:s(e.headers),formData:s(e.formData),removeAfterUpload:e.removeAfterUpload,withCredentials:e.withCredentials,method:e.method},r,{uploader:e,file:new t(o),isReady:!1,isUploading:!1,isUploaded:!1,isSuccess:!1,isCancel:!1,isError:!1,progress:0,index:null,_file:p,_input:f}),f&&this._replaceNode(f)}return r(n,{upload:{value:function(){try{this.uploader.uploadItem(this)}catch(e){this.uploader._onCompleteItem(this,"",0,[]),this.uploader._onErrorItem(this,"",0,[])}}},cancel:{value:function(){this.uploader.cancelItem(this)}},remove:{value:function(){this.uploader.removeFromQueue(this)}},onBeforeUpload:{value:function(){}},onProgress:{value:function(e){}},onSuccess:{value:function(e,t,n){}},onError:{value:function(e,t,n){}},onCancel:{value:function(e,t,n){}},onComplete:{value:function(e,t,n){}},_onBeforeUpload:{value:function(){this.isReady=!0,this.isUploading=!0,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!1,this.isError=!1,this.progress=0,this.onBeforeUpload()}},_onProgress:{value:function(e){this.progress=e,this.onProgress(e)}},_onSuccess:{value:function(e,t,n){this.isReady=!1,this.isUploading=!1,this.isUploaded=!0,this.isSuccess=!0,this.isCancel=!1,this.isError=!1,this.progress=100,this.index=null,this.onSuccess(e,t,n)}},_onError:{value:function(e,t,n){this.isReady=!1,this.isUploading=!1,this.isUploaded=!0,this.isSuccess=!1,this.isCancel=!1,this.isError=!0,this.progress=0,this.index=null,this.onError(e,t,n)}},_onCancel:{value:function(e,t,n){this.isReady=!1,this.isUploading=!1,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!0,this.isError=!1,this.progress=0,this.index=null,this.onCancel(e,t,n)}},_onComplete:{value:function(e,t,n){this.onComplete(e,t,n),this.removeAfterUpload&&this.remove()}},_destroy:{value:function(){this._input&&this._input.remove(),this._form&&this._form.remove(),delete this._form,delete this._input}},_prepareToUploading:{value:function(){this.index=this.index||++this.uploader._nextIndex,this.isReady=!0}},_replaceNode:{value:function(t){var n=e(t.clone())(t.scope());n.prop("value",null),t.css("display","none"),t.after(n)}}}),n}();return n},e.exports.$inject=["$compile","FileLikeObject"]},function(e,t,n){"use strict";var o=function(e){return e&&e.__esModule?e["default"]:e},r=function(){function e(e,t){for(var n in t){var o=t[n];o.configurable=!0,o.value&&(o.writable=!0)}Object.defineProperties(e,t)}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},s=(o(n(1)),angular.extend);e.exports=function(){var e=function(){function e(t){i(this,e),s(this,t),this.uploader._directives[this.prop].push(this),this._saveLinks(),this.bind()}return r(e,{bind:{value:function(){for(var e in this.events){var t=this.events[e];this.element.bind(e,this[t])}}},unbind:{value:function(){for(var e in this.events)this.element.unbind(e,this.events[e])}},destroy:{value:function(){var e=this.uploader._directives[this.prop].indexOf(this);this.uploader._directives[this.prop].splice(e,1),this.unbind()}},_saveLinks:{value:function(){for(var e in this.events){var t=this.events[e];this[t]=this[t].bind(this)}}}}),e}();return e.prototype.events={},e},e.exports.$inject=[]},function(e,t,n){"use strict";var o=function(e){return e&&e.__esModule?e["default"]:e},r=function(){function e(e,t){for(var n in t){var o=t[n];o.configurable=!0,o.value&&(o.writable=!0)}Object.defineProperties(e,t)}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function c(e,t,n){var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:c(r,t,n)}if("value"in o&&o.writable)return o.value;var i=o.get;if(void 0!==i)return i.call(n)},s=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},u=(o(n(1)),angular.extend);e.exports=function(e){var t=function(e){function t(e){a(this,t);var n=u(e,{events:{$destroy:"destroy",change:"onChange"},prop:"select"});i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n),this.uploader.isHTML5||this.element.removeAttr("multiple"),this.element.prop("value",null)}return s(t,e),r(t,{getOptions:{value:function(){}},getFilters:{value:function(){}},isEmptyAfterSelection:{value:function(){return!!this.element.attr("multiple")}},onChange:{value:function(){var e=this.uploader.isHTML5?this.element[0].files:this.element[0],t=this.getOptions(),n=this.getFilters();this.uploader.isHTML5||this.destroy(),this.uploader.addToQueue(e,t,n),this.isEmptyAfterSelection()&&(this.element.prop("value",null),this.element.replaceWith(this.element=this.element.clone(!0)))}}}),t}(e);return t},e.exports.$inject=["FileDirective"]},function(e,t,n){"use strict";var o=function(e){return e&&e.__esModule?e["default"]:e},r=function(){function e(e,t){for(var n in t){var o=t[n];o.configurable=!0,o.value&&(o.writable=!0)}Object.defineProperties(e,t)}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function l(e,t,n){var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:l(r,t,n)}if("value"in o&&o.writable)return o.value;var i=o.get;if(void 0!==i)return i.call(n)},s=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},u=(o(n(1)),angular.extend),c=angular.forEach;e.exports=function(e){var t=function(e){function t(e){a(this,t);var n=u(e,{events:{$destroy:"destroy",drop:"onDrop",dragover:"onDragOver",dragleave:"onDragLeave"},prop:"drop"});i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n)}return s(t,e),r(t,{getOptions:{value:function(){}},getFilters:{value:function(){}},onDrop:{value:function(e){var t=this._getTransfer(e);if(t){var n=this.getOptions(),o=this.getFilters();this._preventAndStop(e),c(this.uploader._directives.over,this._removeOverClass,this),this.uploader.addToQueue(t.files,n,o)}}},onDragOver:{value:function(e){var t=this._getTransfer(e);this._haveFiles(t.types)&&(t.dropEffect="copy",this._preventAndStop(e),c(this.uploader._directives.over,this._addOverClass,this))}},onDragLeave:{value:function(e){e.currentTarget!==this.element[0]&&(this._preventAndStop(e),c(this.uploader._directives.over,this._removeOverClass,this))}},_getTransfer:{value:function(e){return e.dataTransfer?e.dataTransfer:e.originalEvent.dataTransfer}},_preventAndStop:{value:function(e){e.preventDefault(),e.stopPropagation()}},_haveFiles:{value:function(e){return e?e.indexOf?-1!==e.indexOf("Files"):e.contains?e.contains("Files"):!1:!1}},_addOverClass:{value:function(e){e.addOverClass()}},_removeOverClass:{value:function(e){e.removeOverClass()}}}),t}(e);return t},e.exports.$inject=["FileDirective"]},function(e,t,n){"use strict";var o=function(e){return e&&e.__esModule?e["default"]:e},r=function(){function e(e,t){for(var n in t){var o=t[n];o.configurable=!0,o.value&&(o.writable=!0)}Object.defineProperties(e,t)}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function c(e,t,n){var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:c(r,t,n)}if("value"in o&&o.writable)return o.value;var i=o.get;if(void 0!==i)return i.call(n)},s=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},u=(o(n(1)),angular.extend);e.exports=function(e){var t=function(e){function t(e){a(this,t);var n=u(e,{events:{$destroy:"destroy"},prop:"over",overClass:"nv-file-over"});i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n)}return s(t,e),r(t,{addOverClass:{value:function(){this.element.addClass(this.getOverClass())}},removeOverClass:{value:function(){this.element.removeClass(this.getOverClass())}},getOverClass:{value:function(){return this.overClass}}}),t}(e);return t},e.exports.$inject=["FileDirective"]},function(e,t,n){"use strict";var o=function(e){return e&&e.__esModule?e["default"]:e};o(n(1));e.exports=function(e,t,n){return{link:function(o,r,i){var s=o.$eval(i.uploader);if(!(s instanceof t))throw new TypeError('"Uploader" must be an instance of FileUploader');var a=new n({uploader:s,element:r});a.getOptions=e(i.options).bind(a,o),a.getFilters=function(){return i.filters}}}},e.exports.$inject=["$parse","FileUploader","FileSelect"]},function(e,t,n){"use strict";var o=function(e){return e&&e.__esModule?e["default"]:e};o(n(1));e.exports=function(e,t,n){return{link:function(o,r,i){var s=o.$eval(i.uploader);if(!(s instanceof t))throw new TypeError('"Uploader" must be an instance of FileUploader');if(s.isHTML5){var a=new n({uploader:s,element:r});a.getOptions=e(i.options).bind(a,o),a.getFilters=function(){return i.filters}}}}},e.exports.$inject=["$parse","FileUploader","FileDrop"]},function(e,t,n){"use strict";var o=function(e){return e&&e.__esModule?e["default"]:e};o(n(1));e.exports=function(e,t){return{link:function(n,o,r){var i=n.$eval(r.uploader);if(!(i instanceof e))throw new TypeError('"Uploader" must be an instance of FileUploader');var s=new t({uploader:i,element:o});s.getOverClass=function(){return r.overClass||s.overClass}}}},e.exports.$inject=["FileUploader","FileOver"]}])}),angular.module("AuthManager",[]).service("SessionService",[function(){var e=!1;this.setUserAuthenticated=function(t){e=t},this.getUserAuthenticated=function(){return e}}]);var sync=angular.module("sync",["ngRoute","angularFileUpload","ui.bootstrap","ui.router","infinite-scroll","ngMaterial","ngMessages","material.svgAssetsCache","ng-mfb","pdf","ngContextMenu","angular-loading-bar","ngFileSaver","AuthManager","ngDialog"]),Logger=angular.module("Logger",[]);Logger.run(["$rootScope",function(e){e.endPoint="http://syncme.com:8000"}]),window.routes={"/Files":{url:"/Files",templateUrl:"views/files.html",controller:"FilesController",requireLogin:!0},preview:{url:"/!/:preview/:extension/:of/:user",templateUrl:"views/filePreview.html",controller:"previewController"},"/Groups":{url:"/Groups",templateUrl:"views/groups.html",controller:"GroupController",requireLogin:!0}},sync.run(["$rootScope","$log",function(e,t){e.endPoint="http://syncme.com:8000",e.$on("$routeChangeStart",function(e,t,n){for(var o in window.routes)-1!=t.indexOf(o)&&window.routes[o].requireLogin&&!SessionService.getUserAuthenticated()&&(alert("You need to be authenticated to see this page!"),e.preventDefault())})}]),sync.provider({$exceptionHandler:function(){var e=function(e,t){console.log(e)};this.$get=function(){return e}}}),sync.config(["$sceProvider","$httpProvider","$mdThemingProvider","cfpLoadingBarProvider",function(e,t,n,o){delete t.defaults.headers.common["X-Requested-With"],t.defaults.headers.post.Accept="application/json, text/javascript",t.defaults.headers.post.Accept="application/json, text/javascript",t.defaults.headers.common.authorization="Bearer 8EuqcMNkF2yP50Dicpv9hLRRp7WOSabPlCu22liY",e.enabled(!1),o.includeBar=!1}]),sync.config(["$stateProvider","$urlRouterProvider",function(e,t,n){for(var o in window.routes)e.state(o,window.routes[o]);t.otherwise("/Files")}]),function(e,t,n){"use strict";var o=t.module("ng-mfb",[]);o.run(["$templateCache",function(e){e.put("ng-mfb-menu-default.tpl.html",'<ul class="mfb-component--{{position}} mfb-{{effect}}"    data-mfb-toggle="{{togglingMethod}}" data-mfb-state="{{menuState}}">  <li class="mfb-component__wrap">    <a ng-click="clicked()" ng-mouseenter="hovered()" ng-mouseleave="hovered()"       ng-attr-data-mfb-label="{{label}}" class="mfb-component__button--main">     <i class="mfb-component__main-icon--resting {{resting}}"></i>     <i class="mfb-component__main-icon--active {{active}}"></i>    </a>    <ul class="mfb-component__list" ng-transclude>    </ul></li></ul>'),e.put("ng-mfb-menu-md.tpl.html",'<ul class="mfb-component--{{position}} mfb-{{effect}}"    data-mfb-toggle="{{togglingMethod}}" data-mfb-state="{{menuState}}">  <li class="mfb-component__wrap">    <a ng-click="clicked()" ng-mouseenter="hovered()" ng-mouseleave="hovered()"       style="background: transparent; box-shadow: none;"       ng-attr-data-mfb-label="{{label}}" class="mfb-component__button--main">     <md-button class="md-fab md-accent" aria-label={{label}} style="position:relative; margin: 0; padding:0;">       <md-icon style="left: 0; position: relative;" md-svg-icon="{{resting}}"         class="mfb-component__main-icon--resting"></md-icon>       <md-icon style="position:relative;" md-svg-icon="{{active}}"         class="mfb-component__main-icon--active"></md-icon>     </md-button>    </a>    <ul class="mfb-component__list" ng-transclude>    </ul></li></ul>'),e.put("ng-mfb-button-default.tpl.html",'<li>  <a data-mfb-label="{{label}}" class="mfb-component__button--child">    <i class="mfb-component__child-icon {{icon}}">    </i>  </a></li>'),e.put("ng-mfb-button-md.tpl.html",'<li>  <a href="" data-mfb-label="{{label}}" class="mfb-component__button--child"      style="background: transparent; box-shadow: none;">     <md-button style="margin: 0;" class="md-fab md-accent" aria-label={{label}}>       <md-icon md-svg-src="img/icons/android.svg"></md-icon>       <md-icon md-svg-icon="{{icon}}"></md-icon>     </md-button>  </a></li>')}]),o.directive("mfbButtonClose",function(){return{restrict:"A",require:"^mfbMenu",link:function(e,t,n,o){t.bind("click",function(){o.close()})}}}),o.directive("mfbMenu",["$timeout",function(t){return{restrict:"EA",transclude:!0,replace:!0,scope:{position:"@",effect:"@",label:"@",resting:"@restingIcon",active:"@activeIcon",mainAction:"&",menuState:"=?",togglingMethod:"@"},templateUrl:function(e,t){return t.templateUrl||"ng-mfb-menu-default.tpl.html"},controller:["$scope","$attrs",function(n,o){function r(){n.mainAction&&n.mainAction(),l()||s()}function i(){l()}function s(){n.menuState===p?u():a()}function a(){n.menuState=p}function u(){n.menuState=d}function c(){return e.Modernizr&&Modernizr.touch}function l(){return"hover"===n.togglingMethod}function f(){n.$apply(function(){n.togglingMethod="click"})}var p="open",d="closed";this.toggle=s,this.close=u,this.open=a,n.clicked=r,n.hovered=i,n.menuState||(n.menuState=d),c()&&l()&&t(f),o.$observe("menuState",function(){n.currentState=n.menuState})}]}}]),o.directive("mfbButton",[function(){return{require:"^mfbMenu",restrict:"EA",transclude:!0,replace:!0,scope:{icon:"@",label:"@"},templateUrl:function(e,t){return t.templateUrl||"ng-mfb-button-default.tpl.html"}}}])}(window,angular),sync.directive("leftMenu",function(){return{restrict:"AE",scope:{data:"=",user:"=",type:"="},templateUrl:"directives/leftMenu.html"}}),sync.directive("feeds",function(){return{restrict:"AE",scope:{posts:"=",replies:"=",createPost:"="},templateUrl:"directives/middleContent.html"}}),sync.directive("header",function(){return{restrict:"AE",scope:{data:"=",user:"=",type:"="},templateUrl:"./directives/header.html"}}),sync.directive("keybinding",function(){return{restrict:"E",scope:{invoke:"&"},link:function(e,t,n){Mousetrap.bind(n.on,e.invoke)}}}),sync.directive("droppable",["userInteractionNotification","Files",function(e,t){return{scope:{drop:"&",bin:"="},link:function(e,t){var n=t[0];n.addEventListener("dragover",function(e){return e.dataTransfer.dropEffect="move",e.preventDefault&&e.preventDefault(),this.classList.add("over"),!1},!1),n.addEventListener("dragenter",function(e){return this.classList.add("over"),!1},!1),n.addEventListener("dragleave",function(e){return this.classList.remove("over"),!1},!1),n.addEventListener("drop",function(t){t.preventDefault(),t.stopPropagation&&t.stopPropagation(),this.classList.remove("over");var n=this.id,o=document.getElementById(t.dataTransfer.getData("Text"));try{return this.appendChild(o),e.$apply(function(e){var t=e.drop();"undefined"!=typeof t&&t(o.id,n)}),!1}catch(t){}},!1)}}}]),Logger.controller("loginController",["$scope","$http","$rootScope","$window",function(e,t,n,o){var r={"crededential-not-found":"Credentials not found!",success:"logging in..."};e.login=function(e){function i(){o.location.href="/notVerified"}function s(){o.location.href="/sync"}$(".login-form-main-message").addClass("show success").html(r.success),t.post(n.endPoint+"/sessions",e).success(function(e){console.log(e),"1"===e?s():"0"===e?$(".login-form-main-message").addClass("show error").html(r["crededential-not-found"]):"notVerified"===e&&i()}).error(function(e){console.log("error:"+e)})}}]),Logger.controller("RegisterController",["$scope","$rootScope","$http",function(e,t,n){var o={"password-notMatch":"password do not match",SignUpInProgress:"Wait we are setting up your account."};e.register=function(e){function t(){$(".register-form-main-message").removeClass("show error")}function n(){window.location="/checkEmail"}if($(".register-form-main-message").addClass("show success").html(o.SignUpInProgress),$("#password").val()!=$("#password-confirm").val())return $(".register-form-main-message").addClass("show error").html(o["password-notMatch"]),void setTimeout(t,2e3);var r=$("#username").val(),i=$("#email").val();jQuery.post("/sessions",{username:r,password:e.password,email:i,option:e.option,phone:e.phone},function(e,t,o){1==e&&n()}).error(function(e){})}}]),Logger.directive("uniqueUsername",["isUsernameAvailable",function(e){return{restrict:"A",require:"ngModel",link:function(t,n,o,r){r.$asyncValidators.uniqueUsername=e}}}]),Logger.factory("isUsernameAvailable",["$q","$http","$rootScope",function(e,t,n){var o={"btn-loading":'<i class="fa fa-spinner fa-pulse"></i>',"btn-success":'<i class="fa fa-check"></i>',"btn-error":'<i class="fa fa-remove"></i>',"msg-success":"All Good! Redirecting...","msg-username-available":"good username available!","msg-username-taken":"oops username taken","msg-email-taken":"email taken","msg-your-phone-suck":"your phone is not valid",useAJAX:!0};return function(r){var i=e.defer();return t.get(n.endPoint+"/api/v1/users?username="+r+"&access_token=Bc7DWS7KKRLtxmddUZI1T1lZu2J1YhR8OLXGWNZn").success(function(e){function t(){$(".register-form-main-message").removeClass("show success")}function n(){$(".register-form-main-message").removeClass("show error")}"available"==e?($(".register-form-main-message").addClass("show success").html(o["msg-username-available"]),setTimeout(t,2e3)):"taken"==e&&($(".register-form-main-message").addClass("show error").html(o["msg-username-taken"]),setTimeout(n,2e3)),i.reject()}).error(function(e){i.resolve()}),i.promise}}]),Logger.directive("uniqueEmail",["isEmailAvailable",function(e){return{restrict:"A",require:"ngModel",link:function(t,n,o,r){r.$asyncValidators.uniqueEmail=e}}}]),Logger.factory("isEmailAvailable",["$q","$http","$rootScope",function(e,t,n){var o={"btn-loading":'<i class="fa fa-spinner fa-pulse"></i>',"btn-success":'<i class="fa fa-check"></i>',"btn-error":'<i class="fa fa-remove"></i>',"msg-success":"All Good! Redirecting...","msg-username-available":"good username available!",
"msg-username-taken":"oops username taken","msg-email-taken":"email taken","msg-email-available":"email available","msg-your-phone-suck":"your phone is not valid",useAJAX:!0};return function(r){var i=e.defer();return t.get(n.endPoint+"/api/v1/users?email="+r+"&access_token=Bc7DWS7KKRLtxmddUZI1T1lZu2J1YhR8OLXGWNZn").success(function(e){function t(){$(".register-form-main-message").removeClass("show success")}function n(){$(".register-form-main-message").removeClass("show error")}"email-available"==e?($(".register-form-main-message").addClass("show success").html(o["msg-email-available"]),setTimeout(t,2e3)):"email-taken"==e&&($(".register-form-main-message").addClass("show error").html(o["msg-email-taken"]),setTimeout(n,2e3)),i.reject()}).error(function(){i.resolve()}),i.promise}}]),sync.service("Fetcher",["$http","$q","$rootScope",function(e,t,n){this.fetch=function(o){var r=t.defer();return e.get(n.endPoint+"/api/v1/?+query=query+FetchUsers"+o).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise}}]),sync.service("Files",["$http","$q","$rootScope",function(e,t,n){return this.getGroupFiles=function(o){var r=t.defer();return e.get(n.endPoint+"/api/v1/groups/"+o+"/groupfiles").success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this.single=function(o){var r=t.defer();return e.get(n.endPoint+"/preview/"+o).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this.getBoxFiles=function(){var o=1,r=t.defer();return e.get(n.endPoint+"/api/v1/files/"+o+"/boxfiles").success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this.getMimeType=function(o){var r=t.defer();return e.get(n.endPoint+"/api/v1/files/mimeType/"+o).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this.downloadFile=function(o){var r=t.defer();return e.get(n.endPoint+"/api/v1/files/download/"+o+"/of/StrimUp").success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this}]),sync.service("People",["$q","$http","$rootScope",function(e,t,n){return this.get=function(){var o=e.defer();return t.get(n.endPoint+"/api/v1/suggestions").success(function(e){o.resolve(e)}).error(function(e){o.reject(e)}),o.promise},this.allIfollow=function(){var o=e.defer();return t.get(n.endPoint+"/api/v1/me/followings").success(function(e){o.resolve(e)}).error(function(e){o.reject(e)}),o.promise},this.unFollow=function(o){var r=e.defer();return t["delete"](n.endPoint+"/api/v1/me/following/"+o).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this.follow=function(o){var r=e.defer();return t.put(n.endPoint+"/api/v1/me/followings",o).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this}]),sync.service("Share",["$log","$http","$q","$rootScope",function(e,t,n,o){return this.share=function(e){var r=n.defer();return t.post(o.endPoint+"/api/v1/share",e).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this.getUser=function(e){var r=n.defer();return t.get(o.endPoint+"/api/v1/me/users/"+e).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this.fileMime=function(e){var r=n.defer();return t.get(o.endPoint+"/api/v1/mimeType/"+e).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this}]),sync.service("User",["$http","$q","$rootScope",function(e,t,n){return this.info=function(){var o=t.defer();return e.get(n.endPoint+"/api/v1/users/info").success(function(e){o.resolve(e)}).error(function(){o.reject()}),o.promise},this.groups=function(o){var r=t.defer();return e.get(n.endPoint+"/api/v1/me/groups").success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this}]),sync.service("Notification",["$http","$q","$rootScope",function(e,t,n){return this.getNotification=function(o){var r=t.defer();return e.get(n.endPoint+"/api/v1/notifications",{cache:!1}).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this.createNotification=function(o){var r=t.defer();return e.post(n.endPoint+"/api/v1/notifications",o).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this.deleteNotification=function(o){var r=t.defer();return e["delete"](n.endPoint+"/api/v1/notifications/"+o).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this}]),sync.controller("notificationController",["$scope","Notification","$log",function(e,t,n){e.init=function(){e.getNotification()},e.clearNotification=function(n){t.clearNotification(n).then(function(t){e.getNotification()},function(e){console.log(e)})},e.getNotification=function(){t.getNotification().then(function(t){e.notifications=t},function(e){})},e.init()}]),sync.directive("notify",[function(){return{restrict:"AE",scope:{},link:function(e,t,n){function o(e,t,n){if(!Notification)return void console.log("Desktop notifications not available in your browser..");if("granted"!==Notification.permission)Notification.requestPermission();else{var o=new Notification(e,{icon:"https://lh3.googleusercontent.com/-aCFiK4baXX4/VjmGJojsQ_I/AAAAAAAANJg/h-sLVX1M5zA/s48-Ic42/eggsmall.png",body:t});o.onclick=function(){window.open(n)},o.onclose=function(){console.log("Notification closed")}}}setTimeout(function(){var e="This will be title",t="Most popular article.",n="sync.com:8000";o(e,t,n)},2e3),document.addEventListener("DOMContentLoaded",function(){"granted"!==Notification.permission&&Notification.requestPermission()})}}}]),sync.factory("userInteractionNotification",function(){return{success:function(e){toastr.success(e,"Success")},warn:function(e){toastr.warning(e,"Hey")},info:function(e){toastr.info(e,"FYI")},error:function(e){toastr.error(e,"Oh No")}}}),sync.factory("userInteractionNotification",function(){return{success:function(e){toastr.success(e,"Success")},warn:function(e){toastr.warning(e,"Hey")},info:function(e){toastr.info(e,"FYI")},error:function(e){toastr.error(e,"Oh No")}}}),sync.controller("uploadDialogCtrl",["$scope","$uibModal","$mdDialog","$mdMedia",function(e,t,n,o){function r(e,t){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.answer=function(e){t.hide(e)}}e.cancel=function(){n.hide()},e.customFullscreen=o("xs")||o("sm"),e.upload=function(t){n.show({parent:angular.element(document.body),controller:r,templateUrl:"views/upload.tpl.html",parent:angular.element(document.body),targetEvent:t,clickOutsideToClose:!1}).then(function(t){e.status='You said the information was "'+t+'".'},function(){e.status="You cancelled the dialog."})},r.$inject=["$scope","$mdDialog"]}]),sync.controller("shareController",["$scope","$uibModal","$mdDialog","$mdMedia","urlShortener","Share","User",function(e,t,n,o,r,i,s){e.cancel=function(){n.hide()},e.customFullscreen=o("xs")||o("sm"),e.share=function(t,o){function i(e,t){e.getFile=function(){return e.file=r.makeShort(o)},e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.answer=function(e){t.hide(e)}}n.show({parent:angular.element(document.body),controller:i,templateUrl:"views/share.tpl.html",parent:angular.element(document.body),targetEvent:t,clickOutsideToClose:!1}).then(function(t){e.status='You said the information was "'+t+'".'},function(){e.status="You cancelled the dialog."}),i.$inject=["$scope","$mdDialog"]},e.shareFile=function(e){var t,n=e.emails,o=n.split(",");for(t=0;t<o.length;t++)i.share(e).then(function(e){console.log(e)})["catch"]()}}]),sync.service("Post",["$http","$q","$rootScope",function(e,t,n){return this.getPost=function(o){var r=t.defer();return e.get(n.endPoint+"/api/v1/me/posts?user_id"+o,{cache:!1}).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this.participate=function(o){var r=t.defer();return e.put(n.endPoint+"/api/v1/me/posts/",o).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this.createPost=function(o){var r=t.defer();return e.post(n.endPoint+"/api/v1/me/posts",o).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this.deletePost=function(o){var r=t.defer();return e["delete"](n.endPoint+"/api/v1/me/posts/"+o).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this}]),sync.controller("PostingController",["$scope","Post","$timeout","User","$interval","Notification","$log","userInteractionNotification",function(e,t,n,o,r,i,s,a,u){e.init=function(){e.postLoader(),e.getUser()},r(function(){e.postLoader()},8e3),e.getUser=function(){o._id().then(function(t){e.user=t,console.log(t)},function(e){})},e.loadMore=function(){},e.participateIntoPost=function(n,o){var r={post_id:n,user_id:o};t.participate(r).then(function(t){e.postLoader()},function(e){})},e.postLoader=function(){e.dataLoading=!0,t.getPost().then(function(t){e.posts=t,e.friends=[],e.replies=[];for(var n=0;n<t.length;n++)t[n].hasOwnProperty("friends")&&t[n].replies&&t[n].friends?(e.friends.push(t[n].friends),e.replies.push(t[n].replies)):t[n].hasOwnProperty("friends")&&(e.friends=friends.concat(traverse(t[n].friends)),e.replies=replies.concat(traverse(t[n].replies)))},function(e){})},e.imageDesc=function(e){switch(e){case 0:return"60px";case 1:return"60px";case 2:return"60px";case 3:return"60px";case 4:return"60px";default:return"60px"}console.log(e)},e.share=function(e){s.closeOptionButtons(),a.info(e)},e.createPost=function(n){var o={message:n};t.createPost(o).then(function(t){e.message="",e.posts.push(t),u.success("New Post feed created!")},function(e){})},e.init()}]),sync.directive("feedsUploader",[function(){return{restrict:"AE",replace:!1,templateUrl:"App/js/scripts/views/feedAttachment.html",scope:{action:"@"},controller:["$scope",function(e){e.progress=0,e.avatar="",e.sendFile=function(t){var n=$(t).parents("form");return""===$(t).val()?!1:(n.attr("action",e.action),e.$apply(function(){e.progress=0}),void n.ajaxSubmit({type:"POST",beforeSend:function(e){e.setRequestHeader("authorization","Bearer OqFirQS44RQTjRuWniXjdHZJQXdCuEx49rq8JY5A")},uploadProgress:function(t,n,o,r){e.$apply(function(){})},error:function(e,t,o,r){n.removeAttr("action")},success:function(o,r,i,s){var a=$(t).val().split("\\"),u=a[a.length-1];n.removeAttr("action"),e.$apply(function(){e.avatar=u})}}))}}],link:function(e,t,n,o){t.find(".fake-uploader").click(function(){t.find('input[type="file"]').click()})}}}]),sync.controller("FilesController",["$scope","Files","$log","$window","User","$uibModal","$interval","pdfDelegate","$timeout","$stateParams","$rootScope","$exceptionHandler","Fetcher",function(e,t,n,o,r,i,s,a,u,c,l,f,p){e.init=function(){e.all(),e.crazy()},e.crazy=function(){var t="{users{email,id}}";p.fetch(t).then(function(t){e.crazy=t,console.log(t)},function(e){console.log(e)})},e.all=function(){e.dataLoading=!0,t.getBoxFiles().then(function(t){e.files=t},function(e){console.log(e)})["finally"](function(){e.dataLoading=!1})},e.fileType=function(e){switch(e){case"pdf":return"img/pdf.png";case"folder":return"img/universal_folder.png";case"folder+":return"img/Add_folder.png";case"php":return"img/code.png";case"txt":return"img/code.png";case"docx":return"img/word.png";case"jpg":return"fa fa-image";case"png":return"img/video.png";case"jpeg":return"img/universal_folder.png";case"zip":return"img/zip.png";default:return"img/universal_folder.png"}},e.init()}]),sync.directive("draggable",function(){return{restrict:"AE",link:function(e,t,n){var o=t[0];o.draggable=!0,o.addEventListener("dragstart",function(e){return e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("Text",this.id),this.classList.add("drag"),!1},!1),o.addEventListener("dragend",function(e){return this.classList.remove("drag"),!1},!1)}}}),sync.controller("DragDropCtrl",["$scope","Files","$interval",function(e,t,n){e.handleDrop=function(){}}]),sync.controller("previewController",["$scope","pdfDelegate","$timeout","$stateParams","$rootScope","$exceptionHandler","Files","FileSaver","Blob",function(e,t,n,o,r,i,s,a,u){if(o.preview&&"pdf"==o.extension){e.previewable=!0;try{e.pdfUrl=r.endPoint+"/preview/"+o.preview+"/of/StrimUp",n(function(){t.$getByHandle("my-pdf-container").zoomIn(.5)},3e3)}catch(c){throw new Error(c)}}else o.preview&&"jpg"==o.extension||"png"==o.extension?(e.file_name=o.preview,e.previewable=!1):(e.file_name=o.preview,e.previewable=!1);e.goNext=function(){e.increment=1,t.$getByHandle("my-pdf-container").next(e.increment+1)},e.goPrev=function(n){t.$getByHandle("my-pdf-container").prev(e.increment-1)}}]),sync.directive("fileDownload",[function(){return{restrict:"A",replace:!0,template:'<button class="btn btn-default" data-ng-click="download()"><span class=""></span>Download</button>',controller:["$rootScope","$scope","$element","$attrs","$timeout",function(e,t,n,o,r){function i(e){u()}function s(t){e.$broadcast("dialogs.wait.complete")}function a(e,t){}function u(){r(function(){t.progress<95&&(t.progress+=(96-t.progress)/2,u())},250)}t.progress=0,t.download=function(){t.progress=0,$.fileDownload("http://syncme.com:8000/api/v1/files/download/phpxFnlheDVE5j5mcVDX.png/of/StrimUp?access_token=Bc7DWS7KKRLtxmddUZI1T1lZu2J1YhR8OLXGWNZn",{prepareCallback:i,successCallback:s,failCallback:a})}}]}}]),sync.controller("PeopleController",["$scope","People",function(e,t){e.init=function(){e.getPeopleToFollow()},e.getPeopleToFollow=function(){t.get().then(function(t){e.people=t},function(e){})},e.$on("followMember",function(n,o){n.preventDefault(),t.follow(o).then(function(t){e.getPeopleToFollow()},function(e){console.log(e)})}),e.follow=function(t){var n={id:t,option:"addPeople"};e.$emit("followMember",n)},e.init()}]),sync.service("Group",["$http","$rootScope","$q",function(e,t,n){return this.create=function(o){var r=n.defer();return e.post(t.endPoint+"/api/v1/me/groups",o).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this["delete"]=function(o){var r=n.defer();return e["delete"](t.endPoint+"/api/v1/me/groups/"+o).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this.myGroups=function(){var o=n.defer();return e.get(t.endPoint+"/api/v1/me/groups").success(function(e){o.resolve(e)}).error(function(e){console.log("differed slow:"+e),o.reject(e)}),o.promise},this.addPeople=function(o){var r=n.defer();return e.put(t.endPoint+"/api/v1/me/groups/"+JSON.stringify(o)).success(function(e){r.resolve(e)}).error(function(e){r.resolve(e)}),r.promise},this.addFileToGroup=function(o){var r=n.defer();return e.put(t.endPoint+"/api/v1/me/groups/"+JSON.stringify(o)).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this.removePeople=function(o){var r=n.defer();return e.put(t.endPoint+"/api/v1/me/groups/"+JSON.stringify(o)).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this.suggestPeople=function(o){var r=n.defer();return e.get(t.endPoint+"/api/v1/me/groups/"+o).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this}]),sync.controller("GroupController",["$scope","Group","User","Files","userInteractionNotification",function(e,t,n,o,r){e.init=function(){e.myGroups(),e.suggestedPeopleToGroup()},e.userId=function(){n._id().then(function(t){e.userId=t},function(e){console.log(e)})},e.myGroups=function(){t.myGroups().then(function(t){e.group=t},function(e){})},e.suggestedPeopleToGroup=function(n){e.showFiles=!1,e.showGroup=!1,e.showBox=!1,angular.isUndefined(n)||t.suggestPeople(n).then(function(t){e.followers=t},function(e){console.log(e)})},e.$on("refreshGroup",function(){e.init()}),e.$on("groupDeleted",function(t,n){t.preventDefault(),e.myGroups()}),e.$on("groupTobindwith",function(t,n){t.preventDefault(),e.emitted=n,1==e.showFiles&&(e.showFiles=!1),e.suggestedPeopleToGroup(n),e.addPeople=!0}),e.getGroupFiles=function(t){o.getGroupFiles(t).then(function(t){e.files=t,e.groups=[];for(var n=0;n<t.length;n++)t[n].hasOwnProperty("groups")&&t[n].groups?e.groups.push(t[n].friends):t[n].hasOwnProperty("groups")&&(e.groups=groups.concat(traverse(t[n].groups)))},function(e){console.log(e)})},e.getBoxFiles=function(t){e.emitted=t,o.getBoxFiles(t).then(function(t){e.files=t,e.groups=[];for(var n=0;n<t.length;n++)t[n].hasOwnProperty("groups")&&t[n].groups?e.groups.push(t[n].friends):t[n].hasOwnProperty("groups")&&(e.groups=groups.concat(traverse(t[n].groups)))},function(e){console.log(e)})},e.$on("showOptions",function(t,n){"box"===n.owner?(e.addPeople=!1,e.showGroup=!1,e.showBox=!0,1==e.addPeople&&(e.addPeople=!1),e.getBoxFiles(n.group_id)):"group"===n.owner&&(e.showBox=!1,e.addPeople=!1,e.showGroup=!0,1==e.addPeople&&(e.addPeople=!1),e.getGroupFiles(n.group_id))}),e.init()}]),sync.directive("myGroups",["Group","Report","userInteractionNotification",function(e,t,n,o){return{priority:10,templateUrl:"App/scripts/js/directives/groups.html",restrict:"E",scope:{id:"=userId",groups:"=",followers:"=",emitted:"=",showPeople:"=",showGroup:"=",files:"=",showBox:"="},link:function(o,r,i){o.deleteGroup=function(r){e["delete"](r).then(function(e){n.info("Group deleted"),o.$emit("groupDeleted","group deleted")},function(e){t.send("delete group error:"+e).then(function(){},function(){})})},o.createGroup=function(t){e.create(t).then(function(e){n.success("Created new Group"),o.$emit("refreshGroup",null)},function(e){console.log(e)})},o.initAddPeople=function(e){o.$emit("groupTobindwith",e)},o.addPeople=function(t){var r={option:"addMember",userId:t.userId,groupId:t.groupId};angular.isUndefined(t)||e.addPeople(r).then(function(e){n.success("Added Member in group."),o.initAddPeople(t.groupId),o.$emit("refreshGroup",""),console.log(e)},function(e,t){console.log(e)})},o.removePeople=function(t){var r={option:"removeMember",userId:t.userId,groupId:t.groupId};angular.isUndefined(t)||e.removePeople(r).then(function(e){n.info("Removed Member in group."),o.initAddPeople(t.groupId),o.$emit("refreshGroup",""),console.log(e)},function(e,t){console.log(e)})},o.removeFromGroup=function(){console.log("we can remove file in group")},o.addFileToGroup=function(t){var o={option:"addFiles",fileId:t.fileId,groupId:t.groupId};e.addFileToGroup(o).then(function(e){console.log(e)},function(e){n.warn("Some error occured during adding file")})},o.filesInBox=function(e){var t={group_id:e,owner:"box"};o.$emit("showOptions",t)},o.filesInGroup=function(e){var t={group_id:e,owner:"group"};o.$emit("showOptions",t)}}}}]),sync.service("Report",[function(e,t,n){return this.send=function(o){var r=t.defer();return e.post(n.endPoint+"/api/v1/issues",o).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this}]),sync.service("Settings",["$http","$rootScope","$q",function(e,t,n){return this.current=function(){var o=n.defer();return e.get(t.endPoint+"/api/v1/settings").success(function(e){o.resolve(e)}).error(function(e){o.reject(e)}),o.promise},this}]),sync.controller("SettingsController",["$scope","Settings","$log",function(e,t,n){e.init=function(){e.loadCurrentSettings()},e.loadCurrentSettings=function(){t.current().then(function(t){e.settings=t},function(e){n.info("errror prevent promise to be fullfill")})},e.init()}]),sync.controller("ShareController",["$scope","$rootScope","$routeParams","$route","$log","$uibModal","Share","User",function(e,t,n,o,r,i,s,a){e.share=function(e){console.log(e)}}]),angular,sync.controller("UploadController",["$scope","FileUploader","$rootScope","Files",function(e,t,n,o){var r=e.uploader=new t({url:n.endPoint+"/api/v1/upload"});r.filters.push({name:"customFilter",fn:function(e,t){return this.queue.length<10}}),r.onWhenAddingFileFailed=function(e,t,n){console.info("onWhenAddingFileFailed",e,t,n)},r.onAfterAddingFile=function(e){console.info("onAfterAddingFile",e)},r.onAfterAddingAll=function(e){console.info("onAfterAddingAll",e)},r.onBeforeUploadItem=function(e){console.info("onBeforeUploadItem",e)},r.onProgressItem=function(e,t){console.info("onProgressItem",e,t)},r.onProgressAll=function(e){console.info("onProgressAll",e)},r.onSuccessItem=function(e,t,n,o){console.info("onSuccessItem",e,t,n,o)},r.onErrorItem=function(e,t,n,o){console.info("onErrorItem",e,t,n,o)},r.onCancelItem=function(e,t,n,o){console.info("onCancelItem",e,t,n,o)},r.onCompleteItem=function(e,t,n,o){console.info("onCompleteItem",e,t,n,o)},r.onCompleteAll=function(){o.getBoxFiles().then(function(t){e.files=t},function(e){console.log(e)})["finally"](function(){e.dataLoading=!1}),console.info("onCompleteAll")},console.info("uploader",r)}]),sync.service("urlShortener",[function(){this.makeShort=function(e){return e}}]),Array.remove=function(e,t,n){var o=e.slice((n||t)+1||e.length);return e.length=0>t?e.length+t:t,e.push.apply(e,o)};var total_popups=0,popups=[];$(document).ready(function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$("#chat").keypress(function(e){if(13==e.which){alert("we are listning to enter event");var t=$("#shout_username").val(),n=$("#shout_message").val();post_data={username:t,message:n},$.post("shout.php",post_data,function(e){$(e).hide().appendTo(".message_box").fadeIn();var t=$(".message_box")[0].scrollHeight;$(".message_box").scrollTop(t),$("#shout_message").val("")}).fail(function(e){alert(e.statusText)})}}),$(".close_btn").click(function(e){var t=$(".toggle_chat").css("display");$(".toggle_chat").slideToggle(),"block"==t?$(".header div").attr("class","open_btn"):$(".header div").attr("class","close_btn")})}),window.addEventListener("resize",calculate_popups),window.addEventListener("load",calculate_popups),sync.controller("MessageController",["$http","$scope","$q","$rootScope",function(e,t,n,o){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),t.name="Muragijimana";var r=e.get(o.endPoint+"/api/v1/post"),i=e.get(o.endPoint+"/api/v1/post");n.all([r,i]).then(function(e){var t=[];return angular.forEach(e,function(e){t.push(e.data)}),t}).then(function(e){t.posts=e[0]}),$(".post-in").atwho({at:"@",data:["Peter","Tom","Anne"]})}]),sync.controller("TutorialModal",["$scope",function(e){e.open=function(){e.showModal=!0},e.ok=function(){e.showModal=!1},e.cancel=function(){e.showModal=!1}}]),sync.controller("StriminModal",["$scope",function(e){e.open=function(){e.showModal=!0},e.ok=function(){e.showModal=!1},e.cancel=function(){e.showModal=!1}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZlZWRzL2NvbnRyb2xsZXIvY2hhdFBvcHVwQ29udHJvbGxlci5qcyIsImFuZ3VsYXItdXBsb2FkLmpzIiwiYXBwQ29uZmlnLmpzIiwiYnV0dG9uLmpzIiwiZGlyZWN0aXZlcy5qcyIsImxvZ2luQ29udHJvbGxlci5qcyIsInJlZ2lzdGVyQ29udHJvbGxlci5qcyIsImNvbW1vbi9GZXRjaGVyLmpzIiwiY29tbW9uL0ZpbGVTZXJ2aWNlLmpzIiwiY29tbW9uL1Blb3BsZVNlcnZpY2UuanMiLCJjb21tb24vU2hhcmVTZXJ2aWNlLmpzIiwiY29tbW9uL1VzZXJTZXJ2aWNlLmpzIiwiY29tbW9uL25vdGlmaWNhdGlvbi5qcyIsImNvbW1vbi91c2VySW50ZXJhY3Rpb25NYW5hZ2VyLmpzIiwiY29tbW9uL3VzZXJJbnRlcmFjdGlvbk5vdGlmaWNhdGlvbi5qcyIsImRpYWxvZ3MvZGlhbG9nQ3RybC5qcyIsIm1vZHVsZXMuanMiLCJmZWVkcy9mZWVkcy5qcyIsImZpbGVzL2ZpbGUuanMiLCJmaWxlcy9wcmV2aWV3LmpzIiwiZm9sbG93ZXJzL2ZvbGxvd2Vycy5qcyIsImdyb3Vwcy9ncm91cHMuanMiLCJzZXR0aW5ncy9zZXR0aW5ncy5qcyIsInNoYXJpbmcvc2hhcmluZy5qcyIsInVwbG9hZGVyL3VwbG9hZGVyLmpzIiwidXJsU2hvcnRuZXIvc2hvcnRuZXIuanMiLCJmZWVkcy9jb250cm9sbGVyL21lc3NhZ2VDb250cm9sbGVyLmpzIiwiZmVlZHMvY29udHJvbGxlci9tb2RlbC5qcyJdLCJuYW1lcyI6WyJjbG9zZV9wb3B1cCIsImlkIiwiaWlpIiwicG9wdXBzIiwibGVuZ3RoIiwiQXJyYXkiLCJyZW1vdmUiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwic3R5bGUiLCJkaXNwbGF5IiwiY2FsY3VsYXRlX3BvcHVwcyIsImRpc3BsYXlfcG9wdXBzIiwicmlnaHQiLCJ0b3RhbF9wb3B1cHMiLCJ1bmRlZmluZWQiLCJlbGVtZW50IiwiampqIiwicmVnaXN0ZXJfcG9wdXAiLCJuYW1lIiwidW5zaGlmdCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiaW5uZXJIVE1MIiwid2lkdGgiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwicGFyc2VJbnQiLCJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJkZWZpbmUiLCJhbWQiLCJ0aGlzIiwibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJsb2FkZWQiLCJjYWxsIiwibSIsImMiLCJwIiwiX2ludGVyb3BSZXF1aXJlIiwib2JqIiwiX19lc01vZHVsZSIsIkNPTkZJRyIsIm9wdGlvbnMiLCJzZXJ2aWNlRmlsZVVwbG9hZGVyIiwic2VydmljZUZpbGVMaWtlT2JqZWN0Iiwic2VydmljZUZpbGVJdGVtIiwic2VydmljZUZpbGVEaXJlY3RpdmUiLCJzZXJ2aWNlRmlsZVNlbGVjdCIsInNlcnZpY2VGaWxlRHJvcCIsInNlcnZpY2VGaWxlT3ZlciIsImRpcmVjdGl2ZUZpbGVTZWxlY3QiLCJkaXJlY3RpdmVGaWxlRHJvcCIsImRpcmVjdGl2ZUZpbGVPdmVyIiwiYW5ndWxhciIsInZhbHVlIiwiZGlyZWN0aXZlIiwicnVuIiwiRmlsZVVwbG9hZGVyIiwiRmlsZUxpa2VPYmplY3QiLCJGaWxlSXRlbSIsIkZpbGVEaXJlY3RpdmUiLCJGaWxlU2VsZWN0IiwiRmlsZURyb3AiLCJGaWxlT3ZlciIsInVybCIsImFsaWFzIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJxdWV1ZSIsInByb2dyZXNzIiwiYXV0b1VwbG9hZCIsInJlbW92ZUFmdGVyVXBsb2FkIiwibWV0aG9kIiwiZmlsdGVycyIsImZvcm1EYXRhIiwicXVldWVMaW1pdCIsIk51bWJlciIsIk1BWF9WQUxVRSIsIndpdGhDcmVkZW50aWFscyIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImtleSIsInByb3AiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsIk9iamVjdCIsIkNvbnN0cnVjdG9yIiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwicHJvdG90eXBlIiwiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJUeXBlRXJyb3IiLCJjb3B5IiwiZXh0ZW5kIiwiZm9yRWFjaCIsImlzT2JqZWN0IiwiaXNOdW1iZXIiLCJpc0RlZmluZWQiLCJpc0FycmF5IiwiZmlsZVVwbG9hZGVyT3B0aW9ucyIsIiRyb290U2NvcGUiLCIkaHR0cCIsIiR3aW5kb3ciLCJGaWxlIiwiRm9ybURhdGEiLCJzZXR0aW5ncyIsImlzVXBsb2FkaW5nIiwiX25leHRJbmRleCIsIl9mYWlsRmlsdGVySW5kZXgiLCJfZGlyZWN0aXZlcyIsInNlbGVjdCIsImRyb3AiLCJvdmVyIiwiZm4iLCJfcXVldWVMaW1pdEZpbHRlciIsIl9mb2xkZXJGaWx0ZXIiLCJhZGRUb1F1ZXVlIiwiZmlsZXMiLCJfdGhpcyIsImxpc3QiLCJpc0FycmF5TGlrZU9iamVjdCIsImFycmF5T2ZGaWx0ZXJzIiwiX2dldEZpbHRlcnMiLCJjb3VudCIsImFkZGVkRmlsZUl0ZW1zIiwic29tZSIsInRlbXAiLCJfaXNWYWxpZEZpbGUiLCJmaWxlSXRlbSIsInB1c2giLCJfb25BZnRlckFkZGluZ0ZpbGUiLCJmaWx0ZXIiLCJfb25XaGVuQWRkaW5nRmlsZUZhaWxlZCIsIl9vbkFmdGVyQWRkaW5nQWxsIiwiX2dldFRvdGFsUHJvZ3Jlc3MiLCJfcmVuZGVyIiwidXBsb2FkQWxsIiwicmVtb3ZlRnJvbVF1ZXVlIiwiaW5kZXgiLCJnZXRJbmRleE9mSXRlbSIsIml0ZW0iLCJjYW5jZWwiLCJzcGxpY2UiLCJfZGVzdHJveSIsImNsZWFyUXVldWUiLCJ1cGxvYWRJdGVtIiwidHJhbnNwb3J0IiwiaXNIVE1MNSIsIl9wcmVwYXJlVG9VcGxvYWRpbmciLCJjYW5jZWxJdGVtIiwiYWJvcnQiLCJpdGVtcyIsImdldE5vdFVwbG9hZGVkSXRlbXMiLCJ1cGxvYWQiLCJjYW5jZWxBbGwiLCJpc0ZpbGUiLCJjb25zdHJ1Y3RvciIsImlzRmlsZUxpa2VPYmplY3QiLCJpbmRleE9mIiwiaXNVcGxvYWRlZCIsImdldFJlYWR5SXRlbXMiLCJpc1JlYWR5Iiwic29ydCIsIml0ZW0xIiwiaXRlbTIiLCJkZXN0cm95Iiwib2JqZWN0Iiwib25BZnRlckFkZGluZ0FsbCIsImZpbGVJdGVtcyIsIm9uQWZ0ZXJBZGRpbmdGaWxlIiwib25XaGVuQWRkaW5nRmlsZUZhaWxlZCIsIm9uQmVmb3JlVXBsb2FkSXRlbSIsIm9uUHJvZ3Jlc3NJdGVtIiwib25Qcm9ncmVzc0FsbCIsIm9uU3VjY2Vzc0l0ZW0iLCJyZXNwb25zZSIsInN0YXR1cyIsIm9uRXJyb3JJdGVtIiwib25DYW5jZWxJdGVtIiwib25Db21wbGV0ZUl0ZW0iLCJvbkNvbXBsZXRlQWxsIiwibm90VXBsb2FkZWQiLCJ1cGxvYWRlZCIsInJhdGlvIiwiY3VycmVudCIsIk1hdGgiLCJyb3VuZCIsIm5hbWVzIiwibWF0Y2giLCIkJHBoYXNlIiwiJGFwcGx5Iiwic2l6ZSIsInR5cGUiLCJmaWxlIiwiZXZlcnkiLCJfaXNTdWNjZXNzQ29kZSIsIl90cmFuc2Zvcm1SZXNwb25zZSIsImhlYWRlcnNHZXR0ZXIiLCJfaGVhZGVyc0dldHRlciIsImRlZmF1bHRzIiwidHJhbnNmb3JtUmVzcG9uc2UiLCJ0cmFuc2Zvcm1GbiIsIl9wYXJzZUhlYWRlcnMiLCJ2YWwiLCJpIiwicGFyc2VkIiwic3BsaXQiLCJsaW5lIiwic2xpY2UiLCJ0cmltIiwidG9Mb3dlckNhc2UiLCJwYXJzZWRIZWFkZXJzIiwiX3hoclRyYW5zcG9ydCIsInhociIsIl94aHIiLCJYTUxIdHRwUmVxdWVzdCIsImZvcm0iLCJfb25CZWZvcmVVcGxvYWRJdGVtIiwiYXBwZW5kIiwiX2ZpbGUiLCJvbnByb2dyZXNzIiwiZXZlbnQiLCJsZW5ndGhDb21wdXRhYmxlIiwidG90YWwiLCJfb25Qcm9ncmVzc0l0ZW0iLCJvbmxvYWQiLCJnZXRBbGxSZXNwb25zZUhlYWRlcnMiLCJnaXN0IiwiX29uQ29tcGxldGVJdGVtIiwib25lcnJvciIsIl9vbkVycm9ySXRlbSIsIm9uYWJvcnQiLCJfb25DYW5jZWxJdGVtIiwib3BlbiIsInNldFJlcXVlc3RIZWFkZXIiLCJzZW5kIiwiX2lmcmFtZVRyYW5zcG9ydCIsImlmcmFtZSIsIkRhdGUiLCJub3ciLCJpbnB1dCIsIl9pbnB1dCIsIl9mb3JtIiwicmVwbGFjZVdpdGgiLCJlbGVtZW50XyIsImFjdGlvbiIsImVuY3R5cGUiLCJlbmNvZGluZyIsImJpbmQiLCJodG1sIiwiY29udGVudERvY3VtZW50IiwiYm9keSIsImUiLCJkdW1teSIsIl9vblN1Y2Nlc3NJdGVtIiwidW5iaW5kIiwiYWZ0ZXIiLCJzdWJtaXQiLCJfb25CZWZvcmVVcGxvYWQiLCJfb25Qcm9ncmVzcyIsIl9vblN1Y2Nlc3MiLCJfb25FcnJvciIsIl9vbkNhbmNlbCIsIl9vbkNvbXBsZXRlIiwibmV4dEl0ZW0iLCJpbmhlcml0Iiwic291cmNlIiwiY3JlYXRlIiwic3VwZXJfIiwiJGluamVjdCIsImlzRWxlbWVudCIsImlzU3RyaW5nIiwiZmlsZU9ySW5wdXQiLCJpc0lucHV0IiwiZmFrZVBhdGhPck9iamVjdCIsInBvc3RmaXgiLCJfY3JlYXRlRnJvbUZha2VQYXRoIiwicGF0aCIsImxhc3RNb2RpZmllZERhdGUiLCJsYXN0SW5kZXhPZiIsIl9jcmVhdGVGcm9tT2JqZWN0IiwiJGNvbXBpbGUiLCJ1cGxvYWRlciIsImlzU3VjY2VzcyIsImlzQ2FuY2VsIiwiaXNFcnJvciIsIl9yZXBsYWNlTm9kZSIsIm9uQmVmb3JlVXBsb2FkIiwib25Qcm9ncmVzcyIsIm9uU3VjY2VzcyIsIm9uRXJyb3IiLCJvbkNhbmNlbCIsIm9uQ29tcGxldGUiLCJjbG9uZSIsInNjb3BlIiwiY3NzIiwiX3NhdmVMaW5rcyIsImV2ZW50cyIsIl9nZXQiLCJnZXQiLCJwcm9wZXJ0eSIsInJlY2VpdmVyIiwiZGVzYyIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsInBhcmVudCIsImdldFByb3RvdHlwZU9mIiwiZ2V0dGVyIiwiX2luaGVyaXRzIiwic3ViQ2xhc3MiLCJzdXBlckNsYXNzIiwiZW51bWVyYWJsZSIsIl9fcHJvdG9fXyIsIl9GaWxlRGlyZWN0aXZlIiwiZXh0ZW5kZWRPcHRpb25zIiwiJGRlc3Ryb3kiLCJjaGFuZ2UiLCJyZW1vdmVBdHRyIiwiZ2V0T3B0aW9ucyIsImdldEZpbHRlcnMiLCJpc0VtcHR5QWZ0ZXJTZWxlY3Rpb24iLCJhdHRyIiwib25DaGFuZ2UiLCJkcmFnb3ZlciIsImRyYWdsZWF2ZSIsIm9uRHJvcCIsInRyYW5zZmVyIiwiX2dldFRyYW5zZmVyIiwiX3ByZXZlbnRBbmRTdG9wIiwiX3JlbW92ZU92ZXJDbGFzcyIsIm9uRHJhZ092ZXIiLCJfaGF2ZUZpbGVzIiwidHlwZXMiLCJkcm9wRWZmZWN0IiwiX2FkZE92ZXJDbGFzcyIsIm9uRHJhZ0xlYXZlIiwiY3VycmVudFRhcmdldCIsImRhdGFUcmFuc2ZlciIsIm9yaWdpbmFsRXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BQcm9wYWdhdGlvbiIsImNvbnRhaW5zIiwiYWRkT3ZlckNsYXNzIiwicmVtb3ZlT3ZlckNsYXNzIiwib3ZlckNsYXNzIiwiYWRkQ2xhc3MiLCJnZXRPdmVyQ2xhc3MiLCJyZW1vdmVDbGFzcyIsIiRwYXJzZSIsImxpbmsiLCJhdHRyaWJ1dGVzIiwiJGV2YWwiLCJzZXJ2aWNlIiwidXNlcklzQXV0aGVudGljYXRlZCIsInNldFVzZXJBdXRoZW50aWNhdGVkIiwiZ2V0VXNlckF1dGhlbnRpY2F0ZWQiLCJzeW5jIiwiTG9nZ2VyIiwiZW5kUG9pbnQiLCJyb3V0ZXMiLCIvRmlsZXMiLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJyZXF1aXJlTG9naW4iLCJwcmV2aWV3IiwiL0dyb3VwcyIsIiRsb2ciLCIkb24iLCJuZXh0IiwiU2Vzc2lvblNlcnZpY2UiLCJhbGVydCIsInByb3ZpZGVyIiwiJGV4Y2VwdGlvbkhhbmRsZXIiLCJoYW5kbGVyIiwiZXhjZXB0aW9uIiwiY2F1c2UiLCJjb25zb2xlIiwibG9nIiwiJGdldCIsImNvbmZpZyIsIiRzY2VQcm92aWRlciIsIiRodHRwUHJvdmlkZXIiLCIkbWRUaGVtaW5nUHJvdmlkZXIiLCJjZnBMb2FkaW5nQmFyUHJvdmlkZXIiLCJjb21tb24iLCJwb3N0IiwiZW5hYmxlZCIsImluY2x1ZGVCYXIiLCIkc3RhdGVQcm92aWRlciIsIiR1cmxSb3V0ZXJQcm92aWRlciIsIiRzY29wZSIsInN0YXRlIiwib3RoZXJ3aXNlIiwibWZiIiwiJHRlbXBsYXRlQ2FjaGUiLCJwdXQiLCJyZXN0cmljdCIsInJlcXVpcmUiLCIkZWxlbWVudCIsIiRhdHRycyIsIm1mYk1lbnVDb250cm9sbGVyIiwiY2xvc2UiLCIkdGltZW91dCIsInRyYW5zY2x1ZGUiLCJyZXBsYWNlIiwicG9zaXRpb24iLCJlZmZlY3QiLCJsYWJlbCIsInJlc3RpbmciLCJhY3RpdmUiLCJtYWluQWN0aW9uIiwibWVudVN0YXRlIiwidG9nZ2xpbmdNZXRob2QiLCJlbGVtIiwiYXR0cnMiLCJjbGlja2VkIiwiX2lzSG92ZXJBY3RpdmUiLCJ0b2dnbGUiLCJob3ZlcmVkIiwib3BlblN0YXRlIiwiY2xvc2VkU3RhdGUiLCJfaXNUb3VjaERldmljZSIsIk1vZGVybml6ciIsInRvdWNoIiwidXNlQ2xpY2siLCIkb2JzZXJ2ZSIsImN1cnJlbnRTdGF0ZSIsImljb24iLCJkYXRhIiwidXNlciIsInBvc3RzIiwicmVwbGllcyIsImNyZWF0ZVBvc3QiLCJpbnZva2UiLCJlbCIsIk1vdXNldHJhcCIsIm9uIiwidXNlckludGVyYWN0aW9uTm90aWZpY2F0aW9uIiwiRmlsZXMiLCJiaW4iLCJhZGRFdmVudExpc3RlbmVyIiwiY2xhc3NMaXN0IiwiYWRkIiwiYmluSWQiLCJnZXREYXRhIiwiYXBwZW5kQ2hpbGQiLCJjcmVkZWRlbnRpYWwtbm90LWZvdW5kIiwic3VjY2VzcyIsImxvZ2luIiwiaW5mbyIsIm5vdFZlcmlmaWVkIiwibG9jYXRpb24iLCJocmVmIiwiUmVkaXJlY3RpbmciLCIkIiwiZXJyb3IiLCJwYXNzd29yZC1ub3RNYXRjaCIsIlNpZ25VcEluUHJvZ3Jlc3MiLCJyZWdpc3RlciIsIm1lc3NhZ2VSZW1vdmUiLCJzZXRUaW1lb3V0IiwidXNlcm5hbWUiLCJlbWFpbCIsImpRdWVyeSIsInBhc3N3b3JkIiwib3B0aW9uIiwicGhvbmUiLCJ0ZXh0U3RhdHVzIiwiaXNVc2VybmFtZUF2YWlsYWJsZSIsIm5nTW9kZWwiLCIkYXN5bmNWYWxpZGF0b3JzIiwidW5pcXVlVXNlcm5hbWUiLCIkcSIsImJ0bi1sb2FkaW5nIiwiYnRuLXN1Y2Nlc3MiLCJidG4tZXJyb3IiLCJtc2ctc3VjY2VzcyIsIm1zZy11c2VybmFtZS1hdmFpbGFibGUiLCJtc2ctdXNlcm5hbWUtdGFrZW4iLCJtc2ctZW1haWwtdGFrZW4iLCJtc2cteW91ci1waG9uZS1zdWNrIiwidXNlQUpBWCIsImRlZmVycmVkIiwiZGVmZXIiLCJ1c2VybmFtZVRha2VuIiwicmVqZWN0IiwiZXJyIiwicmVzb2x2ZSIsInByb21pc2UiLCJpc0VtYWlsQXZhaWxhYmxlIiwidW5pcXVlRW1haWwiLCJtc2ctZW1haWwtYXZhaWxhYmxlIiwibWVzc2FnZUVtYWlsVGFrZW4iLCJmZXRjaCIsImRpZmZlcmVkIiwiZ2V0R3JvdXBGaWxlcyIsImdyb3VwSWQiLCJzaW5nbGUiLCJnZXRCb3hGaWxlcyIsImdldE1pbWVUeXBlIiwiZmlsZV9uYW1lIiwiZG93bmxvYWRGaWxlIiwiYWxsSWZvbGxvdyIsInVuRm9sbG93IiwiZm9sbG93IiwicGFyYW0iLCJzaGFyZSIsInNoYXJlYmxlT2JqIiwiZ2V0VXNlciIsImZpbGVNaW1lIiwicmVzIiwiZ3JvdXBzIiwiZ2V0Tm90aWZpY2F0aW9uIiwidXNlcl9pZCIsImNhY2hlIiwiY3JlYXRlTm90aWZpY2F0aW9uIiwiTm90aWZpY2F0aW9uIiwiZGVsZXRlTm90aWZpY2F0aW9uIiwibm90aWZpY2F0aW9uIiwiaW5pdCIsImNsZWFyTm90aWZpY2F0aW9uIiwidGhlbiIsInJlc3VsdCIsIm5vdGlmaWNhdGlvbnMiLCJpQXR0cnMiLCJub3RpZnlCcm93c2VyIiwidGl0bGUiLCJwZXJtaXNzaW9uIiwicmVxdWVzdFBlcm1pc3Npb24iLCJvbmNsaWNrIiwib25jbG9zZSIsIm1lc3NhZ2UiLCJ0b2FzdHIiLCJ3YXJuIiwid2FybmluZyIsIiR1aWJNb2RhbCIsIiRtZERpYWxvZyIsIiRtZE1lZGlhIiwiRGlhbG9nQ29udHJvbGxlciIsImhpZGUiLCJhbnN3ZXIiLCJjdXN0b21GdWxsc2NyZWVuIiwiZXYiLCJzaG93IiwidGFyZ2V0RXZlbnQiLCJjbGlja091dHNpZGVUb0Nsb3NlIiwidXJsU2hvcnRlbmVyIiwiU2hhcmUiLCJVc2VyIiwiZmlsZU5hbWUiLCJnZXRGaWxlIiwibWFrZVNob3J0Iiwic2hhcmVGaWxlIiwidm0iLCJlbWFpbHMiLCJlbWFpbF9hcnJheSIsImdldFBvc3QiLCJwYXJ0aWNpcGF0ZSIsImRlbGV0ZVBvc3QiLCJQb3N0IiwiJGludGVydmFsIiwiJGlvbmljTGlzdERlbGVnYXRlIiwicG9zdExvYWRlciIsIl9pZCIsImxvYWRNb3JlIiwicGFydGljaXBhdGVJbnRvUG9zdCIsInBvc3RfaWQiLCJkYXRhTG9hZGluZyIsInRyZWUiLCJmcmllbmRzIiwiaGFzT3duUHJvcGVydHkiLCJjb25jYXQiLCJ0cmF2ZXJzZSIsImltYWdlRGVzYyIsImNsb3NlT3B0aW9uQnV0dG9ucyIsInBvc3RpbmciLCJwb3N0Q3JlYXRlZCIsImF2YXRhciIsInNlbmRGaWxlIiwiJGZvcm0iLCJwYXJlbnRzIiwiYWpheFN1Ym1pdCIsImJlZm9yZVNlbmQiLCJ1cGxvYWRQcm9ncmVzcyIsImV2dCIsInBvcyIsInRvdCIsInBlcmNDb21wbGV0ZSIsInN0YXR1c1RleHQiLCJhciIsImZpbGVuYW1lIiwiY3RybCIsImZpbmQiLCJjbGljayIsInBkZkRlbGVnYXRlIiwiJHN0YXRlUGFyYW1zIiwiRmV0Y2hlciIsImFsbCIsImNyYXp5IiwidXNlcnMiLCJmaWxlVHlwZSIsImRyYWdnYWJsZSIsImVmZmVjdEFsbG93ZWQiLCJzZXREYXRhIiwiaGFuZGxlRHJvcCIsIkZpbGVTYXZlciIsIkJsb2IiLCJleHRlbnNpb24iLCJwcmV2aWV3YWJsZSIsInBkZlVybCIsIiRnZXRCeUhhbmRsZSIsInpvb21JbiIsIkVycm9yIiwiZ29OZXh0IiwiaW5jcmVtZW50IiwiZ29QcmV2IiwicGFnZSIsInByZXYiLCJ0ZW1wbGF0ZSIsInByZXBhcmUiLCJmYWtlUHJvZ3Jlc3MiLCIkYnJvYWRjYXN0IiwiZG93bmxvYWQiLCJmaWxlRG93bmxvYWQiLCJwcmVwYXJlQ2FsbGJhY2siLCJzdWNjZXNzQ2FsbGJhY2siLCJmYWlsQ2FsbGJhY2siLCJQZW9wbGUiLCJnZXRQZW9wbGVUb0ZvbGxvdyIsInBlb3BsZSIsInBhcmFtcyIsIiRlbWl0IiwibXlHcm91cHMiLCJhZGRQZW9wbGUiLCJtZW1iZXIiLCJKU09OIiwic3RyaW5naWZ5IiwiYWRkRmlsZVRvR3JvdXAiLCJmaWxlT2JqIiwicmVtb3ZlUGVvcGxlIiwic3VnZ2VzdFBlb3BsZSIsIkdyb3VwIiwic3VnZ2VzdGVkUGVvcGxlVG9Hcm91cCIsInVzZXJJZCIsImdyb3VwIiwic2hvd0ZpbGVzIiwic2hvd0dyb3VwIiwic2hvd0JveCIsImlzVW5kZWZpbmVkIiwiZm9sbG93ZXJzIiwiYXJncyIsImdyb3VwaWQiLCJlbWl0dGVkIiwib3duZXIiLCJfIiwiZ3JvdXBfaWQiLCJSZXBvcnQiLCJwcmlvcml0eSIsInNob3dQZW9wbGUiLCJpRWxlbWVudCIsImRlbGV0ZUdyb3VwIiwiY3JlYXRlR3JvdXAiLCJpbml0QWRkUGVvcGxlIiwibmV3UGFyYW1zIiwicmVtb3ZlRnJvbUdyb3VwIiwiZmlsZUlkIiwiZmlsZXNJbkJveCIsImZpbGVzSW5Hcm91cCIsImlzc3VlIiwicmVzcCIsIlNldHRpbmdzIiwibG9hZEN1cnJlbnRTZXR0aW5ncyIsIiRyb3V0ZVBhcmFtcyIsIiRyb3V0ZSIsImZpbGVfaWQiLCJsb25nVXJsIiwiYXJyYXkiLCJmcm9tIiwidG8iLCJyZXN0IiwiYXBwbHkiLCJyZWFkeSIsImFqYXhTZXR1cCIsIlgtQ1NSRi1UT0tFTiIsImtleXByZXNzIiwid2hpY2giLCJpdXNlcm5hbWUiLCJpbWVzc2FnZSIsInBvc3RfZGF0YSIsImFwcGVuZFRvIiwiZmFkZUluIiwic2Nyb2xsdG9oIiwic2Nyb2xsSGVpZ2h0Iiwic2Nyb2xsVG9wIiwiZmFpbCIsInRvZ2dsZVN0YXRlIiwic2xpZGVUb2dnbGUiLCJpbnN0aXR1dGlvbnMiLCJ0bXAiLCJ0bXBSZXN1bHQiLCJhdHdobyIsImF0Iiwic2hvd01vZGFsIiwib2siXSwibWFwcGluZ3MiOiJBQVFZLFFBQVNBLGFBQVlDLEdBRWpCLElBQUksR0FBSUMsR0FBTSxFQUFHQSxFQUFNQyxPQUFPQyxPQUFRRixJQUVsQyxHQUFHRCxHQUFNRSxPQUFPRCxHQVFaLE1BTkFHLE9BQU1DLE9BQU9ILE9BQVFELEdBRXJCSyxTQUFTQyxlQUFlUCxHQUFJUSxNQUFNQyxRQUFVLFdBRTVDQyxvQkFRWixRQUFTQyxrQkFFTCxHQUFJQyxHQUFRLElBRVJYLEVBQU0sQ0FDVixLQUFJQSxFQUFXWSxhQUFOWixFQUFvQkEsSUFFekIsR0FBa0JhLFFBQWZaLE9BQU9ELEdBQ1YsQ0FDSSxHQUFJYyxHQUFVVCxTQUFTQyxlQUFlTCxPQUFPRCxHQUM3Q2MsR0FBUVAsTUFBTUksTUFBUUEsRUFBUSxLQUM5QkEsR0FBZ0IsSUFDaEJHLEVBQVFQLE1BQU1DLFFBQVUsUUFJaEMsSUFBSSxHQUFJTyxHQUFNZixFQUFLZSxFQUFNZCxPQUFPQyxPQUFRYSxJQUN4QyxDQUNJLEdBQUlELEdBQVVULFNBQVNDLGVBQWVMLE9BQU9jLEdBQzdDRCxHQUFRUCxNQUFNQyxRQUFVLFFBZ0VoQyxRQUFTUSxnQkFBZWpCLEVBQUlrQixHQUd4QixJQUFJLEdBQUlqQixHQUFNLEVBQUdBLEVBQU1DLE9BQU9DLE9BQVFGLElBR2xDLEdBQUdELEdBQU1FLE9BQU9ELEdBU1osTUFQQUcsT0FBTUMsT0FBT0gsT0FBUUQsR0FFckJDLE9BQU9pQixRQUFRbkIsT0FFZlUsbUJBT1IsSUFBSUssR0FBUSx5Q0FBMENmLEVBQUksSUFDdERlLElBQW1CLHlHQUNuQkEsR0FBbUIsNkJBQ25CQSxHQUFtQixrQ0FDbkJBLEdBQW1CLCtIQVN2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IiAgICAgICAgLy90aGlzIGZ1bmN0aW9uIGNhbiByZW1vdmUgYW4gYXJyYXkgZWxlbWVudC5cbiAgICAgICAgICAgIEFycmF5LnJlbW92ZSA9IGZ1bmN0aW9uKGFycmF5LCBmcm9tLCB0bykge1xuICAgICAgICAgICAgICAgIHZhciByZXN0ID0gYXJyYXkuc2xpY2UoKHRvIHx8IGZyb20pICsgMSB8fCBhcnJheS5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIGFycmF5Lmxlbmd0aCA9IGZyb20gPCAwID8gYXJyYXkubGVuZ3RoICsgZnJvbSA6IGZyb207XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFycmF5LnB1c2guYXBwbHkoYXJyYXksIHJlc3QpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciB0b3RhbF9wb3B1cHMgPSAwO1xuICAgICAgICAgICAgdmFyIHBvcHVwcyA9IFtdO1xuICAgICAgICAgICAgZnVuY3Rpb24gY2xvc2VfcG9wdXAoaWQpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZm9yKHZhciBpaWkgPSAwOyBpaWkgPCBwb3B1cHMubGVuZ3RoOyBpaWkrKylcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGlmKGlkID09IHBvcHVwc1tpaWldKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBBcnJheS5yZW1vdmUocG9wdXBzLCBpaWkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxjdWxhdGVfcG9wdXBzKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9kaXNwbGF5cyB0aGUgcG9wdXBzLiBEaXNwbGF5cyBiYXNlZCBvbiB0aGUgbWF4aW11bSBudW1iZXIgb2YgcG9wdXBzIHRoYXQgY2FuIGJlIGRpc3BsYXllZCBvbiB0aGUgY3VycmVudCB2aWV3cG9ydCB3aWR0aFxuICAgICAgICAgICAgZnVuY3Rpb24gZGlzcGxheV9wb3B1cHMoKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHZhciByaWdodCA9IDIyMDtcblxuICAgICAgICAgICAgICAgIHZhciBpaWkgPSAwO1xuICAgICAgICAgICAgICAgIGZvcihpaWk7IGlpaSA8IHRvdGFsX3BvcHVwczsgaWlpKyspXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBpZihwb3B1cHNbaWlpXSAhPSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocG9wdXBzW2lpaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5yaWdodCA9IHJpZ2h0ICsgXCJweFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQgPSByaWdodCArIDMyMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZvcih2YXIgampqID0gaWlpOyBqamogPCBwb3B1cHMubGVuZ3RoOyBqamorKylcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocG9wdXBzW2pqal0pO1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICB0aGlzIHNjcmlwdCBoYXMgYmVlbiBhZGRlZCBieSBtZSBmb3IgbXkgY3VzdG9tZVxuXG4gICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgJC5hamF4U2V0dXAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1gtQ1NSRi1UT0tFTic6ICQoJ21ldGFbbmFtZT1cImNzcmYtdG9rZW5cIl0nKS5hdHRyKCdjb250ZW50JylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgJChcIiNjaGF0XCIpLmtleXByZXNzKGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoZXZ0LndoaWNoID09IDEzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoXCJ3ZSBhcmUgbGlzdG5pbmcgdG8gZW50ZXIgZXZlbnRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpdXNlcm5hbWUgPSAkKCcjc2hvdXRfdXNlcm5hbWUnKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGltZXNzYWdlID0gJCgnI3Nob3V0X21lc3NhZ2UnKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zdF9kYXRhID0geyd1c2VybmFtZSc6aXVzZXJuYW1lLCAnbWVzc2FnZSc6aW1lc3NhZ2V9O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vc2VuZCBkYXRhIHRvIFwic2hvdXQucGhwXCIgdXNpbmcgalF1ZXJ5ICQucG9zdCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQucG9zdCgnc2hvdXQucGhwJywgcG9zdF9kYXRhLCBmdW5jdGlvbihkYXRhKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYXBwZW5kIGRhdGEgaW50byBtZXNzYWdlYm94IHdpdGggalF1ZXJ5IGZhZGUgZWZmZWN0IVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJChkYXRhKS5oaWRlKCkuYXBwZW5kVG8oJy5tZXNzYWdlX2JveCcpLmZhZGVJbigpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2tlZXAgc2Nyb2xsZWQgdG8gYm90dG9tIG9mIGNoYXQhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsdG9oID0gJCgnLm1lc3NhZ2VfYm94JylbMF0uc2Nyb2xsSGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLm1lc3NhZ2VfYm94Jykuc2Nyb2xsVG9wKHNjcm9sbHRvaCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vcmVzZXQgdmFsdWUgb2YgbWVzc2FnZSBib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNzaG91dF9tZXNzYWdlJykudmFsKCcnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5mYWlsKGZ1bmN0aW9uKGVycikge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYWxlcnQgSFRUUCBzZXJ2ZXIgZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoZXJyLnN0YXR1c1RleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vdG9nZ2xlIGhpZGUvc2hvdyBzaG91dCBib3hcbiAgICAgICAgICAgICAgICAgICAgJChcIi5jbG9zZV9idG5cIikuY2xpY2soZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vZ2V0IENTUyBkaXNwbGF5IHN0YXRlIG9mIC50b2dnbGVfY2hhdCBlbGVtZW50XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG9nZ2xlU3RhdGUgPSAkKCcudG9nZ2xlX2NoYXQnKS5jc3MoJ2Rpc3BsYXknKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy90b2dnbGUgc2hvdy9oaWRlIGNoYXQgYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcudG9nZ2xlX2NoYXQnKS5zbGlkZVRvZ2dsZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3VzZSB0b2dnbGVTdGF0ZSB2YXIgdG8gY2hhbmdlIGNsb3NlL29wZW4gaWNvbiBpbWFnZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYodG9nZ2xlU3RhdGUgPT0gJ2Jsb2NrJylcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiLmhlYWRlciBkaXZcIikuYXR0cignY2xhc3MnLCAnb3Blbl9idG4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIuaGVhZGVyIGRpdlwiKS5hdHRyKCdjbGFzcycsICdjbG9zZV9idG4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8qZG9uZSBhZGRpbmcgbXkgY3VzdG9tIHNjcmlwdHMqL1xuICAgICAgICAgICAgLy9jcmVhdGVzIG1hcmt1cCBmb3IgYSBuZXcgcG9wdXAuIEFkZHMgdGhlIGlkIHRvIHBvcHVwcyBhcnJheS5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHJlZ2lzdGVyX3BvcHVwKGlkLCBuYW1lKVxuICAgICAgICAgICAge1xuXG4gICAgICAgICAgICAgICAgZm9yKHZhciBpaWkgPSAwOyBpaWkgPCBwb3B1cHMubGVuZ3RoOyBpaWkrKylcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIC8vYWxyZWFkeSByZWdpc3RlcmVkLiBCcmluZyBpdCB0byBmcm9udC5cbiAgICAgICAgICAgICAgICAgICAgaWYoaWQgPT0gcG9wdXBzW2lpaV0pXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEFycmF5LnJlbW92ZShwb3B1cHMsIGlpaSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVwcy51bnNoaWZ0KGlkKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsY3VsYXRlX3BvcHVwcygpO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50PSc8ZGl2IGNsYXNzPVwicG9wdXAtYm94IGNoYXQtcG9wdXBcIiBpZD1cIicrIGlkICsnXCI+JztcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudCA9ZWxlbWVudCArICc8ZGl2IHN0eWxlPVwiYmFja2dyb3VuZDojZGRkO2NvbG9yOiNmZmY7XCIgY2xhc3M9XCJoZWFkZXJcIj5Hcm91cDxkaXYgY2xhc3M9XCJjbG9zZV9idG5cIj4mbmJzcDs8L2Rpdj48L2Rpdj4nO1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50ID1lbGVtZW50ICsgJyA8ZGl2IGNsYXNzPVwidG9nZ2xlX2NoYXRcIj4nO1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50ID1lbGVtZW50ICsgJzxkaXYgY2xhc3M9XCJtZXNzYWdlX2JveFwiPjwvZGl2Pic7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQgPWVsZW1lbnQgKyAnPHRleHRhcmVhIHN0eWxlPVwiYmFja2dyb3VuZDp3aGl0ZTttYXJnaW4tdG9wOjE4MHB4O1wiIGlkPVwiY2hhdFwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgcm93cz1cIjNcIiByZXF1aXJlZD1cInJlcXVpcmVkXCI+PC90ZXh0YXJlYT4nO1xuICAgICAgICAgICAgICAgICAgICAvLyBlbGVtZW50ID1lbGVtZW50ICtcbiAgICAgICAgICAgICAgICAgICAgLy8gZWxlbWVudCA9IGVsZW1lbnQgKyAnPGRpdiBjbGFzcz1cInBvcHVwLWhlYWQtcmlnaHRcIj48YSBocmVmPVwiamF2YXNjcmlwdDpjbG9zZV9wb3B1cChcXCcnKyBpZCArJ1xcJyk7XCI+JiMxMDAwNTs8L2E+PC9kaXY+JztcbiAgICAgICAgICAgICAgICAvLyB2YXIgZWxlbWVudCA9ICc8ZGl2IGNsYXNzPVwicG9wdXAtYm94IGNoYXQtcG9wdXBcIiBpZD1cIicrIGlkICsnXCI+JztcbiAgICAgICAgICAgICAgICAvLyBlbGVtZW50ID0gZWxlbWVudCArICc8ZGl2IGNsYXNzPVwicG9wdXAtaGVhZFwiPic7XG4gICAgICAgICAgICAgICAgLy8gZWxlbWVudCA9IGVsZW1lbnQgKyAnPGRpdiBjbGFzcz1cInBvcHVwLWhlYWQtbGVmdFwiPicrIG5hbWUgKyc8L2Rpdj4nO1xuICAgICAgICAgICAgICAgIC8vIGVsZW1lbnQgPSBlbGVtZW50ICsgJzxkaXYgY2xhc3M9XCJwb3B1cC1oZWFkLXJpZ2h0XCI+PGEgaHJlZj1cImphdmFzY3JpcHQ6Y2xvc2VfcG9wdXAoXFwnJysgaWQgKydcXCcpO1wiPiYjMTAwMDU7PC9hPjwvZGl2Pic7XG4gICAgICAgICAgICAgICAgLy8gZWxlbWVudCA9IGVsZW1lbnQgKyAnPGRpdiBzdHlsZT1cImNsZWFyOiBib3RoO1wiPjwvZGl2PjwvZGl2PjxwIG9uY2xpY2s9XCJ0KClcIiBpZD1cIm1cIj48L3A+PGRpdiBjbGFzcz1cInBvcHVwLW1lc3NhZ2VzXCI+PHRleHRhcmVhICBjbGFzcz1cInRvcFwiPjwvdGV4dGFyZWE+PC9kaXY+PC9kaXY+JztcblxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYm9keVwiKVswXS5pbm5lckhUTUwgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJvZHlcIilbMF0uaW5uZXJIVE1MICsgZWxlbWVudDtcblxuICAgICAgICAgICAgICAgIHBvcHVwcy51bnNoaWZ0KGlkKTtcblxuICAgICAgICAgICAgICAgIGNhbGN1bGF0ZV9wb3B1cHMoKTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL2NhbGN1bGF0ZSB0aGUgdG90YWwgbnVtYmVyIG9mIHBvcHVwcyBzdWl0YWJsZSBhbmQgdGhlbiBwb3B1bGF0ZSB0aGUgdG9hdGFsX3BvcHVwcyB2YXJpYWJsZS5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZV9wb3B1cHMoKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHZhciB3aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgICAgICAgICAgIGlmKHdpZHRoIDwgNTQwKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdG90YWxfcG9wdXBzID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgd2lkdGggPSB3aWR0aCAtIDIwMDtcbiAgICAgICAgICAgICAgICAgICAgLy8zMjAgaXMgd2lkdGggb2YgYSBzaW5nbGUgcG9wdXAgYm94XG4gICAgICAgICAgICAgICAgICAgIHRvdGFsX3BvcHVwcyA9IHBhcnNlSW50KHdpZHRoLzMyMCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZGlzcGxheV9wb3B1cHMoKTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL3JlY2FsY3VsYXRlIHdoZW4gd2luZG93IGlzIGxvYWRlZCBhbmQgYWxzbyB3aGVuIHdpbmRvdyBpcyByZXNpemVkLlxuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgY2FsY3VsYXRlX3BvcHVwcyk7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgY2FsY3VsYXRlX3BvcHVwcyk7IiwiLypcbiBhbmd1bGFyLWZpbGUtdXBsb2FkIHYyLjIuMFxuIGh0dHBzOi8vZ2l0aHViLmNvbS9uZXJ2Z2gvYW5ndWxhci1maWxlLXVwbG9hZFxuKi9cblxuKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiYW5ndWxhci1maWxlLXVwbG9hZFwiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJhbmd1bGFyLWZpbGUtdXBsb2FkXCJdID0gZmFjdG9yeSgpO1xufSkodGhpcywgZnVuY3Rpb24oKSB7XG5yZXR1cm4gLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge30sXG4vKioqKioqLyBcdFx0XHRpZDogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblxuXHR2YXIgX2ludGVyb3BSZXF1aXJlID0gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqW1wiZGVmYXVsdFwiXSA6IG9iajsgfTtcblxuXHR2YXIgQ09ORklHID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oMSkpO1xuXG5cdHZhciBvcHRpb25zID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oMikpO1xuXG5cdHZhciBzZXJ2aWNlRmlsZVVwbG9hZGVyID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oMykpO1xuXG5cdHZhciBzZXJ2aWNlRmlsZUxpa2VPYmplY3QgPSBfaW50ZXJvcFJlcXVpcmUoX193ZWJwYWNrX3JlcXVpcmVfXyg0KSk7XG5cblx0dmFyIHNlcnZpY2VGaWxlSXRlbSA9IF9pbnRlcm9wUmVxdWlyZShfX3dlYnBhY2tfcmVxdWlyZV9fKDUpKTtcblxuXHR2YXIgc2VydmljZUZpbGVEaXJlY3RpdmUgPSBfaW50ZXJvcFJlcXVpcmUoX193ZWJwYWNrX3JlcXVpcmVfXyg2KSk7XG5cblx0dmFyIHNlcnZpY2VGaWxlU2VsZWN0ID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oNykpO1xuXG5cdHZhciBzZXJ2aWNlRmlsZURyb3AgPSBfaW50ZXJvcFJlcXVpcmUoX193ZWJwYWNrX3JlcXVpcmVfXyg4KSk7XG5cblx0dmFyIHNlcnZpY2VGaWxlT3ZlciA9IF9pbnRlcm9wUmVxdWlyZShfX3dlYnBhY2tfcmVxdWlyZV9fKDkpKTtcblxuXHR2YXIgZGlyZWN0aXZlRmlsZVNlbGVjdCA9IF9pbnRlcm9wUmVxdWlyZShfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKSk7XG5cblx0dmFyIGRpcmVjdGl2ZUZpbGVEcm9wID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oMTEpKTtcblxuXHR2YXIgZGlyZWN0aXZlRmlsZU92ZXIgPSBfaW50ZXJvcFJlcXVpcmUoX193ZWJwYWNrX3JlcXVpcmVfXygxMikpO1xuXG5cdGFuZ3VsYXIubW9kdWxlKENPTkZJRy5uYW1lLCBbXSkudmFsdWUoXCJmaWxlVXBsb2FkZXJPcHRpb25zXCIsIG9wdGlvbnMpLmZhY3RvcnkoXCJGaWxlVXBsb2FkZXJcIiwgc2VydmljZUZpbGVVcGxvYWRlcikuZmFjdG9yeShcIkZpbGVMaWtlT2JqZWN0XCIsIHNlcnZpY2VGaWxlTGlrZU9iamVjdCkuZmFjdG9yeShcIkZpbGVJdGVtXCIsIHNlcnZpY2VGaWxlSXRlbSkuZmFjdG9yeShcIkZpbGVEaXJlY3RpdmVcIiwgc2VydmljZUZpbGVEaXJlY3RpdmUpLmZhY3RvcnkoXCJGaWxlU2VsZWN0XCIsIHNlcnZpY2VGaWxlU2VsZWN0KS5mYWN0b3J5KFwiRmlsZURyb3BcIiwgc2VydmljZUZpbGVEcm9wKS5mYWN0b3J5KFwiRmlsZU92ZXJcIiwgc2VydmljZUZpbGVPdmVyKS5kaXJlY3RpdmUoXCJudkZpbGVTZWxlY3RcIiwgZGlyZWN0aXZlRmlsZVNlbGVjdCkuZGlyZWN0aXZlKFwibnZGaWxlRHJvcFwiLCBkaXJlY3RpdmVGaWxlRHJvcCkuZGlyZWN0aXZlKFwibnZGaWxlT3ZlclwiLCBkaXJlY3RpdmVGaWxlT3ZlcikucnVuKFtcIkZpbGVVcGxvYWRlclwiLCBcIkZpbGVMaWtlT2JqZWN0XCIsIFwiRmlsZUl0ZW1cIiwgXCJGaWxlRGlyZWN0aXZlXCIsIFwiRmlsZVNlbGVjdFwiLCBcIkZpbGVEcm9wXCIsIFwiRmlsZU92ZXJcIiwgZnVuY3Rpb24gKEZpbGVVcGxvYWRlciwgRmlsZUxpa2VPYmplY3QsIEZpbGVJdGVtLCBGaWxlRGlyZWN0aXZlLCBGaWxlU2VsZWN0LCBGaWxlRHJvcCwgRmlsZU92ZXIpIHtcblx0ICAgIC8vIG9ubHkgZm9yIGNvbXBhdGliaWxpdHlcblx0ICAgIEZpbGVVcGxvYWRlci5GaWxlTGlrZU9iamVjdCA9IEZpbGVMaWtlT2JqZWN0O1xuXHQgICAgRmlsZVVwbG9hZGVyLkZpbGVJdGVtID0gRmlsZUl0ZW07XG5cdCAgICBGaWxlVXBsb2FkZXIuRmlsZURpcmVjdGl2ZSA9IEZpbGVEaXJlY3RpdmU7XG5cdCAgICBGaWxlVXBsb2FkZXIuRmlsZVNlbGVjdCA9IEZpbGVTZWxlY3Q7XG5cdCAgICBGaWxlVXBsb2FkZXIuRmlsZURyb3AgPSBGaWxlRHJvcDtcblx0ICAgIEZpbGVVcGxvYWRlci5GaWxlT3ZlciA9IEZpbGVPdmVyO1xuXHR9XSk7XG5cbi8qKiovIH0sXG5cbi8qIDEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0ge1xuXHRcdFwibmFtZVwiOiBcImFuZ3VsYXJGaWxlVXBsb2FkXCJcblx0fTtcblxuLyoqKi8gfSxcbi8qIDIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdG1vZHVsZS5leHBvcnRzID0ge1xuXHQgICAgdXJsOiBcIi9cIixcblx0ICAgIGFsaWFzOiBcImZpbGVcIixcblx0ICAgIGhlYWRlcnM6IHsnYXV0aG9yaXphdGlvbic6ICdCZWFyZXIgOEV1cWNNTmtGMnlQNTBEaWNwdjloTFJScDdXT1NhYlBsQ3UyMmxpWSd9LFxuXHQgICAgcXVldWU6IFtdLFxuXHQgICAgcHJvZ3Jlc3M6IDAsXG5cdCAgICBhdXRvVXBsb2FkOiBmYWxzZSxcblx0ICAgIHJlbW92ZUFmdGVyVXBsb2FkOiBmYWxzZSxcblx0ICAgIG1ldGhvZDogXCJQT1NUXCIsXG5cdCAgICBmaWx0ZXJzOiBbXSxcblx0ICAgIGZvcm1EYXRhOiBbXSxcblx0ICAgIHF1ZXVlTGltaXQ6IE51bWJlci5NQVhfVkFMVUUsXG5cdCAgICB3aXRoQ3JlZGVudGlhbHM6IGZhbHNlXG5cdH07XG5cbi8qKiovIH0sXG4vKiAzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblxuXHR2YXIgX2ludGVyb3BSZXF1aXJlID0gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqW1wiZGVmYXVsdFwiXSA6IG9iajsgfTtcblxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGtleSBpbiBwcm9wcykgeyB2YXIgcHJvcCA9IHByb3BzW2tleV07IHByb3AuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKHByb3AudmFsdWUpIHByb3Aud3JpdGFibGUgPSB0cnVlOyB9IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpOyB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0pKCk7XG5cblx0dmFyIF9jbGFzc0NhbGxDaGVjayA9IGZ1bmN0aW9uIChpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9O1xuXG5cdHZhciBDT05GSUcgPSBfaW50ZXJvcFJlcXVpcmUoX193ZWJwYWNrX3JlcXVpcmVfXygxKSk7XG5cblx0dmFyIGNvcHkgPSBhbmd1bGFyLmNvcHk7XG5cdHZhciBleHRlbmQgPSBhbmd1bGFyLmV4dGVuZDtcblx0dmFyIGZvckVhY2ggPSBhbmd1bGFyLmZvckVhY2g7XG5cdHZhciBpc09iamVjdCA9IGFuZ3VsYXIuaXNPYmplY3Q7XG5cdHZhciBpc051bWJlciA9IGFuZ3VsYXIuaXNOdW1iZXI7XG5cdHZhciBpc0RlZmluZWQgPSBhbmd1bGFyLmlzRGVmaW5lZDtcblx0dmFyIGlzQXJyYXkgPSBhbmd1bGFyLmlzQXJyYXk7XG5cdHZhciBlbGVtZW50ID0gYW5ndWxhci5lbGVtZW50O1xuXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGZpbGVVcGxvYWRlck9wdGlvbnMsICRyb290U2NvcGUsICRodHRwLCAkd2luZG93LCBGaWxlTGlrZU9iamVjdCwgRmlsZUl0ZW0pIHtcblx0ICAgIHZhciBGaWxlID0gJHdpbmRvdy5GaWxlO1xuXHQgICAgdmFyIEZvcm1EYXRhID0gJHdpbmRvdy5Gb3JtRGF0YTtcblxuXHQgICAgdmFyIEZpbGVVcGxvYWRlciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKipcblx0ICAgICAgICAgKiBQVUJMSUNcblx0ICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKi9cblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIEZpbGVVcGxvYWRlclxuXHQgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cblx0ICAgICAgICAgKiBAY29uc3RydWN0b3Jcblx0ICAgICAgICAgKi9cblxuXHQgICAgICAgIGZ1bmN0aW9uIEZpbGVVcGxvYWRlcihvcHRpb25zKSB7XG5cdCAgICAgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBGaWxlVXBsb2FkZXIpO1xuXG5cdCAgICAgICAgICAgIHZhciBzZXR0aW5ncyA9IGNvcHkoZmlsZVVwbG9hZGVyT3B0aW9ucyk7XG5cblx0ICAgICAgICAgICAgZXh0ZW5kKHRoaXMsIHNldHRpbmdzLCBvcHRpb25zLCB7XG5cdCAgICAgICAgICAgICAgICBpc1VwbG9hZGluZzogZmFsc2UsXG5cdCAgICAgICAgICAgICAgICBfbmV4dEluZGV4OiAwLFxuXHQgICAgICAgICAgICAgICAgX2ZhaWxGaWx0ZXJJbmRleDogLTEsXG5cdCAgICAgICAgICAgICAgICBfZGlyZWN0aXZlczogeyBzZWxlY3Q6IFtdLCBkcm9wOiBbXSwgb3ZlcjogW10gfVxuXHQgICAgICAgICAgICB9KTtcblxuXHQgICAgICAgICAgICAvLyBhZGQgZGVmYXVsdCBmaWx0ZXJzXG5cdCAgICAgICAgICAgIHRoaXMuZmlsdGVycy51bnNoaWZ0KHsgbmFtZTogXCJxdWV1ZUxpbWl0XCIsIGZuOiB0aGlzLl9xdWV1ZUxpbWl0RmlsdGVyIH0pO1xuXHQgICAgICAgICAgICB0aGlzLmZpbHRlcnMudW5zaGlmdCh7IG5hbWU6IFwiZm9sZGVyXCIsIGZuOiB0aGlzLl9mb2xkZXJGaWx0ZXIgfSk7XG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgX2NyZWF0ZUNsYXNzKEZpbGVVcGxvYWRlciwge1xuXHQgICAgICAgICAgICBhZGRUb1F1ZXVlOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIEFkZHMgaXRlbXMgdG8gdGhlIHF1ZXVlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGV8SFRNTElucHV0RWxlbWVudHxPYmplY3R8RmlsZUxpc3R8QXJyYXk8T2JqZWN0Pn0gZmlsZXNcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7QXJyYXk8RnVuY3Rpb24+fFN0cmluZ30gZmlsdGVyc1xuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRUb1F1ZXVlKGZpbGVzLCBvcHRpb25zLCBmaWx0ZXJzKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuXHQgICAgICAgICAgICAgICAgICAgIHZhciBsaXN0ID0gdGhpcy5pc0FycmF5TGlrZU9iamVjdChmaWxlcykgPyBmaWxlcyA6IFtmaWxlc107XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGFycmF5T2ZGaWx0ZXJzID0gdGhpcy5fZ2V0RmlsdGVycyhmaWx0ZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgY291bnQgPSB0aGlzLnF1ZXVlLmxlbmd0aDtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgYWRkZWRGaWxlSXRlbXMgPSBbXTtcblxuXHQgICAgICAgICAgICAgICAgICAgIGZvckVhY2gobGlzdCwgZnVuY3Rpb24gKHNvbWUgLyp7RmlsZXxIVE1MSW5wdXRFbGVtZW50fE9iamVjdH0qLykge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IG5ldyBGaWxlTGlrZU9iamVjdChzb21lKTtcblxuXHQgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuX2lzVmFsaWRGaWxlKHRlbXAsIGFycmF5T2ZGaWx0ZXJzLCBvcHRpb25zKSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpbGVJdGVtID0gbmV3IEZpbGVJdGVtKF90aGlzLCBzb21lLCBvcHRpb25zKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZGVkRmlsZUl0ZW1zLnB1c2goZmlsZUl0ZW0pO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucXVldWUucHVzaChmaWxlSXRlbSk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5fb25BZnRlckFkZGluZ0ZpbGUoZmlsZUl0ZW0pO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpbHRlciA9IGFycmF5T2ZGaWx0ZXJzW190aGlzLl9mYWlsRmlsdGVySW5kZXhdO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX29uV2hlbkFkZGluZ0ZpbGVGYWlsZWQodGVtcCwgZmlsdGVyLCBvcHRpb25zKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgIH0pO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucXVldWUubGVuZ3RoICE9PSBjb3VudCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9vbkFmdGVyQWRkaW5nQWxsKGFkZGVkRmlsZUl0ZW1zKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9ncmVzcyA9IHRoaXMuX2dldFRvdGFsUHJvZ3Jlc3MoKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZW5kZXIoKTtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hdXRvVXBsb2FkKSB0aGlzLnVwbG9hZEFsbCgpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICByZW1vdmVGcm9tUXVldWU6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmVtb3ZlIGl0ZW1zIGZyb20gdGhlIHF1ZXVlLiBSZW1vdmUgbGFzdDogaW5kZXggPSAtMVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtGaWxlSXRlbXxOdW1iZXJ9IHZhbHVlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZUZyb21RdWV1ZSh2YWx1ZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMuZ2V0SW5kZXhPZkl0ZW0odmFsdWUpO1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBpdGVtID0gdGhpcy5xdWV1ZVtpbmRleF07XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0uaXNVcGxvYWRpbmcpIGl0ZW0uY2FuY2VsKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWV1ZS5zcGxpY2UoaW5kZXgsIDEpO1xuXHQgICAgICAgICAgICAgICAgICAgIGl0ZW0uX2Rlc3Ryb3koKTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2dyZXNzID0gdGhpcy5fZ2V0VG90YWxQcm9ncmVzcygpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBjbGVhclF1ZXVlOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENsZWFycyB0aGUgcXVldWVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYXJRdWV1ZSgpIHtcblx0ICAgICAgICAgICAgICAgICAgICB3aGlsZSAodGhpcy5xdWV1ZS5sZW5ndGgpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWV1ZVswXS5yZW1vdmUoKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9ncmVzcyA9IDA7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIHVwbG9hZEl0ZW06IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogVXBsb2FkcyBhIGl0ZW0gZnJvbSB0aGUgcXVldWVcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZUl0ZW18TnVtYmVyfSB2YWx1ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiB1cGxvYWRJdGVtKHZhbHVlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5nZXRJbmRleE9mSXRlbSh2YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSB0aGlzLnF1ZXVlW2luZGV4XTtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgdHJhbnNwb3J0ID0gdGhpcy5pc0hUTUw1ID8gXCJfeGhyVHJhbnNwb3J0XCIgOiBcIl9pZnJhbWVUcmFuc3BvcnRcIjtcblxuXHQgICAgICAgICAgICAgICAgICAgIGl0ZW0uX3ByZXBhcmVUb1VwbG9hZGluZygpO1xuXHQgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzVXBsb2FkaW5nKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgICAgICAgICAgICB9dGhpcy5pc1VwbG9hZGluZyA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpc1t0cmFuc3BvcnRdKGl0ZW0pO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBjYW5jZWxJdGVtOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENhbmNlbHMgdXBsb2FkaW5nIG9mIGl0ZW0gZnJvbSB0aGUgcXVldWVcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZUl0ZW18TnVtYmVyfSB2YWx1ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjYW5jZWxJdGVtKHZhbHVlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5nZXRJbmRleE9mSXRlbSh2YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSB0aGlzLnF1ZXVlW2luZGV4XTtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgcHJvcCA9IHRoaXMuaXNIVE1MNSA/IFwiX3hoclwiIDogXCJfZm9ybVwiO1xuXHQgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtICYmIGl0ZW0uaXNVcGxvYWRpbmcpIGl0ZW1bcHJvcF0uYWJvcnQoKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgdXBsb2FkQWxsOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFVwbG9hZHMgYWxsIG5vdCB1cGxvYWRlZCBpdGVtcyBvZiBxdWV1ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiB1cGxvYWRBbGwoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW1zID0gdGhpcy5nZXROb3RVcGxvYWRlZEl0ZW1zKCkuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhaXRlbS5pc1VwbG9hZGluZztcblx0ICAgICAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAoIWl0ZW1zLmxlbmd0aCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICAgICAgICAgICAgfWZvckVhY2goaXRlbXMsIGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLl9wcmVwYXJlVG9VcGxvYWRpbmcoKTtcblx0ICAgICAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICAgICAgICBpdGVtc1swXS51cGxvYWQoKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgY2FuY2VsQWxsOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENhbmNlbHMgYWxsIHVwbG9hZHNcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2FuY2VsQWxsKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBpdGVtcyA9IHRoaXMuZ2V0Tm90VXBsb2FkZWRJdGVtcygpO1xuXHQgICAgICAgICAgICAgICAgICAgIGZvckVhY2goaXRlbXMsIGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmNhbmNlbCgpO1xuXHQgICAgICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBpc0ZpbGU6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmV0dXJucyBcInRydWVcIiBpZiB2YWx1ZSBhbiBpbnN0YW5jZSBvZiBGaWxlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGlzRmlsZSh2YWx1ZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLmlzRmlsZSh2YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIGlzRmlsZUxpa2VPYmplY3Q6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmV0dXJucyBcInRydWVcIiBpZiB2YWx1ZSBhbiBpbnN0YW5jZSBvZiBGaWxlTGlrZU9iamVjdFxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMge0Jvb2xlYW59XG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc0ZpbGVMaWtlT2JqZWN0KHZhbHVlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IuaXNGaWxlTGlrZU9iamVjdCh2YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIGlzQXJyYXlMaWtlT2JqZWN0OiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJldHVybnMgXCJ0cnVlXCIgaWYgdmFsdWUgaXMgYXJyYXkgbGlrZSBvYmplY3Rcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc0FycmF5TGlrZU9iamVjdCh2YWx1ZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLmlzQXJyYXlMaWtlT2JqZWN0KHZhbHVlKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgZ2V0SW5kZXhPZkl0ZW06IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmV0dXJucyBhIGluZGV4IG9mIGl0ZW0gZnJvbSB0aGUgcXVldWVcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7SXRlbXxOdW1iZXJ9IHZhbHVlXG5cdCAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7TnVtYmVyfVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJbmRleE9mSXRlbSh2YWx1ZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBpc051bWJlcih2YWx1ZSkgPyB2YWx1ZSA6IHRoaXMucXVldWUuaW5kZXhPZih2YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIGdldE5vdFVwbG9hZGVkSXRlbXM6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmV0dXJucyBub3QgdXBsb2FkZWQgaXRlbXNcblx0ICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtBcnJheX1cblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Tm90VXBsb2FkZWRJdGVtcygpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5xdWV1ZS5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFpdGVtLmlzVXBsb2FkZWQ7XG5cdCAgICAgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIGdldFJlYWR5SXRlbXM6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmV0dXJucyBpdGVtcyByZWFkeSBmb3IgdXBsb2FkXG5cdCAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7QXJyYXl9XG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFJlYWR5SXRlbXMoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucXVldWUuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmlzUmVhZHkgJiYgIWl0ZW0uaXNVcGxvYWRpbmc7XG5cdCAgICAgICAgICAgICAgICAgICAgfSkuc29ydChmdW5jdGlvbiAoaXRlbTEsIGl0ZW0yKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtMS5pbmRleCAtIGl0ZW0yLmluZGV4O1xuXHQgICAgICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBkZXN0cm95OiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIERlc3Ryb3lzIGluc3RhbmNlIG9mIEZpbGVVcGxvYWRlclxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95KCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cblx0ICAgICAgICAgICAgICAgICAgICBmb3JFYWNoKHRoaXMuX2RpcmVjdGl2ZXMsIGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgZm9yRWFjaChfdGhpcy5fZGlyZWN0aXZlc1trZXldLCBmdW5jdGlvbiAob2JqZWN0KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QuZGVzdHJveSgpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgb25BZnRlckFkZGluZ0FsbDoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtBcnJheX0gZmlsZUl0ZW1zXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uQWZ0ZXJBZGRpbmdBbGwoZmlsZUl0ZW1zKSB7fVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBvbkFmdGVyQWRkaW5nRmlsZToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtGaWxlSXRlbX0gZmlsZUl0ZW1cblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25BZnRlckFkZGluZ0ZpbGUoZmlsZUl0ZW0pIHt9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIG9uV2hlbkFkZGluZ0ZpbGVGYWlsZWQ6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogQ2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZXxPYmplY3R9IGl0ZW1cblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBmaWx0ZXJcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uV2hlbkFkZGluZ0ZpbGVGYWlsZWQoaXRlbSwgZmlsdGVyLCBvcHRpb25zKSB7fVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBvbkJlZm9yZVVwbG9hZEl0ZW06IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogQ2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZUl0ZW19IGZpbGVJdGVtXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uQmVmb3JlVXBsb2FkSXRlbShmaWxlSXRlbSkge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgb25Qcm9ncmVzc0l0ZW06IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogQ2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZUl0ZW19IGZpbGVJdGVtXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gcHJvZ3Jlc3Ncblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25Qcm9ncmVzc0l0ZW0oZmlsZUl0ZW0sIHByb2dyZXNzKSB7fVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBvblByb2dyZXNzQWxsOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gcHJvZ3Jlc3Ncblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25Qcm9ncmVzc0FsbChwcm9ncmVzcykge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgb25TdWNjZXNzSXRlbToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtGaWxlSXRlbX0gaXRlbVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSByZXNwb25zZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHN0YXR1c1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGhlYWRlcnNcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25TdWNjZXNzSXRlbShpdGVtLCByZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKSB7fVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBvbkVycm9ySXRlbToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtGaWxlSXRlbX0gaXRlbVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSByZXNwb25zZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHN0YXR1c1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGhlYWRlcnNcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25FcnJvckl0ZW0oaXRlbSwgcmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycykge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgb25DYW5jZWxJdGVtOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGVJdGVtfSBpdGVtXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyp9IHJlc3BvbnNlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gc3RhdHVzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaGVhZGVyc1xuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNhbmNlbEl0ZW0oaXRlbSwgcmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycykge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgb25Db21wbGV0ZUl0ZW06IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogQ2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZUl0ZW19IGl0ZW1cblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7Kn0gcmVzcG9uc2Vcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzdGF0dXNcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBoZWFkZXJzXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ29tcGxldGVJdGVtKGl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpIHt9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIG9uQ29tcGxldGVBbGw6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogQ2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25Db21wbGV0ZUFsbCgpIHt9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9nZXRUb3RhbFByb2dyZXNzOiB7XG5cdCAgICAgICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKlxuXHQgICAgICAgICAgICAgICAgICogUFJJVkFURVxuXHQgICAgICAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKiovXG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJldHVybnMgdGhlIHRvdGFsIHByb2dyZXNzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gW3ZhbHVlXVxuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMge051bWJlcn1cblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRUb3RhbFByb2dyZXNzKHZhbHVlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVtb3ZlQWZ0ZXJVcGxvYWQpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlIHx8IDA7XG5cdCAgICAgICAgICAgICAgICAgICAgfXZhciBub3RVcGxvYWRlZCA9IHRoaXMuZ2V0Tm90VXBsb2FkZWRJdGVtcygpLmxlbmd0aDtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgdXBsb2FkZWQgPSBub3RVcGxvYWRlZCA/IHRoaXMucXVldWUubGVuZ3RoIC0gbm90VXBsb2FkZWQgOiB0aGlzLnF1ZXVlLmxlbmd0aDtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgcmF0aW8gPSAxMDAgLyB0aGlzLnF1ZXVlLmxlbmd0aDtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudCA9ICh2YWx1ZSB8fCAwKSAqIHJhdGlvIC8gMTAwO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hdGgucm91bmQodXBsb2FkZWQgKiByYXRpbyArIGN1cnJlbnQpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfZ2V0RmlsdGVyczoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBSZXR1cm5zIGFycmF5IG9mIGZpbHRlcnNcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7QXJyYXk8RnVuY3Rpb24+fFN0cmluZ30gZmlsdGVyc1xuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMge0FycmF5PEZ1bmN0aW9uPn1cblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRGaWx0ZXJzKGZpbHRlcnMpIHtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAoIWZpbHRlcnMpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmlsdGVycztcblx0ICAgICAgICAgICAgICAgICAgICB9aWYgKGlzQXJyYXkoZmlsdGVycykpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpbHRlcnM7XG5cdCAgICAgICAgICAgICAgICAgICAgfXZhciBuYW1lcyA9IGZpbHRlcnMubWF0Y2goL1teXFxzLF0rL2cpO1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbHRlcnMuZmlsdGVyKGZ1bmN0aW9uIChmaWx0ZXIpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5hbWVzLmluZGV4T2YoZmlsdGVyLm5hbWUpICE9PSAtMTtcblx0ICAgICAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX3JlbmRlcjoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBVcGRhdGVzIGh0bWxcblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW5kZXIoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKCEkcm9vdFNjb3BlLiQkcGhhc2UpICRyb290U2NvcGUuJGFwcGx5KCk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9mb2xkZXJGaWx0ZXI6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmV0dXJucyBcInRydWVcIiBpZiBpdGVtIGlzIGEgZmlsZSAobm90IGZvbGRlcilcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZXxGaWxlTGlrZU9iamVjdH0gaXRlbVxuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMge0Jvb2xlYW59XG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfZm9sZGVyRmlsdGVyKGl0ZW0pIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gISEoaXRlbS5zaXplIHx8IGl0ZW0udHlwZSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9xdWV1ZUxpbWl0RmlsdGVyOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJldHVybnMgXCJ0cnVlXCIgaWYgdGhlIGxpbWl0IGhhcyBub3QgYmVlbiByZWFjaGVkXG5cdCAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9xdWV1ZUxpbWl0RmlsdGVyKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnF1ZXVlLmxlbmd0aCA8IHRoaXMucXVldWVMaW1pdDtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX2lzVmFsaWRGaWxlOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJldHVybnMgXCJ0cnVlXCIgaWYgZmlsZSBwYXNzIGFsbCBmaWx0ZXJzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGV8T2JqZWN0fSBmaWxlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0FycmF5PEZ1bmN0aW9uPn0gZmlsdGVyc1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2lzVmFsaWRGaWxlKGZpbGUsIGZpbHRlcnMsIG9wdGlvbnMpIHtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5fZmFpbEZpbHRlckluZGV4ID0gLTE7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFmaWx0ZXJzLmxlbmd0aCA/IHRydWUgOiBmaWx0ZXJzLmV2ZXJ5KGZ1bmN0aW9uIChmaWx0ZXIpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX2ZhaWxGaWx0ZXJJbmRleCsrO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmlsdGVyLmZuLmNhbGwoX3RoaXMsIGZpbGUsIG9wdGlvbnMpO1xuXHQgICAgICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfaXNTdWNjZXNzQ29kZToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDaGVja3Mgd2hldGhlciB1cGxvYWQgc3VjY2Vzc2Z1bFxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHN0YXR1c1xuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMge0Jvb2xlYW59XG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaXNTdWNjZXNzQ29kZShzdGF0dXMpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RhdHVzID49IDIwMCAmJiBzdGF0dXMgPCAzMDAgfHwgc3RhdHVzID09PSAzMDQ7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF90cmFuc2Zvcm1SZXNwb25zZToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBUcmFuc2Zvcm1zIHRoZSBzZXJ2ZXIgcmVzcG9uc2Vcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7Kn0gcmVzcG9uc2Vcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBoZWFkZXJzXG5cdCAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7Kn1cblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF90cmFuc2Zvcm1SZXNwb25zZShyZXNwb25zZSwgaGVhZGVycykge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBoZWFkZXJzR2V0dGVyID0gdGhpcy5faGVhZGVyc0dldHRlcihoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICBmb3JFYWNoKCRodHRwLmRlZmF1bHRzLnRyYW5zZm9ybVJlc3BvbnNlLCBmdW5jdGlvbiAodHJhbnNmb3JtRm4pIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSB0cmFuc2Zvcm1GbihyZXNwb25zZSwgaGVhZGVyc0dldHRlcik7XG5cdCAgICAgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfcGFyc2VIZWFkZXJzOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFBhcnNlZCByZXNwb25zZSBoZWFkZXJzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0gaGVhZGVyc1xuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMge09iamVjdH1cblx0ICAgICAgICAgICAgICAgICAqIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9ibG9iL21hc3Rlci9zcmMvbmcvaHR0cC5qc1xuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX3BhcnNlSGVhZGVycyhoZWFkZXJzKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIHBhcnNlZCA9IHt9LFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBrZXksXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhbCxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgaTtcblxuXHQgICAgICAgICAgICAgICAgICAgIGlmICghaGVhZGVycykge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VkO1xuXHQgICAgICAgICAgICAgICAgICAgIH1mb3JFYWNoKGhlYWRlcnMuc3BsaXQoXCJcXG5cIiksIGZ1bmN0aW9uIChsaW5lKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBsaW5lLmluZGV4T2YoXCI6XCIpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBrZXkgPSBsaW5lLnNsaWNlKDAsIGkpLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSBsaW5lLnNsaWNlKGkgKyAxKS50cmltKCk7XG5cblx0ICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGtleSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VkW2tleV0gPSBwYXJzZWRba2V5XSA/IHBhcnNlZFtrZXldICsgXCIsIFwiICsgdmFsIDogdmFsO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgfSk7XG5cblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VkO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfaGVhZGVyc0dldHRlcjoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBSZXR1cm5zIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBoZWFkZXJzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gcGFyc2VkSGVhZGVyc1xuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMge0Z1bmN0aW9ufVxuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2hlYWRlcnNHZXR0ZXIocGFyc2VkSGVhZGVycykge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAobmFtZSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBpZiAobmFtZSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlZEhlYWRlcnNbbmFtZS50b0xvd2VyQ2FzZSgpXSB8fCBudWxsO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZWRIZWFkZXJzO1xuXHQgICAgICAgICAgICAgICAgICAgIH07XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF94aHJUcmFuc3BvcnQ6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogVGhlIFhNTEh0dHBSZXF1ZXN0IHRyYW5zcG9ydFxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtGaWxlSXRlbX0gaXRlbVxuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX3hoclRyYW5zcG9ydChpdGVtKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuXHQgICAgICAgICAgICAgICAgICAgIHZhciB4aHIgPSBpdGVtLl94aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgZm9ybSA9IG5ldyBGb3JtRGF0YSgpO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5fb25CZWZvcmVVcGxvYWRJdGVtKGl0ZW0pO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgZm9yRWFjaChpdGVtLmZvcm1EYXRhLCBmdW5jdGlvbiAob2JqKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGZvckVhY2gob2JqLCBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybS5hcHBlbmQoa2V5LCB2YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICAgICAgICAgIH0pO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpdGVtLl9maWxlLnNpemUgIT0gXCJudW1iZXJcIikge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiVGhlIGZpbGUgc3BlY2lmaWVkIGlzIG5vIGxvbmdlciB2YWxpZFwiKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cblx0ICAgICAgICAgICAgICAgICAgICBmb3JtLmFwcGVuZChpdGVtLmFsaWFzLCBpdGVtLl9maWxlLCBpdGVtLmZpbGUubmFtZSk7XG5cblx0ICAgICAgICAgICAgICAgICAgICB4aHIudXBsb2FkLm9ucHJvZ3Jlc3MgPSBmdW5jdGlvbiAoZXZlbnQpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByb2dyZXNzID0gTWF0aC5yb3VuZChldmVudC5sZW5ndGhDb21wdXRhYmxlID8gZXZlbnQubG9hZGVkICogMTAwIC8gZXZlbnQudG90YWwgOiAwKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX29uUHJvZ3Jlc3NJdGVtKGl0ZW0sIHByb2dyZXNzKTtcblx0ICAgICAgICAgICAgICAgICAgICB9O1xuXG5cdCAgICAgICAgICAgICAgICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhlYWRlcnMgPSBfdGhpcy5fcGFyc2VIZWFkZXJzKHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXNwb25zZSA9IF90aGlzLl90cmFuc2Zvcm1SZXNwb25zZSh4aHIucmVzcG9uc2UsIGhlYWRlcnMpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ2lzdCA9IF90aGlzLl9pc1N1Y2Nlc3NDb2RlKHhoci5zdGF0dXMpID8gXCJTdWNjZXNzXCIgOiBcIkVycm9yXCI7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXRob2QgPSBcIl9vblwiICsgZ2lzdCArIFwiSXRlbVwiO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBfdGhpc1ttZXRob2RdKGl0ZW0sIHJlc3BvbnNlLCB4aHIuc3RhdHVzLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX29uQ29tcGxldGVJdGVtKGl0ZW0sIHJlc3BvbnNlLCB4aHIuc3RhdHVzLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICB9O1xuXG5cdCAgICAgICAgICAgICAgICAgICAgeGhyLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoZWFkZXJzID0gX3RoaXMuX3BhcnNlSGVhZGVycyh4aHIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSBfdGhpcy5fdHJhbnNmb3JtUmVzcG9uc2UoeGhyLnJlc3BvbnNlLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX29uRXJyb3JJdGVtKGl0ZW0sIHJlc3BvbnNlLCB4aHIuc3RhdHVzLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX29uQ29tcGxldGVJdGVtKGl0ZW0sIHJlc3BvbnNlLCB4aHIuc3RhdHVzLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICB9O1xuXG5cdCAgICAgICAgICAgICAgICAgICAgeGhyLm9uYWJvcnQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoZWFkZXJzID0gX3RoaXMuX3BhcnNlSGVhZGVycyh4aHIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSBfdGhpcy5fdHJhbnNmb3JtUmVzcG9uc2UoeGhyLnJlc3BvbnNlLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX29uQ2FuY2VsSXRlbShpdGVtLCByZXNwb25zZSwgeGhyLnN0YXR1cywgaGVhZGVycyk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9vbkNvbXBsZXRlSXRlbShpdGVtLCByZXNwb25zZSwgeGhyLnN0YXR1cywgaGVhZGVycyk7XG5cdCAgICAgICAgICAgICAgICAgICAgfTtcblxuXHQgICAgICAgICAgICAgICAgICAgIHhoci5vcGVuKGl0ZW0ubWV0aG9kLCBpdGVtLnVybCwgdHJ1ZSk7XG5cblx0ICAgICAgICAgICAgICAgICAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gaXRlbS53aXRoQ3JlZGVudGlhbHM7XG5cblx0ICAgICAgICAgICAgICAgICAgICBmb3JFYWNoKGl0ZW0uaGVhZGVycywgZnVuY3Rpb24gKHZhbHVlLCBuYW1lKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKG5hbWUsIHZhbHVlKTtcblx0ICAgICAgICAgICAgICAgICAgICB9KTtcblxuXHQgICAgICAgICAgICAgICAgICAgIHhoci5zZW5kKGZvcm0pO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlbmRlcigpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfaWZyYW1lVHJhbnNwb3J0OiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFRoZSBJRnJhbWUgdHJhbnNwb3J0XG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGVJdGVtfSBpdGVtXG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaWZyYW1lVHJhbnNwb3J0KGl0ZW0pIHtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGZvcm0gPSBlbGVtZW50KFwiPGZvcm0gc3R5bGU9XFxcImRpc3BsYXk6IG5vbmU7XFxcIiAvPlwiKTtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgaWZyYW1lID0gZWxlbWVudChcIjxpZnJhbWUgbmFtZT1cXFwiaWZyYW1lVHJhbnNwb3J0XCIgKyBEYXRlLm5vdygpICsgXCJcXFwiPlwiKTtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgaW5wdXQgPSBpdGVtLl9pbnB1dDtcblxuXHQgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLl9mb3JtKSBpdGVtLl9mb3JtLnJlcGxhY2VXaXRoKGlucHV0KTsgLy8gcmVtb3ZlIG9sZCBmb3JtXG5cdCAgICAgICAgICAgICAgICAgICAgaXRlbS5fZm9ybSA9IGZvcm07IC8vIHNhdmUgbGluayB0byBuZXcgZm9ybVxuXG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5fb25CZWZvcmVVcGxvYWRJdGVtKGl0ZW0pO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgaW5wdXQucHJvcChcIm5hbWVcIiwgaXRlbS5hbGlhcyk7XG5cblx0ICAgICAgICAgICAgICAgICAgICBmb3JFYWNoKGl0ZW0uZm9ybURhdGEsIGZ1bmN0aW9uIChvYmopIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgZm9yRWFjaChvYmosIGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudF8gPSBlbGVtZW50KFwiPGlucHV0IHR5cGU9XFxcImhpZGRlblxcXCIgbmFtZT1cXFwiXCIgKyBrZXkgKyBcIlxcXCIgLz5cIik7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50Xy52YWwodmFsdWUpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybS5hcHBlbmQoZWxlbWVudF8pO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICAgICAgICB9KTtcblxuXHQgICAgICAgICAgICAgICAgICAgIGZvcm0ucHJvcCh7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogaXRlbS51cmwsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldDogaWZyYW1lLnByb3AoXCJuYW1lXCIpLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBlbmN0eXBlOiBcIm11bHRpcGFydC9mb3JtLWRhdGFcIixcblx0ICAgICAgICAgICAgICAgICAgICAgICAgZW5jb2Rpbmc6IFwibXVsdGlwYXJ0L2Zvcm0tZGF0YVwiIC8vIG9sZCBJRVxuXHQgICAgICAgICAgICAgICAgICAgIH0pO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgaWZyYW1lLmJpbmQoXCJsb2FkXCIsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGh0bWwgPSBcIlwiO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RhdHVzID0gMjAwO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGaXggZm9yIGxlZ2FjeSBJRSBicm93c2VycyB0aGF0IGxvYWRzIGludGVybmFsIGVycm9yIHBhZ2Vcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdoZW4gZmFpbGVkIFdTIHJlc3BvbnNlIHJlY2VpdmVkLiBJbiBjb25zZXF1ZW5jZSBpZnJhbWVcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnRlbnQgYWNjZXNzIGRlbmllZCBlcnJvciBpcyB0aHJvd24gYmVjb3VzZSB0cnlpbmcgdG9cblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFjY2VzcyBjcm9zcyBkb21haW4gcGFnZS4gV2hlbiBzdWNoIHRoaW5nIG9jY3VycyBub3RpZnlpbmdcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdpdGggZW1wdHkgcmVzcG9uc2Ugb2JqZWN0LiBTZWUgbW9yZSBpbmZvIGF0OlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xNTEzNjIvYWNjZXNzLWlzLWRlbmllZC1lcnJvci1vbi1hY2Nlc3NpbmctaWZyYW1lLWRvY3VtZW50LW9iamVjdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90ZSB0aGF0IGlmIG5vbiBzdGFuZGFyZCA0eHggb3IgNXh4IGVycm9yIGNvZGUgcmV0dXJuZWRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZyb20gV1MgdGhlbiByZXNwb25zZSBjb250ZW50IGNhbiBiZSBhY2Nlc3NlZCB3aXRob3V0IGVycm9yXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBidXQgJ1hIUicgc3RhdHVzIGJlY29tZXMgMjAwLiBJbiBvcmRlciB0byBhdm9pZCBjb25mdXNpb25cblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJldHVybmluZyByZXNwb25zZSB2aWEgc2FtZSAnc3VjY2VzcycgZXZlbnQgaGFuZGxlci5cblxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZml4ZWQgYW5ndWxhci5jb250ZW50cygpIGZvciBpZnJhbWVzXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sID0gaWZyYW1lWzBdLmNvbnRlbnREb2N1bWVudC5ib2R5LmlubmVySFRNTDtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW4gY2FzZSB3ZSBydW4gaW50byB0aGUgYWNjZXNzLWlzLWRlbmllZCBlcnJvciBvciB3ZSBoYXZlIGFub3RoZXIgZXJyb3Igb24gdGhlIHNlcnZlciBzaWRlXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAoaW50ZW50aW9uYWwgNTAwLDQwLi4uIGVycm9ycyksIHdlIGF0IGxlYXN0IHNheSAnc29tZXRoaW5nIHdlbnQgd3JvbmcnIC0+IDUwMFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzID0gNTAwO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB9XG5cblx0ICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHhociA9IHsgcmVzcG9uc2U6IGh0bWwsIHN0YXR1czogc3RhdHVzLCBkdW1teTogdHJ1ZSB9O1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaGVhZGVycyA9IHt9O1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSBfdGhpcy5fdHJhbnNmb3JtUmVzcG9uc2UoeGhyLnJlc3BvbnNlLCBoZWFkZXJzKTtcblxuXHQgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5fb25TdWNjZXNzSXRlbShpdGVtLCByZXNwb25zZSwgeGhyLnN0YXR1cywgaGVhZGVycyk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9vbkNvbXBsZXRlSXRlbShpdGVtLCByZXNwb25zZSwgeGhyLnN0YXR1cywgaGVhZGVycyk7XG5cdCAgICAgICAgICAgICAgICAgICAgfSk7XG5cblx0ICAgICAgICAgICAgICAgICAgICBmb3JtLmFib3J0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgeGhyID0geyBzdGF0dXM6IDAsIGR1bW15OiB0cnVlIH07XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoZWFkZXJzID0ge307XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXNwb25zZTtcblxuXHQgICAgICAgICAgICAgICAgICAgICAgICBpZnJhbWUudW5iaW5kKFwibG9hZFwiKS5wcm9wKFwic3JjXCIsIFwiamF2YXNjcmlwdDpmYWxzZTtcIik7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGZvcm0ucmVwbGFjZVdpdGgoaW5wdXQpO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9vbkNhbmNlbEl0ZW0oaXRlbSwgcmVzcG9uc2UsIHhoci5zdGF0dXMsIGhlYWRlcnMpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5fb25Db21wbGV0ZUl0ZW0oaXRlbSwgcmVzcG9uc2UsIHhoci5zdGF0dXMsIGhlYWRlcnMpO1xuXHQgICAgICAgICAgICAgICAgICAgIH07XG5cblx0ICAgICAgICAgICAgICAgICAgICBpbnB1dC5hZnRlcihmb3JtKTtcblx0ICAgICAgICAgICAgICAgICAgICBmb3JtLmFwcGVuZChpbnB1dCkuYXBwZW5kKGlmcmFtZSk7XG5cblx0ICAgICAgICAgICAgICAgICAgICBmb3JtWzBdLnN1Ym1pdCgpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlbmRlcigpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfb25XaGVuQWRkaW5nRmlsZUZhaWxlZDoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBJbm5lciBjYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtGaWxlfE9iamVjdH0gaXRlbVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGZpbHRlclxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9vbldoZW5BZGRpbmdGaWxlRmFpbGVkKGl0ZW0sIGZpbHRlciwgb3B0aW9ucykge1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMub25XaGVuQWRkaW5nRmlsZUZhaWxlZChpdGVtLCBmaWx0ZXIsIG9wdGlvbnMpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfb25BZnRlckFkZGluZ0ZpbGU6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogSW5uZXIgY2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZUl0ZW19IGl0ZW1cblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX29uQWZ0ZXJBZGRpbmdGaWxlKGl0ZW0pIHtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQWZ0ZXJBZGRpbmdGaWxlKGl0ZW0pO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfb25BZnRlckFkZGluZ0FsbDoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBJbm5lciBjYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtBcnJheTxGaWxlSXRlbT59IGl0ZW1zXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkFmdGVyQWRkaW5nQWxsKGl0ZW1zKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkFmdGVyQWRkaW5nQWxsKGl0ZW1zKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX29uQmVmb3JlVXBsb2FkSXRlbToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiAgSW5uZXIgY2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZUl0ZW19IGl0ZW1cblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkJlZm9yZVVwbG9hZEl0ZW0oaXRlbSkge1xuXHQgICAgICAgICAgICAgICAgICAgIGl0ZW0uX29uQmVmb3JlVXBsb2FkKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkJlZm9yZVVwbG9hZEl0ZW0oaXRlbSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9vblByb2dyZXNzSXRlbToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBJbm5lciBjYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtGaWxlSXRlbX0gaXRlbVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHByb2dyZXNzXG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfb25Qcm9ncmVzc0l0ZW0oaXRlbSwgcHJvZ3Jlc3MpIHtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgdG90YWwgPSB0aGlzLl9nZXRUb3RhbFByb2dyZXNzKHByb2dyZXNzKTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2dyZXNzID0gdG90YWw7XG5cdCAgICAgICAgICAgICAgICAgICAgaXRlbS5fb25Qcm9ncmVzcyhwcm9ncmVzcyk7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5vblByb2dyZXNzSXRlbShpdGVtLCBwcm9ncmVzcyk7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5vblByb2dyZXNzQWxsKHRvdGFsKTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZW5kZXIoKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX29uU3VjY2Vzc0l0ZW06IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogSW5uZXIgY2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZUl0ZW19IGl0ZW1cblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7Kn0gcmVzcG9uc2Vcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzdGF0dXNcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBoZWFkZXJzXG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfb25TdWNjZXNzSXRlbShpdGVtLCByZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaXRlbS5fb25TdWNjZXNzKHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMub25TdWNjZXNzSXRlbShpdGVtLCByZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX29uRXJyb3JJdGVtOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIElubmVyIGNhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGVJdGVtfSBpdGVtXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyp9IHJlc3BvbnNlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gc3RhdHVzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaGVhZGVyc1xuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX29uRXJyb3JJdGVtKGl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpIHtcblx0ICAgICAgICAgICAgICAgICAgICBpdGVtLl9vbkVycm9yKHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMub25FcnJvckl0ZW0oaXRlbSwgcmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycyk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9vbkNhbmNlbEl0ZW06IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogSW5uZXIgY2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZUl0ZW19IGl0ZW1cblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7Kn0gcmVzcG9uc2Vcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzdGF0dXNcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBoZWFkZXJzXG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfb25DYW5jZWxJdGVtKGl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpIHtcblx0ICAgICAgICAgICAgICAgICAgICBpdGVtLl9vbkNhbmNlbChyZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQ2FuY2VsSXRlbShpdGVtLCByZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX29uQ29tcGxldGVJdGVtOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIElubmVyIGNhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGVJdGVtfSBpdGVtXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyp9IHJlc3BvbnNlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gc3RhdHVzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaGVhZGVyc1xuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX29uQ29tcGxldGVJdGVtKGl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpIHtcblx0ICAgICAgICAgICAgICAgICAgICBpdGVtLl9vbkNvbXBsZXRlKHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMub25Db21wbGV0ZUl0ZW0oaXRlbSwgcmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycyk7XG5cblx0ICAgICAgICAgICAgICAgICAgICB2YXIgbmV4dEl0ZW0gPSB0aGlzLmdldFJlYWR5SXRlbXMoKVswXTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzVXBsb2FkaW5nID0gZmFsc2U7XG5cblx0ICAgICAgICAgICAgICAgICAgICBpZiAoaXNEZWZpbmVkKG5leHRJdGVtKSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBuZXh0SXRlbS51cGxvYWQoKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblxuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMub25Db21wbGV0ZUFsbCgpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvZ3Jlc3MgPSB0aGlzLl9nZXRUb3RhbFByb2dyZXNzKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVuZGVyKCk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9LCB7XG5cdCAgICAgICAgICAgIGlzRmlsZToge1xuXHQgICAgICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKipcblx0ICAgICAgICAgICAgICAgICAqIFNUQVRJQ1xuXHQgICAgICAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKiovXG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJldHVybnMgXCJ0cnVlXCIgaWYgdmFsdWUgYW4gaW5zdGFuY2Ugb2YgRmlsZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMge0Jvb2xlYW59XG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc0ZpbGUodmFsdWUpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gRmlsZSAmJiB2YWx1ZSBpbnN0YW5jZW9mIEZpbGU7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIGlzRmlsZUxpa2VPYmplY3Q6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmV0dXJucyBcInRydWVcIiBpZiB2YWx1ZSBhbiBpbnN0YW5jZSBvZiBGaWxlTGlrZU9iamVjdFxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMge0Jvb2xlYW59XG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc0ZpbGVMaWtlT2JqZWN0KHZhbHVlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgRmlsZUxpa2VPYmplY3Q7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIGlzQXJyYXlMaWtlT2JqZWN0OiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJldHVybnMgXCJ0cnVlXCIgaWYgdmFsdWUgaXMgYXJyYXkgbGlrZSBvYmplY3Rcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc0FycmF5TGlrZU9iamVjdCh2YWx1ZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBpc09iamVjdCh2YWx1ZSkgJiYgXCJsZW5ndGhcIiBpbiB2YWx1ZTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgaW5oZXJpdDoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBJbmhlcml0cyBhIHRhcmdldCAoQ2xhc3NfMSkgYnkgYSBzb3VyY2UgKENsYXNzXzIpXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSB0YXJnZXRcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHNvdXJjZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbmhlcml0KHRhcmdldCwgc291cmNlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc291cmNlLnByb3RvdHlwZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHRhcmdldDtcblx0ICAgICAgICAgICAgICAgICAgICB0YXJnZXQuc3VwZXJfID0gc291cmNlO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cblx0ICAgICAgICByZXR1cm4gRmlsZVVwbG9hZGVyO1xuXHQgICAgfSkoKTtcblxuXHQgICAgLyoqKioqKioqKioqKioqKioqKioqKipcblx0ICAgICAqIFBVQkxJQ1xuXHQgICAgICoqKioqKioqKioqKioqKioqKioqKiovXG5cdCAgICAvKipcblx0ICAgICAqIENoZWNrcyBhIHN1cHBvcnQgdGhlIGh0bWw1IHVwbG9hZGVyXG5cdCAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cblx0ICAgICAqIEByZWFkb25seVxuXHQgICAgICovXG5cdCAgICBGaWxlVXBsb2FkZXIucHJvdG90eXBlLmlzSFRNTDUgPSAhIShGaWxlICYmIEZvcm1EYXRhKTtcblx0ICAgIC8qKioqKioqKioqKioqKioqKioqKioqXG5cdCAgICAgKiBTVEFUSUNcblx0ICAgICAqKioqKioqKioqKioqKioqKioqKioqL1xuXHQgICAgLyoqXG5cdCAgICAgKiBAYm9ycm93cyBGaWxlVXBsb2FkZXIucHJvdG90eXBlLmlzSFRNTDVcblx0ICAgICAqL1xuXHQgICAgRmlsZVVwbG9hZGVyLmlzSFRNTDUgPSBGaWxlVXBsb2FkZXIucHJvdG90eXBlLmlzSFRNTDU7XG5cblx0ICAgIHJldHVybiBGaWxlVXBsb2FkZXI7XG5cdH07XG5cblx0bW9kdWxlLmV4cG9ydHMuJGluamVjdCA9IFtcImZpbGVVcGxvYWRlck9wdGlvbnNcIiwgXCIkcm9vdFNjb3BlXCIsIFwiJGh0dHBcIiwgXCIkd2luZG93XCIsIFwiRmlsZUxpa2VPYmplY3RcIiwgXCJGaWxlSXRlbVwiXTtcblxuLyoqKi8gfSxcbi8qIDQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdHZhciBfaW50ZXJvcFJlcXVpcmUgPSBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmpbXCJkZWZhdWx0XCJdIDogb2JqOyB9O1xuXG5cdHZhciBfY3JlYXRlQ2xhc3MgPSAoZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIga2V5IGluIHByb3BzKSB7IHZhciBwcm9wID0gcHJvcHNba2V5XTsgcHJvcC5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAocHJvcC52YWx1ZSkgcHJvcC53cml0YWJsZSA9IHRydWU7IH0gT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcyk7IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTtcblxuXHR2YXIgX2NsYXNzQ2FsbENoZWNrID0gZnVuY3Rpb24gKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH07XG5cblx0dmFyIENPTkZJRyA9IF9pbnRlcm9wUmVxdWlyZShfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKTtcblxuXHR2YXIgY29weSA9IGFuZ3VsYXIuY29weTtcblx0dmFyIGlzRWxlbWVudCA9IGFuZ3VsYXIuaXNFbGVtZW50O1xuXHR2YXIgaXNTdHJpbmcgPSBhbmd1bGFyLmlzU3RyaW5nO1xuXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIEZpbGVMaWtlT2JqZWN0ID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIEZpbGVMaWtlT2JqZWN0XG5cdCAgICAgICAgICogQHBhcmFtIHtGaWxlfEhUTUxJbnB1dEVsZW1lbnR8T2JqZWN0fSBmaWxlT3JJbnB1dFxuXHQgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuXHQgICAgICAgICAqL1xuXG5cdCAgICAgICAgZnVuY3Rpb24gRmlsZUxpa2VPYmplY3QoZmlsZU9ySW5wdXQpIHtcblx0ICAgICAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZpbGVMaWtlT2JqZWN0KTtcblxuXHQgICAgICAgICAgICB2YXIgaXNJbnB1dCA9IGlzRWxlbWVudChmaWxlT3JJbnB1dCk7XG5cdCAgICAgICAgICAgIHZhciBmYWtlUGF0aE9yT2JqZWN0ID0gaXNJbnB1dCA/IGZpbGVPcklucHV0LnZhbHVlIDogZmlsZU9ySW5wdXQ7XG5cdCAgICAgICAgICAgIHZhciBwb3N0Zml4ID0gaXNTdHJpbmcoZmFrZVBhdGhPck9iamVjdCkgPyBcIkZha2VQYXRoXCIgOiBcIk9iamVjdFwiO1xuXHQgICAgICAgICAgICB2YXIgbWV0aG9kID0gXCJfY3JlYXRlRnJvbVwiICsgcG9zdGZpeDtcblx0ICAgICAgICAgICAgdGhpc1ttZXRob2RdKGZha2VQYXRoT3JPYmplY3QpO1xuXHQgICAgICAgIH1cblxuXHQgICAgICAgIF9jcmVhdGVDbGFzcyhGaWxlTGlrZU9iamVjdCwge1xuXHQgICAgICAgICAgICBfY3JlYXRlRnJvbUZha2VQYXRoOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENyZWF0ZXMgZmlsZSBsaWtlIG9iamVjdCBmcm9tIGZha2UgcGF0aCBzdHJpbmdcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfY3JlYXRlRnJvbUZha2VQYXRoKHBhdGgpIHtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmxhc3RNb2RpZmllZERhdGUgPSBudWxsO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuc2l6ZSA9IG51bGw7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy50eXBlID0gXCJsaWtlL1wiICsgcGF0aC5zbGljZShwYXRoLmxhc3RJbmRleE9mKFwiLlwiKSArIDEpLnRvTG93ZXJDYXNlKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5uYW1lID0gcGF0aC5zbGljZShwYXRoLmxhc3RJbmRleE9mKFwiL1wiKSArIHBhdGgubGFzdEluZGV4T2YoXCJcXFxcXCIpICsgMik7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9jcmVhdGVGcm9tT2JqZWN0OiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENyZWF0ZXMgZmlsZSBsaWtlIG9iamVjdCBmcm9tIG9iamVjdFxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtGaWxlfEZpbGVMaWtlT2JqZWN0fSBvYmplY3Rcblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9jcmVhdGVGcm9tT2JqZWN0KG9iamVjdCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMubGFzdE1vZGlmaWVkRGF0ZSA9IGNvcHkob2JqZWN0Lmxhc3RNb2RpZmllZERhdGUpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuc2l6ZSA9IG9iamVjdC5zaXplO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMudHlwZSA9IG9iamVjdC50eXBlO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMubmFtZSA9IG9iamVjdC5uYW1lO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cblx0ICAgICAgICByZXR1cm4gRmlsZUxpa2VPYmplY3Q7XG5cdCAgICB9KSgpO1xuXG5cdCAgICByZXR1cm4gRmlsZUxpa2VPYmplY3Q7XG5cdH07XG5cblx0bW9kdWxlLmV4cG9ydHMuJGluamVjdCA9IFtdO1xuXG4vKioqLyB9LFxuLyogNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0dmFyIF9pbnRlcm9wUmVxdWlyZSA9IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9ialtcImRlZmF1bHRcIl0gOiBvYmo7IH07XG5cblx0dmFyIF9jcmVhdGVDbGFzcyA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBrZXkgaW4gcHJvcHMpIHsgdmFyIHByb3AgPSBwcm9wc1trZXldOyBwcm9wLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChwcm9wLnZhbHVlKSBwcm9wLndyaXRhYmxlID0gdHJ1ZTsgfSBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKTsgfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KSgpO1xuXG5cdHZhciBfY2xhc3NDYWxsQ2hlY2sgPSBmdW5jdGlvbiAoaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfTtcblxuXHR2YXIgQ09ORklHID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oMSkpO1xuXG5cdHZhciBjb3B5ID0gYW5ndWxhci5jb3B5O1xuXHR2YXIgZXh0ZW5kID0gYW5ndWxhci5leHRlbmQ7XG5cdHZhciBlbGVtZW50ID0gYW5ndWxhci5lbGVtZW50O1xuXHR2YXIgaXNFbGVtZW50ID0gYW5ndWxhci5pc0VsZW1lbnQ7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoJGNvbXBpbGUsIEZpbGVMaWtlT2JqZWN0KSB7XG5cdCAgICB2YXIgRmlsZUl0ZW0gPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIC8qKlxuXHQgICAgICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgRmlsZUl0ZW1cblx0ICAgICAgICAgKiBAcGFyYW0ge0ZpbGVVcGxvYWRlcn0gdXBsb2FkZXJcblx0ICAgICAgICAgKiBAcGFyYW0ge0ZpbGV8SFRNTElucHV0RWxlbWVudHxPYmplY3R9IHNvbWVcblx0ICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuXHQgICAgICAgICAqL1xuXG5cdCAgICAgICAgZnVuY3Rpb24gRmlsZUl0ZW0odXBsb2FkZXIsIHNvbWUsIG9wdGlvbnMpIHtcblx0ICAgICAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZpbGVJdGVtKTtcblxuXHQgICAgICAgICAgICB2YXIgaXNJbnB1dCA9IGlzRWxlbWVudChzb21lKTtcblx0ICAgICAgICAgICAgdmFyIGlucHV0ID0gaXNJbnB1dCA/IGVsZW1lbnQoc29tZSkgOiBudWxsO1xuXHQgICAgICAgICAgICB2YXIgZmlsZSA9ICFpc0lucHV0ID8gc29tZSA6IG51bGw7XG5cblx0ICAgICAgICAgICAgZXh0ZW5kKHRoaXMsIHtcblx0ICAgICAgICAgICAgICAgIHVybDogdXBsb2FkZXIudXJsLFxuXHQgICAgICAgICAgICAgICAgYWxpYXM6IHVwbG9hZGVyLmFsaWFzLFxuXHQgICAgICAgICAgICAgICAgaGVhZGVyczogY29weSh1cGxvYWRlci5oZWFkZXJzKSxcblx0ICAgICAgICAgICAgICAgIGZvcm1EYXRhOiBjb3B5KHVwbG9hZGVyLmZvcm1EYXRhKSxcblx0ICAgICAgICAgICAgICAgIHJlbW92ZUFmdGVyVXBsb2FkOiB1cGxvYWRlci5yZW1vdmVBZnRlclVwbG9hZCxcblx0ICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdXBsb2FkZXIud2l0aENyZWRlbnRpYWxzLFxuXHQgICAgICAgICAgICAgICAgbWV0aG9kOiB1cGxvYWRlci5tZXRob2Rcblx0ICAgICAgICAgICAgfSwgb3B0aW9ucywge1xuXHQgICAgICAgICAgICAgICAgdXBsb2FkZXI6IHVwbG9hZGVyLFxuXHQgICAgICAgICAgICAgICAgZmlsZTogbmV3IEZpbGVMaWtlT2JqZWN0KHNvbWUpLFxuXHQgICAgICAgICAgICAgICAgaXNSZWFkeTogZmFsc2UsXG5cdCAgICAgICAgICAgICAgICBpc1VwbG9hZGluZzogZmFsc2UsXG5cdCAgICAgICAgICAgICAgICBpc1VwbG9hZGVkOiBmYWxzZSxcblx0ICAgICAgICAgICAgICAgIGlzU3VjY2VzczogZmFsc2UsXG5cdCAgICAgICAgICAgICAgICBpc0NhbmNlbDogZmFsc2UsXG5cdCAgICAgICAgICAgICAgICBpc0Vycm9yOiBmYWxzZSxcblx0ICAgICAgICAgICAgICAgIHByb2dyZXNzOiAwLFxuXHQgICAgICAgICAgICAgICAgaW5kZXg6IG51bGwsXG5cdCAgICAgICAgICAgICAgICBfZmlsZTogZmlsZSxcblx0ICAgICAgICAgICAgICAgIF9pbnB1dDogaW5wdXRcblx0ICAgICAgICAgICAgfSk7XG5cblx0ICAgICAgICAgICAgaWYgKGlucHV0KSB0aGlzLl9yZXBsYWNlTm9kZShpbnB1dCk7XG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgX2NyZWF0ZUNsYXNzKEZpbGVJdGVtLCB7XG5cdCAgICAgICAgICAgIHVwbG9hZDoge1xuXHQgICAgICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKipcblx0ICAgICAgICAgICAgICAgICAqIFBVQkxJQ1xuXHQgICAgICAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKiovXG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFVwbG9hZHMgYSBGaWxlSXRlbVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiB1cGxvYWQoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGxvYWRlci51cGxvYWRJdGVtKHRoaXMpO1xuXHQgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGxvYWRlci5fb25Db21wbGV0ZUl0ZW0odGhpcywgXCJcIiwgMCwgW10pO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwbG9hZGVyLl9vbkVycm9ySXRlbSh0aGlzLCBcIlwiLCAwLCBbXSk7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBjYW5jZWw6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogQ2FuY2VscyB1cGxvYWRpbmcgb2YgRmlsZUl0ZW1cblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2FuY2VsKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMudXBsb2FkZXIuY2FuY2VsSXRlbSh0aGlzKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgcmVtb3ZlOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJlbW92ZXMgYSBGaWxlSXRlbVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmUoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy51cGxvYWRlci5yZW1vdmVGcm9tUXVldWUodGhpcyk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIG9uQmVmb3JlVXBsb2FkOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvbkJlZm9yZVVwbG9hZCgpIHt9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIG9uUHJvZ3Jlc3M6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogQ2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBwcm9ncmVzc1xuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25Qcm9ncmVzcyhwcm9ncmVzcykge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgb25TdWNjZXNzOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyp9IHJlc3BvbnNlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gc3RhdHVzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaGVhZGVyc1xuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvblN1Y2Nlc3MocmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycykge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgb25FcnJvcjoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSByZXNwb25zZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHN0YXR1c1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGhlYWRlcnNcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25FcnJvcihyZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKSB7fVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBvbkNhbmNlbDoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSByZXNwb25zZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHN0YXR1c1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGhlYWRlcnNcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25DYW5jZWwocmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycykge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgb25Db21wbGV0ZToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSByZXNwb25zZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHN0YXR1c1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGhlYWRlcnNcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25Db21wbGV0ZShyZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKSB7fVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfb25CZWZvcmVVcGxvYWQ6IHtcblx0ICAgICAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqXG5cdCAgICAgICAgICAgICAgICAgKiBQUklWQVRFXG5cdCAgICAgICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKi9cblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogSW5uZXIgY2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX29uQmVmb3JlVXBsb2FkKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNSZWFkeSA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1VwbG9hZGluZyA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1VwbG9hZGVkID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1N1Y2Nlc3MgPSBmYWxzZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQ2FuY2VsID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0Vycm9yID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9ncmVzcyA9IDA7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkJlZm9yZVVwbG9hZCgpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfb25Qcm9ncmVzczoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBJbm5lciBjYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHByb2dyZXNzXG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfb25Qcm9ncmVzcyhwcm9ncmVzcykge1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvZ3Jlc3MgPSBwcm9ncmVzcztcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLm9uUHJvZ3Jlc3MocHJvZ3Jlc3MpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfb25TdWNjZXNzOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIElubmVyIGNhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyp9IHJlc3BvbnNlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gc3RhdHVzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaGVhZGVyc1xuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX29uU3VjY2VzcyhyZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1JlYWR5ID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1VwbG9hZGluZyA9IGZhbHNlO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNVcGxvYWRlZCA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1N1Y2Nlc3MgPSB0cnVlO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNDYW5jZWwgPSBmYWxzZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzRXJyb3IgPSBmYWxzZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2dyZXNzID0gMTAwO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5kZXggPSBudWxsO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMub25TdWNjZXNzKHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfb25FcnJvcjoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBJbm5lciBjYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSByZXNwb25zZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHN0YXR1c1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGhlYWRlcnNcblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkVycm9yKHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpIHtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzUmVhZHkgPSBmYWxzZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzVXBsb2FkaW5nID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1VwbG9hZGVkID0gdHJ1ZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzU3VjY2VzcyA9IGZhbHNlO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNDYW5jZWwgPSBmYWxzZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzRXJyb3IgPSB0cnVlO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvZ3Jlc3MgPSAwO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5kZXggPSBudWxsO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMub25FcnJvcihyZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX29uQ2FuY2VsOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIElubmVyIGNhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyp9IHJlc3BvbnNlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gc3RhdHVzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaGVhZGVyc1xuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX29uQ2FuY2VsKHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpIHtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzUmVhZHkgPSBmYWxzZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzVXBsb2FkaW5nID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1VwbG9hZGVkID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1N1Y2Nlc3MgPSBmYWxzZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQ2FuY2VsID0gdHJ1ZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzRXJyb3IgPSBmYWxzZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2dyZXNzID0gMDtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmluZGV4ID0gbnVsbDtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQ2FuY2VsKHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfb25Db21wbGV0ZToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBJbm5lciBjYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSByZXNwb25zZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHN0YXR1c1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGhlYWRlcnNcblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkNvbXBsZXRlKHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpIHtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQ29tcGxldGUocmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycyk7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVtb3ZlQWZ0ZXJVcGxvYWQpIHRoaXMucmVtb3ZlKCk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9kZXN0cm95OiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIERlc3Ryb3lzIGEgRmlsZUl0ZW1cblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2Rlc3Ryb3koKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2lucHV0KSB0aGlzLl9pbnB1dC5yZW1vdmUoKTtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fZm9ybSkgdGhpcy5fZm9ybS5yZW1vdmUoKTtcblx0ICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5fZm9ybTtcblx0ICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5faW5wdXQ7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9wcmVwYXJlVG9VcGxvYWRpbmc6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUHJlcGFyZXMgdG8gdXBsb2FkaW5nXG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcHJlcGFyZVRvVXBsb2FkaW5nKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5kZXggPSB0aGlzLmluZGV4IHx8ICsrdGhpcy51cGxvYWRlci5fbmV4dEluZGV4O1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNSZWFkeSA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9yZXBsYWNlTm9kZToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBSZXBsYWNlcyBpbnB1dCBlbGVtZW50IG9uIGhpcyBjbG9uZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtKUUxpdGV8alF1ZXJ5fSBpbnB1dFxuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX3JlcGxhY2VOb2RlKGlucHV0KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGNsb25lID0gJGNvbXBpbGUoaW5wdXQuY2xvbmUoKSkoaW5wdXQuc2NvcGUoKSk7XG5cdCAgICAgICAgICAgICAgICAgICAgY2xvbmUucHJvcChcInZhbHVlXCIsIG51bGwpOyAvLyBGRiBmaXhcblx0ICAgICAgICAgICAgICAgICAgICBpbnB1dC5jc3MoXCJkaXNwbGF5XCIsIFwibm9uZVwiKTtcblx0ICAgICAgICAgICAgICAgICAgICBpbnB1dC5hZnRlcihjbG9uZSk7IC8vIHJlbW92ZSBqcXVlcnkgZGVwZW5kZW5jeVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cblx0ICAgICAgICByZXR1cm4gRmlsZUl0ZW07XG5cdCAgICB9KSgpO1xuXG5cdCAgICByZXR1cm4gRmlsZUl0ZW07XG5cdH07XG5cblx0bW9kdWxlLmV4cG9ydHMuJGluamVjdCA9IFtcIiRjb21waWxlXCIsIFwiRmlsZUxpa2VPYmplY3RcIl07XG5cbi8qKiovIH0sXG4vKiA2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblxuXHR2YXIgX2ludGVyb3BSZXF1aXJlID0gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqW1wiZGVmYXVsdFwiXSA6IG9iajsgfTtcblxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGtleSBpbiBwcm9wcykgeyB2YXIgcHJvcCA9IHByb3BzW2tleV07IHByb3AuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKHByb3AudmFsdWUpIHByb3Aud3JpdGFibGUgPSB0cnVlOyB9IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpOyB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0pKCk7XG5cblx0dmFyIF9jbGFzc0NhbGxDaGVjayA9IGZ1bmN0aW9uIChpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9O1xuXG5cdHZhciBDT05GSUcgPSBfaW50ZXJvcFJlcXVpcmUoX193ZWJwYWNrX3JlcXVpcmVfXygxKSk7XG5cblx0dmFyIGV4dGVuZCA9IGFuZ3VsYXIuZXh0ZW5kO1xuXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIEZpbGVEaXJlY3RpdmUgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIC8qKlxuXHQgICAgICAgICAqIENyZWF0ZXMgaW5zdGFuY2Ugb2Yge0ZpbGVEaXJlY3RpdmV9IG9iamVjdFxuXHQgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMudXBsb2FkZXJcblx0ICAgICAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBvcHRpb25zLmVsZW1lbnRcblx0ICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucy5ldmVudHNcblx0ICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gb3B0aW9ucy5wcm9wXG5cdCAgICAgICAgICogQGNvbnN0cnVjdG9yXG5cdCAgICAgICAgICovXG5cblx0ICAgICAgICBmdW5jdGlvbiBGaWxlRGlyZWN0aXZlKG9wdGlvbnMpIHtcblx0ICAgICAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZpbGVEaXJlY3RpdmUpO1xuXG5cdCAgICAgICAgICAgIGV4dGVuZCh0aGlzLCBvcHRpb25zKTtcblx0ICAgICAgICAgICAgdGhpcy51cGxvYWRlci5fZGlyZWN0aXZlc1t0aGlzLnByb3BdLnB1c2godGhpcyk7XG5cdCAgICAgICAgICAgIHRoaXMuX3NhdmVMaW5rcygpO1xuXHQgICAgICAgICAgICB0aGlzLmJpbmQoKTtcblx0ICAgICAgICB9XG5cblx0ICAgICAgICBfY3JlYXRlQ2xhc3MoRmlsZURpcmVjdGl2ZSwge1xuXHQgICAgICAgICAgICBiaW5kOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIEJpbmRzIGV2ZW50cyBoYW5kbGVzXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMuZXZlbnRzKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcm9wID0gdGhpcy5ldmVudHNba2V5XTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmJpbmQoa2V5LCB0aGlzW3Byb3BdKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIHVuYmluZDoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBVbmJpbmRzIGV2ZW50cyBoYW5kbGVzXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHVuYmluZCgpIHtcblx0ICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5ldmVudHMpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnVuYmluZChrZXksIHRoaXMuZXZlbnRzW2tleV0pO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgZGVzdHJveToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBEZXN0cm95cyBkaXJlY3RpdmVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSB0aGlzLnVwbG9hZGVyLl9kaXJlY3RpdmVzW3RoaXMucHJvcF0uaW5kZXhPZih0aGlzKTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLnVwbG9hZGVyLl9kaXJlY3RpdmVzW3RoaXMucHJvcF0uc3BsaWNlKGluZGV4LCAxKTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLnVuYmluZCgpO1xuXHQgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuZWxlbWVudCA9IG51bGw7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9zYXZlTGlua3M6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogU2F2ZXMgbGlua3MgdG8gZnVuY3Rpb25zXG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2F2ZUxpbmtzKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLmV2ZW50cykge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJvcCA9IHRoaXMuZXZlbnRzW2tleV07XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNbcHJvcF0gPSB0aGlzW3Byb3BdLmJpbmQodGhpcyk7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cblx0ICAgICAgICByZXR1cm4gRmlsZURpcmVjdGl2ZTtcblx0ICAgIH0pKCk7XG5cblx0ICAgIC8qKlxuXHQgICAgICogTWFwIG9mIGV2ZW50c1xuXHQgICAgICogQHR5cGUge09iamVjdH1cblx0ICAgICAqL1xuXHQgICAgRmlsZURpcmVjdGl2ZS5wcm90b3R5cGUuZXZlbnRzID0ge307XG5cblx0ICAgIHJldHVybiBGaWxlRGlyZWN0aXZlO1xuXHR9O1xuXG5cdG1vZHVsZS5leHBvcnRzLiRpbmplY3QgPSBbXTtcblxuLyoqKi8gfSxcbi8qIDcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdHZhciBfaW50ZXJvcFJlcXVpcmUgPSBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmpbXCJkZWZhdWx0XCJdIDogb2JqOyB9O1xuXG5cdHZhciBfY3JlYXRlQ2xhc3MgPSAoZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIga2V5IGluIHByb3BzKSB7IHZhciBwcm9wID0gcHJvcHNba2V5XTsgcHJvcC5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAocHJvcC52YWx1ZSkgcHJvcC53cml0YWJsZSA9IHRydWU7IH0gT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcyk7IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTtcblxuXHR2YXIgX2dldCA9IGZ1bmN0aW9uIGdldChvYmplY3QsIHByb3BlcnR5LCByZWNlaXZlcikgeyB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBwcm9wZXJ0eSk7IGlmIChkZXNjID09PSB1bmRlZmluZWQpIHsgdmFyIHBhcmVudCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmplY3QpOyBpZiAocGFyZW50ID09PSBudWxsKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gZWxzZSB7IHJldHVybiBnZXQocGFyZW50LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpOyB9IH0gZWxzZSBpZiAoXCJ2YWx1ZVwiIGluIGRlc2MgJiYgZGVzYy53cml0YWJsZSkgeyByZXR1cm4gZGVzYy52YWx1ZTsgfSBlbHNlIHsgdmFyIGdldHRlciA9IGRlc2MuZ2V0OyBpZiAoZ2V0dGVyID09PSB1bmRlZmluZWQpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSByZXR1cm4gZ2V0dGVyLmNhbGwocmVjZWl2ZXIpOyB9IH07XG5cblx0dmFyIF9pbmhlcml0cyA9IGZ1bmN0aW9uIChzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9O1xuXG5cdHZhciBfY2xhc3NDYWxsQ2hlY2sgPSBmdW5jdGlvbiAoaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfTtcblxuXHR2YXIgQ09ORklHID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oMSkpO1xuXG5cdHZhciBleHRlbmQgPSBhbmd1bGFyLmV4dGVuZDtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChGaWxlRGlyZWN0aXZlKSB7XG5cdCAgICB2YXIgRmlsZVNlbGVjdCA9IChmdW5jdGlvbiAoX0ZpbGVEaXJlY3RpdmUpIHtcblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBDcmVhdGVzIGluc3RhbmNlIG9mIHtGaWxlU2VsZWN0fSBvYmplY3Rcblx0ICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuXHQgICAgICAgICAqL1xuXG5cdCAgICAgICAgZnVuY3Rpb24gRmlsZVNlbGVjdChvcHRpb25zKSB7XG5cdCAgICAgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBGaWxlU2VsZWN0KTtcblxuXHQgICAgICAgICAgICB2YXIgZXh0ZW5kZWRPcHRpb25zID0gZXh0ZW5kKG9wdGlvbnMsIHtcblx0ICAgICAgICAgICAgICAgIC8vIE1hcCBvZiBldmVudHNcblx0ICAgICAgICAgICAgICAgIGV2ZW50czoge1xuXHQgICAgICAgICAgICAgICAgICAgICRkZXN0cm95OiBcImRlc3Ryb3lcIixcblx0ICAgICAgICAgICAgICAgICAgICBjaGFuZ2U6IFwib25DaGFuZ2VcIlxuXHQgICAgICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgICAgIC8vIE5hbWUgb2YgcHJvcGVydHkgaW5zaWRlIHVwbG9hZGVyLl9kaXJlY3RpdmUgb2JqZWN0XG5cdCAgICAgICAgICAgICAgICBwcm9wOiBcInNlbGVjdFwiXG5cdCAgICAgICAgICAgIH0pO1xuXG5cdCAgICAgICAgICAgIF9nZXQoT2JqZWN0LmdldFByb3RvdHlwZU9mKEZpbGVTZWxlY3QucHJvdG90eXBlKSwgXCJjb25zdHJ1Y3RvclwiLCB0aGlzKS5jYWxsKHRoaXMsIGV4dGVuZGVkT3B0aW9ucyk7XG5cblx0ICAgICAgICAgICAgaWYgKCF0aGlzLnVwbG9hZGVyLmlzSFRNTDUpIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5yZW1vdmVBdHRyKFwibXVsdGlwbGVcIik7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgdGhpcy5lbGVtZW50LnByb3AoXCJ2YWx1ZVwiLCBudWxsKTsgLy8gRkYgZml4XG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgX2luaGVyaXRzKEZpbGVTZWxlY3QsIF9GaWxlRGlyZWN0aXZlKTtcblxuXHQgICAgICAgIF9jcmVhdGVDbGFzcyhGaWxlU2VsZWN0LCB7XG5cdCAgICAgICAgICAgIGdldE9wdGlvbnM6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmV0dXJucyBvcHRpb25zXG5cdCAgICAgICAgICAgICAgICAgKiBAcmV0dXJuIHtPYmplY3R8dW5kZWZpbmVkfVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRPcHRpb25zKCkge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgZ2V0RmlsdGVyczoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBSZXR1cm5zIGZpbHRlcnNcblx0ICAgICAgICAgICAgICAgICAqIEByZXR1cm4ge0FycmF5PEZ1bmN0aW9uPnxTdHJpbmd8dW5kZWZpbmVkfVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRGaWx0ZXJzKCkge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgaXNFbXB0eUFmdGVyU2VsZWN0aW9uOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIElmIHJldHVybnMgXCJ0cnVlXCIgdGhlbiBIVE1MSW5wdXRFbGVtZW50IHdpbGwgYmUgY2xlYXJlZFxuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMge0Jvb2xlYW59XG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGlzRW1wdHlBZnRlclNlbGVjdGlvbigpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gISF0aGlzLmVsZW1lbnQuYXR0cihcIm11bHRpcGxlXCIpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBvbkNoYW5nZToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBFdmVudCBoYW5kbGVyXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ2hhbmdlKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBmaWxlcyA9IHRoaXMudXBsb2FkZXIuaXNIVE1MNSA/IHRoaXMuZWxlbWVudFswXS5maWxlcyA6IHRoaXMuZWxlbWVudFswXTtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHRoaXMuZ2V0T3B0aW9ucygpO1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBmaWx0ZXJzID0gdGhpcy5nZXRGaWx0ZXJzKCk7XG5cblx0ICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMudXBsb2FkZXIuaXNIVE1MNSkgdGhpcy5kZXN0cm95KCk7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy51cGxvYWRlci5hZGRUb1F1ZXVlKGZpbGVzLCBvcHRpb25zLCBmaWx0ZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0VtcHR5QWZ0ZXJTZWxlY3Rpb24oKSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucHJvcChcInZhbHVlXCIsIG51bGwpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucmVwbGFjZVdpdGgodGhpcy5lbGVtZW50ID0gdGhpcy5lbGVtZW50LmNsb25lKHRydWUpKTsgLy8gSUUgZml4XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cblx0ICAgICAgICByZXR1cm4gRmlsZVNlbGVjdDtcblx0ICAgIH0pKEZpbGVEaXJlY3RpdmUpO1xuXG5cdCAgICByZXR1cm4gRmlsZVNlbGVjdDtcblx0fTtcblxuXHRtb2R1bGUuZXhwb3J0cy4kaW5qZWN0ID0gW1wiRmlsZURpcmVjdGl2ZVwiXTtcblxuLyoqKi8gfSxcbi8qIDggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdHZhciBfaW50ZXJvcFJlcXVpcmUgPSBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmpbXCJkZWZhdWx0XCJdIDogb2JqOyB9O1xuXG5cdHZhciBfY3JlYXRlQ2xhc3MgPSAoZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIga2V5IGluIHByb3BzKSB7IHZhciBwcm9wID0gcHJvcHNba2V5XTsgcHJvcC5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAocHJvcC52YWx1ZSkgcHJvcC53cml0YWJsZSA9IHRydWU7IH0gT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcyk7IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTtcblxuXHR2YXIgX2dldCA9IGZ1bmN0aW9uIGdldChvYmplY3QsIHByb3BlcnR5LCByZWNlaXZlcikgeyB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBwcm9wZXJ0eSk7IGlmIChkZXNjID09PSB1bmRlZmluZWQpIHsgdmFyIHBhcmVudCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmplY3QpOyBpZiAocGFyZW50ID09PSBudWxsKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gZWxzZSB7IHJldHVybiBnZXQocGFyZW50LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpOyB9IH0gZWxzZSBpZiAoXCJ2YWx1ZVwiIGluIGRlc2MgJiYgZGVzYy53cml0YWJsZSkgeyByZXR1cm4gZGVzYy52YWx1ZTsgfSBlbHNlIHsgdmFyIGdldHRlciA9IGRlc2MuZ2V0OyBpZiAoZ2V0dGVyID09PSB1bmRlZmluZWQpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSByZXR1cm4gZ2V0dGVyLmNhbGwocmVjZWl2ZXIpOyB9IH07XG5cblx0dmFyIF9pbmhlcml0cyA9IGZ1bmN0aW9uIChzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9O1xuXG5cdHZhciBfY2xhc3NDYWxsQ2hlY2sgPSBmdW5jdGlvbiAoaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfTtcblxuXHR2YXIgQ09ORklHID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oMSkpO1xuXG5cdHZhciBleHRlbmQgPSBhbmd1bGFyLmV4dGVuZDtcblx0dmFyIGZvckVhY2ggPSBhbmd1bGFyLmZvckVhY2g7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoRmlsZURpcmVjdGl2ZSkge1xuXHQgICAgdmFyIEZpbGVEcm9wID0gKGZ1bmN0aW9uIChfRmlsZURpcmVjdGl2ZSkge1xuXHQgICAgICAgIC8qKlxuXHQgICAgICAgICAqIENyZWF0ZXMgaW5zdGFuY2Ugb2Yge0ZpbGVEcm9wfSBvYmplY3Rcblx0ICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuXHQgICAgICAgICAqL1xuXG5cdCAgICAgICAgZnVuY3Rpb24gRmlsZURyb3Aob3B0aW9ucykge1xuXHQgICAgICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRmlsZURyb3ApO1xuXG5cdCAgICAgICAgICAgIHZhciBleHRlbmRlZE9wdGlvbnMgPSBleHRlbmQob3B0aW9ucywge1xuXHQgICAgICAgICAgICAgICAgLy8gTWFwIG9mIGV2ZW50c1xuXHQgICAgICAgICAgICAgICAgZXZlbnRzOiB7XG5cdCAgICAgICAgICAgICAgICAgICAgJGRlc3Ryb3k6IFwiZGVzdHJveVwiLFxuXHQgICAgICAgICAgICAgICAgICAgIGRyb3A6IFwib25Ecm9wXCIsXG5cdCAgICAgICAgICAgICAgICAgICAgZHJhZ292ZXI6IFwib25EcmFnT3ZlclwiLFxuXHQgICAgICAgICAgICAgICAgICAgIGRyYWdsZWF2ZTogXCJvbkRyYWdMZWF2ZVwiXG5cdCAgICAgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICAgICAgLy8gTmFtZSBvZiBwcm9wZXJ0eSBpbnNpZGUgdXBsb2FkZXIuX2RpcmVjdGl2ZSBvYmplY3Rcblx0ICAgICAgICAgICAgICAgIHByb3A6IFwiZHJvcFwiXG5cdCAgICAgICAgICAgIH0pO1xuXG5cdCAgICAgICAgICAgIF9nZXQoT2JqZWN0LmdldFByb3RvdHlwZU9mKEZpbGVEcm9wLnByb3RvdHlwZSksIFwiY29uc3RydWN0b3JcIiwgdGhpcykuY2FsbCh0aGlzLCBleHRlbmRlZE9wdGlvbnMpO1xuXHQgICAgICAgIH1cblxuXHQgICAgICAgIF9pbmhlcml0cyhGaWxlRHJvcCwgX0ZpbGVEaXJlY3RpdmUpO1xuXG5cdCAgICAgICAgX2NyZWF0ZUNsYXNzKEZpbGVEcm9wLCB7XG5cdCAgICAgICAgICAgIGdldE9wdGlvbnM6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmV0dXJucyBvcHRpb25zXG5cdCAgICAgICAgICAgICAgICAgKiBAcmV0dXJuIHtPYmplY3R8dW5kZWZpbmVkfVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRPcHRpb25zKCkge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgZ2V0RmlsdGVyczoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBSZXR1cm5zIGZpbHRlcnNcblx0ICAgICAgICAgICAgICAgICAqIEByZXR1cm4ge0FycmF5PEZ1bmN0aW9uPnxTdHJpbmd8dW5kZWZpbmVkfVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRGaWx0ZXJzKCkge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgb25Ecm9wOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIEV2ZW50IGhhbmRsZXJcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25Ecm9wKGV2ZW50KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIHRyYW5zZmVyID0gdGhpcy5fZ2V0VHJhbnNmZXIoZXZlbnQpO1xuXHQgICAgICAgICAgICAgICAgICAgIGlmICghdHJhbnNmZXIpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgICAgICAgICAgIH12YXIgb3B0aW9ucyA9IHRoaXMuZ2V0T3B0aW9ucygpO1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBmaWx0ZXJzID0gdGhpcy5nZXRGaWx0ZXJzKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5fcHJldmVudEFuZFN0b3AoZXZlbnQpO1xuXHQgICAgICAgICAgICAgICAgICAgIGZvckVhY2godGhpcy51cGxvYWRlci5fZGlyZWN0aXZlcy5vdmVyLCB0aGlzLl9yZW1vdmVPdmVyQ2xhc3MsIHRoaXMpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMudXBsb2FkZXIuYWRkVG9RdWV1ZSh0cmFuc2Zlci5maWxlcywgb3B0aW9ucywgZmlsdGVycyk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIG9uRHJhZ092ZXI6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogRXZlbnQgaGFuZGxlclxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvbkRyYWdPdmVyKGV2ZW50KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIHRyYW5zZmVyID0gdGhpcy5fZ2V0VHJhbnNmZXIoZXZlbnQpO1xuXHQgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5faGF2ZUZpbGVzKHRyYW5zZmVyLnR5cGVzKSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICAgICAgICAgICAgfXRyYW5zZmVyLmRyb3BFZmZlY3QgPSBcImNvcHlcIjtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLl9wcmV2ZW50QW5kU3RvcChldmVudCk7XG5cdCAgICAgICAgICAgICAgICAgICAgZm9yRWFjaCh0aGlzLnVwbG9hZGVyLl9kaXJlY3RpdmVzLm92ZXIsIHRoaXMuX2FkZE92ZXJDbGFzcywgdGhpcyk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIG9uRHJhZ0xlYXZlOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIEV2ZW50IGhhbmRsZXJcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25EcmFnTGVhdmUoZXZlbnQpIHtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldCA9PT0gdGhpcy5lbGVtZW50WzBdKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgICAgICAgICAgICB9dGhpcy5fcHJldmVudEFuZFN0b3AoZXZlbnQpO1xuXHQgICAgICAgICAgICAgICAgICAgIGZvckVhY2godGhpcy51cGxvYWRlci5fZGlyZWN0aXZlcy5vdmVyLCB0aGlzLl9yZW1vdmVPdmVyQ2xhc3MsIHRoaXMpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfZ2V0VHJhbnNmZXI6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogSGVscGVyXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRUcmFuc2ZlcihldmVudCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBldmVudC5kYXRhVHJhbnNmZXIgPyBldmVudC5kYXRhVHJhbnNmZXIgOiBldmVudC5vcmlnaW5hbEV2ZW50LmRhdGFUcmFuc2ZlcjsgLy8galF1ZXJ5IGZpeDtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX3ByZXZlbnRBbmRTdG9wOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIEhlbHBlclxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcHJldmVudEFuZFN0b3AoZXZlbnQpIHtcblx0ICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHQgICAgICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfaGF2ZUZpbGVzOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJldHVybnMgXCJ0cnVlXCIgaWYgdHlwZXMgY29udGFpbnMgZmlsZXNcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSB0eXBlc1xuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGF2ZUZpbGVzKHR5cGVzKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKCF0eXBlcykge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgfWlmICh0eXBlcy5pbmRleE9mKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0eXBlcy5pbmRleE9mKFwiRmlsZXNcIikgIT09IC0xO1xuXHQgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZXMuY29udGFpbnMpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVzLmNvbnRhaW5zKFwiRmlsZXNcIik7XG5cdCAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX2FkZE92ZXJDbGFzczoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfYWRkT3ZlckNsYXNzKGl0ZW0pIHtcblx0ICAgICAgICAgICAgICAgICAgICBpdGVtLmFkZE92ZXJDbGFzcygpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfcmVtb3ZlT3ZlckNsYXNzOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW1vdmVPdmVyQ2xhc3MoaXRlbSkge1xuXHQgICAgICAgICAgICAgICAgICAgIGl0ZW0ucmVtb3ZlT3ZlckNsYXNzKCk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9KTtcblxuXHQgICAgICAgIHJldHVybiBGaWxlRHJvcDtcblx0ICAgIH0pKEZpbGVEaXJlY3RpdmUpO1xuXG5cdCAgICByZXR1cm4gRmlsZURyb3A7XG5cdH07XG5cblx0bW9kdWxlLmV4cG9ydHMuJGluamVjdCA9IFtcIkZpbGVEaXJlY3RpdmVcIl07XG5cbi8qKiovIH0sXG4vKiA5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblxuXHR2YXIgX2ludGVyb3BSZXF1aXJlID0gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqW1wiZGVmYXVsdFwiXSA6IG9iajsgfTtcblxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGtleSBpbiBwcm9wcykgeyB2YXIgcHJvcCA9IHByb3BzW2tleV07IHByb3AuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKHByb3AudmFsdWUpIHByb3Aud3JpdGFibGUgPSB0cnVlOyB9IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpOyB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0pKCk7XG5cblx0dmFyIF9nZXQgPSBmdW5jdGlvbiBnZXQob2JqZWN0LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpIHsgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgcHJvcGVydHkpOyBpZiAoZGVzYyA9PT0gdW5kZWZpbmVkKSB7IHZhciBwYXJlbnQgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqZWN0KTsgaWYgKHBhcmVudCA9PT0gbnVsbCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9IGVsc2UgeyByZXR1cm4gZ2V0KHBhcmVudCwgcHJvcGVydHksIHJlY2VpdmVyKTsgfSB9IGVsc2UgaWYgKFwidmFsdWVcIiBpbiBkZXNjICYmIGRlc2Mud3JpdGFibGUpIHsgcmV0dXJuIGRlc2MudmFsdWU7IH0gZWxzZSB7IHZhciBnZXR0ZXIgPSBkZXNjLmdldDsgaWYgKGdldHRlciA9PT0gdW5kZWZpbmVkKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gcmV0dXJuIGdldHRlci5jYWxsKHJlY2VpdmVyKTsgfSB9O1xuXG5cdHZhciBfaW5oZXJpdHMgPSBmdW5jdGlvbiAoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfTtcblxuXHR2YXIgX2NsYXNzQ2FsbENoZWNrID0gZnVuY3Rpb24gKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH07XG5cblx0dmFyIENPTkZJRyA9IF9pbnRlcm9wUmVxdWlyZShfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKTtcblxuXHR2YXIgZXh0ZW5kID0gYW5ndWxhci5leHRlbmQ7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoRmlsZURpcmVjdGl2ZSkge1xuXHQgICAgdmFyIEZpbGVPdmVyID0gKGZ1bmN0aW9uIChfRmlsZURpcmVjdGl2ZSkge1xuXHQgICAgICAgIC8qKlxuXHQgICAgICAgICAqIENyZWF0ZXMgaW5zdGFuY2Ugb2Yge0ZpbGVEcm9wfSBvYmplY3Rcblx0ICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuXHQgICAgICAgICAqL1xuXG5cdCAgICAgICAgZnVuY3Rpb24gRmlsZU92ZXIob3B0aW9ucykge1xuXHQgICAgICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRmlsZU92ZXIpO1xuXG5cdCAgICAgICAgICAgIHZhciBleHRlbmRlZE9wdGlvbnMgPSBleHRlbmQob3B0aW9ucywge1xuXHQgICAgICAgICAgICAgICAgLy8gTWFwIG9mIGV2ZW50c1xuXHQgICAgICAgICAgICAgICAgZXZlbnRzOiB7XG5cdCAgICAgICAgICAgICAgICAgICAgJGRlc3Ryb3k6IFwiZGVzdHJveVwiXG5cdCAgICAgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICAgICAgLy8gTmFtZSBvZiBwcm9wZXJ0eSBpbnNpZGUgdXBsb2FkZXIuX2RpcmVjdGl2ZSBvYmplY3Rcblx0ICAgICAgICAgICAgICAgIHByb3A6IFwib3ZlclwiLFxuXHQgICAgICAgICAgICAgICAgLy8gT3ZlciBjbGFzc1xuXHQgICAgICAgICAgICAgICAgb3ZlckNsYXNzOiBcIm52LWZpbGUtb3ZlclwiXG5cdCAgICAgICAgICAgIH0pO1xuXG5cdCAgICAgICAgICAgIF9nZXQoT2JqZWN0LmdldFByb3RvdHlwZU9mKEZpbGVPdmVyLnByb3RvdHlwZSksIFwiY29uc3RydWN0b3JcIiwgdGhpcykuY2FsbCh0aGlzLCBleHRlbmRlZE9wdGlvbnMpO1xuXHQgICAgICAgIH1cblxuXHQgICAgICAgIF9pbmhlcml0cyhGaWxlT3ZlciwgX0ZpbGVEaXJlY3RpdmUpO1xuXG5cdCAgICAgICAgX2NyZWF0ZUNsYXNzKEZpbGVPdmVyLCB7XG5cdCAgICAgICAgICAgIGFkZE92ZXJDbGFzczoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBBZGRzIG92ZXIgY2xhc3Ncblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYWRkT3ZlckNsYXNzKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hZGRDbGFzcyh0aGlzLmdldE92ZXJDbGFzcygpKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgcmVtb3ZlT3ZlckNsYXNzOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJlbW92ZXMgb3ZlciBjbGFzc1xuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVPdmVyQ2xhc3MoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKHRoaXMuZ2V0T3ZlckNsYXNzKCkpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBnZXRPdmVyQ2xhc3M6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmV0dXJucyBvdmVyIGNsYXNzXG5cdCAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7U3RyaW5nfVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRPdmVyQ2xhc3MoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMub3ZlckNsYXNzO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cblx0ICAgICAgICByZXR1cm4gRmlsZU92ZXI7XG5cdCAgICB9KShGaWxlRGlyZWN0aXZlKTtcblxuXHQgICAgcmV0dXJuIEZpbGVPdmVyO1xuXHR9O1xuXG5cdG1vZHVsZS5leHBvcnRzLiRpbmplY3QgPSBbXCJGaWxlRGlyZWN0aXZlXCJdO1xuXG4vKioqLyB9LFxuLyogMTAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdHZhciBfaW50ZXJvcFJlcXVpcmUgPSBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmpbXCJkZWZhdWx0XCJdIDogb2JqOyB9O1xuXG5cdHZhciBDT05GSUcgPSBfaW50ZXJvcFJlcXVpcmUoX193ZWJwYWNrX3JlcXVpcmVfXygxKSk7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoJHBhcnNlLCBGaWxlVXBsb2FkZXIsIEZpbGVTZWxlY3QpIHtcblxuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHJpYnV0ZXMpIHtcblx0ICAgICAgICAgICAgdmFyIHVwbG9hZGVyID0gc2NvcGUuJGV2YWwoYXR0cmlidXRlcy51cGxvYWRlcik7XG5cblx0ICAgICAgICAgICAgaWYgKCEodXBsb2FkZXIgaW5zdGFuY2VvZiBGaWxlVXBsb2FkZXIpKSB7XG5cdCAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiXFxcIlVwbG9hZGVyXFxcIiBtdXN0IGJlIGFuIGluc3RhbmNlIG9mIEZpbGVVcGxvYWRlclwiKTtcblx0ICAgICAgICAgICAgfVxuXG5cdCAgICAgICAgICAgIHZhciBvYmplY3QgPSBuZXcgRmlsZVNlbGVjdCh7XG5cdCAgICAgICAgICAgICAgICB1cGxvYWRlcjogdXBsb2FkZXIsXG5cdCAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50XG5cdCAgICAgICAgICAgIH0pO1xuXG5cdCAgICAgICAgICAgIG9iamVjdC5nZXRPcHRpb25zID0gJHBhcnNlKGF0dHJpYnV0ZXMub3B0aW9ucykuYmluZChvYmplY3QsIHNjb3BlKTtcblx0ICAgICAgICAgICAgb2JqZWN0LmdldEZpbHRlcnMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gYXR0cmlidXRlcy5maWx0ZXJzO1xuXHQgICAgICAgICAgICB9O1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdH07XG5cblx0bW9kdWxlLmV4cG9ydHMuJGluamVjdCA9IFtcIiRwYXJzZVwiLCBcIkZpbGVVcGxvYWRlclwiLCBcIkZpbGVTZWxlY3RcIl07XG5cbi8qKiovIH0sXG4vKiAxMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0dmFyIF9pbnRlcm9wUmVxdWlyZSA9IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9ialtcImRlZmF1bHRcIl0gOiBvYmo7IH07XG5cblx0dmFyIENPTkZJRyA9IF9pbnRlcm9wUmVxdWlyZShfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKTtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgkcGFyc2UsIEZpbGVVcGxvYWRlciwgRmlsZURyb3ApIHtcblxuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHJpYnV0ZXMpIHtcblx0ICAgICAgICAgICAgdmFyIHVwbG9hZGVyID0gc2NvcGUuJGV2YWwoYXR0cmlidXRlcy51cGxvYWRlcik7XG5cblx0ICAgICAgICAgICAgaWYgKCEodXBsb2FkZXIgaW5zdGFuY2VvZiBGaWxlVXBsb2FkZXIpKSB7XG5cdCAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiXFxcIlVwbG9hZGVyXFxcIiBtdXN0IGJlIGFuIGluc3RhbmNlIG9mIEZpbGVVcGxvYWRlclwiKTtcblx0ICAgICAgICAgICAgfVxuXG5cdCAgICAgICAgICAgIGlmICghdXBsb2FkZXIuaXNIVE1MNSkgcmV0dXJuO1xuXG5cdCAgICAgICAgICAgIHZhciBvYmplY3QgPSBuZXcgRmlsZURyb3Aoe1xuXHQgICAgICAgICAgICAgICAgdXBsb2FkZXI6IHVwbG9hZGVyLFxuXHQgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudFxuXHQgICAgICAgICAgICB9KTtcblxuXHQgICAgICAgICAgICBvYmplY3QuZ2V0T3B0aW9ucyA9ICRwYXJzZShhdHRyaWJ1dGVzLm9wdGlvbnMpLmJpbmQob2JqZWN0LCBzY29wZSk7XG5cdCAgICAgICAgICAgIG9iamVjdC5nZXRGaWx0ZXJzID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIGF0dHJpYnV0ZXMuZmlsdGVycztcblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHR9O1xuXG5cdG1vZHVsZS5leHBvcnRzLiRpbmplY3QgPSBbXCIkcGFyc2VcIiwgXCJGaWxlVXBsb2FkZXJcIiwgXCJGaWxlRHJvcFwiXTtcblxuLyoqKi8gfSxcbi8qIDEyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblxuXHR2YXIgX2ludGVyb3BSZXF1aXJlID0gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqW1wiZGVmYXVsdFwiXSA6IG9iajsgfTtcblxuXHR2YXIgQ09ORklHID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oMSkpO1xuXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKEZpbGVVcGxvYWRlciwgRmlsZU92ZXIpIHtcblxuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHJpYnV0ZXMpIHtcblx0ICAgICAgICAgICAgdmFyIHVwbG9hZGVyID0gc2NvcGUuJGV2YWwoYXR0cmlidXRlcy51cGxvYWRlcik7XG5cblx0ICAgICAgICAgICAgaWYgKCEodXBsb2FkZXIgaW5zdGFuY2VvZiBGaWxlVXBsb2FkZXIpKSB7XG5cdCAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiXFxcIlVwbG9hZGVyXFxcIiBtdXN0IGJlIGFuIGluc3RhbmNlIG9mIEZpbGVVcGxvYWRlclwiKTtcblx0ICAgICAgICAgICAgfVxuXG5cdCAgICAgICAgICAgIHZhciBvYmplY3QgPSBuZXcgRmlsZU92ZXIoe1xuXHQgICAgICAgICAgICAgICAgdXBsb2FkZXI6IHVwbG9hZGVyLFxuXHQgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudFxuXHQgICAgICAgICAgICB9KTtcblxuXHQgICAgICAgICAgICBvYmplY3QuZ2V0T3ZlckNsYXNzID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIGF0dHJpYnV0ZXMub3ZlckNsYXNzIHx8IG9iamVjdC5vdmVyQ2xhc3M7XG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0fTtcblxuXHRtb2R1bGUuZXhwb3J0cy4kaW5qZWN0ID0gW1wiRmlsZVVwbG9hZGVyXCIsIFwiRmlsZU92ZXJcIl07XG5cbi8qKiovIH1cbi8qKioqKiovIF0pXG59KTtcbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFuZ3VsYXItZmlsZS11cGxvYWQuanMubWFwXG4iLCIvLyAtLUF1dGhvciBNdXJhZ2lqaW1hbmEgUmljaGFyZCA8YmVhc3RhcjQ1N0BnbWFpbC5jb20+XG4vLyB2YXIgc3luYyA9IGFuZ3VsYXIubW9kdWxlKFwic3luY1wiLCBbXCJuZ1JvdXRlXCIsXCJhbmd1bGFyRmlsZVVwbG9hZFwiLFwiaW9uaWNcIixcIm5nUmVzb3VyY2VcIixcInVpLmJvb3RzdHJhcFwiLFwiaW5maW5pdGUtc2Nyb2xsXCJdKTtcbi8vIG1vZHVsZS5leHBvcnRzID0gbW9uZ29vc2UubW9kZWwoJ2FwcENvbmZpZycsIHtcblxuYW5ndWxhci5tb2R1bGUoJ0F1dGhNYW5hZ2VyJyxbXSkuc2VydmljZSgnU2Vzc2lvblNlcnZpY2UnLCBbZnVuY3Rpb24oKXtcbiAgICB2YXIgdXNlcklzQXV0aGVudGljYXRlZCA9IGZhbHNlO1xuXG4gICAgdGhpcy5zZXRVc2VyQXV0aGVudGljYXRlZCA9IGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAgICAgdXNlcklzQXV0aGVudGljYXRlZCA9IHZhbHVlO1xuICAgIH07XG5cbiAgICB0aGlzLmdldFVzZXJBdXRoZW50aWNhdGVkID0gZnVuY3Rpb24oKXtcbiAgICAgICAgcmV0dXJuIHVzZXJJc0F1dGhlbnRpY2F0ZWQ7XG4gICAgfTtcbn1dKTtcblxudmFyIHN5bmMgPSBhbmd1bGFyLm1vZHVsZShcInN5bmNcIiwgW1wibmdSb3V0ZVwiLFwiYW5ndWxhckZpbGVVcGxvYWRcIixcInVpLmJvb3RzdHJhcFwiLFwidWkucm91dGVyXCIsXCJpbmZpbml0ZS1zY3JvbGxcIiwnbmdNYXRlcmlhbCcsICduZ01lc3NhZ2VzJywgJ21hdGVyaWFsLnN2Z0Fzc2V0c0NhY2hlJywnbmctbWZiJywncGRmJywnbmdDb250ZXh0TWVudScsJ2FuZ3VsYXItbG9hZGluZy1iYXInLCduZ0ZpbGVTYXZlcicsJ0F1dGhNYW5hZ2VyJywnbmdEaWFsb2cnXSk7XG5cblxudmFyIExvZ2dlcj1hbmd1bGFyLm1vZHVsZShcIkxvZ2dlclwiLFtdKTtcbkxvZ2dlci5ydW4oWyckcm9vdFNjb3BlJyxmdW5jdGlvbigkcm9vdFNjb3BlKXtcblxuICAgICAgLy8gJHJvb3RTY29wZS5lbmRQb2ludD0naHR0cHM6Ly9zdHJlYW11cGJveC5jb20nO1xuICAgICAgJHJvb3RTY29wZS5lbmRQb2ludD0naHR0cDovL3N5bmNtZS5jb206ODAwMCc7XG59XSk7XG53aW5kb3cucm91dGVzID1cbntcbiAgICBcIi9GaWxlc1wiOiB7XG4gICAgICAgIHVybDogXCIvRmlsZXNcIixcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9maWxlcy5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogJ0ZpbGVzQ29udHJvbGxlcicsXG4gICAgICAgIHJlcXVpcmVMb2dpbjogdHJ1ZVxuICAgICAgfSxcbiAgICAgIFwicHJldmlld1wiOntcbiAgICAgICAgdXJsOiAnLyEvOnByZXZpZXcvOmV4dGVuc2lvbi86b2YvOnVzZXInLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2ZpbGVQcmV2aWV3Lmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyIDogJ3ByZXZpZXdDb250cm9sbGVyJ1xuICAgICAgfSxcblxuICAgICAgXCIvR3JvdXBzXCI6IHtcbiAgICAgICAgICB1cmw6IFwiL0dyb3Vwc1wiLFxuICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvZ3JvdXBzLmh0bWwnLFxuICAgICAgICAgIGNvbnRyb2xsZXI6ICdHcm91cENvbnRyb2xsZXInLFxuICAgICAgICAgIHJlcXVpcmVMb2dpbjogdHJ1ZVxuICAgICAgfVxufTtcblxuXG5zeW5jLnJ1bihbJyRyb290U2NvcGUnLCckbG9nJyxmdW5jdGlvbigkcm9vdFNjb3BlLCRsb2cpe1xuICAkcm9vdFNjb3BlLmVuZFBvaW50PSdodHRwOi8vc3luY21lLmNvbTo4MDAwJztcbiAgIC8vICRyb290U2NvcGUuZW5kUG9pbnQ9J2h0dHBzOi8vc3RyZWFtdXBib3guY29tJztcblxuXG4gICRyb290U2NvcGUuJG9uKCckcm91dGVDaGFuZ2VTdGFydCcsZnVuY3Rpb24oZXZlbnQsIG5leHQsIGN1cnJlbnQpe1xuICAgIGZvcih2YXIgaSBpbiB3aW5kb3cucm91dGVzKSB7XG5cbiAgICAgICAgaWYobmV4dC5pbmRleE9mKGkpICE9IC0xKSB7XG4gICAgICAgICAgICBpZih3aW5kb3cucm91dGVzW2ldLnJlcXVpcmVMb2dpbiAmJiAhU2Vzc2lvblNlcnZpY2UuZ2V0VXNlckF1dGhlbnRpY2F0ZWQoKSkge1xuICAgICAgICAgICAgICAgIGFsZXJ0KFwiWW91IG5lZWQgdG8gYmUgYXV0aGVudGljYXRlZCB0byBzZWUgdGhpcyBwYWdlIVwiKTtcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICB9XG4gIH0pO1xufV0pO1xuc3luYy5wcm92aWRlcih7XG5cbiAgICAkZXhjZXB0aW9uSGFuZGxlcjogZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbihleGNlcHRpb24sIGNhdXNlKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coZXhjZXB0aW9uKTtcblxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuJGdldCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZXI7XG4gICAgICAgIH07XG4gICAgfVxufSk7XG5zeW5jLmNvbmZpZyhbJyRzY2VQcm92aWRlcicsJyRodHRwUHJvdmlkZXInLCckbWRUaGVtaW5nUHJvdmlkZXInLCdjZnBMb2FkaW5nQmFyUHJvdmlkZXInLGZ1bmN0aW9uKCRzY2VQcm92aWRlciwkaHR0cFByb3ZpZGVyLCRtZFRoZW1pbmdQcm92aWRlcixjZnBMb2FkaW5nQmFyUHJvdmlkZXIpIHtcbiAgICBkZWxldGUgJGh0dHBQcm92aWRlci5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnWC1SZXF1ZXN0ZWQtV2l0aCddO1xuICAgICRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVycy5wb3N0WydBY2NlcHQnXSA9ICdhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L2phdmFzY3JpcHQnO1xuICAgICRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVycy5wb3N0WydBY2NlcHQnXSA9ICdhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L2phdmFzY3JpcHQnO1xuICAgIC8vc2V0IGF1dGhvcml6YXRpb24gZm9yIG9hdXRoMi4wIGZvciBwcm90ZWN0aW9uXG5cblxuICAgICRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ2F1dGhvcml6YXRpb24nXSA9ICdCZWFyZXIgOEV1cWNNTmtGMnlQNTBEaWNwdjloTFJScDdXT1NhYlBsQ3UyMmxpWSc7XG5cbiAgICAvLyAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLnVzZVhEb21haW4gPSB0cnVlO1xuICAgICRzY2VQcm92aWRlci5lbmFibGVkKGZhbHNlKTtcblxuICAgIGNmcExvYWRpbmdCYXJQcm92aWRlci5pbmNsdWRlQmFyID0gZmFsc2U7XG59XSk7XG5zeW5jLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywnJHVybFJvdXRlclByb3ZpZGVyJyxmdW5jdGlvbigkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyLCRzY29wZSl7XG4gICAgICAgIC8vICRwYXJzZVByb3ZpZGVyLnVud3JhcFByb21pc2VzKHRydWUpIDtcbiAgICAgICAgICBmb3IodmFyIHBhdGggaW4gd2luZG93LnJvdXRlcykge1xuXG4gICAgICAgICAgICAgIC8vIGlmKG5leHQuaW5kZXhPZihwYXRoKSAhPSAtMSkge1xuICAgICAgICAgICAgICAvLyAgICAgaWYod2luZG93LnJvdXRlc1twYXRoXS5yZXF1aXJlTG9naW4gJiYgIVNlc3Npb25TZXJ2aWNlLmdldFVzZXJBdXRoZW50aWNhdGVkKCkpIHtcbiAgICAgICAgICAgICAgLy8gICAgICAgICBhbGVydChcIllvdSBuZWVkIHRvIGJlIGF1dGhlbnRpY2F0ZWQgdG8gc2VlIHRoaXMgcGFnZSFcIik7XG4gICAgICAgICAgICAgIC8vICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgLy8gICAgIH1cbiAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAkc3RhdGVQcm92aWRlci5zdGF0ZShwYXRoLCB3aW5kb3cucm91dGVzW3BhdGhdKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvRmlsZXMnKTtcblxufV0pO1xuXG4vLyB9KTtcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1kb25lIHdpdGggTXVyYWdpamltYW5hIFJpY2hhcmQgPGJlYXN0YXI0NTdAZ21haWwuY29tPi0tLS0tLS0tLS0tLS0tLS8vXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tZGVhbCB3aXRoIHVzZXIncyBhY3Rpb25zIGFuZCBpbnRlcmFjdGlvbiB3aXRoIG90aGVyIHVzZXJzLS0tLS0tLS0tLS0tLS0tLy9cbiIsIjsoZnVuY3Rpb24od2luZG93LCBhbmd1bGFyLCB1bmRlZmluZWQpIHtcblxuICAndXNlIHN0cmljdCc7XG5cbiAgdmFyIG1mYiA9IGFuZ3VsYXIubW9kdWxlKCduZy1tZmInLCBbXSk7XG5cbiAgbWZiLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgICAkdGVtcGxhdGVDYWNoZS5wdXQoJ25nLW1mYi1tZW51LWRlZmF1bHQudHBsLmh0bWwnLFxuICAgICAgJzx1bCBjbGFzcz1cIm1mYi1jb21wb25lbnQtLXt7cG9zaXRpb259fSBtZmIte3tlZmZlY3R9fVwiJyArXG4gICAgICAnICAgIGRhdGEtbWZiLXRvZ2dsZT1cInt7dG9nZ2xpbmdNZXRob2R9fVwiIGRhdGEtbWZiLXN0YXRlPVwie3ttZW51U3RhdGV9fVwiPicgK1xuICAgICAgJyAgPGxpIGNsYXNzPVwibWZiLWNvbXBvbmVudF9fd3JhcFwiPicgK1xuICAgICAgJyAgICA8YSBuZy1jbGljaz1cImNsaWNrZWQoKVwiIG5nLW1vdXNlZW50ZXI9XCJob3ZlcmVkKClcIiBuZy1tb3VzZWxlYXZlPVwiaG92ZXJlZCgpXCInICtcbiAgICAgICcgICAgICAgbmctYXR0ci1kYXRhLW1mYi1sYWJlbD1cInt7bGFiZWx9fVwiIGNsYXNzPVwibWZiLWNvbXBvbmVudF9fYnV0dG9uLS1tYWluXCI+JyArXG4gICAgICAnICAgICA8aSBjbGFzcz1cIm1mYi1jb21wb25lbnRfX21haW4taWNvbi0tcmVzdGluZyB7e3Jlc3Rpbmd9fVwiPjwvaT4nICtcbiAgICAgICcgICAgIDxpIGNsYXNzPVwibWZiLWNvbXBvbmVudF9fbWFpbi1pY29uLS1hY3RpdmUge3thY3RpdmV9fVwiPjwvaT4nICtcbiAgICAgICcgICAgPC9hPicgK1xuICAgICAgJyAgICA8dWwgY2xhc3M9XCJtZmItY29tcG9uZW50X19saXN0XCIgbmctdHJhbnNjbHVkZT4nICtcbiAgICAgICcgICAgPC91bD4nICtcbiAgICAgICc8L2xpPicgK1xuICAgICAgJzwvdWw+J1xuICAgICk7XG5cbiAgICAkdGVtcGxhdGVDYWNoZS5wdXQoJ25nLW1mYi1tZW51LW1kLnRwbC5odG1sJyxcbiAgICAgICc8dWwgY2xhc3M9XCJtZmItY29tcG9uZW50LS17e3Bvc2l0aW9ufX0gbWZiLXt7ZWZmZWN0fX1cIicgK1xuICAgICAgJyAgICBkYXRhLW1mYi10b2dnbGU9XCJ7e3RvZ2dsaW5nTWV0aG9kfX1cIiBkYXRhLW1mYi1zdGF0ZT1cInt7bWVudVN0YXRlfX1cIj4nICtcbiAgICAgICcgIDxsaSBjbGFzcz1cIm1mYi1jb21wb25lbnRfX3dyYXBcIj4nICtcbiAgICAgICcgICAgPGEgbmctY2xpY2s9XCJjbGlja2VkKClcIiBuZy1tb3VzZWVudGVyPVwiaG92ZXJlZCgpXCIgbmctbW91c2VsZWF2ZT1cImhvdmVyZWQoKVwiJyArXG4gICAgICAnICAgICAgIHN0eWxlPVwiYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7IGJveC1zaGFkb3c6IG5vbmU7XCInICtcbiAgICAgICcgICAgICAgbmctYXR0ci1kYXRhLW1mYi1sYWJlbD1cInt7bGFiZWx9fVwiIGNsYXNzPVwibWZiLWNvbXBvbmVudF9fYnV0dG9uLS1tYWluXCI+JyArXG4gICAgICAnICAgICA8bWQtYnV0dG9uIGNsYXNzPVwibWQtZmFiIG1kLWFjY2VudFwiIGFyaWEtbGFiZWw9e3tsYWJlbH19IHN0eWxlPVwicG9zaXRpb246cmVsYXRpdmU7IG1hcmdpbjogMDsgcGFkZGluZzowO1wiPicgK1xuICAgICAgJyAgICAgICA8bWQtaWNvbiBzdHlsZT1cImxlZnQ6IDA7IHBvc2l0aW9uOiByZWxhdGl2ZTtcIiBtZC1zdmctaWNvbj1cInt7cmVzdGluZ319XCInICtcbiAgICAgICcgICAgICAgICBjbGFzcz1cIm1mYi1jb21wb25lbnRfX21haW4taWNvbi0tcmVzdGluZ1wiPjwvbWQtaWNvbj4nICtcbiAgICAgICcgICAgICAgPG1kLWljb24gc3R5bGU9XCJwb3NpdGlvbjpyZWxhdGl2ZTtcIiBtZC1zdmctaWNvbj1cInt7YWN0aXZlfX1cIicgK1xuICAgICAgJyAgICAgICAgIGNsYXNzPVwibWZiLWNvbXBvbmVudF9fbWFpbi1pY29uLS1hY3RpdmVcIj48L21kLWljb24+JyArXG4gICAgICAnICAgICA8L21kLWJ1dHRvbj4nICtcbiAgICAgICcgICAgPC9hPicgK1xuICAgICAgJyAgICA8dWwgY2xhc3M9XCJtZmItY29tcG9uZW50X19saXN0XCIgbmctdHJhbnNjbHVkZT4nICtcbiAgICAgICcgICAgPC91bD4nICtcbiAgICAgICc8L2xpPicgK1xuICAgICAgJzwvdWw+J1xuICAgICk7XG5cbiAgICAkdGVtcGxhdGVDYWNoZS5wdXQoJ25nLW1mYi1idXR0b24tZGVmYXVsdC50cGwuaHRtbCcsXG4gICAgICAnPGxpPicgK1xuICAgICAgJyAgPGEgZGF0YS1tZmItbGFiZWw9XCJ7e2xhYmVsfX1cIiBjbGFzcz1cIm1mYi1jb21wb25lbnRfX2J1dHRvbi0tY2hpbGRcIj4nICtcbiAgICAgICcgICAgPGkgY2xhc3M9XCJtZmItY29tcG9uZW50X19jaGlsZC1pY29uIHt7aWNvbn19XCI+JyArXG4gICAgICAnICAgIDwvaT4nICtcbiAgICAgICcgIDwvYT4nICtcbiAgICAgICc8L2xpPidcbiAgICApO1xuXG4gICAgJHRlbXBsYXRlQ2FjaGUucHV0KCduZy1tZmItYnV0dG9uLW1kLnRwbC5odG1sJyxcbiAgICAgICc8bGk+JyArXG4gICAgICAnICA8YSBocmVmPVwiXCIgZGF0YS1tZmItbGFiZWw9XCJ7e2xhYmVsfX1cIiBjbGFzcz1cIm1mYi1jb21wb25lbnRfX2J1dHRvbi0tY2hpbGRcIiAnICtcbiAgICAgICcgICAgIHN0eWxlPVwiYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7IGJveC1zaGFkb3c6IG5vbmU7XCI+JyArXG4gICAgICAnICAgICA8bWQtYnV0dG9uIHN0eWxlPVwibWFyZ2luOiAwO1wiIGNsYXNzPVwibWQtZmFiIG1kLWFjY2VudFwiIGFyaWEtbGFiZWw9e3tsYWJlbH19PicgK1xuICAgICAgJyAgICAgICA8bWQtaWNvbiBtZC1zdmctc3JjPVwiaW1nL2ljb25zL2FuZHJvaWQuc3ZnXCI+PC9tZC1pY29uPicgK1xuICAgICAgJyAgICAgICA8bWQtaWNvbiBtZC1zdmctaWNvbj1cInt7aWNvbn19XCI+PC9tZC1pY29uPicgK1xuICAgICAgJyAgICAgPC9tZC1idXR0b24+JyArXG4gICAgICAnICA8L2E+JyArXG4gICAgICAnPC9saT4nXG4gICAgKTtcbiAgfV0pO1xuXG4gIG1mYi5kaXJlY3RpdmUoJ21mYkJ1dHRvbkNsb3NlJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICByZXF1aXJlOiAnXm1mYk1lbnUnLFxuICAgICAgbGluazogZnVuY3Rpb24oJHNjb3BlLCAkZWxlbWVudCwgJGF0dHJzLCBtZmJNZW51Q29udHJvbGxlcikge1xuICAgICAgICAkZWxlbWVudC5iaW5kKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIG1mYk1lbnVDb250cm9sbGVyLmNsb3NlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICB9O1xuXG4gIH0pO1xuXG4gIG1mYi5kaXJlY3RpdmUoJ21mYk1lbnUnLCBbJyR0aW1lb3V0JywgZnVuY3Rpb24oJHRpbWVvdXQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgICB0cmFuc2NsdWRlOiB0cnVlLFxuICAgICAgcmVwbGFjZTogdHJ1ZSxcbiAgICAgIHNjb3BlOiB7XG4gICAgICAgIHBvc2l0aW9uOiAnQCcsXG4gICAgICAgIGVmZmVjdDogJ0AnLFxuICAgICAgICBsYWJlbDogJ0AnLFxuICAgICAgICByZXN0aW5nOiAnQHJlc3RpbmdJY29uJyxcbiAgICAgICAgYWN0aXZlOiAnQGFjdGl2ZUljb24nLFxuICAgICAgICBtYWluQWN0aW9uOiAnJicsXG4gICAgICAgIG1lbnVTdGF0ZTogJz0/JyxcbiAgICAgICAgdG9nZ2xpbmdNZXRob2Q6ICdAJ1xuICAgICAgfSxcbiAgICAgIHRlbXBsYXRlVXJsOiBmdW5jdGlvbihlbGVtLCBhdHRycykge1xuICAgICAgICByZXR1cm4gYXR0cnMudGVtcGxhdGVVcmwgfHwgJ25nLW1mYi1tZW51LWRlZmF1bHQudHBsLmh0bWwnO1xuICAgICAgfSxcbiAgICAgIGNvbnRyb2xsZXI6IFsnJHNjb3BlJywgJyRhdHRycycsIGZ1bmN0aW9uKCRzY29wZSwgJGF0dHJzKSB7XG4gICAgICAgIHZhciBvcGVuU3RhdGUgPSAnb3BlbicsXG4gICAgICAgICAgY2xvc2VkU3RhdGUgPSAnY2xvc2VkJztcblxuICAgICAgICAvLyBBdHRhY2hlZCB0b2dnbGUsIG9wZW4gYW5kIGNsb3NlIHRvIHRoZSBjb250cm9sbGVyIHRvIGdpdmUgb3RoZXJcbiAgICAgICAgLy8gZGlyZWN0aXZlIGFjY2Vzc1xuICAgICAgICB0aGlzLnRvZ2dsZSA9IHRvZ2dsZTtcbiAgICAgICAgdGhpcy5jbG9zZSA9IGNsb3NlO1xuICAgICAgICB0aGlzLm9wZW4gPSBvcGVuO1xuXG4gICAgICAgICRzY29wZS5jbGlja2VkID0gY2xpY2tlZDtcbiAgICAgICAgJHNjb3BlLmhvdmVyZWQgPSBob3ZlcmVkO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXQgdGhlIHN0YXRlIHRvIHVzZXItZGVmaW5lZCB2YWx1ZS4gRmFsbGJhY2sgdG8gY2xvc2VkIGlmIG5vXG4gICAgICAgICAqIHZhbHVlIGlzIHBhc3NlZCBmcm9tIHRoZSBvdXRzaWRlLlxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKCEkc2NvcGUubWVudVN0YXRlKSB7XG4gICAgICAgICAgJHNjb3BlLm1lbnVTdGF0ZSA9IGNsb3NlZFN0YXRlO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIG9uIHRvdWNoIGRldmljZSBBTkQgJ2hvdmVyJyBtZXRob2QgaXMgc2VsZWN0ZWQ6XG4gICAgICAgICAqIHdhaXQgZm9yIHRoZSBkaWdlc3QgdG8gcGVyZm9ybSBhbmQgdGhlbiBjaGFuZ2UgaG92ZXIgdG8gY2xpY2suXG4gICAgICAgICAqL1xuICAgICAgICBpZiAoX2lzVG91Y2hEZXZpY2UoKSAmJiBfaXNIb3ZlckFjdGl2ZSgpKSB7XG4gICAgICAgICAgJHRpbWVvdXQodXNlQ2xpY2spO1xuICAgICAgICB9XG5cbiAgICAgICAgJGF0dHJzLiRvYnNlcnZlKCdtZW51U3RhdGUnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAkc2NvcGUuY3VycmVudFN0YXRlID0gJHNjb3BlLm1lbnVTdGF0ZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZnVuY3Rpb24gY2xpY2tlZCgpIHtcbiAgICAgICAgICAvLyBJZiB0aGVyZSBpcyBhIG1haW4gYWN0aW9uLCBsZXQncyBmaXJlIGl0XG4gICAgICAgICAgaWYgKCRzY29wZS5tYWluQWN0aW9uKSB7XG4gICAgICAgICAgICAkc2NvcGUubWFpbkFjdGlvbigpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICghX2lzSG92ZXJBY3RpdmUoKSkge1xuICAgICAgICAgICAgdG9nZ2xlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGZ1bmN0aW9uIGhvdmVyZWQoKSB7XG4gICAgICAgICAgaWYgKF9pc0hvdmVyQWN0aXZlKCkpIHtcbiAgICAgICAgICAgIC8vdG9nZ2xlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbnZlcnQgdGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIG1lbnUuXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiB0b2dnbGUoKSB7XG4gICAgICAgICAgaWYgKCRzY29wZS5tZW51U3RhdGUgPT09IG9wZW5TdGF0ZSkge1xuICAgICAgICAgICAgY2xvc2UoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb3BlbigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIG9wZW4oKSB7XG4gICAgICAgICAgJHNjb3BlLm1lbnVTdGF0ZSA9IG9wZW5TdGF0ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGNsb3NlKCkge1xuICAgICAgICAgICRzY29wZS5tZW51U3RhdGUgPSBjbG9zZWRTdGF0ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDaGVjayBpZiB3ZSdyZSBvbiBhIHRvdWNoLWVuYWJsZWQgZGV2aWNlLlxuICAgICAgICAgKiBSZXF1aXJlcyBNb2Rlcm5penIgdG8gcnVuLCBvdGhlcndpc2Ugc2ltcGx5IHJldHVybnMgZmFsc2VcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIF9pc1RvdWNoRGV2aWNlKCkge1xuICAgICAgICAgIHJldHVybiB3aW5kb3cuTW9kZXJuaXpyICYmIE1vZGVybml6ci50b3VjaDtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIF9pc0hvdmVyQWN0aXZlKCkge1xuICAgICAgICAgIHJldHVybiAkc2NvcGUudG9nZ2xpbmdNZXRob2QgPT09ICdob3Zlcic7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ29udmVydCB0aGUgdG9nZ2xpbmcgbWV0aG9kIHRvICdjbGljaycuXG4gICAgICAgICAqIFRoaXMgaXMgdXNlZCB3aGVuICdob3ZlcicgaXMgc2VsZWN0ZWQgYnkgdGhlIHVzZXJcbiAgICAgICAgICogYnV0IGEgdG91Y2ggZGV2aWNlIGlzIGVuYWJsZWQuXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiB1c2VDbGljaygpIHtcbiAgICAgICAgICAkc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJHNjb3BlLnRvZ2dsaW5nTWV0aG9kID0gJ2NsaWNrJztcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfV1cbiAgICB9O1xuICB9XSk7XG5cbiAgbWZiLmRpcmVjdGl2ZSgnbWZiQnV0dG9uJywgW2Z1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICByZXF1aXJlOiAnXm1mYk1lbnUnLFxuICAgICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgICB0cmFuc2NsdWRlOiB0cnVlLFxuICAgICAgcmVwbGFjZTogdHJ1ZSxcbiAgICAgIHNjb3BlOiB7XG4gICAgICAgIGljb246ICdAJyxcbiAgICAgICAgbGFiZWw6ICdAJ1xuICAgICAgfSxcbiAgICAgIHRlbXBsYXRlVXJsOiBmdW5jdGlvbihlbGVtLCBhdHRycykge1xuICAgICAgICByZXR1cm4gYXR0cnMudGVtcGxhdGVVcmwgfHwgJ25nLW1mYi1idXR0b24tZGVmYXVsdC50cGwuaHRtbCc7XG4gICAgICB9XG4gICAgfTtcbiAgfV0pO1xuXG59KSh3aW5kb3csIGFuZ3VsYXIpO1xuIiwic3luYy5kaXJlY3RpdmUoJ2xlZnRNZW51JyxmdW5jdGlvbigpe1xuICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0FFJyxcbiAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgIGRhdGE6ICc9JyxcbiAgICAgICAgICAgIHVzZXI6ICc9JyxcbiAgICAgICAgICAgIHR5cGU6ICc9J1xuICAgICAgICB9LFxuICAgICAgICB0ZW1wbGF0ZVVybDogXCJkaXJlY3RpdmVzL2xlZnRNZW51Lmh0bWxcIlxuICAgIH07XG59KTtcbnN5bmMuZGlyZWN0aXZlKCdmZWVkcycsZnVuY3Rpb24oKXtcbiAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdBRScsXG4gICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICBwb3N0czogJz0nLFxuICAgICAgICAgICAgcmVwbGllczogJz0nLFxuICAgICAgICAgICAgY3JlYXRlUG9zdDonPSdcbiAgICAgICAgfSxcbiAgICAgICAgdGVtcGxhdGVVcmw6IFwiZGlyZWN0aXZlcy9taWRkbGVDb250ZW50Lmh0bWxcIlxuICAgIH07XG59KTtcbnN5bmMuZGlyZWN0aXZlKCdoZWFkZXInLGZ1bmN0aW9uKCl7XG4gIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiAnQUUnLFxuICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgZGF0YTogJz0nLFxuICAgICAgICAgICAgdXNlcjogJz0nLFxuICAgICAgICAgICAgdHlwZTogJz0nXG4gICAgICAgIH0sXG4gICAgICAgIHRlbXBsYXRlVXJsOiBcIi4vZGlyZWN0aXZlcy9oZWFkZXIuaHRtbFwiXG5cbiAgICB9O1xufSk7XG5cblxuc3luYy5kaXJlY3RpdmUoJ2tleWJpbmRpbmcnLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgIGludm9rZTogJyYnXG4gICAgICAgIH0sXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWwsIGF0dHIpIHtcbiAgICAgICAgICAgIE1vdXNldHJhcC5iaW5kKGF0dHIub24sIHNjb3BlLmludm9rZSk7XG4gICAgICAgIH1cbiAgICB9O1xufSk7XG5cbnN5bmMuZGlyZWN0aXZlKCdkcm9wcGFibGUnLCBbJ3VzZXJJbnRlcmFjdGlvbk5vdGlmaWNhdGlvbicsJ0ZpbGVzJyxmdW5jdGlvbih1c2VySW50ZXJhY3Rpb25Ob3RpZmljYXRpb24sRmlsZXMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgZHJvcDogJyYnLFxuICAgICAgICAgICAgYmluOiAnPScvLyBwYXJlbnRcbiAgICAgICAgfSxcbiAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQpIHtcbiAgICAgICAgICAgIC8vIGFnYWluIHdlIG5lZWQgdGhlIG5hdGl2ZSBvYmplY3RcbiAgICAgICAgICAgIHZhciBlbCA9IGVsZW1lbnRbMF07XG4gICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgICAnZHJhZ292ZXInLFxuICAgICAgICAgICAgICBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICBlLmRhdGFUcmFuc2Zlci5kcm9wRWZmZWN0ID0gJ21vdmUnO1xuICAgICAgICAgICAgICAgICAgLy8gYWxsb3dzIHVzIHRvIGRyb3BcblxuICAgICAgICAgICAgICAgICAgaWYgKGUucHJldmVudERlZmF1bHQpIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LmFkZCgnb3ZlcicpO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBmYWxzZVxuICAgICAgICAgICk7XG4gICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgICAgICdkcmFnZW50ZXInLFxuICAgICAgICAgICAgICBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoJ292ZXInKTtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgZmFsc2VcbiAgICAgICAgICApO1xuXG4gICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICAgICAgJ2RyYWdsZWF2ZScsXG4gICAgICAgICAgICAgIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZSgnb3ZlcicpO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBmYWxzZVxuICAgICAgICAgICk7XG4gICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICAgICdkcm9wJyxcbiAgICAgICAgICAgICAgICBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gU3RvcHMgc29tZSBicm93c2VycyBmcm9tIHJlZGlyZWN0aW5nLlxuICAgICAgICAgICAgICAgICAgICBpZiAoZS5zdG9wUHJvcGFnYXRpb24pIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QucmVtb3ZlKCdvdmVyJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGJpbklkID0gdGhpcy5pZDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlLmRhdGFUcmFuc2Zlci5nZXREYXRhKCdUZXh0JykpO1xuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnSXRlbSBub3cgaXM6JytpdGVtKTtcblxuXG4gICAgICAgICAgICAgICAgICAgIHRyeXtcbiAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxsIHRoZSBwYXNzZWQgZHJvcCBmdW5jdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBlbmRDaGlsZChpdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbihzY29wZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmbiA9IHNjb3BlLmRyb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJ3VuZGVmaW5lZCcgIT09IHR5cGVvZiBmbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm4oaXRlbS5pZCwgYmluSWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1jYXRjaChlKXtcbiAgICAgICAgICAgICAgICAgICAgICAvL3Rocm93IGVycm9yIHRoYXQgaGFwcGVuIHdoZW4gZmlsZSBpcyBkcm9wcGVkIGluIGl0J3Mgb3duIGxvY2F0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgLy9naXZlIHNvbWUgYWxlcnQgdG8gbm90aWZ5IHdoYXQgaGFwcG5lZFxuICAgICAgICAgICAgICAgICAgICAgIC8vIHRocm93KCBuZXcgRXJyb3IoZSkpXG4gICAgICAgICAgICAgICAgICAgICAgLy8gdXNlckludGVyYWN0aW9uTm90aWZpY2F0aW9uLmVycm9yKFwiRHJvcCBGaWxlIG9uIGZvbGRlciB0byBtb3ZlIGl0IVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBmYWxzZVxuICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxufV0pO1xuIiwiLyogZ2xvYmFsICR3aW5kb3cgKi9cbi8qIGdsb2JhbCBMb2dnZXIgKi9cblxuTG9nZ2VyLmNvbnRyb2xsZXIoJ2xvZ2luQ29udHJvbGxlcicsWyckc2NvcGUnLCckaHR0cCcsJyRyb290U2NvcGUnLCckd2luZG93JywgZnVuY3Rpb24gKCRzY29wZSwkaHR0cCwkcm9vdFNjb3BlLCR3aW5kb3cpIHtcbiAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgJ2NyZWRlZGVudGlhbC1ub3QtZm91bmQnICAgICAgIDogJ0NyZWRlbnRpYWxzIG5vdCBmb3VuZCEnLFxuICAgICAgICAnc3VjY2VzcycgICAgICAgICAgICAgICAgICAgICAgOiAnbG9nZ2luZyBpbi4uLidcbiAgICB9O1xuICAkc2NvcGUubG9naW4gPSBmdW5jdGlvbiAoaW5mbylcbiAge1xuICAgIC8vYmVmb3JlIG5vdGlmeSB0aGF0IHdlIGFyZSBsb2dnaW5naW5cbiAgICAkKCcubG9naW4tZm9ybS1tYWluLW1lc3NhZ2UnKS5hZGRDbGFzcygnc2hvdyBzdWNjZXNzJykuaHRtbChvcHRpb25zWydzdWNjZXNzJ10pO1xuICAgICRodHRwLnBvc3QoJHJvb3RTY29wZS5lbmRQb2ludCArICcvc2Vzc2lvbnMnLGluZm8pXG4gICAgLnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgICAgIGlmKHJlc3BvbnNlID09PVwiMVwiKXtcbiAgICAgICAgICAgIFJlZGlyZWN0aW5nKCk7XG5cbiAgICAgICAgfWVsc2UgaWYocmVzcG9uc2UgPT09IFwiMFwiKXtcbiAgICAgICAgICAgICAkKCcubG9naW4tZm9ybS1tYWluLW1lc3NhZ2UnKS5hZGRDbGFzcygnc2hvdyBlcnJvcicpLmh0bWwob3B0aW9uc1snY3JlZGVkZW50aWFsLW5vdC1mb3VuZCddKTtcbiAgICAgICAgfWVsc2UgaWYocmVzcG9uc2UgPT09IFwibm90VmVyaWZpZWRcIil7XG4gICAgICAgICAgICBub3RWZXJpZmllZCgpO1xuICAgICAgICB9XG4gICAgfSlcbiAgICAuZXJyb3IoZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yOicrIGVycm9yKTtcbiAgICB9KVxuICAgIGZ1bmN0aW9uIG5vdFZlcmlmaWVkKCl7XG4gICAgICAgICAkd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL25vdFZlcmlmaWVkJztcbiAgICB9XG4gICAgZnVuY3Rpb24gUmVkaXJlY3RpbmcoKXtcbiAgICAgICAgJHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy9zeW5jJztcbiAgICB9XG4gIH1cbn1dKTtcbiIsIkxvZ2dlci5jb250cm9sbGVyKCdSZWdpc3RlckNvbnRyb2xsZXInLCBbJyRzY29wZScsJyRyb290U2NvcGUnLCckaHR0cCcsZnVuY3Rpb24gKCRzY29wZSwkcm9vdFNjb3BlLCRodHRwKSB7XG4gICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgICdwYXNzd29yZC1ub3RNYXRjaCc6ICdwYXNzd29yZCBkbyBub3QgbWF0Y2gnLFxuICAgICAgICAnU2lnblVwSW5Qcm9ncmVzcycgOiAnV2FpdCB3ZSBhcmUgc2V0dGluZyB1cCB5b3VyIGFjY291bnQuJ1xuICAgIH07XG4gICAgJHNjb3BlLnJlZ2lzdGVyPWZ1bmN0aW9uKHVzZXIpe1xuICAgICAgJCgnLnJlZ2lzdGVyLWZvcm0tbWFpbi1tZXNzYWdlJykuYWRkQ2xhc3MoJ3Nob3cgc3VjY2VzcycpLmh0bWwob3B0aW9uc1snU2lnblVwSW5Qcm9ncmVzcyddKTtcbiAgICAgICAgaWYoJCgnI3Bhc3N3b3JkJykudmFsKCkgIT0gJCgnI3Bhc3N3b3JkLWNvbmZpcm0nKS52YWwoKSl7XG4gICAgICAgICAgJCgnLnJlZ2lzdGVyLWZvcm0tbWFpbi1tZXNzYWdlJykuYWRkQ2xhc3MoJ3Nob3cgZXJyb3InKS5odG1sKG9wdGlvbnNbJ3Bhc3N3b3JkLW5vdE1hdGNoJ10pO1xuICAgICAgICAgIHNldFRpbWVvdXQobWVzc2FnZVJlbW92ZSwgMjAwMCk7XG4gICAgICAgICAgZnVuY3Rpb24gbWVzc2FnZVJlbW92ZSgpe1xuICAgICAgICAgICAgICAkKCcucmVnaXN0ZXItZm9ybS1tYWluLW1lc3NhZ2UnKS5yZW1vdmVDbGFzcygnc2hvdyBlcnJvcicpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHVzZXJuYW1lPSQoJyN1c2VybmFtZScpLnZhbCgpO1xuICAgICAgICB2YXIgZW1haWw9JCgnI2VtYWlsJykudmFsKCk7XG5cblxuICAgICAgICBqUXVlcnkucG9zdCgnL3Nlc3Npb25zJywge3VzZXJuYW1lOiB1c2VybmFtZSwgcGFzc3dvcmQ6dXNlci5wYXNzd29yZCwgZW1haWw6ZW1haWwsIG9wdGlvbjp1c2VyLm9wdGlvbiwgcGhvbmU6dXNlci5waG9uZX0sIGZ1bmN0aW9uKGRhdGEsIHRleHRTdGF0dXMsIHhocikge1xuICAgICAgICAgICAgaWYoZGF0YSA9PSAxKXtcbiAgICAgICAgICAgICAgICAgUmVkaXJlY3RpbmcoKTtcbiAgICAgICAgICAgIH1lbHNlIGlmKGRhdGEgPT0wKXtcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnd2UgYXJlIGZpcmVkIHRoaXMgY2FuIG5vdCBoYXBwZW4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkuZXJyb3IoZnVuY3Rpb24oZXJyb3IpIHtcblxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICAgICAgZnVuY3Rpb24gUmVkaXJlY3RpbmcoKXtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9ICcvY2hlY2tFbWFpbCc7XG4gICAgICAgIH1cbiAgICB9XG59XSk7XG5cbkxvZ2dlci5kaXJlY3RpdmUoJ3VuaXF1ZVVzZXJuYW1lJywgWydpc1VzZXJuYW1lQXZhaWxhYmxlJyxmdW5jdGlvbihpc1VzZXJuYW1lQXZhaWxhYmxlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgcmVxdWlyZTogJ25nTW9kZWwnLFxuICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIG5nTW9kZWwpIHtcbiAgICAgICAgICAgIG5nTW9kZWwuJGFzeW5jVmFsaWRhdG9ycy51bmlxdWVVc2VybmFtZSA9IGlzVXNlcm5hbWVBdmFpbGFibGU7XG4gICAgICAgIH1cbiAgICB9O1xufV0pO1xuTG9nZ2VyLmZhY3RvcnkoJ2lzVXNlcm5hbWVBdmFpbGFibGUnLCBbJyRxJywnJGh0dHAnLCckcm9vdFNjb3BlJyxmdW5jdGlvbigkcSwgJGh0dHAsJHJvb3RTY29wZSkge1xuICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICAnYnRuLWxvYWRpbmcnOiAnPGkgY2xhc3M9XCJmYSBmYS1zcGlubmVyIGZhLXB1bHNlXCI+PC9pPicsXG4gICAgICAgICdidG4tc3VjY2Vzcyc6ICc8aSBjbGFzcz1cImZhIGZhLWNoZWNrXCI+PC9pPicsXG4gICAgICAgICdidG4tZXJyb3InOiAnPGkgY2xhc3M9XCJmYSBmYS1yZW1vdmVcIj48L2k+JyxcbiAgICAgICAgJ21zZy1zdWNjZXNzJzogJ0FsbCBHb29kISBSZWRpcmVjdGluZy4uLicsXG4gICAgICAgICdtc2ctdXNlcm5hbWUtYXZhaWxhYmxlJzogJ2dvb2QgdXNlcm5hbWUgYXZhaWxhYmxlIScsXG4gICAgICAgICdtc2ctdXNlcm5hbWUtdGFrZW4nICAgIDogJ29vcHMgdXNlcm5hbWUgdGFrZW4nLFxuICAgICAgICAnbXNnLWVtYWlsLXRha2VuJyAgICAgICA6ICdlbWFpbCB0YWtlbicsXG4gICAgICAgICdtc2cteW91ci1waG9uZS1zdWNrJyAgIDogJ3lvdXIgcGhvbmUgaXMgbm90IHZhbGlkJyxcbiAgICAgICAgJ3VzZUFKQVgnOiB0cnVlLFxuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHVzZXJuYW1lKSB7XG5cbiAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuICAgICAgICAkaHR0cC5nZXQoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL3VzZXJzP3VzZXJuYW1lPScgKyB1c2VybmFtZSArICcmYWNjZXNzX3Rva2VuPUJjN0RXUzdLS1JMdHhtZGRVWkkxVDFsWnUySjFZaFI4T0xYR1dOWm4nKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgaWYoZGF0YT09J2F2YWlsYWJsZScpe1xuICAgICAgICAgICAgICAgICQoJy5yZWdpc3Rlci1mb3JtLW1haW4tbWVzc2FnZScpLmFkZENsYXNzKCdzaG93IHN1Y2Nlc3MnKS5odG1sKG9wdGlvbnNbJ21zZy11c2VybmFtZS1hdmFpbGFibGUnXSk7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChtZXNzYWdlUmVtb3ZlLCAyMDAwKTtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBtZXNzYWdlUmVtb3ZlKCl7XG4gICAgICAgICAgICAgICAgICAgICQoJy5yZWdpc3Rlci1mb3JtLW1haW4tbWVzc2FnZScpLnJlbW92ZUNsYXNzKCdzaG93IHN1Y2Nlc3MnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9ZWxzZSBpZihkYXRhPT0ndGFrZW4nKXtcbiAgICAgICAgICAgICAgICAkKCcucmVnaXN0ZXItZm9ybS1tYWluLW1lc3NhZ2UnKS5hZGRDbGFzcygnc2hvdyBlcnJvcicpLmh0bWwob3B0aW9uc1snbXNnLXVzZXJuYW1lLXRha2VuJ10pO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQodXNlcm5hbWVUYWtlbiwgMjAwMCk7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gdXNlcm5hbWVUYWtlbigpe1xuICAgICAgICAgICAgICAgICAgICAkKCcucmVnaXN0ZXItZm9ybS1tYWluLW1lc3NhZ2UnKS5yZW1vdmVDbGFzcygnc2hvdyBlcnJvcicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdCgpO1xuICAgICAgICB9KS5lcnJvcihmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfVxufV0pO1xuTG9nZ2VyLmRpcmVjdGl2ZSgndW5pcXVlRW1haWwnLCBbJ2lzRW1haWxBdmFpbGFibGUnLGZ1bmN0aW9uKGlzRW1haWxBdmFpbGFibGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgICByZXF1aXJlOiAnbmdNb2RlbCcsXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgbmdNb2RlbCkge1xuICAgICAgICAgICAgbmdNb2RlbC4kYXN5bmNWYWxpZGF0b3JzLnVuaXF1ZUVtYWlsID0gaXNFbWFpbEF2YWlsYWJsZTtcbiAgICAgICAgfVxuICAgIH07XG59XSk7XG5Mb2dnZXIuZmFjdG9yeSgnaXNFbWFpbEF2YWlsYWJsZScsIFsnJHEnLCckaHR0cCcsJyRyb290U2NvcGUnLGZ1bmN0aW9uICgkcSwgJGh0dHAsICRyb290U2NvcGUpIHtcbiAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgJ2J0bi1sb2FkaW5nJzogJzxpIGNsYXNzPVwiZmEgZmEtc3Bpbm5lciBmYS1wdWxzZVwiPjwvaT4nLFxuICAgICAgICAnYnRuLXN1Y2Nlc3MnOiAnPGkgY2xhc3M9XCJmYSBmYS1jaGVja1wiPjwvaT4nLFxuICAgICAgICAnYnRuLWVycm9yJzogJzxpIGNsYXNzPVwiZmEgZmEtcmVtb3ZlXCI+PC9pPicsXG4gICAgICAgICdtc2ctc3VjY2Vzcyc6ICdBbGwgR29vZCEgUmVkaXJlY3RpbmcuLi4nLFxuICAgICAgICAnbXNnLXVzZXJuYW1lLWF2YWlsYWJsZSc6ICdnb29kIHVzZXJuYW1lIGF2YWlsYWJsZSEnLFxuICAgICAgICAnbXNnLXVzZXJuYW1lLXRha2VuJyAgICA6ICdvb3BzIHVzZXJuYW1lIHRha2VuJyxcbiAgICAgICAgJ21zZy1lbWFpbC10YWtlbicgICAgICAgOiAnZW1haWwgdGFrZW4nLFxuICAgICAgICAnbXNnLWVtYWlsLWF2YWlsYWJsZScgICA6ICdlbWFpbCBhdmFpbGFibGUnLFxuICAgICAgICAnbXNnLXlvdXItcGhvbmUtc3VjaycgICA6ICd5b3VyIHBob25lIGlzIG5vdCB2YWxpZCcsXG4gICAgICAgICd1c2VBSkFYJzogdHJ1ZSxcbiAgICB9O1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uKGVtYWlsKSB7XG4gICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgICRodHRwLmdldCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvdXNlcnM/ZW1haWw9JyArIGVtYWlsICsgJyZhY2Nlc3NfdG9rZW49QmM3RFdTN0tLUkx0eG1kZFVaSTFUMWxadTJKMVloUjhPTFhHV05abicpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSl7XG5cbiAgICAgICAgICAgIGlmKGRhdGE9PSdlbWFpbC1hdmFpbGFibGUnKXtcbiAgICAgICAgICAgICAgICAkKCcucmVnaXN0ZXItZm9ybS1tYWluLW1lc3NhZ2UnKS5hZGRDbGFzcygnc2hvdyBzdWNjZXNzJykuaHRtbChvcHRpb25zWydtc2ctZW1haWwtYXZhaWxhYmxlJ10pO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQobWVzc2FnZVJlbW92ZSwgMjAwMCk7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gbWVzc2FnZVJlbW92ZSgpe1xuICAgICAgICAgICAgICAgICAgICAkKCcucmVnaXN0ZXItZm9ybS1tYWluLW1lc3NhZ2UnKS5yZW1vdmVDbGFzcygnc2hvdyBzdWNjZXNzJyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9ZWxzZSBpZihkYXRhPT0nZW1haWwtdGFrZW4nKXtcbiAgICAgICAgICAgICAgICAkKCcucmVnaXN0ZXItZm9ybS1tYWluLW1lc3NhZ2UnKS5hZGRDbGFzcygnc2hvdyBlcnJvcicpLmh0bWwob3B0aW9uc1snbXNnLWVtYWlsLXRha2VuJ10pO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQobWVzc2FnZUVtYWlsVGFrZW4sIDIwMDApO1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG1lc3NhZ2VFbWFpbFRha2VuKCl7XG4gICAgICAgICAgICAgICAgICAgICQoJy5yZWdpc3Rlci1mb3JtLW1haW4tbWVzc2FnZScpLnJlbW92ZUNsYXNzKCdzaG93IGVycm9yJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdCgpO1xuICAgICAgICAgfSkuZXJyb3IoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgICAgICB9KTtcbiAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgIH07XG59XSk7XG4iLCJzeW5jLnNlcnZpY2UoJ0ZldGNoZXInLFsnJGh0dHAnLCckcScsJyRyb290U2NvcGUnLGZ1bmN0aW9uIEZpbGVzICgkaHR0cCwkcSwkcm9vdFNjb3BlKSB7XG4gICAgdGhpcy5mZXRjaCA9IGZ1bmN0aW9uKG9iamVjdCl7XG4gICAgICB2YXIgZGlmZmVyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgLy9kb3duIGVuZHBvaW50IHJldHVybiBhbGwgZmlsZXMgSSBvd25cbiAgICAgICRodHRwLmdldCgkcm9vdFNjb3BlLmVuZFBvaW50ICsnL2FwaS92MS8/K3F1ZXJ5PScrJ3F1ZXJ5K0ZldGNoVXNlcnMnK29iamVjdClcbiAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgICBkaWZmZXJlZC5yZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgIH0pXG4gICAgICAuZXJyb3IoZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgICBkaWZmZXJlZC5yZWplY3QoZXJyb3IpO1xuICAgICAgfSlcbiAgICAgIHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuICAgIH07XG59XSk7XG4iLCJzeW5jLnNlcnZpY2UoJ0ZpbGVzJywgWyckaHR0cCcsJyRxJywnJHJvb3RTY29wZScsZnVuY3Rpb24gRmlsZXMgKCRodHRwLCRxLCRyb290U2NvcGUpIHtcbiAgICB0aGlzLmdldEdyb3VwRmlsZXMgPWZ1bmN0aW9uKGdyb3VwSWQpIHtcbiAgICAgICAgdmFyIGRpZmZlcmVkID0gJHEuZGVmZXIoKTtcbiAgICAgICAgLy9kb3duIGVuZHBvaW50IHJldHVybiBhbGwgZmlsZXMgSSBvd25cbiAgICAgICAgJGh0dHAuZ2V0KCRyb290U2NvcGUuZW5kUG9pbnQgKycvYXBpL3YxL2dyb3Vwcy8nK2dyb3VwSWQrJy9ncm91cGZpbGVzJylcbiAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgICAgZGlmZmVyZWQucmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5lcnJvcihmdW5jdGlvbihlcnJvcikge1xuICAgICAgICAgICAgZGlmZmVyZWQucmVqZWN0KGVycm9yKTtcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGRpZmZlcmVkLnByb21pc2U7XG4gICAgfTtcbiAgICBcblxuICAgIHRoaXMuc2luZ2xlID0gZnVuY3Rpb24oZmlsZSl7XG4gICAgICB2YXIgcHJvbWlzZSA9ICRxLmRlZmVyKCk7XG4gICAgICAkaHR0cC5nZXQoJHJvb3RTY29wZS5lbmRQb2ludCsgJy9wcmV2aWV3LycrIGZpbGUpXG4gICAgICAuc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgIHByb21pc2UucmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICB9KVxuICAgICAgLmVycm9yKGZ1bmN0aW9uKGVycil7XG4gICAgICAgIHByb21pc2UucmVqZWN0KGVycik7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBwcm9taXNlLnByb21pc2U7XG4gICAgfTtcbiAgICB0aGlzLmdldEJveEZpbGVzID0gZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIGdyb3VwSWQgPSAxOy8vYnkgZGVmYXVsdCB0aGlzIGNhbiBiZSBhbnkgbnVtYmVyXG4gICAgICAgIHZhciBkaWZmZXJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgIC8vdGhlIGlkZWEgaXMgdG8gZ2V0IGEgZmlsZSBlaXRoZXIgZnJvbSBncm91cHMgb3IgaW5kaXZpZHVhbCBhY2NvdW50IGdyb3VwIGlzIG9wdGlvbmFsXG4gICAgICAgICRodHRwLmdldCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvZmlsZXMvJytncm91cElkKycvYm94ZmlsZXMnKVxuICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgICAgZGlmZmVyZWQucmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5lcnJvcihmdW5jdGlvbihlcnIpe1xuICAgICAgICAgIGRpZmZlcmVkLnJlamVjdChlcnIpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGRpZmZlcmVkLnByb21pc2U7XG4gICAgfTtcbiAgICB0aGlzLmdldE1pbWVUeXBlID0gZnVuY3Rpb24oZmlsZV9uYW1lKXtcbiAgICAgIHZhciBwcm9taXNlID0gJHEuZGVmZXIoKTtcbiAgICAgICRodHRwLmdldCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvZmlsZXMvbWltZVR5cGUvJysgZmlsZV9uYW1lKVxuICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgIHByb21pc2UucmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICB9KVxuICAgICAgLmVycm9yKGZ1bmN0aW9uKGVycil7XG4gICAgICAgICAgcHJvbWlzZS5yZWplY3QoZXJyKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHByb21pc2UucHJvbWlzZTtcbiAgICB9O1xuICAgIHRoaXMuZG93bmxvYWRGaWxlID0gZnVuY3Rpb24oZmlsZV9uYW1lKXtcblxuICAgICAgdmFyIHByb21pc2UgPSAkcS5kZWZlcigpO1xuICAgICAgLy9oYXJkIGNvZGVkIGEgdXNlciBTdHJpbVVwISBuZWVkIHRvIGluamVjdCBoaW0gZHlhbWljYWxseVxuICAgICAgJGh0dHAuZ2V0KCRyb290U2NvcGUuZW5kUG9pbnQrICcvYXBpL3YxL2ZpbGVzL2Rvd25sb2FkLycrZmlsZV9uYW1lKycvb2YvJysgJ1N0cmltVXAnKVxuICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICBwcm9taXNlLnJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgfSlcbiAgICAgIC5lcnJvcihmdW5jdGlvbihlcnIpe1xuICAgICAgICBwcm9taXNlLnJlamVjdChlcnIpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gcHJvbWlzZS5wcm9taXNlO1xuICAgIH07XG4gICAgcmV0dXJuIHRoaXM7XG59XSk7XG4iLCJzeW5jLnNlcnZpY2UoJ1Blb3BsZScsIFsnJHEnLCckaHR0cCcsJyRyb290U2NvcGUnLGZ1bmN0aW9uICgkcSwgJGh0dHAsICRyb290U2NvcGUpIHtcblx0dGhpcy5nZXQgID0gZnVuY3Rpb24gKCl7XG5cdFx0dmFyIGRpZmZlcmVkID0gJHEuZGVmZXIoKTtcblx0XHQkaHR0cC5nZXQoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL3N1Z2dlc3Rpb25zJylcblx0XHQuc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSl7XG5cdFx0XHRkaWZmZXJlZC5yZXNvbHZlKHJlc3BvbnNlKTtcblx0XHR9KVxuXHRcdC5lcnJvcihmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0ZGlmZmVyZWQucmVqZWN0KGVycm9yKTtcblx0XHR9KVxuXHRcdHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuXHR9XG5cdHRoaXMuYWxsSWZvbGxvdyA9IGZ1bmN0aW9uICgpIHtcblx0XHR2YXIgZGlmZmVyZWQgPSAkcS5kZWZlcigpO1xuXHRcdCRodHRwLmdldCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvbWUvZm9sbG93aW5ncycpXG5cdFx0LnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcG9uc2Upe1xuXHRcdFx0ZGlmZmVyZWQucmVzb2x2ZShyZXNwb25zZSk7XG5cdFx0fSlcblx0XHQuZXJyb3IoZnVuY3Rpb24oZXJyKXtcblx0XHRcdGRpZmZlcmVkLnJlamVjdChlcnIpO1xuXHRcdH0pXG5cdFx0cmV0dXJuIGRpZmZlcmVkLnByb21pc2U7XG5cdH1cblx0dGhpcy51bkZvbGxvdyA9IGZ1bmN0aW9uKGlkKXtcblx0XHR2YXIgZGlmZmVyZWQgPSAkcS5kZWZlcigpO1xuXHRcdCRodHRwLmRlbGV0ZSgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvbWUvZm9sbG93aW5nLycgK2lkKVxuXHRcdC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblx0XHRcdGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuXHRcdH0pXG5cdFx0LmVycm9yKGZ1bmN0aW9uKGVycil7XG5cdFx0XHRkaWZmZXJlZC5yZWplY3QoZXJyKTtcblx0XHR9KVxuXHRcdHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuXHR9XG5cdHRoaXMuZm9sbG93ID0gZnVuY3Rpb24ocGFyYW0pe1xuXHRcdHZhciBkaWZmZXJlZCA9ICRxLmRlZmVyKCk7XG5cdFx0JGh0dHAucHV0KCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS9tZS9mb2xsb3dpbmdzJywgcGFyYW0pXG5cdFx0LnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcG9uc2Upe1xuXHRcdFx0ZGlmZmVyZWQucmVzb2x2ZShyZXNwb25zZSk7XG5cdFx0fSlcblx0XHQuZXJyb3IoZnVuY3Rpb24oZXJyb3Ipe1xuXHRcdFx0ZGlmZmVyZWQucmVqZWN0KGVycm9yKTtcblx0XHR9KVxuXHRcdHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuXHR9XG5cdHJldHVybiB0aGlzO1xufV0pO1xuIiwic3luYy5zZXJ2aWNlKCdTaGFyZScsWyckbG9nJywnJGh0dHAnLCckcScsJyRyb290U2NvcGUnLCBmdW5jdGlvbiAoJGxvZywkaHR0cCwkcSwkcm9vdFNjb3BlKSB7XG5cdHRoaXMuc2hhcmUgPSBmdW5jdGlvbihzaGFyZWJsZU9iail7XG5cdFx0dmFyIGRpZmZlcmVkID0gJHEuZGVmZXIoKTtcbiAgICAgICAgJGh0dHAucG9zdCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvc2hhcmUnLHNoYXJlYmxlT2JqKVxuICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgICAgICBkaWZmZXJlZC5yZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmVycm9yKGZ1bmN0aW9uKGVycil7XG4gICAgICAgICAgICBkaWZmZXJlZC5yZWplY3QoZXJyKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuXHR9O1xuXHR0aGlzLmdldFVzZXIgPSBmdW5jdGlvbih1c2VyKXtcblxuXHRcdHZhciBkaWZmZXJlZCA9ICRxLmRlZmVyKCk7XG5cdFx0JGh0dHAuZ2V0KCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS9tZS91c2Vycy8nKyB1c2VyKVxuXHRcdC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblx0XHRcdGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuXHRcdH0pXG5cdFx0LmVycm9yKGZ1bmN0aW9uKGVycil7XG5cdFx0XHRkaWZmZXJlZC5yZWplY3QoZXJyKTtcblx0XHR9KTtcblx0XHRyZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcblx0fTtcblx0dGhpcy5maWxlTWltZSA9IGZ1bmN0aW9uKGZpbGUpe1xuXHRcdHZhciBkaWZmZXJlZCA9ICRxLmRlZmVyKCk7XG5cdFx0JGh0dHAuZ2V0KCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS9taW1lVHlwZS8nKyBmaWxlKVxuXHRcdC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblx0XHRcdGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuXHRcdH0pXG5cdFx0LmVycm9yKGZ1bmN0aW9uKGVycil7XG5cdFx0XHRkaWZmZXJlZC5yZWplY3QoZXJyKTtcblx0XHR9KTtcblx0XHRyZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcblx0fTtcbiAgICByZXR1cm4gdGhpcztcbn1dKTsiLCJzeW5jLnNlcnZpY2UoJ1VzZXInLCBbJyRodHRwJywnJHEnLCckcm9vdFNjb3BlJyxmdW5jdGlvbiBGaWxlcyAoJGh0dHAsJHEsJHJvb3RTY29wZSkge1xuXHR0aGlzLmluZm8gPSBmdW5jdGlvbigpe1xuXHRcdHZhciBwcm9taXNlID0gJHEuZGVmZXIoKTtcblx0XHQkaHR0cC5nZXQoJHJvb3RTY29wZS5lbmRQb2ludCArXCIvYXBpL3YxL3VzZXJzL2luZm9cIilcblx0XHQuc3VjY2VzcyhmdW5jdGlvbihyZXMpe1xuXHRcdFx0cHJvbWlzZS5yZXNvbHZlKHJlcyk7XG5cdFx0fSlcblx0XHQuZXJyb3IoZnVuY3Rpb24oKSB7XG5cdFx0XHRwcm9taXNlLnJlamVjdCgpO1xuXHRcdH0pO1xuXHRcdHJldHVybiBwcm9taXNlLnByb21pc2U7XG5cdH07XG5cdHRoaXMuZ3JvdXBzID0gZnVuY3Rpb24odXNlcil7XG4gICAgICB2YXIgZGlmZmVyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgJGh0dHAuZ2V0KCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS9tZS9ncm91cHMnKVxuICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICBkaWZmZXJlZC5yZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgIH0pXG4gICAgICAuZXJyb3IoZnVuY3Rpb24oZXJyKXtcbiAgICAgICAgZGlmZmVyZWQucmVqZWN0KGVycik7XG4gICAgICB9KVxuICAgICAgcmV0dXJuIGRpZmZlcmVkLnByb21pc2U7XG4gICAgfVxuICAgIFxuXHRyZXR1cm4gdGhpcztcbn1dKSIsIi8qIGdsb2JhbCBzeW5jICovXG5zeW5jLnNlcnZpY2UoJ05vdGlmaWNhdGlvbicsIFsnJGh0dHAnLCAnJHEnLCAnJHJvb3RTY29wZScsIGZ1bmN0aW9uIE5vdGlmaWNhdGlvbigkaHR0cCwgJHEsICRyb290U2NvcGUpIHtcbiAgICB0aGlzLmdldE5vdGlmaWNhdGlvbiA9IGZ1bmN0aW9uICh1c2VyX2lkKSB7XG4gICAgICAgIHZhciBkaWZmZXJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgICRodHRwLmdldCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvbm90aWZpY2F0aW9ucycsIHtjYWNoZTogZmFsc2V9KVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgZGlmZmVyZWQucmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGRpZmZlcmVkLnJlamVjdChlcnJvcik7XG4gICAgICAgICAgICB9KVxuICAgICAgICByZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcbiAgICB9XG4gICAgdGhpcy5jcmVhdGVOb3RpZmljYXRpb24gPSBmdW5jdGlvbiAoTm90aWZpY2F0aW9uKSB7XG4gICAgICAgIHZhciBkaWZmZXJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgICRodHRwLnBvc3QoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL25vdGlmaWNhdGlvbnMnLCBOb3RpZmljYXRpb24pXG4gICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICBkaWZmZXJlZC5yZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgZGlmZmVyZWQucmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcbiAgICB9XG4gICAgdGhpcy5kZWxldGVOb3RpZmljYXRpb24gPSBmdW5jdGlvbiAobm90aWZpY2F0aW9uKSB7XG4gICAgICAgIHZhciBkaWZmZXJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgICRodHRwLmRlbGV0ZSgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvbm90aWZpY2F0aW9ucy8nICsgbm90aWZpY2F0aW9uKVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgZGlmZmVyZWQucmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGRpZmZlcmVkLnJlamVjdChlcnJvcik7XG4gICAgICAgICAgICB9KVxuICAgICAgICByZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbn1dKTtcblxuc3luYy5jb250cm9sbGVyKCdub3RpZmljYXRpb25Db250cm9sbGVyJywgWyckc2NvcGUnLCdOb3RpZmljYXRpb24nLCckbG9nJywgZnVuY3Rpb24gKCRzY29wZSxOb3RpZmljYXRpb24sJGxvZykge1xuICAgICRzY29wZS5pbml0ID0gZnVuY3Rpb24oKXtcbiAgICAgICAgJHNjb3BlLmdldE5vdGlmaWNhdGlvbigpO1xuICAgIH1cbiAgICAkc2NvcGUuY2xlYXJOb3RpZmljYXRpb24gPSBmdW5jdGlvbihub3RpZmljYXRpb24pe1xuXG5cbiAgICAgIE5vdGlmaWNhdGlvbi5jbGVhck5vdGlmaWNhdGlvbihub3RpZmljYXRpb24pXG4gICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgIC8vbG9hZCByZW1haW5pbmcgbm90aWZpY2F0aW9uXG4gICAgICAgICRzY29wZS5nZXROb3RpZmljYXRpb24oKTtcbiAgICAgIH0sZnVuY3Rpb24oZXJyKXtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICAkc2NvcGUuZ2V0Tm90aWZpY2F0aW9uID0gZnVuY3Rpb24oKXtcbiAgICAgICAgTm90aWZpY2F0aW9uLmdldE5vdGlmaWNhdGlvbigpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7XG4gICAgICAgICAgICAvLyAkbG9nLmluZm8ocmVzdWx0KTtcbiAgICAgICAgICAgICRzY29wZS5ub3RpZmljYXRpb25zID0gcmVzdWx0O1xuICAgICAgICAgICAgXG4gICAgICAgIH0sZnVuY3Rpb24oZXJyb3Ipe1xuICAgICAgICAgICAgLy8gJGxvZy5pbmZvKGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgICRzY29wZS5pbml0KCk7XG59XSk7XG5zeW5jLmRpcmVjdGl2ZSgnbm90aWZ5JyxbZnVuY3Rpb24oKXtcbiAgcmV0dXJue1xuICAgIHJlc3RyaWN0OidBRScsXG4gICAgc2NvcGU6e1xuXG4gICAgfSxcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWwsIGlBdHRycyl7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgIHZhciB0aXRsZT0nVGhpcyB3aWxsIGJlIHRpdGxlJztcbiAgICAgICAgICAgICAgdmFyIGRlc2M9J01vc3QgcG9wdWxhciBhcnRpY2xlLic7XG4gICAgICAgICAgICAgIHZhciB1cmw9J3N5bmMuY29tOjgwMDAnO1xuICAgICAgICAgICAgICBub3RpZnlCcm93c2VyKHRpdGxlLGRlc2MsdXJsKTtcbiAgICAgICAgICB9LCAyMDAwKTtcbiAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCl7XG4gICAgICAgICAgICAgICAgaWYgKE5vdGlmaWNhdGlvbi5wZXJtaXNzaW9uICE9PSBcImdyYW50ZWRcIil7XG4gICAgICAgICAgICAgICAgICBOb3RpZmljYXRpb24ucmVxdWVzdFBlcm1pc3Npb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBmdW5jdGlvbiBub3RpZnlCcm93c2VyKHRpdGxlLGRlc2MsdXJsKVxuICAgICAge1xuICAgICAgICBpZiAoIU5vdGlmaWNhdGlvbikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0Rlc2t0b3Agbm90aWZpY2F0aW9ucyBub3QgYXZhaWxhYmxlIGluIHlvdXIgYnJvd3Nlci4uJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoTm90aWZpY2F0aW9uLnBlcm1pc3Npb24gIT09IFwiZ3JhbnRlZFwiKXtcbiAgICAgICAgICBOb3RpZmljYXRpb24ucmVxdWVzdFBlcm1pc3Npb24oKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICB2YXIgbm90aWZpY2F0aW9uID0gbmV3IE5vdGlmaWNhdGlvbih0aXRsZSwge1xuICAgICAgICAgICAgaWNvbjonaHR0cHM6Ly9saDMuZ29vZ2xldXNlcmNvbnRlbnQuY29tLy1hQ0ZpSzRiYVhYNC9Wam1HSm9qc1FfSS9BQUFBQUFBQU5KZy9oLXNMVlgxTTV6QS9zNDgtSWM0Mi9lZ2dzbWFsbC5wbmcnLFxuICAgICAgICAgICAgYm9keTogZGVzYyxcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIFJlbW92ZSB0aGUgbm90aWZpY2F0aW9uIGZyb20gTm90aWZpY2F0aW9uIENlbnRlciB3aGVuIGNsaWNrZWQuXG4gICAgICAgIG5vdGlmaWNhdGlvbi5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgd2luZG93Lm9wZW4odXJsKTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gQ2FsbGJhY2sgZnVuY3Rpb24gd2hlbiB0aGUgbm90aWZpY2F0aW9uIGlzIGNsb3NlZC5cbiAgICAgICAgbm90aWZpY2F0aW9uLm9uY2xvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ05vdGlmaWNhdGlvbiBjbG9zZWQnKTtcbiAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufV0pXG4iLCJzeW5jLmZhY3RvcnkoJ3VzZXJJbnRlcmFjdGlvbk5vdGlmaWNhdGlvbicsIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MobWVzc2FnZSwgXCJTdWNjZXNzXCIpO1xuICAgICAgICB9LFxuICAgICAgICB3YXJuOiBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgdG9hc3RyLndhcm5pbmcobWVzc2FnZSwgXCJIZXlcIik7XG4gICAgICAgIH0sXG4gICAgICAgIGluZm86IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgICAgICB0b2FzdHIuaW5mbyhtZXNzYWdlLCBcIkZZSVwiKTtcbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgICAgICB0b2FzdHIuZXJyb3IobWVzc2FnZSwgXCJPaCBOb1wiKTtcbiAgICAgICAgfVxuICAgIH07XG59KTtcbiIsInN5bmMuZmFjdG9yeSgndXNlckludGVyYWN0aW9uTm90aWZpY2F0aW9uJywgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgICAgICB0b2FzdHIuc3VjY2VzcyhtZXNzYWdlLCBcIlN1Y2Nlc3NcIik7XG4gICAgICAgIH0sXG4gICAgICAgIHdhcm46IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgICAgICB0b2FzdHIud2FybmluZyhtZXNzYWdlLCBcIkhleVwiKTtcbiAgICAgICAgfSxcbiAgICAgICAgaW5mbzogZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIHRvYXN0ci5pbmZvKG1lc3NhZ2UsIFwiRllJXCIpO1xuICAgICAgICB9LFxuICAgICAgICBlcnJvcjogZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIHRvYXN0ci5lcnJvcihtZXNzYWdlLCBcIk9oIE5vXCIpO1xuICAgICAgICB9XG4gICAgfTtcbn0pO1xuIiwiXG5zeW5jLmNvbnRyb2xsZXIoJ3VwbG9hZERpYWxvZ0N0cmwnLCBbJyRzY29wZScsJyR1aWJNb2RhbCcsJyRtZERpYWxvZycsJyRtZE1lZGlhJywgZnVuY3Rpb24gKCRzY29wZSwkdWliTW9kYWwsICRtZERpYWxvZywgJG1kTWVkaWEpIHtcblxuXHRcdFx0XHQvL2RlY2xhcmUgZ2xvYmFsIGZ1bmN0aW9uIGZvciBzaG9ydGN1dFxuXHRcdFx0XHQkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0JG1kRGlhbG9nLmhpZGUoKTtcblx0XHRcdFx0fTtcblx0XHQgICAgJHNjb3BlLmN1c3RvbUZ1bGxzY3JlZW4gPSAkbWRNZWRpYSgneHMnKSB8fCAkbWRNZWRpYSgnc20nKTtcblx0XHQgICAgJHNjb3BlLnVwbG9hZCA9IGZ1bmN0aW9uKGV2KSB7XG5cdFx0ICAgICAgJG1kRGlhbG9nLnNob3coe1xuXHRcdFx0XHRcdFx0cGFyZW50OiBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQuYm9keSksXG5cdFx0ICAgICAgICBjb250cm9sbGVyOiBEaWFsb2dDb250cm9sbGVyLFxuXHRcdCAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy91cGxvYWQudHBsLmh0bWwnLFxuXHRcdCAgICAgICAgcGFyZW50OiBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQuYm9keSksXG5cdFx0ICAgICAgICB0YXJnZXRFdmVudDogZXYsXG5cdFx0ICAgICAgICBjbGlja091dHNpZGVUb0Nsb3NlOmZhbHNlXG5cdFx0ICAgICAgfSlcblx0XHQgICAgICAudGhlbihmdW5jdGlvbihhbnN3ZXIpIHtcblx0XHQgICAgICAgICAgICAkc2NvcGUuc3RhdHVzID0gJ1lvdSBzYWlkIHRoZSBpbmZvcm1hdGlvbiB3YXMgXCInICsgYW5zd2VyICsgJ1wiLic7XG5cdFx0ICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuXHRcdCAgICAgICAgICAgICRzY29wZS5zdGF0dXMgPSAnWW91IGNhbmNlbGxlZCB0aGUgZGlhbG9nLic7XG5cdFx0ICAgICAgICAgIH0pO1xuXHRcdCAgICB9O1xuXHRcdFx0XHRmdW5jdGlvbiBEaWFsb2dDb250cm9sbGVyKCRzY29wZSwgJG1kRGlhbG9nKSB7XG5cdFx0XHRcdCAgJHNjb3BlLmhpZGUgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0ICAgICRtZERpYWxvZy5oaWRlKCk7XG5cdFx0XHRcdCAgfTtcblx0XHRcdFx0ICAkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCAgICAkbWREaWFsb2cuY2FuY2VsKCk7XG5cdFx0XHRcdCAgfTtcblx0XHRcdFx0ICAkc2NvcGUuYW5zd2VyID0gZnVuY3Rpb24oYW5zd2VyKSB7XG5cdFx0XHRcdCAgICAkbWREaWFsb2cuaGlkZShhbnN3ZXIpO1xuXHRcdFx0XHQgIH07XG5cdFx0XHRcdH1cbn1dKTtcbnN5bmMuY29udHJvbGxlcignc2hhcmVDb250cm9sbGVyJywgWyckc2NvcGUnLCckdWliTW9kYWwnLCckbWREaWFsb2cnLCckbWRNZWRpYScsJ3VybFNob3J0ZW5lcicsJ1NoYXJlJywnVXNlcicsIGZ1bmN0aW9uICgkc2NvcGUsJHVpYk1vZGFsLCAkbWREaWFsb2csICRtZE1lZGlhLHVybFNob3J0ZW5lcixTaGFyZSxVc2VyKSB7XG5cblx0Ly9kZWNsYXJlIGdsb2JhbCBmdW5jdGlvbiBmb3Igc2hvcnRjdXRcblx0JHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uKCkge1xuXHRcdCRtZERpYWxvZy5oaWRlKCk7XG5cdH07XG5cdCRzY29wZS5jdXN0b21GdWxsc2NyZWVuID0gJG1kTWVkaWEoJ3hzJykgfHwgJG1kTWVkaWEoJ3NtJyk7XG5cdCRzY29wZS5zaGFyZSA9IGZ1bmN0aW9uKGV2LGZpbGVOYW1lKSB7XG5cblx0XHQkbWREaWFsb2cuc2hvdyh7XG5cdFx0XHRwYXJlbnQ6IGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5ib2R5KSxcblx0XHRcdGNvbnRyb2xsZXI6IERpYWxvZ0NvbnRyb2xsZXIsXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL3NoYXJlLnRwbC5odG1sJyxcblx0XHRcdHBhcmVudDogYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LmJvZHkpLFxuXHRcdFx0dGFyZ2V0RXZlbnQ6IGV2LFxuXHRcdFx0Y2xpY2tPdXRzaWRlVG9DbG9zZTpmYWxzZVxuXHRcdH0pXG5cdFx0LnRoZW4oZnVuY3Rpb24oYW5zd2VyKSB7XG5cdFx0XHRcdFx0JHNjb3BlLnN0YXR1cyA9ICdZb3Ugc2FpZCB0aGUgaW5mb3JtYXRpb24gd2FzIFwiJyArIGFuc3dlciArICdcIi4nO1xuXHRcdFx0XHR9LCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHQkc2NvcGUuc3RhdHVzID0gJ1lvdSBjYW5jZWxsZWQgdGhlIGRpYWxvZy4nO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0ZnVuY3Rpb24gRGlhbG9nQ29udHJvbGxlcigkc2NvcGUsICRtZERpYWxvZykge1xuXHRcdFx0XHRcdC8vIGNvbnNvbGUubG9nKCdzaGFyZWRGaWxlJysgZmlsZU5hbWUpO1xuXHRcdFx0XHRcdCRzY29wZS5nZXRGaWxlID0gZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRcdHJldHVybiAkc2NvcGUuZmlsZT11cmxTaG9ydGVuZXIubWFrZVNob3J0KGZpbGVOYW1lKTtcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdCRzY29wZS5oaWRlID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHQkbWREaWFsb2cuaGlkZSgpO1xuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0JHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0JG1kRGlhbG9nLmNhbmNlbCgpO1xuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0JHNjb3BlLmFuc3dlciA9IGZ1bmN0aW9uKGFuc3dlcikge1xuXHRcdFx0XHRcdFx0JG1kRGlhbG9nLmhpZGUoYW5zd2VyKTtcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9XG5cblx0fTtcblxuXG5cblx0JHNjb3BlLnNoYXJlRmlsZSA9IGZ1bmN0aW9uKHZtKXtcblxuXHRcdHZhciBlbWFpbHM9dm0uZW1haWxzO1xuXHRcdHZhciBlbWFpbF9hcnJheSA9IGVtYWlscy5zcGxpdCgnLCcpO1xuXHRcdHZhciBpO1xuXHRcdGZvciAoIGk9MDsgaSA8IGVtYWlsX2FycmF5Lmxlbmd0aDsgaSsrICkge1xuXHRcdFx0Ly92YWxpZGF0ZSBlYWNoIGVtYWlsIHRvIHNoYXJlIHdpdGhcblx0XHRcdFNoYXJlLnNoYXJlKHZtKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24ocmVzKXtcblx0XHRcdFx0Y29uc29sZS5sb2cocmVzKTtcblx0XHRcdH0pLmNhdGNoKCk7XG5cdFx0XHQvLyBjb25zb2xlLmxvZyhlbWFpbF9hcnJheVtpXSk7XG5cblx0XHR9XG5cdH1cblxufV0pO1xuIiwiLypcbiBhbmd1bGFyLWZpbGUtdXBsb2FkIHYyLjIuMFxuIGh0dHBzOi8vZ2l0aHViLmNvbS9uZXJ2Z2gvYW5ndWxhci1maWxlLXVwbG9hZFxuKi9cblxuKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiYW5ndWxhci1maWxlLXVwbG9hZFwiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJhbmd1bGFyLWZpbGUtdXBsb2FkXCJdID0gZmFjdG9yeSgpO1xufSkodGhpcywgZnVuY3Rpb24oKSB7XG5yZXR1cm4gLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge30sXG4vKioqKioqLyBcdFx0XHRpZDogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblxuXHR2YXIgX2ludGVyb3BSZXF1aXJlID0gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqW1wiZGVmYXVsdFwiXSA6IG9iajsgfTtcblxuXHR2YXIgQ09ORklHID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oMSkpO1xuXG5cdHZhciBvcHRpb25zID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oMikpO1xuXG5cdHZhciBzZXJ2aWNlRmlsZVVwbG9hZGVyID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oMykpO1xuXG5cdHZhciBzZXJ2aWNlRmlsZUxpa2VPYmplY3QgPSBfaW50ZXJvcFJlcXVpcmUoX193ZWJwYWNrX3JlcXVpcmVfXyg0KSk7XG5cblx0dmFyIHNlcnZpY2VGaWxlSXRlbSA9IF9pbnRlcm9wUmVxdWlyZShfX3dlYnBhY2tfcmVxdWlyZV9fKDUpKTtcblxuXHR2YXIgc2VydmljZUZpbGVEaXJlY3RpdmUgPSBfaW50ZXJvcFJlcXVpcmUoX193ZWJwYWNrX3JlcXVpcmVfXyg2KSk7XG5cblx0dmFyIHNlcnZpY2VGaWxlU2VsZWN0ID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oNykpO1xuXG5cdHZhciBzZXJ2aWNlRmlsZURyb3AgPSBfaW50ZXJvcFJlcXVpcmUoX193ZWJwYWNrX3JlcXVpcmVfXyg4KSk7XG5cblx0dmFyIHNlcnZpY2VGaWxlT3ZlciA9IF9pbnRlcm9wUmVxdWlyZShfX3dlYnBhY2tfcmVxdWlyZV9fKDkpKTtcblxuXHR2YXIgZGlyZWN0aXZlRmlsZVNlbGVjdCA9IF9pbnRlcm9wUmVxdWlyZShfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKSk7XG5cblx0dmFyIGRpcmVjdGl2ZUZpbGVEcm9wID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oMTEpKTtcblxuXHR2YXIgZGlyZWN0aXZlRmlsZU92ZXIgPSBfaW50ZXJvcFJlcXVpcmUoX193ZWJwYWNrX3JlcXVpcmVfXygxMikpO1xuXG5cdGFuZ3VsYXIubW9kdWxlKENPTkZJRy5uYW1lLCBbXSkudmFsdWUoXCJmaWxlVXBsb2FkZXJPcHRpb25zXCIsIG9wdGlvbnMpLmZhY3RvcnkoXCJGaWxlVXBsb2FkZXJcIiwgc2VydmljZUZpbGVVcGxvYWRlcikuZmFjdG9yeShcIkZpbGVMaWtlT2JqZWN0XCIsIHNlcnZpY2VGaWxlTGlrZU9iamVjdCkuZmFjdG9yeShcIkZpbGVJdGVtXCIsIHNlcnZpY2VGaWxlSXRlbSkuZmFjdG9yeShcIkZpbGVEaXJlY3RpdmVcIiwgc2VydmljZUZpbGVEaXJlY3RpdmUpLmZhY3RvcnkoXCJGaWxlU2VsZWN0XCIsIHNlcnZpY2VGaWxlU2VsZWN0KS5mYWN0b3J5KFwiRmlsZURyb3BcIiwgc2VydmljZUZpbGVEcm9wKS5mYWN0b3J5KFwiRmlsZU92ZXJcIiwgc2VydmljZUZpbGVPdmVyKS5kaXJlY3RpdmUoXCJudkZpbGVTZWxlY3RcIiwgZGlyZWN0aXZlRmlsZVNlbGVjdCkuZGlyZWN0aXZlKFwibnZGaWxlRHJvcFwiLCBkaXJlY3RpdmVGaWxlRHJvcCkuZGlyZWN0aXZlKFwibnZGaWxlT3ZlclwiLCBkaXJlY3RpdmVGaWxlT3ZlcikucnVuKFtcIkZpbGVVcGxvYWRlclwiLCBcIkZpbGVMaWtlT2JqZWN0XCIsIFwiRmlsZUl0ZW1cIiwgXCJGaWxlRGlyZWN0aXZlXCIsIFwiRmlsZVNlbGVjdFwiLCBcIkZpbGVEcm9wXCIsIFwiRmlsZU92ZXJcIiwgZnVuY3Rpb24gKEZpbGVVcGxvYWRlciwgRmlsZUxpa2VPYmplY3QsIEZpbGVJdGVtLCBGaWxlRGlyZWN0aXZlLCBGaWxlU2VsZWN0LCBGaWxlRHJvcCwgRmlsZU92ZXIpIHtcblx0ICAgIC8vIG9ubHkgZm9yIGNvbXBhdGliaWxpdHlcblx0ICAgIEZpbGVVcGxvYWRlci5GaWxlTGlrZU9iamVjdCA9IEZpbGVMaWtlT2JqZWN0O1xuXHQgICAgRmlsZVVwbG9hZGVyLkZpbGVJdGVtID0gRmlsZUl0ZW07XG5cdCAgICBGaWxlVXBsb2FkZXIuRmlsZURpcmVjdGl2ZSA9IEZpbGVEaXJlY3RpdmU7XG5cdCAgICBGaWxlVXBsb2FkZXIuRmlsZVNlbGVjdCA9IEZpbGVTZWxlY3Q7XG5cdCAgICBGaWxlVXBsb2FkZXIuRmlsZURyb3AgPSBGaWxlRHJvcDtcblx0ICAgIEZpbGVVcGxvYWRlci5GaWxlT3ZlciA9IEZpbGVPdmVyO1xuXHR9XSk7XG5cbi8qKiovIH0sXG5cbi8qIDEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0ge1xuXHRcdFwibmFtZVwiOiBcImFuZ3VsYXJGaWxlVXBsb2FkXCJcblx0fTtcblxuLyoqKi8gfSxcbi8qIDIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdG1vZHVsZS5leHBvcnRzID0ge1xuXHQgICAgdXJsOiBcIi9cIixcblx0ICAgIGFsaWFzOiBcImZpbGVcIixcblx0ICAgIGhlYWRlcnM6IHsnYXV0aG9yaXphdGlvbic6ICdCZWFyZXIgOEV1cWNNTmtGMnlQNTBEaWNwdjloTFJScDdXT1NhYlBsQ3UyMmxpWSd9LFxuXHQgICAgcXVldWU6IFtdLFxuXHQgICAgcHJvZ3Jlc3M6IDAsXG5cdCAgICBhdXRvVXBsb2FkOiBmYWxzZSxcblx0ICAgIHJlbW92ZUFmdGVyVXBsb2FkOiBmYWxzZSxcblx0ICAgIG1ldGhvZDogXCJQT1NUXCIsXG5cdCAgICBmaWx0ZXJzOiBbXSxcblx0ICAgIGZvcm1EYXRhOiBbXSxcblx0ICAgIHF1ZXVlTGltaXQ6IE51bWJlci5NQVhfVkFMVUUsXG5cdCAgICB3aXRoQ3JlZGVudGlhbHM6IGZhbHNlXG5cdH07XG5cbi8qKiovIH0sXG4vKiAzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblxuXHR2YXIgX2ludGVyb3BSZXF1aXJlID0gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqW1wiZGVmYXVsdFwiXSA6IG9iajsgfTtcblxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGtleSBpbiBwcm9wcykgeyB2YXIgcHJvcCA9IHByb3BzW2tleV07IHByb3AuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKHByb3AudmFsdWUpIHByb3Aud3JpdGFibGUgPSB0cnVlOyB9IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpOyB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0pKCk7XG5cblx0dmFyIF9jbGFzc0NhbGxDaGVjayA9IGZ1bmN0aW9uIChpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9O1xuXG5cdHZhciBDT05GSUcgPSBfaW50ZXJvcFJlcXVpcmUoX193ZWJwYWNrX3JlcXVpcmVfXygxKSk7XG5cblx0dmFyIGNvcHkgPSBhbmd1bGFyLmNvcHk7XG5cdHZhciBleHRlbmQgPSBhbmd1bGFyLmV4dGVuZDtcblx0dmFyIGZvckVhY2ggPSBhbmd1bGFyLmZvckVhY2g7XG5cdHZhciBpc09iamVjdCA9IGFuZ3VsYXIuaXNPYmplY3Q7XG5cdHZhciBpc051bWJlciA9IGFuZ3VsYXIuaXNOdW1iZXI7XG5cdHZhciBpc0RlZmluZWQgPSBhbmd1bGFyLmlzRGVmaW5lZDtcblx0dmFyIGlzQXJyYXkgPSBhbmd1bGFyLmlzQXJyYXk7XG5cdHZhciBlbGVtZW50ID0gYW5ndWxhci5lbGVtZW50O1xuXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGZpbGVVcGxvYWRlck9wdGlvbnMsICRyb290U2NvcGUsICRodHRwLCAkd2luZG93LCBGaWxlTGlrZU9iamVjdCwgRmlsZUl0ZW0pIHtcblx0ICAgIHZhciBGaWxlID0gJHdpbmRvdy5GaWxlO1xuXHQgICAgdmFyIEZvcm1EYXRhID0gJHdpbmRvdy5Gb3JtRGF0YTtcblxuXHQgICAgdmFyIEZpbGVVcGxvYWRlciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKipcblx0ICAgICAgICAgKiBQVUJMSUNcblx0ICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKi9cblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIEZpbGVVcGxvYWRlclxuXHQgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cblx0ICAgICAgICAgKiBAY29uc3RydWN0b3Jcblx0ICAgICAgICAgKi9cblxuXHQgICAgICAgIGZ1bmN0aW9uIEZpbGVVcGxvYWRlcihvcHRpb25zKSB7XG5cdCAgICAgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBGaWxlVXBsb2FkZXIpO1xuXG5cdCAgICAgICAgICAgIHZhciBzZXR0aW5ncyA9IGNvcHkoZmlsZVVwbG9hZGVyT3B0aW9ucyk7XG5cblx0ICAgICAgICAgICAgZXh0ZW5kKHRoaXMsIHNldHRpbmdzLCBvcHRpb25zLCB7XG5cdCAgICAgICAgICAgICAgICBpc1VwbG9hZGluZzogZmFsc2UsXG5cdCAgICAgICAgICAgICAgICBfbmV4dEluZGV4OiAwLFxuXHQgICAgICAgICAgICAgICAgX2ZhaWxGaWx0ZXJJbmRleDogLTEsXG5cdCAgICAgICAgICAgICAgICBfZGlyZWN0aXZlczogeyBzZWxlY3Q6IFtdLCBkcm9wOiBbXSwgb3ZlcjogW10gfVxuXHQgICAgICAgICAgICB9KTtcblxuXHQgICAgICAgICAgICAvLyBhZGQgZGVmYXVsdCBmaWx0ZXJzXG5cdCAgICAgICAgICAgIHRoaXMuZmlsdGVycy51bnNoaWZ0KHsgbmFtZTogXCJxdWV1ZUxpbWl0XCIsIGZuOiB0aGlzLl9xdWV1ZUxpbWl0RmlsdGVyIH0pO1xuXHQgICAgICAgICAgICB0aGlzLmZpbHRlcnMudW5zaGlmdCh7IG5hbWU6IFwiZm9sZGVyXCIsIGZuOiB0aGlzLl9mb2xkZXJGaWx0ZXIgfSk7XG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgX2NyZWF0ZUNsYXNzKEZpbGVVcGxvYWRlciwge1xuXHQgICAgICAgICAgICBhZGRUb1F1ZXVlOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIEFkZHMgaXRlbXMgdG8gdGhlIHF1ZXVlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGV8SFRNTElucHV0RWxlbWVudHxPYmplY3R8RmlsZUxpc3R8QXJyYXk8T2JqZWN0Pn0gZmlsZXNcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7QXJyYXk8RnVuY3Rpb24+fFN0cmluZ30gZmlsdGVyc1xuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRUb1F1ZXVlKGZpbGVzLCBvcHRpb25zLCBmaWx0ZXJzKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuXHQgICAgICAgICAgICAgICAgICAgIHZhciBsaXN0ID0gdGhpcy5pc0FycmF5TGlrZU9iamVjdChmaWxlcykgPyBmaWxlcyA6IFtmaWxlc107XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGFycmF5T2ZGaWx0ZXJzID0gdGhpcy5fZ2V0RmlsdGVycyhmaWx0ZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgY291bnQgPSB0aGlzLnF1ZXVlLmxlbmd0aDtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgYWRkZWRGaWxlSXRlbXMgPSBbXTtcblxuXHQgICAgICAgICAgICAgICAgICAgIGZvckVhY2gobGlzdCwgZnVuY3Rpb24gKHNvbWUgLyp7RmlsZXxIVE1MSW5wdXRFbGVtZW50fE9iamVjdH0qLykge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IG5ldyBGaWxlTGlrZU9iamVjdChzb21lKTtcblxuXHQgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuX2lzVmFsaWRGaWxlKHRlbXAsIGFycmF5T2ZGaWx0ZXJzLCBvcHRpb25zKSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpbGVJdGVtID0gbmV3IEZpbGVJdGVtKF90aGlzLCBzb21lLCBvcHRpb25zKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZGVkRmlsZUl0ZW1zLnB1c2goZmlsZUl0ZW0pO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucXVldWUucHVzaChmaWxlSXRlbSk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5fb25BZnRlckFkZGluZ0ZpbGUoZmlsZUl0ZW0pO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpbHRlciA9IGFycmF5T2ZGaWx0ZXJzW190aGlzLl9mYWlsRmlsdGVySW5kZXhdO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX29uV2hlbkFkZGluZ0ZpbGVGYWlsZWQodGVtcCwgZmlsdGVyLCBvcHRpb25zKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgIH0pO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucXVldWUubGVuZ3RoICE9PSBjb3VudCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9vbkFmdGVyQWRkaW5nQWxsKGFkZGVkRmlsZUl0ZW1zKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9ncmVzcyA9IHRoaXMuX2dldFRvdGFsUHJvZ3Jlc3MoKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZW5kZXIoKTtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hdXRvVXBsb2FkKSB0aGlzLnVwbG9hZEFsbCgpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICByZW1vdmVGcm9tUXVldWU6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmVtb3ZlIGl0ZW1zIGZyb20gdGhlIHF1ZXVlLiBSZW1vdmUgbGFzdDogaW5kZXggPSAtMVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtGaWxlSXRlbXxOdW1iZXJ9IHZhbHVlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZUZyb21RdWV1ZSh2YWx1ZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMuZ2V0SW5kZXhPZkl0ZW0odmFsdWUpO1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBpdGVtID0gdGhpcy5xdWV1ZVtpbmRleF07XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0uaXNVcGxvYWRpbmcpIGl0ZW0uY2FuY2VsKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWV1ZS5zcGxpY2UoaW5kZXgsIDEpO1xuXHQgICAgICAgICAgICAgICAgICAgIGl0ZW0uX2Rlc3Ryb3koKTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2dyZXNzID0gdGhpcy5fZ2V0VG90YWxQcm9ncmVzcygpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBjbGVhclF1ZXVlOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENsZWFycyB0aGUgcXVldWVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYXJRdWV1ZSgpIHtcblx0ICAgICAgICAgICAgICAgICAgICB3aGlsZSAodGhpcy5xdWV1ZS5sZW5ndGgpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWV1ZVswXS5yZW1vdmUoKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9ncmVzcyA9IDA7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIHVwbG9hZEl0ZW06IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogVXBsb2FkcyBhIGl0ZW0gZnJvbSB0aGUgcXVldWVcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZUl0ZW18TnVtYmVyfSB2YWx1ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiB1cGxvYWRJdGVtKHZhbHVlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5nZXRJbmRleE9mSXRlbSh2YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSB0aGlzLnF1ZXVlW2luZGV4XTtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgdHJhbnNwb3J0ID0gdGhpcy5pc0hUTUw1ID8gXCJfeGhyVHJhbnNwb3J0XCIgOiBcIl9pZnJhbWVUcmFuc3BvcnRcIjtcblxuXHQgICAgICAgICAgICAgICAgICAgIGl0ZW0uX3ByZXBhcmVUb1VwbG9hZGluZygpO1xuXHQgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzVXBsb2FkaW5nKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgICAgICAgICAgICB9dGhpcy5pc1VwbG9hZGluZyA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpc1t0cmFuc3BvcnRdKGl0ZW0pO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBjYW5jZWxJdGVtOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENhbmNlbHMgdXBsb2FkaW5nIG9mIGl0ZW0gZnJvbSB0aGUgcXVldWVcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZUl0ZW18TnVtYmVyfSB2YWx1ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjYW5jZWxJdGVtKHZhbHVlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5nZXRJbmRleE9mSXRlbSh2YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSB0aGlzLnF1ZXVlW2luZGV4XTtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgcHJvcCA9IHRoaXMuaXNIVE1MNSA/IFwiX3hoclwiIDogXCJfZm9ybVwiO1xuXHQgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtICYmIGl0ZW0uaXNVcGxvYWRpbmcpIGl0ZW1bcHJvcF0uYWJvcnQoKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgdXBsb2FkQWxsOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFVwbG9hZHMgYWxsIG5vdCB1cGxvYWRlZCBpdGVtcyBvZiBxdWV1ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiB1cGxvYWRBbGwoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW1zID0gdGhpcy5nZXROb3RVcGxvYWRlZEl0ZW1zKCkuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhaXRlbS5pc1VwbG9hZGluZztcblx0ICAgICAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAoIWl0ZW1zLmxlbmd0aCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICAgICAgICAgICAgfWZvckVhY2goaXRlbXMsIGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLl9wcmVwYXJlVG9VcGxvYWRpbmcoKTtcblx0ICAgICAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICAgICAgICBpdGVtc1swXS51cGxvYWQoKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgY2FuY2VsQWxsOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENhbmNlbHMgYWxsIHVwbG9hZHNcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2FuY2VsQWxsKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBpdGVtcyA9IHRoaXMuZ2V0Tm90VXBsb2FkZWRJdGVtcygpO1xuXHQgICAgICAgICAgICAgICAgICAgIGZvckVhY2goaXRlbXMsIGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmNhbmNlbCgpO1xuXHQgICAgICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBpc0ZpbGU6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmV0dXJucyBcInRydWVcIiBpZiB2YWx1ZSBhbiBpbnN0YW5jZSBvZiBGaWxlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGlzRmlsZSh2YWx1ZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLmlzRmlsZSh2YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIGlzRmlsZUxpa2VPYmplY3Q6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmV0dXJucyBcInRydWVcIiBpZiB2YWx1ZSBhbiBpbnN0YW5jZSBvZiBGaWxlTGlrZU9iamVjdFxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMge0Jvb2xlYW59XG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc0ZpbGVMaWtlT2JqZWN0KHZhbHVlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IuaXNGaWxlTGlrZU9iamVjdCh2YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIGlzQXJyYXlMaWtlT2JqZWN0OiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJldHVybnMgXCJ0cnVlXCIgaWYgdmFsdWUgaXMgYXJyYXkgbGlrZSBvYmplY3Rcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc0FycmF5TGlrZU9iamVjdCh2YWx1ZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLmlzQXJyYXlMaWtlT2JqZWN0KHZhbHVlKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgZ2V0SW5kZXhPZkl0ZW06IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmV0dXJucyBhIGluZGV4IG9mIGl0ZW0gZnJvbSB0aGUgcXVldWVcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7SXRlbXxOdW1iZXJ9IHZhbHVlXG5cdCAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7TnVtYmVyfVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJbmRleE9mSXRlbSh2YWx1ZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBpc051bWJlcih2YWx1ZSkgPyB2YWx1ZSA6IHRoaXMucXVldWUuaW5kZXhPZih2YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIGdldE5vdFVwbG9hZGVkSXRlbXM6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmV0dXJucyBub3QgdXBsb2FkZWQgaXRlbXNcblx0ICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtBcnJheX1cblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Tm90VXBsb2FkZWRJdGVtcygpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5xdWV1ZS5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFpdGVtLmlzVXBsb2FkZWQ7XG5cdCAgICAgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIGdldFJlYWR5SXRlbXM6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmV0dXJucyBpdGVtcyByZWFkeSBmb3IgdXBsb2FkXG5cdCAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7QXJyYXl9XG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFJlYWR5SXRlbXMoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucXVldWUuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmlzUmVhZHkgJiYgIWl0ZW0uaXNVcGxvYWRpbmc7XG5cdCAgICAgICAgICAgICAgICAgICAgfSkuc29ydChmdW5jdGlvbiAoaXRlbTEsIGl0ZW0yKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtMS5pbmRleCAtIGl0ZW0yLmluZGV4O1xuXHQgICAgICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBkZXN0cm95OiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIERlc3Ryb3lzIGluc3RhbmNlIG9mIEZpbGVVcGxvYWRlclxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95KCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cblx0ICAgICAgICAgICAgICAgICAgICBmb3JFYWNoKHRoaXMuX2RpcmVjdGl2ZXMsIGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgZm9yRWFjaChfdGhpcy5fZGlyZWN0aXZlc1trZXldLCBmdW5jdGlvbiAob2JqZWN0KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QuZGVzdHJveSgpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgb25BZnRlckFkZGluZ0FsbDoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtBcnJheX0gZmlsZUl0ZW1zXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uQWZ0ZXJBZGRpbmdBbGwoZmlsZUl0ZW1zKSB7fVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBvbkFmdGVyQWRkaW5nRmlsZToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtGaWxlSXRlbX0gZmlsZUl0ZW1cblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25BZnRlckFkZGluZ0ZpbGUoZmlsZUl0ZW0pIHt9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIG9uV2hlbkFkZGluZ0ZpbGVGYWlsZWQ6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogQ2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZXxPYmplY3R9IGl0ZW1cblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBmaWx0ZXJcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uV2hlbkFkZGluZ0ZpbGVGYWlsZWQoaXRlbSwgZmlsdGVyLCBvcHRpb25zKSB7fVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBvbkJlZm9yZVVwbG9hZEl0ZW06IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogQ2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZUl0ZW19IGZpbGVJdGVtXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uQmVmb3JlVXBsb2FkSXRlbShmaWxlSXRlbSkge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgb25Qcm9ncmVzc0l0ZW06IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogQ2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZUl0ZW19IGZpbGVJdGVtXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gcHJvZ3Jlc3Ncblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25Qcm9ncmVzc0l0ZW0oZmlsZUl0ZW0sIHByb2dyZXNzKSB7fVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBvblByb2dyZXNzQWxsOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gcHJvZ3Jlc3Ncblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25Qcm9ncmVzc0FsbChwcm9ncmVzcykge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgb25TdWNjZXNzSXRlbToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtGaWxlSXRlbX0gaXRlbVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSByZXNwb25zZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHN0YXR1c1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGhlYWRlcnNcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25TdWNjZXNzSXRlbShpdGVtLCByZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKSB7fVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBvbkVycm9ySXRlbToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtGaWxlSXRlbX0gaXRlbVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSByZXNwb25zZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHN0YXR1c1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGhlYWRlcnNcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25FcnJvckl0ZW0oaXRlbSwgcmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycykge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgb25DYW5jZWxJdGVtOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGVJdGVtfSBpdGVtXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyp9IHJlc3BvbnNlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gc3RhdHVzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaGVhZGVyc1xuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNhbmNlbEl0ZW0oaXRlbSwgcmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycykge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgb25Db21wbGV0ZUl0ZW06IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogQ2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZUl0ZW19IGl0ZW1cblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7Kn0gcmVzcG9uc2Vcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzdGF0dXNcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBoZWFkZXJzXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ29tcGxldGVJdGVtKGl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpIHt9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIG9uQ29tcGxldGVBbGw6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogQ2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25Db21wbGV0ZUFsbCgpIHt9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9nZXRUb3RhbFByb2dyZXNzOiB7XG5cdCAgICAgICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKlxuXHQgICAgICAgICAgICAgICAgICogUFJJVkFURVxuXHQgICAgICAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKiovXG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJldHVybnMgdGhlIHRvdGFsIHByb2dyZXNzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gW3ZhbHVlXVxuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMge051bWJlcn1cblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRUb3RhbFByb2dyZXNzKHZhbHVlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVtb3ZlQWZ0ZXJVcGxvYWQpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlIHx8IDA7XG5cdCAgICAgICAgICAgICAgICAgICAgfXZhciBub3RVcGxvYWRlZCA9IHRoaXMuZ2V0Tm90VXBsb2FkZWRJdGVtcygpLmxlbmd0aDtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgdXBsb2FkZWQgPSBub3RVcGxvYWRlZCA/IHRoaXMucXVldWUubGVuZ3RoIC0gbm90VXBsb2FkZWQgOiB0aGlzLnF1ZXVlLmxlbmd0aDtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgcmF0aW8gPSAxMDAgLyB0aGlzLnF1ZXVlLmxlbmd0aDtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudCA9ICh2YWx1ZSB8fCAwKSAqIHJhdGlvIC8gMTAwO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hdGgucm91bmQodXBsb2FkZWQgKiByYXRpbyArIGN1cnJlbnQpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfZ2V0RmlsdGVyczoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBSZXR1cm5zIGFycmF5IG9mIGZpbHRlcnNcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7QXJyYXk8RnVuY3Rpb24+fFN0cmluZ30gZmlsdGVyc1xuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMge0FycmF5PEZ1bmN0aW9uPn1cblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRGaWx0ZXJzKGZpbHRlcnMpIHtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAoIWZpbHRlcnMpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmlsdGVycztcblx0ICAgICAgICAgICAgICAgICAgICB9aWYgKGlzQXJyYXkoZmlsdGVycykpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpbHRlcnM7XG5cdCAgICAgICAgICAgICAgICAgICAgfXZhciBuYW1lcyA9IGZpbHRlcnMubWF0Y2goL1teXFxzLF0rL2cpO1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbHRlcnMuZmlsdGVyKGZ1bmN0aW9uIChmaWx0ZXIpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5hbWVzLmluZGV4T2YoZmlsdGVyLm5hbWUpICE9PSAtMTtcblx0ICAgICAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX3JlbmRlcjoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBVcGRhdGVzIGh0bWxcblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW5kZXIoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKCEkcm9vdFNjb3BlLiQkcGhhc2UpICRyb290U2NvcGUuJGFwcGx5KCk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9mb2xkZXJGaWx0ZXI6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmV0dXJucyBcInRydWVcIiBpZiBpdGVtIGlzIGEgZmlsZSAobm90IGZvbGRlcilcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZXxGaWxlTGlrZU9iamVjdH0gaXRlbVxuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMge0Jvb2xlYW59XG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfZm9sZGVyRmlsdGVyKGl0ZW0pIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gISEoaXRlbS5zaXplIHx8IGl0ZW0udHlwZSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9xdWV1ZUxpbWl0RmlsdGVyOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJldHVybnMgXCJ0cnVlXCIgaWYgdGhlIGxpbWl0IGhhcyBub3QgYmVlbiByZWFjaGVkXG5cdCAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9xdWV1ZUxpbWl0RmlsdGVyKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnF1ZXVlLmxlbmd0aCA8IHRoaXMucXVldWVMaW1pdDtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX2lzVmFsaWRGaWxlOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJldHVybnMgXCJ0cnVlXCIgaWYgZmlsZSBwYXNzIGFsbCBmaWx0ZXJzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGV8T2JqZWN0fSBmaWxlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0FycmF5PEZ1bmN0aW9uPn0gZmlsdGVyc1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2lzVmFsaWRGaWxlKGZpbGUsIGZpbHRlcnMsIG9wdGlvbnMpIHtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5fZmFpbEZpbHRlckluZGV4ID0gLTE7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFmaWx0ZXJzLmxlbmd0aCA/IHRydWUgOiBmaWx0ZXJzLmV2ZXJ5KGZ1bmN0aW9uIChmaWx0ZXIpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX2ZhaWxGaWx0ZXJJbmRleCsrO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmlsdGVyLmZuLmNhbGwoX3RoaXMsIGZpbGUsIG9wdGlvbnMpO1xuXHQgICAgICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfaXNTdWNjZXNzQ29kZToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDaGVja3Mgd2hldGhlciB1cGxvYWQgc3VjY2Vzc2Z1bFxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHN0YXR1c1xuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMge0Jvb2xlYW59XG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaXNTdWNjZXNzQ29kZShzdGF0dXMpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RhdHVzID49IDIwMCAmJiBzdGF0dXMgPCAzMDAgfHwgc3RhdHVzID09PSAzMDQ7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF90cmFuc2Zvcm1SZXNwb25zZToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBUcmFuc2Zvcm1zIHRoZSBzZXJ2ZXIgcmVzcG9uc2Vcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7Kn0gcmVzcG9uc2Vcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBoZWFkZXJzXG5cdCAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7Kn1cblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF90cmFuc2Zvcm1SZXNwb25zZShyZXNwb25zZSwgaGVhZGVycykge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBoZWFkZXJzR2V0dGVyID0gdGhpcy5faGVhZGVyc0dldHRlcihoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICBmb3JFYWNoKCRodHRwLmRlZmF1bHRzLnRyYW5zZm9ybVJlc3BvbnNlLCBmdW5jdGlvbiAodHJhbnNmb3JtRm4pIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSB0cmFuc2Zvcm1GbihyZXNwb25zZSwgaGVhZGVyc0dldHRlcik7XG5cdCAgICAgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfcGFyc2VIZWFkZXJzOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFBhcnNlZCByZXNwb25zZSBoZWFkZXJzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0gaGVhZGVyc1xuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMge09iamVjdH1cblx0ICAgICAgICAgICAgICAgICAqIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9ibG9iL21hc3Rlci9zcmMvbmcvaHR0cC5qc1xuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX3BhcnNlSGVhZGVycyhoZWFkZXJzKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIHBhcnNlZCA9IHt9LFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBrZXksXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhbCxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgaTtcblxuXHQgICAgICAgICAgICAgICAgICAgIGlmICghaGVhZGVycykge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VkO1xuXHQgICAgICAgICAgICAgICAgICAgIH1mb3JFYWNoKGhlYWRlcnMuc3BsaXQoXCJcXG5cIiksIGZ1bmN0aW9uIChsaW5lKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBsaW5lLmluZGV4T2YoXCI6XCIpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBrZXkgPSBsaW5lLnNsaWNlKDAsIGkpLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSBsaW5lLnNsaWNlKGkgKyAxKS50cmltKCk7XG5cblx0ICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGtleSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VkW2tleV0gPSBwYXJzZWRba2V5XSA/IHBhcnNlZFtrZXldICsgXCIsIFwiICsgdmFsIDogdmFsO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgfSk7XG5cblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VkO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfaGVhZGVyc0dldHRlcjoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBSZXR1cm5zIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBoZWFkZXJzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gcGFyc2VkSGVhZGVyc1xuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMge0Z1bmN0aW9ufVxuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2hlYWRlcnNHZXR0ZXIocGFyc2VkSGVhZGVycykge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAobmFtZSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBpZiAobmFtZSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlZEhlYWRlcnNbbmFtZS50b0xvd2VyQ2FzZSgpXSB8fCBudWxsO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZWRIZWFkZXJzO1xuXHQgICAgICAgICAgICAgICAgICAgIH07XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF94aHJUcmFuc3BvcnQ6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogVGhlIFhNTEh0dHBSZXF1ZXN0IHRyYW5zcG9ydFxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtGaWxlSXRlbX0gaXRlbVxuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX3hoclRyYW5zcG9ydChpdGVtKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuXHQgICAgICAgICAgICAgICAgICAgIHZhciB4aHIgPSBpdGVtLl94aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgZm9ybSA9IG5ldyBGb3JtRGF0YSgpO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5fb25CZWZvcmVVcGxvYWRJdGVtKGl0ZW0pO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgZm9yRWFjaChpdGVtLmZvcm1EYXRhLCBmdW5jdGlvbiAob2JqKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGZvckVhY2gob2JqLCBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybS5hcHBlbmQoa2V5LCB2YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICAgICAgICAgIH0pO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpdGVtLl9maWxlLnNpemUgIT0gXCJudW1iZXJcIikge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiVGhlIGZpbGUgc3BlY2lmaWVkIGlzIG5vIGxvbmdlciB2YWxpZFwiKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cblx0ICAgICAgICAgICAgICAgICAgICBmb3JtLmFwcGVuZChpdGVtLmFsaWFzLCBpdGVtLl9maWxlLCBpdGVtLmZpbGUubmFtZSk7XG5cblx0ICAgICAgICAgICAgICAgICAgICB4aHIudXBsb2FkLm9ucHJvZ3Jlc3MgPSBmdW5jdGlvbiAoZXZlbnQpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByb2dyZXNzID0gTWF0aC5yb3VuZChldmVudC5sZW5ndGhDb21wdXRhYmxlID8gZXZlbnQubG9hZGVkICogMTAwIC8gZXZlbnQudG90YWwgOiAwKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX29uUHJvZ3Jlc3NJdGVtKGl0ZW0sIHByb2dyZXNzKTtcblx0ICAgICAgICAgICAgICAgICAgICB9O1xuXG5cdCAgICAgICAgICAgICAgICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhlYWRlcnMgPSBfdGhpcy5fcGFyc2VIZWFkZXJzKHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXNwb25zZSA9IF90aGlzLl90cmFuc2Zvcm1SZXNwb25zZSh4aHIucmVzcG9uc2UsIGhlYWRlcnMpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ2lzdCA9IF90aGlzLl9pc1N1Y2Nlc3NDb2RlKHhoci5zdGF0dXMpID8gXCJTdWNjZXNzXCIgOiBcIkVycm9yXCI7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXRob2QgPSBcIl9vblwiICsgZ2lzdCArIFwiSXRlbVwiO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBfdGhpc1ttZXRob2RdKGl0ZW0sIHJlc3BvbnNlLCB4aHIuc3RhdHVzLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX29uQ29tcGxldGVJdGVtKGl0ZW0sIHJlc3BvbnNlLCB4aHIuc3RhdHVzLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICB9O1xuXG5cdCAgICAgICAgICAgICAgICAgICAgeGhyLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoZWFkZXJzID0gX3RoaXMuX3BhcnNlSGVhZGVycyh4aHIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSBfdGhpcy5fdHJhbnNmb3JtUmVzcG9uc2UoeGhyLnJlc3BvbnNlLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX29uRXJyb3JJdGVtKGl0ZW0sIHJlc3BvbnNlLCB4aHIuc3RhdHVzLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX29uQ29tcGxldGVJdGVtKGl0ZW0sIHJlc3BvbnNlLCB4aHIuc3RhdHVzLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICB9O1xuXG5cdCAgICAgICAgICAgICAgICAgICAgeGhyLm9uYWJvcnQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoZWFkZXJzID0gX3RoaXMuX3BhcnNlSGVhZGVycyh4aHIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSBfdGhpcy5fdHJhbnNmb3JtUmVzcG9uc2UoeGhyLnJlc3BvbnNlLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX29uQ2FuY2VsSXRlbShpdGVtLCByZXNwb25zZSwgeGhyLnN0YXR1cywgaGVhZGVycyk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9vbkNvbXBsZXRlSXRlbShpdGVtLCByZXNwb25zZSwgeGhyLnN0YXR1cywgaGVhZGVycyk7XG5cdCAgICAgICAgICAgICAgICAgICAgfTtcblxuXHQgICAgICAgICAgICAgICAgICAgIHhoci5vcGVuKGl0ZW0ubWV0aG9kLCBpdGVtLnVybCwgdHJ1ZSk7XG5cblx0ICAgICAgICAgICAgICAgICAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gaXRlbS53aXRoQ3JlZGVudGlhbHM7XG5cblx0ICAgICAgICAgICAgICAgICAgICBmb3JFYWNoKGl0ZW0uaGVhZGVycywgZnVuY3Rpb24gKHZhbHVlLCBuYW1lKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKG5hbWUsIHZhbHVlKTtcblx0ICAgICAgICAgICAgICAgICAgICB9KTtcblxuXHQgICAgICAgICAgICAgICAgICAgIHhoci5zZW5kKGZvcm0pO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlbmRlcigpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfaWZyYW1lVHJhbnNwb3J0OiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFRoZSBJRnJhbWUgdHJhbnNwb3J0XG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGVJdGVtfSBpdGVtXG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaWZyYW1lVHJhbnNwb3J0KGl0ZW0pIHtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGZvcm0gPSBlbGVtZW50KFwiPGZvcm0gc3R5bGU9XFxcImRpc3BsYXk6IG5vbmU7XFxcIiAvPlwiKTtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgaWZyYW1lID0gZWxlbWVudChcIjxpZnJhbWUgbmFtZT1cXFwiaWZyYW1lVHJhbnNwb3J0XCIgKyBEYXRlLm5vdygpICsgXCJcXFwiPlwiKTtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgaW5wdXQgPSBpdGVtLl9pbnB1dDtcblxuXHQgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLl9mb3JtKSBpdGVtLl9mb3JtLnJlcGxhY2VXaXRoKGlucHV0KTsgLy8gcmVtb3ZlIG9sZCBmb3JtXG5cdCAgICAgICAgICAgICAgICAgICAgaXRlbS5fZm9ybSA9IGZvcm07IC8vIHNhdmUgbGluayB0byBuZXcgZm9ybVxuXG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5fb25CZWZvcmVVcGxvYWRJdGVtKGl0ZW0pO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgaW5wdXQucHJvcChcIm5hbWVcIiwgaXRlbS5hbGlhcyk7XG5cblx0ICAgICAgICAgICAgICAgICAgICBmb3JFYWNoKGl0ZW0uZm9ybURhdGEsIGZ1bmN0aW9uIChvYmopIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgZm9yRWFjaChvYmosIGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudF8gPSBlbGVtZW50KFwiPGlucHV0IHR5cGU9XFxcImhpZGRlblxcXCIgbmFtZT1cXFwiXCIgKyBrZXkgKyBcIlxcXCIgLz5cIik7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50Xy52YWwodmFsdWUpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybS5hcHBlbmQoZWxlbWVudF8pO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICAgICAgICB9KTtcblxuXHQgICAgICAgICAgICAgICAgICAgIGZvcm0ucHJvcCh7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogaXRlbS51cmwsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldDogaWZyYW1lLnByb3AoXCJuYW1lXCIpLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBlbmN0eXBlOiBcIm11bHRpcGFydC9mb3JtLWRhdGFcIixcblx0ICAgICAgICAgICAgICAgICAgICAgICAgZW5jb2Rpbmc6IFwibXVsdGlwYXJ0L2Zvcm0tZGF0YVwiIC8vIG9sZCBJRVxuXHQgICAgICAgICAgICAgICAgICAgIH0pO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgaWZyYW1lLmJpbmQoXCJsb2FkXCIsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGh0bWwgPSBcIlwiO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RhdHVzID0gMjAwO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGaXggZm9yIGxlZ2FjeSBJRSBicm93c2VycyB0aGF0IGxvYWRzIGludGVybmFsIGVycm9yIHBhZ2Vcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdoZW4gZmFpbGVkIFdTIHJlc3BvbnNlIHJlY2VpdmVkLiBJbiBjb25zZXF1ZW5jZSBpZnJhbWVcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnRlbnQgYWNjZXNzIGRlbmllZCBlcnJvciBpcyB0aHJvd24gYmVjb3VzZSB0cnlpbmcgdG9cblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFjY2VzcyBjcm9zcyBkb21haW4gcGFnZS4gV2hlbiBzdWNoIHRoaW5nIG9jY3VycyBub3RpZnlpbmdcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdpdGggZW1wdHkgcmVzcG9uc2Ugb2JqZWN0LiBTZWUgbW9yZSBpbmZvIGF0OlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xNTEzNjIvYWNjZXNzLWlzLWRlbmllZC1lcnJvci1vbi1hY2Nlc3NpbmctaWZyYW1lLWRvY3VtZW50LW9iamVjdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90ZSB0aGF0IGlmIG5vbiBzdGFuZGFyZCA0eHggb3IgNXh4IGVycm9yIGNvZGUgcmV0dXJuZWRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZyb20gV1MgdGhlbiByZXNwb25zZSBjb250ZW50IGNhbiBiZSBhY2Nlc3NlZCB3aXRob3V0IGVycm9yXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBidXQgJ1hIUicgc3RhdHVzIGJlY29tZXMgMjAwLiBJbiBvcmRlciB0byBhdm9pZCBjb25mdXNpb25cblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJldHVybmluZyByZXNwb25zZSB2aWEgc2FtZSAnc3VjY2VzcycgZXZlbnQgaGFuZGxlci5cblxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZml4ZWQgYW5ndWxhci5jb250ZW50cygpIGZvciBpZnJhbWVzXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sID0gaWZyYW1lWzBdLmNvbnRlbnREb2N1bWVudC5ib2R5LmlubmVySFRNTDtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW4gY2FzZSB3ZSBydW4gaW50byB0aGUgYWNjZXNzLWlzLWRlbmllZCBlcnJvciBvciB3ZSBoYXZlIGFub3RoZXIgZXJyb3Igb24gdGhlIHNlcnZlciBzaWRlXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAoaW50ZW50aW9uYWwgNTAwLDQwLi4uIGVycm9ycyksIHdlIGF0IGxlYXN0IHNheSAnc29tZXRoaW5nIHdlbnQgd3JvbmcnIC0+IDUwMFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzID0gNTAwO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB9XG5cblx0ICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHhociA9IHsgcmVzcG9uc2U6IGh0bWwsIHN0YXR1czogc3RhdHVzLCBkdW1teTogdHJ1ZSB9O1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaGVhZGVycyA9IHt9O1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSBfdGhpcy5fdHJhbnNmb3JtUmVzcG9uc2UoeGhyLnJlc3BvbnNlLCBoZWFkZXJzKTtcblxuXHQgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5fb25TdWNjZXNzSXRlbShpdGVtLCByZXNwb25zZSwgeGhyLnN0YXR1cywgaGVhZGVycyk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9vbkNvbXBsZXRlSXRlbShpdGVtLCByZXNwb25zZSwgeGhyLnN0YXR1cywgaGVhZGVycyk7XG5cdCAgICAgICAgICAgICAgICAgICAgfSk7XG5cblx0ICAgICAgICAgICAgICAgICAgICBmb3JtLmFib3J0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgeGhyID0geyBzdGF0dXM6IDAsIGR1bW15OiB0cnVlIH07XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoZWFkZXJzID0ge307XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXNwb25zZTtcblxuXHQgICAgICAgICAgICAgICAgICAgICAgICBpZnJhbWUudW5iaW5kKFwibG9hZFwiKS5wcm9wKFwic3JjXCIsIFwiamF2YXNjcmlwdDpmYWxzZTtcIik7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGZvcm0ucmVwbGFjZVdpdGgoaW5wdXQpO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9vbkNhbmNlbEl0ZW0oaXRlbSwgcmVzcG9uc2UsIHhoci5zdGF0dXMsIGhlYWRlcnMpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5fb25Db21wbGV0ZUl0ZW0oaXRlbSwgcmVzcG9uc2UsIHhoci5zdGF0dXMsIGhlYWRlcnMpO1xuXHQgICAgICAgICAgICAgICAgICAgIH07XG5cblx0ICAgICAgICAgICAgICAgICAgICBpbnB1dC5hZnRlcihmb3JtKTtcblx0ICAgICAgICAgICAgICAgICAgICBmb3JtLmFwcGVuZChpbnB1dCkuYXBwZW5kKGlmcmFtZSk7XG5cblx0ICAgICAgICAgICAgICAgICAgICBmb3JtWzBdLnN1Ym1pdCgpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlbmRlcigpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfb25XaGVuQWRkaW5nRmlsZUZhaWxlZDoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBJbm5lciBjYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtGaWxlfE9iamVjdH0gaXRlbVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGZpbHRlclxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9vbldoZW5BZGRpbmdGaWxlRmFpbGVkKGl0ZW0sIGZpbHRlciwgb3B0aW9ucykge1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMub25XaGVuQWRkaW5nRmlsZUZhaWxlZChpdGVtLCBmaWx0ZXIsIG9wdGlvbnMpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfb25BZnRlckFkZGluZ0ZpbGU6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogSW5uZXIgY2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZUl0ZW19IGl0ZW1cblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX29uQWZ0ZXJBZGRpbmdGaWxlKGl0ZW0pIHtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQWZ0ZXJBZGRpbmdGaWxlKGl0ZW0pO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfb25BZnRlckFkZGluZ0FsbDoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBJbm5lciBjYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtBcnJheTxGaWxlSXRlbT59IGl0ZW1zXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkFmdGVyQWRkaW5nQWxsKGl0ZW1zKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkFmdGVyQWRkaW5nQWxsKGl0ZW1zKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX29uQmVmb3JlVXBsb2FkSXRlbToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiAgSW5uZXIgY2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZUl0ZW19IGl0ZW1cblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkJlZm9yZVVwbG9hZEl0ZW0oaXRlbSkge1xuXHQgICAgICAgICAgICAgICAgICAgIGl0ZW0uX29uQmVmb3JlVXBsb2FkKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkJlZm9yZVVwbG9hZEl0ZW0oaXRlbSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9vblByb2dyZXNzSXRlbToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBJbm5lciBjYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtGaWxlSXRlbX0gaXRlbVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHByb2dyZXNzXG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfb25Qcm9ncmVzc0l0ZW0oaXRlbSwgcHJvZ3Jlc3MpIHtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgdG90YWwgPSB0aGlzLl9nZXRUb3RhbFByb2dyZXNzKHByb2dyZXNzKTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2dyZXNzID0gdG90YWw7XG5cdCAgICAgICAgICAgICAgICAgICAgaXRlbS5fb25Qcm9ncmVzcyhwcm9ncmVzcyk7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5vblByb2dyZXNzSXRlbShpdGVtLCBwcm9ncmVzcyk7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5vblByb2dyZXNzQWxsKHRvdGFsKTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZW5kZXIoKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX29uU3VjY2Vzc0l0ZW06IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogSW5uZXIgY2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZUl0ZW19IGl0ZW1cblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7Kn0gcmVzcG9uc2Vcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzdGF0dXNcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBoZWFkZXJzXG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfb25TdWNjZXNzSXRlbShpdGVtLCByZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaXRlbS5fb25TdWNjZXNzKHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMub25TdWNjZXNzSXRlbShpdGVtLCByZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX29uRXJyb3JJdGVtOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIElubmVyIGNhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGVJdGVtfSBpdGVtXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyp9IHJlc3BvbnNlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gc3RhdHVzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaGVhZGVyc1xuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX29uRXJyb3JJdGVtKGl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpIHtcblx0ICAgICAgICAgICAgICAgICAgICBpdGVtLl9vbkVycm9yKHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMub25FcnJvckl0ZW0oaXRlbSwgcmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycyk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9vbkNhbmNlbEl0ZW06IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogSW5uZXIgY2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZUl0ZW19IGl0ZW1cblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7Kn0gcmVzcG9uc2Vcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzdGF0dXNcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBoZWFkZXJzXG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfb25DYW5jZWxJdGVtKGl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpIHtcblx0ICAgICAgICAgICAgICAgICAgICBpdGVtLl9vbkNhbmNlbChyZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQ2FuY2VsSXRlbShpdGVtLCByZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX29uQ29tcGxldGVJdGVtOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIElubmVyIGNhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGVJdGVtfSBpdGVtXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyp9IHJlc3BvbnNlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gc3RhdHVzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaGVhZGVyc1xuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX29uQ29tcGxldGVJdGVtKGl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpIHtcblx0ICAgICAgICAgICAgICAgICAgICBpdGVtLl9vbkNvbXBsZXRlKHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMub25Db21wbGV0ZUl0ZW0oaXRlbSwgcmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycyk7XG5cblx0ICAgICAgICAgICAgICAgICAgICB2YXIgbmV4dEl0ZW0gPSB0aGlzLmdldFJlYWR5SXRlbXMoKVswXTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzVXBsb2FkaW5nID0gZmFsc2U7XG5cblx0ICAgICAgICAgICAgICAgICAgICBpZiAoaXNEZWZpbmVkKG5leHRJdGVtKSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBuZXh0SXRlbS51cGxvYWQoKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblxuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMub25Db21wbGV0ZUFsbCgpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvZ3Jlc3MgPSB0aGlzLl9nZXRUb3RhbFByb2dyZXNzKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVuZGVyKCk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9LCB7XG5cdCAgICAgICAgICAgIGlzRmlsZToge1xuXHQgICAgICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKipcblx0ICAgICAgICAgICAgICAgICAqIFNUQVRJQ1xuXHQgICAgICAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKiovXG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJldHVybnMgXCJ0cnVlXCIgaWYgdmFsdWUgYW4gaW5zdGFuY2Ugb2YgRmlsZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMge0Jvb2xlYW59XG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc0ZpbGUodmFsdWUpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gRmlsZSAmJiB2YWx1ZSBpbnN0YW5jZW9mIEZpbGU7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIGlzRmlsZUxpa2VPYmplY3Q6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmV0dXJucyBcInRydWVcIiBpZiB2YWx1ZSBhbiBpbnN0YW5jZSBvZiBGaWxlTGlrZU9iamVjdFxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMge0Jvb2xlYW59XG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc0ZpbGVMaWtlT2JqZWN0KHZhbHVlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgRmlsZUxpa2VPYmplY3Q7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIGlzQXJyYXlMaWtlT2JqZWN0OiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJldHVybnMgXCJ0cnVlXCIgaWYgdmFsdWUgaXMgYXJyYXkgbGlrZSBvYmplY3Rcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc0FycmF5TGlrZU9iamVjdCh2YWx1ZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBpc09iamVjdCh2YWx1ZSkgJiYgXCJsZW5ndGhcIiBpbiB2YWx1ZTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgaW5oZXJpdDoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBJbmhlcml0cyBhIHRhcmdldCAoQ2xhc3NfMSkgYnkgYSBzb3VyY2UgKENsYXNzXzIpXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSB0YXJnZXRcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHNvdXJjZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbmhlcml0KHRhcmdldCwgc291cmNlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc291cmNlLnByb3RvdHlwZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHRhcmdldDtcblx0ICAgICAgICAgICAgICAgICAgICB0YXJnZXQuc3VwZXJfID0gc291cmNlO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cblx0ICAgICAgICByZXR1cm4gRmlsZVVwbG9hZGVyO1xuXHQgICAgfSkoKTtcblxuXHQgICAgLyoqKioqKioqKioqKioqKioqKioqKipcblx0ICAgICAqIFBVQkxJQ1xuXHQgICAgICoqKioqKioqKioqKioqKioqKioqKiovXG5cdCAgICAvKipcblx0ICAgICAqIENoZWNrcyBhIHN1cHBvcnQgdGhlIGh0bWw1IHVwbG9hZGVyXG5cdCAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cblx0ICAgICAqIEByZWFkb25seVxuXHQgICAgICovXG5cdCAgICBGaWxlVXBsb2FkZXIucHJvdG90eXBlLmlzSFRNTDUgPSAhIShGaWxlICYmIEZvcm1EYXRhKTtcblx0ICAgIC8qKioqKioqKioqKioqKioqKioqKioqXG5cdCAgICAgKiBTVEFUSUNcblx0ICAgICAqKioqKioqKioqKioqKioqKioqKioqL1xuXHQgICAgLyoqXG5cdCAgICAgKiBAYm9ycm93cyBGaWxlVXBsb2FkZXIucHJvdG90eXBlLmlzSFRNTDVcblx0ICAgICAqL1xuXHQgICAgRmlsZVVwbG9hZGVyLmlzSFRNTDUgPSBGaWxlVXBsb2FkZXIucHJvdG90eXBlLmlzSFRNTDU7XG5cblx0ICAgIHJldHVybiBGaWxlVXBsb2FkZXI7XG5cdH07XG5cblx0bW9kdWxlLmV4cG9ydHMuJGluamVjdCA9IFtcImZpbGVVcGxvYWRlck9wdGlvbnNcIiwgXCIkcm9vdFNjb3BlXCIsIFwiJGh0dHBcIiwgXCIkd2luZG93XCIsIFwiRmlsZUxpa2VPYmplY3RcIiwgXCJGaWxlSXRlbVwiXTtcblxuLyoqKi8gfSxcbi8qIDQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdHZhciBfaW50ZXJvcFJlcXVpcmUgPSBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmpbXCJkZWZhdWx0XCJdIDogb2JqOyB9O1xuXG5cdHZhciBfY3JlYXRlQ2xhc3MgPSAoZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIga2V5IGluIHByb3BzKSB7IHZhciBwcm9wID0gcHJvcHNba2V5XTsgcHJvcC5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAocHJvcC52YWx1ZSkgcHJvcC53cml0YWJsZSA9IHRydWU7IH0gT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcyk7IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTtcblxuXHR2YXIgX2NsYXNzQ2FsbENoZWNrID0gZnVuY3Rpb24gKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH07XG5cblx0dmFyIENPTkZJRyA9IF9pbnRlcm9wUmVxdWlyZShfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKTtcblxuXHR2YXIgY29weSA9IGFuZ3VsYXIuY29weTtcblx0dmFyIGlzRWxlbWVudCA9IGFuZ3VsYXIuaXNFbGVtZW50O1xuXHR2YXIgaXNTdHJpbmcgPSBhbmd1bGFyLmlzU3RyaW5nO1xuXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIEZpbGVMaWtlT2JqZWN0ID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIEZpbGVMaWtlT2JqZWN0XG5cdCAgICAgICAgICogQHBhcmFtIHtGaWxlfEhUTUxJbnB1dEVsZW1lbnR8T2JqZWN0fSBmaWxlT3JJbnB1dFxuXHQgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuXHQgICAgICAgICAqL1xuXG5cdCAgICAgICAgZnVuY3Rpb24gRmlsZUxpa2VPYmplY3QoZmlsZU9ySW5wdXQpIHtcblx0ICAgICAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZpbGVMaWtlT2JqZWN0KTtcblxuXHQgICAgICAgICAgICB2YXIgaXNJbnB1dCA9IGlzRWxlbWVudChmaWxlT3JJbnB1dCk7XG5cdCAgICAgICAgICAgIHZhciBmYWtlUGF0aE9yT2JqZWN0ID0gaXNJbnB1dCA/IGZpbGVPcklucHV0LnZhbHVlIDogZmlsZU9ySW5wdXQ7XG5cdCAgICAgICAgICAgIHZhciBwb3N0Zml4ID0gaXNTdHJpbmcoZmFrZVBhdGhPck9iamVjdCkgPyBcIkZha2VQYXRoXCIgOiBcIk9iamVjdFwiO1xuXHQgICAgICAgICAgICB2YXIgbWV0aG9kID0gXCJfY3JlYXRlRnJvbVwiICsgcG9zdGZpeDtcblx0ICAgICAgICAgICAgdGhpc1ttZXRob2RdKGZha2VQYXRoT3JPYmplY3QpO1xuXHQgICAgICAgIH1cblxuXHQgICAgICAgIF9jcmVhdGVDbGFzcyhGaWxlTGlrZU9iamVjdCwge1xuXHQgICAgICAgICAgICBfY3JlYXRlRnJvbUZha2VQYXRoOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENyZWF0ZXMgZmlsZSBsaWtlIG9iamVjdCBmcm9tIGZha2UgcGF0aCBzdHJpbmdcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfY3JlYXRlRnJvbUZha2VQYXRoKHBhdGgpIHtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmxhc3RNb2RpZmllZERhdGUgPSBudWxsO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuc2l6ZSA9IG51bGw7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy50eXBlID0gXCJsaWtlL1wiICsgcGF0aC5zbGljZShwYXRoLmxhc3RJbmRleE9mKFwiLlwiKSArIDEpLnRvTG93ZXJDYXNlKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5uYW1lID0gcGF0aC5zbGljZShwYXRoLmxhc3RJbmRleE9mKFwiL1wiKSArIHBhdGgubGFzdEluZGV4T2YoXCJcXFxcXCIpICsgMik7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9jcmVhdGVGcm9tT2JqZWN0OiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENyZWF0ZXMgZmlsZSBsaWtlIG9iamVjdCBmcm9tIG9iamVjdFxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtGaWxlfEZpbGVMaWtlT2JqZWN0fSBvYmplY3Rcblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9jcmVhdGVGcm9tT2JqZWN0KG9iamVjdCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMubGFzdE1vZGlmaWVkRGF0ZSA9IGNvcHkob2JqZWN0Lmxhc3RNb2RpZmllZERhdGUpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuc2l6ZSA9IG9iamVjdC5zaXplO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMudHlwZSA9IG9iamVjdC50eXBlO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMubmFtZSA9IG9iamVjdC5uYW1lO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cblx0ICAgICAgICByZXR1cm4gRmlsZUxpa2VPYmplY3Q7XG5cdCAgICB9KSgpO1xuXG5cdCAgICByZXR1cm4gRmlsZUxpa2VPYmplY3Q7XG5cdH07XG5cblx0bW9kdWxlLmV4cG9ydHMuJGluamVjdCA9IFtdO1xuXG4vKioqLyB9LFxuLyogNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0dmFyIF9pbnRlcm9wUmVxdWlyZSA9IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9ialtcImRlZmF1bHRcIl0gOiBvYmo7IH07XG5cblx0dmFyIF9jcmVhdGVDbGFzcyA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBrZXkgaW4gcHJvcHMpIHsgdmFyIHByb3AgPSBwcm9wc1trZXldOyBwcm9wLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChwcm9wLnZhbHVlKSBwcm9wLndyaXRhYmxlID0gdHJ1ZTsgfSBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKTsgfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KSgpO1xuXG5cdHZhciBfY2xhc3NDYWxsQ2hlY2sgPSBmdW5jdGlvbiAoaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfTtcblxuXHR2YXIgQ09ORklHID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oMSkpO1xuXG5cdHZhciBjb3B5ID0gYW5ndWxhci5jb3B5O1xuXHR2YXIgZXh0ZW5kID0gYW5ndWxhci5leHRlbmQ7XG5cdHZhciBlbGVtZW50ID0gYW5ndWxhci5lbGVtZW50O1xuXHR2YXIgaXNFbGVtZW50ID0gYW5ndWxhci5pc0VsZW1lbnQ7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoJGNvbXBpbGUsIEZpbGVMaWtlT2JqZWN0KSB7XG5cdCAgICB2YXIgRmlsZUl0ZW0gPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIC8qKlxuXHQgICAgICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgRmlsZUl0ZW1cblx0ICAgICAgICAgKiBAcGFyYW0ge0ZpbGVVcGxvYWRlcn0gdXBsb2FkZXJcblx0ICAgICAgICAgKiBAcGFyYW0ge0ZpbGV8SFRNTElucHV0RWxlbWVudHxPYmplY3R9IHNvbWVcblx0ICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuXHQgICAgICAgICAqL1xuXG5cdCAgICAgICAgZnVuY3Rpb24gRmlsZUl0ZW0odXBsb2FkZXIsIHNvbWUsIG9wdGlvbnMpIHtcblx0ICAgICAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZpbGVJdGVtKTtcblxuXHQgICAgICAgICAgICB2YXIgaXNJbnB1dCA9IGlzRWxlbWVudChzb21lKTtcblx0ICAgICAgICAgICAgdmFyIGlucHV0ID0gaXNJbnB1dCA/IGVsZW1lbnQoc29tZSkgOiBudWxsO1xuXHQgICAgICAgICAgICB2YXIgZmlsZSA9ICFpc0lucHV0ID8gc29tZSA6IG51bGw7XG5cblx0ICAgICAgICAgICAgZXh0ZW5kKHRoaXMsIHtcblx0ICAgICAgICAgICAgICAgIHVybDogdXBsb2FkZXIudXJsLFxuXHQgICAgICAgICAgICAgICAgYWxpYXM6IHVwbG9hZGVyLmFsaWFzLFxuXHQgICAgICAgICAgICAgICAgaGVhZGVyczogY29weSh1cGxvYWRlci5oZWFkZXJzKSxcblx0ICAgICAgICAgICAgICAgIGZvcm1EYXRhOiBjb3B5KHVwbG9hZGVyLmZvcm1EYXRhKSxcblx0ICAgICAgICAgICAgICAgIHJlbW92ZUFmdGVyVXBsb2FkOiB1cGxvYWRlci5yZW1vdmVBZnRlclVwbG9hZCxcblx0ICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdXBsb2FkZXIud2l0aENyZWRlbnRpYWxzLFxuXHQgICAgICAgICAgICAgICAgbWV0aG9kOiB1cGxvYWRlci5tZXRob2Rcblx0ICAgICAgICAgICAgfSwgb3B0aW9ucywge1xuXHQgICAgICAgICAgICAgICAgdXBsb2FkZXI6IHVwbG9hZGVyLFxuXHQgICAgICAgICAgICAgICAgZmlsZTogbmV3IEZpbGVMaWtlT2JqZWN0KHNvbWUpLFxuXHQgICAgICAgICAgICAgICAgaXNSZWFkeTogZmFsc2UsXG5cdCAgICAgICAgICAgICAgICBpc1VwbG9hZGluZzogZmFsc2UsXG5cdCAgICAgICAgICAgICAgICBpc1VwbG9hZGVkOiBmYWxzZSxcblx0ICAgICAgICAgICAgICAgIGlzU3VjY2VzczogZmFsc2UsXG5cdCAgICAgICAgICAgICAgICBpc0NhbmNlbDogZmFsc2UsXG5cdCAgICAgICAgICAgICAgICBpc0Vycm9yOiBmYWxzZSxcblx0ICAgICAgICAgICAgICAgIHByb2dyZXNzOiAwLFxuXHQgICAgICAgICAgICAgICAgaW5kZXg6IG51bGwsXG5cdCAgICAgICAgICAgICAgICBfZmlsZTogZmlsZSxcblx0ICAgICAgICAgICAgICAgIF9pbnB1dDogaW5wdXRcblx0ICAgICAgICAgICAgfSk7XG5cblx0ICAgICAgICAgICAgaWYgKGlucHV0KSB0aGlzLl9yZXBsYWNlTm9kZShpbnB1dCk7XG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgX2NyZWF0ZUNsYXNzKEZpbGVJdGVtLCB7XG5cdCAgICAgICAgICAgIHVwbG9hZDoge1xuXHQgICAgICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKipcblx0ICAgICAgICAgICAgICAgICAqIFBVQkxJQ1xuXHQgICAgICAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKiovXG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFVwbG9hZHMgYSBGaWxlSXRlbVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiB1cGxvYWQoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGxvYWRlci51cGxvYWRJdGVtKHRoaXMpO1xuXHQgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGxvYWRlci5fb25Db21wbGV0ZUl0ZW0odGhpcywgXCJcIiwgMCwgW10pO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwbG9hZGVyLl9vbkVycm9ySXRlbSh0aGlzLCBcIlwiLCAwLCBbXSk7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBjYW5jZWw6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogQ2FuY2VscyB1cGxvYWRpbmcgb2YgRmlsZUl0ZW1cblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2FuY2VsKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMudXBsb2FkZXIuY2FuY2VsSXRlbSh0aGlzKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgcmVtb3ZlOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJlbW92ZXMgYSBGaWxlSXRlbVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmUoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy51cGxvYWRlci5yZW1vdmVGcm9tUXVldWUodGhpcyk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIG9uQmVmb3JlVXBsb2FkOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvbkJlZm9yZVVwbG9hZCgpIHt9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIG9uUHJvZ3Jlc3M6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogQ2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBwcm9ncmVzc1xuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25Qcm9ncmVzcyhwcm9ncmVzcykge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgb25TdWNjZXNzOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyp9IHJlc3BvbnNlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gc3RhdHVzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaGVhZGVyc1xuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvblN1Y2Nlc3MocmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycykge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgb25FcnJvcjoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSByZXNwb25zZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHN0YXR1c1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGhlYWRlcnNcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25FcnJvcihyZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKSB7fVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBvbkNhbmNlbDoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSByZXNwb25zZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHN0YXR1c1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGhlYWRlcnNcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25DYW5jZWwocmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycykge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgb25Db21wbGV0ZToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSByZXNwb25zZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHN0YXR1c1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGhlYWRlcnNcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25Db21wbGV0ZShyZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKSB7fVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfb25CZWZvcmVVcGxvYWQ6IHtcblx0ICAgICAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqXG5cdCAgICAgICAgICAgICAgICAgKiBQUklWQVRFXG5cdCAgICAgICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKi9cblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogSW5uZXIgY2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX29uQmVmb3JlVXBsb2FkKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNSZWFkeSA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1VwbG9hZGluZyA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1VwbG9hZGVkID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1N1Y2Nlc3MgPSBmYWxzZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQ2FuY2VsID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0Vycm9yID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9ncmVzcyA9IDA7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkJlZm9yZVVwbG9hZCgpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfb25Qcm9ncmVzczoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBJbm5lciBjYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHByb2dyZXNzXG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfb25Qcm9ncmVzcyhwcm9ncmVzcykge1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvZ3Jlc3MgPSBwcm9ncmVzcztcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLm9uUHJvZ3Jlc3MocHJvZ3Jlc3MpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfb25TdWNjZXNzOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIElubmVyIGNhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyp9IHJlc3BvbnNlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gc3RhdHVzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaGVhZGVyc1xuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX29uU3VjY2VzcyhyZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1JlYWR5ID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1VwbG9hZGluZyA9IGZhbHNlO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNVcGxvYWRlZCA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1N1Y2Nlc3MgPSB0cnVlO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNDYW5jZWwgPSBmYWxzZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzRXJyb3IgPSBmYWxzZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2dyZXNzID0gMTAwO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5kZXggPSBudWxsO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMub25TdWNjZXNzKHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfb25FcnJvcjoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBJbm5lciBjYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSByZXNwb25zZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHN0YXR1c1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGhlYWRlcnNcblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkVycm9yKHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpIHtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzUmVhZHkgPSBmYWxzZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzVXBsb2FkaW5nID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1VwbG9hZGVkID0gdHJ1ZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzU3VjY2VzcyA9IGZhbHNlO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNDYW5jZWwgPSBmYWxzZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzRXJyb3IgPSB0cnVlO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvZ3Jlc3MgPSAwO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5kZXggPSBudWxsO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMub25FcnJvcihyZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX29uQ2FuY2VsOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIElubmVyIGNhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyp9IHJlc3BvbnNlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gc3RhdHVzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaGVhZGVyc1xuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX29uQ2FuY2VsKHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpIHtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzUmVhZHkgPSBmYWxzZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzVXBsb2FkaW5nID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1VwbG9hZGVkID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1N1Y2Nlc3MgPSBmYWxzZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQ2FuY2VsID0gdHJ1ZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzRXJyb3IgPSBmYWxzZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2dyZXNzID0gMDtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmluZGV4ID0gbnVsbDtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQ2FuY2VsKHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfb25Db21wbGV0ZToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBJbm5lciBjYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSByZXNwb25zZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHN0YXR1c1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGhlYWRlcnNcblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkNvbXBsZXRlKHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpIHtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQ29tcGxldGUocmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycyk7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVtb3ZlQWZ0ZXJVcGxvYWQpIHRoaXMucmVtb3ZlKCk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9kZXN0cm95OiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIERlc3Ryb3lzIGEgRmlsZUl0ZW1cblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2Rlc3Ryb3koKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2lucHV0KSB0aGlzLl9pbnB1dC5yZW1vdmUoKTtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fZm9ybSkgdGhpcy5fZm9ybS5yZW1vdmUoKTtcblx0ICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5fZm9ybTtcblx0ICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5faW5wdXQ7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9wcmVwYXJlVG9VcGxvYWRpbmc6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUHJlcGFyZXMgdG8gdXBsb2FkaW5nXG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcHJlcGFyZVRvVXBsb2FkaW5nKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5kZXggPSB0aGlzLmluZGV4IHx8ICsrdGhpcy51cGxvYWRlci5fbmV4dEluZGV4O1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNSZWFkeSA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9yZXBsYWNlTm9kZToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBSZXBsYWNlcyBpbnB1dCBlbGVtZW50IG9uIGhpcyBjbG9uZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtKUUxpdGV8alF1ZXJ5fSBpbnB1dFxuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX3JlcGxhY2VOb2RlKGlucHV0KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGNsb25lID0gJGNvbXBpbGUoaW5wdXQuY2xvbmUoKSkoaW5wdXQuc2NvcGUoKSk7XG5cdCAgICAgICAgICAgICAgICAgICAgY2xvbmUucHJvcChcInZhbHVlXCIsIG51bGwpOyAvLyBGRiBmaXhcblx0ICAgICAgICAgICAgICAgICAgICBpbnB1dC5jc3MoXCJkaXNwbGF5XCIsIFwibm9uZVwiKTtcblx0ICAgICAgICAgICAgICAgICAgICBpbnB1dC5hZnRlcihjbG9uZSk7IC8vIHJlbW92ZSBqcXVlcnkgZGVwZW5kZW5jeVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cblx0ICAgICAgICByZXR1cm4gRmlsZUl0ZW07XG5cdCAgICB9KSgpO1xuXG5cdCAgICByZXR1cm4gRmlsZUl0ZW07XG5cdH07XG5cblx0bW9kdWxlLmV4cG9ydHMuJGluamVjdCA9IFtcIiRjb21waWxlXCIsIFwiRmlsZUxpa2VPYmplY3RcIl07XG5cbi8qKiovIH0sXG4vKiA2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblxuXHR2YXIgX2ludGVyb3BSZXF1aXJlID0gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqW1wiZGVmYXVsdFwiXSA6IG9iajsgfTtcblxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGtleSBpbiBwcm9wcykgeyB2YXIgcHJvcCA9IHByb3BzW2tleV07IHByb3AuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKHByb3AudmFsdWUpIHByb3Aud3JpdGFibGUgPSB0cnVlOyB9IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpOyB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0pKCk7XG5cblx0dmFyIF9jbGFzc0NhbGxDaGVjayA9IGZ1bmN0aW9uIChpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9O1xuXG5cdHZhciBDT05GSUcgPSBfaW50ZXJvcFJlcXVpcmUoX193ZWJwYWNrX3JlcXVpcmVfXygxKSk7XG5cblx0dmFyIGV4dGVuZCA9IGFuZ3VsYXIuZXh0ZW5kO1xuXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIEZpbGVEaXJlY3RpdmUgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIC8qKlxuXHQgICAgICAgICAqIENyZWF0ZXMgaW5zdGFuY2Ugb2Yge0ZpbGVEaXJlY3RpdmV9IG9iamVjdFxuXHQgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMudXBsb2FkZXJcblx0ICAgICAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBvcHRpb25zLmVsZW1lbnRcblx0ICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucy5ldmVudHNcblx0ICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gb3B0aW9ucy5wcm9wXG5cdCAgICAgICAgICogQGNvbnN0cnVjdG9yXG5cdCAgICAgICAgICovXG5cblx0ICAgICAgICBmdW5jdGlvbiBGaWxlRGlyZWN0aXZlKG9wdGlvbnMpIHtcblx0ICAgICAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZpbGVEaXJlY3RpdmUpO1xuXG5cdCAgICAgICAgICAgIGV4dGVuZCh0aGlzLCBvcHRpb25zKTtcblx0ICAgICAgICAgICAgdGhpcy51cGxvYWRlci5fZGlyZWN0aXZlc1t0aGlzLnByb3BdLnB1c2godGhpcyk7XG5cdCAgICAgICAgICAgIHRoaXMuX3NhdmVMaW5rcygpO1xuXHQgICAgICAgICAgICB0aGlzLmJpbmQoKTtcblx0ICAgICAgICB9XG5cblx0ICAgICAgICBfY3JlYXRlQ2xhc3MoRmlsZURpcmVjdGl2ZSwge1xuXHQgICAgICAgICAgICBiaW5kOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIEJpbmRzIGV2ZW50cyBoYW5kbGVzXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMuZXZlbnRzKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcm9wID0gdGhpcy5ldmVudHNba2V5XTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmJpbmQoa2V5LCB0aGlzW3Byb3BdKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIHVuYmluZDoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBVbmJpbmRzIGV2ZW50cyBoYW5kbGVzXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHVuYmluZCgpIHtcblx0ICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5ldmVudHMpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnVuYmluZChrZXksIHRoaXMuZXZlbnRzW2tleV0pO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgZGVzdHJveToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBEZXN0cm95cyBkaXJlY3RpdmVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSB0aGlzLnVwbG9hZGVyLl9kaXJlY3RpdmVzW3RoaXMucHJvcF0uaW5kZXhPZih0aGlzKTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLnVwbG9hZGVyLl9kaXJlY3RpdmVzW3RoaXMucHJvcF0uc3BsaWNlKGluZGV4LCAxKTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLnVuYmluZCgpO1xuXHQgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuZWxlbWVudCA9IG51bGw7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9zYXZlTGlua3M6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogU2F2ZXMgbGlua3MgdG8gZnVuY3Rpb25zXG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2F2ZUxpbmtzKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLmV2ZW50cykge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJvcCA9IHRoaXMuZXZlbnRzW2tleV07XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNbcHJvcF0gPSB0aGlzW3Byb3BdLmJpbmQodGhpcyk7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cblx0ICAgICAgICByZXR1cm4gRmlsZURpcmVjdGl2ZTtcblx0ICAgIH0pKCk7XG5cblx0ICAgIC8qKlxuXHQgICAgICogTWFwIG9mIGV2ZW50c1xuXHQgICAgICogQHR5cGUge09iamVjdH1cblx0ICAgICAqL1xuXHQgICAgRmlsZURpcmVjdGl2ZS5wcm90b3R5cGUuZXZlbnRzID0ge307XG5cblx0ICAgIHJldHVybiBGaWxlRGlyZWN0aXZlO1xuXHR9O1xuXG5cdG1vZHVsZS5leHBvcnRzLiRpbmplY3QgPSBbXTtcblxuLyoqKi8gfSxcbi8qIDcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdHZhciBfaW50ZXJvcFJlcXVpcmUgPSBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmpbXCJkZWZhdWx0XCJdIDogb2JqOyB9O1xuXG5cdHZhciBfY3JlYXRlQ2xhc3MgPSAoZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIga2V5IGluIHByb3BzKSB7IHZhciBwcm9wID0gcHJvcHNba2V5XTsgcHJvcC5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAocHJvcC52YWx1ZSkgcHJvcC53cml0YWJsZSA9IHRydWU7IH0gT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcyk7IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTtcblxuXHR2YXIgX2dldCA9IGZ1bmN0aW9uIGdldChvYmplY3QsIHByb3BlcnR5LCByZWNlaXZlcikgeyB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBwcm9wZXJ0eSk7IGlmIChkZXNjID09PSB1bmRlZmluZWQpIHsgdmFyIHBhcmVudCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmplY3QpOyBpZiAocGFyZW50ID09PSBudWxsKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gZWxzZSB7IHJldHVybiBnZXQocGFyZW50LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpOyB9IH0gZWxzZSBpZiAoXCJ2YWx1ZVwiIGluIGRlc2MgJiYgZGVzYy53cml0YWJsZSkgeyByZXR1cm4gZGVzYy52YWx1ZTsgfSBlbHNlIHsgdmFyIGdldHRlciA9IGRlc2MuZ2V0OyBpZiAoZ2V0dGVyID09PSB1bmRlZmluZWQpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSByZXR1cm4gZ2V0dGVyLmNhbGwocmVjZWl2ZXIpOyB9IH07XG5cblx0dmFyIF9pbmhlcml0cyA9IGZ1bmN0aW9uIChzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9O1xuXG5cdHZhciBfY2xhc3NDYWxsQ2hlY2sgPSBmdW5jdGlvbiAoaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfTtcblxuXHR2YXIgQ09ORklHID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oMSkpO1xuXG5cdHZhciBleHRlbmQgPSBhbmd1bGFyLmV4dGVuZDtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChGaWxlRGlyZWN0aXZlKSB7XG5cdCAgICB2YXIgRmlsZVNlbGVjdCA9IChmdW5jdGlvbiAoX0ZpbGVEaXJlY3RpdmUpIHtcblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBDcmVhdGVzIGluc3RhbmNlIG9mIHtGaWxlU2VsZWN0fSBvYmplY3Rcblx0ICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuXHQgICAgICAgICAqL1xuXG5cdCAgICAgICAgZnVuY3Rpb24gRmlsZVNlbGVjdChvcHRpb25zKSB7XG5cdCAgICAgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBGaWxlU2VsZWN0KTtcblxuXHQgICAgICAgICAgICB2YXIgZXh0ZW5kZWRPcHRpb25zID0gZXh0ZW5kKG9wdGlvbnMsIHtcblx0ICAgICAgICAgICAgICAgIC8vIE1hcCBvZiBldmVudHNcblx0ICAgICAgICAgICAgICAgIGV2ZW50czoge1xuXHQgICAgICAgICAgICAgICAgICAgICRkZXN0cm95OiBcImRlc3Ryb3lcIixcblx0ICAgICAgICAgICAgICAgICAgICBjaGFuZ2U6IFwib25DaGFuZ2VcIlxuXHQgICAgICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgICAgIC8vIE5hbWUgb2YgcHJvcGVydHkgaW5zaWRlIHVwbG9hZGVyLl9kaXJlY3RpdmUgb2JqZWN0XG5cdCAgICAgICAgICAgICAgICBwcm9wOiBcInNlbGVjdFwiXG5cdCAgICAgICAgICAgIH0pO1xuXG5cdCAgICAgICAgICAgIF9nZXQoT2JqZWN0LmdldFByb3RvdHlwZU9mKEZpbGVTZWxlY3QucHJvdG90eXBlKSwgXCJjb25zdHJ1Y3RvclwiLCB0aGlzKS5jYWxsKHRoaXMsIGV4dGVuZGVkT3B0aW9ucyk7XG5cblx0ICAgICAgICAgICAgaWYgKCF0aGlzLnVwbG9hZGVyLmlzSFRNTDUpIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5yZW1vdmVBdHRyKFwibXVsdGlwbGVcIik7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgdGhpcy5lbGVtZW50LnByb3AoXCJ2YWx1ZVwiLCBudWxsKTsgLy8gRkYgZml4XG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgX2luaGVyaXRzKEZpbGVTZWxlY3QsIF9GaWxlRGlyZWN0aXZlKTtcblxuXHQgICAgICAgIF9jcmVhdGVDbGFzcyhGaWxlU2VsZWN0LCB7XG5cdCAgICAgICAgICAgIGdldE9wdGlvbnM6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmV0dXJucyBvcHRpb25zXG5cdCAgICAgICAgICAgICAgICAgKiBAcmV0dXJuIHtPYmplY3R8dW5kZWZpbmVkfVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRPcHRpb25zKCkge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgZ2V0RmlsdGVyczoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBSZXR1cm5zIGZpbHRlcnNcblx0ICAgICAgICAgICAgICAgICAqIEByZXR1cm4ge0FycmF5PEZ1bmN0aW9uPnxTdHJpbmd8dW5kZWZpbmVkfVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRGaWx0ZXJzKCkge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgaXNFbXB0eUFmdGVyU2VsZWN0aW9uOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIElmIHJldHVybnMgXCJ0cnVlXCIgdGhlbiBIVE1MSW5wdXRFbGVtZW50IHdpbGwgYmUgY2xlYXJlZFxuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMge0Jvb2xlYW59XG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGlzRW1wdHlBZnRlclNlbGVjdGlvbigpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gISF0aGlzLmVsZW1lbnQuYXR0cihcIm11bHRpcGxlXCIpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBvbkNoYW5nZToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBFdmVudCBoYW5kbGVyXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ2hhbmdlKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBmaWxlcyA9IHRoaXMudXBsb2FkZXIuaXNIVE1MNSA/IHRoaXMuZWxlbWVudFswXS5maWxlcyA6IHRoaXMuZWxlbWVudFswXTtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHRoaXMuZ2V0T3B0aW9ucygpO1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBmaWx0ZXJzID0gdGhpcy5nZXRGaWx0ZXJzKCk7XG5cblx0ICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMudXBsb2FkZXIuaXNIVE1MNSkgdGhpcy5kZXN0cm95KCk7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy51cGxvYWRlci5hZGRUb1F1ZXVlKGZpbGVzLCBvcHRpb25zLCBmaWx0ZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0VtcHR5QWZ0ZXJTZWxlY3Rpb24oKSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucHJvcChcInZhbHVlXCIsIG51bGwpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucmVwbGFjZVdpdGgodGhpcy5lbGVtZW50ID0gdGhpcy5lbGVtZW50LmNsb25lKHRydWUpKTsgLy8gSUUgZml4XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cblx0ICAgICAgICByZXR1cm4gRmlsZVNlbGVjdDtcblx0ICAgIH0pKEZpbGVEaXJlY3RpdmUpO1xuXG5cdCAgICByZXR1cm4gRmlsZVNlbGVjdDtcblx0fTtcblxuXHRtb2R1bGUuZXhwb3J0cy4kaW5qZWN0ID0gW1wiRmlsZURpcmVjdGl2ZVwiXTtcblxuLyoqKi8gfSxcbi8qIDggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdHZhciBfaW50ZXJvcFJlcXVpcmUgPSBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmpbXCJkZWZhdWx0XCJdIDogb2JqOyB9O1xuXG5cdHZhciBfY3JlYXRlQ2xhc3MgPSAoZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIga2V5IGluIHByb3BzKSB7IHZhciBwcm9wID0gcHJvcHNba2V5XTsgcHJvcC5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAocHJvcC52YWx1ZSkgcHJvcC53cml0YWJsZSA9IHRydWU7IH0gT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcyk7IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTtcblxuXHR2YXIgX2dldCA9IGZ1bmN0aW9uIGdldChvYmplY3QsIHByb3BlcnR5LCByZWNlaXZlcikgeyB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBwcm9wZXJ0eSk7IGlmIChkZXNjID09PSB1bmRlZmluZWQpIHsgdmFyIHBhcmVudCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmplY3QpOyBpZiAocGFyZW50ID09PSBudWxsKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gZWxzZSB7IHJldHVybiBnZXQocGFyZW50LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpOyB9IH0gZWxzZSBpZiAoXCJ2YWx1ZVwiIGluIGRlc2MgJiYgZGVzYy53cml0YWJsZSkgeyByZXR1cm4gZGVzYy52YWx1ZTsgfSBlbHNlIHsgdmFyIGdldHRlciA9IGRlc2MuZ2V0OyBpZiAoZ2V0dGVyID09PSB1bmRlZmluZWQpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSByZXR1cm4gZ2V0dGVyLmNhbGwocmVjZWl2ZXIpOyB9IH07XG5cblx0dmFyIF9pbmhlcml0cyA9IGZ1bmN0aW9uIChzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9O1xuXG5cdHZhciBfY2xhc3NDYWxsQ2hlY2sgPSBmdW5jdGlvbiAoaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfTtcblxuXHR2YXIgQ09ORklHID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oMSkpO1xuXG5cdHZhciBleHRlbmQgPSBhbmd1bGFyLmV4dGVuZDtcblx0dmFyIGZvckVhY2ggPSBhbmd1bGFyLmZvckVhY2g7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoRmlsZURpcmVjdGl2ZSkge1xuXHQgICAgdmFyIEZpbGVEcm9wID0gKGZ1bmN0aW9uIChfRmlsZURpcmVjdGl2ZSkge1xuXHQgICAgICAgIC8qKlxuXHQgICAgICAgICAqIENyZWF0ZXMgaW5zdGFuY2Ugb2Yge0ZpbGVEcm9wfSBvYmplY3Rcblx0ICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuXHQgICAgICAgICAqL1xuXG5cdCAgICAgICAgZnVuY3Rpb24gRmlsZURyb3Aob3B0aW9ucykge1xuXHQgICAgICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRmlsZURyb3ApO1xuXG5cdCAgICAgICAgICAgIHZhciBleHRlbmRlZE9wdGlvbnMgPSBleHRlbmQob3B0aW9ucywge1xuXHQgICAgICAgICAgICAgICAgLy8gTWFwIG9mIGV2ZW50c1xuXHQgICAgICAgICAgICAgICAgZXZlbnRzOiB7XG5cdCAgICAgICAgICAgICAgICAgICAgJGRlc3Ryb3k6IFwiZGVzdHJveVwiLFxuXHQgICAgICAgICAgICAgICAgICAgIGRyb3A6IFwib25Ecm9wXCIsXG5cdCAgICAgICAgICAgICAgICAgICAgZHJhZ292ZXI6IFwib25EcmFnT3ZlclwiLFxuXHQgICAgICAgICAgICAgICAgICAgIGRyYWdsZWF2ZTogXCJvbkRyYWdMZWF2ZVwiXG5cdCAgICAgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICAgICAgLy8gTmFtZSBvZiBwcm9wZXJ0eSBpbnNpZGUgdXBsb2FkZXIuX2RpcmVjdGl2ZSBvYmplY3Rcblx0ICAgICAgICAgICAgICAgIHByb3A6IFwiZHJvcFwiXG5cdCAgICAgICAgICAgIH0pO1xuXG5cdCAgICAgICAgICAgIF9nZXQoT2JqZWN0LmdldFByb3RvdHlwZU9mKEZpbGVEcm9wLnByb3RvdHlwZSksIFwiY29uc3RydWN0b3JcIiwgdGhpcykuY2FsbCh0aGlzLCBleHRlbmRlZE9wdGlvbnMpO1xuXHQgICAgICAgIH1cblxuXHQgICAgICAgIF9pbmhlcml0cyhGaWxlRHJvcCwgX0ZpbGVEaXJlY3RpdmUpO1xuXG5cdCAgICAgICAgX2NyZWF0ZUNsYXNzKEZpbGVEcm9wLCB7XG5cdCAgICAgICAgICAgIGdldE9wdGlvbnM6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmV0dXJucyBvcHRpb25zXG5cdCAgICAgICAgICAgICAgICAgKiBAcmV0dXJuIHtPYmplY3R8dW5kZWZpbmVkfVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRPcHRpb25zKCkge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgZ2V0RmlsdGVyczoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBSZXR1cm5zIGZpbHRlcnNcblx0ICAgICAgICAgICAgICAgICAqIEByZXR1cm4ge0FycmF5PEZ1bmN0aW9uPnxTdHJpbmd8dW5kZWZpbmVkfVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRGaWx0ZXJzKCkge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgb25Ecm9wOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIEV2ZW50IGhhbmRsZXJcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25Ecm9wKGV2ZW50KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIHRyYW5zZmVyID0gdGhpcy5fZ2V0VHJhbnNmZXIoZXZlbnQpO1xuXHQgICAgICAgICAgICAgICAgICAgIGlmICghdHJhbnNmZXIpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgICAgICAgICAgIH12YXIgb3B0aW9ucyA9IHRoaXMuZ2V0T3B0aW9ucygpO1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBmaWx0ZXJzID0gdGhpcy5nZXRGaWx0ZXJzKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5fcHJldmVudEFuZFN0b3AoZXZlbnQpO1xuXHQgICAgICAgICAgICAgICAgICAgIGZvckVhY2godGhpcy51cGxvYWRlci5fZGlyZWN0aXZlcy5vdmVyLCB0aGlzLl9yZW1vdmVPdmVyQ2xhc3MsIHRoaXMpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMudXBsb2FkZXIuYWRkVG9RdWV1ZSh0cmFuc2Zlci5maWxlcywgb3B0aW9ucywgZmlsdGVycyk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIG9uRHJhZ092ZXI6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogRXZlbnQgaGFuZGxlclxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvbkRyYWdPdmVyKGV2ZW50KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIHRyYW5zZmVyID0gdGhpcy5fZ2V0VHJhbnNmZXIoZXZlbnQpO1xuXHQgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5faGF2ZUZpbGVzKHRyYW5zZmVyLnR5cGVzKSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICAgICAgICAgICAgfXRyYW5zZmVyLmRyb3BFZmZlY3QgPSBcImNvcHlcIjtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLl9wcmV2ZW50QW5kU3RvcChldmVudCk7XG5cdCAgICAgICAgICAgICAgICAgICAgZm9yRWFjaCh0aGlzLnVwbG9hZGVyLl9kaXJlY3RpdmVzLm92ZXIsIHRoaXMuX2FkZE92ZXJDbGFzcywgdGhpcyk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIG9uRHJhZ0xlYXZlOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIEV2ZW50IGhhbmRsZXJcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25EcmFnTGVhdmUoZXZlbnQpIHtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldCA9PT0gdGhpcy5lbGVtZW50WzBdKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgICAgICAgICAgICB9dGhpcy5fcHJldmVudEFuZFN0b3AoZXZlbnQpO1xuXHQgICAgICAgICAgICAgICAgICAgIGZvckVhY2godGhpcy51cGxvYWRlci5fZGlyZWN0aXZlcy5vdmVyLCB0aGlzLl9yZW1vdmVPdmVyQ2xhc3MsIHRoaXMpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfZ2V0VHJhbnNmZXI6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogSGVscGVyXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRUcmFuc2ZlcihldmVudCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBldmVudC5kYXRhVHJhbnNmZXIgPyBldmVudC5kYXRhVHJhbnNmZXIgOiBldmVudC5vcmlnaW5hbEV2ZW50LmRhdGFUcmFuc2ZlcjsgLy8galF1ZXJ5IGZpeDtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX3ByZXZlbnRBbmRTdG9wOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIEhlbHBlclxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcHJldmVudEFuZFN0b3AoZXZlbnQpIHtcblx0ICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHQgICAgICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfaGF2ZUZpbGVzOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJldHVybnMgXCJ0cnVlXCIgaWYgdHlwZXMgY29udGFpbnMgZmlsZXNcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSB0eXBlc1xuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGF2ZUZpbGVzKHR5cGVzKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKCF0eXBlcykge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgfWlmICh0eXBlcy5pbmRleE9mKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0eXBlcy5pbmRleE9mKFwiRmlsZXNcIikgIT09IC0xO1xuXHQgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZXMuY29udGFpbnMpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVzLmNvbnRhaW5zKFwiRmlsZXNcIik7XG5cdCAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX2FkZE92ZXJDbGFzczoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfYWRkT3ZlckNsYXNzKGl0ZW0pIHtcblx0ICAgICAgICAgICAgICAgICAgICBpdGVtLmFkZE92ZXJDbGFzcygpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfcmVtb3ZlT3ZlckNsYXNzOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW1vdmVPdmVyQ2xhc3MoaXRlbSkge1xuXHQgICAgICAgICAgICAgICAgICAgIGl0ZW0ucmVtb3ZlT3ZlckNsYXNzKCk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9KTtcblxuXHQgICAgICAgIHJldHVybiBGaWxlRHJvcDtcblx0ICAgIH0pKEZpbGVEaXJlY3RpdmUpO1xuXG5cdCAgICByZXR1cm4gRmlsZURyb3A7XG5cdH07XG5cblx0bW9kdWxlLmV4cG9ydHMuJGluamVjdCA9IFtcIkZpbGVEaXJlY3RpdmVcIl07XG5cbi8qKiovIH0sXG4vKiA5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblxuXHR2YXIgX2ludGVyb3BSZXF1aXJlID0gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqW1wiZGVmYXVsdFwiXSA6IG9iajsgfTtcblxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGtleSBpbiBwcm9wcykgeyB2YXIgcHJvcCA9IHByb3BzW2tleV07IHByb3AuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKHByb3AudmFsdWUpIHByb3Aud3JpdGFibGUgPSB0cnVlOyB9IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpOyB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0pKCk7XG5cblx0dmFyIF9nZXQgPSBmdW5jdGlvbiBnZXQob2JqZWN0LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpIHsgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgcHJvcGVydHkpOyBpZiAoZGVzYyA9PT0gdW5kZWZpbmVkKSB7IHZhciBwYXJlbnQgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqZWN0KTsgaWYgKHBhcmVudCA9PT0gbnVsbCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9IGVsc2UgeyByZXR1cm4gZ2V0KHBhcmVudCwgcHJvcGVydHksIHJlY2VpdmVyKTsgfSB9IGVsc2UgaWYgKFwidmFsdWVcIiBpbiBkZXNjICYmIGRlc2Mud3JpdGFibGUpIHsgcmV0dXJuIGRlc2MudmFsdWU7IH0gZWxzZSB7IHZhciBnZXR0ZXIgPSBkZXNjLmdldDsgaWYgKGdldHRlciA9PT0gdW5kZWZpbmVkKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gcmV0dXJuIGdldHRlci5jYWxsKHJlY2VpdmVyKTsgfSB9O1xuXG5cdHZhciBfaW5oZXJpdHMgPSBmdW5jdGlvbiAoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfTtcblxuXHR2YXIgX2NsYXNzQ2FsbENoZWNrID0gZnVuY3Rpb24gKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH07XG5cblx0dmFyIENPTkZJRyA9IF9pbnRlcm9wUmVxdWlyZShfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKTtcblxuXHR2YXIgZXh0ZW5kID0gYW5ndWxhci5leHRlbmQ7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoRmlsZURpcmVjdGl2ZSkge1xuXHQgICAgdmFyIEZpbGVPdmVyID0gKGZ1bmN0aW9uIChfRmlsZURpcmVjdGl2ZSkge1xuXHQgICAgICAgIC8qKlxuXHQgICAgICAgICAqIENyZWF0ZXMgaW5zdGFuY2Ugb2Yge0ZpbGVEcm9wfSBvYmplY3Rcblx0ICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuXHQgICAgICAgICAqL1xuXG5cdCAgICAgICAgZnVuY3Rpb24gRmlsZU92ZXIob3B0aW9ucykge1xuXHQgICAgICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRmlsZU92ZXIpO1xuXG5cdCAgICAgICAgICAgIHZhciBleHRlbmRlZE9wdGlvbnMgPSBleHRlbmQob3B0aW9ucywge1xuXHQgICAgICAgICAgICAgICAgLy8gTWFwIG9mIGV2ZW50c1xuXHQgICAgICAgICAgICAgICAgZXZlbnRzOiB7XG5cdCAgICAgICAgICAgICAgICAgICAgJGRlc3Ryb3k6IFwiZGVzdHJveVwiXG5cdCAgICAgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICAgICAgLy8gTmFtZSBvZiBwcm9wZXJ0eSBpbnNpZGUgdXBsb2FkZXIuX2RpcmVjdGl2ZSBvYmplY3Rcblx0ICAgICAgICAgICAgICAgIHByb3A6IFwib3ZlclwiLFxuXHQgICAgICAgICAgICAgICAgLy8gT3ZlciBjbGFzc1xuXHQgICAgICAgICAgICAgICAgb3ZlckNsYXNzOiBcIm52LWZpbGUtb3ZlclwiXG5cdCAgICAgICAgICAgIH0pO1xuXG5cdCAgICAgICAgICAgIF9nZXQoT2JqZWN0LmdldFByb3RvdHlwZU9mKEZpbGVPdmVyLnByb3RvdHlwZSksIFwiY29uc3RydWN0b3JcIiwgdGhpcykuY2FsbCh0aGlzLCBleHRlbmRlZE9wdGlvbnMpO1xuXHQgICAgICAgIH1cblxuXHQgICAgICAgIF9pbmhlcml0cyhGaWxlT3ZlciwgX0ZpbGVEaXJlY3RpdmUpO1xuXG5cdCAgICAgICAgX2NyZWF0ZUNsYXNzKEZpbGVPdmVyLCB7XG5cdCAgICAgICAgICAgIGFkZE92ZXJDbGFzczoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBBZGRzIG92ZXIgY2xhc3Ncblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYWRkT3ZlckNsYXNzKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hZGRDbGFzcyh0aGlzLmdldE92ZXJDbGFzcygpKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgcmVtb3ZlT3ZlckNsYXNzOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJlbW92ZXMgb3ZlciBjbGFzc1xuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVPdmVyQ2xhc3MoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKHRoaXMuZ2V0T3ZlckNsYXNzKCkpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBnZXRPdmVyQ2xhc3M6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmV0dXJucyBvdmVyIGNsYXNzXG5cdCAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7U3RyaW5nfVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRPdmVyQ2xhc3MoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMub3ZlckNsYXNzO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cblx0ICAgICAgICByZXR1cm4gRmlsZU92ZXI7XG5cdCAgICB9KShGaWxlRGlyZWN0aXZlKTtcblxuXHQgICAgcmV0dXJuIEZpbGVPdmVyO1xuXHR9O1xuXG5cdG1vZHVsZS5leHBvcnRzLiRpbmplY3QgPSBbXCJGaWxlRGlyZWN0aXZlXCJdO1xuXG4vKioqLyB9LFxuLyogMTAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdHZhciBfaW50ZXJvcFJlcXVpcmUgPSBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmpbXCJkZWZhdWx0XCJdIDogb2JqOyB9O1xuXG5cdHZhciBDT05GSUcgPSBfaW50ZXJvcFJlcXVpcmUoX193ZWJwYWNrX3JlcXVpcmVfXygxKSk7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoJHBhcnNlLCBGaWxlVXBsb2FkZXIsIEZpbGVTZWxlY3QpIHtcblxuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHJpYnV0ZXMpIHtcblx0ICAgICAgICAgICAgdmFyIHVwbG9hZGVyID0gc2NvcGUuJGV2YWwoYXR0cmlidXRlcy51cGxvYWRlcik7XG5cblx0ICAgICAgICAgICAgaWYgKCEodXBsb2FkZXIgaW5zdGFuY2VvZiBGaWxlVXBsb2FkZXIpKSB7XG5cdCAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiXFxcIlVwbG9hZGVyXFxcIiBtdXN0IGJlIGFuIGluc3RhbmNlIG9mIEZpbGVVcGxvYWRlclwiKTtcblx0ICAgICAgICAgICAgfVxuXG5cdCAgICAgICAgICAgIHZhciBvYmplY3QgPSBuZXcgRmlsZVNlbGVjdCh7XG5cdCAgICAgICAgICAgICAgICB1cGxvYWRlcjogdXBsb2FkZXIsXG5cdCAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50XG5cdCAgICAgICAgICAgIH0pO1xuXG5cdCAgICAgICAgICAgIG9iamVjdC5nZXRPcHRpb25zID0gJHBhcnNlKGF0dHJpYnV0ZXMub3B0aW9ucykuYmluZChvYmplY3QsIHNjb3BlKTtcblx0ICAgICAgICAgICAgb2JqZWN0LmdldEZpbHRlcnMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gYXR0cmlidXRlcy5maWx0ZXJzO1xuXHQgICAgICAgICAgICB9O1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdH07XG5cblx0bW9kdWxlLmV4cG9ydHMuJGluamVjdCA9IFtcIiRwYXJzZVwiLCBcIkZpbGVVcGxvYWRlclwiLCBcIkZpbGVTZWxlY3RcIl07XG5cbi8qKiovIH0sXG4vKiAxMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0dmFyIF9pbnRlcm9wUmVxdWlyZSA9IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9ialtcImRlZmF1bHRcIl0gOiBvYmo7IH07XG5cblx0dmFyIENPTkZJRyA9IF9pbnRlcm9wUmVxdWlyZShfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKTtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgkcGFyc2UsIEZpbGVVcGxvYWRlciwgRmlsZURyb3ApIHtcblxuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHJpYnV0ZXMpIHtcblx0ICAgICAgICAgICAgdmFyIHVwbG9hZGVyID0gc2NvcGUuJGV2YWwoYXR0cmlidXRlcy51cGxvYWRlcik7XG5cblx0ICAgICAgICAgICAgaWYgKCEodXBsb2FkZXIgaW5zdGFuY2VvZiBGaWxlVXBsb2FkZXIpKSB7XG5cdCAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiXFxcIlVwbG9hZGVyXFxcIiBtdXN0IGJlIGFuIGluc3RhbmNlIG9mIEZpbGVVcGxvYWRlclwiKTtcblx0ICAgICAgICAgICAgfVxuXG5cdCAgICAgICAgICAgIGlmICghdXBsb2FkZXIuaXNIVE1MNSkgcmV0dXJuO1xuXG5cdCAgICAgICAgICAgIHZhciBvYmplY3QgPSBuZXcgRmlsZURyb3Aoe1xuXHQgICAgICAgICAgICAgICAgdXBsb2FkZXI6IHVwbG9hZGVyLFxuXHQgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudFxuXHQgICAgICAgICAgICB9KTtcblxuXHQgICAgICAgICAgICBvYmplY3QuZ2V0T3B0aW9ucyA9ICRwYXJzZShhdHRyaWJ1dGVzLm9wdGlvbnMpLmJpbmQob2JqZWN0LCBzY29wZSk7XG5cdCAgICAgICAgICAgIG9iamVjdC5nZXRGaWx0ZXJzID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIGF0dHJpYnV0ZXMuZmlsdGVycztcblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHR9O1xuXG5cdG1vZHVsZS5leHBvcnRzLiRpbmplY3QgPSBbXCIkcGFyc2VcIiwgXCJGaWxlVXBsb2FkZXJcIiwgXCJGaWxlRHJvcFwiXTtcblxuLyoqKi8gfSxcbi8qIDEyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblxuXHR2YXIgX2ludGVyb3BSZXF1aXJlID0gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqW1wiZGVmYXVsdFwiXSA6IG9iajsgfTtcblxuXHR2YXIgQ09ORklHID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oMSkpO1xuXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKEZpbGVVcGxvYWRlciwgRmlsZU92ZXIpIHtcblxuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHJpYnV0ZXMpIHtcblx0ICAgICAgICAgICAgdmFyIHVwbG9hZGVyID0gc2NvcGUuJGV2YWwoYXR0cmlidXRlcy51cGxvYWRlcik7XG5cblx0ICAgICAgICAgICAgaWYgKCEodXBsb2FkZXIgaW5zdGFuY2VvZiBGaWxlVXBsb2FkZXIpKSB7XG5cdCAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiXFxcIlVwbG9hZGVyXFxcIiBtdXN0IGJlIGFuIGluc3RhbmNlIG9mIEZpbGVVcGxvYWRlclwiKTtcblx0ICAgICAgICAgICAgfVxuXG5cdCAgICAgICAgICAgIHZhciBvYmplY3QgPSBuZXcgRmlsZU92ZXIoe1xuXHQgICAgICAgICAgICAgICAgdXBsb2FkZXI6IHVwbG9hZGVyLFxuXHQgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudFxuXHQgICAgICAgICAgICB9KTtcblxuXHQgICAgICAgICAgICBvYmplY3QuZ2V0T3ZlckNsYXNzID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIGF0dHJpYnV0ZXMub3ZlckNsYXNzIHx8IG9iamVjdC5vdmVyQ2xhc3M7XG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0fTtcblxuXHRtb2R1bGUuZXhwb3J0cy4kaW5qZWN0ID0gW1wiRmlsZVVwbG9hZGVyXCIsIFwiRmlsZU92ZXJcIl07XG5cbi8qKiovIH1cbi8qKioqKiovIF0pXG59KTtcbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFuZ3VsYXItZmlsZS11cGxvYWQuanMubWFwXG5cbi8vIC0tQXV0aG9yIE11cmFnaWppbWFuYSBSaWNoYXJkIDxiZWFzdGFyNDU3QGdtYWlsLmNvbT5cbi8vIHZhciBzeW5jID0gYW5ndWxhci5tb2R1bGUoXCJzeW5jXCIsIFtcIm5nUm91dGVcIixcImFuZ3VsYXJGaWxlVXBsb2FkXCIsXCJpb25pY1wiLFwibmdSZXNvdXJjZVwiLFwidWkuYm9vdHN0cmFwXCIsXCJpbmZpbml0ZS1zY3JvbGxcIl0pO1xuLy8gbW9kdWxlLmV4cG9ydHMgPSBtb25nb29zZS5tb2RlbCgnYXBwQ29uZmlnJywge1xuXG5hbmd1bGFyLm1vZHVsZSgnQXV0aE1hbmFnZXInLFtdKS5zZXJ2aWNlKCdTZXNzaW9uU2VydmljZScsIFtmdW5jdGlvbigpe1xuICAgIHZhciB1c2VySXNBdXRoZW50aWNhdGVkID0gZmFsc2U7XG5cbiAgICB0aGlzLnNldFVzZXJBdXRoZW50aWNhdGVkID0gZnVuY3Rpb24odmFsdWUpe1xuICAgICAgICB1c2VySXNBdXRoZW50aWNhdGVkID0gdmFsdWU7XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0VXNlckF1dGhlbnRpY2F0ZWQgPSBmdW5jdGlvbigpe1xuICAgICAgICByZXR1cm4gdXNlcklzQXV0aGVudGljYXRlZDtcbiAgICB9O1xufV0pO1xuXG52YXIgc3luYyA9IGFuZ3VsYXIubW9kdWxlKFwic3luY1wiLCBbXCJuZ1JvdXRlXCIsXCJhbmd1bGFyRmlsZVVwbG9hZFwiLFwidWkuYm9vdHN0cmFwXCIsXCJ1aS5yb3V0ZXJcIixcImluZmluaXRlLXNjcm9sbFwiLCduZ01hdGVyaWFsJywgJ25nTWVzc2FnZXMnLCAnbWF0ZXJpYWwuc3ZnQXNzZXRzQ2FjaGUnLCduZy1tZmInLCdwZGYnLCduZ0NvbnRleHRNZW51JywnYW5ndWxhci1sb2FkaW5nLWJhcicsJ25nRmlsZVNhdmVyJywnQXV0aE1hbmFnZXInLCduZ0RpYWxvZyddKTtcblxuXG52YXIgTG9nZ2VyPWFuZ3VsYXIubW9kdWxlKFwiTG9nZ2VyXCIsW10pO1xuTG9nZ2VyLnJ1bihbJyRyb290U2NvcGUnLGZ1bmN0aW9uKCRyb290U2NvcGUpe1xuXG4gICAgICAvLyAkcm9vdFNjb3BlLmVuZFBvaW50PSdodHRwczovL3N0cmVhbXVwYm94LmNvbSc7XG4gICAgICAkcm9vdFNjb3BlLmVuZFBvaW50PSdodHRwOi8vc3luY21lLmNvbTo4MDAwJztcbn1dKTtcbndpbmRvdy5yb3V0ZXMgPVxue1xuICAgIFwiL0ZpbGVzXCI6IHtcbiAgICAgICAgdXJsOiBcIi9GaWxlc1wiLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2ZpbGVzLmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyOiAnRmlsZXNDb250cm9sbGVyJyxcbiAgICAgICAgcmVxdWlyZUxvZ2luOiB0cnVlXG4gICAgICB9LFxuICAgICAgXCJwcmV2aWV3XCI6e1xuICAgICAgICB1cmw6ICcvIS86cHJldmlldy86ZXh0ZW5zaW9uLzpvZi86dXNlcicsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvZmlsZVByZXZpZXcuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXIgOiAncHJldmlld0NvbnRyb2xsZXInXG4gICAgICB9LFxuXG4gICAgICBcIi9Hcm91cHNcIjoge1xuICAgICAgICAgIHVybDogXCIvR3JvdXBzXCIsXG4gICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9ncm91cHMuaHRtbCcsXG4gICAgICAgICAgY29udHJvbGxlcjogJ0dyb3VwQ29udHJvbGxlcicsXG4gICAgICAgICAgcmVxdWlyZUxvZ2luOiB0cnVlXG4gICAgICB9XG59O1xuXG5cbnN5bmMucnVuKFsnJHJvb3RTY29wZScsJyRsb2cnLGZ1bmN0aW9uKCRyb290U2NvcGUsJGxvZyl7XG4gICRyb290U2NvcGUuZW5kUG9pbnQ9J2h0dHA6Ly9zeW5jbWUuY29tOjgwMDAnO1xuICAgLy8gJHJvb3RTY29wZS5lbmRQb2ludD0naHR0cHM6Ly9zdHJlYW11cGJveC5jb20nO1xuXG5cbiAgJHJvb3RTY29wZS4kb24oJyRyb3V0ZUNoYW5nZVN0YXJ0JyxmdW5jdGlvbihldmVudCwgbmV4dCwgY3VycmVudCl7XG4gICAgZm9yKHZhciBpIGluIHdpbmRvdy5yb3V0ZXMpIHtcblxuICAgICAgICBpZihuZXh0LmluZGV4T2YoaSkgIT0gLTEpIHtcbiAgICAgICAgICAgIGlmKHdpbmRvdy5yb3V0ZXNbaV0ucmVxdWlyZUxvZ2luICYmICFTZXNzaW9uU2VydmljZS5nZXRVc2VyQXV0aGVudGljYXRlZCgpKSB7XG4gICAgICAgICAgICAgICAgYWxlcnQoXCJZb3UgbmVlZCB0byBiZSBhdXRoZW50aWNhdGVkIHRvIHNlZSB0aGlzIHBhZ2UhXCIpO1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgIH1cbiAgfSk7XG59XSk7XG5zeW5jLnByb3ZpZGVyKHtcblxuICAgICRleGNlcHRpb25IYW5kbGVyOiBmdW5jdGlvbigpe1xuICAgICAgICB2YXIgaGFuZGxlciA9IGZ1bmN0aW9uKGV4Y2VwdGlvbiwgY2F1c2UpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhleGNlcHRpb24pO1xuXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy4kZ2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlcjtcbiAgICAgICAgfTtcbiAgICB9XG59KTtcbnN5bmMuY29uZmlnKFsnJHNjZVByb3ZpZGVyJywnJGh0dHBQcm92aWRlcicsJyRtZFRoZW1pbmdQcm92aWRlcicsJ2NmcExvYWRpbmdCYXJQcm92aWRlcicsZnVuY3Rpb24oJHNjZVByb3ZpZGVyLCRodHRwUHJvdmlkZXIsJG1kVGhlbWluZ1Byb3ZpZGVyLGNmcExvYWRpbmdCYXJQcm92aWRlcikge1xuICAgIGRlbGV0ZSAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydYLVJlcXVlc3RlZC1XaXRoJ107XG4gICAgJGh0dHBQcm92aWRlci5kZWZhdWx0cy5oZWFkZXJzLnBvc3RbJ0FjY2VwdCddID0gJ2FwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdCc7XG4gICAgJGh0dHBQcm92aWRlci5kZWZhdWx0cy5oZWFkZXJzLnBvc3RbJ0FjY2VwdCddID0gJ2FwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdCc7XG4gICAgLy9zZXQgYXV0aG9yaXphdGlvbiBmb3Igb2F1dGgyLjAgZm9yIHByb3RlY3Rpb25cblxuXG4gICAgJGh0dHBQcm92aWRlci5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnYXV0aG9yaXphdGlvbiddID0gJ0JlYXJlciA4RXVxY01Oa0YyeVA1MERpY3B2OWhMUlJwN1dPU2FiUGxDdTIybGlZJztcblxuICAgIC8vICRodHRwUHJvdmlkZXIuZGVmYXVsdHMudXNlWERvbWFpbiA9IHRydWU7XG4gICAgJHNjZVByb3ZpZGVyLmVuYWJsZWQoZmFsc2UpO1xuXG4gICAgY2ZwTG9hZGluZ0JhclByb3ZpZGVyLmluY2x1ZGVCYXIgPSBmYWxzZTtcbn1dKTtcbnN5bmMuY29uZmlnKFsnJHN0YXRlUHJvdmlkZXInLCckdXJsUm91dGVyUHJvdmlkZXInLGZ1bmN0aW9uKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIsJHNjb3BlKXtcbiAgICAgICAgLy8gJHBhcnNlUHJvdmlkZXIudW53cmFwUHJvbWlzZXModHJ1ZSkgO1xuICAgICAgICAgIGZvcih2YXIgcGF0aCBpbiB3aW5kb3cucm91dGVzKSB7XG5cbiAgICAgICAgICAgICAgLy8gaWYobmV4dC5pbmRleE9mKHBhdGgpICE9IC0xKSB7XG4gICAgICAgICAgICAgIC8vICAgICBpZih3aW5kb3cucm91dGVzW3BhdGhdLnJlcXVpcmVMb2dpbiAmJiAhU2Vzc2lvblNlcnZpY2UuZ2V0VXNlckF1dGhlbnRpY2F0ZWQoKSkge1xuICAgICAgICAgICAgICAvLyAgICAgICAgIGFsZXJ0KFwiWW91IG5lZWQgdG8gYmUgYXV0aGVudGljYXRlZCB0byBzZWUgdGhpcyBwYWdlIVwiKTtcbiAgICAgICAgICAgICAgLy8gICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAvLyAgICAgfVxuICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKHBhdGgsIHdpbmRvdy5yb3V0ZXNbcGF0aF0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy9GaWxlcycpO1xuXG59XSk7XG5cbi8vIH0pO1xuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLWRvbmUgd2l0aCBNdXJhZ2lqaW1hbmEgUmljaGFyZCA8YmVhc3RhcjQ1N0BnbWFpbC5jb20+LS0tLS0tLS0tLS0tLS0tLy9cbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1kZWFsIHdpdGggdXNlcidzIGFjdGlvbnMgYW5kIGludGVyYWN0aW9uIHdpdGggb3RoZXIgdXNlcnMtLS0tLS0tLS0tLS0tLS0vL1xuXG47KGZ1bmN0aW9uKHdpbmRvdywgYW5ndWxhciwgdW5kZWZpbmVkKSB7XG5cbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIHZhciBtZmIgPSBhbmd1bGFyLm1vZHVsZSgnbmctbWZiJywgW10pO1xuXG4gIG1mYi5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICAgJHRlbXBsYXRlQ2FjaGUucHV0KCduZy1tZmItbWVudS1kZWZhdWx0LnRwbC5odG1sJyxcbiAgICAgICc8dWwgY2xhc3M9XCJtZmItY29tcG9uZW50LS17e3Bvc2l0aW9ufX0gbWZiLXt7ZWZmZWN0fX1cIicgK1xuICAgICAgJyAgICBkYXRhLW1mYi10b2dnbGU9XCJ7e3RvZ2dsaW5nTWV0aG9kfX1cIiBkYXRhLW1mYi1zdGF0ZT1cInt7bWVudVN0YXRlfX1cIj4nICtcbiAgICAgICcgIDxsaSBjbGFzcz1cIm1mYi1jb21wb25lbnRfX3dyYXBcIj4nICtcbiAgICAgICcgICAgPGEgbmctY2xpY2s9XCJjbGlja2VkKClcIiBuZy1tb3VzZWVudGVyPVwiaG92ZXJlZCgpXCIgbmctbW91c2VsZWF2ZT1cImhvdmVyZWQoKVwiJyArXG4gICAgICAnICAgICAgIG5nLWF0dHItZGF0YS1tZmItbGFiZWw9XCJ7e2xhYmVsfX1cIiBjbGFzcz1cIm1mYi1jb21wb25lbnRfX2J1dHRvbi0tbWFpblwiPicgK1xuICAgICAgJyAgICAgPGkgY2xhc3M9XCJtZmItY29tcG9uZW50X19tYWluLWljb24tLXJlc3Rpbmcge3tyZXN0aW5nfX1cIj48L2k+JyArXG4gICAgICAnICAgICA8aSBjbGFzcz1cIm1mYi1jb21wb25lbnRfX21haW4taWNvbi0tYWN0aXZlIHt7YWN0aXZlfX1cIj48L2k+JyArXG4gICAgICAnICAgIDwvYT4nICtcbiAgICAgICcgICAgPHVsIGNsYXNzPVwibWZiLWNvbXBvbmVudF9fbGlzdFwiIG5nLXRyYW5zY2x1ZGU+JyArXG4gICAgICAnICAgIDwvdWw+JyArXG4gICAgICAnPC9saT4nICtcbiAgICAgICc8L3VsPidcbiAgICApO1xuXG4gICAgJHRlbXBsYXRlQ2FjaGUucHV0KCduZy1tZmItbWVudS1tZC50cGwuaHRtbCcsXG4gICAgICAnPHVsIGNsYXNzPVwibWZiLWNvbXBvbmVudC0te3twb3NpdGlvbn19IG1mYi17e2VmZmVjdH19XCInICtcbiAgICAgICcgICAgZGF0YS1tZmItdG9nZ2xlPVwie3t0b2dnbGluZ01ldGhvZH19XCIgZGF0YS1tZmItc3RhdGU9XCJ7e21lbnVTdGF0ZX19XCI+JyArXG4gICAgICAnICA8bGkgY2xhc3M9XCJtZmItY29tcG9uZW50X193cmFwXCI+JyArXG4gICAgICAnICAgIDxhIG5nLWNsaWNrPVwiY2xpY2tlZCgpXCIgbmctbW91c2VlbnRlcj1cImhvdmVyZWQoKVwiIG5nLW1vdXNlbGVhdmU9XCJob3ZlcmVkKClcIicgK1xuICAgICAgJyAgICAgICBzdHlsZT1cImJhY2tncm91bmQ6IHRyYW5zcGFyZW50OyBib3gtc2hhZG93OiBub25lO1wiJyArXG4gICAgICAnICAgICAgIG5nLWF0dHItZGF0YS1tZmItbGFiZWw9XCJ7e2xhYmVsfX1cIiBjbGFzcz1cIm1mYi1jb21wb25lbnRfX2J1dHRvbi0tbWFpblwiPicgK1xuICAgICAgJyAgICAgPG1kLWJ1dHRvbiBjbGFzcz1cIm1kLWZhYiBtZC1hY2NlbnRcIiBhcmlhLWxhYmVsPXt7bGFiZWx9fSBzdHlsZT1cInBvc2l0aW9uOnJlbGF0aXZlOyBtYXJnaW46IDA7IHBhZGRpbmc6MDtcIj4nICtcbiAgICAgICcgICAgICAgPG1kLWljb24gc3R5bGU9XCJsZWZ0OiAwOyBwb3NpdGlvbjogcmVsYXRpdmU7XCIgbWQtc3ZnLWljb249XCJ7e3Jlc3Rpbmd9fVwiJyArXG4gICAgICAnICAgICAgICAgY2xhc3M9XCJtZmItY29tcG9uZW50X19tYWluLWljb24tLXJlc3RpbmdcIj48L21kLWljb24+JyArXG4gICAgICAnICAgICAgIDxtZC1pY29uIHN0eWxlPVwicG9zaXRpb246cmVsYXRpdmU7XCIgbWQtc3ZnLWljb249XCJ7e2FjdGl2ZX19XCInICtcbiAgICAgICcgICAgICAgICBjbGFzcz1cIm1mYi1jb21wb25lbnRfX21haW4taWNvbi0tYWN0aXZlXCI+PC9tZC1pY29uPicgK1xuICAgICAgJyAgICAgPC9tZC1idXR0b24+JyArXG4gICAgICAnICAgIDwvYT4nICtcbiAgICAgICcgICAgPHVsIGNsYXNzPVwibWZiLWNvbXBvbmVudF9fbGlzdFwiIG5nLXRyYW5zY2x1ZGU+JyArXG4gICAgICAnICAgIDwvdWw+JyArXG4gICAgICAnPC9saT4nICtcbiAgICAgICc8L3VsPidcbiAgICApO1xuXG4gICAgJHRlbXBsYXRlQ2FjaGUucHV0KCduZy1tZmItYnV0dG9uLWRlZmF1bHQudHBsLmh0bWwnLFxuICAgICAgJzxsaT4nICtcbiAgICAgICcgIDxhIGRhdGEtbWZiLWxhYmVsPVwie3tsYWJlbH19XCIgY2xhc3M9XCJtZmItY29tcG9uZW50X19idXR0b24tLWNoaWxkXCI+JyArXG4gICAgICAnICAgIDxpIGNsYXNzPVwibWZiLWNvbXBvbmVudF9fY2hpbGQtaWNvbiB7e2ljb259fVwiPicgK1xuICAgICAgJyAgICA8L2k+JyArXG4gICAgICAnICA8L2E+JyArXG4gICAgICAnPC9saT4nXG4gICAgKTtcblxuICAgICR0ZW1wbGF0ZUNhY2hlLnB1dCgnbmctbWZiLWJ1dHRvbi1tZC50cGwuaHRtbCcsXG4gICAgICAnPGxpPicgK1xuICAgICAgJyAgPGEgaHJlZj1cIlwiIGRhdGEtbWZiLWxhYmVsPVwie3tsYWJlbH19XCIgY2xhc3M9XCJtZmItY29tcG9uZW50X19idXR0b24tLWNoaWxkXCIgJyArXG4gICAgICAnICAgICBzdHlsZT1cImJhY2tncm91bmQ6IHRyYW5zcGFyZW50OyBib3gtc2hhZG93OiBub25lO1wiPicgK1xuICAgICAgJyAgICAgPG1kLWJ1dHRvbiBzdHlsZT1cIm1hcmdpbjogMDtcIiBjbGFzcz1cIm1kLWZhYiBtZC1hY2NlbnRcIiBhcmlhLWxhYmVsPXt7bGFiZWx9fT4nICtcbiAgICAgICcgICAgICAgPG1kLWljb24gbWQtc3ZnLXNyYz1cImltZy9pY29ucy9hbmRyb2lkLnN2Z1wiPjwvbWQtaWNvbj4nICtcbiAgICAgICcgICAgICAgPG1kLWljb24gbWQtc3ZnLWljb249XCJ7e2ljb259fVwiPjwvbWQtaWNvbj4nICtcbiAgICAgICcgICAgIDwvbWQtYnV0dG9uPicgK1xuICAgICAgJyAgPC9hPicgK1xuICAgICAgJzwvbGk+J1xuICAgICk7XG4gIH1dKTtcblxuICBtZmIuZGlyZWN0aXZlKCdtZmJCdXR0b25DbG9zZScsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgcmVxdWlyZTogJ15tZmJNZW51JyxcbiAgICAgIGxpbms6IGZ1bmN0aW9uKCRzY29wZSwgJGVsZW1lbnQsICRhdHRycywgbWZiTWVudUNvbnRyb2xsZXIpIHtcbiAgICAgICAgJGVsZW1lbnQuYmluZCgnY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBtZmJNZW51Q29udHJvbGxlci5jbG9zZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgfTtcblxuICB9KTtcblxuICBtZmIuZGlyZWN0aXZlKCdtZmJNZW51JywgWyckdGltZW91dCcsIGZ1bmN0aW9uKCR0aW1lb3V0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiAnRUEnLFxuICAgICAgdHJhbnNjbHVkZTogdHJ1ZSxcbiAgICAgIHJlcGxhY2U6IHRydWUsXG4gICAgICBzY29wZToge1xuICAgICAgICBwb3NpdGlvbjogJ0AnLFxuICAgICAgICBlZmZlY3Q6ICdAJyxcbiAgICAgICAgbGFiZWw6ICdAJyxcbiAgICAgICAgcmVzdGluZzogJ0ByZXN0aW5nSWNvbicsXG4gICAgICAgIGFjdGl2ZTogJ0BhY3RpdmVJY29uJyxcbiAgICAgICAgbWFpbkFjdGlvbjogJyYnLFxuICAgICAgICBtZW51U3RhdGU6ICc9PycsXG4gICAgICAgIHRvZ2dsaW5nTWV0aG9kOiAnQCdcbiAgICAgIH0sXG4gICAgICB0ZW1wbGF0ZVVybDogZnVuY3Rpb24oZWxlbSwgYXR0cnMpIHtcbiAgICAgICAgcmV0dXJuIGF0dHJzLnRlbXBsYXRlVXJsIHx8ICduZy1tZmItbWVudS1kZWZhdWx0LnRwbC5odG1sJztcbiAgICAgIH0sXG4gICAgICBjb250cm9sbGVyOiBbJyRzY29wZScsICckYXR0cnMnLCBmdW5jdGlvbigkc2NvcGUsICRhdHRycykge1xuICAgICAgICB2YXIgb3BlblN0YXRlID0gJ29wZW4nLFxuICAgICAgICAgIGNsb3NlZFN0YXRlID0gJ2Nsb3NlZCc7XG5cbiAgICAgICAgLy8gQXR0YWNoZWQgdG9nZ2xlLCBvcGVuIGFuZCBjbG9zZSB0byB0aGUgY29udHJvbGxlciB0byBnaXZlIG90aGVyXG4gICAgICAgIC8vIGRpcmVjdGl2ZSBhY2Nlc3NcbiAgICAgICAgdGhpcy50b2dnbGUgPSB0b2dnbGU7XG4gICAgICAgIHRoaXMuY2xvc2UgPSBjbG9zZTtcbiAgICAgICAgdGhpcy5vcGVuID0gb3BlbjtcblxuICAgICAgICAkc2NvcGUuY2xpY2tlZCA9IGNsaWNrZWQ7XG4gICAgICAgICRzY29wZS5ob3ZlcmVkID0gaG92ZXJlZDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0IHRoZSBzdGF0ZSB0byB1c2VyLWRlZmluZWQgdmFsdWUuIEZhbGxiYWNrIHRvIGNsb3NlZCBpZiBub1xuICAgICAgICAgKiB2YWx1ZSBpcyBwYXNzZWQgZnJvbSB0aGUgb3V0c2lkZS5cbiAgICAgICAgICovXG4gICAgICAgIGlmICghJHNjb3BlLm1lbnVTdGF0ZSkge1xuICAgICAgICAgICRzY29wZS5tZW51U3RhdGUgPSBjbG9zZWRTdGF0ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiBvbiB0b3VjaCBkZXZpY2UgQU5EICdob3ZlcicgbWV0aG9kIGlzIHNlbGVjdGVkOlxuICAgICAgICAgKiB3YWl0IGZvciB0aGUgZGlnZXN0IHRvIHBlcmZvcm0gYW5kIHRoZW4gY2hhbmdlIGhvdmVyIHRvIGNsaWNrLlxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKF9pc1RvdWNoRGV2aWNlKCkgJiYgX2lzSG92ZXJBY3RpdmUoKSkge1xuICAgICAgICAgICR0aW1lb3V0KHVzZUNsaWNrKTtcbiAgICAgICAgfVxuXG4gICAgICAgICRhdHRycy4kb2JzZXJ2ZSgnbWVudVN0YXRlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgJHNjb3BlLmN1cnJlbnRTdGF0ZSA9ICRzY29wZS5tZW51U3RhdGU7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGZ1bmN0aW9uIGNsaWNrZWQoKSB7XG4gICAgICAgICAgLy8gSWYgdGhlcmUgaXMgYSBtYWluIGFjdGlvbiwgbGV0J3MgZmlyZSBpdFxuICAgICAgICAgIGlmICgkc2NvcGUubWFpbkFjdGlvbikge1xuICAgICAgICAgICAgJHNjb3BlLm1haW5BY3Rpb24oKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIV9pc0hvdmVyQWN0aXZlKCkpIHtcbiAgICAgICAgICAgIHRvZ2dsZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBmdW5jdGlvbiBob3ZlcmVkKCkge1xuICAgICAgICAgIGlmIChfaXNIb3ZlckFjdGl2ZSgpKSB7XG4gICAgICAgICAgICAvL3RvZ2dsZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogSW52ZXJ0IHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBtZW51LlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gdG9nZ2xlKCkge1xuICAgICAgICAgIGlmICgkc2NvcGUubWVudVN0YXRlID09PSBvcGVuU3RhdGUpIHtcbiAgICAgICAgICAgIGNsb3NlKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG9wZW4oKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBvcGVuKCkge1xuICAgICAgICAgICRzY29wZS5tZW51U3RhdGUgPSBvcGVuU3RhdGU7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBjbG9zZSgpIHtcbiAgICAgICAgICAkc2NvcGUubWVudVN0YXRlID0gY2xvc2VkU3RhdGU7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2hlY2sgaWYgd2UncmUgb24gYSB0b3VjaC1lbmFibGVkIGRldmljZS5cbiAgICAgICAgICogUmVxdWlyZXMgTW9kZXJuaXpyIHRvIHJ1biwgb3RoZXJ3aXNlIHNpbXBseSByZXR1cm5zIGZhbHNlXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBfaXNUb3VjaERldmljZSgpIHtcbiAgICAgICAgICByZXR1cm4gd2luZG93Lk1vZGVybml6ciAmJiBNb2Rlcm5penIudG91Y2g7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBfaXNIb3ZlckFjdGl2ZSgpIHtcbiAgICAgICAgICByZXR1cm4gJHNjb3BlLnRvZ2dsaW5nTWV0aG9kID09PSAnaG92ZXInO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbnZlcnQgdGhlIHRvZ2dsaW5nIG1ldGhvZCB0byAnY2xpY2snLlxuICAgICAgICAgKiBUaGlzIGlzIHVzZWQgd2hlbiAnaG92ZXInIGlzIHNlbGVjdGVkIGJ5IHRoZSB1c2VyXG4gICAgICAgICAqIGJ1dCBhIHRvdWNoIGRldmljZSBpcyBlbmFibGVkLlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gdXNlQ2xpY2soKSB7XG4gICAgICAgICAgJHNjb3BlLiRhcHBseShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRzY29wZS50b2dnbGluZ01ldGhvZCA9ICdjbGljayc7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1dXG4gICAgfTtcbiAgfV0pO1xuXG4gIG1mYi5kaXJlY3RpdmUoJ21mYkJ1dHRvbicsIFtmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVxdWlyZTogJ15tZmJNZW51JyxcbiAgICAgIHJlc3RyaWN0OiAnRUEnLFxuICAgICAgdHJhbnNjbHVkZTogdHJ1ZSxcbiAgICAgIHJlcGxhY2U6IHRydWUsXG4gICAgICBzY29wZToge1xuICAgICAgICBpY29uOiAnQCcsXG4gICAgICAgIGxhYmVsOiAnQCdcbiAgICAgIH0sXG4gICAgICB0ZW1wbGF0ZVVybDogZnVuY3Rpb24oZWxlbSwgYXR0cnMpIHtcbiAgICAgICAgcmV0dXJuIGF0dHJzLnRlbXBsYXRlVXJsIHx8ICduZy1tZmItYnV0dG9uLWRlZmF1bHQudHBsLmh0bWwnO1xuICAgICAgfVxuICAgIH07XG4gIH1dKTtcblxufSkod2luZG93LCBhbmd1bGFyKTtcblxuc3luYy5kaXJlY3RpdmUoJ2xlZnRNZW51JyxmdW5jdGlvbigpe1xuICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0FFJyxcbiAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgIGRhdGE6ICc9JyxcbiAgICAgICAgICAgIHVzZXI6ICc9JyxcbiAgICAgICAgICAgIHR5cGU6ICc9J1xuICAgICAgICB9LFxuICAgICAgICB0ZW1wbGF0ZVVybDogXCJkaXJlY3RpdmVzL2xlZnRNZW51Lmh0bWxcIlxuICAgIH07XG59KTtcbnN5bmMuZGlyZWN0aXZlKCdmZWVkcycsZnVuY3Rpb24oKXtcbiAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdBRScsXG4gICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICBwb3N0czogJz0nLFxuICAgICAgICAgICAgcmVwbGllczogJz0nLFxuICAgICAgICAgICAgY3JlYXRlUG9zdDonPSdcbiAgICAgICAgfSxcbiAgICAgICAgdGVtcGxhdGVVcmw6IFwiZGlyZWN0aXZlcy9taWRkbGVDb250ZW50Lmh0bWxcIlxuICAgIH07XG59KTtcbnN5bmMuZGlyZWN0aXZlKCdoZWFkZXInLGZ1bmN0aW9uKCl7XG4gIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiAnQUUnLFxuICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgZGF0YTogJz0nLFxuICAgICAgICAgICAgdXNlcjogJz0nLFxuICAgICAgICAgICAgdHlwZTogJz0nXG4gICAgICAgIH0sXG4gICAgICAgIHRlbXBsYXRlVXJsOiBcIi4vZGlyZWN0aXZlcy9oZWFkZXIuaHRtbFwiXG5cbiAgICB9O1xufSk7XG5cblxuc3luYy5kaXJlY3RpdmUoJ2tleWJpbmRpbmcnLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgIGludm9rZTogJyYnXG4gICAgICAgIH0sXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWwsIGF0dHIpIHtcbiAgICAgICAgICAgIE1vdXNldHJhcC5iaW5kKGF0dHIub24sIHNjb3BlLmludm9rZSk7XG4gICAgICAgIH1cbiAgICB9O1xufSk7XG5cbnN5bmMuZGlyZWN0aXZlKCdkcm9wcGFibGUnLCBbJ3VzZXJJbnRlcmFjdGlvbk5vdGlmaWNhdGlvbicsJ0ZpbGVzJyxmdW5jdGlvbih1c2VySW50ZXJhY3Rpb25Ob3RpZmljYXRpb24sRmlsZXMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgZHJvcDogJyYnLFxuICAgICAgICAgICAgYmluOiAnPScvLyBwYXJlbnRcbiAgICAgICAgfSxcbiAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQpIHtcbiAgICAgICAgICAgIC8vIGFnYWluIHdlIG5lZWQgdGhlIG5hdGl2ZSBvYmplY3RcbiAgICAgICAgICAgIHZhciBlbCA9IGVsZW1lbnRbMF07XG4gICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgICAnZHJhZ292ZXInLFxuICAgICAgICAgICAgICBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICBlLmRhdGFUcmFuc2Zlci5kcm9wRWZmZWN0ID0gJ21vdmUnO1xuICAgICAgICAgICAgICAgICAgLy8gYWxsb3dzIHVzIHRvIGRyb3BcblxuICAgICAgICAgICAgICAgICAgaWYgKGUucHJldmVudERlZmF1bHQpIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LmFkZCgnb3ZlcicpO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBmYWxzZVxuICAgICAgICAgICk7XG4gICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgICAgICdkcmFnZW50ZXInLFxuICAgICAgICAgICAgICBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoJ292ZXInKTtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgZmFsc2VcbiAgICAgICAgICApO1xuXG4gICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICAgICAgJ2RyYWdsZWF2ZScsXG4gICAgICAgICAgICAgIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZSgnb3ZlcicpO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBmYWxzZVxuICAgICAgICAgICk7XG4gICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICAgICdkcm9wJyxcbiAgICAgICAgICAgICAgICBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gU3RvcHMgc29tZSBicm93c2VycyBmcm9tIHJlZGlyZWN0aW5nLlxuICAgICAgICAgICAgICAgICAgICBpZiAoZS5zdG9wUHJvcGFnYXRpb24pIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QucmVtb3ZlKCdvdmVyJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGJpbklkID0gdGhpcy5pZDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlLmRhdGFUcmFuc2Zlci5nZXREYXRhKCdUZXh0JykpO1xuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnSXRlbSBub3cgaXM6JytpdGVtKTtcblxuXG4gICAgICAgICAgICAgICAgICAgIHRyeXtcbiAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxsIHRoZSBwYXNzZWQgZHJvcCBmdW5jdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBlbmRDaGlsZChpdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbihzY29wZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmbiA9IHNjb3BlLmRyb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJ3VuZGVmaW5lZCcgIT09IHR5cGVvZiBmbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm4oaXRlbS5pZCwgYmluSWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1jYXRjaChlKXtcbiAgICAgICAgICAgICAgICAgICAgICAvL3Rocm93IGVycm9yIHRoYXQgaGFwcGVuIHdoZW4gZmlsZSBpcyBkcm9wcGVkIGluIGl0J3Mgb3duIGxvY2F0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgLy9naXZlIHNvbWUgYWxlcnQgdG8gbm90aWZ5IHdoYXQgaGFwcG5lZFxuICAgICAgICAgICAgICAgICAgICAgIC8vIHRocm93KCBuZXcgRXJyb3IoZSkpXG4gICAgICAgICAgICAgICAgICAgICAgLy8gdXNlckludGVyYWN0aW9uTm90aWZpY2F0aW9uLmVycm9yKFwiRHJvcCBGaWxlIG9uIGZvbGRlciB0byBtb3ZlIGl0IVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBmYWxzZVxuICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxufV0pO1xuXG4vKiBnbG9iYWwgJHdpbmRvdyAqL1xuLyogZ2xvYmFsIExvZ2dlciAqL1xuXG5Mb2dnZXIuY29udHJvbGxlcignbG9naW5Db250cm9sbGVyJyxbJyRzY29wZScsJyRodHRwJywnJHJvb3RTY29wZScsJyR3aW5kb3cnLCBmdW5jdGlvbiAoJHNjb3BlLCRodHRwLCRyb290U2NvcGUsJHdpbmRvdykge1xuICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICAnY3JlZGVkZW50aWFsLW5vdC1mb3VuZCcgICAgICAgOiAnQ3JlZGVudGlhbHMgbm90IGZvdW5kIScsXG4gICAgICAgICdzdWNjZXNzJyAgICAgICAgICAgICAgICAgICAgICA6ICdsb2dnaW5nIGluLi4uJ1xuICAgIH07XG4gICRzY29wZS5sb2dpbiA9IGZ1bmN0aW9uIChpbmZvKVxuICB7XG4gICAgLy9iZWZvcmUgbm90aWZ5IHRoYXQgd2UgYXJlIGxvZ2dpbmdpblxuICAgICQoJy5sb2dpbi1mb3JtLW1haW4tbWVzc2FnZScpLmFkZENsYXNzKCdzaG93IHN1Y2Nlc3MnKS5odG1sKG9wdGlvbnNbJ3N1Y2Nlc3MnXSk7XG4gICAgJGh0dHAucG9zdCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9zZXNzaW9ucycsaW5mbylcbiAgICAuc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICAgICAgaWYocmVzcG9uc2UgPT09XCIxXCIpe1xuICAgICAgICAgICAgUmVkaXJlY3RpbmcoKTtcblxuICAgICAgICB9ZWxzZSBpZihyZXNwb25zZSA9PT0gXCIwXCIpe1xuICAgICAgICAgICAgICQoJy5sb2dpbi1mb3JtLW1haW4tbWVzc2FnZScpLmFkZENsYXNzKCdzaG93IGVycm9yJykuaHRtbChvcHRpb25zWydjcmVkZWRlbnRpYWwtbm90LWZvdW5kJ10pO1xuICAgICAgICB9ZWxzZSBpZihyZXNwb25zZSA9PT0gXCJub3RWZXJpZmllZFwiKXtcbiAgICAgICAgICAgIG5vdFZlcmlmaWVkKCk7XG4gICAgICAgIH1cbiAgICB9KVxuICAgIC5lcnJvcihmdW5jdGlvbihlcnJvcikge1xuICAgICAgICBjb25zb2xlLmxvZygnZXJyb3I6JysgZXJyb3IpO1xuICAgIH0pXG4gICAgZnVuY3Rpb24gbm90VmVyaWZpZWQoKXtcbiAgICAgICAgICR3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvbm90VmVyaWZpZWQnO1xuICAgIH1cbiAgICBmdW5jdGlvbiBSZWRpcmVjdGluZygpe1xuICAgICAgICAkd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL3N5bmMnO1xuICAgIH1cbiAgfVxufV0pO1xuXG5Mb2dnZXIuY29udHJvbGxlcignUmVnaXN0ZXJDb250cm9sbGVyJywgWyckc2NvcGUnLCckcm9vdFNjb3BlJywnJGh0dHAnLGZ1bmN0aW9uICgkc2NvcGUsJHJvb3RTY29wZSwkaHR0cCkge1xuICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICAncGFzc3dvcmQtbm90TWF0Y2gnOiAncGFzc3dvcmQgZG8gbm90IG1hdGNoJyxcbiAgICAgICAgJ1NpZ25VcEluUHJvZ3Jlc3MnIDogJ1dhaXQgd2UgYXJlIHNldHRpbmcgdXAgeW91ciBhY2NvdW50LidcbiAgICB9O1xuICAgICRzY29wZS5yZWdpc3Rlcj1mdW5jdGlvbih1c2VyKXtcbiAgICAgICQoJy5yZWdpc3Rlci1mb3JtLW1haW4tbWVzc2FnZScpLmFkZENsYXNzKCdzaG93IHN1Y2Nlc3MnKS5odG1sKG9wdGlvbnNbJ1NpZ25VcEluUHJvZ3Jlc3MnXSk7XG4gICAgICAgIGlmKCQoJyNwYXNzd29yZCcpLnZhbCgpICE9ICQoJyNwYXNzd29yZC1jb25maXJtJykudmFsKCkpe1xuICAgICAgICAgICQoJy5yZWdpc3Rlci1mb3JtLW1haW4tbWVzc2FnZScpLmFkZENsYXNzKCdzaG93IGVycm9yJykuaHRtbChvcHRpb25zWydwYXNzd29yZC1ub3RNYXRjaCddKTtcbiAgICAgICAgICBzZXRUaW1lb3V0KG1lc3NhZ2VSZW1vdmUsIDIwMDApO1xuICAgICAgICAgIGZ1bmN0aW9uIG1lc3NhZ2VSZW1vdmUoKXtcbiAgICAgICAgICAgICAgJCgnLnJlZ2lzdGVyLWZvcm0tbWFpbi1tZXNzYWdlJykucmVtb3ZlQ2xhc3MoJ3Nob3cgZXJyb3InKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciB1c2VybmFtZT0kKCcjdXNlcm5hbWUnKS52YWwoKTtcbiAgICAgICAgdmFyIGVtYWlsPSQoJyNlbWFpbCcpLnZhbCgpO1xuXG5cbiAgICAgICAgalF1ZXJ5LnBvc3QoJy9zZXNzaW9ucycsIHt1c2VybmFtZTogdXNlcm5hbWUsIHBhc3N3b3JkOnVzZXIucGFzc3dvcmQsIGVtYWlsOmVtYWlsLCBvcHRpb246dXNlci5vcHRpb24sIHBob25lOnVzZXIucGhvbmV9LCBmdW5jdGlvbihkYXRhLCB0ZXh0U3RhdHVzLCB4aHIpIHtcbiAgICAgICAgICAgIGlmKGRhdGEgPT0gMSl7XG4gICAgICAgICAgICAgICAgIFJlZGlyZWN0aW5nKCk7XG4gICAgICAgICAgICB9ZWxzZSBpZihkYXRhID09MCl7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3dlIGFyZSBmaXJlZCB0aGlzIGNhbiBub3QgaGFwcGVuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLmVycm9yKGZ1bmN0aW9uKGVycm9yKSB7XG5cbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGZ1bmN0aW9uIFJlZGlyZWN0aW5nKCl7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24gPSAnL2NoZWNrRW1haWwnO1xuICAgICAgICB9XG4gICAgfVxufV0pO1xuXG5Mb2dnZXIuZGlyZWN0aXZlKCd1bmlxdWVVc2VybmFtZScsIFsnaXNVc2VybmFtZUF2YWlsYWJsZScsZnVuY3Rpb24oaXNVc2VybmFtZUF2YWlsYWJsZSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICAgIHJlcXVpcmU6ICduZ01vZGVsJyxcbiAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBuZ01vZGVsKSB7XG4gICAgICAgICAgICBuZ01vZGVsLiRhc3luY1ZhbGlkYXRvcnMudW5pcXVlVXNlcm5hbWUgPSBpc1VzZXJuYW1lQXZhaWxhYmxlO1xuICAgICAgICB9XG4gICAgfTtcbn1dKTtcbkxvZ2dlci5mYWN0b3J5KCdpc1VzZXJuYW1lQXZhaWxhYmxlJywgWyckcScsJyRodHRwJywnJHJvb3RTY29wZScsZnVuY3Rpb24oJHEsICRodHRwLCRyb290U2NvcGUpIHtcbiAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgJ2J0bi1sb2FkaW5nJzogJzxpIGNsYXNzPVwiZmEgZmEtc3Bpbm5lciBmYS1wdWxzZVwiPjwvaT4nLFxuICAgICAgICAnYnRuLXN1Y2Nlc3MnOiAnPGkgY2xhc3M9XCJmYSBmYS1jaGVja1wiPjwvaT4nLFxuICAgICAgICAnYnRuLWVycm9yJzogJzxpIGNsYXNzPVwiZmEgZmEtcmVtb3ZlXCI+PC9pPicsXG4gICAgICAgICdtc2ctc3VjY2Vzcyc6ICdBbGwgR29vZCEgUmVkaXJlY3RpbmcuLi4nLFxuICAgICAgICAnbXNnLXVzZXJuYW1lLWF2YWlsYWJsZSc6ICdnb29kIHVzZXJuYW1lIGF2YWlsYWJsZSEnLFxuICAgICAgICAnbXNnLXVzZXJuYW1lLXRha2VuJyAgICA6ICdvb3BzIHVzZXJuYW1lIHRha2VuJyxcbiAgICAgICAgJ21zZy1lbWFpbC10YWtlbicgICAgICAgOiAnZW1haWwgdGFrZW4nLFxuICAgICAgICAnbXNnLXlvdXItcGhvbmUtc3VjaycgICA6ICd5b3VyIHBob25lIGlzIG5vdCB2YWxpZCcsXG4gICAgICAgICd1c2VBSkFYJzogdHJ1ZSxcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbih1c2VybmFtZSkge1xuXG4gICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cbiAgICAgICAgJGh0dHAuZ2V0KCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS91c2Vycz91c2VybmFtZT0nICsgdXNlcm5hbWUgKyAnJmFjY2Vzc190b2tlbj1CYzdEV1M3S0tSTHR4bWRkVVpJMVQxbFp1MkoxWWhSOE9MWEdXTlpuJykuc3VjY2VzcyhmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgIGlmKGRhdGE9PSdhdmFpbGFibGUnKXtcbiAgICAgICAgICAgICAgICAkKCcucmVnaXN0ZXItZm9ybS1tYWluLW1lc3NhZ2UnKS5hZGRDbGFzcygnc2hvdyBzdWNjZXNzJykuaHRtbChvcHRpb25zWydtc2ctdXNlcm5hbWUtYXZhaWxhYmxlJ10pO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQobWVzc2FnZVJlbW92ZSwgMjAwMCk7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gbWVzc2FnZVJlbW92ZSgpe1xuICAgICAgICAgICAgICAgICAgICAkKCcucmVnaXN0ZXItZm9ybS1tYWluLW1lc3NhZ2UnKS5yZW1vdmVDbGFzcygnc2hvdyBzdWNjZXNzJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfWVsc2UgaWYoZGF0YT09J3Rha2VuJyl7XG4gICAgICAgICAgICAgICAgJCgnLnJlZ2lzdGVyLWZvcm0tbWFpbi1tZXNzYWdlJykuYWRkQ2xhc3MoJ3Nob3cgZXJyb3InKS5odG1sKG9wdGlvbnNbJ21zZy11c2VybmFtZS10YWtlbiddKTtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KHVzZXJuYW1lVGFrZW4sIDIwMDApO1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHVzZXJuYW1lVGFrZW4oKXtcbiAgICAgICAgICAgICAgICAgICAgJCgnLnJlZ2lzdGVyLWZvcm0tbWFpbi1tZXNzYWdlJykucmVtb3ZlQ2xhc3MoJ3Nob3cgZXJyb3InKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoKTtcbiAgICAgICAgfSkuZXJyb3IoZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgIH1cbn1dKTtcbkxvZ2dlci5kaXJlY3RpdmUoJ3VuaXF1ZUVtYWlsJywgWydpc0VtYWlsQXZhaWxhYmxlJyxmdW5jdGlvbihpc0VtYWlsQXZhaWxhYmxlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgcmVxdWlyZTogJ25nTW9kZWwnLFxuICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIG5nTW9kZWwpIHtcbiAgICAgICAgICAgIG5nTW9kZWwuJGFzeW5jVmFsaWRhdG9ycy51bmlxdWVFbWFpbCA9IGlzRW1haWxBdmFpbGFibGU7XG4gICAgICAgIH1cbiAgICB9O1xufV0pO1xuTG9nZ2VyLmZhY3RvcnkoJ2lzRW1haWxBdmFpbGFibGUnLCBbJyRxJywnJGh0dHAnLCckcm9vdFNjb3BlJyxmdW5jdGlvbiAoJHEsICRodHRwLCAkcm9vdFNjb3BlKSB7XG4gICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgICdidG4tbG9hZGluZyc6ICc8aSBjbGFzcz1cImZhIGZhLXNwaW5uZXIgZmEtcHVsc2VcIj48L2k+JyxcbiAgICAgICAgJ2J0bi1zdWNjZXNzJzogJzxpIGNsYXNzPVwiZmEgZmEtY2hlY2tcIj48L2k+JyxcbiAgICAgICAgJ2J0bi1lcnJvcic6ICc8aSBjbGFzcz1cImZhIGZhLXJlbW92ZVwiPjwvaT4nLFxuICAgICAgICAnbXNnLXN1Y2Nlc3MnOiAnQWxsIEdvb2QhIFJlZGlyZWN0aW5nLi4uJyxcbiAgICAgICAgJ21zZy11c2VybmFtZS1hdmFpbGFibGUnOiAnZ29vZCB1c2VybmFtZSBhdmFpbGFibGUhJyxcbiAgICAgICAgJ21zZy11c2VybmFtZS10YWtlbicgICAgOiAnb29wcyB1c2VybmFtZSB0YWtlbicsXG4gICAgICAgICdtc2ctZW1haWwtdGFrZW4nICAgICAgIDogJ2VtYWlsIHRha2VuJyxcbiAgICAgICAgJ21zZy1lbWFpbC1hdmFpbGFibGUnICAgOiAnZW1haWwgYXZhaWxhYmxlJyxcbiAgICAgICAgJ21zZy15b3VyLXBob25lLXN1Y2snICAgOiAneW91ciBwaG9uZSBpcyBub3QgdmFsaWQnLFxuICAgICAgICAndXNlQUpBWCc6IHRydWUsXG4gICAgfTtcblxuICAgIHJldHVybiBmdW5jdGlvbihlbWFpbCkge1xuICAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuICAgICAgICAkaHR0cC5nZXQoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL3VzZXJzP2VtYWlsPScgKyBlbWFpbCArICcmYWNjZXNzX3Rva2VuPUJjN0RXUzdLS1JMdHhtZGRVWkkxVDFsWnUySjFZaFI4T0xYR1dOWm4nKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpe1xuXG4gICAgICAgICAgICBpZihkYXRhPT0nZW1haWwtYXZhaWxhYmxlJyl7XG4gICAgICAgICAgICAgICAgJCgnLnJlZ2lzdGVyLWZvcm0tbWFpbi1tZXNzYWdlJykuYWRkQ2xhc3MoJ3Nob3cgc3VjY2VzcycpLmh0bWwob3B0aW9uc1snbXNnLWVtYWlsLWF2YWlsYWJsZSddKTtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KG1lc3NhZ2VSZW1vdmUsIDIwMDApO1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG1lc3NhZ2VSZW1vdmUoKXtcbiAgICAgICAgICAgICAgICAgICAgJCgnLnJlZ2lzdGVyLWZvcm0tbWFpbi1tZXNzYWdlJykucmVtb3ZlQ2xhc3MoJ3Nob3cgc3VjY2VzcycpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfWVsc2UgaWYoZGF0YT09J2VtYWlsLXRha2VuJyl7XG4gICAgICAgICAgICAgICAgJCgnLnJlZ2lzdGVyLWZvcm0tbWFpbi1tZXNzYWdlJykuYWRkQ2xhc3MoJ3Nob3cgZXJyb3InKS5odG1sKG9wdGlvbnNbJ21zZy1lbWFpbC10YWtlbiddKTtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KG1lc3NhZ2VFbWFpbFRha2VuLCAyMDAwKTtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBtZXNzYWdlRW1haWxUYWtlbigpe1xuICAgICAgICAgICAgICAgICAgICAkKCcucmVnaXN0ZXItZm9ybS1tYWluLW1lc3NhZ2UnKS5yZW1vdmVDbGFzcygnc2hvdyBlcnJvcicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoKTtcbiAgICAgICAgIH0pLmVycm9yKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgICAgICAgfSk7XG4gICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9O1xufV0pO1xuXG5zeW5jLnNlcnZpY2UoJ0ZldGNoZXInLFsnJGh0dHAnLCckcScsJyRyb290U2NvcGUnLGZ1bmN0aW9uIEZpbGVzICgkaHR0cCwkcSwkcm9vdFNjb3BlKSB7XG4gICAgdGhpcy5mZXRjaCA9IGZ1bmN0aW9uKG9iamVjdCl7XG4gICAgICB2YXIgZGlmZmVyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgLy9kb3duIGVuZHBvaW50IHJldHVybiBhbGwgZmlsZXMgSSBvd25cbiAgICAgICRodHRwLmdldCgkcm9vdFNjb3BlLmVuZFBvaW50ICsnL2FwaS92MS8/K3F1ZXJ5PScrJ3F1ZXJ5K0ZldGNoVXNlcnMnK29iamVjdClcbiAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgICBkaWZmZXJlZC5yZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgIH0pXG4gICAgICAuZXJyb3IoZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgICBkaWZmZXJlZC5yZWplY3QoZXJyb3IpO1xuICAgICAgfSlcbiAgICAgIHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuICAgIH07XG59XSk7XG5cbnN5bmMuc2VydmljZSgnRmlsZXMnLCBbJyRodHRwJywnJHEnLCckcm9vdFNjb3BlJyxmdW5jdGlvbiBGaWxlcyAoJGh0dHAsJHEsJHJvb3RTY29wZSkge1xuICAgIHRoaXMuZ2V0R3JvdXBGaWxlcyA9ZnVuY3Rpb24oZ3JvdXBJZCkge1xuICAgICAgICB2YXIgZGlmZmVyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICAvL2Rvd24gZW5kcG9pbnQgcmV0dXJuIGFsbCBmaWxlcyBJIG93blxuICAgICAgICAkaHR0cC5nZXQoJHJvb3RTY29wZS5lbmRQb2ludCArJy9hcGkvdjEvZ3JvdXBzLycrZ3JvdXBJZCsnL2dyb3VwZmlsZXMnKVxuICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgICAgICBkaWZmZXJlZC5yZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmVycm9yKGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgICAgICBkaWZmZXJlZC5yZWplY3QoZXJyb3IpO1xuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcbiAgICB9O1xuICAgIFxuXG4gICAgdGhpcy5zaW5nbGUgPSBmdW5jdGlvbihmaWxlKXtcbiAgICAgIHZhciBwcm9taXNlID0gJHEuZGVmZXIoKTtcbiAgICAgICRodHRwLmdldCgkcm9vdFNjb3BlLmVuZFBvaW50KyAnL3ByZXZpZXcvJysgZmlsZSlcbiAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgcHJvbWlzZS5yZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgIH0pXG4gICAgICAuZXJyb3IoZnVuY3Rpb24oZXJyKXtcbiAgICAgICAgcHJvbWlzZS5yZWplY3QoZXJyKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHByb21pc2UucHJvbWlzZTtcbiAgICB9O1xuICAgIHRoaXMuZ2V0Qm94RmlsZXMgPSBmdW5jdGlvbigpe1xuICAgICAgICB2YXIgZ3JvdXBJZCA9IDE7Ly9ieSBkZWZhdWx0IHRoaXMgY2FuIGJlIGFueSBudW1iZXJcbiAgICAgICAgdmFyIGRpZmZlcmVkID0gJHEuZGVmZXIoKTtcbiAgICAgICAgLy90aGUgaWRlYSBpcyB0byBnZXQgYSBmaWxlIGVpdGhlciBmcm9tIGdyb3VwcyBvciBpbmRpdmlkdWFsIGFjY291bnQgZ3JvdXAgaXMgb3B0aW9uYWxcbiAgICAgICAgJGh0dHAuZ2V0KCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS9maWxlcy8nK2dyb3VwSWQrJy9ib3hmaWxlcycpXG4gICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgICBkaWZmZXJlZC5yZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmVycm9yKGZ1bmN0aW9uKGVycil7XG4gICAgICAgICAgZGlmZmVyZWQucmVqZWN0KGVycik7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcbiAgICB9O1xuICAgIHRoaXMuZ2V0TWltZVR5cGUgPSBmdW5jdGlvbihmaWxlX25hbWUpe1xuICAgICAgdmFyIHByb21pc2UgPSAkcS5kZWZlcigpO1xuICAgICAgJGh0dHAuZ2V0KCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS9maWxlcy9taW1lVHlwZS8nKyBmaWxlX25hbWUpXG4gICAgICAuc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgICAgcHJvbWlzZS5yZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgIH0pXG4gICAgICAuZXJyb3IoZnVuY3Rpb24oZXJyKXtcbiAgICAgICAgICBwcm9taXNlLnJlamVjdChlcnIpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gcHJvbWlzZS5wcm9taXNlO1xuICAgIH07XG4gICAgdGhpcy5kb3dubG9hZEZpbGUgPSBmdW5jdGlvbihmaWxlX25hbWUpe1xuXG4gICAgICB2YXIgcHJvbWlzZSA9ICRxLmRlZmVyKCk7XG4gICAgICAvL2hhcmQgY29kZWQgYSB1c2VyIFN0cmltVXAhIG5lZWQgdG8gaW5qZWN0IGhpbSBkeWFtaWNhbGx5XG4gICAgICAkaHR0cC5nZXQoJHJvb3RTY29wZS5lbmRQb2ludCsgJy9hcGkvdjEvZmlsZXMvZG93bmxvYWQvJytmaWxlX25hbWUrJy9vZi8nKyAnU3RyaW1VcCcpXG4gICAgICAuc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgIHByb21pc2UucmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICB9KVxuICAgICAgLmVycm9yKGZ1bmN0aW9uKGVycil7XG4gICAgICAgIHByb21pc2UucmVqZWN0KGVycik7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBwcm9taXNlLnByb21pc2U7XG4gICAgfTtcbiAgICByZXR1cm4gdGhpcztcbn1dKTtcblxuc3luYy5zZXJ2aWNlKCdQZW9wbGUnLCBbJyRxJywnJGh0dHAnLCckcm9vdFNjb3BlJyxmdW5jdGlvbiAoJHEsICRodHRwLCAkcm9vdFNjb3BlKSB7XG5cdHRoaXMuZ2V0ICA9IGZ1bmN0aW9uICgpe1xuXHRcdHZhciBkaWZmZXJlZCA9ICRxLmRlZmVyKCk7XG5cdFx0JGh0dHAuZ2V0KCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS9zdWdnZXN0aW9ucycpXG5cdFx0LnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcG9uc2Upe1xuXHRcdFx0ZGlmZmVyZWQucmVzb2x2ZShyZXNwb25zZSk7XG5cdFx0fSlcblx0XHQuZXJyb3IoZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdGRpZmZlcmVkLnJlamVjdChlcnJvcik7XG5cdFx0fSlcblx0XHRyZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcblx0fVxuXHR0aGlzLmFsbElmb2xsb3cgPSBmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIGRpZmZlcmVkID0gJHEuZGVmZXIoKTtcblx0XHQkaHR0cC5nZXQoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL21lL2ZvbGxvd2luZ3MnKVxuXHRcdC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblx0XHRcdGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuXHRcdH0pXG5cdFx0LmVycm9yKGZ1bmN0aW9uKGVycil7XG5cdFx0XHRkaWZmZXJlZC5yZWplY3QoZXJyKTtcblx0XHR9KVxuXHRcdHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuXHR9XG5cdHRoaXMudW5Gb2xsb3cgPSBmdW5jdGlvbihpZCl7XG5cdFx0dmFyIGRpZmZlcmVkID0gJHEuZGVmZXIoKTtcblx0XHQkaHR0cC5kZWxldGUoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL21lL2ZvbGxvd2luZy8nICtpZClcblx0XHQuc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSl7XG5cdFx0XHRkaWZmZXJlZC5yZXNvbHZlKHJlc3BvbnNlKTtcblx0XHR9KVxuXHRcdC5lcnJvcihmdW5jdGlvbihlcnIpe1xuXHRcdFx0ZGlmZmVyZWQucmVqZWN0KGVycik7XG5cdFx0fSlcblx0XHRyZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcblx0fVxuXHR0aGlzLmZvbGxvdyA9IGZ1bmN0aW9uKHBhcmFtKXtcblx0XHR2YXIgZGlmZmVyZWQgPSAkcS5kZWZlcigpO1xuXHRcdCRodHRwLnB1dCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvbWUvZm9sbG93aW5ncycsIHBhcmFtKVxuXHRcdC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblx0XHRcdGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuXHRcdH0pXG5cdFx0LmVycm9yKGZ1bmN0aW9uKGVycm9yKXtcblx0XHRcdGRpZmZlcmVkLnJlamVjdChlcnJvcik7XG5cdFx0fSlcblx0XHRyZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcblx0fVxuXHRyZXR1cm4gdGhpcztcbn1dKTtcblxuc3luYy5zZXJ2aWNlKCdTaGFyZScsWyckbG9nJywnJGh0dHAnLCckcScsJyRyb290U2NvcGUnLCBmdW5jdGlvbiAoJGxvZywkaHR0cCwkcSwkcm9vdFNjb3BlKSB7XG5cdHRoaXMuc2hhcmUgPSBmdW5jdGlvbihzaGFyZWJsZU9iail7XG5cdFx0dmFyIGRpZmZlcmVkID0gJHEuZGVmZXIoKTtcbiAgICAgICAgJGh0dHAucG9zdCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvc2hhcmUnLHNoYXJlYmxlT2JqKVxuICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgICAgICBkaWZmZXJlZC5yZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmVycm9yKGZ1bmN0aW9uKGVycil7XG4gICAgICAgICAgICBkaWZmZXJlZC5yZWplY3QoZXJyKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuXHR9O1xuXHR0aGlzLmdldFVzZXIgPSBmdW5jdGlvbih1c2VyKXtcblxuXHRcdHZhciBkaWZmZXJlZCA9ICRxLmRlZmVyKCk7XG5cdFx0JGh0dHAuZ2V0KCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS9tZS91c2Vycy8nKyB1c2VyKVxuXHRcdC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblx0XHRcdGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuXHRcdH0pXG5cdFx0LmVycm9yKGZ1bmN0aW9uKGVycil7XG5cdFx0XHRkaWZmZXJlZC5yZWplY3QoZXJyKTtcblx0XHR9KTtcblx0XHRyZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcblx0fTtcblx0dGhpcy5maWxlTWltZSA9IGZ1bmN0aW9uKGZpbGUpe1xuXHRcdHZhciBkaWZmZXJlZCA9ICRxLmRlZmVyKCk7XG5cdFx0JGh0dHAuZ2V0KCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS9taW1lVHlwZS8nKyBmaWxlKVxuXHRcdC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblx0XHRcdGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuXHRcdH0pXG5cdFx0LmVycm9yKGZ1bmN0aW9uKGVycil7XG5cdFx0XHRkaWZmZXJlZC5yZWplY3QoZXJyKTtcblx0XHR9KTtcblx0XHRyZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcblx0fTtcbiAgICByZXR1cm4gdGhpcztcbn1dKTtcbnN5bmMuc2VydmljZSgnVXNlcicsIFsnJGh0dHAnLCckcScsJyRyb290U2NvcGUnLGZ1bmN0aW9uIEZpbGVzICgkaHR0cCwkcSwkcm9vdFNjb3BlKSB7XG5cdHRoaXMuaW5mbyA9IGZ1bmN0aW9uKCl7XG5cdFx0dmFyIHByb21pc2UgPSAkcS5kZWZlcigpO1xuXHRcdCRodHRwLmdldCgkcm9vdFNjb3BlLmVuZFBvaW50ICtcIi9hcGkvdjEvdXNlcnMvaW5mb1wiKVxuXHRcdC5zdWNjZXNzKGZ1bmN0aW9uKHJlcyl7XG5cdFx0XHRwcm9taXNlLnJlc29sdmUocmVzKTtcblx0XHR9KVxuXHRcdC5lcnJvcihmdW5jdGlvbigpIHtcblx0XHRcdHByb21pc2UucmVqZWN0KCk7XG5cdFx0fSk7XG5cdFx0cmV0dXJuIHByb21pc2UucHJvbWlzZTtcblx0fTtcblx0dGhpcy5ncm91cHMgPSBmdW5jdGlvbih1c2VyKXtcbiAgICAgIHZhciBkaWZmZXJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAkaHR0cC5nZXQoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL21lL2dyb3VwcycpXG4gICAgICAuc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgIGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgfSlcbiAgICAgIC5lcnJvcihmdW5jdGlvbihlcnIpe1xuICAgICAgICBkaWZmZXJlZC5yZWplY3QoZXJyKTtcbiAgICAgIH0pXG4gICAgICByZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcbiAgICB9XG4gICAgXG5cdHJldHVybiB0aGlzO1xufV0pXG4vKiBnbG9iYWwgc3luYyAqL1xuc3luYy5zZXJ2aWNlKCdOb3RpZmljYXRpb24nLCBbJyRodHRwJywgJyRxJywgJyRyb290U2NvcGUnLCBmdW5jdGlvbiBOb3RpZmljYXRpb24oJGh0dHAsICRxLCAkcm9vdFNjb3BlKSB7XG4gICAgdGhpcy5nZXROb3RpZmljYXRpb24gPSBmdW5jdGlvbiAodXNlcl9pZCkge1xuICAgICAgICB2YXIgZGlmZmVyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICAkaHR0cC5nZXQoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL25vdGlmaWNhdGlvbnMnLCB7Y2FjaGU6IGZhbHNlfSlcbiAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBkaWZmZXJlZC5yZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGRpZmZlcmVkLnByb21pc2U7XG4gICAgfVxuICAgIHRoaXMuY3JlYXRlTm90aWZpY2F0aW9uID0gZnVuY3Rpb24gKE5vdGlmaWNhdGlvbikge1xuICAgICAgICB2YXIgZGlmZmVyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICAkaHR0cC5wb3N0KCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS9ub3RpZmljYXRpb25zJywgTm90aWZpY2F0aW9uKVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgZGlmZmVyZWQucmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGRpZmZlcmVkLnJlamVjdChlcnJvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGRpZmZlcmVkLnByb21pc2U7XG4gICAgfVxuICAgIHRoaXMuZGVsZXRlTm90aWZpY2F0aW9uID0gZnVuY3Rpb24gKG5vdGlmaWNhdGlvbikge1xuICAgICAgICB2YXIgZGlmZmVyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICAkaHR0cC5kZWxldGUoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL25vdGlmaWNhdGlvbnMvJyArIG5vdGlmaWNhdGlvbilcbiAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBkaWZmZXJlZC5yZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGRpZmZlcmVkLnByb21pc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG59XSk7XG5cbnN5bmMuY29udHJvbGxlcignbm90aWZpY2F0aW9uQ29udHJvbGxlcicsIFsnJHNjb3BlJywnTm90aWZpY2F0aW9uJywnJGxvZycsIGZ1bmN0aW9uICgkc2NvcGUsTm90aWZpY2F0aW9uLCRsb2cpIHtcbiAgICAkc2NvcGUuaW5pdCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICRzY29wZS5nZXROb3RpZmljYXRpb24oKTtcbiAgICB9XG4gICAgJHNjb3BlLmNsZWFyTm90aWZpY2F0aW9uID0gZnVuY3Rpb24obm90aWZpY2F0aW9uKXtcblxuXG4gICAgICBOb3RpZmljYXRpb24uY2xlYXJOb3RpZmljYXRpb24obm90aWZpY2F0aW9uKVxuICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAvL2xvYWQgcmVtYWluaW5nIG5vdGlmaWNhdGlvblxuICAgICAgICAkc2NvcGUuZ2V0Tm90aWZpY2F0aW9uKCk7XG4gICAgICB9LGZ1bmN0aW9uKGVycil7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICB9KTtcbiAgICB9XG4gICAgJHNjb3BlLmdldE5vdGlmaWNhdGlvbiA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIE5vdGlmaWNhdGlvbi5nZXROb3RpZmljYXRpb24oKVxuICAgICAgICAudGhlbihmdW5jdGlvbihyZXN1bHQpe1xuICAgICAgICAgICAgLy8gJGxvZy5pbmZvKHJlc3VsdCk7XG4gICAgICAgICAgICAkc2NvcGUubm90aWZpY2F0aW9ucyA9IHJlc3VsdDtcbiAgICAgICAgICAgIFxuICAgICAgICB9LGZ1bmN0aW9uKGVycm9yKXtcbiAgICAgICAgICAgIC8vICRsb2cuaW5mbyhlcnJvcik7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAkc2NvcGUuaW5pdCgpO1xufV0pO1xuc3luYy5kaXJlY3RpdmUoJ25vdGlmeScsW2Z1bmN0aW9uKCl7XG4gIHJldHVybntcbiAgICByZXN0cmljdDonQUUnLFxuICAgIHNjb3BlOntcblxuICAgIH0sXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsLCBpQXR0cnMpe1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICB2YXIgdGl0bGU9J1RoaXMgd2lsbCBiZSB0aXRsZSc7XG4gICAgICAgICAgICAgIHZhciBkZXNjPSdNb3N0IHBvcHVsYXIgYXJ0aWNsZS4nO1xuICAgICAgICAgICAgICB2YXIgdXJsPSdzeW5jLmNvbTo4MDAwJztcbiAgICAgICAgICAgICAgbm90aWZ5QnJvd3Nlcih0aXRsZSxkZXNjLHVybCk7XG4gICAgICAgICAgfSwgMjAwMCk7XG4gICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpe1xuICAgICAgICAgICAgICAgIGlmIChOb3RpZmljYXRpb24ucGVybWlzc2lvbiAhPT0gXCJncmFudGVkXCIpe1xuICAgICAgICAgICAgICAgICAgTm90aWZpY2F0aW9uLnJlcXVlc3RQZXJtaXNzaW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgZnVuY3Rpb24gbm90aWZ5QnJvd3Nlcih0aXRsZSxkZXNjLHVybClcbiAgICAgIHtcbiAgICAgICAgaWYgKCFOb3RpZmljYXRpb24pIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdEZXNrdG9wIG5vdGlmaWNhdGlvbnMgbm90IGF2YWlsYWJsZSBpbiB5b3VyIGJyb3dzZXIuLicpO1xuICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKE5vdGlmaWNhdGlvbi5wZXJtaXNzaW9uICE9PSBcImdyYW50ZWRcIil7XG4gICAgICAgICAgTm90aWZpY2F0aW9uLnJlcXVlc3RQZXJtaXNzaW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgdmFyIG5vdGlmaWNhdGlvbiA9IG5ldyBOb3RpZmljYXRpb24odGl0bGUsIHtcbiAgICAgICAgICAgIGljb246J2h0dHBzOi8vbGgzLmdvb2dsZXVzZXJjb250ZW50LmNvbS8tYUNGaUs0YmFYWDQvVmptR0pvanNRX0kvQUFBQUFBQUFOSmcvaC1zTFZYMU01ekEvczQ4LUljNDIvZWdnc21hbGwucG5nJyxcbiAgICAgICAgICAgIGJvZHk6IGRlc2MsXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBSZW1vdmUgdGhlIG5vdGlmaWNhdGlvbiBmcm9tIE5vdGlmaWNhdGlvbiBDZW50ZXIgd2hlbiBjbGlja2VkLlxuICAgICAgICBub3RpZmljYXRpb24ub25jbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHdpbmRvdy5vcGVuKHVybCk7XG4gICAgICAgIH07XG4gICAgICAgIC8vIENhbGxiYWNrIGZ1bmN0aW9uIHdoZW4gdGhlIG5vdGlmaWNhdGlvbiBpcyBjbG9zZWQuXG4gICAgICAgIG5vdGlmaWNhdGlvbi5vbmNsb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdOb3RpZmljYXRpb24gY2xvc2VkJyk7XG4gICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1dKVxuXG5zeW5jLmZhY3RvcnkoJ3VzZXJJbnRlcmFjdGlvbk5vdGlmaWNhdGlvbicsIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MobWVzc2FnZSwgXCJTdWNjZXNzXCIpO1xuICAgICAgICB9LFxuICAgICAgICB3YXJuOiBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgdG9hc3RyLndhcm5pbmcobWVzc2FnZSwgXCJIZXlcIik7XG4gICAgICAgIH0sXG4gICAgICAgIGluZm86IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgICAgICB0b2FzdHIuaW5mbyhtZXNzYWdlLCBcIkZZSVwiKTtcbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgICAgICB0b2FzdHIuZXJyb3IobWVzc2FnZSwgXCJPaCBOb1wiKTtcbiAgICAgICAgfVxuICAgIH07XG59KTtcblxuc3luYy5mYWN0b3J5KCd1c2VySW50ZXJhY3Rpb25Ob3RpZmljYXRpb24nLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIHRvYXN0ci5zdWNjZXNzKG1lc3NhZ2UsIFwiU3VjY2Vzc1wiKTtcbiAgICAgICAgfSxcbiAgICAgICAgd2FybjogZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIHRvYXN0ci53YXJuaW5nKG1lc3NhZ2UsIFwiSGV5XCIpO1xuICAgICAgICB9LFxuICAgICAgICBpbmZvOiBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgdG9hc3RyLmluZm8obWVzc2FnZSwgXCJGWUlcIik7XG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yOiBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgdG9hc3RyLmVycm9yKG1lc3NhZ2UsIFwiT2ggTm9cIik7XG4gICAgICAgIH1cbiAgICB9O1xufSk7XG5cblxuc3luYy5jb250cm9sbGVyKCd1cGxvYWREaWFsb2dDdHJsJywgWyckc2NvcGUnLCckdWliTW9kYWwnLCckbWREaWFsb2cnLCckbWRNZWRpYScsIGZ1bmN0aW9uICgkc2NvcGUsJHVpYk1vZGFsLCAkbWREaWFsb2csICRtZE1lZGlhKSB7XG5cblx0XHRcdFx0Ly9kZWNsYXJlIGdsb2JhbCBmdW5jdGlvbiBmb3Igc2hvcnRjdXRcblx0XHRcdFx0JHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdCRtZERpYWxvZy5oaWRlKCk7XG5cdFx0XHRcdH07XG5cdFx0ICAgICRzY29wZS5jdXN0b21GdWxsc2NyZWVuID0gJG1kTWVkaWEoJ3hzJykgfHwgJG1kTWVkaWEoJ3NtJyk7XG5cdFx0ICAgICRzY29wZS51cGxvYWQgPSBmdW5jdGlvbihldikge1xuXHRcdCAgICAgICRtZERpYWxvZy5zaG93KHtcblx0XHRcdFx0XHRcdHBhcmVudDogYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LmJvZHkpLFxuXHRcdCAgICAgICAgY29udHJvbGxlcjogRGlhbG9nQ29udHJvbGxlcixcblx0XHQgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvdXBsb2FkLnRwbC5odG1sJyxcblx0XHQgICAgICAgIHBhcmVudDogYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LmJvZHkpLFxuXHRcdCAgICAgICAgdGFyZ2V0RXZlbnQ6IGV2LFxuXHRcdCAgICAgICAgY2xpY2tPdXRzaWRlVG9DbG9zZTpmYWxzZVxuXHRcdCAgICAgIH0pXG5cdFx0ICAgICAgLnRoZW4oZnVuY3Rpb24oYW5zd2VyKSB7XG5cdFx0ICAgICAgICAgICAgJHNjb3BlLnN0YXR1cyA9ICdZb3Ugc2FpZCB0aGUgaW5mb3JtYXRpb24gd2FzIFwiJyArIGFuc3dlciArICdcIi4nO1xuXHRcdCAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcblx0XHQgICAgICAgICAgICAkc2NvcGUuc3RhdHVzID0gJ1lvdSBjYW5jZWxsZWQgdGhlIGRpYWxvZy4nO1xuXHRcdCAgICAgICAgICB9KTtcblx0XHQgICAgfTtcblx0XHRcdFx0ZnVuY3Rpb24gRGlhbG9nQ29udHJvbGxlcigkc2NvcGUsICRtZERpYWxvZykge1xuXHRcdFx0XHQgICRzY29wZS5oaWRlID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCAgICAkbWREaWFsb2cuaGlkZSgpO1xuXHRcdFx0XHQgIH07XG5cdFx0XHRcdCAgJHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHQgICAgJG1kRGlhbG9nLmNhbmNlbCgpO1xuXHRcdFx0XHQgIH07XG5cdFx0XHRcdCAgJHNjb3BlLmFuc3dlciA9IGZ1bmN0aW9uKGFuc3dlcikge1xuXHRcdFx0XHQgICAgJG1kRGlhbG9nLmhpZGUoYW5zd2VyKTtcblx0XHRcdFx0ICB9O1xuXHRcdFx0XHR9XG5cdFx0XHRcdERpYWxvZ0NvbnRyb2xsZXIuJGluamVjdCA9IFtcIiRzY29wZVwiLCBcIiRtZERpYWxvZ1wiXTtcbn1dKTtcbnN5bmMuY29udHJvbGxlcignc2hhcmVDb250cm9sbGVyJywgWyckc2NvcGUnLCckdWliTW9kYWwnLCckbWREaWFsb2cnLCckbWRNZWRpYScsJ3VybFNob3J0ZW5lcicsJ1NoYXJlJywnVXNlcicsIGZ1bmN0aW9uICgkc2NvcGUsJHVpYk1vZGFsLCAkbWREaWFsb2csICRtZE1lZGlhLHVybFNob3J0ZW5lcixTaGFyZSxVc2VyKSB7XG5cblx0Ly9kZWNsYXJlIGdsb2JhbCBmdW5jdGlvbiBmb3Igc2hvcnRjdXRcblx0JHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uKCkge1xuXHRcdCRtZERpYWxvZy5oaWRlKCk7XG5cdH07XG5cdCRzY29wZS5jdXN0b21GdWxsc2NyZWVuID0gJG1kTWVkaWEoJ3hzJykgfHwgJG1kTWVkaWEoJ3NtJyk7XG5cdCRzY29wZS5zaGFyZSA9IGZ1bmN0aW9uKGV2LGZpbGVOYW1lKSB7XG5cblx0XHQkbWREaWFsb2cuc2hvdyh7XG5cdFx0XHRwYXJlbnQ6IGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5ib2R5KSxcblx0XHRcdGNvbnRyb2xsZXI6IERpYWxvZ0NvbnRyb2xsZXIsXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL3NoYXJlLnRwbC5odG1sJyxcblx0XHRcdHBhcmVudDogYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LmJvZHkpLFxuXHRcdFx0dGFyZ2V0RXZlbnQ6IGV2LFxuXHRcdFx0Y2xpY2tPdXRzaWRlVG9DbG9zZTpmYWxzZVxuXHRcdH0pXG5cdFx0LnRoZW4oZnVuY3Rpb24oYW5zd2VyKSB7XG5cdFx0XHRcdFx0JHNjb3BlLnN0YXR1cyA9ICdZb3Ugc2FpZCB0aGUgaW5mb3JtYXRpb24gd2FzIFwiJyArIGFuc3dlciArICdcIi4nO1xuXHRcdFx0XHR9LCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHQkc2NvcGUuc3RhdHVzID0gJ1lvdSBjYW5jZWxsZWQgdGhlIGRpYWxvZy4nO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0ZnVuY3Rpb24gRGlhbG9nQ29udHJvbGxlcigkc2NvcGUsICRtZERpYWxvZykge1xuXHRcdFx0XHRcdC8vIGNvbnNvbGUubG9nKCdzaGFyZWRGaWxlJysgZmlsZU5hbWUpO1xuXHRcdFx0XHRcdCRzY29wZS5nZXRGaWxlID0gZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRcdHJldHVybiAkc2NvcGUuZmlsZT11cmxTaG9ydGVuZXIubWFrZVNob3J0KGZpbGVOYW1lKTtcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdCRzY29wZS5oaWRlID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHQkbWREaWFsb2cuaGlkZSgpO1xuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0JHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0JG1kRGlhbG9nLmNhbmNlbCgpO1xuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0JHNjb3BlLmFuc3dlciA9IGZ1bmN0aW9uKGFuc3dlcikge1xuXHRcdFx0XHRcdFx0JG1kRGlhbG9nLmhpZGUoYW5zd2VyKTtcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9XG5cdFx0XHRcdERpYWxvZ0NvbnRyb2xsZXIuJGluamVjdCA9IFtcIiRzY29wZVwiLCBcIiRtZERpYWxvZ1wiXTtcblxuXHR9O1xuXG5cblxuXHQkc2NvcGUuc2hhcmVGaWxlID0gZnVuY3Rpb24odm0pe1xuXG5cdFx0dmFyIGVtYWlscz12bS5lbWFpbHM7XG5cdFx0dmFyIGVtYWlsX2FycmF5ID0gZW1haWxzLnNwbGl0KCcsJyk7XG5cdFx0dmFyIGk7XG5cdFx0Zm9yICggaT0wOyBpIDwgZW1haWxfYXJyYXkubGVuZ3RoOyBpKysgKSB7XG5cdFx0XHQvL3ZhbGlkYXRlIGVhY2ggZW1haWwgdG8gc2hhcmUgd2l0aFxuXHRcdFx0U2hhcmUuc2hhcmUodm0pXG5cdFx0XHQudGhlbihmdW5jdGlvbihyZXMpe1xuXHRcdFx0XHRjb25zb2xlLmxvZyhyZXMpO1xuXHRcdFx0fSkuY2F0Y2goKTtcblx0XHRcdC8vIGNvbnNvbGUubG9nKGVtYWlsX2FycmF5W2ldKTtcblxuXHRcdH1cblx0fVxuXG59XSk7XG5cbi8qIGdsb2JhbCBzeW5jICovXG4vKipcbiAqICBDcmVhdGVkIGJ5IE11cmFnaWppbWFuYSBSaWNoYXJkIG9uIDEwLzIwLzE1LlxuICogIEJlYXN0YXI0NTdAZ21haWwuY29tICwgc3luY0BnbWFpbC5jb20gLCBjaGVjayB3aXRoIG1lIVxuICovXG4vKkkgdXNlIENhbWVsQ2FzZSB3aGlsZSByZW5hbWluZyBteSBmdW5jdGlvbnMgKi9cbi8qYW5kIGkgdXNlIHNuYWtlIGNhc2Ugd2hpbGUgcmVuYW1pbmcgdmFyaWFibGVzICovXG4vKnBvc3Qgc2VydmljZSAqL1xuXG5zeW5jLnNlcnZpY2UoJ1Bvc3QnLCBbJyRodHRwJywgJyRxJywgJyRyb290U2NvcGUnLCBmdW5jdGlvbiBQb3N0KCRodHRwLCAkcSwgJHJvb3RTY29wZSkge1xuICAgIHRoaXMuZ2V0UG9zdCA9IGZ1bmN0aW9uICh1c2VyX2lkKSB7XG4gICAgICAgIHZhciBkaWZmZXJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgICRodHRwLmdldCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvbWUvcG9zdHM/dXNlcl9pZCcgKyB1c2VyX2lkLCB7Y2FjaGU6IGZhbHNlfSlcbiAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXG4gICAgICAgICAgICAgICAgZGlmZmVyZWQucmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGRpZmZlcmVkLnJlamVjdChlcnJvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGRpZmZlcmVkLnByb21pc2U7XG4gICAgfTtcbiAgICB0aGlzLnBhcnRpY2lwYXRlID0gZnVuY3Rpb24ob2JqKXtcbiAgICAgIHZhciBkaWZmZXJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAkaHR0cC5wdXQoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL21lL3Bvc3RzLycsb2JqKVxuICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICBkaWZmZXJlZC5yZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgIH0pXG4gICAgICAuZXJyb3IoZnVuY3Rpb24oZXJyKXtcbiAgICAgICAgZGlmZmVyZWQucmVqZWN0KGVycik7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuICAgIH07XG4gICAgdGhpcy5jcmVhdGVQb3N0ID0gZnVuY3Rpb24gKHBvc3QpIHtcbiAgICAgICAgdmFyIGRpZmZlcmVkID0gJHEuZGVmZXIoKTtcbiAgICAgICAgJGh0dHAucG9zdCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvbWUvcG9zdHMnLCBwb3N0KVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgZGlmZmVyZWQucmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGRpZmZlcmVkLnJlamVjdChlcnJvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGRpZmZlcmVkLnByb21pc2U7XG4gICAgfTtcbiAgICB0aGlzLmRlbGV0ZVBvc3QgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgdmFyIGRpZmZlcmVkID0gJHEuZGVmZXIoKTtcbiAgICAgICAgJGh0dHAuZGVsZXRlKCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS9tZS9wb3N0cy8nICsgaWQpXG4gICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICBkaWZmZXJlZC5yZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgZGlmZmVyZWQucmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcbiAgICB9O1xuICAgIHJldHVybiB0aGlzO1xufV0pO1xuXG5zeW5jLmNvbnRyb2xsZXIoJ1Bvc3RpbmdDb250cm9sbGVyJywgW1xuICAnJHNjb3BlJyxcbiAgJ1Bvc3QnLFxuICAnJHRpbWVvdXQnLFxuICAnVXNlcicsXG4gICckaW50ZXJ2YWwnLFxuICAnTm90aWZpY2F0aW9uJyxcbiAgLy8gJyRpb25pY0xpc3REZWxlZ2F0ZScsXG4gICckbG9nJyxcbiAgJ3VzZXJJbnRlcmFjdGlvbk5vdGlmaWNhdGlvbicsXG4gIGZ1bmN0aW9uIChcbiAgJHNjb3BlLFxuICBQb3N0LFxuICAkdGltZW91dCxcbiAgVXNlcixcbiAgJGludGVydmFsLFxuICBOb3RpZmljYXRpb24sXG4gICRpb25pY0xpc3REZWxlZ2F0ZSxcbiAgJGxvZyxcbiAgdXNlckludGVyYWN0aW9uTm90aWZpY2F0aW9uXG4pIHtcblxuICAgICRzY29wZS5pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkc2NvcGUucG9zdExvYWRlcigpO1xuICAgICAgICAkc2NvcGUuZ2V0VXNlcigpO1xuXG4gICAgfTtcblxuICAgICRpbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICRzY29wZS5wb3N0TG9hZGVyKCk7XG4gICAgfSwgODAwMCk7XG4gICAgJHNjb3BlLmdldFVzZXIgPWZ1bmN0aW9uKCl7XG5cbiAgICAgIFVzZXIuX2lkKClcbiAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblxuICAgICAgICAkc2NvcGUudXNlciA9IHJlc3BvbnNlO1xuICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgICB9LGZ1bmN0aW9uKGVycil7XG4gICAgICAgIC8vcXVpdCBzbGludGx5XG4gICAgICB9KTtcbiAgICB9O1xuICAgICRzY29wZS5sb2FkTW9yZSA9IGZ1bmN0aW9uKCl7XG5cbiAgICB9O1xuICAgICRzY29wZS5wYXJ0aWNpcGF0ZUludG9Qb3N0ID0gZnVuY3Rpb24ocG9zdCx1c2VyKXtcbiAgICAgIC8vIGNvbnNvbGUubG9nKHVzZXIpO1xuICAgICAgdmFyIG9iaiA9e1xuICAgICAgICAncG9zdF9pZCc6cG9zdCxcbiAgICAgICAgJ3VzZXJfaWQnOnVzZXJcbiAgICAgIH07XG4gICAgICBQb3N0LnBhcnRpY2lwYXRlKG9iailcbiAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgJHNjb3BlLnBvc3RMb2FkZXIoKTtcbiAgICAgIH0sZnVuY3Rpb24oZXJyKXtcbiAgICAgICAgLy9xdWl0IHNsZW50bHlcblxuICAgICAgfSk7XG4gICAgfTtcbiAgICAkc2NvcGUucG9zdExvYWRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJHNjb3BlLmRhdGFMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgUG9zdC5nZXRQb3N0KClcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICh0cmVlKSB7XG5cbiAgICAgICAgICAgICAgICAkc2NvcGUucG9zdHMgPXRyZWU7XG4gICAgICAgICAgICAgICAgLy9uYXZpZ2F0ZSB0cm91Z2ggdHJlZSByZXNwb25zZSB3aGljaCBpcyByZXF1aXJlIG11Y2ggYXR0ZW50aW9uXG4gICAgICAgICAgICAgICAgJHNjb3BlLmZyaWVuZHM9W107XG4gICAgICAgICAgICAgICAgJHNjb3BlLnJlcGxpZXM9W107XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0cmVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0cmVlW2ldLmhhc093blByb3BlcnR5KCdmcmllbmRzJykgJiYgdHJlZVtpXVsncmVwbGllcyddICAmJiB0cmVlW2ldWydmcmllbmRzJ10gKSB7XG4gICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmZyaWVuZHMucHVzaCh0cmVlW2ldLmZyaWVuZHMpO1xuICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5yZXBsaWVzLnB1c2godHJlZVtpXS5yZXBsaWVzKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0cmVlW2ldLmhhc093blByb3BlcnR5KCdmcmllbmRzJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5mcmllbmRzID0gZnJpZW5kcy5jb25jYXQodHJhdmVyc2UodHJlZVtpXS5mcmllbmRzKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVwbGllcyA9IHJlcGxpZXMuY29uY2F0KHRyYXZlcnNlKHRyZWVbaV0ucmVwbGllcykpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgJHNjb3BlLmltYWdlRGVzYyA9IGZ1bmN0aW9uKGluZGV4KXtcbiAgICAgIC8vc2hvdyBpbWFnZXMgd2l0aCBkaWZmZXJlbnQgcGl4ZWxcbiAgICAgIHN3aXRjaCAoaW5kZXgpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgIHJldHVybiAnNjBweCc7XG5cbiAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICByZXR1cm4gXCI2MHB4XCI7XG5cbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICByZXR1cm4gXCI2MHB4XCI7XG5cbiAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICByZXR1cm4gXCI2MHB4XCI7XG5cbiAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICByZXR1cm4gXCI2MHB4XCI7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIFwiNjBweFwiO1xuXG4gICAgICB9XG4gICAgICBjb25zb2xlLmxvZyhpbmRleCk7XG4gICAgfTtcbiAgICAkc2NvcGUuc2hhcmUgPSBmdW5jdGlvbihpZCl7XG4gICAgICAgICRpb25pY0xpc3REZWxlZ2F0ZS5jbG9zZU9wdGlvbkJ1dHRvbnMoKTtcbiAgICAgICAgJGxvZy5pbmZvKGlkKTtcbiAgICB9O1xuICAgICRzY29wZS5jcmVhdGVQb3N0ID0gZnVuY3Rpb24gKHBvc3RpbmcpIHtcbiAgICAgIC8vaWYgaW1hZ2UgaXMgdXBsb2FkZWQgdXBsb2FkZWRcbiAgICAgICAgdmFyIF90aGlzID0geyBtZXNzYWdlOiBwb3N0aW5nIH07XG4gICAgICAgIFBvc3QuY3JlYXRlUG9zdChfdGhpcylcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChwb3N0Q3JlYXRlZCkge1xuICAgICAgICAgICAgICAgICAgJHNjb3BlLm1lc3NhZ2UgPSAnJztcbiAgICAgICAgICAgICAgICAgICRzY29wZS5wb3N0cy5wdXNoKHBvc3RDcmVhdGVkKTtcbiAgICAgICAgICAgICAgICAgIHVzZXJJbnRlcmFjdGlvbk5vdGlmaWNhdGlvbi5zdWNjZXNzKFwiTmV3IFBvc3QgZmVlZCBjcmVhdGVkIVwiKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuXG4gICAgICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmluaXQoKTtcbn1dKTtcbnN5bmMuZGlyZWN0aXZlKCdmZWVkc1VwbG9hZGVyJyxbZnVuY3Rpb24oKXtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0FFJyxcbiAgICByZXBsYWNlOiBmYWxzZSxcbiAgICB0ZW1wbGF0ZVVybDogJ0FwcC9qcy9zY3JpcHRzL3ZpZXdzL2ZlZWRBdHRhY2htZW50Lmh0bWwnLFxuICAgIHNjb3BlOiB7XG4gICAgICBhY3Rpb246ICdAJ1xuICAgIH0sXG4gICAgY29udHJvbGxlcjogWyckc2NvcGUnLCBmdW5jdGlvbiAoJHNjb3BlKSB7XG4gICAgICAkc2NvcGUucHJvZ3Jlc3MgPSAwO1xuICAgICAgJHNjb3BlLmF2YXRhciA9ICcnO1xuICAgICAgJHNjb3BlLnNlbmRGaWxlID0gZnVuY3Rpb24oZWwpIHtcbiAgICAgICAgdmFyICRmb3JtID0gJChlbCkucGFyZW50cygnZm9ybScpO1xuICAgICAgICBpZiAoJChlbCkudmFsKCkgPT09ICcnKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgICRmb3JtLmF0dHIoJ2FjdGlvbicsICRzY29wZS5hY3Rpb24pO1xuICAgICAgICAkc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICRzY29wZS5wcm9ncmVzcyA9IDA7XG4gICAgICAgIH0pO1xuICAgICAgICAkZm9ybS5hamF4U3VibWl0KHtcbiAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgIFx0YmVmb3JlU2VuZDogZnVuY3Rpb24gKHhocikge1xuICAgICAgICBcdFx0eGhyLnNldFJlcXVlc3RIZWFkZXIoJ2F1dGhvcml6YXRpb24nLCAnQmVhcmVyIE9xRmlyUVM0NFJRVGpSdVduaVhqZEhaSlFYZEN1RXg0OXJxOEpZNUEnKTtcbiAgICAgICAgXHR9LFxuICAgICAgICAgIHVwbG9hZFByb2dyZXNzOiBmdW5jdGlvbihldnQsIHBvcywgdG90LCBwZXJjQ29tcGxldGUpIHtcbiAgICAgICAgICAgICRzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIC8vIHVwbG9hZCB0aGUgcHJvZ3Jlc3MgYmFyIGR1cmluZyB0aGUgdXBsb2FkXG4gICAgICAgICAgICAgIC8vICRzY29wZS5wcm9ncmVzcyA9IHBlcmNlbnRDb21wbGV0ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKGV2dCwgc3RhdHVzVGV4dCwgcmVzcG9uc2UsIGZvcm0pIHtcbiAgICAgICAgICAgIC8vIHJlbW92ZSB0aGUgYWN0aW9uIGF0dHJpYnV0ZSBmcm9tIHRoZSBmb3JtXG4gICAgICAgICAgICAkZm9ybS5yZW1vdmVBdHRyKCdhY3Rpb24nKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3BvbnNlLCBzdGF0dXMsIHhociwgZm9ybSkge1xuICAgICAgICAgICAgdmFyIGFyID0gJChlbCkudmFsKCkuc3BsaXQoJ1xcXFwnKSxcbiAgICAgICAgICAgICAgZmlsZW5hbWUgPSAgYXJbYXIubGVuZ3RoLTFdO1xuICAgICAgICAgICAgLy8gcmVtb3ZlIHRoZSBhY3Rpb24gYXR0cmlidXRlIGZyb20gdGhlIGZvcm1cbiAgICAgICAgICAgICRmb3JtLnJlbW92ZUF0dHIoJ2FjdGlvbicpO1xuICAgICAgICAgICAgJHNjb3BlLiRhcHBseShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgJHNjb3BlLmF2YXRhciA9IGZpbGVuYW1lO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgIH1dLFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtLCBhdHRycywgY3RybCkge1xuXG4gICAgICBlbGVtLmZpbmQoJy5mYWtlLXVwbG9hZGVyJykuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgIGVsZW0uZmluZCgnaW5wdXRbdHlwZT1cImZpbGVcIl0nKS5jbGljaygpO1xuICAgICAgfSk7XG5cbiAgICB9XG4gIH07XG59XSk7XG5cbi8qIGdsb2JhbCAkdWliTW9kYWxJbnN0YW5jZSAqL1xuLyogZ2xvYmFsIE1vZGFsSW5zdGFuY2VDdHJsICovXG4vKiBnbG9iYWwgJHVpYk1vZGFsICovXG4vKiBnbG9iYWwgc3luYyAqL1xuLyogZ2xvYmFsIHN5bmMgKi9cbnN5bmMuY29udHJvbGxlcignRmlsZXNDb250cm9sbGVyJyxcbiBbXG5cdCckc2NvcGUnLCdGaWxlcycsJyRsb2cnLCckd2luZG93JywnVXNlcicsJyR1aWJNb2RhbCcsJyRpbnRlcnZhbCcsJ3BkZkRlbGVnYXRlJywnJHRpbWVvdXQnLCckc3RhdGVQYXJhbXMnLCckcm9vdFNjb3BlJywnJGV4Y2VwdGlvbkhhbmRsZXInLCdGZXRjaGVyJywgZnVuY3Rpb24gKFxuXHRcdCRzY29wZSwgRmlsZXMsJGxvZywkd2luZG93LFVzZXIsJHVpYk1vZGFsLCRpbnRlcnZhbCxwZGZEZWxlZ2F0ZSwkdGltZW91dCwkc3RhdGVQYXJhbXMsJHJvb3RTY29wZSwkZXhjZXB0aW9uSGFuZGxlcixGZXRjaGVyKSB7XG5cblx0ICAkc2NvcGUuaW5pdCA9IGZ1bmN0aW9uKCl7XG4gICAgICAvLyBhbGVydCgnaGVyZSBJIGFtIGNhbGxlZCcpO1xuXG4gICAgICAvL2xvYWQgYWxsIGJveCBmaWxlc1xuXHRcdCAgICAkc2NvcGUuYWxsKCk7XG4gICAgICAgICRzY29wZS5jcmF6eSgpO1xuXHQgIH07XG5cblxuXHQgIC8vICRpbnRlcnZhbChmdW5jdGlvbiAoKSB7XG5cdFx0XHQvLyAkc2NvcGUuYWxsKCk7XG4gICAvLyAgfSwgODAwMCk7XG5cbiAgICRzY29wZS5jcmF6eSA9IGZ1bmN0aW9uKCl7XG4gICAgICB2YXIgdXNlcnM9J3t1c2Vyc3tlbWFpbCxpZH19JztcblxuICAgICAgRmV0Y2hlci5mZXRjaCh1c2VycylcbiAgICAgIC50aGVuKGZ1bmN0aW9uKHJlcyl7XG4gICAgICAgICRzY29wZS5jcmF6eSAgPSByZXM7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlcyk7XG5cbiAgICAgIH0sIGZ1bmN0aW9uKGVycm9yKXtcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuXG4gICAgICB9KVxuICAgIH07XG5cdCAkc2NvcGUuYWxsID0gZnVuY3Rpb24oKXtcbiAgICAkc2NvcGUuZGF0YUxvYWRpbmcgPSB0cnVlO1xuXHRcdEZpbGVzLmdldEJveEZpbGVzKClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKHJlcyl7XG5cblx0XHRcdFx0JHNjb3BlLmZpbGVzIFx0PVx0cmVzO1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMpO1xuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3Ipe1xuXHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcik7XG5cdFx0XHR9KVxuICAgICAgLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICRzY29wZS5kYXRhTG9hZGluZyA9IGZhbHNlO1xuICAgICB9KTtcblx0IH07XG4gICRzY29wZS5maWxlVHlwZSAgPSBmdW5jdGlvbih0eXBlKSB7XG5cbiAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlICdwZGYnOlxuICAgICAgICAgIHJldHVybiAnaW1nL3BkZi5wbmcnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdmb2xkZXInOlxuICAgICAgICAgIHJldHVybiAnaW1nL3VuaXZlcnNhbF9mb2xkZXIucG5nJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnZm9sZGVyKyc6XG4gICAgICAgICAgcmV0dXJuICdpbWcvQWRkX2ZvbGRlci5wbmcnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdwaHAnOlxuICAgICAgICAgIHJldHVybiAnaW1nL2NvZGUucG5nJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAndHh0JzpcbiAgICAgICAgcmV0dXJuICdpbWcvY29kZS5wbmcnO1xuICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnZG9jeCc6XG4gICAgICAgICAgcmV0dXJuICdpbWcvd29yZC5wbmcnO1xuICAgICAgICBjYXNlICdqcGcnOlxuICAgICAgICAgIHJldHVybiAnZmEgZmEtaW1hZ2UnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdwbmcnOlxuICAgICAgICAgIHJldHVybiAnaW1nL3ZpZGVvLnBuZyc7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2pwZWcnOlxuICAgICAgICAgICAgcmV0dXJuICdpbWcvdW5pdmVyc2FsX2ZvbGRlci5wbmcnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICd6aXAnOlxuICAgICAgICAgcmV0dXJuICdpbWcvemlwLnBuZyc7XG4gICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuICdpbWcvdW5pdmVyc2FsX2ZvbGRlci5wbmcnO1xuICAgICAgfVxuICB9O1xuXG5cdCRzY29wZS5pbml0KCk7XG59XSk7XG5cbnN5bmMuZGlyZWN0aXZlKCdkcmFnZ2FibGUnLCBmdW5jdGlvbigpIHtcblxuICAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0FFJyxcbiAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XG4gICAgICAgICAgIHZhciBlbCA9IGVsZW1lbnRbMF07XG5cbiAgICAgICAgICAgIGVsLmRyYWdnYWJsZSA9IHRydWU7XG5cbiAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgICAgICAgJ2RyYWdzdGFydCcsXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2RyYWcgZXZlbnQgc3RhcnRlZCcpO1xuICAgICAgICAgICAgICAgICAgICBlLmRhdGFUcmFuc2Zlci5lZmZlY3RBbGxvd2VkID0gJ21vdmUnO1xuICAgICAgICAgICAgICAgICAgICBlLmRhdGFUcmFuc2Zlci5zZXREYXRhKCdUZXh0JywgdGhpcy5pZCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LmFkZCgnZHJhZycpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBmYWxzZVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICAgICAgICAnZHJhZ2VuZCcsXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZHJhZyBldmVudCByZWxlYXNlZCcpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5yZW1vdmUoJ2RyYWcnKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZmFsc2VcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9O1xufSk7XG5cblxuc3luYy5jb250cm9sbGVyKCdEcmFnRHJvcEN0cmwnLCBbJyRzY29wZScsJ0ZpbGVzJywnJGludGVydmFsJyxmdW5jdGlvbigkc2NvcGUsRmlsZXMsJGludGVydmFsKSB7XG5cblxuICAgICRzY29wZS5oYW5kbGVEcm9wID0gZnVuY3Rpb24oKSB7XG4gICAgICAvLyAxKWlmIG1vdmVkIG9ubHkgd2hlbiBpdCByZWFjaCBvbiBmb2xkZXIgYWxsb3cgbW92ZVxuICAgICAgLy8gMil0YWtlIHRoIGlkIG9mIGZpbGUgbW92ZWQgYW5kIHRha2UgaWQgb2YgZm9sZGVyIG1vdmUgZmlsZSBpbnRvIGZvbGRlclxuXG4gICAgICAgLy9tb3ZlIHRoZSBpdGVtIGludG8gd2hlcmUgaXQgaXMgZHJvcGVkXG4gICAgICAgLy90aGUgZmlyc3QgdGhpbmcgaGVyZSBpcyB0byByZWNhbGN1bGF0ZSB0aGUgYXJyYXkgdG8ga2VlcCB0aGUgYXJyYW5nZW1lbnQgaW50YWN0XG5cblxuICAgIH1cbn1dKTtcblxuc3luYy5jb250cm9sbGVyKCdwcmV2aWV3Q29udHJvbGxlcicsXG4gW1xuXHQnJHNjb3BlJywncGRmRGVsZWdhdGUnLCckdGltZW91dCcsJyRzdGF0ZVBhcmFtcycsJyRyb290U2NvcGUnLCckZXhjZXB0aW9uSGFuZGxlcicsJ0ZpbGVzJywgJ0ZpbGVTYXZlcicsJ0Jsb2InLGZ1bmN0aW9uIChcblx0XHQkc2NvcGUscGRmRGVsZWdhdGUsJHRpbWVvdXQsJHN0YXRlUGFyYW1zLCRyb290U2NvcGUsJGV4Y2VwdGlvbkhhbmRsZXIsRmlsZXMsRmlsZVNhdmVyLCBCbG9iKSB7XG5cbiAgICAgIC8vZ2V0IG1pbWUgdHlwZSBvZiBhbnlGaWxlIHRoYXQgY29tZXMgaW4gbXkgaG9vZCFcblxuICAgICAgXG5cbiAgICAgIGlmKCRzdGF0ZVBhcmFtcy5wcmV2aWV3ICYmICRzdGF0ZVBhcmFtcy5leHRlbnNpb24gPT0gJ3BkZicpe1xuICAgICAgICAkc2NvcGUucHJldmlld2FibGUgPSB0cnVlO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy9hIHVzZXIgU3RyaW1VcCBpcyBpbmplY3RlZCBpbiBiZWxsb3cgdXJsIGl0IHNob3VsZCBiZSBkeW5hbWljIGluIGZ1dHVyZSFcbiAgICAgICAgICAgICRzY29wZS5wZGZVcmwgPSAkcm9vdFNjb3BlLmVuZFBvaW50KyAnL3ByZXZpZXcvJysgJHN0YXRlUGFyYW1zLnByZXZpZXcrJy9vZi8nKydTdHJpbVVwJztcblxuICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcGRmRGVsZWdhdGUuJGdldEJ5SGFuZGxlKCdteS1wZGYtY29udGFpbmVyJykuem9vbUluKDAuNSk7XG4gICAgICAgICAgICB9LCAzMDAwKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuXG4gICAgICAgICAgIHRocm93KCBuZXcgRXJyb3IoZSkpXG4gICAgICAgIH1cbiAgICAgIH1lbHNlIGlmKCRzdGF0ZVBhcmFtcy5wcmV2aWV3ICYmICRzdGF0ZVBhcmFtcy5leHRlbnNpb24gPT0gJ2pwZyd8fCRzdGF0ZVBhcmFtcy5leHRlbnNpb24gPT0gJ3BuZycpe1xuICAgICAgICAkc2NvcGUuZmlsZV9uYW1lID0gJHN0YXRlUGFyYW1zLnByZXZpZXc7XG4gICAgICAgICRzY29wZS5wcmV2aWV3YWJsZSA9IGZhbHNlO1xuICAgICAgICAvL2FzIGJ5IG5vdyBpbWFnZXMgYXJlIG5vdCByZWFkeSB0byBiZSBwcmV2aWV3ZWQgc28gc2V0IGl0IHRvIGZhbHNlIXByb3ZpZGUgb25seSBvcHRpb24gdG8gZG93bmxvYWQgdGhlbSFcbiAgICAgICAgICAvLyAkc2NvcGUucHJldmlld2FibGUgPSBmYWxzZTtcbiAgICAgICAgICAvLyBGaWxlcy5zaW5nbGUoJHN0YXRlUGFyYW1zLnByZXZpZXcpXG4gICAgICAgICAgLy8gLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgIC8vICAgJHNjb3BlLmltYWdlUHJldmlldyA9IHJlc3BvbnNlO1xuICAgICAgICAgIC8vIH0sZnVuY3Rpb24oZXJyKXtcbiAgICAgICAgICAvLyAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgLy8gfSk7XG4gICAgICB9ZWxzZSB7XG4gICAgICAgIC8vc2VuZCBhIGZpbGVuYW1lIHRvIGEgZG93bmxvYWQgYnV0dG9uXG4gICAgICAgICRzY29wZS5maWxlX25hbWUgPSAkc3RhdGVQYXJhbXMucHJldmlldztcbiAgICAgICAgJHNjb3BlLnByZXZpZXdhYmxlID0gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgICRzY29wZS5nb05leHQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAkc2NvcGUuaW5jcmVtZW50ID0gMTtcbiAgICAgICAgICBwZGZEZWxlZ2F0ZS4kZ2V0QnlIYW5kbGUoJ215LXBkZi1jb250YWluZXInKS5uZXh0KCRzY29wZS5pbmNyZW1lbnQrMSk7XG4gICAgICB9O1xuICAgICAgLy90aGlzIG9wdGlvbiBkb3duIGhlcmUgb2YgZG93bmxvYWRpbmcgYSBmaWxlIHdhcyBuaWNlIGJ1dCBzdGlsbCBoYXZlIHNvbWUgZHJvd2JhY2tcblxuICAgICAgLy8gJHNjb3BlLmRvd25sb2FkID0gZnVuY3Rpb24oZmlsZV9uYW1lKXtcblxuICAgICAgLy8gICBGaWxlcy5kb3dubG9hZEZpbGUoZmlsZV9uYW1lKVxuICAgICAgLy8gICAudGhlbihmdW5jdGlvbihmaWxlX3dyaXRlbil7XG4gICAgICAgICAgICBcbiAgICAgIC8vICAgICBGaWxlcy5nZXRNaW1lVHlwZSgkc3RhdGVQYXJhbXMucHJldmlldylcbiAgICAgIC8vICAgICAgIC50aGVuKGZ1bmN0aW9uKG1pbWVUeXBlKXtcblxuICAgICAgLy8gICAgICAgICB2YXIgYmxvYiA9IG5ldyBCbG9iKFtmaWxlX3dyaXRlbl0sIHtcbiAgICAgIC8vICAgICAgICAgICAgIHR5cGU6IG1pbWVUeXBlLFxuICAgICAgLy8gICAgICAgICB9KTtcbiAgICAgIC8vICAgICAgICAgRmlsZVNhdmVyLnNhdmVBcyhibG9iLCAkc3RhdGVQYXJhbXMucHJldmlldyk7XG5cbiAgICAgIC8vICAgICAgIH0sZnVuY3Rpb24oZXJyKXtcbiAgICAgIC8vICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIC8vICAgICAgIH0pO1xuXG4gICAgICAgICAgXG5cbiAgICAgIC8vICAgfSxmdW5jdGlvbihlcnIpe1xuICAgICAgLy8gICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAvLyAgIH0pO1xuICAgICAgLy8gfTtcbiAgICAgICRzY29wZS5nb1ByZXYgPSBmdW5jdGlvbihwYWdlKXtcbiAgICAgICAgICBwZGZEZWxlZ2F0ZS4kZ2V0QnlIYW5kbGUoJ215LXBkZi1jb250YWluZXInKS5wcmV2KCRzY29wZS5pbmNyZW1lbnQtMSk7XG4gICAgICB9O1xufV0pO1xuXG5zeW5jLmRpcmVjdGl2ZSgnZmlsZURvd25sb2FkJywgW2Z1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICAgICAgICByZXBsYWNlOiB0cnVlLFxuICAgICAgICAgICAgdGVtcGxhdGU6ICc8YnV0dG9uIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0XCIgZGF0YS1uZy1jbGljaz1cImRvd25sb2FkKClcIj48c3BhbiBjbGFzcz1cIlwiPjwvc3Bhbj5Eb3dubG9hZDwvYnV0dG9uPicsXG4gICAgICAgICAgICBjb250cm9sbGVyOiBbJyRyb290U2NvcGUnLCAnJHNjb3BlJywgJyRlbGVtZW50JywgJyRhdHRycycsICckdGltZW91dCcsIGZ1bmN0aW9uICgkcm9vdFNjb3BlLCAkc2NvcGUsICRlbGVtZW50LCAkYXR0cnMsICR0aW1lb3V0KSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnByb2dyZXNzID0gMDtcblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHByZXBhcmUodXJsKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGRpYWxvZ3Mud2FpdChcIlBsZWFzZSB3YWl0XCIsIFwiWW91ciBkb3dubG9hZCBzdGFydHMgaW4gYSBmZXcgc2Vjb25kcy5cIiwgJHNjb3BlLnByb2dyZXNzKTtcbiAgICAgICAgICAgICAgICAgICAgZmFrZVByb2dyZXNzKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHN1Y2Nlc3ModXJsKSB7XG4gICAgICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnZGlhbG9ncy53YWl0LmNvbXBsZXRlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGVycm9yKHJlc3BvbnNlLCB1cmwpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZGlhbG9ncy5lcnJvcihcIkNvdWxkbid0IHByb2Nlc3MgeW91ciBkb3dubG9hZCFcIik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZmFrZVByb2dyZXNzKCkge1xuICAgICAgICAgICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnByb2dyZXNzIDwgOTUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucHJvZ3Jlc3MgKz0gKDk2IC0gJHNjb3BlLnByb2dyZXNzKSAvIDI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdkaWFsb2dzLndhaXQucHJvZ3Jlc3MnLCB7ICdwcm9ncmVzcyc6ICRzY29wZS5wcm9ncmVzcyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWtlUHJvZ3Jlc3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSwgMjUwKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAkc2NvcGUuZG93bmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wcm9ncmVzcyA9IDA7XG4gICAgICAgICAgICAgICAgICAgICQuZmlsZURvd25sb2FkKCdodHRwOi8vc3luY21lLmNvbTo4MDAwL2FwaS92MS9maWxlcy9kb3dubG9hZC9waHB4Rm5saGVEVkU1ajVtY1ZEWC5wbmcvb2YvU3RyaW1VcD9hY2Nlc3NfdG9rZW49QmM3RFdTN0tLUkx0eG1kZFVaSTFUMWxadTJKMVloUjhPTFhHV05abicsIHsgcHJlcGFyZUNhbGxiYWNrOiBwcmVwYXJlLCBzdWNjZXNzQ2FsbGJhY2s6IHN1Y2Nlc3MsIGZhaWxDYWxsYmFjazogZXJyb3IgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfV1cbiAgICAgICAgfVxufV0pO1xuXG4vKiBnbG9iYWwgc3luYyAqL1xuXCJ1c2Ugc3RyaWN0XCI7XG5zeW5jLmNvbnRyb2xsZXIoJ1Blb3BsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsJ1Blb3BsZScsZnVuY3Rpb24gKCRzY29wZSwgUGVvcGxlKSB7XG5cdFx0JHNjb3BlLmluaXQgPSBmdW5jdGlvbigpe1xuXHRcdFx0JHNjb3BlLmdldFBlb3BsZVRvRm9sbG93KCk7XG5cdFx0fVxuXHRcdCRzY29wZS5nZXRQZW9wbGVUb0ZvbGxvdyAgPSBmdW5jdGlvbigpe1xuXHRcdFx0UGVvcGxlLmdldCgpXG5cdFx0XHQudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG5cdFx0XHRcdFxuXHRcdFx0XHQkc2NvcGUucGVvcGxlID0gcmVzcG9uc2U7XG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcil7XG5cblx0XHRcdH0pXG5cdFx0fVxuXHRcdCRzY29wZS4kb24oJ2ZvbGxvd01lbWJlcicsZnVuY3Rpb24oZXZlbnQscGFyYW1zKXtcblx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRQZW9wbGUuZm9sbG93KHBhcmFtcylcblx0XHRcdC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblx0XHRcdFx0Ly9jb25zb2xlLmxvZyhyZXNwb25zZSk7XG5cdFx0XHRcdCRzY29wZS5nZXRQZW9wbGVUb0ZvbGxvdygpO1xuXHRcdFx0fSxmdW5jdGlvbihlcnJvcil7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGVycm9yKTtcblx0XHRcdH0pXG5cdFx0fSk7XG5cdFx0JHNjb3BlLmZvbGxvdyA9IGZ1bmN0aW9uKGlkKXtcblx0XHRcdHZhciBmb2xsb3cgPXtpZDogaWQsIG9wdGlvbjonYWRkUGVvcGxlJ307XG5cdFx0XHQkc2NvcGUuJGVtaXQoXCJmb2xsb3dNZW1iZXJcIiwgZm9sbG93KTtcblx0XHR9XG5cdFx0JHNjb3BlLmluaXQoKTtcbn1dKTtcblxuLyogZ2xvYmFsIEZpbGVzICovXG4vKiBnbG9iYWwgc3luYyAqL1xuLyogZ2xvYmFsICRzY29wZSAqL1xuLyogZ2xvYmFsIGFuZ3VsYXIgKi9cbi8qQXV0aG9yIE11cmFnaWppbWFuYSBGb3VuZGVyICYgQ0VPIG9mIHN5bmMgY2FsbCBoaW0gb24gU3RyaW1VcEBnbWFpbC5jb20qL1xuXG5zeW5jLnNlcnZpY2UoJ0dyb3VwJywgW1xuXHQnJGh0dHAnLFxuXHQnJHJvb3RTY29wZScsXG5cdCckcScsZnVuY3Rpb24gR3JvdXAgKFxuXHRcdCRodHRwLFxuXHRcdCRyb290U2NvcGUsXG5cdFx0JHEpIHtcblx0dGhpcy5jcmVhdGUgXHRcdD1cdGZ1bmN0aW9uKG5hbWUpe1xuXHRcdHZhciBkaWZmZXJlZCBcdD1cdCRxLmRlZmVyKCk7XG5cdFx0JGh0dHAucG9zdCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvbWUvZ3JvdXBzJywgbmFtZSlcblx0XHQuc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSl7XG5cdFx0XHRkaWZmZXJlZC5yZXNvbHZlKHJlc3BvbnNlKTtcblx0XHR9KVxuXHRcdC5lcnJvcihmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0ZGlmZmVyZWQucmVqZWN0KGVycm9yKTtcblx0XHR9KVxuXHRcdHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuXHR9XG5cdHRoaXMuZGVsZXRlIFx0XHQ9XHRmdW5jdGlvbihpZCl7XG5cdFx0dmFyIGRpZmZlcmVkIFx0PVx0JHEuZGVmZXIoKTtcblx0XHQkaHR0cC5kZWxldGUoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL21lL2dyb3Vwcy8nK2lkKVxuXHRcdC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblx0XHRcdGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuXHRcdH0pXG5cdFx0LmVycm9yKGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRkaWZmZXJlZC5yZWplY3QoZXJyb3IpO1xuXHRcdH0pXG5cdFx0cmV0dXJuIGRpZmZlcmVkLnByb21pc2U7XG5cdH1cblx0dGhpcy5teUdyb3Vwc1x0XHQ9XHRmdW5jdGlvbigpe1xuXHRcdHZhciBkaWZmZXJlZCBcdD1cdCRxLmRlZmVyKCk7XG5cblx0XHQkaHR0cC5nZXQoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL21lL2dyb3VwcycpXG5cdFx0LnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcG9uc2Upe1xuXHRcdFx0ZGlmZmVyZWQucmVzb2x2ZShyZXNwb25zZSk7XG5cdFx0fSlcblx0XHQuZXJyb3IoZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdGNvbnNvbGUubG9nKCdkaWZmZXJlZCBzbG93OicgKyBlcnJvcik7XG5cdFx0XHRkaWZmZXJlZC5yZWplY3QoZXJyb3IpO1xuXHRcdH0pXG5cdFx0cmV0dXJuIGRpZmZlcmVkLnByb21pc2U7XG5cdH1cblxuXHR0aGlzLmFkZFBlb3BsZSBcdD1cdGZ1bmN0aW9uKG1lbWJlcil7XG5cdFx0dmFyIGRpZmZlcmVkIFx0PVx0JHEuZGVmZXIoKTtcblx0XHQkaHR0cC5wdXQoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL21lL2dyb3Vwcy8nK0pTT04uc3RyaW5naWZ5KG1lbWJlcikpXG5cdFx0LnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcG9uc2Upe1xuXHRcdFx0ZGlmZmVyZWQucmVzb2x2ZShyZXNwb25zZSk7XG5cdFx0fSlcblx0XHQuZXJyb3IoZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdGRpZmZlcmVkLnJlc29sdmUoZXJyb3IpO1xuXHRcdH0pXG5cdFx0cmV0dXJuIGRpZmZlcmVkLnByb21pc2U7XG5cdH07XG5cdHRoaXMuYWRkRmlsZVRvR3JvdXAgPSBmdW5jdGlvbihmaWxlT2JqKXtcblx0XHR2YXIgZGlmZmVyZWQgPSAkcS5kZWZlcigpO1xuXHRcdCRodHRwLnB1dCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvbWUvZ3JvdXBzLycrIEpTT04uc3RyaW5naWZ5KGZpbGVPYmopKVxuXHRcdC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblx0XHRcdGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuXHRcdH0pXG5cdFx0LmVycm9yKGZ1bmN0aW9uKGVycil7XG5cdFx0XHRkaWZmZXJlZC5yZWplY3QoZXJyKTtcblx0XHR9KVxuXHRcdHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuXHR9XG5cdHRoaXMucmVtb3ZlUGVvcGxlIFx0PVx0ZnVuY3Rpb24obWVtYmVyKXtcblx0XHR2YXIgZGlmZmVyZWQgXHQ9XHQkcS5kZWZlcigpO1xuXHRcdCRodHRwLnB1dCgkcm9vdFNjb3BlLmVuZFBvaW50ICsnL2FwaS92MS9tZS9ncm91cHMvJytKU09OLnN0cmluZ2lmeShtZW1iZXIpKVxuXHRcdC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblx0XHRcdGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuXHRcdH0pXG5cdFx0LmVycm9yKGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRkaWZmZXJlZC5yZWplY3QoZXJyb3IpO1xuXHRcdH0pXG5cdFx0cmV0dXJuIGRpZmZlcmVkLnByb21pc2U7XG5cdH1cbiAgdGhpcy5zdWdnZXN0UGVvcGxlID0gZnVuY3Rpb24oaWQpe1xuXG4gICAgXHR2YXIgZGlmZmVyZWQgPSAkcS5kZWZlcigpO1xuICAgIFx0JGh0dHAuZ2V0KCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS9tZS9ncm91cHMvJyArIGlkKVxuICAgIFx0LnN1Y2Nlc3MoZnVuY3Rpb24ocmVzKXtcbiAgICBcdFx0ZGlmZmVyZWQucmVzb2x2ZShyZXMpO1xuICAgIFx0fSlcbiAgICBcdC5lcnJvcihmdW5jdGlvbihlcnIpIHtcbiAgICBcdFx0ZGlmZmVyZWQucmVqZWN0KGVycik7XG4gICAgXHR9KVxuICAgIFx0cmV0dXJuIGRpZmZlcmVkLnByb21pc2U7XG4gICAgfVxuXHRyZXR1cm4gdGhpcztcbn1dKTtcblxuc3luYy5jb250cm9sbGVyKCdHcm91cENvbnRyb2xsZXInLCBbXG5cdCckc2NvcGUnLFxuXHQnR3JvdXAnLFxuXHQnVXNlcicsXG5cdCdGaWxlcycsXG5cdCd1c2VySW50ZXJhY3Rpb25Ob3RpZmljYXRpb24nLFxuXHRmdW5jdGlvbiBHcm91cENvbnRyb2xsZXIgKFxuXHRcdCRzY29wZSxcblx0XHRHcm91cCxcblx0XHRVc2VyLFxuXHRcdEZpbGVzLFxuXHRcdHVzZXJJbnRlcmFjdGlvbk5vdGlmaWNhdGlvblxuXHQpIHtcblx0JHNjb3BlLmluaXQgXHQ9XHRmdW5jdGlvbigpe1xuXHRcdCRzY29wZS5teUdyb3VwcygpO1xuXG5cdFx0JHNjb3BlLnN1Z2dlc3RlZFBlb3BsZVRvR3JvdXAoKTsvL29mY2F1c2UgdGhleSBhcmUgYXJsZWFkeSB5b3VyIGZyaWVuZCBidXQgbm90IHBhcnRpY2lwYW50IGluIHlvdXIgc3R1ZmYgd29yayFcblx0fVxuXHQkc2NvcGUudXNlcklkIFx0XHRcdFx0PVx0ZnVuY3Rpb24oKXtcblx0XHRVc2VyLl9pZCgpXG5cdFx0LnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuXHRcdFx0JHNjb3BlLnVzZXJJZCBcdD1cdHJlc3BvbnNlO1xuXHRcdH0sIGZ1bmN0aW9uKGVycm9yKXtcblx0XHRcdGNvbnNvbGUubG9nKGVycm9yKTtcblx0XHR9KTtcblx0fTtcblx0JHNjb3BlLm15R3JvdXBzIFx0XHRcdD1cdGZ1bmN0aW9uKCl7XG5cdFx0R3JvdXAubXlHcm91cHMoKVxuXHRcdC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblx0XHRcdCRzY29wZS5ncm91cCBcdD0gcmVzcG9uc2U7XG5cdFx0fSwgZnVuY3Rpb24oZXJyb3Ipe1xuXHRcdH0pO1xuXHR9O1xuXHQkc2NvcGUuc3VnZ2VzdGVkUGVvcGxlVG9Hcm91cCBcdD1cdGZ1bmN0aW9uKGlkKXtcblx0XHQvL2NsZWFyaW5nIGFsbCB2aWV3IHJlbmRlcmVkIGJlZm9yZVxuXHRcdCRzY29wZS5zaG93RmlsZXM9ZmFsc2U7XG5cdFx0JHNjb3BlLnNob3dHcm91cD1mYWxzZTtcblx0XHQkc2NvcGUuc2hvd0JveD1mYWxzZTtcblx0XHRpZighYW5ndWxhci5pc1VuZGVmaW5lZChpZCkpe1xuXHRcdFx0R3JvdXAuc3VnZ2VzdFBlb3BsZShpZCkudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG5cdFx0XHRcdC8vIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcblx0XHRcdFx0JHNjb3BlLmZvbGxvd2VycyA9IHJlc3BvbnNlO1xuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3Ipe1xuXHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcik7XG5cdFx0XHR9KTtcblx0XHR9XG5cdH07XG5cdCRzY29wZS4kb24oJ3JlZnJlc2hHcm91cCcsZnVuY3Rpb24oKXtcbiAgICAgICAkc2NvcGUuaW5pdCgpO1xuICBcdH0pO1xuXHQkc2NvcGUuJG9uKCdncm91cERlbGV0ZWQnLCBmdW5jdGlvbiAoZXZlbnQsIGFyZ3MpIHtcblx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdCRzY29wZS5teUdyb3VwcygpO1xuXHR9KTtcblx0JHNjb3BlLiRvbignZ3JvdXBUb2JpbmR3aXRoJywgZnVuY3Rpb24gKGV2ZW50LCBncm91cGlkKSB7XG5cdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgJHNjb3BlLmVtaXR0ZWQgPWdyb3VwaWQ7XG4gICAgICAgIGlmKCAkc2NvcGUuc2hvd0ZpbGVzID09IHRydWUpe1xuICAgICAgICAgICAgJHNjb3BlLnNob3dGaWxlcz1mYWxzZTtcbiAgICAgICAgfVxuICAgICAgICAkc2NvcGUuc3VnZ2VzdGVkUGVvcGxlVG9Hcm91cChncm91cGlkKTtcbiAgICAgICAgJHNjb3BlLmFkZFBlb3BsZT10cnVlO1xuXHR9KTtcblx0JHNjb3BlLmdldEdyb3VwRmlsZXMgPSBmdW5jdGlvbihvd25lcil7XG4gICAgRmlsZXMuZ2V0R3JvdXBGaWxlcyhvd25lcilcblx0XHQudGhlbihmdW5jdGlvbih0cmVlKXtcblx0XHRcdCRzY29wZS5maWxlcyA9IHRyZWU7XG5cdFx0XHRcdC8vbmF2aWdhdGUgdHJvdWdoIHRyZWUgcmVzcG9uc2Ugd2hpY2ggaXMgcmVxdWlyZSBtdWNoIGF0dGVudGlvblxuXHRcdFx0XHQkc2NvcGUuZ3JvdXBzPVtdO1xuXHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHRyZWUubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRcdGlmICh0cmVlW2ldLmhhc093blByb3BlcnR5KCdncm91cHMnKSAmJiB0cmVlW2ldWydncm91cHMnXSkge1xuXHRcdFx0XHRcdFx0XHRcdCRzY29wZS5ncm91cHMucHVzaCh0cmVlW2ldLmZyaWVuZHMpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmICh0cmVlW2ldLmhhc093blByb3BlcnR5KCdncm91cHMnKSkge1xuXHRcdFx0XHRcdFx0XHRcdCRzY29wZS5ncm91cHMgPSBncm91cHMuY29uY2F0KHRyYXZlcnNlKHRyZWVbaV0uZ3JvdXBzKSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHR9LCBmdW5jdGlvbihlcnJvcil7XG5cdFx0XHRjb25zb2xlLmxvZyhlcnJvcik7XG5cdFx0fSk7XG4gIH07XG5cdCRzY29wZS5nZXRCb3hGaWxlcyA9IGZ1bmN0aW9uKGdyb3VwSWQpe1xuXHRcdCRzY29wZS5lbWl0dGVkID1ncm91cElkO1xuICBcdEZpbGVzLmdldEJveEZpbGVzKGdyb3VwSWQpXG5cdFx0LnRoZW4oZnVuY3Rpb24odHJlZSl7XG5cdFx0XHQkc2NvcGUuZmlsZXMgPSB0cmVlO1xuXHRcdFx0XHQvL25hdmlnYXRlIHRyb3VnaCB0cmVlIHJlc3BvbnNlIHdoaWNoIGlzIHJlcXVpcmUgbXVjaCBhdHRlbnRpb25cblx0XHRcdFx0JHNjb3BlLmdyb3Vwcz1bXTtcblx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCB0cmVlLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0XHRpZiAodHJlZVtpXS5oYXNPd25Qcm9wZXJ0eSgnZ3JvdXBzJykgJiYgdHJlZVtpXVsnZ3JvdXBzJ10pIHtcblx0XHRcdFx0XHRcdFx0XHQkc2NvcGUuZ3JvdXBzLnB1c2godHJlZVtpXS5mcmllbmRzKTtcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAodHJlZVtpXS5oYXNPd25Qcm9wZXJ0eSgnZ3JvdXBzJykpIHtcblx0XHRcdFx0ICAgICAgICAgICAgJHNjb3BlLmdyb3VwcyA9IGdyb3Vwcy5jb25jYXQodHJhdmVyc2UodHJlZVtpXS5ncm91cHMpKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdH0sIGZ1bmN0aW9uKGVycm9yKXtcblx0XHRcdGNvbnNvbGUubG9nKGVycm9yKTtcblx0XHR9KTtcbiAgfTtcbiRzY29wZS4kb24oJ3Nob3dPcHRpb25zJyxmdW5jdGlvbihfLHBhcmFtcyl7XG4gICAgIGlmKHBhcmFtcy5vd25lciA9PT1cImJveFwiKXtcblx0XHRcdCAkc2NvcGUuYWRkUGVvcGxlPWZhbHNlO1xuXHRcdFx0ICRzY29wZS5zaG93R3JvdXA9ZmFsc2U7XG4gICAgICAgJHNjb3BlLnNob3dCb3g9dHJ1ZTtcbiAgICAgICBpZiggJHNjb3BlLmFkZFBlb3BsZSA9PSB0cnVlKXtcbiAgICAgICAgICAgJHNjb3BlLmFkZFBlb3BsZT1mYWxzZTtcbiAgICAgICB9XG5cdFx0XHQgLy9zZXQgZmlsZXMgc2NvcGUgdG8gc2hvdyBmaWxlcyBvZiBib3ggZmlsZXMgaXMgcmVwZWF0ZWQgaW4gdmlldyBkaXJlY3RpdmVcbiAgICAgICAkc2NvcGUuZ2V0Qm94RmlsZXMgKHBhcmFtcy5ncm91cF9pZCk7XG5cdFx0IH1lbHNlIGlmIChwYXJhbXMub3duZXIgPT09IFwiZ3JvdXBcIikge1xuXHRcdFx0ICRzY29wZS5zaG93Qm94PWZhbHNlO1xuXHRcdFx0ICRzY29wZS5hZGRQZW9wbGU9ZmFsc2U7XG5cdFx0XHQgJHNjb3BlLnNob3dHcm91cD10cnVlO1xuXHRcdFx0IGlmKCAkc2NvcGUuYWRkUGVvcGxlID09IHRydWUpe1xuXHRcdFx0XHRcdCAkc2NvcGUuYWRkUGVvcGxlPWZhbHNlO1xuXHRcdFx0IH1cblx0XHRcdCAvL2NoYW5nZSBmaWxlcyB0byBuZXcgc2NvcGUgZmlsZXMgdG8gc2hvdyBmaWxlcyBvZiBncm91cHMgIGlzIHJlcGVhdGVkIGluIHZpZXcgZGlyZWN0aXZlXG5cdFx0XHQgJHNjb3BlLmdldEdyb3VwRmlsZXMgKHBhcmFtcy5ncm91cF9pZCk7XG5cdFx0IH1cbn0pO1xuJHNjb3BlLmluaXQoKTtcbn1dKTtcbnN5bmMuZGlyZWN0aXZlKCdteUdyb3VwcycsIFtcblx0J0dyb3VwJyxcblx0J1JlcG9ydCcsXG5cdCd1c2VySW50ZXJhY3Rpb25Ob3RpZmljYXRpb24nLFxuXHRmdW5jdGlvbiBteUdyb3VwcyAoXG5cdFx0R3JvdXAsXG5cdFx0UmVwb3J0LFxuXHRcdHVzZXJJbnRlcmFjdGlvbk5vdGlmaWNhdGlvbixcblx0XHROb3RpZmljYXRpb24pIHtcblx0cmV0dXJuIHtcblx0XHRwcmlvcml0eTogMTAsXG5cdFx0dGVtcGxhdGVVcmw6ICdBcHAvc2NyaXB0cy9qcy9kaXJlY3RpdmVzL2dyb3Vwcy5odG1sJyxcblx0XHRyZXN0cmljdDogJ0UnLFxuXHRcdHNjb3BlOiB7XG5cdFx0XHQgIGlkOiAnPXVzZXJJZCcsXG4gICAgICAgICAgZ3JvdXBzOiAnPScsXG4gICAgICAgICAgZm9sbG93ZXJzOiAnPScsXG4gICAgICAgICAgZW1pdHRlZDonPScsXG4gICAgICAgICAgc2hvd1Blb3BsZTonPScsXG4gICAgICAgICAgc2hvd0dyb3VwICAgOiAgJz0nLFxuICAgICAgICAgIGZpbGVzICAgOiAgJz0nLFxuXHQgIFx0XHRcdHNob3dCb3g6ICAnPSdcblx0XHR9LFxuXHRcdGxpbms6IGZ1bmN0aW9uIChzY29wZSwgaUVsZW1lbnQsIGlBdHRycykge1xuXHRcdFx0c2NvcGUuZGVsZXRlR3JvdXAgPSBmdW5jdGlvbihpZCl7XG5cdFx0XHRcdEdyb3VwLmRlbGV0ZShpZClcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24ocmVzKXtcblx0XHRcdFx0XHRcdHVzZXJJbnRlcmFjdGlvbk5vdGlmaWNhdGlvbi5pbmZvKFwiR3JvdXAgZGVsZXRlZFwiKTtcblx0XHRcdFx0XHQgXHRzY29wZS4kZW1pdChcImdyb3VwRGVsZXRlZFwiLCAnZ3JvdXAgZGVsZXRlZCcpO1xuXHRcdFx0XHR9LCBmdW5jdGlvbihlcnIpe1xuXHRcdFx0XHRcdFJlcG9ydC5zZW5kKCdkZWxldGUgZ3JvdXAgZXJyb3I6JytlcnIpXG5cdFx0XHRcdFx0LnRoZW4oZnVuY3Rpb24oKXt9LCBmdW5jdGlvbigpe30pO1xuXHRcdFx0XHR9KVxuXHRcdFx0fTtcbiAgICAgIHNjb3BlLmNyZWF0ZUdyb3VwXHQ9XHRmdW5jdGlvbihuYW1lKXtcbiAgICAgICAgICBHcm91cC5jcmVhdGUobmFtZSlcbiAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR1c2VySW50ZXJhY3Rpb25Ob3RpZmljYXRpb24uc3VjY2VzcyhcIkNyZWF0ZWQgbmV3IEdyb3VwXCIpO1xuICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLiRlbWl0KCdyZWZyZXNoR3JvdXAnLG51bGwpO1xuICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oZXJyb3Ipe1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9O1xuXHRcdFx0c2NvcGUuaW5pdEFkZFBlb3BsZSA9IGZ1bmN0aW9uKGdyb3VwaWQpe1xuXHRcdFx0XHRzY29wZS4kZW1pdChcImdyb3VwVG9iaW5kd2l0aFwiLCBncm91cGlkKTtcblx0XHRcdH07XG5cblx0XHRcdHNjb3BlLmFkZFBlb3BsZSA9IGZ1bmN0aW9uKHBhcmFtcyl7XG5cdFx0XHRcdHZhciBuZXdQYXJhbXMgPXtcblx0XHRcdFx0XHQnb3B0aW9uJzonYWRkTWVtYmVyJyxcblx0XHRcdFx0XHQndXNlcklkJzpwYXJhbXMudXNlcklkLFxuXHRcdFx0XHRcdCdncm91cElkJzpwYXJhbXMuZ3JvdXBJZFxuXHRcdFx0XHR9XG5cdFx0XHRcdGlmKGFuZ3VsYXIuaXNVbmRlZmluZWQocGFyYW1zKSl7XG5cdFx0XHRcdFx0Ly93b24ndCBoYXBwZW4hb3IgaWYgdGkgaGFwcGVuIHdlIHF1aXRcblx0XHRcdFx0fWVsc2V7XG5cblx0XHRcdFx0XHRHcm91cC5hZGRQZW9wbGUobmV3UGFyYW1zKVxuXHRcdFx0XHRcdC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSl7XG5cdFx0XHRcdFx0XHQvL3JlZnJlc2ggZ3JvdXAgd2l0aCBuZXcgbWVtYmVyIHN0YXR1c1xuXHRcdFx0XHRcdFx0XHR1c2VySW50ZXJhY3Rpb25Ob3RpZmljYXRpb24uc3VjY2VzcyhcIkFkZGVkIE1lbWJlciBpbiBncm91cC5cIik7XG4gICAgICAgICAgICAgIHNjb3BlLmluaXRBZGRQZW9wbGUocGFyYW1zLmdyb3VwSWQpO1xuICAgICAgICAgICAgICBzY29wZS4kZW1pdCgncmVmcmVzaEdyb3VwJywnJyk7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcblx0XHRcdFx0XHR9LCBmdW5jdGlvbiAoZXJyb3Isc3RhdHVzKXtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRzY29wZS5yZW1vdmVQZW9wbGUgPSBmdW5jdGlvbihwYXJhbXMpe1xuXG5cdFx0XHRcdHZhciBuZXdQYXJhbXMgPXtcblx0XHRcdFx0XHQnb3B0aW9uJzoncmVtb3ZlTWVtYmVyJyxcblx0XHRcdFx0XHQndXNlcklkJzpwYXJhbXMudXNlcklkLFxuXHRcdFx0XHRcdCdncm91cElkJzpwYXJhbXMuZ3JvdXBJZFxuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYoYW5ndWxhci5pc1VuZGVmaW5lZChwYXJhbXMpKXtcblx0XHRcdFx0XHQvL3dvbid0IGhhcHBlbiFvciBpZiB0aSBoYXBwZW4gd2UgcXVpdCB0b28gYmFkIGhpZXJhY2h5IVxuXHRcdFx0XHR9ZWxzZXtcblx0XHRcdFx0R3JvdXAucmVtb3ZlUGVvcGxlKG5ld1BhcmFtcylcblx0XHRcdFx0XHQudGhlbihmdW5jdGlvbiAocmVzcG9uc2Upe1xuXHRcdFx0XHRcdFx0XHR1c2VySW50ZXJhY3Rpb25Ob3RpZmljYXRpb24uaW5mbyhcIlJlbW92ZWQgTWVtYmVyIGluIGdyb3VwLlwiKTtcblx0ICAgICAgICAgICAgc2NvcGUuaW5pdEFkZFBlb3BsZShwYXJhbXMuZ3JvdXBJZCk7XG5cdCAgICAgICAgICAgIHNjb3BlLiRlbWl0KCdyZWZyZXNoR3JvdXAnLCcnKTtcbiAgICAgICAgICAgIFx0Y29uc29sZS5sb2cocmVzcG9uc2UpO1xuXHRcdFx0XHRcdH0sIGZ1bmN0aW9uIChlcnJvcixzdGF0dXMpe1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0XHRzY29wZS5yZW1vdmVGcm9tR3JvdXAgPSBmdW5jdGlvbigpe1xuXHRcdFx0XHRjb25zb2xlLmxvZygnd2UgY2FuIHJlbW92ZSBmaWxlIGluIGdyb3VwJyk7XG5cdFx0XHR9XG5cdFx0XHRzY29wZS5hZGRGaWxlVG9Hcm91cCA9IGZ1bmN0aW9uKHBhcmFtcyl7XG5cdFx0XHRcdHZhciBmaWxlT2JqID17XG5cdFx0XHRcdFx0J29wdGlvbic6J2FkZEZpbGVzJyxcblx0XHRcdFx0XHQnZmlsZUlkJzpwYXJhbXMuZmlsZUlkLFxuXHRcdFx0XHRcdCdncm91cElkJzpwYXJhbXMuZ3JvdXBJZFxuXHRcdFx0XHR9XG5cblx0XHRcdFx0R3JvdXAuYWRkRmlsZVRvR3JvdXAoZmlsZU9iailcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcblx0XHRcdFx0XHQvLyB1c2VySW50ZXJhY3Rpb25Ob3RpZmljYXRpb24uc3VjY2VzcyhcIkEgZmlsZSBpcyBhZGRlZCBpbiBncm91cFwiKTtcblx0XHRcdFx0fSxmdW5jdGlvbihlcnIpe1xuXHRcdFx0XHRcdHVzZXJJbnRlcmFjdGlvbk5vdGlmaWNhdGlvbi53YXJuKFwiU29tZSBlcnJvciBvY2N1cmVkIGR1cmluZyBhZGRpbmcgZmlsZVwiKTtcblx0XHRcdFx0fSlcblxuXHRcdFx0fVxuXHRcdFx0c2NvcGUuZmlsZXNJbkJveCA9IGZ1bmN0aW9uKGdyb3VwaWQpe1xuXHRcdFx0XHR2YXIgcGFyYW1zID17J2dyb3VwX2lkJzpncm91cGlkLCdvd25lcic6J2JveCd9O1xuXHRcdFx0XHRzY29wZS4kZW1pdCgnc2hvd09wdGlvbnMnLHBhcmFtcyk7XG5cblx0XHRcdH1cblx0XHRcdHNjb3BlLmZpbGVzSW5Hcm91cCA9IGZ1bmN0aW9uKGdyb3VwaWQpe1xuXG5cdFx0XHRcdHZhciBwYXJhbXMgPXsnZ3JvdXBfaWQnOmdyb3VwaWQsJ293bmVyJzonZ3JvdXAnfTtcblx0XHRcdFx0c2NvcGUuJGVtaXQoJ3Nob3dPcHRpb25zJyxwYXJhbXMpO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcbn1dKTtcblxuc3luYy5zZXJ2aWNlKCdSZXBvcnQnLCBbZnVuY3Rpb24gUmVwb3J0ICgkaHR0cCwkcSwkcm9vdFNjb3BlKSB7XG5cdHRoaXMuc2VuZCA9IGZ1bmN0aW9uKGlzc3VlKXtcblx0XHR2YXIgZGlmZmVyZWQgPSAkcS5kZWZlcigpO1xuXHRcdCRodHRwLnBvc3QoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL2lzc3VlcycsIGlzc3VlKVxuXHRcdC5zdWNjZXNzKGZ1bmN0aW9uKHJlcyl7XG5cdFx0XHRkaWZmZXJlZC5yZXNvbHZlKHJlcyk7XG5cdFx0fSlcblx0XHQuZXJyb3IoZnVuY3Rpb24oZXJyKSB7XG5cdFx0XHRkaWZmZXJlZC5yZWplY3QoZXJyKTtcblx0XHR9KVxuXHRcdHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuXHR9XG5cdHJldHVybiB0aGlzO1xufV0pO1xuXG4vKiBnbG9iYWwgc3luYyAqL1xuc3luYy5zZXJ2aWNlKCdTZXR0aW5ncycsIFsnJGh0dHAnLCckcm9vdFNjb3BlJywnJHEnLGZ1bmN0aW9uICgkaHR0cCwkcm9vdFNjb3BlLCRxKSB7XG5cdHRoaXMuY3VycmVudCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciBkaWZmZXJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgICRodHRwLmdldCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvc2V0dGluZ3MnKVxuICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihyZXNwKXtcbiAgICAgICAgICAgIGRpZmZlcmVkLnJlc29sdmUocmVzcCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5lcnJvcihmdW5jdGlvbihlcnIpe1xuICAgICAgICAgICAgZGlmZmVyZWQucmVqZWN0KGVycik7XG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbn1dKTtcblxuc3luYy5jb250cm9sbGVyKCdTZXR0aW5nc0NvbnRyb2xsZXInLCBbJyRzY29wZScsJ1NldHRpbmdzJywnJGxvZycsIGZ1bmN0aW9uICgkc2NvcGUsU2V0dGluZ3MsJGxvZykge1xuXHQkc2NvcGUuaW5pdCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICRzY29wZS5sb2FkQ3VycmVudFNldHRpbmdzKCk7XG4gICAgfVxuICAgICAkc2NvcGUubG9hZEN1cnJlbnRTZXR0aW5ncyA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICBTZXR0aW5ncy5jdXJyZW50KCkudGhlbihmdW5jdGlvbihyZXNwKXtcbiAgICAgICAgICAgICAkc2NvcGUuc2V0dGluZ3MgPSByZXNwO1xuICAgICAgICAgfSwgZnVuY3Rpb24oZXJyKXtcbiAgICAgICAgICAgICAkbG9nLmluZm8oJ2VycnJvciBwcmV2ZW50IHByb21pc2UgdG8gYmUgZnVsbGZpbGwnKTtcbiAgICAgICAgIH0pO1xuICAgICB9XG4gICAgICRzY29wZS5pbml0KCk7XG59XSk7XG5cbi8qIGdsb2JhbCBzeW5jICovXG5zeW5jLmNvbnRyb2xsZXIoJ1NoYXJlQ29udHJvbGxlcicsIFtcblx0JyRzY29wZScsXG5cdCckcm9vdFNjb3BlJyxcblx0JyRyb3V0ZVBhcmFtcycsXG5cdCckcm91dGUnLFxuXHQnJGxvZycsXG5cdCckdWliTW9kYWwnLFxuXHQnU2hhcmUnLFxuXHQnVXNlcicsXG5cdGZ1bmN0aW9uIChcblx0XHQkc2NvcGUsXG5cdFx0JHJvb3RTY29wZSxcblx0XHQkcm91dGVQYXJhbXMsXG5cdFx0JHJvdXRlLFxuXHRcdCRsb2csXG5cdFx0JHVpYk1vZGFsLFxuXHRcdFNoYXJlLFxuXHRcdFVzZXJcblx0KSBcbntcblxuXHQkc2NvcGUuc2hhcmUgPSBmdW5jdGlvbihmaWxlX2lkKXtcblx0XHQvLyBhbGVydCgnaGVyZScpO1xuXHRcdGNvbnNvbGUubG9nKGZpbGVfaWQpO1xuXHR9O1xufVxuXSk7XG5cbi8qIGdsb2JhbCBzeW5jICovXG4vKiBnbG9iYWwgYW5ndWxhciAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyXG5cbiAgICBzeW5jLmNvbnRyb2xsZXIoJ1VwbG9hZENvbnRyb2xsZXInLCBbJyRzY29wZScsICdGaWxlVXBsb2FkZXInLCckcm9vdFNjb3BlJywnRmlsZXMnLCBmdW5jdGlvbigkc2NvcGUsIEZpbGVVcGxvYWRlciwkcm9vdFNjb3BlLEZpbGVzKSB7XG4gICAgICAgIHZhciB1cGxvYWRlciA9ICRzY29wZS51cGxvYWRlciA9IG5ldyBGaWxlVXBsb2FkZXIoe1xuICAgICAgICAgICAgdXJsOiAkcm9vdFNjb3BlLmVuZFBvaW50KycvYXBpL3YxL3VwbG9hZCdcbiAgICAgICAgfSk7XG4gICAgICAgIC8vRklMVEVSU1xuICAgICAgICB1cGxvYWRlci5maWx0ZXJzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogJ2N1c3RvbUZpbHRlcicsXG4gICAgICAgICAgICBmbjogZnVuY3Rpb24oaXRlbSAvKntGaWxlfEZpbGVMaWtlT2JqZWN0fSovLCBvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucXVldWUubGVuZ3RoIDwgMTA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAvL0NBTExCQUNLU1xuICAgICAgICB1cGxvYWRlci5vbldoZW5BZGRpbmdGaWxlRmFpbGVkID0gZnVuY3Rpb24oaXRlbSAvKntGaWxlfEZpbGVMaWtlT2JqZWN0fSovLCBmaWx0ZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnb25XaGVuQWRkaW5nRmlsZUZhaWxlZCcsIGl0ZW0sIGZpbHRlciwgb3B0aW9ucyk7XG4gICAgICAgIH07XG4gICAgICAgIHVwbG9hZGVyLm9uQWZ0ZXJBZGRpbmdGaWxlID0gZnVuY3Rpb24oZmlsZUl0ZW0pIHtcbiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnb25BZnRlckFkZGluZ0ZpbGUnLCBmaWxlSXRlbSk7XG4gICAgICAgIH07XG4gICAgICAgIHVwbG9hZGVyLm9uQWZ0ZXJBZGRpbmdBbGwgPSBmdW5jdGlvbihhZGRlZEZpbGVJdGVtcykge1xuICAgICAgICAgICAgY29uc29sZS5pbmZvKCdvbkFmdGVyQWRkaW5nQWxsJywgYWRkZWRGaWxlSXRlbXMpO1xuICAgICAgICB9O1xuICAgICAgICB1cGxvYWRlci5vbkJlZm9yZVVwbG9hZEl0ZW0gPSBmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgICAgICBjb25zb2xlLmluZm8oJ29uQmVmb3JlVXBsb2FkSXRlbScsIGl0ZW0pO1xuICAgICAgICB9O1xuICAgICAgICB1cGxvYWRlci5vblByb2dyZXNzSXRlbSA9IGZ1bmN0aW9uKGZpbGVJdGVtLCBwcm9ncmVzcykge1xuICAgICAgICAgICAgY29uc29sZS5pbmZvKCdvblByb2dyZXNzSXRlbScsIGZpbGVJdGVtLCBwcm9ncmVzcyk7XG4gICAgICAgIH07XG4gICAgICAgIHVwbG9hZGVyLm9uUHJvZ3Jlc3NBbGwgPSBmdW5jdGlvbihwcm9ncmVzcykge1xuICAgICAgICAgICAgY29uc29sZS5pbmZvKCdvblByb2dyZXNzQWxsJywgcHJvZ3Jlc3MpO1xuICAgICAgICB9O1xuICAgICAgICB1cGxvYWRlci5vblN1Y2Nlc3NJdGVtID0gZnVuY3Rpb24oZmlsZUl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnb25TdWNjZXNzSXRlbScsIGZpbGVJdGVtLCByZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKTtcbiAgICAgICAgfTtcbiAgICAgICAgdXBsb2FkZXIub25FcnJvckl0ZW0gPSBmdW5jdGlvbihmaWxlSXRlbSwgcmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycykge1xuICAgICAgICAgICAgY29uc29sZS5pbmZvKCdvbkVycm9ySXRlbScsIGZpbGVJdGVtLCByZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKTtcbiAgICAgICAgfTtcbiAgICAgICAgdXBsb2FkZXIub25DYW5jZWxJdGVtID0gZnVuY3Rpb24oZmlsZUl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnb25DYW5jZWxJdGVtJywgZmlsZUl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpO1xuICAgICAgICB9O1xuICAgICAgICB1cGxvYWRlci5vbkNvbXBsZXRlSXRlbSA9IGZ1bmN0aW9uKGZpbGVJdGVtLCByZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKSB7XG4gICAgICAgICAgICBjb25zb2xlLmluZm8oJ29uQ29tcGxldGVJdGVtJywgZmlsZUl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpO1xuICAgICAgICB9O1xuICAgICAgICB1cGxvYWRlci5vbkNvbXBsZXRlQWxsID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgRmlsZXMuZ2V0Qm94RmlsZXMoKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzKXtcbiAgICAgICAgICAgICAgJHNjb3BlLmZpbGVzIFx0PVx0cmVzO1xuXG4gICAgICAgICAgICB9LCBmdW5jdGlvbihlcnJvcil7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZmluYWxseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmRhdGFMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc29sZS5pbmZvKCdvbkNvbXBsZXRlQWxsJyk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnNvbGUuaW5mbygndXBsb2FkZXInLCB1cGxvYWRlcik7XG4gICAgfV0pO1xuXG5zeW5jLnNlcnZpY2UoJ3VybFNob3J0ZW5lcicsW2Z1bmN0aW9uKCl7XG4gIHRoaXMubWFrZVNob3J0ID0gZnVuY3Rpb24obG9uZ1VybCl7XG4gICAgcmV0dXJuIGxvbmdVcmw7XG4gIH07XG4gIC8vIHRoaXMubWFrZVNob3J0ID0gZnVuY3Rpb24obG9uZ1VybClcbiAgLy8ge1xuICAvLyAgIC8vICB2YXIgbG9uZ1VybD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxvbmd1cmxcIikudmFsdWU7XG4gIC8vICAgICB2YXIgcmVxdWVzdCA9IGdhcGkuY2xpZW50LnVybHNob3J0ZW5lci51cmwuaW5zZXJ0KHtcbiAgLy8gICAgICdyZXNvdXJjZSc6IHtcbiAgLy8gICAgICAgJ2xvbmdVcmwnOiBsb25nVXJsXG4gIC8vIFx0fVxuICAvLyAgICAgfSk7XG4gIC8vICAgICByZXF1ZXN0LmV4ZWN1dGUoZnVuY3Rpb24ocmVzcG9uc2UpXG4gIC8vIFx0e1xuICAvL1xuICAvLyBcdFx0aWYocmVzcG9uc2UuaWQgIT0gbnVsbClcbiAgLy8gXHRcdHtcbiAgLy8gXHRcdFx0c3RyID1cIjxiPkxvbmcgVVJMOjwvYj5cIitsb25nVXJsK1wiPGJyPlwiO1xuICAvLyBcdFx0XHRzdHIgKz1cIjxiPnlvdXIgRmlsZSBpczo8L2I+IDxhIGhyZWY9J1wiK3Jlc3BvbnNlLmlkK1wiJz5cIityZXNwb25zZS5pZCtcIjwvYT48YnI+XCI7XG4gIC8vIFx0XHRcdHJldHVybiBzdHI7XG4gIC8vIFx0XHR9XG4gIC8vIFx0XHRlbHNlXG4gIC8vIFx0XHR7XG4gIC8vIFx0XHRcdGNvbnNvbGUubG9nKFwiZXJyb3I6IHVuYWJsZSB0byBjcmVhdGUgc2hvcnQgdXJsXCIpO1xuICAvLyBcdFx0fVxuICAvL1xuICAvLyAgICAgfSk7XG4gIC8vICB9XG4gIC8vXG4gIC8vIHRoaXMuZ2V0U2hvcnRJbmZvID0gZnVuY3Rpb24oKVxuICAvLyAge1xuICAvLyAgICAgIHZhciBzaG9ydFVybD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNob3J0dXJsXCIpLnZhbHVlO1xuICAvL1xuICAvLyAgICAgIHZhciByZXF1ZXN0ID0gZ2FwaS5jbGllbnQudXJsc2hvcnRlbmVyLnVybC5nZXQoe1xuICAvLyAgICAgICAgJ3Nob3J0VXJsJzogc2hvcnRVcmwsXG4gIC8vICBcdCAgICAgJ3Byb2plY3Rpb24nOidGVUxMJ1xuICAvLyAgICAgIH0pO1xuICAvLyAgICAgIHJlcXVlc3QuZXhlY3V0ZShmdW5jdGlvbihyZXNwb25zZSlcbiAgLy8gIFx0e1xuICAvLyAgXHRcdGlmKHJlc3BvbnNlLmxvbmdVcmwhPSBudWxsKVxuICAvLyAgXHRcdHtcbiAgLy8gIFx0XHRcdHN0ciA9XCI8Yj5Mb25nIFVSTDo8L2I+XCIrcmVzcG9uc2UubG9uZ1VybCtcIjxicj5cIjtcbiAgLy8gIFx0XHRcdHN0ciArPVwiPGI+Q3JlYXRlIE9uOjwvYj5cIityZXNwb25zZS5jcmVhdGVkK1wiPGJyPlwiO1xuICAvLyAgXHRcdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJvdXRwdXRcIikuaW5uZXJIVE1MID0gc3RyO1xuICAvLyAgXHRcdH1cbiAgLy8gIFx0XHRlbHNlXG4gIC8vICBcdFx0e1xuICAvLyAgXHRcdFx0Y29uc29sZS5sb2coXCJlcnJvcjogdW5hYmxlIHRvIGdldCBVUkwgaW5mb3JtYXRpb25cIik7XG4gIC8vICBcdFx0fVxuICAvL1xuICAvLyAgICAgIH0pO1xuICAvL1xuICAvLyAgfVxuICAvLyAgZnVuY3Rpb24gbG9hZCgpXG4gIC8vICB7XG4gIC8vICBcdGdhcGkuY2xpZW50LnNldEFwaUtleSgnQUl6YVN5RFNuN3o3VjFmNkgzeVhyZ0FsZ1ZHdzUyZFNFbXFBTEljJyk7IC8vZ2V0IHlvdXIgb3dubiBCcm93c2VyIEFQSSBLRVlcbiAgLy8gIFx0Z2FwaS5jbGllbnQubG9hZCgndXJsc2hvcnRlbmVyJywgJ3YxJyxmdW5jdGlvbigpe30pO1xuICAvLyAgfVxuICAvLyAgd2luZG93Lm9ubG9hZCA9IGxvYWQ7XG59XSk7XG5cbiAgLy9cbiAgLy8gKGZ1bmN0aW9uKGkscyxvLGcscixhLG0pe2lbJ0dvb2dsZUFuYWx5dGljc09iamVjdCddPXI7aVtyXT1pW3JdfHxmdW5jdGlvbigpe1xuICAvLyAoaVtyXS5xPWlbcl0ucXx8W10pLnB1c2goYXJndW1lbnRzKX0saVtyXS5sPTEqbmV3IERhdGUoKTthPXMuY3JlYXRlRWxlbWVudChvKSxcbiAgLy8gbT1zLmdldEVsZW1lbnRzQnlUYWdOYW1lKG8pWzBdO2EuYXN5bmM9MTthLnNyYz1nO20ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYSxtKVxuICAvLyB9KSh3aW5kb3csZG9jdW1lbnQsJ3NjcmlwdCcsJy8vd3d3Lmdvb2dsZS1hbmFseXRpY3MuY29tL2FuYWx5dGljcy5qcycsJ2dhJyk7XG4gIC8vXG4gIC8vIGdhKCdjcmVhdGUnLCAnVUEtNjQ5NTU4NjYtMicsICdhdXRvJyk7XG4gIC8vIGdhKCdzZW5kJywgJ3BhZ2V2aWV3Jyk7XG5cbiAgICAgICAgLy90aGlzIGZ1bmN0aW9uIGNhbiByZW1vdmUgYW4gYXJyYXkgZWxlbWVudC5cbiAgICAgICAgICAgIEFycmF5LnJlbW92ZSA9IGZ1bmN0aW9uKGFycmF5LCBmcm9tLCB0bykge1xuICAgICAgICAgICAgICAgIHZhciByZXN0ID0gYXJyYXkuc2xpY2UoKHRvIHx8IGZyb20pICsgMSB8fCBhcnJheS5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIGFycmF5Lmxlbmd0aCA9IGZyb20gPCAwID8gYXJyYXkubGVuZ3RoICsgZnJvbSA6IGZyb207XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFycmF5LnB1c2guYXBwbHkoYXJyYXksIHJlc3QpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciB0b3RhbF9wb3B1cHMgPSAwO1xuICAgICAgICAgICAgdmFyIHBvcHVwcyA9IFtdO1xuICAgICAgICAgICAgZnVuY3Rpb24gY2xvc2VfcG9wdXAoaWQpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZm9yKHZhciBpaWkgPSAwOyBpaWkgPCBwb3B1cHMubGVuZ3RoOyBpaWkrKylcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGlmKGlkID09IHBvcHVwc1tpaWldKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBBcnJheS5yZW1vdmUocG9wdXBzLCBpaWkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxjdWxhdGVfcG9wdXBzKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9kaXNwbGF5cyB0aGUgcG9wdXBzLiBEaXNwbGF5cyBiYXNlZCBvbiB0aGUgbWF4aW11bSBudW1iZXIgb2YgcG9wdXBzIHRoYXQgY2FuIGJlIGRpc3BsYXllZCBvbiB0aGUgY3VycmVudCB2aWV3cG9ydCB3aWR0aFxuICAgICAgICAgICAgZnVuY3Rpb24gZGlzcGxheV9wb3B1cHMoKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHZhciByaWdodCA9IDIyMDtcblxuICAgICAgICAgICAgICAgIHZhciBpaWkgPSAwO1xuICAgICAgICAgICAgICAgIGZvcihpaWk7IGlpaSA8IHRvdGFsX3BvcHVwczsgaWlpKyspXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBpZihwb3B1cHNbaWlpXSAhPSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocG9wdXBzW2lpaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5yaWdodCA9IHJpZ2h0ICsgXCJweFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQgPSByaWdodCArIDMyMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZvcih2YXIgampqID0gaWlpOyBqamogPCBwb3B1cHMubGVuZ3RoOyBqamorKylcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocG9wdXBzW2pqal0pO1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICB0aGlzIHNjcmlwdCBoYXMgYmVlbiBhZGRlZCBieSBtZSBmb3IgbXkgY3VzdG9tZVxuXG4gICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgJC5hamF4U2V0dXAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1gtQ1NSRi1UT0tFTic6ICQoJ21ldGFbbmFtZT1cImNzcmYtdG9rZW5cIl0nKS5hdHRyKCdjb250ZW50JylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgJChcIiNjaGF0XCIpLmtleXByZXNzKGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoZXZ0LndoaWNoID09IDEzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoXCJ3ZSBhcmUgbGlzdG5pbmcgdG8gZW50ZXIgZXZlbnRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpdXNlcm5hbWUgPSAkKCcjc2hvdXRfdXNlcm5hbWUnKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGltZXNzYWdlID0gJCgnI3Nob3V0X21lc3NhZ2UnKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zdF9kYXRhID0geyd1c2VybmFtZSc6aXVzZXJuYW1lLCAnbWVzc2FnZSc6aW1lc3NhZ2V9O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vc2VuZCBkYXRhIHRvIFwic2hvdXQucGhwXCIgdXNpbmcgalF1ZXJ5ICQucG9zdCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQucG9zdCgnc2hvdXQucGhwJywgcG9zdF9kYXRhLCBmdW5jdGlvbihkYXRhKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYXBwZW5kIGRhdGEgaW50byBtZXNzYWdlYm94IHdpdGggalF1ZXJ5IGZhZGUgZWZmZWN0IVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJChkYXRhKS5oaWRlKCkuYXBwZW5kVG8oJy5tZXNzYWdlX2JveCcpLmZhZGVJbigpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2tlZXAgc2Nyb2xsZWQgdG8gYm90dG9tIG9mIGNoYXQhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsdG9oID0gJCgnLm1lc3NhZ2VfYm94JylbMF0uc2Nyb2xsSGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLm1lc3NhZ2VfYm94Jykuc2Nyb2xsVG9wKHNjcm9sbHRvaCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vcmVzZXQgdmFsdWUgb2YgbWVzc2FnZSBib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNzaG91dF9tZXNzYWdlJykudmFsKCcnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5mYWlsKGZ1bmN0aW9uKGVycikge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYWxlcnQgSFRUUCBzZXJ2ZXIgZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoZXJyLnN0YXR1c1RleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vdG9nZ2xlIGhpZGUvc2hvdyBzaG91dCBib3hcbiAgICAgICAgICAgICAgICAgICAgJChcIi5jbG9zZV9idG5cIikuY2xpY2soZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vZ2V0IENTUyBkaXNwbGF5IHN0YXRlIG9mIC50b2dnbGVfY2hhdCBlbGVtZW50XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG9nZ2xlU3RhdGUgPSAkKCcudG9nZ2xlX2NoYXQnKS5jc3MoJ2Rpc3BsYXknKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy90b2dnbGUgc2hvdy9oaWRlIGNoYXQgYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcudG9nZ2xlX2NoYXQnKS5zbGlkZVRvZ2dsZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3VzZSB0b2dnbGVTdGF0ZSB2YXIgdG8gY2hhbmdlIGNsb3NlL29wZW4gaWNvbiBpbWFnZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYodG9nZ2xlU3RhdGUgPT0gJ2Jsb2NrJylcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiLmhlYWRlciBkaXZcIikuYXR0cignY2xhc3MnLCAnb3Blbl9idG4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIuaGVhZGVyIGRpdlwiKS5hdHRyKCdjbGFzcycsICdjbG9zZV9idG4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8qZG9uZSBhZGRpbmcgbXkgY3VzdG9tIHNjcmlwdHMqL1xuICAgICAgICAgICAgLy9jcmVhdGVzIG1hcmt1cCBmb3IgYSBuZXcgcG9wdXAuIEFkZHMgdGhlIGlkIHRvIHBvcHVwcyBhcnJheS5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHJlZ2lzdGVyX3BvcHVwKGlkLCBuYW1lKVxuICAgICAgICAgICAge1xuXG4gICAgICAgICAgICAgICAgZm9yKHZhciBpaWkgPSAwOyBpaWkgPCBwb3B1cHMubGVuZ3RoOyBpaWkrKylcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIC8vYWxyZWFkeSByZWdpc3RlcmVkLiBCcmluZyBpdCB0byBmcm9udC5cbiAgICAgICAgICAgICAgICAgICAgaWYoaWQgPT0gcG9wdXBzW2lpaV0pXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEFycmF5LnJlbW92ZShwb3B1cHMsIGlpaSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVwcy51bnNoaWZ0KGlkKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsY3VsYXRlX3BvcHVwcygpO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50PSc8ZGl2IGNsYXNzPVwicG9wdXAtYm94IGNoYXQtcG9wdXBcIiBpZD1cIicrIGlkICsnXCI+JztcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudCA9ZWxlbWVudCArICc8ZGl2IHN0eWxlPVwiYmFja2dyb3VuZDojZGRkO2NvbG9yOiNmZmY7XCIgY2xhc3M9XCJoZWFkZXJcIj5Hcm91cDxkaXYgY2xhc3M9XCJjbG9zZV9idG5cIj4mbmJzcDs8L2Rpdj48L2Rpdj4nO1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50ID1lbGVtZW50ICsgJyA8ZGl2IGNsYXNzPVwidG9nZ2xlX2NoYXRcIj4nO1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50ID1lbGVtZW50ICsgJzxkaXYgY2xhc3M9XCJtZXNzYWdlX2JveFwiPjwvZGl2Pic7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQgPWVsZW1lbnQgKyAnPHRleHRhcmVhIHN0eWxlPVwiYmFja2dyb3VuZDp3aGl0ZTttYXJnaW4tdG9wOjE4MHB4O1wiIGlkPVwiY2hhdFwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgcm93cz1cIjNcIiByZXF1aXJlZD1cInJlcXVpcmVkXCI+PC90ZXh0YXJlYT4nO1xuICAgICAgICAgICAgICAgICAgICAvLyBlbGVtZW50ID1lbGVtZW50ICtcbiAgICAgICAgICAgICAgICAgICAgLy8gZWxlbWVudCA9IGVsZW1lbnQgKyAnPGRpdiBjbGFzcz1cInBvcHVwLWhlYWQtcmlnaHRcIj48YSBocmVmPVwiamF2YXNjcmlwdDpjbG9zZV9wb3B1cChcXCcnKyBpZCArJ1xcJyk7XCI+JiMxMDAwNTs8L2E+PC9kaXY+JztcbiAgICAgICAgICAgICAgICAvLyB2YXIgZWxlbWVudCA9ICc8ZGl2IGNsYXNzPVwicG9wdXAtYm94IGNoYXQtcG9wdXBcIiBpZD1cIicrIGlkICsnXCI+JztcbiAgICAgICAgICAgICAgICAvLyBlbGVtZW50ID0gZWxlbWVudCArICc8ZGl2IGNsYXNzPVwicG9wdXAtaGVhZFwiPic7XG4gICAgICAgICAgICAgICAgLy8gZWxlbWVudCA9IGVsZW1lbnQgKyAnPGRpdiBjbGFzcz1cInBvcHVwLWhlYWQtbGVmdFwiPicrIG5hbWUgKyc8L2Rpdj4nO1xuICAgICAgICAgICAgICAgIC8vIGVsZW1lbnQgPSBlbGVtZW50ICsgJzxkaXYgY2xhc3M9XCJwb3B1cC1oZWFkLXJpZ2h0XCI+PGEgaHJlZj1cImphdmFzY3JpcHQ6Y2xvc2VfcG9wdXAoXFwnJysgaWQgKydcXCcpO1wiPiYjMTAwMDU7PC9hPjwvZGl2Pic7XG4gICAgICAgICAgICAgICAgLy8gZWxlbWVudCA9IGVsZW1lbnQgKyAnPGRpdiBzdHlsZT1cImNsZWFyOiBib3RoO1wiPjwvZGl2PjwvZGl2PjxwIG9uY2xpY2s9XCJ0KClcIiBpZD1cIm1cIj48L3A+PGRpdiBjbGFzcz1cInBvcHVwLW1lc3NhZ2VzXCI+PHRleHRhcmVhICBjbGFzcz1cInRvcFwiPjwvdGV4dGFyZWE+PC9kaXY+PC9kaXY+JztcblxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYm9keVwiKVswXS5pbm5lckhUTUwgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJvZHlcIilbMF0uaW5uZXJIVE1MICsgZWxlbWVudDtcblxuICAgICAgICAgICAgICAgIHBvcHVwcy51bnNoaWZ0KGlkKTtcblxuICAgICAgICAgICAgICAgIGNhbGN1bGF0ZV9wb3B1cHMoKTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL2NhbGN1bGF0ZSB0aGUgdG90YWwgbnVtYmVyIG9mIHBvcHVwcyBzdWl0YWJsZSBhbmQgdGhlbiBwb3B1bGF0ZSB0aGUgdG9hdGFsX3BvcHVwcyB2YXJpYWJsZS5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZV9wb3B1cHMoKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHZhciB3aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgICAgICAgICAgIGlmKHdpZHRoIDwgNTQwKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdG90YWxfcG9wdXBzID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgd2lkdGggPSB3aWR0aCAtIDIwMDtcbiAgICAgICAgICAgICAgICAgICAgLy8zMjAgaXMgd2lkdGggb2YgYSBzaW5nbGUgcG9wdXAgYm94XG4gICAgICAgICAgICAgICAgICAgIHRvdGFsX3BvcHVwcyA9IHBhcnNlSW50KHdpZHRoLzMyMCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZGlzcGxheV9wb3B1cHMoKTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL3JlY2FsY3VsYXRlIHdoZW4gd2luZG93IGlzIGxvYWRlZCBhbmQgYWxzbyB3aGVuIHdpbmRvdyBpcyByZXNpemVkLlxuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgY2FsY3VsYXRlX3BvcHVwcyk7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgY2FsY3VsYXRlX3BvcHVwcyk7XG4vL0F1dGhvciBNdXJhZ2lqaW1hbmEgUmljaGFyZCBzdHJpbXVwQGdtYWlsLmNvbSBiZWFzdGFyNDU3QGdtYWlsLmNvbVxuXG4gIHN5bmMuY29udHJvbGxlcignTWVzc2FnZUNvbnRyb2xsZXInLCBbXCIkaHR0cFwiLCBcIiRzY29wZVwiLCBcIiRxXCIsIFwiJHJvb3RTY29wZVwiLCBmdW5jdGlvbiAoJGh0dHAsJHNjb3BlLCRxLCRyb290U2NvcGUpIHtcbiAgICAgICAkLmFqYXhTZXR1cCh7XG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgJ1gtQ1NSRi1UT0tFTic6ICQoJ21ldGFbbmFtZT1cImNzcmYtdG9rZW5cIl0nKS5hdHRyKCdjb250ZW50JylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICBcbiAgICAgICAgICRzY29wZS5uYW1lPVwiTXVyYWdpamltYW5hXCI7XG4gICAgICAgICB2YXIgcG9zdHM9JGh0dHAuZ2V0KCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS9wb3N0JyksXG4gICAgICAgICAgICAgaW5zdGl0dXRpb25zPSRodHRwLmdldCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvcG9zdCcpO1xuXG4gICAgICAgICAgJHEuYWxsKFtwb3N0cyxpbnN0aXR1dGlvbnNdKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICAgICAgdmFyIHRtcCA9IFtdO1xuICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHJlc3VsdCwgZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgdG1wLnB1c2gocmVzcG9uc2UuZGF0YSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB0bXA7XG4gICAgICAgICAgfSkudGhlbihmdW5jdGlvbih0bXBSZXN1bHQpIHtcbiAgICAgICAgICAgICAgLy8gcG9zdHM9dG1wUmVzdWx0O1xuICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhhbmd1bGFyLnRvSnNvbih0bXBSZXN1bHRbMF0sIHRydWUpKTtcbiAgICAgICAgICAgICRzY29wZS5wb3N0cyA9IHRtcFJlc3VsdFswXTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICQoJy5wb3N0LWluJykuYXR3aG8oe1xuICAgICAgICAgICAgYXQ6IFwiQFwiLFxuICAgICAgICAgICAgZGF0YTpbJ1BldGVyJywgJ1RvbScsICdBbm5lJ10sXG5cbiAgICAgICAgIH0pO1xuXG4gIH1dKTtcblxuXG5zeW5jLmNvbnRyb2xsZXIoXCJUdXRvcmlhbE1vZGFsXCIsIFtcIiRzY29wZVwiLCBmdW5jdGlvbigkc2NvcGUpIHtcblxuICAkc2NvcGUub3BlbiA9IGZ1bmN0aW9uKCkge1xuICAgICRzY29wZS5zaG93TW9kYWwgPSB0cnVlO1xuICB9O1xuICAkc2NvcGUub2sgPSBmdW5jdGlvbigpIHtcbiAgICAkc2NvcGUuc2hvd01vZGFsID0gZmFsc2U7XG4gIH07XG5cbiAgJHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uKCkge1xuICAgICRzY29wZS5zaG93TW9kYWwgPSBmYWxzZTtcbiAgfTtcblxufV0pO1xuXG5zeW5jLmNvbnRyb2xsZXIoXCJTdHJpbWluTW9kYWxcIiwgW1wiJHNjb3BlXCIsIGZ1bmN0aW9uKCRzY29wZSkge1xuXG4gICRzY29wZS5vcGVuID0gZnVuY3Rpb24oKSB7XG4gICAgJHNjb3BlLnNob3dNb2RhbCA9IHRydWU7XG4gIH07XG4gICRzY29wZS5vayA9IGZ1bmN0aW9uKCkge1xuICAgICRzY29wZS5zaG93TW9kYWwgPSBmYWxzZTtcbiAgfTtcblxuICAkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24oKSB7XG4gICAgJHNjb3BlLnNob3dNb2RhbCA9IGZhbHNlO1xuICB9O1xuXG59XSk7XG4iLCIvKiBnbG9iYWwgc3luYyAqL1xuLyoqXG4gKiAgQ3JlYXRlZCBieSBNdXJhZ2lqaW1hbmEgUmljaGFyZCBvbiAxMC8yMC8xNS5cbiAqICBCZWFzdGFyNDU3QGdtYWlsLmNvbSAsIHN5bmNAZ21haWwuY29tICwgY2hlY2sgd2l0aCBtZSFcbiAqL1xuLypJIHVzZSBDYW1lbENhc2Ugd2hpbGUgcmVuYW1pbmcgbXkgZnVuY3Rpb25zICovXG4vKmFuZCBpIHVzZSBzbmFrZSBjYXNlIHdoaWxlIHJlbmFtaW5nIHZhcmlhYmxlcyAqL1xuLypwb3N0IHNlcnZpY2UgKi9cblxuc3luYy5zZXJ2aWNlKCdQb3N0JywgWyckaHR0cCcsICckcScsICckcm9vdFNjb3BlJywgZnVuY3Rpb24gUG9zdCgkaHR0cCwgJHEsICRyb290U2NvcGUpIHtcbiAgICB0aGlzLmdldFBvc3QgPSBmdW5jdGlvbiAodXNlcl9pZCkge1xuICAgICAgICB2YXIgZGlmZmVyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICAkaHR0cC5nZXQoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL21lL3Bvc3RzP3VzZXJfaWQnICsgdXNlcl9pZCwge2NhY2hlOiBmYWxzZX0pXG4gICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAocmVzcG9uc2UpIHtcblxuICAgICAgICAgICAgICAgIGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBkaWZmZXJlZC5yZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuICAgIH07XG4gICAgdGhpcy5wYXJ0aWNpcGF0ZSA9IGZ1bmN0aW9uKG9iail7XG4gICAgICB2YXIgZGlmZmVyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgJGh0dHAucHV0KCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS9tZS9wb3N0cy8nLG9iailcbiAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgZGlmZmVyZWQucmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICB9KVxuICAgICAgLmVycm9yKGZ1bmN0aW9uKGVycil7XG4gICAgICAgIGRpZmZlcmVkLnJlamVjdChlcnIpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcbiAgICB9O1xuICAgIHRoaXMuY3JlYXRlUG9zdCA9IGZ1bmN0aW9uIChwb3N0KSB7XG4gICAgICAgIHZhciBkaWZmZXJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgICRodHRwLnBvc3QoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL21lL3Bvc3RzJywgcG9zdClcbiAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBkaWZmZXJlZC5yZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuICAgIH07XG4gICAgdGhpcy5kZWxldGVQb3N0ID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIHZhciBkaWZmZXJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgICRodHRwLmRlbGV0ZSgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvbWUvcG9zdHMvJyArIGlkKVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgZGlmZmVyZWQucmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGRpZmZlcmVkLnJlamVjdChlcnJvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGRpZmZlcmVkLnByb21pc2U7XG4gICAgfTtcbiAgICByZXR1cm4gdGhpcztcbn1dKTtcblxuc3luYy5jb250cm9sbGVyKCdQb3N0aW5nQ29udHJvbGxlcicsIFtcbiAgJyRzY29wZScsXG4gICdQb3N0JyxcbiAgJyR0aW1lb3V0JyxcbiAgJ1VzZXInLFxuICAnJGludGVydmFsJyxcbiAgJ05vdGlmaWNhdGlvbicsXG4gIC8vICckaW9uaWNMaXN0RGVsZWdhdGUnLFxuICAnJGxvZycsXG4gICd1c2VySW50ZXJhY3Rpb25Ob3RpZmljYXRpb24nLFxuICBmdW5jdGlvbiAoXG4gICRzY29wZSxcbiAgUG9zdCxcbiAgJHRpbWVvdXQsXG4gIFVzZXIsXG4gICRpbnRlcnZhbCxcbiAgTm90aWZpY2F0aW9uLFxuICAkaW9uaWNMaXN0RGVsZWdhdGUsXG4gICRsb2csXG4gIHVzZXJJbnRlcmFjdGlvbk5vdGlmaWNhdGlvblxuKSB7XG5cbiAgICAkc2NvcGUuaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJHNjb3BlLnBvc3RMb2FkZXIoKTtcbiAgICAgICAgJHNjb3BlLmdldFVzZXIoKTtcblxuICAgIH07XG5cbiAgICAkaW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICAkc2NvcGUucG9zdExvYWRlcigpO1xuICAgIH0sIDgwMDApO1xuICAgICRzY29wZS5nZXRVc2VyID1mdW5jdGlvbigpe1xuXG4gICAgICBVc2VyLl9pZCgpXG4gICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG5cbiAgICAgICAgJHNjb3BlLnVzZXIgPSByZXNwb25zZTtcbiAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgICAgfSxmdW5jdGlvbihlcnIpe1xuICAgICAgICAvL3F1aXQgc2xpbnRseVxuICAgICAgfSk7XG4gICAgfTtcbiAgICAkc2NvcGUubG9hZE1vcmUgPSBmdW5jdGlvbigpe1xuXG4gICAgfTtcbiAgICAkc2NvcGUucGFydGljaXBhdGVJbnRvUG9zdCA9IGZ1bmN0aW9uKHBvc3QsdXNlcil7XG4gICAgICAvLyBjb25zb2xlLmxvZyh1c2VyKTtcbiAgICAgIHZhciBvYmogPXtcbiAgICAgICAgJ3Bvc3RfaWQnOnBvc3QsXG4gICAgICAgICd1c2VyX2lkJzp1c2VyXG4gICAgICB9O1xuICAgICAgUG9zdC5wYXJ0aWNpcGF0ZShvYmopXG4gICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgICRzY29wZS5wb3N0TG9hZGVyKCk7XG4gICAgICB9LGZ1bmN0aW9uKGVycil7XG4gICAgICAgIC8vcXVpdCBzbGVudGx5XG5cbiAgICAgIH0pO1xuICAgIH07XG4gICAgJHNjb3BlLnBvc3RMb2FkZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICRzY29wZS5kYXRhTG9hZGluZyA9IHRydWU7XG4gICAgICAgIFBvc3QuZ2V0UG9zdCgpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAodHJlZSkge1xuXG4gICAgICAgICAgICAgICAgJHNjb3BlLnBvc3RzID10cmVlO1xuICAgICAgICAgICAgICAgIC8vbmF2aWdhdGUgdHJvdWdoIHRyZWUgcmVzcG9uc2Ugd2hpY2ggaXMgcmVxdWlyZSBtdWNoIGF0dGVudGlvblxuICAgICAgICAgICAgICAgICRzY29wZS5mcmllbmRzPVtdO1xuICAgICAgICAgICAgICAgICRzY29wZS5yZXBsaWVzPVtdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHJlZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHJlZVtpXS5oYXNPd25Qcm9wZXJ0eSgnZnJpZW5kcycpICYmIHRyZWVbaV1bJ3JlcGxpZXMnXSAgJiYgdHJlZVtpXVsnZnJpZW5kcyddICkge1xuICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5mcmllbmRzLnB1c2godHJlZVtpXS5mcmllbmRzKTtcbiAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVwbGllcy5wdXNoKHRyZWVbaV0ucmVwbGllcyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHJlZVtpXS5oYXNPd25Qcm9wZXJ0eSgnZnJpZW5kcycpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZnJpZW5kcyA9IGZyaWVuZHMuY29uY2F0KHRyYXZlcnNlKHRyZWVbaV0uZnJpZW5kcykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnJlcGxpZXMgPSByZXBsaWVzLmNvbmNhdCh0cmF2ZXJzZSh0cmVlW2ldLnJlcGxpZXMpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgICRzY29wZS5pbWFnZURlc2MgPSBmdW5jdGlvbihpbmRleCl7XG4gICAgICAvL3Nob3cgaW1hZ2VzIHdpdGggZGlmZmVyZW50IHBpeGVsXG4gICAgICBzd2l0Y2ggKGluZGV4KSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICByZXR1cm4gJzYwcHgnO1xuXG4gICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgcmV0dXJuIFwiNjBweFwiO1xuXG4gICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgcmV0dXJuIFwiNjBweFwiO1xuXG4gICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgcmV0dXJuIFwiNjBweFwiO1xuXG4gICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgcmV0dXJuIFwiNjBweFwiO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBcIjYwcHhcIjtcblxuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coaW5kZXgpO1xuICAgIH07XG4gICAgJHNjb3BlLnNoYXJlID0gZnVuY3Rpb24oaWQpe1xuICAgICAgICAkaW9uaWNMaXN0RGVsZWdhdGUuY2xvc2VPcHRpb25CdXR0b25zKCk7XG4gICAgICAgICRsb2cuaW5mbyhpZCk7XG4gICAgfTtcbiAgICAkc2NvcGUuY3JlYXRlUG9zdCA9IGZ1bmN0aW9uIChwb3N0aW5nKSB7XG4gICAgICAvL2lmIGltYWdlIGlzIHVwbG9hZGVkIHVwbG9hZGVkXG4gICAgICAgIHZhciBfdGhpcyA9IHsgbWVzc2FnZTogcG9zdGluZyB9O1xuICAgICAgICBQb3N0LmNyZWF0ZVBvc3QoX3RoaXMpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocG9zdENyZWF0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICRzY29wZS5tZXNzYWdlID0gJyc7XG4gICAgICAgICAgICAgICAgICAkc2NvcGUucG9zdHMucHVzaChwb3N0Q3JlYXRlZCk7XG4gICAgICAgICAgICAgICAgICB1c2VySW50ZXJhY3Rpb25Ob3RpZmljYXRpb24uc3VjY2VzcyhcIk5ldyBQb3N0IGZlZWQgY3JlYXRlZCFcIik7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcblxuICAgICAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS5pbml0KCk7XG59XSk7XG5zeW5jLmRpcmVjdGl2ZSgnZmVlZHNVcGxvYWRlcicsW2Z1bmN0aW9uKCl7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdBRScsXG4gICAgcmVwbGFjZTogZmFsc2UsXG4gICAgdGVtcGxhdGVVcmw6ICdBcHAvanMvc2NyaXB0cy92aWV3cy9mZWVkQXR0YWNobWVudC5odG1sJyxcbiAgICBzY29wZToge1xuICAgICAgYWN0aW9uOiAnQCdcbiAgICB9LFxuICAgIGNvbnRyb2xsZXI6IFsnJHNjb3BlJywgZnVuY3Rpb24gKCRzY29wZSkge1xuICAgICAgJHNjb3BlLnByb2dyZXNzID0gMDtcbiAgICAgICRzY29wZS5hdmF0YXIgPSAnJztcbiAgICAgICRzY29wZS5zZW5kRmlsZSA9IGZ1bmN0aW9uKGVsKSB7XG4gICAgICAgIHZhciAkZm9ybSA9ICQoZWwpLnBhcmVudHMoJ2Zvcm0nKTtcbiAgICAgICAgaWYgKCQoZWwpLnZhbCgpID09PSAnJykge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICAkZm9ybS5hdHRyKCdhY3Rpb24nLCAkc2NvcGUuYWN0aW9uKTtcbiAgICAgICAgJHNjb3BlLiRhcHBseShmdW5jdGlvbigpIHtcbiAgICAgICAgICAkc2NvcGUucHJvZ3Jlc3MgPSAwO1xuICAgICAgICB9KTtcbiAgICAgICAgJGZvcm0uYWpheFN1Ym1pdCh7XG4gICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICBcdGJlZm9yZVNlbmQ6IGZ1bmN0aW9uICh4aHIpIHtcbiAgICAgICAgXHRcdHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdhdXRob3JpemF0aW9uJywgJ0JlYXJlciBPcUZpclFTNDRSUVRqUnVXbmlYamRIWkpRWGRDdUV4NDlycThKWTVBJyk7XG4gICAgICAgIFx0fSxcbiAgICAgICAgICB1cGxvYWRQcm9ncmVzczogZnVuY3Rpb24oZXZ0LCBwb3MsIHRvdCwgcGVyY0NvbXBsZXRlKSB7XG4gICAgICAgICAgICAkc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAvLyB1cGxvYWQgdGhlIHByb2dyZXNzIGJhciBkdXJpbmcgdGhlIHVwbG9hZFxuICAgICAgICAgICAgICAvLyAkc2NvcGUucHJvZ3Jlc3MgPSBwZXJjZW50Q29tcGxldGU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVycm9yOiBmdW5jdGlvbihldnQsIHN0YXR1c1RleHQsIHJlc3BvbnNlLCBmb3JtKSB7XG4gICAgICAgICAgICAvLyByZW1vdmUgdGhlIGFjdGlvbiBhdHRyaWJ1dGUgZnJvbSB0aGUgZm9ybVxuICAgICAgICAgICAgJGZvcm0ucmVtb3ZlQXR0cignYWN0aW9uJyk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXNwb25zZSwgc3RhdHVzLCB4aHIsIGZvcm0pIHtcbiAgICAgICAgICAgIHZhciBhciA9ICQoZWwpLnZhbCgpLnNwbGl0KCdcXFxcJyksXG4gICAgICAgICAgICAgIGZpbGVuYW1lID0gIGFyW2FyLmxlbmd0aC0xXTtcbiAgICAgICAgICAgIC8vIHJlbW92ZSB0aGUgYWN0aW9uIGF0dHJpYnV0ZSBmcm9tIHRoZSBmb3JtXG4gICAgICAgICAgICAkZm9ybS5yZW1vdmVBdHRyKCdhY3Rpb24nKTtcbiAgICAgICAgICAgICRzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICRzY29wZS5hdmF0YXIgPSBmaWxlbmFtZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9XSxcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbSwgYXR0cnMsIGN0cmwpIHtcblxuICAgICAgZWxlbS5maW5kKCcuZmFrZS11cGxvYWRlcicpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICBlbGVtLmZpbmQoJ2lucHV0W3R5cGU9XCJmaWxlXCJdJykuY2xpY2soKTtcbiAgICAgIH0pO1xuXG4gICAgfVxuICB9O1xufV0pO1xuIiwiLyogZ2xvYmFsICR1aWJNb2RhbEluc3RhbmNlICovXG4vKiBnbG9iYWwgTW9kYWxJbnN0YW5jZUN0cmwgKi9cbi8qIGdsb2JhbCAkdWliTW9kYWwgKi9cbi8qIGdsb2JhbCBzeW5jICovXG4vKiBnbG9iYWwgc3luYyAqL1xuc3luYy5jb250cm9sbGVyKCdGaWxlc0NvbnRyb2xsZXInLFxuIFtcblx0JyRzY29wZScsJ0ZpbGVzJywnJGxvZycsJyR3aW5kb3cnLCdVc2VyJywnJHVpYk1vZGFsJywnJGludGVydmFsJywncGRmRGVsZWdhdGUnLCckdGltZW91dCcsJyRzdGF0ZVBhcmFtcycsJyRyb290U2NvcGUnLCckZXhjZXB0aW9uSGFuZGxlcicsJ0ZldGNoZXInLCBmdW5jdGlvbiAoXG5cdFx0JHNjb3BlLCBGaWxlcywkbG9nLCR3aW5kb3csVXNlciwkdWliTW9kYWwsJGludGVydmFsLHBkZkRlbGVnYXRlLCR0aW1lb3V0LCRzdGF0ZVBhcmFtcywkcm9vdFNjb3BlLCRleGNlcHRpb25IYW5kbGVyLEZldGNoZXIpIHtcblxuXHQgICRzY29wZS5pbml0ID0gZnVuY3Rpb24oKXtcbiAgICAgIC8vIGFsZXJ0KCdoZXJlIEkgYW0gY2FsbGVkJyk7XG5cbiAgICAgIC8vbG9hZCBhbGwgYm94IGZpbGVzXG5cdFx0ICAgICRzY29wZS5hbGwoKTtcbiAgICAgICAgJHNjb3BlLmNyYXp5KCk7XG5cdCAgfTtcblxuXG5cdCAgLy8gJGludGVydmFsKGZ1bmN0aW9uICgpIHtcblx0XHRcdC8vICRzY29wZS5hbGwoKTtcbiAgIC8vICB9LCA4MDAwKTtcblxuICAgJHNjb3BlLmNyYXp5ID0gZnVuY3Rpb24oKXtcbiAgICAgIHZhciB1c2Vycz0ne3VzZXJze2VtYWlsLGlkfX0nO1xuXG4gICAgICBGZXRjaGVyLmZldGNoKHVzZXJzKVxuICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzKXtcbiAgICAgICAgJHNjb3BlLmNyYXp5ICA9IHJlcztcbiAgICAgICAgY29uc29sZS5sb2cocmVzKTtcblxuICAgICAgfSwgZnVuY3Rpb24oZXJyb3Ipe1xuICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG5cbiAgICAgIH0pXG4gICAgfTtcblx0ICRzY29wZS5hbGwgPSBmdW5jdGlvbigpe1xuICAgICRzY29wZS5kYXRhTG9hZGluZyA9IHRydWU7XG5cdFx0RmlsZXMuZ2V0Qm94RmlsZXMoKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24ocmVzKXtcblxuXHRcdFx0XHQkc2NvcGUuZmlsZXMgXHQ9XHRyZXM7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcyk7XG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcil7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGVycm9yKTtcblx0XHRcdH0pXG4gICAgICAuZmluYWxseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgJHNjb3BlLmRhdGFMb2FkaW5nID0gZmFsc2U7XG4gICAgIH0pO1xuXHQgfTtcbiAgJHNjb3BlLmZpbGVUeXBlICA9IGZ1bmN0aW9uKHR5cGUpIHtcblxuICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgJ3BkZic6XG4gICAgICAgICAgcmV0dXJuICdpbWcvcGRmLnBuZyc7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2ZvbGRlcic6XG4gICAgICAgICAgcmV0dXJuICdpbWcvdW5pdmVyc2FsX2ZvbGRlci5wbmcnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdmb2xkZXIrJzpcbiAgICAgICAgICByZXR1cm4gJ2ltZy9BZGRfZm9sZGVyLnBuZyc7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3BocCc6XG4gICAgICAgICAgcmV0dXJuICdpbWcvY29kZS5wbmcnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICd0eHQnOlxuICAgICAgICByZXR1cm4gJ2ltZy9jb2RlLnBuZyc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdkb2N4JzpcbiAgICAgICAgICByZXR1cm4gJ2ltZy93b3JkLnBuZyc7XG4gICAgICAgIGNhc2UgJ2pwZyc6XG4gICAgICAgICAgcmV0dXJuICdmYSBmYS1pbWFnZSc7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3BuZyc6XG4gICAgICAgICAgcmV0dXJuICdpbWcvdmlkZW8ucG5nJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnanBlZyc6XG4gICAgICAgICAgICByZXR1cm4gJ2ltZy91bml2ZXJzYWxfZm9sZGVyLnBuZyc7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3ppcCc6XG4gICAgICAgICByZXR1cm4gJ2ltZy96aXAucG5nJztcbiAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gJ2ltZy91bml2ZXJzYWxfZm9sZGVyLnBuZyc7XG4gICAgICB9XG4gIH07XG5cblx0JHNjb3BlLmluaXQoKTtcbn1dKTtcblxuc3luYy5kaXJlY3RpdmUoJ2RyYWdnYWJsZScsIGZ1bmN0aW9uKCkge1xuXG4gICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiAnQUUnLFxuICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcbiAgICAgICAgICAgdmFyIGVsID0gZWxlbWVudFswXTtcblxuICAgICAgICAgICAgZWwuZHJhZ2dhYmxlID0gdHJ1ZTtcblxuICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICAgICAgICAnZHJhZ3N0YXJ0JyxcbiAgICAgICAgICAgICAgICBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZHJhZyBldmVudCBzdGFydGVkJyk7XG4gICAgICAgICAgICAgICAgICAgIGUuZGF0YVRyYW5zZmVyLmVmZmVjdEFsbG93ZWQgPSAnbW92ZSc7XG4gICAgICAgICAgICAgICAgICAgIGUuZGF0YVRyYW5zZmVyLnNldERhdGEoJ1RleHQnLCB0aGlzLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKCdkcmFnJyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGZhbHNlXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgICAgICdkcmFnZW5kJyxcbiAgICAgICAgICAgICAgICBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdkcmFnIGV2ZW50IHJlbGVhc2VkJyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZSgnZHJhZycpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBmYWxzZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH07XG59KTtcblxuXG5zeW5jLmNvbnRyb2xsZXIoJ0RyYWdEcm9wQ3RybCcsIFsnJHNjb3BlJywnRmlsZXMnLCckaW50ZXJ2YWwnLGZ1bmN0aW9uKCRzY29wZSxGaWxlcywkaW50ZXJ2YWwpIHtcblxuXG4gICAgJHNjb3BlLmhhbmRsZURyb3AgPSBmdW5jdGlvbigpIHtcbiAgICAgIC8vIDEpaWYgbW92ZWQgb25seSB3aGVuIGl0IHJlYWNoIG9uIGZvbGRlciBhbGxvdyBtb3ZlXG4gICAgICAvLyAyKXRha2UgdGggaWQgb2YgZmlsZSBtb3ZlZCBhbmQgdGFrZSBpZCBvZiBmb2xkZXIgbW92ZSBmaWxlIGludG8gZm9sZGVyXG5cbiAgICAgICAvL21vdmUgdGhlIGl0ZW0gaW50byB3aGVyZSBpdCBpcyBkcm9wZWRcbiAgICAgICAvL3RoZSBmaXJzdCB0aGluZyBoZXJlIGlzIHRvIHJlY2FsY3VsYXRlIHRoZSBhcnJheSB0byBrZWVwIHRoZSBhcnJhbmdlbWVudCBpbnRhY3RcblxuXG4gICAgfVxufV0pO1xuIiwic3luYy5jb250cm9sbGVyKCdwcmV2aWV3Q29udHJvbGxlcicsXG4gW1xuXHQnJHNjb3BlJywncGRmRGVsZWdhdGUnLCckdGltZW91dCcsJyRzdGF0ZVBhcmFtcycsJyRyb290U2NvcGUnLCckZXhjZXB0aW9uSGFuZGxlcicsJ0ZpbGVzJywgJ0ZpbGVTYXZlcicsJ0Jsb2InLGZ1bmN0aW9uIChcblx0XHQkc2NvcGUscGRmRGVsZWdhdGUsJHRpbWVvdXQsJHN0YXRlUGFyYW1zLCRyb290U2NvcGUsJGV4Y2VwdGlvbkhhbmRsZXIsRmlsZXMsRmlsZVNhdmVyLCBCbG9iKSB7XG5cbiAgICAgIC8vZ2V0IG1pbWUgdHlwZSBvZiBhbnlGaWxlIHRoYXQgY29tZXMgaW4gbXkgaG9vZCFcblxuICAgICAgXG5cbiAgICAgIGlmKCRzdGF0ZVBhcmFtcy5wcmV2aWV3ICYmICRzdGF0ZVBhcmFtcy5leHRlbnNpb24gPT0gJ3BkZicpe1xuICAgICAgICAkc2NvcGUucHJldmlld2FibGUgPSB0cnVlO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy9hIHVzZXIgU3RyaW1VcCBpcyBpbmplY3RlZCBpbiBiZWxsb3cgdXJsIGl0IHNob3VsZCBiZSBkeW5hbWljIGluIGZ1dHVyZSFcbiAgICAgICAgICAgICRzY29wZS5wZGZVcmwgPSAkcm9vdFNjb3BlLmVuZFBvaW50KyAnL3ByZXZpZXcvJysgJHN0YXRlUGFyYW1zLnByZXZpZXcrJy9vZi8nKydTdHJpbVVwJztcblxuICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcGRmRGVsZWdhdGUuJGdldEJ5SGFuZGxlKCdteS1wZGYtY29udGFpbmVyJykuem9vbUluKDAuNSk7XG4gICAgICAgICAgICB9LCAzMDAwKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuXG4gICAgICAgICAgIHRocm93KCBuZXcgRXJyb3IoZSkpXG4gICAgICAgIH1cbiAgICAgIH1lbHNlIGlmKCRzdGF0ZVBhcmFtcy5wcmV2aWV3ICYmICRzdGF0ZVBhcmFtcy5leHRlbnNpb24gPT0gJ2pwZyd8fCRzdGF0ZVBhcmFtcy5leHRlbnNpb24gPT0gJ3BuZycpe1xuICAgICAgICAkc2NvcGUuZmlsZV9uYW1lID0gJHN0YXRlUGFyYW1zLnByZXZpZXc7XG4gICAgICAgICRzY29wZS5wcmV2aWV3YWJsZSA9IGZhbHNlO1xuICAgICAgICAvL2FzIGJ5IG5vdyBpbWFnZXMgYXJlIG5vdCByZWFkeSB0byBiZSBwcmV2aWV3ZWQgc28gc2V0IGl0IHRvIGZhbHNlIXByb3ZpZGUgb25seSBvcHRpb24gdG8gZG93bmxvYWQgdGhlbSFcbiAgICAgICAgICAvLyAkc2NvcGUucHJldmlld2FibGUgPSBmYWxzZTtcbiAgICAgICAgICAvLyBGaWxlcy5zaW5nbGUoJHN0YXRlUGFyYW1zLnByZXZpZXcpXG4gICAgICAgICAgLy8gLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgIC8vICAgJHNjb3BlLmltYWdlUHJldmlldyA9IHJlc3BvbnNlO1xuICAgICAgICAgIC8vIH0sZnVuY3Rpb24oZXJyKXtcbiAgICAgICAgICAvLyAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgLy8gfSk7XG4gICAgICB9ZWxzZSB7XG4gICAgICAgIC8vc2VuZCBhIGZpbGVuYW1lIHRvIGEgZG93bmxvYWQgYnV0dG9uXG4gICAgICAgICRzY29wZS5maWxlX25hbWUgPSAkc3RhdGVQYXJhbXMucHJldmlldztcbiAgICAgICAgJHNjb3BlLnByZXZpZXdhYmxlID0gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgICRzY29wZS5nb05leHQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAkc2NvcGUuaW5jcmVtZW50ID0gMTtcbiAgICAgICAgICBwZGZEZWxlZ2F0ZS4kZ2V0QnlIYW5kbGUoJ215LXBkZi1jb250YWluZXInKS5uZXh0KCRzY29wZS5pbmNyZW1lbnQrMSk7XG4gICAgICB9O1xuICAgICAgLy90aGlzIG9wdGlvbiBkb3duIGhlcmUgb2YgZG93bmxvYWRpbmcgYSBmaWxlIHdhcyBuaWNlIGJ1dCBzdGlsbCBoYXZlIHNvbWUgZHJvd2JhY2tcblxuICAgICAgLy8gJHNjb3BlLmRvd25sb2FkID0gZnVuY3Rpb24oZmlsZV9uYW1lKXtcblxuICAgICAgLy8gICBGaWxlcy5kb3dubG9hZEZpbGUoZmlsZV9uYW1lKVxuICAgICAgLy8gICAudGhlbihmdW5jdGlvbihmaWxlX3dyaXRlbil7XG4gICAgICAgICAgICBcbiAgICAgIC8vICAgICBGaWxlcy5nZXRNaW1lVHlwZSgkc3RhdGVQYXJhbXMucHJldmlldylcbiAgICAgIC8vICAgICAgIC50aGVuKGZ1bmN0aW9uKG1pbWVUeXBlKXtcblxuICAgICAgLy8gICAgICAgICB2YXIgYmxvYiA9IG5ldyBCbG9iKFtmaWxlX3dyaXRlbl0sIHtcbiAgICAgIC8vICAgICAgICAgICAgIHR5cGU6IG1pbWVUeXBlLFxuICAgICAgLy8gICAgICAgICB9KTtcbiAgICAgIC8vICAgICAgICAgRmlsZVNhdmVyLnNhdmVBcyhibG9iLCAkc3RhdGVQYXJhbXMucHJldmlldyk7XG5cbiAgICAgIC8vICAgICAgIH0sZnVuY3Rpb24oZXJyKXtcbiAgICAgIC8vICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIC8vICAgICAgIH0pO1xuXG4gICAgICAgICAgXG5cbiAgICAgIC8vICAgfSxmdW5jdGlvbihlcnIpe1xuICAgICAgLy8gICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAvLyAgIH0pO1xuICAgICAgLy8gfTtcbiAgICAgICRzY29wZS5nb1ByZXYgPSBmdW5jdGlvbihwYWdlKXtcbiAgICAgICAgICBwZGZEZWxlZ2F0ZS4kZ2V0QnlIYW5kbGUoJ215LXBkZi1jb250YWluZXInKS5wcmV2KCRzY29wZS5pbmNyZW1lbnQtMSk7XG4gICAgICB9O1xufV0pO1xuXG5zeW5jLmRpcmVjdGl2ZSgnZmlsZURvd25sb2FkJywgW2Z1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICAgICAgICByZXBsYWNlOiB0cnVlLFxuICAgICAgICAgICAgdGVtcGxhdGU6ICc8YnV0dG9uIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0XCIgZGF0YS1uZy1jbGljaz1cImRvd25sb2FkKClcIj48c3BhbiBjbGFzcz1cIlwiPjwvc3Bhbj5Eb3dubG9hZDwvYnV0dG9uPicsXG4gICAgICAgICAgICBjb250cm9sbGVyOiBbJyRyb290U2NvcGUnLCAnJHNjb3BlJywgJyRlbGVtZW50JywgJyRhdHRycycsICckdGltZW91dCcsIGZ1bmN0aW9uICgkcm9vdFNjb3BlLCAkc2NvcGUsICRlbGVtZW50LCAkYXR0cnMsICR0aW1lb3V0KSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnByb2dyZXNzID0gMDtcblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHByZXBhcmUodXJsKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGRpYWxvZ3Mud2FpdChcIlBsZWFzZSB3YWl0XCIsIFwiWW91ciBkb3dubG9hZCBzdGFydHMgaW4gYSBmZXcgc2Vjb25kcy5cIiwgJHNjb3BlLnByb2dyZXNzKTtcbiAgICAgICAgICAgICAgICAgICAgZmFrZVByb2dyZXNzKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHN1Y2Nlc3ModXJsKSB7XG4gICAgICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnZGlhbG9ncy53YWl0LmNvbXBsZXRlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGVycm9yKHJlc3BvbnNlLCB1cmwpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZGlhbG9ncy5lcnJvcihcIkNvdWxkbid0IHByb2Nlc3MgeW91ciBkb3dubG9hZCFcIik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZmFrZVByb2dyZXNzKCkge1xuICAgICAgICAgICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnByb2dyZXNzIDwgOTUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucHJvZ3Jlc3MgKz0gKDk2IC0gJHNjb3BlLnByb2dyZXNzKSAvIDI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdkaWFsb2dzLndhaXQucHJvZ3Jlc3MnLCB7ICdwcm9ncmVzcyc6ICRzY29wZS5wcm9ncmVzcyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWtlUHJvZ3Jlc3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSwgMjUwKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAkc2NvcGUuZG93bmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wcm9ncmVzcyA9IDA7XG4gICAgICAgICAgICAgICAgICAgICQuZmlsZURvd25sb2FkKCdodHRwOi8vc3luY21lLmNvbTo4MDAwL2FwaS92MS9maWxlcy9kb3dubG9hZC9waHB4Rm5saGVEVkU1ajVtY1ZEWC5wbmcvb2YvU3RyaW1VcD9hY2Nlc3NfdG9rZW49QmM3RFdTN0tLUkx0eG1kZFVaSTFUMWxadTJKMVloUjhPTFhHV05abicsIHsgcHJlcGFyZUNhbGxiYWNrOiBwcmVwYXJlLCBzdWNjZXNzQ2FsbGJhY2s6IHN1Y2Nlc3MsIGZhaWxDYWxsYmFjazogZXJyb3IgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfV1cbiAgICAgICAgfVxufV0pO1xuIiwiLyogZ2xvYmFsIHN5bmMgKi9cblwidXNlIHN0cmljdFwiO1xuc3luYy5jb250cm9sbGVyKCdQZW9wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCdQZW9wbGUnLGZ1bmN0aW9uICgkc2NvcGUsIFBlb3BsZSkge1xuXHRcdCRzY29wZS5pbml0ID0gZnVuY3Rpb24oKXtcblx0XHRcdCRzY29wZS5nZXRQZW9wbGVUb0ZvbGxvdygpO1xuXHRcdH1cblx0XHQkc2NvcGUuZ2V0UGVvcGxlVG9Gb2xsb3cgID0gZnVuY3Rpb24oKXtcblx0XHRcdFBlb3BsZS5nZXQoKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuXHRcdFx0XHRcblx0XHRcdFx0JHNjb3BlLnBlb3BsZSA9IHJlc3BvbnNlO1xuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3Ipe1xuXG5cdFx0XHR9KVxuXHRcdH1cblx0XHQkc2NvcGUuJG9uKCdmb2xsb3dNZW1iZXInLGZ1bmN0aW9uKGV2ZW50LHBhcmFtcyl7XG5cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0UGVvcGxlLmZvbGxvdyhwYXJhbXMpXG5cdFx0XHQudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG5cdFx0XHRcdC8vY29uc29sZS5sb2cocmVzcG9uc2UpO1xuXHRcdFx0XHQkc2NvcGUuZ2V0UGVvcGxlVG9Gb2xsb3coKTtcblx0XHRcdH0sZnVuY3Rpb24oZXJyb3Ipe1xuXHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcik7XG5cdFx0XHR9KVxuXHRcdH0pO1xuXHRcdCRzY29wZS5mb2xsb3cgPSBmdW5jdGlvbihpZCl7XG5cdFx0XHR2YXIgZm9sbG93ID17aWQ6IGlkLCBvcHRpb246J2FkZFBlb3BsZSd9O1xuXHRcdFx0JHNjb3BlLiRlbWl0KFwiZm9sbG93TWVtYmVyXCIsIGZvbGxvdyk7XG5cdFx0fVxuXHRcdCRzY29wZS5pbml0KCk7XG59XSk7XG4iLCIvKiBnbG9iYWwgRmlsZXMgKi9cbi8qIGdsb2JhbCBzeW5jICovXG4vKiBnbG9iYWwgJHNjb3BlICovXG4vKiBnbG9iYWwgYW5ndWxhciAqL1xuLypBdXRob3IgTXVyYWdpamltYW5hIEZvdW5kZXIgJiBDRU8gb2Ygc3luYyBjYWxsIGhpbSBvbiBTdHJpbVVwQGdtYWlsLmNvbSovXG5cbnN5bmMuc2VydmljZSgnR3JvdXAnLCBbXG5cdCckaHR0cCcsXG5cdCckcm9vdFNjb3BlJyxcblx0JyRxJyxmdW5jdGlvbiBHcm91cCAoXG5cdFx0JGh0dHAsXG5cdFx0JHJvb3RTY29wZSxcblx0XHQkcSkge1xuXHR0aGlzLmNyZWF0ZSBcdFx0PVx0ZnVuY3Rpb24obmFtZSl7XG5cdFx0dmFyIGRpZmZlcmVkIFx0PVx0JHEuZGVmZXIoKTtcblx0XHQkaHR0cC5wb3N0KCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS9tZS9ncm91cHMnLCBuYW1lKVxuXHRcdC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblx0XHRcdGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuXHRcdH0pXG5cdFx0LmVycm9yKGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRkaWZmZXJlZC5yZWplY3QoZXJyb3IpO1xuXHRcdH0pXG5cdFx0cmV0dXJuIGRpZmZlcmVkLnByb21pc2U7XG5cdH1cblx0dGhpcy5kZWxldGUgXHRcdD1cdGZ1bmN0aW9uKGlkKXtcblx0XHR2YXIgZGlmZmVyZWQgXHQ9XHQkcS5kZWZlcigpO1xuXHRcdCRodHRwLmRlbGV0ZSgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvbWUvZ3JvdXBzLycraWQpXG5cdFx0LnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcG9uc2Upe1xuXHRcdFx0ZGlmZmVyZWQucmVzb2x2ZShyZXNwb25zZSk7XG5cdFx0fSlcblx0XHQuZXJyb3IoZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdGRpZmZlcmVkLnJlamVjdChlcnJvcik7XG5cdFx0fSlcblx0XHRyZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcblx0fVxuXHR0aGlzLm15R3JvdXBzXHRcdD1cdGZ1bmN0aW9uKCl7XG5cdFx0dmFyIGRpZmZlcmVkIFx0PVx0JHEuZGVmZXIoKTtcblxuXHRcdCRodHRwLmdldCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvbWUvZ3JvdXBzJylcblx0XHQuc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSl7XG5cdFx0XHRkaWZmZXJlZC5yZXNvbHZlKHJlc3BvbnNlKTtcblx0XHR9KVxuXHRcdC5lcnJvcihmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0Y29uc29sZS5sb2coJ2RpZmZlcmVkIHNsb3c6JyArIGVycm9yKTtcblx0XHRcdGRpZmZlcmVkLnJlamVjdChlcnJvcik7XG5cdFx0fSlcblx0XHRyZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcblx0fVxuXG5cdHRoaXMuYWRkUGVvcGxlIFx0PVx0ZnVuY3Rpb24obWVtYmVyKXtcblx0XHR2YXIgZGlmZmVyZWQgXHQ9XHQkcS5kZWZlcigpO1xuXHRcdCRodHRwLnB1dCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvbWUvZ3JvdXBzLycrSlNPTi5zdHJpbmdpZnkobWVtYmVyKSlcblx0XHQuc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSl7XG5cdFx0XHRkaWZmZXJlZC5yZXNvbHZlKHJlc3BvbnNlKTtcblx0XHR9KVxuXHRcdC5lcnJvcihmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0ZGlmZmVyZWQucmVzb2x2ZShlcnJvcik7XG5cdFx0fSlcblx0XHRyZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcblx0fTtcblx0dGhpcy5hZGRGaWxlVG9Hcm91cCA9IGZ1bmN0aW9uKGZpbGVPYmope1xuXHRcdHZhciBkaWZmZXJlZCA9ICRxLmRlZmVyKCk7XG5cdFx0JGh0dHAucHV0KCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS9tZS9ncm91cHMvJysgSlNPTi5zdHJpbmdpZnkoZmlsZU9iaikpXG5cdFx0LnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcG9uc2Upe1xuXHRcdFx0ZGlmZmVyZWQucmVzb2x2ZShyZXNwb25zZSk7XG5cdFx0fSlcblx0XHQuZXJyb3IoZnVuY3Rpb24oZXJyKXtcblx0XHRcdGRpZmZlcmVkLnJlamVjdChlcnIpO1xuXHRcdH0pXG5cdFx0cmV0dXJuIGRpZmZlcmVkLnByb21pc2U7XG5cdH1cblx0dGhpcy5yZW1vdmVQZW9wbGUgXHQ9XHRmdW5jdGlvbihtZW1iZXIpe1xuXHRcdHZhciBkaWZmZXJlZCBcdD1cdCRxLmRlZmVyKCk7XG5cdFx0JGh0dHAucHV0KCRyb290U2NvcGUuZW5kUG9pbnQgKycvYXBpL3YxL21lL2dyb3Vwcy8nK0pTT04uc3RyaW5naWZ5KG1lbWJlcikpXG5cdFx0LnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcG9uc2Upe1xuXHRcdFx0ZGlmZmVyZWQucmVzb2x2ZShyZXNwb25zZSk7XG5cdFx0fSlcblx0XHQuZXJyb3IoZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdGRpZmZlcmVkLnJlamVjdChlcnJvcik7XG5cdFx0fSlcblx0XHRyZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcblx0fVxuICB0aGlzLnN1Z2dlc3RQZW9wbGUgPSBmdW5jdGlvbihpZCl7XG5cbiAgICBcdHZhciBkaWZmZXJlZCA9ICRxLmRlZmVyKCk7XG4gICAgXHQkaHR0cC5nZXQoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL21lL2dyb3Vwcy8nICsgaWQpXG4gICAgXHQuc3VjY2VzcyhmdW5jdGlvbihyZXMpe1xuICAgIFx0XHRkaWZmZXJlZC5yZXNvbHZlKHJlcyk7XG4gICAgXHR9KVxuICAgIFx0LmVycm9yKGZ1bmN0aW9uKGVycikge1xuICAgIFx0XHRkaWZmZXJlZC5yZWplY3QoZXJyKTtcbiAgICBcdH0pXG4gICAgXHRyZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcbiAgICB9XG5cdHJldHVybiB0aGlzO1xufV0pO1xuXG5zeW5jLmNvbnRyb2xsZXIoJ0dyb3VwQ29udHJvbGxlcicsIFtcblx0JyRzY29wZScsXG5cdCdHcm91cCcsXG5cdCdVc2VyJyxcblx0J0ZpbGVzJyxcblx0J3VzZXJJbnRlcmFjdGlvbk5vdGlmaWNhdGlvbicsXG5cdGZ1bmN0aW9uIEdyb3VwQ29udHJvbGxlciAoXG5cdFx0JHNjb3BlLFxuXHRcdEdyb3VwLFxuXHRcdFVzZXIsXG5cdFx0RmlsZXMsXG5cdFx0dXNlckludGVyYWN0aW9uTm90aWZpY2F0aW9uXG5cdCkge1xuXHQkc2NvcGUuaW5pdCBcdD1cdGZ1bmN0aW9uKCl7XG5cdFx0JHNjb3BlLm15R3JvdXBzKCk7XG5cblx0XHQkc2NvcGUuc3VnZ2VzdGVkUGVvcGxlVG9Hcm91cCgpOy8vb2ZjYXVzZSB0aGV5IGFyZSBhcmxlYWR5IHlvdXIgZnJpZW5kIGJ1dCBub3QgcGFydGljaXBhbnQgaW4geW91ciBzdHVmZiB3b3JrIVxuXHR9XG5cdCRzY29wZS51c2VySWQgXHRcdFx0XHQ9XHRmdW5jdGlvbigpe1xuXHRcdFVzZXIuX2lkKClcblx0XHQudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG5cdFx0XHQkc2NvcGUudXNlcklkIFx0PVx0cmVzcG9uc2U7XG5cdFx0fSwgZnVuY3Rpb24oZXJyb3Ipe1xuXHRcdFx0Y29uc29sZS5sb2coZXJyb3IpO1xuXHRcdH0pO1xuXHR9O1xuXHQkc2NvcGUubXlHcm91cHMgXHRcdFx0PVx0ZnVuY3Rpb24oKXtcblx0XHRHcm91cC5teUdyb3VwcygpXG5cdFx0LnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuXHRcdFx0JHNjb3BlLmdyb3VwIFx0PSByZXNwb25zZTtcblx0XHR9LCBmdW5jdGlvbihlcnJvcil7XG5cdFx0fSk7XG5cdH07XG5cdCRzY29wZS5zdWdnZXN0ZWRQZW9wbGVUb0dyb3VwIFx0PVx0ZnVuY3Rpb24oaWQpe1xuXHRcdC8vY2xlYXJpbmcgYWxsIHZpZXcgcmVuZGVyZWQgYmVmb3JlXG5cdFx0JHNjb3BlLnNob3dGaWxlcz1mYWxzZTtcblx0XHQkc2NvcGUuc2hvd0dyb3VwPWZhbHNlO1xuXHRcdCRzY29wZS5zaG93Qm94PWZhbHNlO1xuXHRcdGlmKCFhbmd1bGFyLmlzVW5kZWZpbmVkKGlkKSl7XG5cdFx0XHRHcm91cC5zdWdnZXN0UGVvcGxlKGlkKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblx0XHRcdFx0Ly8gY29uc29sZS5sb2cocmVzcG9uc2UpO1xuXHRcdFx0XHQkc2NvcGUuZm9sbG93ZXJzID0gcmVzcG9uc2U7XG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcil7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGVycm9yKTtcblx0XHRcdH0pO1xuXHRcdH1cblx0fTtcblx0JHNjb3BlLiRvbigncmVmcmVzaEdyb3VwJyxmdW5jdGlvbigpe1xuICAgICAgICRzY29wZS5pbml0KCk7XG4gIFx0fSk7XG5cdCRzY29wZS4kb24oJ2dyb3VwRGVsZXRlZCcsIGZ1bmN0aW9uIChldmVudCwgYXJncykge1xuXHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0JHNjb3BlLm15R3JvdXBzKCk7XG5cdH0pO1xuXHQkc2NvcGUuJG9uKCdncm91cFRvYmluZHdpdGgnLCBmdW5jdGlvbiAoZXZlbnQsIGdyb3VwaWQpIHtcblx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAkc2NvcGUuZW1pdHRlZCA9Z3JvdXBpZDtcbiAgICAgICAgaWYoICRzY29wZS5zaG93RmlsZXMgPT0gdHJ1ZSl7XG4gICAgICAgICAgICAkc2NvcGUuc2hvd0ZpbGVzPWZhbHNlO1xuICAgICAgICB9XG4gICAgICAgICRzY29wZS5zdWdnZXN0ZWRQZW9wbGVUb0dyb3VwKGdyb3VwaWQpO1xuICAgICAgICAkc2NvcGUuYWRkUGVvcGxlPXRydWU7XG5cdH0pO1xuXHQkc2NvcGUuZ2V0R3JvdXBGaWxlcyA9IGZ1bmN0aW9uKG93bmVyKXtcbiAgICBGaWxlcy5nZXRHcm91cEZpbGVzKG93bmVyKVxuXHRcdC50aGVuKGZ1bmN0aW9uKHRyZWUpe1xuXHRcdFx0JHNjb3BlLmZpbGVzID0gdHJlZTtcblx0XHRcdFx0Ly9uYXZpZ2F0ZSB0cm91Z2ggdHJlZSByZXNwb25zZSB3aGljaCBpcyByZXF1aXJlIG11Y2ggYXR0ZW50aW9uXG5cdFx0XHRcdCRzY29wZS5ncm91cHM9W107XG5cdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgdHJlZS5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdFx0aWYgKHRyZWVbaV0uaGFzT3duUHJvcGVydHkoJ2dyb3VwcycpICYmIHRyZWVbaV1bJ2dyb3VwcyddKSB7XG5cdFx0XHRcdFx0XHRcdFx0JHNjb3BlLmdyb3Vwcy5wdXNoKHRyZWVbaV0uZnJpZW5kcyk7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKHRyZWVbaV0uaGFzT3duUHJvcGVydHkoJ2dyb3VwcycpKSB7XG5cdFx0XHRcdFx0XHRcdFx0JHNjb3BlLmdyb3VwcyA9IGdyb3Vwcy5jb25jYXQodHJhdmVyc2UodHJlZVtpXS5ncm91cHMpKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdH0sIGZ1bmN0aW9uKGVycm9yKXtcblx0XHRcdGNvbnNvbGUubG9nKGVycm9yKTtcblx0XHR9KTtcbiAgfTtcblx0JHNjb3BlLmdldEJveEZpbGVzID0gZnVuY3Rpb24oZ3JvdXBJZCl7XG5cdFx0JHNjb3BlLmVtaXR0ZWQgPWdyb3VwSWQ7XG4gIFx0RmlsZXMuZ2V0Qm94RmlsZXMoZ3JvdXBJZClcblx0XHQudGhlbihmdW5jdGlvbih0cmVlKXtcblx0XHRcdCRzY29wZS5maWxlcyA9IHRyZWU7XG5cdFx0XHRcdC8vbmF2aWdhdGUgdHJvdWdoIHRyZWUgcmVzcG9uc2Ugd2hpY2ggaXMgcmVxdWlyZSBtdWNoIGF0dGVudGlvblxuXHRcdFx0XHQkc2NvcGUuZ3JvdXBzPVtdO1xuXHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHRyZWUubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRcdGlmICh0cmVlW2ldLmhhc093blByb3BlcnR5KCdncm91cHMnKSAmJiB0cmVlW2ldWydncm91cHMnXSkge1xuXHRcdFx0XHRcdFx0XHRcdCRzY29wZS5ncm91cHMucHVzaCh0cmVlW2ldLmZyaWVuZHMpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmICh0cmVlW2ldLmhhc093blByb3BlcnR5KCdncm91cHMnKSkge1xuXHRcdFx0XHQgICAgICAgICAgICAkc2NvcGUuZ3JvdXBzID0gZ3JvdXBzLmNvbmNhdCh0cmF2ZXJzZSh0cmVlW2ldLmdyb3VwcykpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0fSwgZnVuY3Rpb24oZXJyb3Ipe1xuXHRcdFx0Y29uc29sZS5sb2coZXJyb3IpO1xuXHRcdH0pO1xuICB9O1xuJHNjb3BlLiRvbignc2hvd09wdGlvbnMnLGZ1bmN0aW9uKF8scGFyYW1zKXtcbiAgICAgaWYocGFyYW1zLm93bmVyID09PVwiYm94XCIpe1xuXHRcdFx0ICRzY29wZS5hZGRQZW9wbGU9ZmFsc2U7XG5cdFx0XHQgJHNjb3BlLnNob3dHcm91cD1mYWxzZTtcbiAgICAgICAkc2NvcGUuc2hvd0JveD10cnVlO1xuICAgICAgIGlmKCAkc2NvcGUuYWRkUGVvcGxlID09IHRydWUpe1xuICAgICAgICAgICAkc2NvcGUuYWRkUGVvcGxlPWZhbHNlO1xuICAgICAgIH1cblx0XHRcdCAvL3NldCBmaWxlcyBzY29wZSB0byBzaG93IGZpbGVzIG9mIGJveCBmaWxlcyBpcyByZXBlYXRlZCBpbiB2aWV3IGRpcmVjdGl2ZVxuICAgICAgICRzY29wZS5nZXRCb3hGaWxlcyAocGFyYW1zLmdyb3VwX2lkKTtcblx0XHQgfWVsc2UgaWYgKHBhcmFtcy5vd25lciA9PT0gXCJncm91cFwiKSB7XG5cdFx0XHQgJHNjb3BlLnNob3dCb3g9ZmFsc2U7XG5cdFx0XHQgJHNjb3BlLmFkZFBlb3BsZT1mYWxzZTtcblx0XHRcdCAkc2NvcGUuc2hvd0dyb3VwPXRydWU7XG5cdFx0XHQgaWYoICRzY29wZS5hZGRQZW9wbGUgPT0gdHJ1ZSl7XG5cdFx0XHRcdFx0ICRzY29wZS5hZGRQZW9wbGU9ZmFsc2U7XG5cdFx0XHQgfVxuXHRcdFx0IC8vY2hhbmdlIGZpbGVzIHRvIG5ldyBzY29wZSBmaWxlcyB0byBzaG93IGZpbGVzIG9mIGdyb3VwcyAgaXMgcmVwZWF0ZWQgaW4gdmlldyBkaXJlY3RpdmVcblx0XHRcdCAkc2NvcGUuZ2V0R3JvdXBGaWxlcyAocGFyYW1zLmdyb3VwX2lkKTtcblx0XHQgfVxufSk7XG4kc2NvcGUuaW5pdCgpO1xufV0pO1xuc3luYy5kaXJlY3RpdmUoJ215R3JvdXBzJywgW1xuXHQnR3JvdXAnLFxuXHQnUmVwb3J0Jyxcblx0J3VzZXJJbnRlcmFjdGlvbk5vdGlmaWNhdGlvbicsXG5cdGZ1bmN0aW9uIG15R3JvdXBzIChcblx0XHRHcm91cCxcblx0XHRSZXBvcnQsXG5cdFx0dXNlckludGVyYWN0aW9uTm90aWZpY2F0aW9uLFxuXHRcdE5vdGlmaWNhdGlvbikge1xuXHRyZXR1cm4ge1xuXHRcdHByaW9yaXR5OiAxMCxcblx0XHR0ZW1wbGF0ZVVybDogJ0FwcC9zY3JpcHRzL2pzL2RpcmVjdGl2ZXMvZ3JvdXBzLmh0bWwnLFxuXHRcdHJlc3RyaWN0OiAnRScsXG5cdFx0c2NvcGU6IHtcblx0XHRcdCAgaWQ6ICc9dXNlcklkJyxcbiAgICAgICAgICBncm91cHM6ICc9JyxcbiAgICAgICAgICBmb2xsb3dlcnM6ICc9JyxcbiAgICAgICAgICBlbWl0dGVkOic9JyxcbiAgICAgICAgICBzaG93UGVvcGxlOic9JyxcbiAgICAgICAgICBzaG93R3JvdXAgICA6ICAnPScsXG4gICAgICAgICAgZmlsZXMgICA6ICAnPScsXG5cdCAgXHRcdFx0c2hvd0JveDogICc9J1xuXHRcdH0sXG5cdFx0bGluazogZnVuY3Rpb24gKHNjb3BlLCBpRWxlbWVudCwgaUF0dHJzKSB7XG5cdFx0XHRzY29wZS5kZWxldGVHcm91cCA9IGZ1bmN0aW9uKGlkKXtcblx0XHRcdFx0R3JvdXAuZGVsZXRlKGlkKVxuXHRcdFx0XHQudGhlbihmdW5jdGlvbihyZXMpe1xuXHRcdFx0XHRcdFx0dXNlckludGVyYWN0aW9uTm90aWZpY2F0aW9uLmluZm8oXCJHcm91cCBkZWxldGVkXCIpO1xuXHRcdFx0XHRcdCBcdHNjb3BlLiRlbWl0KFwiZ3JvdXBEZWxldGVkXCIsICdncm91cCBkZWxldGVkJyk7XG5cdFx0XHRcdH0sIGZ1bmN0aW9uKGVycil7XG5cdFx0XHRcdFx0UmVwb3J0LnNlbmQoJ2RlbGV0ZSBncm91cCBlcnJvcjonK2Vycilcblx0XHRcdFx0XHQudGhlbihmdW5jdGlvbigpe30sIGZ1bmN0aW9uKCl7fSk7XG5cdFx0XHRcdH0pXG5cdFx0XHR9O1xuICAgICAgc2NvcGUuY3JlYXRlR3JvdXBcdD1cdGZ1bmN0aW9uKG5hbWUpe1xuICAgICAgICAgIEdyb3VwLmNyZWF0ZShuYW1lKVxuICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHVzZXJJbnRlcmFjdGlvbk5vdGlmaWNhdGlvbi5zdWNjZXNzKFwiQ3JlYXRlZCBuZXcgR3JvdXBcIik7XG4gICAgICAgICAgICAgICAgICAgICAgc2NvcGUuJGVtaXQoJ3JlZnJlc2hHcm91cCcsbnVsbCk7XG4gICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbihlcnJvcil7XG4gICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH07XG5cdFx0XHRzY29wZS5pbml0QWRkUGVvcGxlID0gZnVuY3Rpb24oZ3JvdXBpZCl7XG5cdFx0XHRcdHNjb3BlLiRlbWl0KFwiZ3JvdXBUb2JpbmR3aXRoXCIsIGdyb3VwaWQpO1xuXHRcdFx0fTtcblxuXHRcdFx0c2NvcGUuYWRkUGVvcGxlID0gZnVuY3Rpb24ocGFyYW1zKXtcblx0XHRcdFx0dmFyIG5ld1BhcmFtcyA9e1xuXHRcdFx0XHRcdCdvcHRpb24nOidhZGRNZW1iZXInLFxuXHRcdFx0XHRcdCd1c2VySWQnOnBhcmFtcy51c2VySWQsXG5cdFx0XHRcdFx0J2dyb3VwSWQnOnBhcmFtcy5ncm91cElkXG5cdFx0XHRcdH1cblx0XHRcdFx0aWYoYW5ndWxhci5pc1VuZGVmaW5lZChwYXJhbXMpKXtcblx0XHRcdFx0XHQvL3dvbid0IGhhcHBlbiFvciBpZiB0aSBoYXBwZW4gd2UgcXVpdFxuXHRcdFx0XHR9ZWxzZXtcblxuXHRcdFx0XHRcdEdyb3VwLmFkZFBlb3BsZShuZXdQYXJhbXMpXG5cdFx0XHRcdFx0LnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKXtcblx0XHRcdFx0XHRcdC8vcmVmcmVzaCBncm91cCB3aXRoIG5ldyBtZW1iZXIgc3RhdHVzXG5cdFx0XHRcdFx0XHRcdHVzZXJJbnRlcmFjdGlvbk5vdGlmaWNhdGlvbi5zdWNjZXNzKFwiQWRkZWQgTWVtYmVyIGluIGdyb3VwLlwiKTtcbiAgICAgICAgICAgICAgc2NvcGUuaW5pdEFkZFBlb3BsZShwYXJhbXMuZ3JvdXBJZCk7XG4gICAgICAgICAgICAgIHNjb3BlLiRlbWl0KCdyZWZyZXNoR3JvdXAnLCcnKTtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuXHRcdFx0XHRcdH0sIGZ1bmN0aW9uIChlcnJvcixzdGF0dXMpe1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHNjb3BlLnJlbW92ZVBlb3BsZSA9IGZ1bmN0aW9uKHBhcmFtcyl7XG5cblx0XHRcdFx0dmFyIG5ld1BhcmFtcyA9e1xuXHRcdFx0XHRcdCdvcHRpb24nOidyZW1vdmVNZW1iZXInLFxuXHRcdFx0XHRcdCd1c2VySWQnOnBhcmFtcy51c2VySWQsXG5cdFx0XHRcdFx0J2dyb3VwSWQnOnBhcmFtcy5ncm91cElkXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZihhbmd1bGFyLmlzVW5kZWZpbmVkKHBhcmFtcykpe1xuXHRcdFx0XHRcdC8vd29uJ3QgaGFwcGVuIW9yIGlmIHRpIGhhcHBlbiB3ZSBxdWl0IHRvbyBiYWQgaGllcmFjaHkhXG5cdFx0XHRcdH1lbHNle1xuXHRcdFx0XHRHcm91cC5yZW1vdmVQZW9wbGUobmV3UGFyYW1zKVxuXHRcdFx0XHRcdC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSl7XG5cdFx0XHRcdFx0XHRcdHVzZXJJbnRlcmFjdGlvbk5vdGlmaWNhdGlvbi5pbmZvKFwiUmVtb3ZlZCBNZW1iZXIgaW4gZ3JvdXAuXCIpO1xuXHQgICAgICAgICAgICBzY29wZS5pbml0QWRkUGVvcGxlKHBhcmFtcy5ncm91cElkKTtcblx0ICAgICAgICAgICAgc2NvcGUuJGVtaXQoJ3JlZnJlc2hHcm91cCcsJycpO1xuICAgICAgICAgICAgXHRjb25zb2xlLmxvZyhyZXNwb25zZSk7XG5cdFx0XHRcdFx0fSwgZnVuY3Rpb24gKGVycm9yLHN0YXR1cyl7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHRcdHNjb3BlLnJlbW92ZUZyb21Hcm91cCA9IGZ1bmN0aW9uKCl7XG5cdFx0XHRcdGNvbnNvbGUubG9nKCd3ZSBjYW4gcmVtb3ZlIGZpbGUgaW4gZ3JvdXAnKTtcblx0XHRcdH1cblx0XHRcdHNjb3BlLmFkZEZpbGVUb0dyb3VwID0gZnVuY3Rpb24ocGFyYW1zKXtcblx0XHRcdFx0dmFyIGZpbGVPYmogPXtcblx0XHRcdFx0XHQnb3B0aW9uJzonYWRkRmlsZXMnLFxuXHRcdFx0XHRcdCdmaWxlSWQnOnBhcmFtcy5maWxlSWQsXG5cdFx0XHRcdFx0J2dyb3VwSWQnOnBhcmFtcy5ncm91cElkXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRHcm91cC5hZGRGaWxlVG9Hcm91cChmaWxlT2JqKVxuXHRcdFx0XHQudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2cocmVzcG9uc2UpO1xuXHRcdFx0XHRcdC8vIHVzZXJJbnRlcmFjdGlvbk5vdGlmaWNhdGlvbi5zdWNjZXNzKFwiQSBmaWxlIGlzIGFkZGVkIGluIGdyb3VwXCIpO1xuXHRcdFx0XHR9LGZ1bmN0aW9uKGVycil7XG5cdFx0XHRcdFx0dXNlckludGVyYWN0aW9uTm90aWZpY2F0aW9uLndhcm4oXCJTb21lIGVycm9yIG9jY3VyZWQgZHVyaW5nIGFkZGluZyBmaWxlXCIpO1xuXHRcdFx0XHR9KVxuXG5cdFx0XHR9XG5cdFx0XHRzY29wZS5maWxlc0luQm94ID0gZnVuY3Rpb24oZ3JvdXBpZCl7XG5cdFx0XHRcdHZhciBwYXJhbXMgPXsnZ3JvdXBfaWQnOmdyb3VwaWQsJ293bmVyJzonYm94J307XG5cdFx0XHRcdHNjb3BlLiRlbWl0KCdzaG93T3B0aW9ucycscGFyYW1zKTtcblxuXHRcdFx0fVxuXHRcdFx0c2NvcGUuZmlsZXNJbkdyb3VwID0gZnVuY3Rpb24oZ3JvdXBpZCl7XG5cblx0XHRcdFx0dmFyIHBhcmFtcyA9eydncm91cF9pZCc6Z3JvdXBpZCwnb3duZXInOidncm91cCd9O1xuXHRcdFx0XHRzY29wZS4kZW1pdCgnc2hvd09wdGlvbnMnLHBhcmFtcyk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xufV0pO1xuXG5zeW5jLnNlcnZpY2UoJ1JlcG9ydCcsIFtmdW5jdGlvbiBSZXBvcnQgKCRodHRwLCRxLCRyb290U2NvcGUpIHtcblx0dGhpcy5zZW5kID0gZnVuY3Rpb24oaXNzdWUpe1xuXHRcdHZhciBkaWZmZXJlZCA9ICRxLmRlZmVyKCk7XG5cdFx0JGh0dHAucG9zdCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvaXNzdWVzJywgaXNzdWUpXG5cdFx0LnN1Y2Nlc3MoZnVuY3Rpb24ocmVzKXtcblx0XHRcdGRpZmZlcmVkLnJlc29sdmUocmVzKTtcblx0XHR9KVxuXHRcdC5lcnJvcihmdW5jdGlvbihlcnIpIHtcblx0XHRcdGRpZmZlcmVkLnJlamVjdChlcnIpO1xuXHRcdH0pXG5cdFx0cmV0dXJuIGRpZmZlcmVkLnByb21pc2U7XG5cdH1cblx0cmV0dXJuIHRoaXM7XG59XSk7XG4iLCIvKiBnbG9iYWwgc3luYyAqL1xuc3luYy5zZXJ2aWNlKCdTZXR0aW5ncycsIFsnJGh0dHAnLCckcm9vdFNjb3BlJywnJHEnLGZ1bmN0aW9uICgkaHR0cCwkcm9vdFNjb3BlLCRxKSB7XG5cdHRoaXMuY3VycmVudCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciBkaWZmZXJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgICRodHRwLmdldCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvc2V0dGluZ3MnKVxuICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihyZXNwKXtcbiAgICAgICAgICAgIGRpZmZlcmVkLnJlc29sdmUocmVzcCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5lcnJvcihmdW5jdGlvbihlcnIpe1xuICAgICAgICAgICAgZGlmZmVyZWQucmVqZWN0KGVycik7XG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbn1dKTtcblxuc3luYy5jb250cm9sbGVyKCdTZXR0aW5nc0NvbnRyb2xsZXInLCBbJyRzY29wZScsJ1NldHRpbmdzJywnJGxvZycsIGZ1bmN0aW9uICgkc2NvcGUsU2V0dGluZ3MsJGxvZykge1xuXHQkc2NvcGUuaW5pdCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICRzY29wZS5sb2FkQ3VycmVudFNldHRpbmdzKCk7XG4gICAgfVxuICAgICAkc2NvcGUubG9hZEN1cnJlbnRTZXR0aW5ncyA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICBTZXR0aW5ncy5jdXJyZW50KCkudGhlbihmdW5jdGlvbihyZXNwKXtcbiAgICAgICAgICAgICAkc2NvcGUuc2V0dGluZ3MgPSByZXNwO1xuICAgICAgICAgfSwgZnVuY3Rpb24oZXJyKXtcbiAgICAgICAgICAgICAkbG9nLmluZm8oJ2VycnJvciBwcmV2ZW50IHByb21pc2UgdG8gYmUgZnVsbGZpbGwnKTtcbiAgICAgICAgIH0pO1xuICAgICB9XG4gICAgICRzY29wZS5pbml0KCk7XG59XSk7XG4iLCIvKiBnbG9iYWwgc3luYyAqL1xuc3luYy5jb250cm9sbGVyKCdTaGFyZUNvbnRyb2xsZXInLCBbXG5cdCckc2NvcGUnLFxuXHQnJHJvb3RTY29wZScsXG5cdCckcm91dGVQYXJhbXMnLFxuXHQnJHJvdXRlJyxcblx0JyRsb2cnLFxuXHQnJHVpYk1vZGFsJyxcblx0J1NoYXJlJyxcblx0J1VzZXInLFxuXHRmdW5jdGlvbiAoXG5cdFx0JHNjb3BlLFxuXHRcdCRyb290U2NvcGUsXG5cdFx0JHJvdXRlUGFyYW1zLFxuXHRcdCRyb3V0ZSxcblx0XHQkbG9nLFxuXHRcdCR1aWJNb2RhbCxcblx0XHRTaGFyZSxcblx0XHRVc2VyXG5cdCkgXG57XG5cblx0JHNjb3BlLnNoYXJlID0gZnVuY3Rpb24oZmlsZV9pZCl7XG5cdFx0Ly8gYWxlcnQoJ2hlcmUnKTtcblx0XHRjb25zb2xlLmxvZyhmaWxlX2lkKTtcblx0fTtcbn1cbl0pO1xuIiwiLyogZ2xvYmFsIHN5bmMgKi9cbi8qIGdsb2JhbCBhbmd1bGFyICovXG4ndXNlIHN0cmljdCc7XG5cbmFuZ3VsYXJcblxuICAgIHN5bmMuY29udHJvbGxlcignVXBsb2FkQ29udHJvbGxlcicsIFsnJHNjb3BlJywgJ0ZpbGVVcGxvYWRlcicsJyRyb290U2NvcGUnLCdGaWxlcycsIGZ1bmN0aW9uKCRzY29wZSwgRmlsZVVwbG9hZGVyLCRyb290U2NvcGUsRmlsZXMpIHtcbiAgICAgICAgdmFyIHVwbG9hZGVyID0gJHNjb3BlLnVwbG9hZGVyID0gbmV3IEZpbGVVcGxvYWRlcih7XG4gICAgICAgICAgICB1cmw6ICRyb290U2NvcGUuZW5kUG9pbnQrJy9hcGkvdjEvdXBsb2FkJ1xuICAgICAgICB9KTtcbiAgICAgICAgLy9GSUxURVJTXG4gICAgICAgIHVwbG9hZGVyLmZpbHRlcnMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiAnY3VzdG9tRmlsdGVyJyxcbiAgICAgICAgICAgIGZuOiBmdW5jdGlvbihpdGVtIC8qe0ZpbGV8RmlsZUxpa2VPYmplY3R9Ki8sIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5xdWV1ZS5sZW5ndGggPCAxMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIC8vQ0FMTEJBQ0tTXG4gICAgICAgIHVwbG9hZGVyLm9uV2hlbkFkZGluZ0ZpbGVGYWlsZWQgPSBmdW5jdGlvbihpdGVtIC8qe0ZpbGV8RmlsZUxpa2VPYmplY3R9Ki8sIGZpbHRlciwgb3B0aW9ucykge1xuICAgICAgICAgICAgY29uc29sZS5pbmZvKCdvbldoZW5BZGRpbmdGaWxlRmFpbGVkJywgaXRlbSwgZmlsdGVyLCBvcHRpb25zKTtcbiAgICAgICAgfTtcbiAgICAgICAgdXBsb2FkZXIub25BZnRlckFkZGluZ0ZpbGUgPSBmdW5jdGlvbihmaWxlSXRlbSkge1xuICAgICAgICAgICAgY29uc29sZS5pbmZvKCdvbkFmdGVyQWRkaW5nRmlsZScsIGZpbGVJdGVtKTtcbiAgICAgICAgfTtcbiAgICAgICAgdXBsb2FkZXIub25BZnRlckFkZGluZ0FsbCA9IGZ1bmN0aW9uKGFkZGVkRmlsZUl0ZW1zKSB7XG4gICAgICAgICAgICBjb25zb2xlLmluZm8oJ29uQWZ0ZXJBZGRpbmdBbGwnLCBhZGRlZEZpbGVJdGVtcyk7XG4gICAgICAgIH07XG4gICAgICAgIHVwbG9hZGVyLm9uQmVmb3JlVXBsb2FkSXRlbSA9IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnb25CZWZvcmVVcGxvYWRJdGVtJywgaXRlbSk7XG4gICAgICAgIH07XG4gICAgICAgIHVwbG9hZGVyLm9uUHJvZ3Jlc3NJdGVtID0gZnVuY3Rpb24oZmlsZUl0ZW0sIHByb2dyZXNzKSB7XG4gICAgICAgICAgICBjb25zb2xlLmluZm8oJ29uUHJvZ3Jlc3NJdGVtJywgZmlsZUl0ZW0sIHByb2dyZXNzKTtcbiAgICAgICAgfTtcbiAgICAgICAgdXBsb2FkZXIub25Qcm9ncmVzc0FsbCA9IGZ1bmN0aW9uKHByb2dyZXNzKSB7XG4gICAgICAgICAgICBjb25zb2xlLmluZm8oJ29uUHJvZ3Jlc3NBbGwnLCBwcm9ncmVzcyk7XG4gICAgICAgIH07XG4gICAgICAgIHVwbG9hZGVyLm9uU3VjY2Vzc0l0ZW0gPSBmdW5jdGlvbihmaWxlSXRlbSwgcmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycykge1xuICAgICAgICAgICAgY29uc29sZS5pbmZvKCdvblN1Y2Nlc3NJdGVtJywgZmlsZUl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpO1xuICAgICAgICB9O1xuICAgICAgICB1cGxvYWRlci5vbkVycm9ySXRlbSA9IGZ1bmN0aW9uKGZpbGVJdGVtLCByZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKSB7XG4gICAgICAgICAgICBjb25zb2xlLmluZm8oJ29uRXJyb3JJdGVtJywgZmlsZUl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpO1xuICAgICAgICB9O1xuICAgICAgICB1cGxvYWRlci5vbkNhbmNlbEl0ZW0gPSBmdW5jdGlvbihmaWxlSXRlbSwgcmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycykge1xuICAgICAgICAgICAgY29uc29sZS5pbmZvKCdvbkNhbmNlbEl0ZW0nLCBmaWxlSXRlbSwgcmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycyk7XG4gICAgICAgIH07XG4gICAgICAgIHVwbG9hZGVyLm9uQ29tcGxldGVJdGVtID0gZnVuY3Rpb24oZmlsZUl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnb25Db21wbGV0ZUl0ZW0nLCBmaWxlSXRlbSwgcmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycyk7XG4gICAgICAgIH07XG4gICAgICAgIHVwbG9hZGVyLm9uQ29tcGxldGVBbGwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBGaWxlcy5nZXRCb3hGaWxlcygpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihyZXMpe1xuICAgICAgICAgICAgICAkc2NvcGUuZmlsZXMgXHQ9XHRyZXM7XG5cbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycm9yKXtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5maW5hbGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZGF0YUxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zb2xlLmluZm8oJ29uQ29tcGxldGVBbGwnKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc29sZS5pbmZvKCd1cGxvYWRlcicsIHVwbG9hZGVyKTtcbiAgICB9XSk7XG4iLCJzeW5jLnNlcnZpY2UoJ3VybFNob3J0ZW5lcicsW2Z1bmN0aW9uKCl7XG4gIHRoaXMubWFrZVNob3J0ID0gZnVuY3Rpb24obG9uZ1VybCl7XG4gICAgcmV0dXJuIGxvbmdVcmw7XG4gIH07XG4gIC8vIHRoaXMubWFrZVNob3J0ID0gZnVuY3Rpb24obG9uZ1VybClcbiAgLy8ge1xuICAvLyAgIC8vICB2YXIgbG9uZ1VybD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxvbmd1cmxcIikudmFsdWU7XG4gIC8vICAgICB2YXIgcmVxdWVzdCA9IGdhcGkuY2xpZW50LnVybHNob3J0ZW5lci51cmwuaW5zZXJ0KHtcbiAgLy8gICAgICdyZXNvdXJjZSc6IHtcbiAgLy8gICAgICAgJ2xvbmdVcmwnOiBsb25nVXJsXG4gIC8vIFx0fVxuICAvLyAgICAgfSk7XG4gIC8vICAgICByZXF1ZXN0LmV4ZWN1dGUoZnVuY3Rpb24ocmVzcG9uc2UpXG4gIC8vIFx0e1xuICAvL1xuICAvLyBcdFx0aWYocmVzcG9uc2UuaWQgIT0gbnVsbClcbiAgLy8gXHRcdHtcbiAgLy8gXHRcdFx0c3RyID1cIjxiPkxvbmcgVVJMOjwvYj5cIitsb25nVXJsK1wiPGJyPlwiO1xuICAvLyBcdFx0XHRzdHIgKz1cIjxiPnlvdXIgRmlsZSBpczo8L2I+IDxhIGhyZWY9J1wiK3Jlc3BvbnNlLmlkK1wiJz5cIityZXNwb25zZS5pZCtcIjwvYT48YnI+XCI7XG4gIC8vIFx0XHRcdHJldHVybiBzdHI7XG4gIC8vIFx0XHR9XG4gIC8vIFx0XHRlbHNlXG4gIC8vIFx0XHR7XG4gIC8vIFx0XHRcdGNvbnNvbGUubG9nKFwiZXJyb3I6IHVuYWJsZSB0byBjcmVhdGUgc2hvcnQgdXJsXCIpO1xuICAvLyBcdFx0fVxuICAvL1xuICAvLyAgICAgfSk7XG4gIC8vICB9XG4gIC8vXG4gIC8vIHRoaXMuZ2V0U2hvcnRJbmZvID0gZnVuY3Rpb24oKVxuICAvLyAge1xuICAvLyAgICAgIHZhciBzaG9ydFVybD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNob3J0dXJsXCIpLnZhbHVlO1xuICAvL1xuICAvLyAgICAgIHZhciByZXF1ZXN0ID0gZ2FwaS5jbGllbnQudXJsc2hvcnRlbmVyLnVybC5nZXQoe1xuICAvLyAgICAgICAgJ3Nob3J0VXJsJzogc2hvcnRVcmwsXG4gIC8vICBcdCAgICAgJ3Byb2plY3Rpb24nOidGVUxMJ1xuICAvLyAgICAgIH0pO1xuICAvLyAgICAgIHJlcXVlc3QuZXhlY3V0ZShmdW5jdGlvbihyZXNwb25zZSlcbiAgLy8gIFx0e1xuICAvLyAgXHRcdGlmKHJlc3BvbnNlLmxvbmdVcmwhPSBudWxsKVxuICAvLyAgXHRcdHtcbiAgLy8gIFx0XHRcdHN0ciA9XCI8Yj5Mb25nIFVSTDo8L2I+XCIrcmVzcG9uc2UubG9uZ1VybCtcIjxicj5cIjtcbiAgLy8gIFx0XHRcdHN0ciArPVwiPGI+Q3JlYXRlIE9uOjwvYj5cIityZXNwb25zZS5jcmVhdGVkK1wiPGJyPlwiO1xuICAvLyAgXHRcdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJvdXRwdXRcIikuaW5uZXJIVE1MID0gc3RyO1xuICAvLyAgXHRcdH1cbiAgLy8gIFx0XHRlbHNlXG4gIC8vICBcdFx0e1xuICAvLyAgXHRcdFx0Y29uc29sZS5sb2coXCJlcnJvcjogdW5hYmxlIHRvIGdldCBVUkwgaW5mb3JtYXRpb25cIik7XG4gIC8vICBcdFx0fVxuICAvL1xuICAvLyAgICAgIH0pO1xuICAvL1xuICAvLyAgfVxuICAvLyAgZnVuY3Rpb24gbG9hZCgpXG4gIC8vICB7XG4gIC8vICBcdGdhcGkuY2xpZW50LnNldEFwaUtleSgnQUl6YVN5RFNuN3o3VjFmNkgzeVhyZ0FsZ1ZHdzUyZFNFbXFBTEljJyk7IC8vZ2V0IHlvdXIgb3dubiBCcm93c2VyIEFQSSBLRVlcbiAgLy8gIFx0Z2FwaS5jbGllbnQubG9hZCgndXJsc2hvcnRlbmVyJywgJ3YxJyxmdW5jdGlvbigpe30pO1xuICAvLyAgfVxuICAvLyAgd2luZG93Lm9ubG9hZCA9IGxvYWQ7XG59XSk7XG4iLCIvL0F1dGhvciBNdXJhZ2lqaW1hbmEgUmljaGFyZCBzdHJpbXVwQGdtYWlsLmNvbSBiZWFzdGFyNDU3QGdtYWlsLmNvbVxuXG4gIHN5bmMuY29udHJvbGxlcignTWVzc2FnZUNvbnRyb2xsZXInLCBmdW5jdGlvbiAoJGh0dHAsJHNjb3BlLCRxLCRyb290U2NvcGUpIHtcbiAgICAgICAkLmFqYXhTZXR1cCh7XG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgJ1gtQ1NSRi1UT0tFTic6ICQoJ21ldGFbbmFtZT1cImNzcmYtdG9rZW5cIl0nKS5hdHRyKCdjb250ZW50JylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICBcbiAgICAgICAgICRzY29wZS5uYW1lPVwiTXVyYWdpamltYW5hXCI7XG4gICAgICAgICB2YXIgcG9zdHM9JGh0dHAuZ2V0KCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS9wb3N0JyksXG4gICAgICAgICAgICAgaW5zdGl0dXRpb25zPSRodHRwLmdldCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvcG9zdCcpO1xuXG4gICAgICAgICAgJHEuYWxsKFtwb3N0cyxpbnN0aXR1dGlvbnNdKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICAgICAgdmFyIHRtcCA9IFtdO1xuICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHJlc3VsdCwgZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgdG1wLnB1c2gocmVzcG9uc2UuZGF0YSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB0bXA7XG4gICAgICAgICAgfSkudGhlbihmdW5jdGlvbih0bXBSZXN1bHQpIHtcbiAgICAgICAgICAgICAgLy8gcG9zdHM9dG1wUmVzdWx0O1xuICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhhbmd1bGFyLnRvSnNvbih0bXBSZXN1bHRbMF0sIHRydWUpKTtcbiAgICAgICAgICAgICRzY29wZS5wb3N0cyA9IHRtcFJlc3VsdFswXTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICQoJy5wb3N0LWluJykuYXR3aG8oe1xuICAgICAgICAgICAgYXQ6IFwiQFwiLFxuICAgICAgICAgICAgZGF0YTpbJ1BldGVyJywgJ1RvbScsICdBbm5lJ10sXG5cbiAgICAgICAgIH0pO1xuXG4gIH0pO1xuIiwiXG5zeW5jLmNvbnRyb2xsZXIoXCJUdXRvcmlhbE1vZGFsXCIsIGZ1bmN0aW9uKCRzY29wZSkge1xuXG4gICRzY29wZS5vcGVuID0gZnVuY3Rpb24oKSB7XG4gICAgJHNjb3BlLnNob3dNb2RhbCA9IHRydWU7XG4gIH07XG4gICRzY29wZS5vayA9IGZ1bmN0aW9uKCkge1xuICAgICRzY29wZS5zaG93TW9kYWwgPSBmYWxzZTtcbiAgfTtcblxuICAkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24oKSB7XG4gICAgJHNjb3BlLnNob3dNb2RhbCA9IGZhbHNlO1xuICB9O1xuXG59KTtcblxuc3luYy5jb250cm9sbGVyKFwiU3RyaW1pbk1vZGFsXCIsIGZ1bmN0aW9uKCRzY29wZSkge1xuXG4gICRzY29wZS5vcGVuID0gZnVuY3Rpb24oKSB7XG4gICAgJHNjb3BlLnNob3dNb2RhbCA9IHRydWU7XG4gIH07XG4gICRzY29wZS5vayA9IGZ1bmN0aW9uKCkge1xuICAgICRzY29wZS5zaG93TW9kYWwgPSBmYWxzZTtcbiAgfTtcblxuICAkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24oKSB7XG4gICAgJHNjb3BlLnNob3dNb2RhbCA9IGZhbHNlO1xuICB9O1xuXG59KTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
