function close_popup(e){for(var t=0;t<popups.length;t++)if(e==popups[t])return Array.remove(popups,t),document.getElementById(e).style.display="none",void calculate_popups()}function display_popups(){var e=220,t=0;for(t;total_popups>t;t++)if(void 0!=popups[t]){var n=document.getElementById(popups[t]);n.style.right=e+"px",e+=320,n.style.display="block"}for(var o=t;o<popups.length;o++){var n=document.getElementById(popups[o]);n.style.display="none"}}function register_popup(e,t){for(var n=0;n<popups.length;n++)if(e==popups[n])return Array.remove(popups,n),popups.unshift(e),void calculate_popups();var o='<div class="popup-box chat-popup" id="'+e+'">';o+='<div style="background:#ddd;color:#fff;" class="header">Group<div class="close_btn">&nbsp;</div></div>',o+=' <div class="toggle_chat">',o+='<div class="message_box"></div>',o+='<textarea style="background:white;margin-top:180px;" id="chat" class="form-control" rows="3" required="required"></textarea>',document.getElementsByTagName("body")[0].innerHTML=document.getElementsByTagName("body")[0].innerHTML+o,popups.unshift(e),calculate_popups()}function calculate_popups(){var e=window.innerWidth;540>e?total_popups=0:(e-=200,total_popups=parseInt(e/320)),display_popups()}!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["angular-file-upload"]=t():e["angular-file-upload"]=t()}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var o=function(e){return e&&e.__esModule?e["default"]:e},r=o(n(1)),i=o(n(2)),s=o(n(3)),a=o(n(4)),u=o(n(5)),c=o(n(6)),l=o(n(7)),f=o(n(8)),p=o(n(9)),d=o(n(10)),m=o(n(11)),v=o(n(12));angular.module(r.name,[]).value("fileUploaderOptions",i).factory("FileUploader",s).factory("FileLikeObject",a).factory("FileItem",u).factory("FileDirective",c).factory("FileSelect",l).factory("FileDrop",f).factory("FileOver",p).directive("nvFileSelect",d).directive("nvFileDrop",m).directive("nvFileOver",v).run(["FileUploader","FileLikeObject","FileItem","FileDirective","FileSelect","FileDrop","FileOver",function(e,t,n,o,r,i,s){e.FileLikeObject=t,e.FileItem=n,e.FileDirective=o,e.FileSelect=r,e.FileDrop=i,e.FileOver=s}])},function(e,t){e.exports={name:"angularFileUpload"}},function(e,t){"use strict";e.exports={url:"/",alias:"file",headers:{authorization:"Bearer Bc7DWS7KKRLtxmddUZI1T1lZu2J1YhR8OLXGWNZn"},queue:[],progress:0,autoUpload:!1,removeAfterUpload:!1,method:"POST",filters:[],formData:[],queueLimit:Number.MAX_VALUE,withCredentials:!1}},function(e,t,n){"use strict";var o=function(e){return e&&e.__esModule?e["default"]:e},r=function(){function e(e,t){for(var n in t){var o=t[n];o.configurable=!0,o.value&&(o.writable=!0)}Object.defineProperties(e,t)}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},s=(o(n(1)),angular.copy),a=angular.extend,u=angular.forEach,c=angular.isObject,l=angular.isNumber,f=angular.isDefined,p=angular.isArray,d=angular.element;e.exports=function(e,t,n,o,m,v){var g=o.File,h=o.FormData,y=function(){function o(t){i(this,o);var n=s(e);a(this,n,t,{isUploading:!1,_nextIndex:0,_failFilterIndex:-1,_directives:{select:[],drop:[],over:[]}}),this.filters.unshift({name:"queueLimit",fn:this._queueLimitFilter}),this.filters.unshift({name:"folder",fn:this._folderFilter})}return r(o,{addToQueue:{value:function(e,t,n){var o=this,r=this.isArrayLikeObject(e)?e:[e],i=this._getFilters(n),s=this.queue.length,a=[];u(r,function(e){var n=new m(e);if(o._isValidFile(n,i,t)){var r=new v(o,e,t);a.push(r),o.queue.push(r),o._onAfterAddingFile(r)}else{var s=i[o._failFilterIndex];o._onWhenAddingFileFailed(n,s,t)}}),this.queue.length!==s&&(this._onAfterAddingAll(a),this.progress=this._getTotalProgress()),this._render(),this.autoUpload&&this.uploadAll()}},removeFromQueue:{value:function(e){var t=this.getIndexOfItem(e),n=this.queue[t];n.isUploading&&n.cancel(),this.queue.splice(t,1),n._destroy(),this.progress=this._getTotalProgress()}},clearQueue:{value:function(){for(;this.queue.length;)this.queue[0].remove();this.progress=0}},uploadItem:{value:function(e){var t=this.getIndexOfItem(e),n=this.queue[t],o=this.isHTML5?"_xhrTransport":"_iframeTransport";n._prepareToUploading(),this.isUploading||(this.isUploading=!0,this[o](n))}},cancelItem:{value:function(e){var t=this.getIndexOfItem(e),n=this.queue[t],o=this.isHTML5?"_xhr":"_form";n&&n.isUploading&&n[o].abort()}},uploadAll:{value:function(){var e=this.getNotUploadedItems().filter(function(e){return!e.isUploading});e.length&&(u(e,function(e){return e._prepareToUploading()}),e[0].upload())}},cancelAll:{value:function(){var e=this.getNotUploadedItems();u(e,function(e){return e.cancel()})}},isFile:{value:function(e){return this.constructor.isFile(e)}},isFileLikeObject:{value:function(e){return this.constructor.isFileLikeObject(e)}},isArrayLikeObject:{value:function(e){return this.constructor.isArrayLikeObject(e)}},getIndexOfItem:{value:function(e){return l(e)?e:this.queue.indexOf(e)}},getNotUploadedItems:{value:function(){return this.queue.filter(function(e){return!e.isUploaded})}},getReadyItems:{value:function(){return this.queue.filter(function(e){return e.isReady&&!e.isUploading}).sort(function(e,t){return e.index-t.index})}},destroy:{value:function(){var e=this;u(this._directives,function(t){u(e._directives[t],function(e){e.destroy()})})}},onAfterAddingAll:{value:function(e){}},onAfterAddingFile:{value:function(e){}},onWhenAddingFileFailed:{value:function(e,t,n){}},onBeforeUploadItem:{value:function(e){}},onProgressItem:{value:function(e,t){}},onProgressAll:{value:function(e){}},onSuccessItem:{value:function(e,t,n,o){}},onErrorItem:{value:function(e,t,n,o){}},onCancelItem:{value:function(e,t,n,o){}},onCompleteItem:{value:function(e,t,n,o){}},onCompleteAll:{value:function(){}},_getTotalProgress:{value:function(e){if(this.removeAfterUpload)return e||0;var t=this.getNotUploadedItems().length,n=t?this.queue.length-t:this.queue.length,o=100/this.queue.length,r=(e||0)*o/100;return Math.round(n*o+r)}},_getFilters:{value:function(e){if(!e)return this.filters;if(p(e))return e;var t=e.match(/[^\s,]+/g);return this.filters.filter(function(e){return-1!==t.indexOf(e.name)})}},_render:{value:function(){t.$$phase||t.$apply()}},_folderFilter:{value:function(e){return!(!e.size&&!e.type)}},_queueLimitFilter:{value:function(){return this.queue.length<this.queueLimit}},_isValidFile:{value:function(e,t,n){var o=this;return this._failFilterIndex=-1,t.length?t.every(function(t){return o._failFilterIndex++,t.fn.call(o,e,n)}):!0}},_isSuccessCode:{value:function(e){return e>=200&&300>e||304===e}},_transformResponse:{value:function(e,t){var o=this._headersGetter(t);return u(n.defaults.transformResponse,function(t){e=t(e,o)}),e}},_parseHeaders:{value:function(e){var t,n,o,r={};return e?(u(e.split("\n"),function(e){o=e.indexOf(":"),t=e.slice(0,o).trim().toLowerCase(),n=e.slice(o+1).trim(),t&&(r[t]=r[t]?r[t]+", "+n:n)}),r):r}},_headersGetter:{value:function(e){return function(t){return t?e[t.toLowerCase()]||null:e}}},_xhrTransport:{value:function(e){var t=this,n=e._xhr=new XMLHttpRequest,o=new h;if(this._onBeforeUploadItem(e),u(e.formData,function(e){u(e,function(e,t){o.append(t,e)})}),"number"!=typeof e._file.size)throw new TypeError("The file specified is no longer valid");o.append(e.alias,e._file,e.file.name),n.upload.onprogress=function(n){var o=Math.round(n.lengthComputable?100*n.loaded/n.total:0);t._onProgressItem(e,o)},n.onload=function(){var o=t._parseHeaders(n.getAllResponseHeaders()),r=t._transformResponse(n.response,o),i=t._isSuccessCode(n.status)?"Success":"Error",s="_on"+i+"Item";t[s](e,r,n.status,o),t._onCompleteItem(e,r,n.status,o)},n.onerror=function(){var o=t._parseHeaders(n.getAllResponseHeaders()),r=t._transformResponse(n.response,o);t._onErrorItem(e,r,n.status,o),t._onCompleteItem(e,r,n.status,o)},n.onabort=function(){var o=t._parseHeaders(n.getAllResponseHeaders()),r=t._transformResponse(n.response,o);t._onCancelItem(e,r,n.status,o),t._onCompleteItem(e,r,n.status,o)},n.open(e.method,e.url,!0),n.withCredentials=e.withCredentials,u(e.headers,function(e,t){n.setRequestHeader(t,e)}),n.send(o),this._render()}},_iframeTransport:{value:function(e){var t=this,n=d('<form style="display: none;" />'),o=d('<iframe name="iframeTransport'+Date.now()+'">'),r=e._input;e._form&&e._form.replaceWith(r),e._form=n,this._onBeforeUploadItem(e),r.prop("name",e.alias),u(e.formData,function(e){u(e,function(e,t){var o=d('<input type="hidden" name="'+t+'" />');o.val(e),n.append(o)})}),n.prop({action:e.url,method:"POST",target:o.prop("name"),enctype:"multipart/form-data",encoding:"multipart/form-data"}),o.bind("load",function(){var n="",r=200;try{n=o[0].contentDocument.body.innerHTML}catch(i){r=500}var s={response:n,status:r,dummy:!0},a={},u=t._transformResponse(s.response,a);t._onSuccessItem(e,u,s.status,a),t._onCompleteItem(e,u,s.status,a)}),n.abort=function(){var i,s={status:0,dummy:!0},a={};o.unbind("load").prop("src","javascript:false;"),n.replaceWith(r),t._onCancelItem(e,i,s.status,a),t._onCompleteItem(e,i,s.status,a)},r.after(n),n.append(r).append(o),n[0].submit(),this._render()}},_onWhenAddingFileFailed:{value:function(e,t,n){this.onWhenAddingFileFailed(e,t,n)}},_onAfterAddingFile:{value:function(e){this.onAfterAddingFile(e)}},_onAfterAddingAll:{value:function(e){this.onAfterAddingAll(e)}},_onBeforeUploadItem:{value:function(e){e._onBeforeUpload(),this.onBeforeUploadItem(e)}},_onProgressItem:{value:function(e,t){var n=this._getTotalProgress(t);this.progress=n,e._onProgress(t),this.onProgressItem(e,t),this.onProgressAll(n),this._render()}},_onSuccessItem:{value:function(e,t,n,o){e._onSuccess(t,n,o),this.onSuccessItem(e,t,n,o)}},_onErrorItem:{value:function(e,t,n,o){e._onError(t,n,o),this.onErrorItem(e,t,n,o)}},_onCancelItem:{value:function(e,t,n,o){e._onCancel(t,n,o),this.onCancelItem(e,t,n,o)}},_onCompleteItem:{value:function(e,t,n,o){e._onComplete(t,n,o),this.onCompleteItem(e,t,n,o);var r=this.getReadyItems()[0];return this.isUploading=!1,f(r)?void r.upload():(this.onCompleteAll(),this.progress=this._getTotalProgress(),void this._render())}}},{isFile:{value:function(e){return g&&e instanceof g}},isFileLikeObject:{value:function(e){return e instanceof m}},isArrayLikeObject:{value:function(e){return c(e)&&"length"in e}},inherit:{value:function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.super_=t}}}),o}();return y.prototype.isHTML5=!(!g||!h),y.isHTML5=y.prototype.isHTML5,y},e.exports.$inject=["fileUploaderOptions","$rootScope","$http","$window","FileLikeObject","FileItem"]},function(e,t,n){"use strict";var o=function(e){return e&&e.__esModule?e["default"]:e},r=function(){function e(e,t){for(var n in t){var o=t[n];o.configurable=!0,o.value&&(o.writable=!0)}Object.defineProperties(e,t)}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},s=(o(n(1)),angular.copy),a=angular.isElement,u=angular.isString;e.exports=function(){var e=function(){function e(t){i(this,e);var n=a(t),o=n?t.value:t,r=u(o)?"FakePath":"Object",s="_createFrom"+r;this[s](o)}return r(e,{_createFromFakePath:{value:function(e){this.lastModifiedDate=null,this.size=null,this.type="like/"+e.slice(e.lastIndexOf(".")+1).toLowerCase(),this.name=e.slice(e.lastIndexOf("/")+e.lastIndexOf("\\")+2)}},_createFromObject:{value:function(e){this.lastModifiedDate=s(e.lastModifiedDate),this.size=e.size,this.type=e.type,this.name=e.name}}}),e}();return e},e.exports.$inject=[]},function(e,t,n){"use strict";var o=function(e){return e&&e.__esModule?e["default"]:e},r=function(){function e(e,t){for(var n in t){var o=t[n];o.configurable=!0,o.value&&(o.writable=!0)}Object.defineProperties(e,t)}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},s=(o(n(1)),angular.copy),a=angular.extend,u=angular.element,c=angular.isElement;e.exports=function(e,t){var n=function(){function n(e,o,r){i(this,n);var l=c(o),f=l?u(o):null,p=l?null:o;a(this,{url:e.url,alias:e.alias,headers:s(e.headers),formData:s(e.formData),removeAfterUpload:e.removeAfterUpload,withCredentials:e.withCredentials,method:e.method},r,{uploader:e,file:new t(o),isReady:!1,isUploading:!1,isUploaded:!1,isSuccess:!1,isCancel:!1,isError:!1,progress:0,index:null,_file:p,_input:f}),f&&this._replaceNode(f)}return r(n,{upload:{value:function(){try{this.uploader.uploadItem(this)}catch(e){this.uploader._onCompleteItem(this,"",0,[]),this.uploader._onErrorItem(this,"",0,[])}}},cancel:{value:function(){this.uploader.cancelItem(this)}},remove:{value:function(){this.uploader.removeFromQueue(this)}},onBeforeUpload:{value:function(){}},onProgress:{value:function(e){}},onSuccess:{value:function(e,t,n){}},onError:{value:function(e,t,n){}},onCancel:{value:function(e,t,n){}},onComplete:{value:function(e,t,n){}},_onBeforeUpload:{value:function(){this.isReady=!0,this.isUploading=!0,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!1,this.isError=!1,this.progress=0,this.onBeforeUpload()}},_onProgress:{value:function(e){this.progress=e,this.onProgress(e)}},_onSuccess:{value:function(e,t,n){this.isReady=!1,this.isUploading=!1,this.isUploaded=!0,this.isSuccess=!0,this.isCancel=!1,this.isError=!1,this.progress=100,this.index=null,this.onSuccess(e,t,n)}},_onError:{value:function(e,t,n){this.isReady=!1,this.isUploading=!1,this.isUploaded=!0,this.isSuccess=!1,this.isCancel=!1,this.isError=!0,this.progress=0,this.index=null,this.onError(e,t,n)}},_onCancel:{value:function(e,t,n){this.isReady=!1,this.isUploading=!1,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!0,this.isError=!1,this.progress=0,this.index=null,this.onCancel(e,t,n)}},_onComplete:{value:function(e,t,n){this.onComplete(e,t,n),this.removeAfterUpload&&this.remove()}},_destroy:{value:function(){this._input&&this._input.remove(),this._form&&this._form.remove(),delete this._form,delete this._input}},_prepareToUploading:{value:function(){this.index=this.index||++this.uploader._nextIndex,this.isReady=!0}},_replaceNode:{value:function(t){var n=e(t.clone())(t.scope());n.prop("value",null),t.css("display","none"),t.after(n)}}}),n}();return n},e.exports.$inject=["$compile","FileLikeObject"]},function(e,t,n){"use strict";var o=function(e){return e&&e.__esModule?e["default"]:e},r=function(){function e(e,t){for(var n in t){var o=t[n];o.configurable=!0,o.value&&(o.writable=!0)}Object.defineProperties(e,t)}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},s=(o(n(1)),angular.extend);e.exports=function(){var e=function(){function e(t){i(this,e),s(this,t),this.uploader._directives[this.prop].push(this),this._saveLinks(),this.bind()}return r(e,{bind:{value:function(){for(var e in this.events){var t=this.events[e];this.element.bind(e,this[t])}}},unbind:{value:function(){for(var e in this.events)this.element.unbind(e,this.events[e])}},destroy:{value:function(){var e=this.uploader._directives[this.prop].indexOf(this);this.uploader._directives[this.prop].splice(e,1),this.unbind()}},_saveLinks:{value:function(){for(var e in this.events){var t=this.events[e];this[t]=this[t].bind(this)}}}}),e}();return e.prototype.events={},e},e.exports.$inject=[]},function(e,t,n){"use strict";var o=function(e){return e&&e.__esModule?e["default"]:e},r=function(){function e(e,t){for(var n in t){var o=t[n];o.configurable=!0,o.value&&(o.writable=!0)}Object.defineProperties(e,t)}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function c(e,t,n){var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:c(r,t,n)}if("value"in o&&o.writable)return o.value;var i=o.get;if(void 0!==i)return i.call(n)},s=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},u=(o(n(1)),angular.extend);e.exports=function(e){var t=function(e){function t(e){a(this,t);var n=u(e,{events:{$destroy:"destroy",change:"onChange"},prop:"select"});i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n),this.uploader.isHTML5||this.element.removeAttr("multiple"),this.element.prop("value",null)}return s(t,e),r(t,{getOptions:{value:function(){}},getFilters:{value:function(){}},isEmptyAfterSelection:{value:function(){return!!this.element.attr("multiple")}},onChange:{value:function(){var e=this.uploader.isHTML5?this.element[0].files:this.element[0],t=this.getOptions(),n=this.getFilters();this.uploader.isHTML5||this.destroy(),this.uploader.addToQueue(e,t,n),this.isEmptyAfterSelection()&&(this.element.prop("value",null),this.element.replaceWith(this.element=this.element.clone(!0)))}}}),t}(e);return t},e.exports.$inject=["FileDirective"]},function(e,t,n){"use strict";var o=function(e){return e&&e.__esModule?e["default"]:e},r=function(){function e(e,t){for(var n in t){var o=t[n];o.configurable=!0,o.value&&(o.writable=!0)}Object.defineProperties(e,t)}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function l(e,t,n){var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:l(r,t,n)}if("value"in o&&o.writable)return o.value;var i=o.get;if(void 0!==i)return i.call(n)},s=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},u=(o(n(1)),angular.extend),c=angular.forEach;e.exports=function(e){var t=function(e){function t(e){a(this,t);var n=u(e,{events:{$destroy:"destroy",drop:"onDrop",dragover:"onDragOver",dragleave:"onDragLeave"},prop:"drop"});i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n)}return s(t,e),r(t,{getOptions:{value:function(){}},getFilters:{value:function(){}},onDrop:{value:function(e){var t=this._getTransfer(e);if(t){var n=this.getOptions(),o=this.getFilters();this._preventAndStop(e),c(this.uploader._directives.over,this._removeOverClass,this),this.uploader.addToQueue(t.files,n,o)}}},onDragOver:{value:function(e){var t=this._getTransfer(e);this._haveFiles(t.types)&&(t.dropEffect="copy",this._preventAndStop(e),c(this.uploader._directives.over,this._addOverClass,this))}},onDragLeave:{value:function(e){e.currentTarget!==this.element[0]&&(this._preventAndStop(e),c(this.uploader._directives.over,this._removeOverClass,this))}},_getTransfer:{value:function(e){return e.dataTransfer?e.dataTransfer:e.originalEvent.dataTransfer}},_preventAndStop:{value:function(e){e.preventDefault(),e.stopPropagation()}},_haveFiles:{value:function(e){return e?e.indexOf?-1!==e.indexOf("Files"):e.contains?e.contains("Files"):!1:!1}},_addOverClass:{value:function(e){e.addOverClass()}},_removeOverClass:{value:function(e){e.removeOverClass()}}}),t}(e);return t},e.exports.$inject=["FileDirective"]},function(e,t,n){"use strict";var o=function(e){return e&&e.__esModule?e["default"]:e},r=function(){function e(e,t){for(var n in t){var o=t[n];o.configurable=!0,o.value&&(o.writable=!0)}Object.defineProperties(e,t)}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function c(e,t,n){var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:c(r,t,n)}if("value"in o&&o.writable)return o.value;var i=o.get;if(void 0!==i)return i.call(n)},s=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},u=(o(n(1)),angular.extend);e.exports=function(e){var t=function(e){function t(e){a(this,t);var n=u(e,{events:{$destroy:"destroy"},prop:"over",overClass:"nv-file-over"});i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n)}return s(t,e),r(t,{addOverClass:{value:function(){this.element.addClass(this.getOverClass())}},removeOverClass:{value:function(){this.element.removeClass(this.getOverClass())}},getOverClass:{value:function(){return this.overClass}}}),t}(e);return t},e.exports.$inject=["FileDirective"]},function(e,t,n){"use strict";var o=function(e){return e&&e.__esModule?e["default"]:e};o(n(1));e.exports=function(e,t,n){return{link:function(o,r,i){var s=o.$eval(i.uploader);if(!(s instanceof t))throw new TypeError('"Uploader" must be an instance of FileUploader');var a=new n({uploader:s,element:r});a.getOptions=e(i.options).bind(a,o),a.getFilters=function(){return i.filters}}}},e.exports.$inject=["$parse","FileUploader","FileSelect"]},function(e,t,n){"use strict";var o=function(e){return e&&e.__esModule?e["default"]:e};o(n(1));e.exports=function(e,t,n){return{link:function(o,r,i){var s=o.$eval(i.uploader);if(!(s instanceof t))throw new TypeError('"Uploader" must be an instance of FileUploader');if(s.isHTML5){var a=new n({uploader:s,element:r});a.getOptions=e(i.options).bind(a,o),a.getFilters=function(){return i.filters}}}}},e.exports.$inject=["$parse","FileUploader","FileDrop"]},function(e,t,n){"use strict";var o=function(e){return e&&e.__esModule?e["default"]:e};o(n(1));e.exports=function(e,t){return{link:function(n,o,r){var i=n.$eval(r.uploader);if(!(i instanceof e))throw new TypeError('"Uploader" must be an instance of FileUploader');var s=new t({uploader:i,element:o});s.getOverClass=function(){return r.overClass||s.overClass}}}},e.exports.$inject=["FileUploader","FileOver"]}])}),angular.module("AuthManager",[]).service("SessionService",[function(){var e=!1;this.setUserAuthenticated=function(t){e=t},this.getUserAuthenticated=function(){return e}}]);var sync=angular.module("sync",["ngRoute","angularFileUpload","ui.bootstrap","ui.router","infinite-scroll","ngMaterial","ngMessages","material.svgAssetsCache","ng-mfb","pdf","ngContextMenu","angular-loading-bar","ngFileSaver","AuthManager","ngDialog"]),Logger=angular.module("Logger",[]);Logger.run(["$rootScope",function(e){e.endPoint="http://syncme.com:8000"}]),window.routes={"/Files":{url:"/Files",templateUrl:"views/files.html",controller:"FilesController",requireLogin:!0},preview:{url:"/!/:preview/:extension/:of/:user",templateUrl:"views/filePreview.html",controller:"previewController"},"/Groups":{url:"/Groups",templateUrl:"views/groups.html",controller:"GroupController",requireLogin:!0}},sync.run(["$rootScope","$log",function(e,t){e.endPoint="http://syncme.com:8000",e.$on("$routeChangeStart",function(e,t,n){for(var o in window.routes)-1!=t.indexOf(o)&&window.routes[o].requireLogin&&!SessionService.getUserAuthenticated()&&(alert("You need to be authenticated to see this page!"),e.preventDefault())})}]),sync.provider({$exceptionHandler:function(){var e=function(e,t){console.log(e)};this.$get=function(){return e}}}),sync.config(["$sceProvider","$httpProvider","$mdThemingProvider","cfpLoadingBarProvider",function(e,t,n,o){delete t.defaults.headers.common["X-Requested-With"],t.defaults.headers.post.Accept="application/json, text/javascript",t.defaults.headers.post.Accept="application/json, text/javascript",t.defaults.headers.common.authorization="Bearer Bc7DWS7KKRLtxmddUZI1T1lZu2J1YhR8OLXGWNZn",e.enabled(!1),o.includeBar=!1}]),sync.config(["$stateProvider","$urlRouterProvider",function(e,t,n){for(var o in window.routes)e.state(o,window.routes[o]);t.otherwise("/Files")}]),function(e,t,n){"use strict";var o=t.module("ng-mfb",[]);o.run(["$templateCache",function(e){e.put("ng-mfb-menu-default.tpl.html",'<ul class="mfb-component--{{position}} mfb-{{effect}}"    data-mfb-toggle="{{togglingMethod}}" data-mfb-state="{{menuState}}">  <li class="mfb-component__wrap">    <a ng-click="clicked()" ng-mouseenter="hovered()" ng-mouseleave="hovered()"       ng-attr-data-mfb-label="{{label}}" class="mfb-component__button--main">     <i class="mfb-component__main-icon--resting {{resting}}"></i>     <i class="mfb-component__main-icon--active {{active}}"></i>    </a>    <ul class="mfb-component__list" ng-transclude>    </ul></li></ul>'),e.put("ng-mfb-menu-md.tpl.html",'<ul class="mfb-component--{{position}} mfb-{{effect}}"    data-mfb-toggle="{{togglingMethod}}" data-mfb-state="{{menuState}}">  <li class="mfb-component__wrap">    <a ng-click="clicked()" ng-mouseenter="hovered()" ng-mouseleave="hovered()"       style="background: transparent; box-shadow: none;"       ng-attr-data-mfb-label="{{label}}" class="mfb-component__button--main">     <md-button class="md-fab md-accent" aria-label={{label}} style="position:relative; margin: 0; padding:0;">       <md-icon style="left: 0; position: relative;" md-svg-icon="{{resting}}"         class="mfb-component__main-icon--resting"></md-icon>       <md-icon style="position:relative;" md-svg-icon="{{active}}"         class="mfb-component__main-icon--active"></md-icon>     </md-button>    </a>    <ul class="mfb-component__list" ng-transclude>    </ul></li></ul>'),e.put("ng-mfb-button-default.tpl.html",'<li>  <a data-mfb-label="{{label}}" class="mfb-component__button--child">    <i class="mfb-component__child-icon {{icon}}">    </i>  </a></li>'),e.put("ng-mfb-button-md.tpl.html",'<li>  <a href="" data-mfb-label="{{label}}" class="mfb-component__button--child"      style="background: transparent; box-shadow: none;">     <md-button style="margin: 0;" class="md-fab md-accent" aria-label={{label}}>       <md-icon md-svg-src="img/icons/android.svg"></md-icon>       <md-icon md-svg-icon="{{icon}}"></md-icon>     </md-button>  </a></li>')}]),o.directive("mfbButtonClose",function(){return{restrict:"A",require:"^mfbMenu",link:function(e,t,n,o){t.bind("click",function(){o.close()})}}}),o.directive("mfbMenu",["$timeout",function(t){return{restrict:"EA",transclude:!0,replace:!0,scope:{position:"@",effect:"@",label:"@",resting:"@restingIcon",active:"@activeIcon",mainAction:"&",menuState:"=?",togglingMethod:"@"},templateUrl:function(e,t){return t.templateUrl||"ng-mfb-menu-default.tpl.html"},controller:["$scope","$attrs",function(n,o){function r(){n.mainAction&&n.mainAction(),l()||s()}function i(){l()}function s(){n.menuState===p?u():a()}function a(){n.menuState=p}function u(){n.menuState=d}function c(){return e.Modernizr&&Modernizr.touch}function l(){return"hover"===n.togglingMethod}function f(){n.$apply(function(){n.togglingMethod="click"})}var p="open",d="closed";this.toggle=s,this.close=u,this.open=a,n.clicked=r,n.hovered=i,n.menuState||(n.menuState=d),c()&&l()&&t(f),o.$observe("menuState",function(){n.currentState=n.menuState})}]}}]),o.directive("mfbButton",[function(){return{require:"^mfbMenu",restrict:"EA",transclude:!0,replace:!0,scope:{icon:"@",label:"@"},templateUrl:function(e,t){return t.templateUrl||"ng-mfb-button-default.tpl.html"}}}])}(window,angular),sync.directive("leftMenu",function(){return{restrict:"AE",scope:{data:"=",user:"=",type:"="},templateUrl:"directives/leftMenu.html"}}),sync.directive("feeds",function(){return{restrict:"AE",scope:{posts:"=",replies:"=",createPost:"="},templateUrl:"directives/middleContent.html"}}),sync.directive("header",function(){return{restrict:"AE",scope:{data:"=",user:"=",type:"="},templateUrl:"./directives/header.html"}}),sync.directive("keybinding",function(){return{restrict:"E",scope:{invoke:"&"},link:function(e,t,n){Mousetrap.bind(n.on,e.invoke)}}}),Logger.controller("loginController",["$scope","$http","$rootScope","$window",function(e,t,n,o){var r={"crededential-not-found":"Credentials not found!",success:"logging in..."};e.login=function(e){function i(){o.location.href="/notVerified"}function s(){o.location.href="/sync"}$(".login-form-main-message").addClass("show success").html(r.success),t.post(n.endPoint+"/sessions",e).success(function(e){console.log(e),"1"===e?s():"0"===e?$(".login-form-main-message").addClass("show error").html(r["crededential-not-found"]):"notVerified"===e&&i()}).error(function(e){console.log("error:"+e)})}}]),Logger.controller("RegisterController",["$scope","$rootScope","$http",function(e,t,n){var o={"password-notMatch":"password do not match",SignUpInProgress:"Wait we are setting up your account."};e.register=function(e){function t(){$(".register-form-main-message").removeClass("show error")}function n(){window.location="/checkEmail"}if($(".register-form-main-message").addClass("show success").html(o.SignUpInProgress),$("#password").val()!=$("#password-confirm").val())return $(".register-form-main-message").addClass("show error").html(o["password-notMatch"]),void setTimeout(t,2e3);var r=$("#username").val(),i=$("#email").val();jQuery.post("/sessions",{username:r,password:e.password,email:i,option:e.option,phone:e.phone},function(e,t,o){1==e&&n()}).error(function(e){})}}]),Logger.directive("uniqueUsername",["isUsernameAvailable",function(e){return{restrict:"A",require:"ngModel",link:function(t,n,o,r){r.$asyncValidators.uniqueUsername=e}}}]),Logger.factory("isUsernameAvailable",["$q","$http","$rootScope",function(e,t,n){var o={"btn-loading":'<i class="fa fa-spinner fa-pulse"></i>',"btn-success":'<i class="fa fa-check"></i>',"btn-error":'<i class="fa fa-remove"></i>',"msg-success":"All Good! Redirecting...","msg-username-available":"good username available!","msg-username-taken":"oops username taken","msg-email-taken":"email taken","msg-your-phone-suck":"your phone is not valid",useAJAX:!0};return function(r){var i=e.defer();return t.get(n.endPoint+"/api/v1/users?username="+r+"&access_token=Bc7DWS7KKRLtxmddUZI1T1lZu2J1YhR8OLXGWNZn").success(function(e){function t(){$(".register-form-main-message").removeClass("show success")}function n(){$(".register-form-main-message").removeClass("show error")}"available"==e?($(".register-form-main-message").addClass("show success").html(o["msg-username-available"]),setTimeout(t,2e3)):"taken"==e&&($(".register-form-main-message").addClass("show error").html(o["msg-username-taken"]),setTimeout(n,2e3)),i.reject()}).error(function(e){i.resolve()}),i.promise}}]),Logger.directive("uniqueEmail",["isEmailAvailable",function(e){return{restrict:"A",require:"ngModel",link:function(t,n,o,r){r.$asyncValidators.uniqueEmail=e}}}]),Logger.factory("isEmailAvailable",["$q","$http","$rootScope",function(e,t,n){var o={"btn-loading":'<i class="fa fa-spinner fa-pulse"></i>',"btn-success":'<i class="fa fa-check"></i>',"btn-error":'<i class="fa fa-remove"></i>',"msg-success":"All Good! Redirecting...","msg-username-available":"good username available!","msg-username-taken":"oops username taken","msg-email-taken":"email taken","msg-email-available":"email available","msg-your-phone-suck":"your phone is not valid",useAJAX:!0};return function(r){var i=e.defer();return t.get(n.endPoint+"/api/v1/users?email="+r+"&access_token=Bc7DWS7KKRLtxmddUZI1T1lZu2J1YhR8OLXGWNZn").success(function(e){function t(){$(".register-form-main-message").removeClass("show success")}function n(){$(".register-form-main-message").removeClass("show error")}"email-available"==e?($(".register-form-main-message").addClass("show success").html(o["msg-email-available"]),setTimeout(t,2e3)):"email-taken"==e&&($(".register-form-main-message").addClass("show error").html(o["msg-email-taken"]),setTimeout(n,2e3)),i.reject();
}).error(function(){i.resolve()}),i.promise}}]),sync.service("Files",["$http","$q","$rootScope",function(e,t,n){return this.getGroupFiles=function(o){var r=t.defer();return e.get(n.endPoint+"/api/v1/groups/"+o+"/groupfiles").success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this.single=function(o){var r=t.defer();return e.get(n.endPoint+"/preview/"+o).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this.getBoxFiles=function(){var o=1,r=t.defer();return e.get(n.endPoint+"/api/v1/groups/"+o+"/boxfiles").success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this.getMimeType=function(o){var r=t.defer();return e.get(n.endPoint+"/api/v1/files/mimeType/"+o).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this.downloadFile=function(o){var r=t.defer();return e.get(n.endPoint+"/api/v1/files/download/"+o+"/of/StrimUp").success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this}]),sync.service("People",["$q","$http","$rootScope",function(e,t,n){return this.get=function(){var o=e.defer();return t.get(n.endPoint+"/api/v1/suggestions").success(function(e){o.resolve(e)}).error(function(e){o.reject(e)}),o.promise},this.allIfollow=function(){var o=e.defer();return t.get(n.endPoint+"/api/v1/me/followings").success(function(e){o.resolve(e)}).error(function(e){o.reject(e)}),o.promise},this.unFollow=function(o){var r=e.defer();return t["delete"](n.endPoint+"/api/v1/me/following/"+o).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this.follow=function(o){var r=e.defer();return t.put(n.endPoint+"/api/v1/me/followings",o).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this}]),sync.service("Share",["$log","$http","$q","$rootScope",function(e,t,n,o){return this.share=function(e){var r=n.defer();return t.post(o.endPoint+"/api/v1/share",e).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this.getUser=function(e){var r=n.defer();return t.get(o.endPoint+"/api/v1/me/users/"+e).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this.fileMime=function(e){var r=n.defer();return t.get(o.endPoint+"/api/v1/mimeType/"+e).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this}]),sync.service("User",["$http","$q","$rootScope",function(e,t,n){return this.info=function(){var o=t.defer();return e.get(n.endPoint+"/api/v1/users/info").success(function(e){o.resolve(e)}).error(function(){o.reject()}),o.promise},this.groups=function(o){var r=t.defer();return e.get(n.endPoint+"/api/v1/me/groups").success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this}]),sync.service("Notification",["$http","$q","$rootScope",function(e,t,n){return this.getNotification=function(o){var r=t.defer();return e.get(n.endPoint+"/api/v1/notifications",{cache:!1}).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this.createNotification=function(o){var r=t.defer();return e.post(n.endPoint+"/api/v1/notifications",o).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this.deleteNotification=function(o){var r=t.defer();return e["delete"](n.endPoint+"/api/v1/notifications/"+o).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this}]),sync.controller("notificationController",["$scope","Notification","$log",function(e,t,n){e.init=function(){e.getNotification()},e.clearNotification=function(n){t.clearNotification(n).then(function(t){e.getNotification()},function(e){console.log(e)})},e.getNotification=function(){t.getNotification().then(function(t){e.notifications=t},function(e){})},e.init()}]),sync.directive("notify",[function(){return{restrict:"AE",scope:{},link:function(e,t,n){function o(e,t,n){if(!Notification)return void console.log("Desktop notifications not available in your browser..");if("granted"!==Notification.permission)Notification.requestPermission();else{var o=new Notification(e,{icon:"https://lh3.googleusercontent.com/-aCFiK4baXX4/VjmGJojsQ_I/AAAAAAAANJg/h-sLVX1M5zA/s48-Ic42/eggsmall.png",body:t});o.onclick=function(){window.open(n)},o.onclose=function(){console.log("Notification closed")}}}setTimeout(function(){var e="This will be title",t="Most popular article.",n="sync.com:8000";o(e,t,n)},2e3),document.addEventListener("DOMContentLoaded",function(){"granted"!==Notification.permission&&Notification.requestPermission()})}}}]),sync.factory("userInteractionNotification",function(){return{success:function(e){toastr.success(e,"Success")},warn:function(e){toastr.warning(e,"Hey")},info:function(e){toastr.info(e,"FYI")},error:function(e){toastr.error(e,"Oh No")}}}),sync.factory("userInteractionNotification",function(){return{success:function(e){toastr.success(e,"Success")},warn:function(e){toastr.warning(e,"Hey")},info:function(e){toastr.info(e,"FYI")},error:function(e){toastr.error(e,"Oh No")}}}),sync.controller("uploadDialogCtrl",["$scope","$uibModal","$mdDialog","$mdMedia",function(e,t,n,o){function r(e,t){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.answer=function(e){t.hide(e)}}e.cancel=function(){n.hide()},e.customFullscreen=o("xs")||o("sm"),e.upload=function(t){n.show({parent:angular.element(document.body),controller:r,templateUrl:"views/upload.tpl.html",parent:angular.element(document.body),targetEvent:t,clickOutsideToClose:!1}).then(function(t){e.status='You said the information was "'+t+'".'},function(){e.status="You cancelled the dialog."})},r.$inject=["$scope","$mdDialog"]}]),sync.controller("shareController",["$scope","$uibModal","$mdDialog","$mdMedia","urlShortener","Share","User",function(e,t,n,o,r,i,s){e.cancel=function(){n.hide()},e.customFullscreen=o("xs")||o("sm"),e.share=function(t,o){function i(e,t){e.getFile=function(){return e.file=r.makeShort(o)},e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.answer=function(e){t.hide(e)}}n.show({parent:angular.element(document.body),controller:i,templateUrl:"views/share.tpl.html",parent:angular.element(document.body),targetEvent:t,clickOutsideToClose:!1}).then(function(t){e.status='You said the information was "'+t+'".'},function(){e.status="You cancelled the dialog."}),i.$inject=["$scope","$mdDialog"]},e.shareFile=function(e){var t,n=e.emails,o=n.split(",");for(t=0;t<o.length;t++)i.share(e).then(function(e){console.log(e)})["catch"]()}}]),sync.service("Post",["$http","$q","$rootScope",function(e,t,n){return this.getPost=function(o){var r=t.defer();return e.get(n.endPoint+"/api/v1/me/posts?user_id"+o,{cache:!1}).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this.participate=function(o){var r=t.defer();return e.put(n.endPoint+"/api/v1/me/posts/",o).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this.createPost=function(o){var r=t.defer();return e.post(n.endPoint+"/api/v1/me/posts",o).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this.deletePost=function(o){var r=t.defer();return e["delete"](n.endPoint+"/api/v1/me/posts/"+o).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this}]),sync.controller("PostingController",["$scope","Post","$timeout","User","$interval","Notification","$log","userInteractionNotification",function(e,t,n,o,r,i,s,a,u){e.init=function(){e.postLoader(),e.getUser()},r(function(){e.postLoader()},8e3),e.getUser=function(){o._id().then(function(t){e.user=t,console.log(t)},function(e){})},e.loadMore=function(){},e.participateIntoPost=function(n,o){var r={post_id:n,user_id:o};t.participate(r).then(function(t){e.postLoader()},function(e){})},e.postLoader=function(){e.dataLoading=!0,t.getPost().then(function(t){e.posts=t,e.friends=[],e.replies=[];for(var n=0;n<t.length;n++)t[n].hasOwnProperty("friends")&&t[n].replies&&t[n].friends?(e.friends.push(t[n].friends),e.replies.push(t[n].replies)):t[n].hasOwnProperty("friends")&&(e.friends=friends.concat(traverse(t[n].friends)),e.replies=replies.concat(traverse(t[n].replies)))},function(e){})},e.imageDesc=function(e){switch(e){case 0:return"60px";case 1:return"60px";case 2:return"60px";case 3:return"60px";case 4:return"60px";default:return"60px"}console.log(e)},e.share=function(e){s.closeOptionButtons(),a.info(e)},e.createPost=function(n){var o={message:n};t.createPost(o).then(function(t){e.message="",e.posts.push(t),u.success("New Post feed created!")},function(e){})},e.init()}]),sync.directive("feedsUploader",[function(){return{restrict:"AE",replace:!1,templateUrl:"App/js/scripts/views/feedAttachment.html",scope:{action:"@"},controller:["$scope",function(e){e.progress=0,e.avatar="",e.sendFile=function(t){var n=$(t).parents("form");return""===$(t).val()?!1:(n.attr("action",e.action),e.$apply(function(){e.progress=0}),void n.ajaxSubmit({type:"POST",beforeSend:function(e){e.setRequestHeader("authorization","Bearer OqFirQS44RQTjRuWniXjdHZJQXdCuEx49rq8JY5A")},uploadProgress:function(t,n,o,r){e.$apply(function(){})},error:function(e,t,o,r){n.removeAttr("action")},success:function(o,r,i,s){var a=$(t).val().split("\\"),u=a[a.length-1];n.removeAttr("action"),e.$apply(function(){e.avatar=u})}}))}}],link:function(e,t,n,o){t.find(".fake-uploader").click(function(){t.find('input[type="file"]').click()})}}}]),sync.controller("FilesController",["$scope","Files","$log","$window","User","$uibModal","$interval","pdfDelegate","$timeout","$stateParams","$rootScope","$exceptionHandler",function(e,t,n,o,r,i,s,a,u,c,l,f){e.init=function(){e.all()},e.all=function(){e.dataLoading=!0,t.getBoxFiles().then(function(t){e.files=t},function(e){})["finally"](function(){e.dataLoading=!1})},e.fileType=function(e){switch(e){case"pdf":return"img/pdf.png";case"folder":return"img/universal_folder.png";case"folder+":return"img/Add_folder.png";case"php":return"img/code.png";case"txt":return"img/code.png";case"docx":return"img/word.png";case"jpg":return"fa fa-image";case"png":return"img/video.png";case"jpeg":return"img/universal_folder.png";case"zip":return"img/zip.png";default:return"img/universal_folder.png"}},e.init()}]),sync.directive("draggable",function(){return{restrict:"AE",link:function(e,t,n){var o=t[0];o.draggable=!0,o.addEventListener("dragstart",function(e){return e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("Text",this.id),this.classList.add("drag"),!1},!1),o.addEventListener("dragend",function(e){return this.classList.remove("drag"),!1},!1)}}}),sync.directive("droppable",["userInteractionNotification","Files",function(e,t){return{scope:{drop:"&",bin:"="},link:function(e,t){var n=t[0];n.addEventListener("dragover",function(e){return e.dataTransfer.dropEffect="move",e.preventDefault&&e.preventDefault(),this.classList.add("over"),!1},!1),n.addEventListener("dragenter",function(e){return this.classList.add("over"),!1},!1),n.addEventListener("dragleave",function(e){return this.classList.remove("over"),!1},!1),n.addEventListener("drop",function(t){t.stopPropagation&&t.stopPropagation(),this.classList.remove("over");var n=this.id,o=document.getElementById(t.dataTransfer.getData("Text"));try{return this.appendChild(o),e.$apply(function(e){var t=e.drop();"undefined"!=typeof t&&t(o.id,n)}),!1}catch(t){}},!1)}}}]),sync.controller("DragDropCtrl",["$scope","Files","$interval",function(e,t,n){e.handleDrop=function(){}}]),sync.controller("previewController",["$scope","pdfDelegate","$timeout","$stateParams","$rootScope","$exceptionHandler","Files","FileSaver","Blob",function(e,t,n,o,r,i,s,a,u){if(o.preview&&"pdf"==o.extension){e.previewable=!0;try{e.pdfUrl=r.endPoint+"/preview/"+o.preview+"/of/StrimUp",n(function(){t.$getByHandle("my-pdf-container").zoomIn(.5)},3e3)}catch(c){throw new Error(c)}}else o.preview&&"jpg"==o.extension||"png"==o.extension?(e.file_name=o.preview,e.previewable=!1):(e.file_name=o.preview,e.previewable=!1);e.goNext=function(){e.increment=1,t.$getByHandle("my-pdf-container").next(e.increment+1)},e.goPrev=function(n){t.$getByHandle("my-pdf-container").prev(e.increment-1)}}]),sync.directive("fileDownload",[function(){return{restrict:"A",replace:!0,template:'<button class="btn btn-default" data-ng-click="download()"><span class=""></span>Download</button>',controller:["$rootScope","$scope","$element","$attrs","$timeout",function(e,t,n,o,r){function i(e){u()}function s(t){e.$broadcast("dialogs.wait.complete")}function a(e,t){}function u(){r(function(){t.progress<95&&(t.progress+=(96-t.progress)/2,u())},250)}t.progress=0,t.download=function(){t.progress=0,$.fileDownload("http://syncme.com:8000/api/v1/files/download/phpxFnlheDVE5j5mcVDX.png/of/StrimUp?access_token=Bc7DWS7KKRLtxmddUZI1T1lZu2J1YhR8OLXGWNZn",{prepareCallback:i,successCallback:s,failCallback:a})}}]}}]),sync.controller("PeopleController",["$scope","People",function(e,t){e.init=function(){e.getPeopleToFollow()},e.getPeopleToFollow=function(){t.get().then(function(t){e.people=t},function(e){})},e.$on("followMember",function(n,o){n.preventDefault(),t.follow(o).then(function(t){e.getPeopleToFollow()},function(e){console.log(e)})}),e.follow=function(t){var n={id:t,option:"addPeople"};e.$emit("followMember",n)},e.init()}]),sync.service("Group",["$http","$rootScope","$q",function(e,t,n){return this.create=function(o){var r=n.defer();return e.post(t.endPoint+"/api/v1/me/groups",o).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this["delete"]=function(o){var r=n.defer();return e["delete"](t.endPoint+"/api/v1/me/groups/"+o).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this.myGroups=function(){var o=n.defer();return e.get(t.endPoint+"/api/v1/me/groups").success(function(e){o.resolve(e)}).error(function(e){console.log("differed slow:"+e),o.reject(e)}),o.promise},this.addPeople=function(o){var r=n.defer();return e.put(t.endPoint+"/api/v1/me/groups/"+JSON.stringify(o)).success(function(e){r.resolve(e)}).error(function(e){r.resolve(e)}),r.promise},this.addFileToGroup=function(o){var r=n.defer();return e.put(t.endPoint+"/api/v1/me/groups/"+JSON.stringify(o)).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this.removePeople=function(o){var r=n.defer();return e.put(t.endPoint+"/api/v1/me/groups/"+JSON.stringify(o)).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this.suggestPeople=function(o){var r=n.defer();return e.get(t.endPoint+"/api/v1/me/groups/"+o).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this}]),sync.controller("GroupController",["$scope","Group","User","Files","userInteractionNotification",function(e,t,n,o,r){e.init=function(){e.myGroups(),e.suggestedPeopleToGroup()},e.userId=function(){n._id().then(function(t){e.userId=t},function(e){console.log(e)})},e.myGroups=function(){t.myGroups().then(function(t){e.group=t},function(e){})},e.suggestedPeopleToGroup=function(n){e.showFiles=!1,e.showGroup=!1,e.showBox=!1,angular.isUndefined(n)||t.suggestPeople(n).then(function(t){e.followers=t},function(e){console.log(e)})},e.$on("refreshGroup",function(){e.init()}),e.$on("groupDeleted",function(t,n){t.preventDefault(),e.myGroups()}),e.$on("groupTobindwith",function(t,n){t.preventDefault(),e.emitted=n,1==e.showFiles&&(e.showFiles=!1),e.suggestedPeopleToGroup(n),e.addPeople=!0}),e.getGroupFiles=function(t){o.getGroupFiles(t).then(function(t){e.files=t,e.groups=[];for(var n=0;n<t.length;n++)t[n].hasOwnProperty("groups")&&t[n].groups?e.groups.push(t[n].friends):t[n].hasOwnProperty("groups")&&(e.groups=groups.concat(traverse(t[n].groups)))},function(e){console.log(e)})},e.getBoxFiles=function(t){e.emitted=t,o.getBoxFiles(t).then(function(t){e.files=t,e.groups=[];for(var n=0;n<t.length;n++)t[n].hasOwnProperty("groups")&&t[n].groups?e.groups.push(t[n].friends):t[n].hasOwnProperty("groups")&&(e.groups=groups.concat(traverse(t[n].groups)))},function(e){console.log(e)})},e.$on("showOptions",function(t,n){"box"===n.owner?(e.addPeople=!1,e.showGroup=!1,e.showBox=!0,1==e.addPeople&&(e.addPeople=!1),e.getBoxFiles(n.group_id)):"group"===n.owner&&(e.showBox=!1,e.addPeople=!1,e.showGroup=!0,1==e.addPeople&&(e.addPeople=!1),e.getGroupFiles(n.group_id))}),e.init()}]),sync.directive("myGroups",["Group","Report","userInteractionNotification",function(e,t,n,o){return{priority:10,templateUrl:"App/scripts/js/directives/groups.html",restrict:"E",scope:{id:"=userId",groups:"=",followers:"=",emitted:"=",showPeople:"=",showGroup:"=",files:"=",showBox:"="},link:function(o,r,i){o.deleteGroup=function(r){e["delete"](r).then(function(e){n.info("Group deleted"),o.$emit("groupDeleted","group deleted")},function(e){t.send("delete group error:"+e).then(function(){},function(){})})},o.createGroup=function(t){e.create(t).then(function(e){n.success("Created new Group"),o.$emit("refreshGroup",null)},function(e){console.log(e)})},o.initAddPeople=function(e){o.$emit("groupTobindwith",e)},o.addPeople=function(t){var r={option:"addMember",userId:t.userId,groupId:t.groupId};angular.isUndefined(t)||e.addPeople(r).then(function(e){n.success("Added Member in group."),o.initAddPeople(t.groupId),o.$emit("refreshGroup",""),console.log(e)},function(e,t){console.log(e)})},o.removePeople=function(t){var r={option:"removeMember",userId:t.userId,groupId:t.groupId};angular.isUndefined(t)||e.removePeople(r).then(function(e){n.info("Removed Member in group."),o.initAddPeople(t.groupId),o.$emit("refreshGroup",""),console.log(e)},function(e,t){console.log(e)})},o.removeFromGroup=function(){console.log("we can remove file in group")},o.addFileToGroup=function(t){var o={option:"addFiles",fileId:t.fileId,groupId:t.groupId};e.addFileToGroup(o).then(function(e){console.log(e)},function(e){n.warn("Some error occured during adding file")})},o.filesInBox=function(e){var t={group_id:e,owner:"box"};o.$emit("showOptions",t)},o.filesInGroup=function(e){var t={group_id:e,owner:"group"};o.$emit("showOptions",t)}}}}]),sync.service("Report",[function(e,t,n){return this.send=function(o){var r=t.defer();return e.post(n.endPoint+"/api/v1/issues",o).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this}]),sync.service("Settings",["$http","$rootScope","$q",function(e,t,n){return this.current=function(){var o=n.defer();return e.get(t.endPoint+"/api/v1/settings").success(function(e){o.resolve(e)}).error(function(e){o.reject(e)}),o.promise},this}]),sync.controller("SettingsController",["$scope","Settings","$log",function(e,t,n){e.init=function(){e.loadCurrentSettings()},e.loadCurrentSettings=function(){t.current().then(function(t){e.settings=t},function(e){n.info("errror prevent promise to be fullfill")})},e.init()}]),sync.controller("ShareController",["$scope","$rootScope","$routeParams","$route","$log","$uibModal","Share","User",function(e,t,n,o,r,i,s,a){e.share=function(e){console.log(e)}}]),angular,sync.controller("UploadController",["$scope","FileUploader","$rootScope","Files",function(e,t,n,o){var r=e.uploader=new t({url:n.endPoint+"/api/v1/upload"});r.filters.push({name:"customFilter",fn:function(e,t){return this.queue.length<10}}),r.onWhenAddingFileFailed=function(e,t,n){console.info("onWhenAddingFileFailed",e,t,n)},r.onAfterAddingFile=function(e){console.info("onAfterAddingFile",e)},r.onAfterAddingAll=function(e){console.info("onAfterAddingAll",e)},r.onBeforeUploadItem=function(e){console.info("onBeforeUploadItem",e)},r.onProgressItem=function(e,t){console.info("onProgressItem",e,t)},r.onProgressAll=function(e){console.info("onProgressAll",e)},r.onSuccessItem=function(e,t,n,o){console.info("onSuccessItem",e,t,n,o)},r.onErrorItem=function(e,t,n,o){console.info("onErrorItem",e,t,n,o)},r.onCancelItem=function(e,t,n,o){console.info("onCancelItem",e,t,n,o)},r.onCompleteItem=function(e,t,n,o){console.info("onCompleteItem",e,t,n,o)},r.onCompleteAll=function(){o.getBoxFiles().then(function(t){e.files=t},function(e){console.log(e)})["finally"](function(){e.dataLoading=!1}),console.info("onCompleteAll")},console.info("uploader",r)}]),sync.service("urlShortener",[function(){this.makeShort=function(e){return e}}]),Array.remove=function(e,t,n){var o=e.slice((n||t)+1||e.length);return e.length=0>t?e.length+t:t,e.push.apply(e,o)};var total_popups=0,popups=[];$(document).ready(function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$("#chat").keypress(function(e){if(13==e.which){alert("we are listning to enter event");var t=$("#shout_username").val(),n=$("#shout_message").val();post_data={username:t,message:n},$.post("shout.php",post_data,function(e){$(e).hide().appendTo(".message_box").fadeIn();var t=$(".message_box")[0].scrollHeight;$(".message_box").scrollTop(t),$("#shout_message").val("")}).fail(function(e){alert(e.statusText)})}}),$(".close_btn").click(function(e){var t=$(".toggle_chat").css("display");$(".toggle_chat").slideToggle(),"block"==t?$(".header div").attr("class","open_btn"):$(".header div").attr("class","close_btn")})}),window.addEventListener("resize",calculate_popups),window.addEventListener("load",calculate_popups),sync.controller("MessageController",["$http","$scope","$q","$rootScope",function(e,t,n,o){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),t.name="Muragijimana";var r=e.get(o.endPoint+"/api/v1/post"),i=e.get(o.endPoint+"/api/v1/post");n.all([r,i]).then(function(e){var t=[];return angular.forEach(e,function(e){t.push(e.data)}),t}).then(function(e){t.posts=e[0]}),$(".post-in").atwho({at:"@",data:["Peter","Tom","Anne"]})}]),sync.controller("TutorialModal",["$scope",function(e){e.open=function(){e.showModal=!0},e.ok=function(){e.showModal=!1},e.cancel=function(){e.showModal=!1}}]),sync.controller("StriminModal",["$scope",function(e){e.open=function(){e.showModal=!0},e.ok=function(){e.showModal=!1},e.cancel=function(){e.showModal=!1}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZlZWRzL2NvbnRyb2xsZXIvY2hhdFBvcHVwQ29udHJvbGxlci5qcyIsImFuZ3VsYXItdXBsb2FkLmpzIiwiYXBwQ29uZmlnLmpzIiwiYnV0dG9uLmpzIiwiZGlyZWN0aXZlcy5qcyIsImxvZ2luQ29udHJvbGxlci5qcyIsInJlZ2lzdGVyQ29udHJvbGxlci5qcyIsImNvbW1vbi9GaWxlU2VydmljZS5qcyIsImNvbW1vbi9QZW9wbGVTZXJ2aWNlLmpzIiwiY29tbW9uL1NoYXJlU2VydmljZS5qcyIsImNvbW1vbi9Vc2VyU2VydmljZS5qcyIsImNvbW1vbi9ub3RpZmljYXRpb24uanMiLCJjb21tb24vdXNlckludGVyYWN0aW9uTWFuYWdlci5qcyIsImNvbW1vbi91c2VySW50ZXJhY3Rpb25Ob3RpZmljYXRpb24uanMiLCJkaWFsb2dzL2RpYWxvZ0N0cmwuanMiLCJtb2R1bGVzLmpzIiwiZmVlZHMvZmVlZHMuanMiLCJmaWxlcy9maWxlLmpzIiwiZmlsZXMvcHJldmlldy5qcyIsImZvbGxvd2Vycy9mb2xsb3dlcnMuanMiLCJncm91cHMvZ3JvdXBzLmpzIiwic2V0dGluZ3Mvc2V0dGluZ3MuanMiLCJzaGFyaW5nL3NoYXJpbmcuanMiLCJ1cGxvYWRlci91cGxvYWRlci5qcyIsInVybFNob3J0bmVyL3Nob3J0bmVyLmpzIiwiZmVlZHMvY29udHJvbGxlci9tZXNzYWdlQ29udHJvbGxlci5qcyIsImZlZWRzL2NvbnRyb2xsZXIvbW9kZWwuanMiXSwibmFtZXMiOlsiY2xvc2VfcG9wdXAiLCJpZCIsImlpaSIsInBvcHVwcyIsImxlbmd0aCIsIkFycmF5IiwicmVtb3ZlIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInN0eWxlIiwiZGlzcGxheSIsImNhbGN1bGF0ZV9wb3B1cHMiLCJkaXNwbGF5X3BvcHVwcyIsInJpZ2h0IiwidG90YWxfcG9wdXBzIiwidW5kZWZpbmVkIiwiZWxlbWVudCIsImpqaiIsInJlZ2lzdGVyX3BvcHVwIiwibmFtZSIsInVuc2hpZnQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImlubmVySFRNTCIsIndpZHRoIiwid2luZG93IiwiaW5uZXJXaWR0aCIsInBhcnNlSW50Iiwicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwidGhpcyIsIm1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpbnN0YWxsZWRNb2R1bGVzIiwibG9hZGVkIiwiY2FsbCIsIm0iLCJjIiwicCIsIl9pbnRlcm9wUmVxdWlyZSIsIm9iaiIsIl9fZXNNb2R1bGUiLCJDT05GSUciLCJvcHRpb25zIiwic2VydmljZUZpbGVVcGxvYWRlciIsInNlcnZpY2VGaWxlTGlrZU9iamVjdCIsInNlcnZpY2VGaWxlSXRlbSIsInNlcnZpY2VGaWxlRGlyZWN0aXZlIiwic2VydmljZUZpbGVTZWxlY3QiLCJzZXJ2aWNlRmlsZURyb3AiLCJzZXJ2aWNlRmlsZU92ZXIiLCJkaXJlY3RpdmVGaWxlU2VsZWN0IiwiZGlyZWN0aXZlRmlsZURyb3AiLCJkaXJlY3RpdmVGaWxlT3ZlciIsImFuZ3VsYXIiLCJ2YWx1ZSIsImRpcmVjdGl2ZSIsInJ1biIsIkZpbGVVcGxvYWRlciIsIkZpbGVMaWtlT2JqZWN0IiwiRmlsZUl0ZW0iLCJGaWxlRGlyZWN0aXZlIiwiRmlsZVNlbGVjdCIsIkZpbGVEcm9wIiwiRmlsZU92ZXIiLCJ1cmwiLCJhbGlhcyIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwicXVldWUiLCJwcm9ncmVzcyIsImF1dG9VcGxvYWQiLCJyZW1vdmVBZnRlclVwbG9hZCIsIm1ldGhvZCIsImZpbHRlcnMiLCJmb3JtRGF0YSIsInF1ZXVlTGltaXQiLCJOdW1iZXIiLCJNQVhfVkFMVUUiLCJ3aXRoQ3JlZGVudGlhbHMiLCJfY3JlYXRlQ2xhc3MiLCJkZWZpbmVQcm9wZXJ0aWVzIiwidGFyZ2V0IiwicHJvcHMiLCJrZXkiLCJwcm9wIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJPYmplY3QiLCJDb25zdHJ1Y3RvciIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsInByb3RvdHlwZSIsIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiVHlwZUVycm9yIiwiY29weSIsImV4dGVuZCIsImZvckVhY2giLCJpc09iamVjdCIsImlzTnVtYmVyIiwiaXNEZWZpbmVkIiwiaXNBcnJheSIsImZpbGVVcGxvYWRlck9wdGlvbnMiLCIkcm9vdFNjb3BlIiwiJGh0dHAiLCIkd2luZG93IiwiRmlsZSIsIkZvcm1EYXRhIiwic2V0dGluZ3MiLCJpc1VwbG9hZGluZyIsIl9uZXh0SW5kZXgiLCJfZmFpbEZpbHRlckluZGV4IiwiX2RpcmVjdGl2ZXMiLCJzZWxlY3QiLCJkcm9wIiwib3ZlciIsImZuIiwiX3F1ZXVlTGltaXRGaWx0ZXIiLCJfZm9sZGVyRmlsdGVyIiwiYWRkVG9RdWV1ZSIsImZpbGVzIiwiX3RoaXMiLCJsaXN0IiwiaXNBcnJheUxpa2VPYmplY3QiLCJhcnJheU9mRmlsdGVycyIsIl9nZXRGaWx0ZXJzIiwiY291bnQiLCJhZGRlZEZpbGVJdGVtcyIsInNvbWUiLCJ0ZW1wIiwiX2lzVmFsaWRGaWxlIiwiZmlsZUl0ZW0iLCJwdXNoIiwiX29uQWZ0ZXJBZGRpbmdGaWxlIiwiZmlsdGVyIiwiX29uV2hlbkFkZGluZ0ZpbGVGYWlsZWQiLCJfb25BZnRlckFkZGluZ0FsbCIsIl9nZXRUb3RhbFByb2dyZXNzIiwiX3JlbmRlciIsInVwbG9hZEFsbCIsInJlbW92ZUZyb21RdWV1ZSIsImluZGV4IiwiZ2V0SW5kZXhPZkl0ZW0iLCJpdGVtIiwiY2FuY2VsIiwic3BsaWNlIiwiX2Rlc3Ryb3kiLCJjbGVhclF1ZXVlIiwidXBsb2FkSXRlbSIsInRyYW5zcG9ydCIsImlzSFRNTDUiLCJfcHJlcGFyZVRvVXBsb2FkaW5nIiwiY2FuY2VsSXRlbSIsImFib3J0IiwiaXRlbXMiLCJnZXROb3RVcGxvYWRlZEl0ZW1zIiwidXBsb2FkIiwiY2FuY2VsQWxsIiwiaXNGaWxlIiwiY29uc3RydWN0b3IiLCJpc0ZpbGVMaWtlT2JqZWN0IiwiaW5kZXhPZiIsImlzVXBsb2FkZWQiLCJnZXRSZWFkeUl0ZW1zIiwiaXNSZWFkeSIsInNvcnQiLCJpdGVtMSIsIml0ZW0yIiwiZGVzdHJveSIsIm9iamVjdCIsIm9uQWZ0ZXJBZGRpbmdBbGwiLCJmaWxlSXRlbXMiLCJvbkFmdGVyQWRkaW5nRmlsZSIsIm9uV2hlbkFkZGluZ0ZpbGVGYWlsZWQiLCJvbkJlZm9yZVVwbG9hZEl0ZW0iLCJvblByb2dyZXNzSXRlbSIsIm9uUHJvZ3Jlc3NBbGwiLCJvblN1Y2Nlc3NJdGVtIiwicmVzcG9uc2UiLCJzdGF0dXMiLCJvbkVycm9ySXRlbSIsIm9uQ2FuY2VsSXRlbSIsIm9uQ29tcGxldGVJdGVtIiwib25Db21wbGV0ZUFsbCIsIm5vdFVwbG9hZGVkIiwidXBsb2FkZWQiLCJyYXRpbyIsImN1cnJlbnQiLCJNYXRoIiwicm91bmQiLCJuYW1lcyIsIm1hdGNoIiwiJCRwaGFzZSIsIiRhcHBseSIsInNpemUiLCJ0eXBlIiwiZmlsZSIsImV2ZXJ5IiwiX2lzU3VjY2Vzc0NvZGUiLCJfdHJhbnNmb3JtUmVzcG9uc2UiLCJoZWFkZXJzR2V0dGVyIiwiX2hlYWRlcnNHZXR0ZXIiLCJkZWZhdWx0cyIsInRyYW5zZm9ybVJlc3BvbnNlIiwidHJhbnNmb3JtRm4iLCJfcGFyc2VIZWFkZXJzIiwidmFsIiwiaSIsInBhcnNlZCIsInNwbGl0IiwibGluZSIsInNsaWNlIiwidHJpbSIsInRvTG93ZXJDYXNlIiwicGFyc2VkSGVhZGVycyIsIl94aHJUcmFuc3BvcnQiLCJ4aHIiLCJfeGhyIiwiWE1MSHR0cFJlcXVlc3QiLCJmb3JtIiwiX29uQmVmb3JlVXBsb2FkSXRlbSIsImFwcGVuZCIsIl9maWxlIiwib25wcm9ncmVzcyIsImV2ZW50IiwibGVuZ3RoQ29tcHV0YWJsZSIsInRvdGFsIiwiX29uUHJvZ3Jlc3NJdGVtIiwib25sb2FkIiwiZ2V0QWxsUmVzcG9uc2VIZWFkZXJzIiwiZ2lzdCIsIl9vbkNvbXBsZXRlSXRlbSIsIm9uZXJyb3IiLCJfb25FcnJvckl0ZW0iLCJvbmFib3J0IiwiX29uQ2FuY2VsSXRlbSIsIm9wZW4iLCJzZXRSZXF1ZXN0SGVhZGVyIiwic2VuZCIsIl9pZnJhbWVUcmFuc3BvcnQiLCJpZnJhbWUiLCJEYXRlIiwibm93IiwiaW5wdXQiLCJfaW5wdXQiLCJfZm9ybSIsInJlcGxhY2VXaXRoIiwiZWxlbWVudF8iLCJhY3Rpb24iLCJlbmN0eXBlIiwiZW5jb2RpbmciLCJiaW5kIiwiaHRtbCIsImNvbnRlbnREb2N1bWVudCIsImJvZHkiLCJlIiwiZHVtbXkiLCJfb25TdWNjZXNzSXRlbSIsInVuYmluZCIsImFmdGVyIiwic3VibWl0IiwiX29uQmVmb3JlVXBsb2FkIiwiX29uUHJvZ3Jlc3MiLCJfb25TdWNjZXNzIiwiX29uRXJyb3IiLCJfb25DYW5jZWwiLCJfb25Db21wbGV0ZSIsIm5leHRJdGVtIiwiaW5oZXJpdCIsInNvdXJjZSIsImNyZWF0ZSIsInN1cGVyXyIsIiRpbmplY3QiLCJpc0VsZW1lbnQiLCJpc1N0cmluZyIsImZpbGVPcklucHV0IiwiaXNJbnB1dCIsImZha2VQYXRoT3JPYmplY3QiLCJwb3N0Zml4IiwiX2NyZWF0ZUZyb21GYWtlUGF0aCIsInBhdGgiLCJsYXN0TW9kaWZpZWREYXRlIiwibGFzdEluZGV4T2YiLCJfY3JlYXRlRnJvbU9iamVjdCIsIiRjb21waWxlIiwidXBsb2FkZXIiLCJpc1N1Y2Nlc3MiLCJpc0NhbmNlbCIsImlzRXJyb3IiLCJfcmVwbGFjZU5vZGUiLCJvbkJlZm9yZVVwbG9hZCIsIm9uUHJvZ3Jlc3MiLCJvblN1Y2Nlc3MiLCJvbkVycm9yIiwib25DYW5jZWwiLCJvbkNvbXBsZXRlIiwiY2xvbmUiLCJzY29wZSIsImNzcyIsIl9zYXZlTGlua3MiLCJldmVudHMiLCJfZ2V0IiwiZ2V0IiwicHJvcGVydHkiLCJyZWNlaXZlciIsImRlc2MiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJwYXJlbnQiLCJnZXRQcm90b3R5cGVPZiIsImdldHRlciIsIl9pbmhlcml0cyIsInN1YkNsYXNzIiwic3VwZXJDbGFzcyIsImVudW1lcmFibGUiLCJfX3Byb3RvX18iLCJfRmlsZURpcmVjdGl2ZSIsImV4dGVuZGVkT3B0aW9ucyIsIiRkZXN0cm95IiwiY2hhbmdlIiwicmVtb3ZlQXR0ciIsImdldE9wdGlvbnMiLCJnZXRGaWx0ZXJzIiwiaXNFbXB0eUFmdGVyU2VsZWN0aW9uIiwiYXR0ciIsIm9uQ2hhbmdlIiwiZHJhZ292ZXIiLCJkcmFnbGVhdmUiLCJvbkRyb3AiLCJ0cmFuc2ZlciIsIl9nZXRUcmFuc2ZlciIsIl9wcmV2ZW50QW5kU3RvcCIsIl9yZW1vdmVPdmVyQ2xhc3MiLCJvbkRyYWdPdmVyIiwiX2hhdmVGaWxlcyIsInR5cGVzIiwiZHJvcEVmZmVjdCIsIl9hZGRPdmVyQ2xhc3MiLCJvbkRyYWdMZWF2ZSIsImN1cnJlbnRUYXJnZXQiLCJkYXRhVHJhbnNmZXIiLCJvcmlnaW5hbEV2ZW50IiwicHJldmVudERlZmF1bHQiLCJzdG9wUHJvcGFnYXRpb24iLCJjb250YWlucyIsImFkZE92ZXJDbGFzcyIsInJlbW92ZU92ZXJDbGFzcyIsIm92ZXJDbGFzcyIsImFkZENsYXNzIiwiZ2V0T3ZlckNsYXNzIiwicmVtb3ZlQ2xhc3MiLCIkcGFyc2UiLCJsaW5rIiwiYXR0cmlidXRlcyIsIiRldmFsIiwic2VydmljZSIsInVzZXJJc0F1dGhlbnRpY2F0ZWQiLCJzZXRVc2VyQXV0aGVudGljYXRlZCIsImdldFVzZXJBdXRoZW50aWNhdGVkIiwic3luYyIsIkxvZ2dlciIsImVuZFBvaW50Iiwicm91dGVzIiwiL0ZpbGVzIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwicmVxdWlyZUxvZ2luIiwicHJldmlldyIsIi9Hcm91cHMiLCIkbG9nIiwiJG9uIiwibmV4dCIsIlNlc3Npb25TZXJ2aWNlIiwiYWxlcnQiLCJwcm92aWRlciIsIiRleGNlcHRpb25IYW5kbGVyIiwiaGFuZGxlciIsImV4Y2VwdGlvbiIsImNhdXNlIiwiY29uc29sZSIsImxvZyIsIiRnZXQiLCJjb25maWciLCIkc2NlUHJvdmlkZXIiLCIkaHR0cFByb3ZpZGVyIiwiJG1kVGhlbWluZ1Byb3ZpZGVyIiwiY2ZwTG9hZGluZ0JhclByb3ZpZGVyIiwiY29tbW9uIiwicG9zdCIsImVuYWJsZWQiLCJpbmNsdWRlQmFyIiwiJHN0YXRlUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCIkc2NvcGUiLCJzdGF0ZSIsIm90aGVyd2lzZSIsIm1mYiIsIiR0ZW1wbGF0ZUNhY2hlIiwicHV0IiwicmVzdHJpY3QiLCJyZXF1aXJlIiwiJGVsZW1lbnQiLCIkYXR0cnMiLCJtZmJNZW51Q29udHJvbGxlciIsImNsb3NlIiwiJHRpbWVvdXQiLCJ0cmFuc2NsdWRlIiwicmVwbGFjZSIsInBvc2l0aW9uIiwiZWZmZWN0IiwibGFiZWwiLCJyZXN0aW5nIiwiYWN0aXZlIiwibWFpbkFjdGlvbiIsIm1lbnVTdGF0ZSIsInRvZ2dsaW5nTWV0aG9kIiwiZWxlbSIsImF0dHJzIiwiY2xpY2tlZCIsIl9pc0hvdmVyQWN0aXZlIiwidG9nZ2xlIiwiaG92ZXJlZCIsIm9wZW5TdGF0ZSIsImNsb3NlZFN0YXRlIiwiX2lzVG91Y2hEZXZpY2UiLCJNb2Rlcm5penIiLCJ0b3VjaCIsInVzZUNsaWNrIiwiJG9ic2VydmUiLCJjdXJyZW50U3RhdGUiLCJpY29uIiwiZGF0YSIsInVzZXIiLCJwb3N0cyIsInJlcGxpZXMiLCJjcmVhdGVQb3N0IiwiaW52b2tlIiwiZWwiLCJNb3VzZXRyYXAiLCJvbiIsImNyZWRlZGVudGlhbC1ub3QtZm91bmQiLCJzdWNjZXNzIiwibG9naW4iLCJpbmZvIiwibm90VmVyaWZpZWQiLCJsb2NhdGlvbiIsImhyZWYiLCJSZWRpcmVjdGluZyIsIiQiLCJlcnJvciIsInBhc3N3b3JkLW5vdE1hdGNoIiwiU2lnblVwSW5Qcm9ncmVzcyIsInJlZ2lzdGVyIiwibWVzc2FnZVJlbW92ZSIsInNldFRpbWVvdXQiLCJ1c2VybmFtZSIsImVtYWlsIiwialF1ZXJ5IiwicGFzc3dvcmQiLCJvcHRpb24iLCJwaG9uZSIsInRleHRTdGF0dXMiLCJpc1VzZXJuYW1lQXZhaWxhYmxlIiwibmdNb2RlbCIsIiRhc3luY1ZhbGlkYXRvcnMiLCJ1bmlxdWVVc2VybmFtZSIsIiRxIiwiYnRuLWxvYWRpbmciLCJidG4tc3VjY2VzcyIsImJ0bi1lcnJvciIsIm1zZy1zdWNjZXNzIiwibXNnLXVzZXJuYW1lLWF2YWlsYWJsZSIsIm1zZy11c2VybmFtZS10YWtlbiIsIm1zZy1lbWFpbC10YWtlbiIsIm1zZy15b3VyLXBob25lLXN1Y2siLCJ1c2VBSkFYIiwiZGVmZXJyZWQiLCJkZWZlciIsInVzZXJuYW1lVGFrZW4iLCJyZWplY3QiLCJlcnIiLCJyZXNvbHZlIiwicHJvbWlzZSIsImlzRW1haWxBdmFpbGFibGUiLCJ1bmlxdWVFbWFpbCIsIm1zZy1lbWFpbC1hdmFpbGFibGUiLCJtZXNzYWdlRW1haWxUYWtlbiIsImdldEdyb3VwRmlsZXMiLCJncm91cElkIiwiZGlmZmVyZWQiLCJzaW5nbGUiLCJnZXRCb3hGaWxlcyIsImdldE1pbWVUeXBlIiwiZmlsZV9uYW1lIiwiZG93bmxvYWRGaWxlIiwiYWxsSWZvbGxvdyIsInVuRm9sbG93IiwiZm9sbG93IiwicGFyYW0iLCJzaGFyZSIsInNoYXJlYmxlT2JqIiwiZ2V0VXNlciIsImZpbGVNaW1lIiwicmVzIiwiZ3JvdXBzIiwiZ2V0Tm90aWZpY2F0aW9uIiwidXNlcl9pZCIsImNhY2hlIiwiY3JlYXRlTm90aWZpY2F0aW9uIiwiTm90aWZpY2F0aW9uIiwiZGVsZXRlTm90aWZpY2F0aW9uIiwibm90aWZpY2F0aW9uIiwiaW5pdCIsImNsZWFyTm90aWZpY2F0aW9uIiwidGhlbiIsInJlc3VsdCIsIm5vdGlmaWNhdGlvbnMiLCJpQXR0cnMiLCJub3RpZnlCcm93c2VyIiwidGl0bGUiLCJwZXJtaXNzaW9uIiwicmVxdWVzdFBlcm1pc3Npb24iLCJvbmNsaWNrIiwib25jbG9zZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJtZXNzYWdlIiwidG9hc3RyIiwid2FybiIsIndhcm5pbmciLCIkdWliTW9kYWwiLCIkbWREaWFsb2ciLCIkbWRNZWRpYSIsIkRpYWxvZ0NvbnRyb2xsZXIiLCJoaWRlIiwiYW5zd2VyIiwiY3VzdG9tRnVsbHNjcmVlbiIsImV2Iiwic2hvdyIsInRhcmdldEV2ZW50IiwiY2xpY2tPdXRzaWRlVG9DbG9zZSIsInVybFNob3J0ZW5lciIsIlNoYXJlIiwiVXNlciIsImZpbGVOYW1lIiwiZ2V0RmlsZSIsIm1ha2VTaG9ydCIsInNoYXJlRmlsZSIsInZtIiwiZW1haWxzIiwiZW1haWxfYXJyYXkiLCJnZXRQb3N0IiwicGFydGljaXBhdGUiLCJkZWxldGVQb3N0IiwiUG9zdCIsIiRpbnRlcnZhbCIsIiRpb25pY0xpc3REZWxlZ2F0ZSIsInVzZXJJbnRlcmFjdGlvbk5vdGlmaWNhdGlvbiIsInBvc3RMb2FkZXIiLCJfaWQiLCJsb2FkTW9yZSIsInBhcnRpY2lwYXRlSW50b1Bvc3QiLCJwb3N0X2lkIiwiZGF0YUxvYWRpbmciLCJ0cmVlIiwiZnJpZW5kcyIsImhhc093blByb3BlcnR5IiwiY29uY2F0IiwidHJhdmVyc2UiLCJpbWFnZURlc2MiLCJjbG9zZU9wdGlvbkJ1dHRvbnMiLCJwb3N0aW5nIiwicG9zdENyZWF0ZWQiLCJhdmF0YXIiLCJzZW5kRmlsZSIsIiRmb3JtIiwicGFyZW50cyIsImFqYXhTdWJtaXQiLCJiZWZvcmVTZW5kIiwidXBsb2FkUHJvZ3Jlc3MiLCJldnQiLCJwb3MiLCJ0b3QiLCJwZXJjQ29tcGxldGUiLCJzdGF0dXNUZXh0IiwiYXIiLCJmaWxlbmFtZSIsImN0cmwiLCJmaW5kIiwiY2xpY2siLCJGaWxlcyIsInBkZkRlbGVnYXRlIiwiJHN0YXRlUGFyYW1zIiwiYWxsIiwiZmlsZVR5cGUiLCJkcmFnZ2FibGUiLCJlZmZlY3RBbGxvd2VkIiwic2V0RGF0YSIsImNsYXNzTGlzdCIsImFkZCIsImJpbiIsImJpbklkIiwiZ2V0RGF0YSIsImFwcGVuZENoaWxkIiwiaGFuZGxlRHJvcCIsIkZpbGVTYXZlciIsIkJsb2IiLCJleHRlbnNpb24iLCJwcmV2aWV3YWJsZSIsInBkZlVybCIsIiRnZXRCeUhhbmRsZSIsInpvb21JbiIsIkVycm9yIiwiZ29OZXh0IiwiaW5jcmVtZW50IiwiZ29QcmV2IiwicGFnZSIsInByZXYiLCJ0ZW1wbGF0ZSIsInByZXBhcmUiLCJmYWtlUHJvZ3Jlc3MiLCIkYnJvYWRjYXN0IiwiZG93bmxvYWQiLCJmaWxlRG93bmxvYWQiLCJwcmVwYXJlQ2FsbGJhY2siLCJzdWNjZXNzQ2FsbGJhY2siLCJmYWlsQ2FsbGJhY2siLCJQZW9wbGUiLCJnZXRQZW9wbGVUb0ZvbGxvdyIsInBlb3BsZSIsInBhcmFtcyIsIiRlbWl0IiwibXlHcm91cHMiLCJhZGRQZW9wbGUiLCJtZW1iZXIiLCJKU09OIiwic3RyaW5naWZ5IiwiYWRkRmlsZVRvR3JvdXAiLCJmaWxlT2JqIiwicmVtb3ZlUGVvcGxlIiwic3VnZ2VzdFBlb3BsZSIsIkdyb3VwIiwic3VnZ2VzdGVkUGVvcGxlVG9Hcm91cCIsInVzZXJJZCIsImdyb3VwIiwic2hvd0ZpbGVzIiwic2hvd0dyb3VwIiwic2hvd0JveCIsImlzVW5kZWZpbmVkIiwiZm9sbG93ZXJzIiwiYXJncyIsImdyb3VwaWQiLCJlbWl0dGVkIiwib3duZXIiLCJfIiwiZ3JvdXBfaWQiLCJSZXBvcnQiLCJwcmlvcml0eSIsInNob3dQZW9wbGUiLCJpRWxlbWVudCIsImRlbGV0ZUdyb3VwIiwiY3JlYXRlR3JvdXAiLCJpbml0QWRkUGVvcGxlIiwibmV3UGFyYW1zIiwicmVtb3ZlRnJvbUdyb3VwIiwiZmlsZUlkIiwiZmlsZXNJbkJveCIsImZpbGVzSW5Hcm91cCIsImlzc3VlIiwicmVzcCIsIlNldHRpbmdzIiwibG9hZEN1cnJlbnRTZXR0aW5ncyIsIiRyb3V0ZVBhcmFtcyIsIiRyb3V0ZSIsImZpbGVfaWQiLCJsb25nVXJsIiwiYXJyYXkiLCJmcm9tIiwidG8iLCJyZXN0IiwiYXBwbHkiLCJyZWFkeSIsImFqYXhTZXR1cCIsIlgtQ1NSRi1UT0tFTiIsImtleXByZXNzIiwid2hpY2giLCJpdXNlcm5hbWUiLCJpbWVzc2FnZSIsInBvc3RfZGF0YSIsImFwcGVuZFRvIiwiZmFkZUluIiwic2Nyb2xsdG9oIiwic2Nyb2xsSGVpZ2h0Iiwic2Nyb2xsVG9wIiwiZmFpbCIsInRvZ2dsZVN0YXRlIiwic2xpZGVUb2dnbGUiLCJpbnN0aXR1dGlvbnMiLCJ0bXAiLCJ0bXBSZXN1bHQiLCJhdHdobyIsImF0Iiwic2hvd01vZGFsIiwib2siXSwibWFwcGluZ3MiOiJBQVFZLFFBQVNBLGFBQVlDLEdBRWpCLElBQUksR0FBSUMsR0FBTSxFQUFHQSxFQUFNQyxPQUFPQyxPQUFRRixJQUVsQyxHQUFHRCxHQUFNRSxPQUFPRCxHQVFaLE1BTkFHLE9BQU1DLE9BQU9ILE9BQVFELEdBRXJCSyxTQUFTQyxlQUFlUCxHQUFJUSxNQUFNQyxRQUFVLFdBRTVDQyxvQkFRWixRQUFTQyxrQkFFTCxHQUFJQyxHQUFRLElBRVJYLEVBQU0sQ0FDVixLQUFJQSxFQUFXWSxhQUFOWixFQUFvQkEsSUFFekIsR0FBa0JhLFFBQWZaLE9BQU9ELEdBQ1YsQ0FDSSxHQUFJYyxHQUFVVCxTQUFTQyxlQUFlTCxPQUFPRCxHQUM3Q2MsR0FBUVAsTUFBTUksTUFBUUEsRUFBUSxLQUM5QkEsR0FBZ0IsSUFDaEJHLEVBQVFQLE1BQU1DLFFBQVUsUUFJaEMsSUFBSSxHQUFJTyxHQUFNZixFQUFLZSxFQUFNZCxPQUFPQyxPQUFRYSxJQUN4QyxDQUNJLEdBQUlELEdBQVVULFNBQVNDLGVBQWVMLE9BQU9jLEdBQzdDRCxHQUFRUCxNQUFNQyxRQUFVLFFBZ0VoQyxRQUFTUSxnQkFBZWpCLEVBQUlrQixHQUd4QixJQUFJLEdBQUlqQixHQUFNLEVBQUdBLEVBQU1DLE9BQU9DLE9BQVFGLElBR2xDLEdBQUdELEdBQU1FLE9BQU9ELEdBU1osTUFQQUcsT0FBTUMsT0FBT0gsT0FBUUQsR0FFckJDLE9BQU9pQixRQUFRbkIsT0FFZlUsbUJBT1IsSUFBSUssR0FBUSx5Q0FBMENmLEVBQUksSUFDdERlLElBQW1CLHlHQUNuQkEsR0FBbUIsNkJBQ25CQSxHQUFtQixrQ0FDbkJBLEdBQW1CLCtIQVN2QlQsU0FBU2MscUJBQXFCLFFBQVEsR0FBR0MsVUFBWWYsU0FBU2MscUJBQXFCLFFBQVEsR0FB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RTVCMVAsRUFBRSxZQUFZMlAsT0FDWEMsR0FBSSxJQUNKN1EsTUFBTSxRQUFTLE1BQU8sYUN6QmxDeEUsS0FBS00sV0FBVyxpQkFBQSxTQUFpQixTQUFTNEIsR0FFeENBLEVBQU81SixLQUFPLFdBQ1o0SixFQUFPb1QsV0FBWSxHQUVyQnBULEVBQU9xVCxHQUFLLFdBQ1ZyVCxFQUFPb1QsV0FBWSxHQUdyQnBULEVBQU94UCxPQUFTLFdBQ2R3UCxFQUFPb1QsV0FBWSxNQUt2QnRWLEtBQUtNLFdBQVcsZ0JBQUEsU0FBZ0IsU0FBUzRCLEdBRXZDQSxFQUFPNUosS0FBTyxXQUNaNEosRUFBT29ULFdBQVksR0FFckJwVCxFQUFPcVQsR0FBSyxXQUNWclQsRUFBT29ULFdBQVksR0FHckJwVCxFQUFPeFAsT0FBUyxXQUNkd1AsRUFBT29ULFdBQVkiLCJmaWxlIjoibW9kdWxlcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIiAgICAgICAgLy90aGlzIGZ1bmN0aW9uIGNhbiByZW1vdmUgYW4gYXJyYXkgZWxlbWVudC5cbiAgICAgICAgICAgIEFycmF5LnJlbW92ZSA9IGZ1bmN0aW9uKGFycmF5LCBmcm9tLCB0bykge1xuICAgICAgICAgICAgICAgIHZhciByZXN0ID0gYXJyYXkuc2xpY2UoKHRvIHx8IGZyb20pICsgMSB8fCBhcnJheS5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIGFycmF5Lmxlbmd0aCA9IGZyb20gPCAwID8gYXJyYXkubGVuZ3RoICsgZnJvbSA6IGZyb207XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFycmF5LnB1c2guYXBwbHkoYXJyYXksIHJlc3QpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciB0b3RhbF9wb3B1cHMgPSAwO1xuICAgICAgICAgICAgdmFyIHBvcHVwcyA9IFtdO1xuICAgICAgICAgICAgZnVuY3Rpb24gY2xvc2VfcG9wdXAoaWQpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZm9yKHZhciBpaWkgPSAwOyBpaWkgPCBwb3B1cHMubGVuZ3RoOyBpaWkrKylcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGlmKGlkID09IHBvcHVwc1tpaWldKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBBcnJheS5yZW1vdmUocG9wdXBzLCBpaWkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxjdWxhdGVfcG9wdXBzKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9kaXNwbGF5cyB0aGUgcG9wdXBzLiBEaXNwbGF5cyBiYXNlZCBvbiB0aGUgbWF4aW11bSBudW1iZXIgb2YgcG9wdXBzIHRoYXQgY2FuIGJlIGRpc3BsYXllZCBvbiB0aGUgY3VycmVudCB2aWV3cG9ydCB3aWR0aFxuICAgICAgICAgICAgZnVuY3Rpb24gZGlzcGxheV9wb3B1cHMoKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHZhciByaWdodCA9IDIyMDtcblxuICAgICAgICAgICAgICAgIHZhciBpaWkgPSAwO1xuICAgICAgICAgICAgICAgIGZvcihpaWk7IGlpaSA8IHRvdGFsX3BvcHVwczsgaWlpKyspXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBpZihwb3B1cHNbaWlpXSAhPSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocG9wdXBzW2lpaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5yaWdodCA9IHJpZ2h0ICsgXCJweFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQgPSByaWdodCArIDMyMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZvcih2YXIgampqID0gaWlpOyBqamogPCBwb3B1cHMubGVuZ3RoOyBqamorKylcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocG9wdXBzW2pqal0pO1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICB0aGlzIHNjcmlwdCBoYXMgYmVlbiBhZGRlZCBieSBtZSBmb3IgbXkgY3VzdG9tZVxuXG4gICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgJC5hamF4U2V0dXAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1gtQ1NSRi1UT0tFTic6ICQoJ21ldGFbbmFtZT1cImNzcmYtdG9rZW5cIl0nKS5hdHRyKCdjb250ZW50JylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgJChcIiNjaGF0XCIpLmtleXByZXNzKGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoZXZ0LndoaWNoID09IDEzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoXCJ3ZSBhcmUgbGlzdG5pbmcgdG8gZW50ZXIgZXZlbnRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpdXNlcm5hbWUgPSAkKCcjc2hvdXRfdXNlcm5hbWUnKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGltZXNzYWdlID0gJCgnI3Nob3V0X21lc3NhZ2UnKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zdF9kYXRhID0geyd1c2VybmFtZSc6aXVzZXJuYW1lLCAnbWVzc2FnZSc6aW1lc3NhZ2V9O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vc2VuZCBkYXRhIHRvIFwic2hvdXQucGhwXCIgdXNpbmcgalF1ZXJ5ICQucG9zdCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQucG9zdCgnc2hvdXQucGhwJywgcG9zdF9kYXRhLCBmdW5jdGlvbihkYXRhKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYXBwZW5kIGRhdGEgaW50byBtZXNzYWdlYm94IHdpdGggalF1ZXJ5IGZhZGUgZWZmZWN0IVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJChkYXRhKS5oaWRlKCkuYXBwZW5kVG8oJy5tZXNzYWdlX2JveCcpLmZhZGVJbigpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2tlZXAgc2Nyb2xsZWQgdG8gYm90dG9tIG9mIGNoYXQhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsdG9oID0gJCgnLm1lc3NhZ2VfYm94JylbMF0uc2Nyb2xsSGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLm1lc3NhZ2VfYm94Jykuc2Nyb2xsVG9wKHNjcm9sbHRvaCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vcmVzZXQgdmFsdWUgb2YgbWVzc2FnZSBib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNzaG91dF9tZXNzYWdlJykudmFsKCcnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5mYWlsKGZ1bmN0aW9uKGVycikge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYWxlcnQgSFRUUCBzZXJ2ZXIgZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoZXJyLnN0YXR1c1RleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vdG9nZ2xlIGhpZGUvc2hvdyBzaG91dCBib3hcbiAgICAgICAgICAgICAgICAgICAgJChcIi5jbG9zZV9idG5cIikuY2xpY2soZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vZ2V0IENTUyBkaXNwbGF5IHN0YXRlIG9mIC50b2dnbGVfY2hhdCBlbGVtZW50XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG9nZ2xlU3RhdGUgPSAkKCcudG9nZ2xlX2NoYXQnKS5jc3MoJ2Rpc3BsYXknKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy90b2dnbGUgc2hvdy9oaWRlIGNoYXQgYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcudG9nZ2xlX2NoYXQnKS5zbGlkZVRvZ2dsZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3VzZSB0b2dnbGVTdGF0ZSB2YXIgdG8gY2hhbmdlIGNsb3NlL29wZW4gaWNvbiBpbWFnZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYodG9nZ2xlU3RhdGUgPT0gJ2Jsb2NrJylcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiLmhlYWRlciBkaXZcIikuYXR0cignY2xhc3MnLCAnb3Blbl9idG4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIuaGVhZGVyIGRpdlwiKS5hdHRyKCdjbGFzcycsICdjbG9zZV9idG4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8qZG9uZSBhZGRpbmcgbXkgY3VzdG9tIHNjcmlwdHMqL1xuICAgICAgICAgICAgLy9jcmVhdGVzIG1hcmt1cCBmb3IgYSBuZXcgcG9wdXAuIEFkZHMgdGhlIGlkIHRvIHBvcHVwcyBhcnJheS5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHJlZ2lzdGVyX3BvcHVwKGlkLCBuYW1lKVxuICAgICAgICAgICAge1xuXG4gICAgICAgICAgICAgICAgZm9yKHZhciBpaWkgPSAwOyBpaWkgPCBwb3B1cHMubGVuZ3RoOyBpaWkrKylcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIC8vYWxyZWFkeSByZWdpc3RlcmVkLiBCcmluZyBpdCB0byBmcm9udC5cbiAgICAgICAgICAgICAgICAgICAgaWYoaWQgPT0gcG9wdXBzW2lpaV0pXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEFycmF5LnJlbW92ZShwb3B1cHMsIGlpaSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVwcy51bnNoaWZ0KGlkKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsY3VsYXRlX3BvcHVwcygpO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50PSc8ZGl2IGNsYXNzPVwicG9wdXAtYm94IGNoYXQtcG9wdXBcIiBpZD1cIicrIGlkICsnXCI+JztcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudCA9ZWxlbWVudCArICc8ZGl2IHN0eWxlPVwiYmFja2dyb3VuZDojZGRkO2NvbG9yOiNmZmY7XCIgY2xhc3M9XCJoZWFkZXJcIj5Hcm91cDxkaXYgY2xhc3M9XCJjbG9zZV9idG5cIj4mbmJzcDs8L2Rpdj48L2Rpdj4nO1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50ID1lbGVtZW50ICsgJyA8ZGl2IGNsYXNzPVwidG9nZ2xlX2NoYXRcIj4nO1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50ID1lbGVtZW50ICsgJzxkaXYgY2xhc3M9XCJtZXNzYWdlX2JveFwiPjwvZGl2Pic7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQgPWVsZW1lbnQgKyAnPHRleHRhcmVhIHN0eWxlPVwiYmFja2dyb3VuZDp3aGl0ZTttYXJnaW4tdG9wOjE4MHB4O1wiIGlkPVwiY2hhdFwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgcm93cz1cIjNcIiByZXF1aXJlZD1cInJlcXVpcmVkXCI+PC90ZXh0YXJlYT4nO1xuICAgICAgICAgICAgICAgICAgICAvLyBlbGVtZW50ID1lbGVtZW50ICtcbiAgICAgICAgICAgICAgICAgICAgLy8gZWxlbWVudCA9IGVsZW1lbnQgKyAnPGRpdiBjbGFzcz1cInBvcHVwLWhlYWQtcmlnaHRcIj48YSBocmVmPVwiamF2YXNjcmlwdDpjbG9zZV9wb3B1cChcXCcnKyBpZCArJ1xcJyk7XCI+JiMxMDAwNTs8L2E+PC9kaXY+JztcbiAgICAgICAgICAgICAgICAvLyB2YXIgZWxlbWVudCA9ICc8ZGl2IGNsYXNzPVwicG9wdXAtYm94IGNoYXQtcG9wdXBcIiBpZD1cIicrIGlkICsnXCI+JztcbiAgICAgICAgICAgICAgICAvLyBlbGVtZW50ID0gZWxlbWVudCArICc8ZGl2IGNsYXNzPVwicG9wdXAtaGVhZFwiPic7XG4gICAgICAgICAgICAgICAgLy8gZWxlbWVudCA9IGVsZW1lbnQgKyAnPGRpdiBjbGFzcz1cInBvcHVwLWhlYWQtbGVmdFwiPicrIG5hbWUgKyc8L2Rpdj4nO1xuICAgICAgICAgICAgICAgIC8vIGVsZW1lbnQgPSBlbGVtZW50ICsgJzxkaXYgY2xhc3M9XCJwb3B1cC1oZWFkLXJpZ2h0XCI+PGEgaHJlZj1cImphdmFzY3JpcHQ6Y2xvc2VfcG9wdXAoXFwnJysgaWQgKydcXCcpO1wiPiYjMTAwMDU7PC9hPjwvZGl2Pic7XG4gICAgICAgICAgICAgICAgLy8gZWxlbWVudCA9IGVsZW1lbnQgKyAnPGRpdiBzdHlsZT1cImNsZWFyOiBib3RoO1wiPjwvZGl2PjwvZGl2PjxwIG9uY2xpY2s9XCJ0KClcIiBpZD1cIm1cIj48L3A+PGRpdiBjbGFzcz1cInBvcHVwLW1lc3NhZ2VzXCI+PHRleHRhcmVhICBjbGFzcz1cInRvcFwiPjwvdGV4dGFyZWE+PC9kaXY+PC9kaXY+JztcblxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYm9keVwiKVswXS5pbm5lckhUTUwgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJvZHlcIilbMF0uaW5uZXJIVE1MICsgZWxlbWVudDtcblxuICAgICAgICAgICAgICAgIHBvcHVwcy51bnNoaWZ0KGlkKTtcblxuICAgICAgICAgICAgICAgIGNhbGN1bGF0ZV9wb3B1cHMoKTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL2NhbGN1bGF0ZSB0aGUgdG90YWwgbnVtYmVyIG9mIHBvcHVwcyBzdWl0YWJsZSBhbmQgdGhlbiBwb3B1bGF0ZSB0aGUgdG9hdGFsX3BvcHVwcyB2YXJpYWJsZS5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZV9wb3B1cHMoKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHZhciB3aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgICAgICAgICAgIGlmKHdpZHRoIDwgNTQwKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdG90YWxfcG9wdXBzID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgd2lkdGggPSB3aWR0aCAtIDIwMDtcbiAgICAgICAgICAgICAgICAgICAgLy8zMjAgaXMgd2lkdGggb2YgYSBzaW5nbGUgcG9wdXAgYm94XG4gICAgICAgICAgICAgICAgICAgIHRvdGFsX3BvcHVwcyA9IHBhcnNlSW50KHdpZHRoLzMyMCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZGlzcGxheV9wb3B1cHMoKTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL3JlY2FsY3VsYXRlIHdoZW4gd2luZG93IGlzIGxvYWRlZCBhbmQgYWxzbyB3aGVuIHdpbmRvdyBpcyByZXNpemVkLlxuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgY2FsY3VsYXRlX3BvcHVwcyk7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgY2FsY3VsYXRlX3BvcHVwcyk7IiwiLypcbiBhbmd1bGFyLWZpbGUtdXBsb2FkIHYyLjIuMFxuIGh0dHBzOi8vZ2l0aHViLmNvbS9uZXJ2Z2gvYW5ndWxhci1maWxlLXVwbG9hZFxuKi9cblxuKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiYW5ndWxhci1maWxlLXVwbG9hZFwiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJhbmd1bGFyLWZpbGUtdXBsb2FkXCJdID0gZmFjdG9yeSgpO1xufSkodGhpcywgZnVuY3Rpb24oKSB7XG5yZXR1cm4gLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge30sXG4vKioqKioqLyBcdFx0XHRpZDogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblxuXHR2YXIgX2ludGVyb3BSZXF1aXJlID0gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqW1wiZGVmYXVsdFwiXSA6IG9iajsgfTtcblxuXHR2YXIgQ09ORklHID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oMSkpO1xuXG5cdHZhciBvcHRpb25zID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oMikpO1xuXG5cdHZhciBzZXJ2aWNlRmlsZVVwbG9hZGVyID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oMykpO1xuXG5cdHZhciBzZXJ2aWNlRmlsZUxpa2VPYmplY3QgPSBfaW50ZXJvcFJlcXVpcmUoX193ZWJwYWNrX3JlcXVpcmVfXyg0KSk7XG5cblx0dmFyIHNlcnZpY2VGaWxlSXRlbSA9IF9pbnRlcm9wUmVxdWlyZShfX3dlYnBhY2tfcmVxdWlyZV9fKDUpKTtcblxuXHR2YXIgc2VydmljZUZpbGVEaXJlY3RpdmUgPSBfaW50ZXJvcFJlcXVpcmUoX193ZWJwYWNrX3JlcXVpcmVfXyg2KSk7XG5cblx0dmFyIHNlcnZpY2VGaWxlU2VsZWN0ID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oNykpO1xuXG5cdHZhciBzZXJ2aWNlRmlsZURyb3AgPSBfaW50ZXJvcFJlcXVpcmUoX193ZWJwYWNrX3JlcXVpcmVfXyg4KSk7XG5cblx0dmFyIHNlcnZpY2VGaWxlT3ZlciA9IF9pbnRlcm9wUmVxdWlyZShfX3dlYnBhY2tfcmVxdWlyZV9fKDkpKTtcblxuXHR2YXIgZGlyZWN0aXZlRmlsZVNlbGVjdCA9IF9pbnRlcm9wUmVxdWlyZShfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKSk7XG5cblx0dmFyIGRpcmVjdGl2ZUZpbGVEcm9wID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oMTEpKTtcblxuXHR2YXIgZGlyZWN0aXZlRmlsZU92ZXIgPSBfaW50ZXJvcFJlcXVpcmUoX193ZWJwYWNrX3JlcXVpcmVfXygxMikpO1xuXG5cdGFuZ3VsYXIubW9kdWxlKENPTkZJRy5uYW1lLCBbXSkudmFsdWUoXCJmaWxlVXBsb2FkZXJPcHRpb25zXCIsIG9wdGlvbnMpLmZhY3RvcnkoXCJGaWxlVXBsb2FkZXJcIiwgc2VydmljZUZpbGVVcGxvYWRlcikuZmFjdG9yeShcIkZpbGVMaWtlT2JqZWN0XCIsIHNlcnZpY2VGaWxlTGlrZU9iamVjdCkuZmFjdG9yeShcIkZpbGVJdGVtXCIsIHNlcnZpY2VGaWxlSXRlbSkuZmFjdG9yeShcIkZpbGVEaXJlY3RpdmVcIiwgc2VydmljZUZpbGVEaXJlY3RpdmUpLmZhY3RvcnkoXCJGaWxlU2VsZWN0XCIsIHNlcnZpY2VGaWxlU2VsZWN0KS5mYWN0b3J5KFwiRmlsZURyb3BcIiwgc2VydmljZUZpbGVEcm9wKS5mYWN0b3J5KFwiRmlsZU92ZXJcIiwgc2VydmljZUZpbGVPdmVyKS5kaXJlY3RpdmUoXCJudkZpbGVTZWxlY3RcIiwgZGlyZWN0aXZlRmlsZVNlbGVjdCkuZGlyZWN0aXZlKFwibnZGaWxlRHJvcFwiLCBkaXJlY3RpdmVGaWxlRHJvcCkuZGlyZWN0aXZlKFwibnZGaWxlT3ZlclwiLCBkaXJlY3RpdmVGaWxlT3ZlcikucnVuKFtcIkZpbGVVcGxvYWRlclwiLCBcIkZpbGVMaWtlT2JqZWN0XCIsIFwiRmlsZUl0ZW1cIiwgXCJGaWxlRGlyZWN0aXZlXCIsIFwiRmlsZVNlbGVjdFwiLCBcIkZpbGVEcm9wXCIsIFwiRmlsZU92ZXJcIiwgZnVuY3Rpb24gKEZpbGVVcGxvYWRlciwgRmlsZUxpa2VPYmplY3QsIEZpbGVJdGVtLCBGaWxlRGlyZWN0aXZlLCBGaWxlU2VsZWN0LCBGaWxlRHJvcCwgRmlsZU92ZXIpIHtcblx0ICAgIC8vIG9ubHkgZm9yIGNvbXBhdGliaWxpdHlcblx0ICAgIEZpbGVVcGxvYWRlci5GaWxlTGlrZU9iamVjdCA9IEZpbGVMaWtlT2JqZWN0O1xuXHQgICAgRmlsZVVwbG9hZGVyLkZpbGVJdGVtID0gRmlsZUl0ZW07XG5cdCAgICBGaWxlVXBsb2FkZXIuRmlsZURpcmVjdGl2ZSA9IEZpbGVEaXJlY3RpdmU7XG5cdCAgICBGaWxlVXBsb2FkZXIuRmlsZVNlbGVjdCA9IEZpbGVTZWxlY3Q7XG5cdCAgICBGaWxlVXBsb2FkZXIuRmlsZURyb3AgPSBGaWxlRHJvcDtcblx0ICAgIEZpbGVVcGxvYWRlci5GaWxlT3ZlciA9IEZpbGVPdmVyO1xuXHR9XSk7XG5cbi8qKiovIH0sXG5cbi8qIDEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0ge1xuXHRcdFwibmFtZVwiOiBcImFuZ3VsYXJGaWxlVXBsb2FkXCJcblx0fTtcblxuLyoqKi8gfSxcbi8qIDIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdG1vZHVsZS5leHBvcnRzID0ge1xuXHQgICAgdXJsOiBcIi9cIixcblx0ICAgIGFsaWFzOiBcImZpbGVcIixcblx0ICAgIGhlYWRlcnM6IHsnYXV0aG9yaXphdGlvbic6ICdCZWFyZXIgQmM3RFdTN0tLUkx0eG1kZFVaSTFUMWxadTJKMVloUjhPTFhHV05abid9LFxuXHQgICAgcXVldWU6IFtdLFxuXHQgICAgcHJvZ3Jlc3M6IDAsXG5cdCAgICBhdXRvVXBsb2FkOiBmYWxzZSxcblx0ICAgIHJlbW92ZUFmdGVyVXBsb2FkOiBmYWxzZSxcblx0ICAgIG1ldGhvZDogXCJQT1NUXCIsXG5cdCAgICBmaWx0ZXJzOiBbXSxcblx0ICAgIGZvcm1EYXRhOiBbXSxcblx0ICAgIHF1ZXVlTGltaXQ6IE51bWJlci5NQVhfVkFMVUUsXG5cdCAgICB3aXRoQ3JlZGVudGlhbHM6IGZhbHNlXG5cdH07XG5cbi8qKiovIH0sXG4vKiAzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblxuXHR2YXIgX2ludGVyb3BSZXF1aXJlID0gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqW1wiZGVmYXVsdFwiXSA6IG9iajsgfTtcblxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGtleSBpbiBwcm9wcykgeyB2YXIgcHJvcCA9IHByb3BzW2tleV07IHByb3AuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKHByb3AudmFsdWUpIHByb3Aud3JpdGFibGUgPSB0cnVlOyB9IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpOyB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0pKCk7XG5cblx0dmFyIF9jbGFzc0NhbGxDaGVjayA9IGZ1bmN0aW9uIChpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9O1xuXG5cdHZhciBDT05GSUcgPSBfaW50ZXJvcFJlcXVpcmUoX193ZWJwYWNrX3JlcXVpcmVfXygxKSk7XG5cblx0dmFyIGNvcHkgPSBhbmd1bGFyLmNvcHk7XG5cdHZhciBleHRlbmQgPSBhbmd1bGFyLmV4dGVuZDtcblx0dmFyIGZvckVhY2ggPSBhbmd1bGFyLmZvckVhY2g7XG5cdHZhciBpc09iamVjdCA9IGFuZ3VsYXIuaXNPYmplY3Q7XG5cdHZhciBpc051bWJlciA9IGFuZ3VsYXIuaXNOdW1iZXI7XG5cdHZhciBpc0RlZmluZWQgPSBhbmd1bGFyLmlzRGVmaW5lZDtcblx0dmFyIGlzQXJyYXkgPSBhbmd1bGFyLmlzQXJyYXk7XG5cdHZhciBlbGVtZW50ID0gYW5ndWxhci5lbGVtZW50O1xuXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGZpbGVVcGxvYWRlck9wdGlvbnMsICRyb290U2NvcGUsICRodHRwLCAkd2luZG93LCBGaWxlTGlrZU9iamVjdCwgRmlsZUl0ZW0pIHtcblx0ICAgIHZhciBGaWxlID0gJHdpbmRvdy5GaWxlO1xuXHQgICAgdmFyIEZvcm1EYXRhID0gJHdpbmRvdy5Gb3JtRGF0YTtcblxuXHQgICAgdmFyIEZpbGVVcGxvYWRlciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKipcblx0ICAgICAgICAgKiBQVUJMSUNcblx0ICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKi9cblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIEZpbGVVcGxvYWRlclxuXHQgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cblx0ICAgICAgICAgKiBAY29uc3RydWN0b3Jcblx0ICAgICAgICAgKi9cblxuXHQgICAgICAgIGZ1bmN0aW9uIEZpbGVVcGxvYWRlcihvcHRpb25zKSB7XG5cdCAgICAgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBGaWxlVXBsb2FkZXIpO1xuXG5cdCAgICAgICAgICAgIHZhciBzZXR0aW5ncyA9IGNvcHkoZmlsZVVwbG9hZGVyT3B0aW9ucyk7XG5cblx0ICAgICAgICAgICAgZXh0ZW5kKHRoaXMsIHNldHRpbmdzLCBvcHRpb25zLCB7XG5cdCAgICAgICAgICAgICAgICBpc1VwbG9hZGluZzogZmFsc2UsXG5cdCAgICAgICAgICAgICAgICBfbmV4dEluZGV4OiAwLFxuXHQgICAgICAgICAgICAgICAgX2ZhaWxGaWx0ZXJJbmRleDogLTEsXG5cdCAgICAgICAgICAgICAgICBfZGlyZWN0aXZlczogeyBzZWxlY3Q6IFtdLCBkcm9wOiBbXSwgb3ZlcjogW10gfVxuXHQgICAgICAgICAgICB9KTtcblxuXHQgICAgICAgICAgICAvLyBhZGQgZGVmYXVsdCBmaWx0ZXJzXG5cdCAgICAgICAgICAgIHRoaXMuZmlsdGVycy51bnNoaWZ0KHsgbmFtZTogXCJxdWV1ZUxpbWl0XCIsIGZuOiB0aGlzLl9xdWV1ZUxpbWl0RmlsdGVyIH0pO1xuXHQgICAgICAgICAgICB0aGlzLmZpbHRlcnMudW5zaGlmdCh7IG5hbWU6IFwiZm9sZGVyXCIsIGZuOiB0aGlzLl9mb2xkZXJGaWx0ZXIgfSk7XG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgX2NyZWF0ZUNsYXNzKEZpbGVVcGxvYWRlciwge1xuXHQgICAgICAgICAgICBhZGRUb1F1ZXVlOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIEFkZHMgaXRlbXMgdG8gdGhlIHF1ZXVlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGV8SFRNTElucHV0RWxlbWVudHxPYmplY3R8RmlsZUxpc3R8QXJyYXk8T2JqZWN0Pn0gZmlsZXNcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7QXJyYXk8RnVuY3Rpb24+fFN0cmluZ30gZmlsdGVyc1xuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRUb1F1ZXVlKGZpbGVzLCBvcHRpb25zLCBmaWx0ZXJzKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuXHQgICAgICAgICAgICAgICAgICAgIHZhciBsaXN0ID0gdGhpcy5pc0FycmF5TGlrZU9iamVjdChmaWxlcykgPyBmaWxlcyA6IFtmaWxlc107XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGFycmF5T2ZGaWx0ZXJzID0gdGhpcy5fZ2V0RmlsdGVycyhmaWx0ZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgY291bnQgPSB0aGlzLnF1ZXVlLmxlbmd0aDtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgYWRkZWRGaWxlSXRlbXMgPSBbXTtcblxuXHQgICAgICAgICAgICAgICAgICAgIGZvckVhY2gobGlzdCwgZnVuY3Rpb24gKHNvbWUgLyp7RmlsZXxIVE1MSW5wdXRFbGVtZW50fE9iamVjdH0qLykge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IG5ldyBGaWxlTGlrZU9iamVjdChzb21lKTtcblxuXHQgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuX2lzVmFsaWRGaWxlKHRlbXAsIGFycmF5T2ZGaWx0ZXJzLCBvcHRpb25zKSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpbGVJdGVtID0gbmV3IEZpbGVJdGVtKF90aGlzLCBzb21lLCBvcHRpb25zKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZGVkRmlsZUl0ZW1zLnB1c2goZmlsZUl0ZW0pO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucXVldWUucHVzaChmaWxlSXRlbSk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5fb25BZnRlckFkZGluZ0ZpbGUoZmlsZUl0ZW0pO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpbHRlciA9IGFycmF5T2ZGaWx0ZXJzW190aGlzLl9mYWlsRmlsdGVySW5kZXhdO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX29uV2hlbkFkZGluZ0ZpbGVGYWlsZWQodGVtcCwgZmlsdGVyLCBvcHRpb25zKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgIH0pO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucXVldWUubGVuZ3RoICE9PSBjb3VudCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9vbkFmdGVyQWRkaW5nQWxsKGFkZGVkRmlsZUl0ZW1zKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9ncmVzcyA9IHRoaXMuX2dldFRvdGFsUHJvZ3Jlc3MoKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZW5kZXIoKTtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hdXRvVXBsb2FkKSB0aGlzLnVwbG9hZEFsbCgpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICByZW1vdmVGcm9tUXVldWU6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmVtb3ZlIGl0ZW1zIGZyb20gdGhlIHF1ZXVlLiBSZW1vdmUgbGFzdDogaW5kZXggPSAtMVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtGaWxlSXRlbXxOdW1iZXJ9IHZhbHVlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZUZyb21RdWV1ZSh2YWx1ZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMuZ2V0SW5kZXhPZkl0ZW0odmFsdWUpO1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBpdGVtID0gdGhpcy5xdWV1ZVtpbmRleF07XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0uaXNVcGxvYWRpbmcpIGl0ZW0uY2FuY2VsKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWV1ZS5zcGxpY2UoaW5kZXgsIDEpO1xuXHQgICAgICAgICAgICAgICAgICAgIGl0ZW0uX2Rlc3Ryb3koKTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2dyZXNzID0gdGhpcy5fZ2V0VG90YWxQcm9ncmVzcygpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBjbGVhclF1ZXVlOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENsZWFycyB0aGUgcXVldWVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYXJRdWV1ZSgpIHtcblx0ICAgICAgICAgICAgICAgICAgICB3aGlsZSAodGhpcy5xdWV1ZS5sZW5ndGgpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWV1ZVswXS5yZW1vdmUoKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9ncmVzcyA9IDA7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIHVwbG9hZEl0ZW06IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogVXBsb2FkcyBhIGl0ZW0gZnJvbSB0aGUgcXVldWVcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZUl0ZW18TnVtYmVyfSB2YWx1ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiB1cGxvYWRJdGVtKHZhbHVlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5nZXRJbmRleE9mSXRlbSh2YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSB0aGlzLnF1ZXVlW2luZGV4XTtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgdHJhbnNwb3J0ID0gdGhpcy5pc0hUTUw1ID8gXCJfeGhyVHJhbnNwb3J0XCIgOiBcIl9pZnJhbWVUcmFuc3BvcnRcIjtcblxuXHQgICAgICAgICAgICAgICAgICAgIGl0ZW0uX3ByZXBhcmVUb1VwbG9hZGluZygpO1xuXHQgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzVXBsb2FkaW5nKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgICAgICAgICAgICB9dGhpcy5pc1VwbG9hZGluZyA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpc1t0cmFuc3BvcnRdKGl0ZW0pO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBjYW5jZWxJdGVtOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENhbmNlbHMgdXBsb2FkaW5nIG9mIGl0ZW0gZnJvbSB0aGUgcXVldWVcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZUl0ZW18TnVtYmVyfSB2YWx1ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjYW5jZWxJdGVtKHZhbHVlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5nZXRJbmRleE9mSXRlbSh2YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSB0aGlzLnF1ZXVlW2luZGV4XTtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgcHJvcCA9IHRoaXMuaXNIVE1MNSA/IFwiX3hoclwiIDogXCJfZm9ybVwiO1xuXHQgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtICYmIGl0ZW0uaXNVcGxvYWRpbmcpIGl0ZW1bcHJvcF0uYWJvcnQoKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgdXBsb2FkQWxsOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFVwbG9hZHMgYWxsIG5vdCB1cGxvYWRlZCBpdGVtcyBvZiBxdWV1ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiB1cGxvYWRBbGwoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW1zID0gdGhpcy5nZXROb3RVcGxvYWRlZEl0ZW1zKCkuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhaXRlbS5pc1VwbG9hZGluZztcblx0ICAgICAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAoIWl0ZW1zLmxlbmd0aCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICAgICAgICAgICAgfWZvckVhY2goaXRlbXMsIGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLl9wcmVwYXJlVG9VcGxvYWRpbmcoKTtcblx0ICAgICAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICAgICAgICBpdGVtc1swXS51cGxvYWQoKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgY2FuY2VsQWxsOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENhbmNlbHMgYWxsIHVwbG9hZHNcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2FuY2VsQWxsKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBpdGVtcyA9IHRoaXMuZ2V0Tm90VXBsb2FkZWRJdGVtcygpO1xuXHQgICAgICAgICAgICAgICAgICAgIGZvckVhY2goaXRlbXMsIGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmNhbmNlbCgpO1xuXHQgICAgICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBpc0ZpbGU6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmV0dXJucyBcInRydWVcIiBpZiB2YWx1ZSBhbiBpbnN0YW5jZSBvZiBGaWxlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGlzRmlsZSh2YWx1ZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLmlzRmlsZSh2YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIGlzRmlsZUxpa2VPYmplY3Q6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmV0dXJucyBcInRydWVcIiBpZiB2YWx1ZSBhbiBpbnN0YW5jZSBvZiBGaWxlTGlrZU9iamVjdFxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMge0Jvb2xlYW59XG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc0ZpbGVMaWtlT2JqZWN0KHZhbHVlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IuaXNGaWxlTGlrZU9iamVjdCh2YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIGlzQXJyYXlMaWtlT2JqZWN0OiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJldHVybnMgXCJ0cnVlXCIgaWYgdmFsdWUgaXMgYXJyYXkgbGlrZSBvYmplY3Rcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc0FycmF5TGlrZU9iamVjdCh2YWx1ZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLmlzQXJyYXlMaWtlT2JqZWN0KHZhbHVlKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgZ2V0SW5kZXhPZkl0ZW06IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmV0dXJucyBhIGluZGV4IG9mIGl0ZW0gZnJvbSB0aGUgcXVldWVcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7SXRlbXxOdW1iZXJ9IHZhbHVlXG5cdCAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7TnVtYmVyfVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJbmRleE9mSXRlbSh2YWx1ZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBpc051bWJlcih2YWx1ZSkgPyB2YWx1ZSA6IHRoaXMucXVldWUuaW5kZXhPZih2YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIGdldE5vdFVwbG9hZGVkSXRlbXM6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmV0dXJucyBub3QgdXBsb2FkZWQgaXRlbXNcblx0ICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtBcnJheX1cblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Tm90VXBsb2FkZWRJdGVtcygpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5xdWV1ZS5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFpdGVtLmlzVXBsb2FkZWQ7XG5cdCAgICAgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIGdldFJlYWR5SXRlbXM6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmV0dXJucyBpdGVtcyByZWFkeSBmb3IgdXBsb2FkXG5cdCAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7QXJyYXl9XG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFJlYWR5SXRlbXMoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucXVldWUuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmlzUmVhZHkgJiYgIWl0ZW0uaXNVcGxvYWRpbmc7XG5cdCAgICAgICAgICAgICAgICAgICAgfSkuc29ydChmdW5jdGlvbiAoaXRlbTEsIGl0ZW0yKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtMS5pbmRleCAtIGl0ZW0yLmluZGV4O1xuXHQgICAgICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBkZXN0cm95OiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIERlc3Ryb3lzIGluc3RhbmNlIG9mIEZpbGVVcGxvYWRlclxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95KCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cblx0ICAgICAgICAgICAgICAgICAgICBmb3JFYWNoKHRoaXMuX2RpcmVjdGl2ZXMsIGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgZm9yRWFjaChfdGhpcy5fZGlyZWN0aXZlc1trZXldLCBmdW5jdGlvbiAob2JqZWN0KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QuZGVzdHJveSgpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgb25BZnRlckFkZGluZ0FsbDoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtBcnJheX0gZmlsZUl0ZW1zXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uQWZ0ZXJBZGRpbmdBbGwoZmlsZUl0ZW1zKSB7fVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBvbkFmdGVyQWRkaW5nRmlsZToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtGaWxlSXRlbX0gZmlsZUl0ZW1cblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25BZnRlckFkZGluZ0ZpbGUoZmlsZUl0ZW0pIHt9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIG9uV2hlbkFkZGluZ0ZpbGVGYWlsZWQ6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogQ2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZXxPYmplY3R9IGl0ZW1cblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBmaWx0ZXJcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uV2hlbkFkZGluZ0ZpbGVGYWlsZWQoaXRlbSwgZmlsdGVyLCBvcHRpb25zKSB7fVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBvbkJlZm9yZVVwbG9hZEl0ZW06IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogQ2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZUl0ZW19IGZpbGVJdGVtXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uQmVmb3JlVXBsb2FkSXRlbShmaWxlSXRlbSkge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgb25Qcm9ncmVzc0l0ZW06IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogQ2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZUl0ZW19IGZpbGVJdGVtXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gcHJvZ3Jlc3Ncblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25Qcm9ncmVzc0l0ZW0oZmlsZUl0ZW0sIHByb2dyZXNzKSB7fVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBvblByb2dyZXNzQWxsOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gcHJvZ3Jlc3Ncblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25Qcm9ncmVzc0FsbChwcm9ncmVzcykge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgb25TdWNjZXNzSXRlbToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtGaWxlSXRlbX0gaXRlbVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSByZXNwb25zZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHN0YXR1c1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGhlYWRlcnNcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25TdWNjZXNzSXRlbShpdGVtLCByZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKSB7fVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBvbkVycm9ySXRlbToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtGaWxlSXRlbX0gaXRlbVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSByZXNwb25zZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHN0YXR1c1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGhlYWRlcnNcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25FcnJvckl0ZW0oaXRlbSwgcmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycykge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgb25DYW5jZWxJdGVtOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGVJdGVtfSBpdGVtXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyp9IHJlc3BvbnNlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gc3RhdHVzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaGVhZGVyc1xuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNhbmNlbEl0ZW0oaXRlbSwgcmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycykge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgb25Db21wbGV0ZUl0ZW06IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogQ2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZUl0ZW19IGl0ZW1cblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7Kn0gcmVzcG9uc2Vcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzdGF0dXNcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBoZWFkZXJzXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ29tcGxldGVJdGVtKGl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpIHt9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIG9uQ29tcGxldGVBbGw6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogQ2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25Db21wbGV0ZUFsbCgpIHt9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9nZXRUb3RhbFByb2dyZXNzOiB7XG5cdCAgICAgICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKlxuXHQgICAgICAgICAgICAgICAgICogUFJJVkFURVxuXHQgICAgICAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKiovXG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJldHVybnMgdGhlIHRvdGFsIHByb2dyZXNzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gW3ZhbHVlXVxuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMge051bWJlcn1cblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRUb3RhbFByb2dyZXNzKHZhbHVlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVtb3ZlQWZ0ZXJVcGxvYWQpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlIHx8IDA7XG5cdCAgICAgICAgICAgICAgICAgICAgfXZhciBub3RVcGxvYWRlZCA9IHRoaXMuZ2V0Tm90VXBsb2FkZWRJdGVtcygpLmxlbmd0aDtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgdXBsb2FkZWQgPSBub3RVcGxvYWRlZCA/IHRoaXMucXVldWUubGVuZ3RoIC0gbm90VXBsb2FkZWQgOiB0aGlzLnF1ZXVlLmxlbmd0aDtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgcmF0aW8gPSAxMDAgLyB0aGlzLnF1ZXVlLmxlbmd0aDtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudCA9ICh2YWx1ZSB8fCAwKSAqIHJhdGlvIC8gMTAwO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hdGgucm91bmQodXBsb2FkZWQgKiByYXRpbyArIGN1cnJlbnQpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfZ2V0RmlsdGVyczoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBSZXR1cm5zIGFycmF5IG9mIGZpbHRlcnNcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7QXJyYXk8RnVuY3Rpb24+fFN0cmluZ30gZmlsdGVyc1xuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMge0FycmF5PEZ1bmN0aW9uPn1cblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRGaWx0ZXJzKGZpbHRlcnMpIHtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAoIWZpbHRlcnMpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmlsdGVycztcblx0ICAgICAgICAgICAgICAgICAgICB9aWYgKGlzQXJyYXkoZmlsdGVycykpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpbHRlcnM7XG5cdCAgICAgICAgICAgICAgICAgICAgfXZhciBuYW1lcyA9IGZpbHRlcnMubWF0Y2goL1teXFxzLF0rL2cpO1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbHRlcnMuZmlsdGVyKGZ1bmN0aW9uIChmaWx0ZXIpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5hbWVzLmluZGV4T2YoZmlsdGVyLm5hbWUpICE9PSAtMTtcblx0ICAgICAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX3JlbmRlcjoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBVcGRhdGVzIGh0bWxcblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW5kZXIoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKCEkcm9vdFNjb3BlLiQkcGhhc2UpICRyb290U2NvcGUuJGFwcGx5KCk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9mb2xkZXJGaWx0ZXI6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmV0dXJucyBcInRydWVcIiBpZiBpdGVtIGlzIGEgZmlsZSAobm90IGZvbGRlcilcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZXxGaWxlTGlrZU9iamVjdH0gaXRlbVxuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMge0Jvb2xlYW59XG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfZm9sZGVyRmlsdGVyKGl0ZW0pIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gISEoaXRlbS5zaXplIHx8IGl0ZW0udHlwZSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9xdWV1ZUxpbWl0RmlsdGVyOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJldHVybnMgXCJ0cnVlXCIgaWYgdGhlIGxpbWl0IGhhcyBub3QgYmVlbiByZWFjaGVkXG5cdCAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9xdWV1ZUxpbWl0RmlsdGVyKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnF1ZXVlLmxlbmd0aCA8IHRoaXMucXVldWVMaW1pdDtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX2lzVmFsaWRGaWxlOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJldHVybnMgXCJ0cnVlXCIgaWYgZmlsZSBwYXNzIGFsbCBmaWx0ZXJzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGV8T2JqZWN0fSBmaWxlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0FycmF5PEZ1bmN0aW9uPn0gZmlsdGVyc1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2lzVmFsaWRGaWxlKGZpbGUsIGZpbHRlcnMsIG9wdGlvbnMpIHtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5fZmFpbEZpbHRlckluZGV4ID0gLTE7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFmaWx0ZXJzLmxlbmd0aCA/IHRydWUgOiBmaWx0ZXJzLmV2ZXJ5KGZ1bmN0aW9uIChmaWx0ZXIpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX2ZhaWxGaWx0ZXJJbmRleCsrO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmlsdGVyLmZuLmNhbGwoX3RoaXMsIGZpbGUsIG9wdGlvbnMpO1xuXHQgICAgICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfaXNTdWNjZXNzQ29kZToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDaGVja3Mgd2hldGhlciB1cGxvYWQgc3VjY2Vzc2Z1bFxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHN0YXR1c1xuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMge0Jvb2xlYW59XG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaXNTdWNjZXNzQ29kZShzdGF0dXMpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RhdHVzID49IDIwMCAmJiBzdGF0dXMgPCAzMDAgfHwgc3RhdHVzID09PSAzMDQ7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF90cmFuc2Zvcm1SZXNwb25zZToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBUcmFuc2Zvcm1zIHRoZSBzZXJ2ZXIgcmVzcG9uc2Vcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7Kn0gcmVzcG9uc2Vcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBoZWFkZXJzXG5cdCAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7Kn1cblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF90cmFuc2Zvcm1SZXNwb25zZShyZXNwb25zZSwgaGVhZGVycykge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBoZWFkZXJzR2V0dGVyID0gdGhpcy5faGVhZGVyc0dldHRlcihoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICBmb3JFYWNoKCRodHRwLmRlZmF1bHRzLnRyYW5zZm9ybVJlc3BvbnNlLCBmdW5jdGlvbiAodHJhbnNmb3JtRm4pIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSB0cmFuc2Zvcm1GbihyZXNwb25zZSwgaGVhZGVyc0dldHRlcik7XG5cdCAgICAgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfcGFyc2VIZWFkZXJzOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFBhcnNlZCByZXNwb25zZSBoZWFkZXJzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0gaGVhZGVyc1xuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMge09iamVjdH1cblx0ICAgICAgICAgICAgICAgICAqIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9ibG9iL21hc3Rlci9zcmMvbmcvaHR0cC5qc1xuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX3BhcnNlSGVhZGVycyhoZWFkZXJzKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIHBhcnNlZCA9IHt9LFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBrZXksXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhbCxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgaTtcblxuXHQgICAgICAgICAgICAgICAgICAgIGlmICghaGVhZGVycykge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VkO1xuXHQgICAgICAgICAgICAgICAgICAgIH1mb3JFYWNoKGhlYWRlcnMuc3BsaXQoXCJcXG5cIiksIGZ1bmN0aW9uIChsaW5lKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBsaW5lLmluZGV4T2YoXCI6XCIpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBrZXkgPSBsaW5lLnNsaWNlKDAsIGkpLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSBsaW5lLnNsaWNlKGkgKyAxKS50cmltKCk7XG5cblx0ICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGtleSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VkW2tleV0gPSBwYXJzZWRba2V5XSA/IHBhcnNlZFtrZXldICsgXCIsIFwiICsgdmFsIDogdmFsO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgfSk7XG5cblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VkO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfaGVhZGVyc0dldHRlcjoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBSZXR1cm5zIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBoZWFkZXJzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gcGFyc2VkSGVhZGVyc1xuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMge0Z1bmN0aW9ufVxuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2hlYWRlcnNHZXR0ZXIocGFyc2VkSGVhZGVycykge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAobmFtZSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBpZiAobmFtZSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlZEhlYWRlcnNbbmFtZS50b0xvd2VyQ2FzZSgpXSB8fCBudWxsO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZWRIZWFkZXJzO1xuXHQgICAgICAgICAgICAgICAgICAgIH07XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF94aHJUcmFuc3BvcnQ6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogVGhlIFhNTEh0dHBSZXF1ZXN0IHRyYW5zcG9ydFxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtGaWxlSXRlbX0gaXRlbVxuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX3hoclRyYW5zcG9ydChpdGVtKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuXHQgICAgICAgICAgICAgICAgICAgIHZhciB4aHIgPSBpdGVtLl94aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgZm9ybSA9IG5ldyBGb3JtRGF0YSgpO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5fb25CZWZvcmVVcGxvYWRJdGVtKGl0ZW0pO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgZm9yRWFjaChpdGVtLmZvcm1EYXRhLCBmdW5jdGlvbiAob2JqKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGZvckVhY2gob2JqLCBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybS5hcHBlbmQoa2V5LCB2YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICAgICAgICAgIH0pO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpdGVtLl9maWxlLnNpemUgIT0gXCJudW1iZXJcIikge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiVGhlIGZpbGUgc3BlY2lmaWVkIGlzIG5vIGxvbmdlciB2YWxpZFwiKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cblx0ICAgICAgICAgICAgICAgICAgICBmb3JtLmFwcGVuZChpdGVtLmFsaWFzLCBpdGVtLl9maWxlLCBpdGVtLmZpbGUubmFtZSk7XG5cblx0ICAgICAgICAgICAgICAgICAgICB4aHIudXBsb2FkLm9ucHJvZ3Jlc3MgPSBmdW5jdGlvbiAoZXZlbnQpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByb2dyZXNzID0gTWF0aC5yb3VuZChldmVudC5sZW5ndGhDb21wdXRhYmxlID8gZXZlbnQubG9hZGVkICogMTAwIC8gZXZlbnQudG90YWwgOiAwKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX29uUHJvZ3Jlc3NJdGVtKGl0ZW0sIHByb2dyZXNzKTtcblx0ICAgICAgICAgICAgICAgICAgICB9O1xuXG5cdCAgICAgICAgICAgICAgICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhlYWRlcnMgPSBfdGhpcy5fcGFyc2VIZWFkZXJzKHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXNwb25zZSA9IF90aGlzLl90cmFuc2Zvcm1SZXNwb25zZSh4aHIucmVzcG9uc2UsIGhlYWRlcnMpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ2lzdCA9IF90aGlzLl9pc1N1Y2Nlc3NDb2RlKHhoci5zdGF0dXMpID8gXCJTdWNjZXNzXCIgOiBcIkVycm9yXCI7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXRob2QgPSBcIl9vblwiICsgZ2lzdCArIFwiSXRlbVwiO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBfdGhpc1ttZXRob2RdKGl0ZW0sIHJlc3BvbnNlLCB4aHIuc3RhdHVzLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX29uQ29tcGxldGVJdGVtKGl0ZW0sIHJlc3BvbnNlLCB4aHIuc3RhdHVzLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICB9O1xuXG5cdCAgICAgICAgICAgICAgICAgICAgeGhyLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoZWFkZXJzID0gX3RoaXMuX3BhcnNlSGVhZGVycyh4aHIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSBfdGhpcy5fdHJhbnNmb3JtUmVzcG9uc2UoeGhyLnJlc3BvbnNlLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX29uRXJyb3JJdGVtKGl0ZW0sIHJlc3BvbnNlLCB4aHIuc3RhdHVzLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX29uQ29tcGxldGVJdGVtKGl0ZW0sIHJlc3BvbnNlLCB4aHIuc3RhdHVzLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICB9O1xuXG5cdCAgICAgICAgICAgICAgICAgICAgeGhyLm9uYWJvcnQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoZWFkZXJzID0gX3RoaXMuX3BhcnNlSGVhZGVycyh4aHIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSBfdGhpcy5fdHJhbnNmb3JtUmVzcG9uc2UoeGhyLnJlc3BvbnNlLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX29uQ2FuY2VsSXRlbShpdGVtLCByZXNwb25zZSwgeGhyLnN0YXR1cywgaGVhZGVycyk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9vbkNvbXBsZXRlSXRlbShpdGVtLCByZXNwb25zZSwgeGhyLnN0YXR1cywgaGVhZGVycyk7XG5cdCAgICAgICAgICAgICAgICAgICAgfTtcblxuXHQgICAgICAgICAgICAgICAgICAgIHhoci5vcGVuKGl0ZW0ubWV0aG9kLCBpdGVtLnVybCwgdHJ1ZSk7XG5cblx0ICAgICAgICAgICAgICAgICAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gaXRlbS53aXRoQ3JlZGVudGlhbHM7XG5cblx0ICAgICAgICAgICAgICAgICAgICBmb3JFYWNoKGl0ZW0uaGVhZGVycywgZnVuY3Rpb24gKHZhbHVlLCBuYW1lKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKG5hbWUsIHZhbHVlKTtcblx0ICAgICAgICAgICAgICAgICAgICB9KTtcblxuXHQgICAgICAgICAgICAgICAgICAgIHhoci5zZW5kKGZvcm0pO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlbmRlcigpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfaWZyYW1lVHJhbnNwb3J0OiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFRoZSBJRnJhbWUgdHJhbnNwb3J0XG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGVJdGVtfSBpdGVtXG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaWZyYW1lVHJhbnNwb3J0KGl0ZW0pIHtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGZvcm0gPSBlbGVtZW50KFwiPGZvcm0gc3R5bGU9XFxcImRpc3BsYXk6IG5vbmU7XFxcIiAvPlwiKTtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgaWZyYW1lID0gZWxlbWVudChcIjxpZnJhbWUgbmFtZT1cXFwiaWZyYW1lVHJhbnNwb3J0XCIgKyBEYXRlLm5vdygpICsgXCJcXFwiPlwiKTtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgaW5wdXQgPSBpdGVtLl9pbnB1dDtcblxuXHQgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLl9mb3JtKSBpdGVtLl9mb3JtLnJlcGxhY2VXaXRoKGlucHV0KTsgLy8gcmVtb3ZlIG9sZCBmb3JtXG5cdCAgICAgICAgICAgICAgICAgICAgaXRlbS5fZm9ybSA9IGZvcm07IC8vIHNhdmUgbGluayB0byBuZXcgZm9ybVxuXG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5fb25CZWZvcmVVcGxvYWRJdGVtKGl0ZW0pO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgaW5wdXQucHJvcChcIm5hbWVcIiwgaXRlbS5hbGlhcyk7XG5cblx0ICAgICAgICAgICAgICAgICAgICBmb3JFYWNoKGl0ZW0uZm9ybURhdGEsIGZ1bmN0aW9uIChvYmopIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgZm9yRWFjaChvYmosIGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudF8gPSBlbGVtZW50KFwiPGlucHV0IHR5cGU9XFxcImhpZGRlblxcXCIgbmFtZT1cXFwiXCIgKyBrZXkgKyBcIlxcXCIgLz5cIik7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50Xy52YWwodmFsdWUpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybS5hcHBlbmQoZWxlbWVudF8pO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICAgICAgICB9KTtcblxuXHQgICAgICAgICAgICAgICAgICAgIGZvcm0ucHJvcCh7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogaXRlbS51cmwsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldDogaWZyYW1lLnByb3AoXCJuYW1lXCIpLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBlbmN0eXBlOiBcIm11bHRpcGFydC9mb3JtLWRhdGFcIixcblx0ICAgICAgICAgICAgICAgICAgICAgICAgZW5jb2Rpbmc6IFwibXVsdGlwYXJ0L2Zvcm0tZGF0YVwiIC8vIG9sZCBJRVxuXHQgICAgICAgICAgICAgICAgICAgIH0pO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgaWZyYW1lLmJpbmQoXCJsb2FkXCIsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGh0bWwgPSBcIlwiO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RhdHVzID0gMjAwO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGaXggZm9yIGxlZ2FjeSBJRSBicm93c2VycyB0aGF0IGxvYWRzIGludGVybmFsIGVycm9yIHBhZ2Vcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdoZW4gZmFpbGVkIFdTIHJlc3BvbnNlIHJlY2VpdmVkLiBJbiBjb25zZXF1ZW5jZSBpZnJhbWVcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnRlbnQgYWNjZXNzIGRlbmllZCBlcnJvciBpcyB0aHJvd24gYmVjb3VzZSB0cnlpbmcgdG9cblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFjY2VzcyBjcm9zcyBkb21haW4gcGFnZS4gV2hlbiBzdWNoIHRoaW5nIG9jY3VycyBub3RpZnlpbmdcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdpdGggZW1wdHkgcmVzcG9uc2Ugb2JqZWN0LiBTZWUgbW9yZSBpbmZvIGF0OlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xNTEzNjIvYWNjZXNzLWlzLWRlbmllZC1lcnJvci1vbi1hY2Nlc3NpbmctaWZyYW1lLWRvY3VtZW50LW9iamVjdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90ZSB0aGF0IGlmIG5vbiBzdGFuZGFyZCA0eHggb3IgNXh4IGVycm9yIGNvZGUgcmV0dXJuZWRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZyb20gV1MgdGhlbiByZXNwb25zZSBjb250ZW50IGNhbiBiZSBhY2Nlc3NlZCB3aXRob3V0IGVycm9yXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBidXQgJ1hIUicgc3RhdHVzIGJlY29tZXMgMjAwLiBJbiBvcmRlciB0byBhdm9pZCBjb25mdXNpb25cblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJldHVybmluZyByZXNwb25zZSB2aWEgc2FtZSAnc3VjY2VzcycgZXZlbnQgaGFuZGxlci5cblxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZml4ZWQgYW5ndWxhci5jb250ZW50cygpIGZvciBpZnJhbWVzXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sID0gaWZyYW1lWzBdLmNvbnRlbnREb2N1bWVudC5ib2R5LmlubmVySFRNTDtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW4gY2FzZSB3ZSBydW4gaW50byB0aGUgYWNjZXNzLWlzLWRlbmllZCBlcnJvciBvciB3ZSBoYXZlIGFub3RoZXIgZXJyb3Igb24gdGhlIHNlcnZlciBzaWRlXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAoaW50ZW50aW9uYWwgNTAwLDQwLi4uIGVycm9ycyksIHdlIGF0IGxlYXN0IHNheSAnc29tZXRoaW5nIHdlbnQgd3JvbmcnIC0+IDUwMFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzID0gNTAwO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB9XG5cblx0ICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHhociA9IHsgcmVzcG9uc2U6IGh0bWwsIHN0YXR1czogc3RhdHVzLCBkdW1teTogdHJ1ZSB9O1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaGVhZGVycyA9IHt9O1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSBfdGhpcy5fdHJhbnNmb3JtUmVzcG9uc2UoeGhyLnJlc3BvbnNlLCBoZWFkZXJzKTtcblxuXHQgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5fb25TdWNjZXNzSXRlbShpdGVtLCByZXNwb25zZSwgeGhyLnN0YXR1cywgaGVhZGVycyk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9vbkNvbXBsZXRlSXRlbShpdGVtLCByZXNwb25zZSwgeGhyLnN0YXR1cywgaGVhZGVycyk7XG5cdCAgICAgICAgICAgICAgICAgICAgfSk7XG5cblx0ICAgICAgICAgICAgICAgICAgICBmb3JtLmFib3J0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgeGhyID0geyBzdGF0dXM6IDAsIGR1bW15OiB0cnVlIH07XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoZWFkZXJzID0ge307XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXNwb25zZTtcblxuXHQgICAgICAgICAgICAgICAgICAgICAgICBpZnJhbWUudW5iaW5kKFwibG9hZFwiKS5wcm9wKFwic3JjXCIsIFwiamF2YXNjcmlwdDpmYWxzZTtcIik7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGZvcm0ucmVwbGFjZVdpdGgoaW5wdXQpO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9vbkNhbmNlbEl0ZW0oaXRlbSwgcmVzcG9uc2UsIHhoci5zdGF0dXMsIGhlYWRlcnMpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5fb25Db21wbGV0ZUl0ZW0oaXRlbSwgcmVzcG9uc2UsIHhoci5zdGF0dXMsIGhlYWRlcnMpO1xuXHQgICAgICAgICAgICAgICAgICAgIH07XG5cblx0ICAgICAgICAgICAgICAgICAgICBpbnB1dC5hZnRlcihmb3JtKTtcblx0ICAgICAgICAgICAgICAgICAgICBmb3JtLmFwcGVuZChpbnB1dCkuYXBwZW5kKGlmcmFtZSk7XG5cblx0ICAgICAgICAgICAgICAgICAgICBmb3JtWzBdLnN1Ym1pdCgpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlbmRlcigpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfb25XaGVuQWRkaW5nRmlsZUZhaWxlZDoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBJbm5lciBjYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtGaWxlfE9iamVjdH0gaXRlbVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGZpbHRlclxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9vbldoZW5BZGRpbmdGaWxlRmFpbGVkKGl0ZW0sIGZpbHRlciwgb3B0aW9ucykge1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMub25XaGVuQWRkaW5nRmlsZUZhaWxlZChpdGVtLCBmaWx0ZXIsIG9wdGlvbnMpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfb25BZnRlckFkZGluZ0ZpbGU6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogSW5uZXIgY2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZUl0ZW19IGl0ZW1cblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX29uQWZ0ZXJBZGRpbmdGaWxlKGl0ZW0pIHtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQWZ0ZXJBZGRpbmdGaWxlKGl0ZW0pO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfb25BZnRlckFkZGluZ0FsbDoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBJbm5lciBjYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtBcnJheTxGaWxlSXRlbT59IGl0ZW1zXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkFmdGVyQWRkaW5nQWxsKGl0ZW1zKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkFmdGVyQWRkaW5nQWxsKGl0ZW1zKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX29uQmVmb3JlVXBsb2FkSXRlbToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiAgSW5uZXIgY2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZUl0ZW19IGl0ZW1cblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkJlZm9yZVVwbG9hZEl0ZW0oaXRlbSkge1xuXHQgICAgICAgICAgICAgICAgICAgIGl0ZW0uX29uQmVmb3JlVXBsb2FkKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkJlZm9yZVVwbG9hZEl0ZW0oaXRlbSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9vblByb2dyZXNzSXRlbToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBJbm5lciBjYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtGaWxlSXRlbX0gaXRlbVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHByb2dyZXNzXG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfb25Qcm9ncmVzc0l0ZW0oaXRlbSwgcHJvZ3Jlc3MpIHtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgdG90YWwgPSB0aGlzLl9nZXRUb3RhbFByb2dyZXNzKHByb2dyZXNzKTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2dyZXNzID0gdG90YWw7XG5cdCAgICAgICAgICAgICAgICAgICAgaXRlbS5fb25Qcm9ncmVzcyhwcm9ncmVzcyk7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5vblByb2dyZXNzSXRlbShpdGVtLCBwcm9ncmVzcyk7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5vblByb2dyZXNzQWxsKHRvdGFsKTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZW5kZXIoKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX29uU3VjY2Vzc0l0ZW06IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogSW5uZXIgY2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZUl0ZW19IGl0ZW1cblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7Kn0gcmVzcG9uc2Vcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzdGF0dXNcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBoZWFkZXJzXG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfb25TdWNjZXNzSXRlbShpdGVtLCByZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaXRlbS5fb25TdWNjZXNzKHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMub25TdWNjZXNzSXRlbShpdGVtLCByZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX29uRXJyb3JJdGVtOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIElubmVyIGNhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGVJdGVtfSBpdGVtXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyp9IHJlc3BvbnNlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gc3RhdHVzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaGVhZGVyc1xuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX29uRXJyb3JJdGVtKGl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpIHtcblx0ICAgICAgICAgICAgICAgICAgICBpdGVtLl9vbkVycm9yKHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMub25FcnJvckl0ZW0oaXRlbSwgcmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycyk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9vbkNhbmNlbEl0ZW06IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogSW5uZXIgY2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZUl0ZW19IGl0ZW1cblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7Kn0gcmVzcG9uc2Vcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzdGF0dXNcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBoZWFkZXJzXG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfb25DYW5jZWxJdGVtKGl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpIHtcblx0ICAgICAgICAgICAgICAgICAgICBpdGVtLl9vbkNhbmNlbChyZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQ2FuY2VsSXRlbShpdGVtLCByZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX29uQ29tcGxldGVJdGVtOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIElubmVyIGNhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGVJdGVtfSBpdGVtXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyp9IHJlc3BvbnNlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gc3RhdHVzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaGVhZGVyc1xuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX29uQ29tcGxldGVJdGVtKGl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpIHtcblx0ICAgICAgICAgICAgICAgICAgICBpdGVtLl9vbkNvbXBsZXRlKHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMub25Db21wbGV0ZUl0ZW0oaXRlbSwgcmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycyk7XG5cblx0ICAgICAgICAgICAgICAgICAgICB2YXIgbmV4dEl0ZW0gPSB0aGlzLmdldFJlYWR5SXRlbXMoKVswXTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzVXBsb2FkaW5nID0gZmFsc2U7XG5cblx0ICAgICAgICAgICAgICAgICAgICBpZiAoaXNEZWZpbmVkKG5leHRJdGVtKSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBuZXh0SXRlbS51cGxvYWQoKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblxuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMub25Db21wbGV0ZUFsbCgpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvZ3Jlc3MgPSB0aGlzLl9nZXRUb3RhbFByb2dyZXNzKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVuZGVyKCk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9LCB7XG5cdCAgICAgICAgICAgIGlzRmlsZToge1xuXHQgICAgICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKipcblx0ICAgICAgICAgICAgICAgICAqIFNUQVRJQ1xuXHQgICAgICAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKiovXG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJldHVybnMgXCJ0cnVlXCIgaWYgdmFsdWUgYW4gaW5zdGFuY2Ugb2YgRmlsZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMge0Jvb2xlYW59XG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc0ZpbGUodmFsdWUpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gRmlsZSAmJiB2YWx1ZSBpbnN0YW5jZW9mIEZpbGU7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIGlzRmlsZUxpa2VPYmplY3Q6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmV0dXJucyBcInRydWVcIiBpZiB2YWx1ZSBhbiBpbnN0YW5jZSBvZiBGaWxlTGlrZU9iamVjdFxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMge0Jvb2xlYW59XG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc0ZpbGVMaWtlT2JqZWN0KHZhbHVlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgRmlsZUxpa2VPYmplY3Q7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIGlzQXJyYXlMaWtlT2JqZWN0OiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJldHVybnMgXCJ0cnVlXCIgaWYgdmFsdWUgaXMgYXJyYXkgbGlrZSBvYmplY3Rcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc0FycmF5TGlrZU9iamVjdCh2YWx1ZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBpc09iamVjdCh2YWx1ZSkgJiYgXCJsZW5ndGhcIiBpbiB2YWx1ZTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgaW5oZXJpdDoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBJbmhlcml0cyBhIHRhcmdldCAoQ2xhc3NfMSkgYnkgYSBzb3VyY2UgKENsYXNzXzIpXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSB0YXJnZXRcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHNvdXJjZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbmhlcml0KHRhcmdldCwgc291cmNlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc291cmNlLnByb3RvdHlwZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHRhcmdldDtcblx0ICAgICAgICAgICAgICAgICAgICB0YXJnZXQuc3VwZXJfID0gc291cmNlO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cblx0ICAgICAgICByZXR1cm4gRmlsZVVwbG9hZGVyO1xuXHQgICAgfSkoKTtcblxuXHQgICAgLyoqKioqKioqKioqKioqKioqKioqKipcblx0ICAgICAqIFBVQkxJQ1xuXHQgICAgICoqKioqKioqKioqKioqKioqKioqKiovXG5cdCAgICAvKipcblx0ICAgICAqIENoZWNrcyBhIHN1cHBvcnQgdGhlIGh0bWw1IHVwbG9hZGVyXG5cdCAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cblx0ICAgICAqIEByZWFkb25seVxuXHQgICAgICovXG5cdCAgICBGaWxlVXBsb2FkZXIucHJvdG90eXBlLmlzSFRNTDUgPSAhIShGaWxlICYmIEZvcm1EYXRhKTtcblx0ICAgIC8qKioqKioqKioqKioqKioqKioqKioqXG5cdCAgICAgKiBTVEFUSUNcblx0ICAgICAqKioqKioqKioqKioqKioqKioqKioqL1xuXHQgICAgLyoqXG5cdCAgICAgKiBAYm9ycm93cyBGaWxlVXBsb2FkZXIucHJvdG90eXBlLmlzSFRNTDVcblx0ICAgICAqL1xuXHQgICAgRmlsZVVwbG9hZGVyLmlzSFRNTDUgPSBGaWxlVXBsb2FkZXIucHJvdG90eXBlLmlzSFRNTDU7XG5cblx0ICAgIHJldHVybiBGaWxlVXBsb2FkZXI7XG5cdH07XG5cblx0bW9kdWxlLmV4cG9ydHMuJGluamVjdCA9IFtcImZpbGVVcGxvYWRlck9wdGlvbnNcIiwgXCIkcm9vdFNjb3BlXCIsIFwiJGh0dHBcIiwgXCIkd2luZG93XCIsIFwiRmlsZUxpa2VPYmplY3RcIiwgXCJGaWxlSXRlbVwiXTtcblxuLyoqKi8gfSxcbi8qIDQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdHZhciBfaW50ZXJvcFJlcXVpcmUgPSBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmpbXCJkZWZhdWx0XCJdIDogb2JqOyB9O1xuXG5cdHZhciBfY3JlYXRlQ2xhc3MgPSAoZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIga2V5IGluIHByb3BzKSB7IHZhciBwcm9wID0gcHJvcHNba2V5XTsgcHJvcC5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAocHJvcC52YWx1ZSkgcHJvcC53cml0YWJsZSA9IHRydWU7IH0gT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcyk7IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTtcblxuXHR2YXIgX2NsYXNzQ2FsbENoZWNrID0gZnVuY3Rpb24gKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH07XG5cblx0dmFyIENPTkZJRyA9IF9pbnRlcm9wUmVxdWlyZShfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKTtcblxuXHR2YXIgY29weSA9IGFuZ3VsYXIuY29weTtcblx0dmFyIGlzRWxlbWVudCA9IGFuZ3VsYXIuaXNFbGVtZW50O1xuXHR2YXIgaXNTdHJpbmcgPSBhbmd1bGFyLmlzU3RyaW5nO1xuXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIEZpbGVMaWtlT2JqZWN0ID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIEZpbGVMaWtlT2JqZWN0XG5cdCAgICAgICAgICogQHBhcmFtIHtGaWxlfEhUTUxJbnB1dEVsZW1lbnR8T2JqZWN0fSBmaWxlT3JJbnB1dFxuXHQgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuXHQgICAgICAgICAqL1xuXG5cdCAgICAgICAgZnVuY3Rpb24gRmlsZUxpa2VPYmplY3QoZmlsZU9ySW5wdXQpIHtcblx0ICAgICAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZpbGVMaWtlT2JqZWN0KTtcblxuXHQgICAgICAgICAgICB2YXIgaXNJbnB1dCA9IGlzRWxlbWVudChmaWxlT3JJbnB1dCk7XG5cdCAgICAgICAgICAgIHZhciBmYWtlUGF0aE9yT2JqZWN0ID0gaXNJbnB1dCA/IGZpbGVPcklucHV0LnZhbHVlIDogZmlsZU9ySW5wdXQ7XG5cdCAgICAgICAgICAgIHZhciBwb3N0Zml4ID0gaXNTdHJpbmcoZmFrZVBhdGhPck9iamVjdCkgPyBcIkZha2VQYXRoXCIgOiBcIk9iamVjdFwiO1xuXHQgICAgICAgICAgICB2YXIgbWV0aG9kID0gXCJfY3JlYXRlRnJvbVwiICsgcG9zdGZpeDtcblx0ICAgICAgICAgICAgdGhpc1ttZXRob2RdKGZha2VQYXRoT3JPYmplY3QpO1xuXHQgICAgICAgIH1cblxuXHQgICAgICAgIF9jcmVhdGVDbGFzcyhGaWxlTGlrZU9iamVjdCwge1xuXHQgICAgICAgICAgICBfY3JlYXRlRnJvbUZha2VQYXRoOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENyZWF0ZXMgZmlsZSBsaWtlIG9iamVjdCBmcm9tIGZha2UgcGF0aCBzdHJpbmdcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfY3JlYXRlRnJvbUZha2VQYXRoKHBhdGgpIHtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmxhc3RNb2RpZmllZERhdGUgPSBudWxsO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuc2l6ZSA9IG51bGw7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy50eXBlID0gXCJsaWtlL1wiICsgcGF0aC5zbGljZShwYXRoLmxhc3RJbmRleE9mKFwiLlwiKSArIDEpLnRvTG93ZXJDYXNlKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5uYW1lID0gcGF0aC5zbGljZShwYXRoLmxhc3RJbmRleE9mKFwiL1wiKSArIHBhdGgubGFzdEluZGV4T2YoXCJcXFxcXCIpICsgMik7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9jcmVhdGVGcm9tT2JqZWN0OiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENyZWF0ZXMgZmlsZSBsaWtlIG9iamVjdCBmcm9tIG9iamVjdFxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtGaWxlfEZpbGVMaWtlT2JqZWN0fSBvYmplY3Rcblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9jcmVhdGVGcm9tT2JqZWN0KG9iamVjdCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMubGFzdE1vZGlmaWVkRGF0ZSA9IGNvcHkob2JqZWN0Lmxhc3RNb2RpZmllZERhdGUpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuc2l6ZSA9IG9iamVjdC5zaXplO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMudHlwZSA9IG9iamVjdC50eXBlO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMubmFtZSA9IG9iamVjdC5uYW1lO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cblx0ICAgICAgICByZXR1cm4gRmlsZUxpa2VPYmplY3Q7XG5cdCAgICB9KSgpO1xuXG5cdCAgICByZXR1cm4gRmlsZUxpa2VPYmplY3Q7XG5cdH07XG5cblx0bW9kdWxlLmV4cG9ydHMuJGluamVjdCA9IFtdO1xuXG4vKioqLyB9LFxuLyogNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0dmFyIF9pbnRlcm9wUmVxdWlyZSA9IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9ialtcImRlZmF1bHRcIl0gOiBvYmo7IH07XG5cblx0dmFyIF9jcmVhdGVDbGFzcyA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBrZXkgaW4gcHJvcHMpIHsgdmFyIHByb3AgPSBwcm9wc1trZXldOyBwcm9wLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChwcm9wLnZhbHVlKSBwcm9wLndyaXRhYmxlID0gdHJ1ZTsgfSBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKTsgfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KSgpO1xuXG5cdHZhciBfY2xhc3NDYWxsQ2hlY2sgPSBmdW5jdGlvbiAoaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfTtcblxuXHR2YXIgQ09ORklHID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oMSkpO1xuXG5cdHZhciBjb3B5ID0gYW5ndWxhci5jb3B5O1xuXHR2YXIgZXh0ZW5kID0gYW5ndWxhci5leHRlbmQ7XG5cdHZhciBlbGVtZW50ID0gYW5ndWxhci5lbGVtZW50O1xuXHR2YXIgaXNFbGVtZW50ID0gYW5ndWxhci5pc0VsZW1lbnQ7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoJGNvbXBpbGUsIEZpbGVMaWtlT2JqZWN0KSB7XG5cdCAgICB2YXIgRmlsZUl0ZW0gPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIC8qKlxuXHQgICAgICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgRmlsZUl0ZW1cblx0ICAgICAgICAgKiBAcGFyYW0ge0ZpbGVVcGxvYWRlcn0gdXBsb2FkZXJcblx0ICAgICAgICAgKiBAcGFyYW0ge0ZpbGV8SFRNTElucHV0RWxlbWVudHxPYmplY3R9IHNvbWVcblx0ICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuXHQgICAgICAgICAqL1xuXG5cdCAgICAgICAgZnVuY3Rpb24gRmlsZUl0ZW0odXBsb2FkZXIsIHNvbWUsIG9wdGlvbnMpIHtcblx0ICAgICAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZpbGVJdGVtKTtcblxuXHQgICAgICAgICAgICB2YXIgaXNJbnB1dCA9IGlzRWxlbWVudChzb21lKTtcblx0ICAgICAgICAgICAgdmFyIGlucHV0ID0gaXNJbnB1dCA/IGVsZW1lbnQoc29tZSkgOiBudWxsO1xuXHQgICAgICAgICAgICB2YXIgZmlsZSA9ICFpc0lucHV0ID8gc29tZSA6IG51bGw7XG5cblx0ICAgICAgICAgICAgZXh0ZW5kKHRoaXMsIHtcblx0ICAgICAgICAgICAgICAgIHVybDogdXBsb2FkZXIudXJsLFxuXHQgICAgICAgICAgICAgICAgYWxpYXM6IHVwbG9hZGVyLmFsaWFzLFxuXHQgICAgICAgICAgICAgICAgaGVhZGVyczogY29weSh1cGxvYWRlci5oZWFkZXJzKSxcblx0ICAgICAgICAgICAgICAgIGZvcm1EYXRhOiBjb3B5KHVwbG9hZGVyLmZvcm1EYXRhKSxcblx0ICAgICAgICAgICAgICAgIHJlbW92ZUFmdGVyVXBsb2FkOiB1cGxvYWRlci5yZW1vdmVBZnRlclVwbG9hZCxcblx0ICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdXBsb2FkZXIud2l0aENyZWRlbnRpYWxzLFxuXHQgICAgICAgICAgICAgICAgbWV0aG9kOiB1cGxvYWRlci5tZXRob2Rcblx0ICAgICAgICAgICAgfSwgb3B0aW9ucywge1xuXHQgICAgICAgICAgICAgICAgdXBsb2FkZXI6IHVwbG9hZGVyLFxuXHQgICAgICAgICAgICAgICAgZmlsZTogbmV3IEZpbGVMaWtlT2JqZWN0KHNvbWUpLFxuXHQgICAgICAgICAgICAgICAgaXNSZWFkeTogZmFsc2UsXG5cdCAgICAgICAgICAgICAgICBpc1VwbG9hZGluZzogZmFsc2UsXG5cdCAgICAgICAgICAgICAgICBpc1VwbG9hZGVkOiBmYWxzZSxcblx0ICAgICAgICAgICAgICAgIGlzU3VjY2VzczogZmFsc2UsXG5cdCAgICAgICAgICAgICAgICBpc0NhbmNlbDogZmFsc2UsXG5cdCAgICAgICAgICAgICAgICBpc0Vycm9yOiBmYWxzZSxcblx0ICAgICAgICAgICAgICAgIHByb2dyZXNzOiAwLFxuXHQgICAgICAgICAgICAgICAgaW5kZXg6IG51bGwsXG5cdCAgICAgICAgICAgICAgICBfZmlsZTogZmlsZSxcblx0ICAgICAgICAgICAgICAgIF9pbnB1dDogaW5wdXRcblx0ICAgICAgICAgICAgfSk7XG5cblx0ICAgICAgICAgICAgaWYgKGlucHV0KSB0aGlzLl9yZXBsYWNlTm9kZShpbnB1dCk7XG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgX2NyZWF0ZUNsYXNzKEZpbGVJdGVtLCB7XG5cdCAgICAgICAgICAgIHVwbG9hZDoge1xuXHQgICAgICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKipcblx0ICAgICAgICAgICAgICAgICAqIFBVQkxJQ1xuXHQgICAgICAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKiovXG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFVwbG9hZHMgYSBGaWxlSXRlbVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiB1cGxvYWQoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGxvYWRlci51cGxvYWRJdGVtKHRoaXMpO1xuXHQgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGxvYWRlci5fb25Db21wbGV0ZUl0ZW0odGhpcywgXCJcIiwgMCwgW10pO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwbG9hZGVyLl9vbkVycm9ySXRlbSh0aGlzLCBcIlwiLCAwLCBbXSk7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBjYW5jZWw6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogQ2FuY2VscyB1cGxvYWRpbmcgb2YgRmlsZUl0ZW1cblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2FuY2VsKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMudXBsb2FkZXIuY2FuY2VsSXRlbSh0aGlzKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgcmVtb3ZlOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJlbW92ZXMgYSBGaWxlSXRlbVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmUoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy51cGxvYWRlci5yZW1vdmVGcm9tUXVldWUodGhpcyk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIG9uQmVmb3JlVXBsb2FkOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvbkJlZm9yZVVwbG9hZCgpIHt9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIG9uUHJvZ3Jlc3M6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogQ2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBwcm9ncmVzc1xuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25Qcm9ncmVzcyhwcm9ncmVzcykge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgb25TdWNjZXNzOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyp9IHJlc3BvbnNlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gc3RhdHVzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaGVhZGVyc1xuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvblN1Y2Nlc3MocmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycykge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgb25FcnJvcjoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSByZXNwb25zZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHN0YXR1c1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGhlYWRlcnNcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25FcnJvcihyZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKSB7fVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBvbkNhbmNlbDoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSByZXNwb25zZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHN0YXR1c1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGhlYWRlcnNcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25DYW5jZWwocmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycykge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgb25Db21wbGV0ZToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSByZXNwb25zZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHN0YXR1c1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGhlYWRlcnNcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25Db21wbGV0ZShyZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKSB7fVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfb25CZWZvcmVVcGxvYWQ6IHtcblx0ICAgICAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqXG5cdCAgICAgICAgICAgICAgICAgKiBQUklWQVRFXG5cdCAgICAgICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKi9cblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogSW5uZXIgY2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX29uQmVmb3JlVXBsb2FkKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNSZWFkeSA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1VwbG9hZGluZyA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1VwbG9hZGVkID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1N1Y2Nlc3MgPSBmYWxzZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQ2FuY2VsID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0Vycm9yID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9ncmVzcyA9IDA7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkJlZm9yZVVwbG9hZCgpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfb25Qcm9ncmVzczoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBJbm5lciBjYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHByb2dyZXNzXG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfb25Qcm9ncmVzcyhwcm9ncmVzcykge1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvZ3Jlc3MgPSBwcm9ncmVzcztcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLm9uUHJvZ3Jlc3MocHJvZ3Jlc3MpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfb25TdWNjZXNzOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIElubmVyIGNhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyp9IHJlc3BvbnNlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gc3RhdHVzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaGVhZGVyc1xuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX29uU3VjY2VzcyhyZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1JlYWR5ID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1VwbG9hZGluZyA9IGZhbHNlO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNVcGxvYWRlZCA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1N1Y2Nlc3MgPSB0cnVlO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNDYW5jZWwgPSBmYWxzZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzRXJyb3IgPSBmYWxzZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2dyZXNzID0gMTAwO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5kZXggPSBudWxsO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMub25TdWNjZXNzKHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfb25FcnJvcjoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBJbm5lciBjYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSByZXNwb25zZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHN0YXR1c1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGhlYWRlcnNcblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkVycm9yKHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpIHtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzUmVhZHkgPSBmYWxzZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzVXBsb2FkaW5nID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1VwbG9hZGVkID0gdHJ1ZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzU3VjY2VzcyA9IGZhbHNlO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNDYW5jZWwgPSBmYWxzZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzRXJyb3IgPSB0cnVlO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvZ3Jlc3MgPSAwO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5kZXggPSBudWxsO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMub25FcnJvcihyZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX29uQ2FuY2VsOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIElubmVyIGNhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyp9IHJlc3BvbnNlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gc3RhdHVzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaGVhZGVyc1xuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX29uQ2FuY2VsKHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpIHtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzUmVhZHkgPSBmYWxzZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzVXBsb2FkaW5nID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1VwbG9hZGVkID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1N1Y2Nlc3MgPSBmYWxzZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQ2FuY2VsID0gdHJ1ZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzRXJyb3IgPSBmYWxzZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2dyZXNzID0gMDtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmluZGV4ID0gbnVsbDtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQ2FuY2VsKHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfb25Db21wbGV0ZToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBJbm5lciBjYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSByZXNwb25zZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHN0YXR1c1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGhlYWRlcnNcblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkNvbXBsZXRlKHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpIHtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQ29tcGxldGUocmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycyk7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVtb3ZlQWZ0ZXJVcGxvYWQpIHRoaXMucmVtb3ZlKCk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9kZXN0cm95OiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIERlc3Ryb3lzIGEgRmlsZUl0ZW1cblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2Rlc3Ryb3koKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2lucHV0KSB0aGlzLl9pbnB1dC5yZW1vdmUoKTtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fZm9ybSkgdGhpcy5fZm9ybS5yZW1vdmUoKTtcblx0ICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5fZm9ybTtcblx0ICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5faW5wdXQ7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9wcmVwYXJlVG9VcGxvYWRpbmc6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUHJlcGFyZXMgdG8gdXBsb2FkaW5nXG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcHJlcGFyZVRvVXBsb2FkaW5nKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5kZXggPSB0aGlzLmluZGV4IHx8ICsrdGhpcy51cGxvYWRlci5fbmV4dEluZGV4O1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNSZWFkeSA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9yZXBsYWNlTm9kZToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBSZXBsYWNlcyBpbnB1dCBlbGVtZW50IG9uIGhpcyBjbG9uZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtKUUxpdGV8alF1ZXJ5fSBpbnB1dFxuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX3JlcGxhY2VOb2RlKGlucHV0KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGNsb25lID0gJGNvbXBpbGUoaW5wdXQuY2xvbmUoKSkoaW5wdXQuc2NvcGUoKSk7XG5cdCAgICAgICAgICAgICAgICAgICAgY2xvbmUucHJvcChcInZhbHVlXCIsIG51bGwpOyAvLyBGRiBmaXhcblx0ICAgICAgICAgICAgICAgICAgICBpbnB1dC5jc3MoXCJkaXNwbGF5XCIsIFwibm9uZVwiKTtcblx0ICAgICAgICAgICAgICAgICAgICBpbnB1dC5hZnRlcihjbG9uZSk7IC8vIHJlbW92ZSBqcXVlcnkgZGVwZW5kZW5jeVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cblx0ICAgICAgICByZXR1cm4gRmlsZUl0ZW07XG5cdCAgICB9KSgpO1xuXG5cdCAgICByZXR1cm4gRmlsZUl0ZW07XG5cdH07XG5cblx0bW9kdWxlLmV4cG9ydHMuJGluamVjdCA9IFtcIiRjb21waWxlXCIsIFwiRmlsZUxpa2VPYmplY3RcIl07XG5cbi8qKiovIH0sXG4vKiA2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblxuXHR2YXIgX2ludGVyb3BSZXF1aXJlID0gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqW1wiZGVmYXVsdFwiXSA6IG9iajsgfTtcblxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGtleSBpbiBwcm9wcykgeyB2YXIgcHJvcCA9IHByb3BzW2tleV07IHByb3AuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKHByb3AudmFsdWUpIHByb3Aud3JpdGFibGUgPSB0cnVlOyB9IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpOyB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0pKCk7XG5cblx0dmFyIF9jbGFzc0NhbGxDaGVjayA9IGZ1bmN0aW9uIChpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9O1xuXG5cdHZhciBDT05GSUcgPSBfaW50ZXJvcFJlcXVpcmUoX193ZWJwYWNrX3JlcXVpcmVfXygxKSk7XG5cblx0dmFyIGV4dGVuZCA9IGFuZ3VsYXIuZXh0ZW5kO1xuXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIEZpbGVEaXJlY3RpdmUgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIC8qKlxuXHQgICAgICAgICAqIENyZWF0ZXMgaW5zdGFuY2Ugb2Yge0ZpbGVEaXJlY3RpdmV9IG9iamVjdFxuXHQgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMudXBsb2FkZXJcblx0ICAgICAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBvcHRpb25zLmVsZW1lbnRcblx0ICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucy5ldmVudHNcblx0ICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gb3B0aW9ucy5wcm9wXG5cdCAgICAgICAgICogQGNvbnN0cnVjdG9yXG5cdCAgICAgICAgICovXG5cblx0ICAgICAgICBmdW5jdGlvbiBGaWxlRGlyZWN0aXZlKG9wdGlvbnMpIHtcblx0ICAgICAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZpbGVEaXJlY3RpdmUpO1xuXG5cdCAgICAgICAgICAgIGV4dGVuZCh0aGlzLCBvcHRpb25zKTtcblx0ICAgICAgICAgICAgdGhpcy51cGxvYWRlci5fZGlyZWN0aXZlc1t0aGlzLnByb3BdLnB1c2godGhpcyk7XG5cdCAgICAgICAgICAgIHRoaXMuX3NhdmVMaW5rcygpO1xuXHQgICAgICAgICAgICB0aGlzLmJpbmQoKTtcblx0ICAgICAgICB9XG5cblx0ICAgICAgICBfY3JlYXRlQ2xhc3MoRmlsZURpcmVjdGl2ZSwge1xuXHQgICAgICAgICAgICBiaW5kOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIEJpbmRzIGV2ZW50cyBoYW5kbGVzXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMuZXZlbnRzKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcm9wID0gdGhpcy5ldmVudHNba2V5XTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmJpbmQoa2V5LCB0aGlzW3Byb3BdKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIHVuYmluZDoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBVbmJpbmRzIGV2ZW50cyBoYW5kbGVzXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHVuYmluZCgpIHtcblx0ICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5ldmVudHMpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnVuYmluZChrZXksIHRoaXMuZXZlbnRzW2tleV0pO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgZGVzdHJveToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBEZXN0cm95cyBkaXJlY3RpdmVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSB0aGlzLnVwbG9hZGVyLl9kaXJlY3RpdmVzW3RoaXMucHJvcF0uaW5kZXhPZih0aGlzKTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLnVwbG9hZGVyLl9kaXJlY3RpdmVzW3RoaXMucHJvcF0uc3BsaWNlKGluZGV4LCAxKTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLnVuYmluZCgpO1xuXHQgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuZWxlbWVudCA9IG51bGw7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9zYXZlTGlua3M6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogU2F2ZXMgbGlua3MgdG8gZnVuY3Rpb25zXG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2F2ZUxpbmtzKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLmV2ZW50cykge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJvcCA9IHRoaXMuZXZlbnRzW2tleV07XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNbcHJvcF0gPSB0aGlzW3Byb3BdLmJpbmQodGhpcyk7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cblx0ICAgICAgICByZXR1cm4gRmlsZURpcmVjdGl2ZTtcblx0ICAgIH0pKCk7XG5cblx0ICAgIC8qKlxuXHQgICAgICogTWFwIG9mIGV2ZW50c1xuXHQgICAgICogQHR5cGUge09iamVjdH1cblx0ICAgICAqL1xuXHQgICAgRmlsZURpcmVjdGl2ZS5wcm90b3R5cGUuZXZlbnRzID0ge307XG5cblx0ICAgIHJldHVybiBGaWxlRGlyZWN0aXZlO1xuXHR9O1xuXG5cdG1vZHVsZS5leHBvcnRzLiRpbmplY3QgPSBbXTtcblxuLyoqKi8gfSxcbi8qIDcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdHZhciBfaW50ZXJvcFJlcXVpcmUgPSBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmpbXCJkZWZhdWx0XCJdIDogb2JqOyB9O1xuXG5cdHZhciBfY3JlYXRlQ2xhc3MgPSAoZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIga2V5IGluIHByb3BzKSB7IHZhciBwcm9wID0gcHJvcHNba2V5XTsgcHJvcC5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAocHJvcC52YWx1ZSkgcHJvcC53cml0YWJsZSA9IHRydWU7IH0gT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcyk7IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTtcblxuXHR2YXIgX2dldCA9IGZ1bmN0aW9uIGdldChvYmplY3QsIHByb3BlcnR5LCByZWNlaXZlcikgeyB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBwcm9wZXJ0eSk7IGlmIChkZXNjID09PSB1bmRlZmluZWQpIHsgdmFyIHBhcmVudCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmplY3QpOyBpZiAocGFyZW50ID09PSBudWxsKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gZWxzZSB7IHJldHVybiBnZXQocGFyZW50LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpOyB9IH0gZWxzZSBpZiAoXCJ2YWx1ZVwiIGluIGRlc2MgJiYgZGVzYy53cml0YWJsZSkgeyByZXR1cm4gZGVzYy52YWx1ZTsgfSBlbHNlIHsgdmFyIGdldHRlciA9IGRlc2MuZ2V0OyBpZiAoZ2V0dGVyID09PSB1bmRlZmluZWQpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSByZXR1cm4gZ2V0dGVyLmNhbGwocmVjZWl2ZXIpOyB9IH07XG5cblx0dmFyIF9pbmhlcml0cyA9IGZ1bmN0aW9uIChzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9O1xuXG5cdHZhciBfY2xhc3NDYWxsQ2hlY2sgPSBmdW5jdGlvbiAoaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfTtcblxuXHR2YXIgQ09ORklHID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oMSkpO1xuXG5cdHZhciBleHRlbmQgPSBhbmd1bGFyLmV4dGVuZDtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChGaWxlRGlyZWN0aXZlKSB7XG5cdCAgICB2YXIgRmlsZVNlbGVjdCA9IChmdW5jdGlvbiAoX0ZpbGVEaXJlY3RpdmUpIHtcblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBDcmVhdGVzIGluc3RhbmNlIG9mIHtGaWxlU2VsZWN0fSBvYmplY3Rcblx0ICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuXHQgICAgICAgICAqL1xuXG5cdCAgICAgICAgZnVuY3Rpb24gRmlsZVNlbGVjdChvcHRpb25zKSB7XG5cdCAgICAgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBGaWxlU2VsZWN0KTtcblxuXHQgICAgICAgICAgICB2YXIgZXh0ZW5kZWRPcHRpb25zID0gZXh0ZW5kKG9wdGlvbnMsIHtcblx0ICAgICAgICAgICAgICAgIC8vIE1hcCBvZiBldmVudHNcblx0ICAgICAgICAgICAgICAgIGV2ZW50czoge1xuXHQgICAgICAgICAgICAgICAgICAgICRkZXN0cm95OiBcImRlc3Ryb3lcIixcblx0ICAgICAgICAgICAgICAgICAgICBjaGFuZ2U6IFwib25DaGFuZ2VcIlxuXHQgICAgICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgICAgIC8vIE5hbWUgb2YgcHJvcGVydHkgaW5zaWRlIHVwbG9hZGVyLl9kaXJlY3RpdmUgb2JqZWN0XG5cdCAgICAgICAgICAgICAgICBwcm9wOiBcInNlbGVjdFwiXG5cdCAgICAgICAgICAgIH0pO1xuXG5cdCAgICAgICAgICAgIF9nZXQoT2JqZWN0LmdldFByb3RvdHlwZU9mKEZpbGVTZWxlY3QucHJvdG90eXBlKSwgXCJjb25zdHJ1Y3RvclwiLCB0aGlzKS5jYWxsKHRoaXMsIGV4dGVuZGVkT3B0aW9ucyk7XG5cblx0ICAgICAgICAgICAgaWYgKCF0aGlzLnVwbG9hZGVyLmlzSFRNTDUpIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5yZW1vdmVBdHRyKFwibXVsdGlwbGVcIik7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgdGhpcy5lbGVtZW50LnByb3AoXCJ2YWx1ZVwiLCBudWxsKTsgLy8gRkYgZml4XG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgX2luaGVyaXRzKEZpbGVTZWxlY3QsIF9GaWxlRGlyZWN0aXZlKTtcblxuXHQgICAgICAgIF9jcmVhdGVDbGFzcyhGaWxlU2VsZWN0LCB7XG5cdCAgICAgICAgICAgIGdldE9wdGlvbnM6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmV0dXJucyBvcHRpb25zXG5cdCAgICAgICAgICAgICAgICAgKiBAcmV0dXJuIHtPYmplY3R8dW5kZWZpbmVkfVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRPcHRpb25zKCkge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgZ2V0RmlsdGVyczoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBSZXR1cm5zIGZpbHRlcnNcblx0ICAgICAgICAgICAgICAgICAqIEByZXR1cm4ge0FycmF5PEZ1bmN0aW9uPnxTdHJpbmd8dW5kZWZpbmVkfVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRGaWx0ZXJzKCkge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgaXNFbXB0eUFmdGVyU2VsZWN0aW9uOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIElmIHJldHVybnMgXCJ0cnVlXCIgdGhlbiBIVE1MSW5wdXRFbGVtZW50IHdpbGwgYmUgY2xlYXJlZFxuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMge0Jvb2xlYW59XG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGlzRW1wdHlBZnRlclNlbGVjdGlvbigpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gISF0aGlzLmVsZW1lbnQuYXR0cihcIm11bHRpcGxlXCIpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBvbkNoYW5nZToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBFdmVudCBoYW5kbGVyXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ2hhbmdlKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBmaWxlcyA9IHRoaXMudXBsb2FkZXIuaXNIVE1MNSA/IHRoaXMuZWxlbWVudFswXS5maWxlcyA6IHRoaXMuZWxlbWVudFswXTtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHRoaXMuZ2V0T3B0aW9ucygpO1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBmaWx0ZXJzID0gdGhpcy5nZXRGaWx0ZXJzKCk7XG5cblx0ICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMudXBsb2FkZXIuaXNIVE1MNSkgdGhpcy5kZXN0cm95KCk7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy51cGxvYWRlci5hZGRUb1F1ZXVlKGZpbGVzLCBvcHRpb25zLCBmaWx0ZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0VtcHR5QWZ0ZXJTZWxlY3Rpb24oKSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucHJvcChcInZhbHVlXCIsIG51bGwpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucmVwbGFjZVdpdGgodGhpcy5lbGVtZW50ID0gdGhpcy5lbGVtZW50LmNsb25lKHRydWUpKTsgLy8gSUUgZml4XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cblx0ICAgICAgICByZXR1cm4gRmlsZVNlbGVjdDtcblx0ICAgIH0pKEZpbGVEaXJlY3RpdmUpO1xuXG5cdCAgICByZXR1cm4gRmlsZVNlbGVjdDtcblx0fTtcblxuXHRtb2R1bGUuZXhwb3J0cy4kaW5qZWN0ID0gW1wiRmlsZURpcmVjdGl2ZVwiXTtcblxuLyoqKi8gfSxcbi8qIDggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdHZhciBfaW50ZXJvcFJlcXVpcmUgPSBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmpbXCJkZWZhdWx0XCJdIDogb2JqOyB9O1xuXG5cdHZhciBfY3JlYXRlQ2xhc3MgPSAoZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIga2V5IGluIHByb3BzKSB7IHZhciBwcm9wID0gcHJvcHNba2V5XTsgcHJvcC5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAocHJvcC52YWx1ZSkgcHJvcC53cml0YWJsZSA9IHRydWU7IH0gT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcyk7IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTtcblxuXHR2YXIgX2dldCA9IGZ1bmN0aW9uIGdldChvYmplY3QsIHByb3BlcnR5LCByZWNlaXZlcikgeyB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBwcm9wZXJ0eSk7IGlmIChkZXNjID09PSB1bmRlZmluZWQpIHsgdmFyIHBhcmVudCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmplY3QpOyBpZiAocGFyZW50ID09PSBudWxsKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gZWxzZSB7IHJldHVybiBnZXQocGFyZW50LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpOyB9IH0gZWxzZSBpZiAoXCJ2YWx1ZVwiIGluIGRlc2MgJiYgZGVzYy53cml0YWJsZSkgeyByZXR1cm4gZGVzYy52YWx1ZTsgfSBlbHNlIHsgdmFyIGdldHRlciA9IGRlc2MuZ2V0OyBpZiAoZ2V0dGVyID09PSB1bmRlZmluZWQpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSByZXR1cm4gZ2V0dGVyLmNhbGwocmVjZWl2ZXIpOyB9IH07XG5cblx0dmFyIF9pbmhlcml0cyA9IGZ1bmN0aW9uIChzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9O1xuXG5cdHZhciBfY2xhc3NDYWxsQ2hlY2sgPSBmdW5jdGlvbiAoaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfTtcblxuXHR2YXIgQ09ORklHID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oMSkpO1xuXG5cdHZhciBleHRlbmQgPSBhbmd1bGFyLmV4dGVuZDtcblx0dmFyIGZvckVhY2ggPSBhbmd1bGFyLmZvckVhY2g7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoRmlsZURpcmVjdGl2ZSkge1xuXHQgICAgdmFyIEZpbGVEcm9wID0gKGZ1bmN0aW9uIChfRmlsZURpcmVjdGl2ZSkge1xuXHQgICAgICAgIC8qKlxuXHQgICAgICAgICAqIENyZWF0ZXMgaW5zdGFuY2Ugb2Yge0ZpbGVEcm9wfSBvYmplY3Rcblx0ICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuXHQgICAgICAgICAqL1xuXG5cdCAgICAgICAgZnVuY3Rpb24gRmlsZURyb3Aob3B0aW9ucykge1xuXHQgICAgICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRmlsZURyb3ApO1xuXG5cdCAgICAgICAgICAgIHZhciBleHRlbmRlZE9wdGlvbnMgPSBleHRlbmQob3B0aW9ucywge1xuXHQgICAgICAgICAgICAgICAgLy8gTWFwIG9mIGV2ZW50c1xuXHQgICAgICAgICAgICAgICAgZXZlbnRzOiB7XG5cdCAgICAgICAgICAgICAgICAgICAgJGRlc3Ryb3k6IFwiZGVzdHJveVwiLFxuXHQgICAgICAgICAgICAgICAgICAgIGRyb3A6IFwib25Ecm9wXCIsXG5cdCAgICAgICAgICAgICAgICAgICAgZHJhZ292ZXI6IFwib25EcmFnT3ZlclwiLFxuXHQgICAgICAgICAgICAgICAgICAgIGRyYWdsZWF2ZTogXCJvbkRyYWdMZWF2ZVwiXG5cdCAgICAgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICAgICAgLy8gTmFtZSBvZiBwcm9wZXJ0eSBpbnNpZGUgdXBsb2FkZXIuX2RpcmVjdGl2ZSBvYmplY3Rcblx0ICAgICAgICAgICAgICAgIHByb3A6IFwiZHJvcFwiXG5cdCAgICAgICAgICAgIH0pO1xuXG5cdCAgICAgICAgICAgIF9nZXQoT2JqZWN0LmdldFByb3RvdHlwZU9mKEZpbGVEcm9wLnByb3RvdHlwZSksIFwiY29uc3RydWN0b3JcIiwgdGhpcykuY2FsbCh0aGlzLCBleHRlbmRlZE9wdGlvbnMpO1xuXHQgICAgICAgIH1cblxuXHQgICAgICAgIF9pbmhlcml0cyhGaWxlRHJvcCwgX0ZpbGVEaXJlY3RpdmUpO1xuXG5cdCAgICAgICAgX2NyZWF0ZUNsYXNzKEZpbGVEcm9wLCB7XG5cdCAgICAgICAgICAgIGdldE9wdGlvbnM6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmV0dXJucyBvcHRpb25zXG5cdCAgICAgICAgICAgICAgICAgKiBAcmV0dXJuIHtPYmplY3R8dW5kZWZpbmVkfVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRPcHRpb25zKCkge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgZ2V0RmlsdGVyczoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBSZXR1cm5zIGZpbHRlcnNcblx0ICAgICAgICAgICAgICAgICAqIEByZXR1cm4ge0FycmF5PEZ1bmN0aW9uPnxTdHJpbmd8dW5kZWZpbmVkfVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRGaWx0ZXJzKCkge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgb25Ecm9wOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIEV2ZW50IGhhbmRsZXJcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25Ecm9wKGV2ZW50KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIHRyYW5zZmVyID0gdGhpcy5fZ2V0VHJhbnNmZXIoZXZlbnQpO1xuXHQgICAgICAgICAgICAgICAgICAgIGlmICghdHJhbnNmZXIpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgICAgICAgICAgIH12YXIgb3B0aW9ucyA9IHRoaXMuZ2V0T3B0aW9ucygpO1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBmaWx0ZXJzID0gdGhpcy5nZXRGaWx0ZXJzKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5fcHJldmVudEFuZFN0b3AoZXZlbnQpO1xuXHQgICAgICAgICAgICAgICAgICAgIGZvckVhY2godGhpcy51cGxvYWRlci5fZGlyZWN0aXZlcy5vdmVyLCB0aGlzLl9yZW1vdmVPdmVyQ2xhc3MsIHRoaXMpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMudXBsb2FkZXIuYWRkVG9RdWV1ZSh0cmFuc2Zlci5maWxlcywgb3B0aW9ucywgZmlsdGVycyk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIG9uRHJhZ092ZXI6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogRXZlbnQgaGFuZGxlclxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvbkRyYWdPdmVyKGV2ZW50KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIHRyYW5zZmVyID0gdGhpcy5fZ2V0VHJhbnNmZXIoZXZlbnQpO1xuXHQgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5faGF2ZUZpbGVzKHRyYW5zZmVyLnR5cGVzKSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICAgICAgICAgICAgfXRyYW5zZmVyLmRyb3BFZmZlY3QgPSBcImNvcHlcIjtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLl9wcmV2ZW50QW5kU3RvcChldmVudCk7XG5cdCAgICAgICAgICAgICAgICAgICAgZm9yRWFjaCh0aGlzLnVwbG9hZGVyLl9kaXJlY3RpdmVzLm92ZXIsIHRoaXMuX2FkZE92ZXJDbGFzcywgdGhpcyk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIG9uRHJhZ0xlYXZlOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIEV2ZW50IGhhbmRsZXJcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25EcmFnTGVhdmUoZXZlbnQpIHtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldCA9PT0gdGhpcy5lbGVtZW50WzBdKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgICAgICAgICAgICB9dGhpcy5fcHJldmVudEFuZFN0b3AoZXZlbnQpO1xuXHQgICAgICAgICAgICAgICAgICAgIGZvckVhY2godGhpcy51cGxvYWRlci5fZGlyZWN0aXZlcy5vdmVyLCB0aGlzLl9yZW1vdmVPdmVyQ2xhc3MsIHRoaXMpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfZ2V0VHJhbnNmZXI6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogSGVscGVyXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRUcmFuc2ZlcihldmVudCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBldmVudC5kYXRhVHJhbnNmZXIgPyBldmVudC5kYXRhVHJhbnNmZXIgOiBldmVudC5vcmlnaW5hbEV2ZW50LmRhdGFUcmFuc2ZlcjsgLy8galF1ZXJ5IGZpeDtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX3ByZXZlbnRBbmRTdG9wOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIEhlbHBlclxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcHJldmVudEFuZFN0b3AoZXZlbnQpIHtcblx0ICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHQgICAgICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfaGF2ZUZpbGVzOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJldHVybnMgXCJ0cnVlXCIgaWYgdHlwZXMgY29udGFpbnMgZmlsZXNcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSB0eXBlc1xuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGF2ZUZpbGVzKHR5cGVzKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKCF0eXBlcykge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgfWlmICh0eXBlcy5pbmRleE9mKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0eXBlcy5pbmRleE9mKFwiRmlsZXNcIikgIT09IC0xO1xuXHQgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZXMuY29udGFpbnMpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVzLmNvbnRhaW5zKFwiRmlsZXNcIik7XG5cdCAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX2FkZE92ZXJDbGFzczoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfYWRkT3ZlckNsYXNzKGl0ZW0pIHtcblx0ICAgICAgICAgICAgICAgICAgICBpdGVtLmFkZE92ZXJDbGFzcygpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfcmVtb3ZlT3ZlckNsYXNzOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW1vdmVPdmVyQ2xhc3MoaXRlbSkge1xuXHQgICAgICAgICAgICAgICAgICAgIGl0ZW0ucmVtb3ZlT3ZlckNsYXNzKCk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9KTtcblxuXHQgICAgICAgIHJldHVybiBGaWxlRHJvcDtcblx0ICAgIH0pKEZpbGVEaXJlY3RpdmUpO1xuXG5cdCAgICByZXR1cm4gRmlsZURyb3A7XG5cdH07XG5cblx0bW9kdWxlLmV4cG9ydHMuJGluamVjdCA9IFtcIkZpbGVEaXJlY3RpdmVcIl07XG5cbi8qKiovIH0sXG4vKiA5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblxuXHR2YXIgX2ludGVyb3BSZXF1aXJlID0gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqW1wiZGVmYXVsdFwiXSA6IG9iajsgfTtcblxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGtleSBpbiBwcm9wcykgeyB2YXIgcHJvcCA9IHByb3BzW2tleV07IHByb3AuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKHByb3AudmFsdWUpIHByb3Aud3JpdGFibGUgPSB0cnVlOyB9IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpOyB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0pKCk7XG5cblx0dmFyIF9nZXQgPSBmdW5jdGlvbiBnZXQob2JqZWN0LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpIHsgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgcHJvcGVydHkpOyBpZiAoZGVzYyA9PT0gdW5kZWZpbmVkKSB7IHZhciBwYXJlbnQgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqZWN0KTsgaWYgKHBhcmVudCA9PT0gbnVsbCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9IGVsc2UgeyByZXR1cm4gZ2V0KHBhcmVudCwgcHJvcGVydHksIHJlY2VpdmVyKTsgfSB9IGVsc2UgaWYgKFwidmFsdWVcIiBpbiBkZXNjICYmIGRlc2Mud3JpdGFibGUpIHsgcmV0dXJuIGRlc2MudmFsdWU7IH0gZWxzZSB7IHZhciBnZXR0ZXIgPSBkZXNjLmdldDsgaWYgKGdldHRlciA9PT0gdW5kZWZpbmVkKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gcmV0dXJuIGdldHRlci5jYWxsKHJlY2VpdmVyKTsgfSB9O1xuXG5cdHZhciBfaW5oZXJpdHMgPSBmdW5jdGlvbiAoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfTtcblxuXHR2YXIgX2NsYXNzQ2FsbENoZWNrID0gZnVuY3Rpb24gKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH07XG5cblx0dmFyIENPTkZJRyA9IF9pbnRlcm9wUmVxdWlyZShfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKTtcblxuXHR2YXIgZXh0ZW5kID0gYW5ndWxhci5leHRlbmQ7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoRmlsZURpcmVjdGl2ZSkge1xuXHQgICAgdmFyIEZpbGVPdmVyID0gKGZ1bmN0aW9uIChfRmlsZURpcmVjdGl2ZSkge1xuXHQgICAgICAgIC8qKlxuXHQgICAgICAgICAqIENyZWF0ZXMgaW5zdGFuY2Ugb2Yge0ZpbGVEcm9wfSBvYmplY3Rcblx0ICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuXHQgICAgICAgICAqL1xuXG5cdCAgICAgICAgZnVuY3Rpb24gRmlsZU92ZXIob3B0aW9ucykge1xuXHQgICAgICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRmlsZU92ZXIpO1xuXG5cdCAgICAgICAgICAgIHZhciBleHRlbmRlZE9wdGlvbnMgPSBleHRlbmQob3B0aW9ucywge1xuXHQgICAgICAgICAgICAgICAgLy8gTWFwIG9mIGV2ZW50c1xuXHQgICAgICAgICAgICAgICAgZXZlbnRzOiB7XG5cdCAgICAgICAgICAgICAgICAgICAgJGRlc3Ryb3k6IFwiZGVzdHJveVwiXG5cdCAgICAgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICAgICAgLy8gTmFtZSBvZiBwcm9wZXJ0eSBpbnNpZGUgdXBsb2FkZXIuX2RpcmVjdGl2ZSBvYmplY3Rcblx0ICAgICAgICAgICAgICAgIHByb3A6IFwib3ZlclwiLFxuXHQgICAgICAgICAgICAgICAgLy8gT3ZlciBjbGFzc1xuXHQgICAgICAgICAgICAgICAgb3ZlckNsYXNzOiBcIm52LWZpbGUtb3ZlclwiXG5cdCAgICAgICAgICAgIH0pO1xuXG5cdCAgICAgICAgICAgIF9nZXQoT2JqZWN0LmdldFByb3RvdHlwZU9mKEZpbGVPdmVyLnByb3RvdHlwZSksIFwiY29uc3RydWN0b3JcIiwgdGhpcykuY2FsbCh0aGlzLCBleHRlbmRlZE9wdGlvbnMpO1xuXHQgICAgICAgIH1cblxuXHQgICAgICAgIF9pbmhlcml0cyhGaWxlT3ZlciwgX0ZpbGVEaXJlY3RpdmUpO1xuXG5cdCAgICAgICAgX2NyZWF0ZUNsYXNzKEZpbGVPdmVyLCB7XG5cdCAgICAgICAgICAgIGFkZE92ZXJDbGFzczoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBBZGRzIG92ZXIgY2xhc3Ncblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYWRkT3ZlckNsYXNzKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hZGRDbGFzcyh0aGlzLmdldE92ZXJDbGFzcygpKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgcmVtb3ZlT3ZlckNsYXNzOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJlbW92ZXMgb3ZlciBjbGFzc1xuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVPdmVyQ2xhc3MoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKHRoaXMuZ2V0T3ZlckNsYXNzKCkpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBnZXRPdmVyQ2xhc3M6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmV0dXJucyBvdmVyIGNsYXNzXG5cdCAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7U3RyaW5nfVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRPdmVyQ2xhc3MoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMub3ZlckNsYXNzO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cblx0ICAgICAgICByZXR1cm4gRmlsZU92ZXI7XG5cdCAgICB9KShGaWxlRGlyZWN0aXZlKTtcblxuXHQgICAgcmV0dXJuIEZpbGVPdmVyO1xuXHR9O1xuXG5cdG1vZHVsZS5leHBvcnRzLiRpbmplY3QgPSBbXCJGaWxlRGlyZWN0aXZlXCJdO1xuXG4vKioqLyB9LFxuLyogMTAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdHZhciBfaW50ZXJvcFJlcXVpcmUgPSBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmpbXCJkZWZhdWx0XCJdIDogb2JqOyB9O1xuXG5cdHZhciBDT05GSUcgPSBfaW50ZXJvcFJlcXVpcmUoX193ZWJwYWNrX3JlcXVpcmVfXygxKSk7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoJHBhcnNlLCBGaWxlVXBsb2FkZXIsIEZpbGVTZWxlY3QpIHtcblxuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHJpYnV0ZXMpIHtcblx0ICAgICAgICAgICAgdmFyIHVwbG9hZGVyID0gc2NvcGUuJGV2YWwoYXR0cmlidXRlcy51cGxvYWRlcik7XG5cblx0ICAgICAgICAgICAgaWYgKCEodXBsb2FkZXIgaW5zdGFuY2VvZiBGaWxlVXBsb2FkZXIpKSB7XG5cdCAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiXFxcIlVwbG9hZGVyXFxcIiBtdXN0IGJlIGFuIGluc3RhbmNlIG9mIEZpbGVVcGxvYWRlclwiKTtcblx0ICAgICAgICAgICAgfVxuXG5cdCAgICAgICAgICAgIHZhciBvYmplY3QgPSBuZXcgRmlsZVNlbGVjdCh7XG5cdCAgICAgICAgICAgICAgICB1cGxvYWRlcjogdXBsb2FkZXIsXG5cdCAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50XG5cdCAgICAgICAgICAgIH0pO1xuXG5cdCAgICAgICAgICAgIG9iamVjdC5nZXRPcHRpb25zID0gJHBhcnNlKGF0dHJpYnV0ZXMub3B0aW9ucykuYmluZChvYmplY3QsIHNjb3BlKTtcblx0ICAgICAgICAgICAgb2JqZWN0LmdldEZpbHRlcnMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gYXR0cmlidXRlcy5maWx0ZXJzO1xuXHQgICAgICAgICAgICB9O1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdH07XG5cblx0bW9kdWxlLmV4cG9ydHMuJGluamVjdCA9IFtcIiRwYXJzZVwiLCBcIkZpbGVVcGxvYWRlclwiLCBcIkZpbGVTZWxlY3RcIl07XG5cbi8qKiovIH0sXG4vKiAxMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0dmFyIF9pbnRlcm9wUmVxdWlyZSA9IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9ialtcImRlZmF1bHRcIl0gOiBvYmo7IH07XG5cblx0dmFyIENPTkZJRyA9IF9pbnRlcm9wUmVxdWlyZShfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKTtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgkcGFyc2UsIEZpbGVVcGxvYWRlciwgRmlsZURyb3ApIHtcblxuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHJpYnV0ZXMpIHtcblx0ICAgICAgICAgICAgdmFyIHVwbG9hZGVyID0gc2NvcGUuJGV2YWwoYXR0cmlidXRlcy51cGxvYWRlcik7XG5cblx0ICAgICAgICAgICAgaWYgKCEodXBsb2FkZXIgaW5zdGFuY2VvZiBGaWxlVXBsb2FkZXIpKSB7XG5cdCAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiXFxcIlVwbG9hZGVyXFxcIiBtdXN0IGJlIGFuIGluc3RhbmNlIG9mIEZpbGVVcGxvYWRlclwiKTtcblx0ICAgICAgICAgICAgfVxuXG5cdCAgICAgICAgICAgIGlmICghdXBsb2FkZXIuaXNIVE1MNSkgcmV0dXJuO1xuXG5cdCAgICAgICAgICAgIHZhciBvYmplY3QgPSBuZXcgRmlsZURyb3Aoe1xuXHQgICAgICAgICAgICAgICAgdXBsb2FkZXI6IHVwbG9hZGVyLFxuXHQgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudFxuXHQgICAgICAgICAgICB9KTtcblxuXHQgICAgICAgICAgICBvYmplY3QuZ2V0T3B0aW9ucyA9ICRwYXJzZShhdHRyaWJ1dGVzLm9wdGlvbnMpLmJpbmQob2JqZWN0LCBzY29wZSk7XG5cdCAgICAgICAgICAgIG9iamVjdC5nZXRGaWx0ZXJzID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIGF0dHJpYnV0ZXMuZmlsdGVycztcblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHR9O1xuXG5cdG1vZHVsZS5leHBvcnRzLiRpbmplY3QgPSBbXCIkcGFyc2VcIiwgXCJGaWxlVXBsb2FkZXJcIiwgXCJGaWxlRHJvcFwiXTtcblxuLyoqKi8gfSxcbi8qIDEyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblxuXHR2YXIgX2ludGVyb3BSZXF1aXJlID0gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqW1wiZGVmYXVsdFwiXSA6IG9iajsgfTtcblxuXHR2YXIgQ09ORklHID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oMSkpO1xuXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKEZpbGVVcGxvYWRlciwgRmlsZU92ZXIpIHtcblxuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHJpYnV0ZXMpIHtcblx0ICAgICAgICAgICAgdmFyIHVwbG9hZGVyID0gc2NvcGUuJGV2YWwoYXR0cmlidXRlcy51cGxvYWRlcik7XG5cblx0ICAgICAgICAgICAgaWYgKCEodXBsb2FkZXIgaW5zdGFuY2VvZiBGaWxlVXBsb2FkZXIpKSB7XG5cdCAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiXFxcIlVwbG9hZGVyXFxcIiBtdXN0IGJlIGFuIGluc3RhbmNlIG9mIEZpbGVVcGxvYWRlclwiKTtcblx0ICAgICAgICAgICAgfVxuXG5cdCAgICAgICAgICAgIHZhciBvYmplY3QgPSBuZXcgRmlsZU92ZXIoe1xuXHQgICAgICAgICAgICAgICAgdXBsb2FkZXI6IHVwbG9hZGVyLFxuXHQgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudFxuXHQgICAgICAgICAgICB9KTtcblxuXHQgICAgICAgICAgICBvYmplY3QuZ2V0T3ZlckNsYXNzID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIGF0dHJpYnV0ZXMub3ZlckNsYXNzIHx8IG9iamVjdC5vdmVyQ2xhc3M7XG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0fTtcblxuXHRtb2R1bGUuZXhwb3J0cy4kaW5qZWN0ID0gW1wiRmlsZVVwbG9hZGVyXCIsIFwiRmlsZU92ZXJcIl07XG5cbi8qKiovIH1cbi8qKioqKiovIF0pXG59KTtcbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFuZ3VsYXItZmlsZS11cGxvYWQuanMubWFwXG4iLCIvLyAtLUF1dGhvciBNdXJhZ2lqaW1hbmEgUmljaGFyZCA8YmVhc3RhcjQ1N0BnbWFpbC5jb20+XG4vLyB2YXIgc3luYyA9IGFuZ3VsYXIubW9kdWxlKFwic3luY1wiLCBbXCJuZ1JvdXRlXCIsXCJhbmd1bGFyRmlsZVVwbG9hZFwiLFwiaW9uaWNcIixcIm5nUmVzb3VyY2VcIixcInVpLmJvb3RzdHJhcFwiLFwiaW5maW5pdGUtc2Nyb2xsXCJdKTtcbi8vIG1vZHVsZS5leHBvcnRzID0gbW9uZ29vc2UubW9kZWwoJ2FwcENvbmZpZycsIHtcblxuYW5ndWxhci5tb2R1bGUoJ0F1dGhNYW5hZ2VyJyxbXSkuc2VydmljZSgnU2Vzc2lvblNlcnZpY2UnLCBbZnVuY3Rpb24oKXtcbiAgICB2YXIgdXNlcklzQXV0aGVudGljYXRlZCA9IGZhbHNlO1xuXG4gICAgdGhpcy5zZXRVc2VyQXV0aGVudGljYXRlZCA9IGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAgICAgdXNlcklzQXV0aGVudGljYXRlZCA9IHZhbHVlO1xuICAgIH07XG5cbiAgICB0aGlzLmdldFVzZXJBdXRoZW50aWNhdGVkID0gZnVuY3Rpb24oKXtcbiAgICAgICAgcmV0dXJuIHVzZXJJc0F1dGhlbnRpY2F0ZWQ7XG4gICAgfTtcbn1dKTtcblxudmFyIHN5bmMgPSBhbmd1bGFyLm1vZHVsZShcInN5bmNcIiwgW1wibmdSb3V0ZVwiLFwiYW5ndWxhckZpbGVVcGxvYWRcIixcInVpLmJvb3RzdHJhcFwiLFwidWkucm91dGVyXCIsXCJpbmZpbml0ZS1zY3JvbGxcIiwnbmdNYXRlcmlhbCcsICduZ01lc3NhZ2VzJywgJ21hdGVyaWFsLnN2Z0Fzc2V0c0NhY2hlJywnbmctbWZiJywncGRmJywnbmdDb250ZXh0TWVudScsJ2FuZ3VsYXItbG9hZGluZy1iYXInLCduZ0ZpbGVTYXZlcicsJ0F1dGhNYW5hZ2VyJywnbmdEaWFsb2cnXSk7XG5cblxudmFyIExvZ2dlcj1hbmd1bGFyLm1vZHVsZShcIkxvZ2dlclwiLFtdKTtcbkxvZ2dlci5ydW4oWyckcm9vdFNjb3BlJyxmdW5jdGlvbigkcm9vdFNjb3BlKXtcblxuICAgICAgLy8gJHJvb3RTY29wZS5lbmRQb2ludD0naHR0cHM6Ly9zdHJlYW11cGJveC5jb20nO1xuICAgICAgJHJvb3RTY29wZS5lbmRQb2ludD0naHR0cDovL3N5bmNtZS5jb206ODAwMCc7XG59XSk7XG53aW5kb3cucm91dGVzID1cbntcbiAgICBcIi9GaWxlc1wiOiB7XG4gICAgICAgIHVybDogXCIvRmlsZXNcIixcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9maWxlcy5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogJ0ZpbGVzQ29udHJvbGxlcicsXG4gICAgICAgIHJlcXVpcmVMb2dpbjogdHJ1ZVxuICAgICAgfSxcbiAgICAgIFwicHJldmlld1wiOntcbiAgICAgICAgdXJsOiAnLyEvOnByZXZpZXcvOmV4dGVuc2lvbi86b2YvOnVzZXInLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2ZpbGVQcmV2aWV3Lmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyIDogJ3ByZXZpZXdDb250cm9sbGVyJ1xuICAgICAgfSxcblxuICAgICAgXCIvR3JvdXBzXCI6IHtcbiAgICAgICAgICB1cmw6IFwiL0dyb3Vwc1wiLFxuICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvZ3JvdXBzLmh0bWwnLFxuICAgICAgICAgIGNvbnRyb2xsZXI6ICdHcm91cENvbnRyb2xsZXInLFxuICAgICAgICAgIHJlcXVpcmVMb2dpbjogdHJ1ZVxuICAgICAgfVxufTtcblxuXG5zeW5jLnJ1bihbJyRyb290U2NvcGUnLCckbG9nJyxmdW5jdGlvbigkcm9vdFNjb3BlLCRsb2cpe1xuICAkcm9vdFNjb3BlLmVuZFBvaW50PSdodHRwOi8vc3luY21lLmNvbTo4MDAwJztcbiAgIC8vICRyb290U2NvcGUuZW5kUG9pbnQ9J2h0dHBzOi8vc3RyZWFtdXBib3guY29tJztcblxuXG4gICRyb290U2NvcGUuJG9uKCckcm91dGVDaGFuZ2VTdGFydCcsZnVuY3Rpb24oZXZlbnQsIG5leHQsIGN1cnJlbnQpe1xuICAgIGZvcih2YXIgaSBpbiB3aW5kb3cucm91dGVzKSB7XG5cbiAgICAgICAgaWYobmV4dC5pbmRleE9mKGkpICE9IC0xKSB7XG4gICAgICAgICAgICBpZih3aW5kb3cucm91dGVzW2ldLnJlcXVpcmVMb2dpbiAmJiAhU2Vzc2lvblNlcnZpY2UuZ2V0VXNlckF1dGhlbnRpY2F0ZWQoKSkge1xuICAgICAgICAgICAgICAgIGFsZXJ0KFwiWW91IG5lZWQgdG8gYmUgYXV0aGVudGljYXRlZCB0byBzZWUgdGhpcyBwYWdlIVwiKTtcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICB9XG4gIH0pO1xufV0pO1xuc3luYy5wcm92aWRlcih7XG5cbiAgICAkZXhjZXB0aW9uSGFuZGxlcjogZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbihleGNlcHRpb24sIGNhdXNlKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coZXhjZXB0aW9uKTtcblxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuJGdldCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZXI7XG4gICAgICAgIH07XG4gICAgfVxufSk7XG5zeW5jLmNvbmZpZyhbJyRzY2VQcm92aWRlcicsJyRodHRwUHJvdmlkZXInLCckbWRUaGVtaW5nUHJvdmlkZXInLCdjZnBMb2FkaW5nQmFyUHJvdmlkZXInLGZ1bmN0aW9uKCRzY2VQcm92aWRlciwkaHR0cFByb3ZpZGVyLCRtZFRoZW1pbmdQcm92aWRlcixjZnBMb2FkaW5nQmFyUHJvdmlkZXIpIHtcbiAgICBkZWxldGUgJGh0dHBQcm92aWRlci5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnWC1SZXF1ZXN0ZWQtV2l0aCddO1xuICAgICRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVycy5wb3N0WydBY2NlcHQnXSA9ICdhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L2phdmFzY3JpcHQnO1xuICAgICRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVycy5wb3N0WydBY2NlcHQnXSA9ICdhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L2phdmFzY3JpcHQnO1xuICAgIC8vc2V0IGF1dGhvcml6YXRpb24gZm9yIG9hdXRoMi4wIGZvciBwcm90ZWN0aW9uXG5cblxuICAgICRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ2F1dGhvcml6YXRpb24nXSA9ICdCZWFyZXIgQmM3RFdTN0tLUkx0eG1kZFVaSTFUMWxadTJKMVloUjhPTFhHV05abic7XG5cbiAgICAvLyAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLnVzZVhEb21haW4gPSB0cnVlO1xuICAgICRzY2VQcm92aWRlci5lbmFibGVkKGZhbHNlKTtcblxuICAgIGNmcExvYWRpbmdCYXJQcm92aWRlci5pbmNsdWRlQmFyID0gZmFsc2U7XG59XSk7XG5zeW5jLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywnJHVybFJvdXRlclByb3ZpZGVyJyxmdW5jdGlvbigkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyLCRzY29wZSl7XG4gICAgICAgIC8vICRwYXJzZVByb3ZpZGVyLnVud3JhcFByb21pc2VzKHRydWUpIDtcbiAgICAgICAgICBmb3IodmFyIHBhdGggaW4gd2luZG93LnJvdXRlcykge1xuXG4gICAgICAgICAgICAgIC8vIGlmKG5leHQuaW5kZXhPZihwYXRoKSAhPSAtMSkge1xuICAgICAgICAgICAgICAvLyAgICAgaWYod2luZG93LnJvdXRlc1twYXRoXS5yZXF1aXJlTG9naW4gJiYgIVNlc3Npb25TZXJ2aWNlLmdldFVzZXJBdXRoZW50aWNhdGVkKCkpIHtcbiAgICAgICAgICAgICAgLy8gICAgICAgICBhbGVydChcIllvdSBuZWVkIHRvIGJlIGF1dGhlbnRpY2F0ZWQgdG8gc2VlIHRoaXMgcGFnZSFcIik7XG4gICAgICAgICAgICAgIC8vICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgLy8gICAgIH1cbiAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAkc3RhdGVQcm92aWRlci5zdGF0ZShwYXRoLCB3aW5kb3cucm91dGVzW3BhdGhdKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvRmlsZXMnKTtcblxufV0pO1xuXG4vLyB9KTtcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1kb25lIHdpdGggTXVyYWdpamltYW5hIFJpY2hhcmQgPGJlYXN0YXI0NTdAZ21haWwuY29tPi0tLS0tLS0tLS0tLS0tLS8vXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tZGVhbCB3aXRoIHVzZXIncyBhY3Rpb25zIGFuZCBpbnRlcmFjdGlvbiB3aXRoIG90aGVyIHVzZXJzLS0tLS0tLS0tLS0tLS0tLy9cbiIsIjsoZnVuY3Rpb24od2luZG93LCBhbmd1bGFyLCB1bmRlZmluZWQpIHtcblxuICAndXNlIHN0cmljdCc7XG5cbiAgdmFyIG1mYiA9IGFuZ3VsYXIubW9kdWxlKCduZy1tZmInLCBbXSk7XG5cbiAgbWZiLnJ1bihbJyR0ZW1wbGF0ZUNhY2hlJywgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgICAkdGVtcGxhdGVDYWNoZS5wdXQoJ25nLW1mYi1tZW51LWRlZmF1bHQudHBsLmh0bWwnLFxuICAgICAgJzx1bCBjbGFzcz1cIm1mYi1jb21wb25lbnQtLXt7cG9zaXRpb259fSBtZmIte3tlZmZlY3R9fVwiJyArXG4gICAgICAnICAgIGRhdGEtbWZiLXRvZ2dsZT1cInt7dG9nZ2xpbmdNZXRob2R9fVwiIGRhdGEtbWZiLXN0YXRlPVwie3ttZW51U3RhdGV9fVwiPicgK1xuICAgICAgJyAgPGxpIGNsYXNzPVwibWZiLWNvbXBvbmVudF9fd3JhcFwiPicgK1xuICAgICAgJyAgICA8YSBuZy1jbGljaz1cImNsaWNrZWQoKVwiIG5nLW1vdXNlZW50ZXI9XCJob3ZlcmVkKClcIiBuZy1tb3VzZWxlYXZlPVwiaG92ZXJlZCgpXCInICtcbiAgICAgICcgICAgICAgbmctYXR0ci1kYXRhLW1mYi1sYWJlbD1cInt7bGFiZWx9fVwiIGNsYXNzPVwibWZiLWNvbXBvbmVudF9fYnV0dG9uLS1tYWluXCI+JyArXG4gICAgICAnICAgICA8aSBjbGFzcz1cIm1mYi1jb21wb25lbnRfX21haW4taWNvbi0tcmVzdGluZyB7e3Jlc3Rpbmd9fVwiPjwvaT4nICtcbiAgICAgICcgICAgIDxpIGNsYXNzPVwibWZiLWNvbXBvbmVudF9fbWFpbi1pY29uLS1hY3RpdmUge3thY3RpdmV9fVwiPjwvaT4nICtcbiAgICAgICcgICAgPC9hPicgK1xuICAgICAgJyAgICA8dWwgY2xhc3M9XCJtZmItY29tcG9uZW50X19saXN0XCIgbmctdHJhbnNjbHVkZT4nICtcbiAgICAgICcgICAgPC91bD4nICtcbiAgICAgICc8L2xpPicgK1xuICAgICAgJzwvdWw+J1xuICAgICk7XG5cbiAgICAkdGVtcGxhdGVDYWNoZS5wdXQoJ25nLW1mYi1tZW51LW1kLnRwbC5odG1sJyxcbiAgICAgICc8dWwgY2xhc3M9XCJtZmItY29tcG9uZW50LS17e3Bvc2l0aW9ufX0gbWZiLXt7ZWZmZWN0fX1cIicgK1xuICAgICAgJyAgICBkYXRhLW1mYi10b2dnbGU9XCJ7e3RvZ2dsaW5nTWV0aG9kfX1cIiBkYXRhLW1mYi1zdGF0ZT1cInt7bWVudVN0YXRlfX1cIj4nICtcbiAgICAgICcgIDxsaSBjbGFzcz1cIm1mYi1jb21wb25lbnRfX3dyYXBcIj4nICtcbiAgICAgICcgICAgPGEgbmctY2xpY2s9XCJjbGlja2VkKClcIiBuZy1tb3VzZWVudGVyPVwiaG92ZXJlZCgpXCIgbmctbW91c2VsZWF2ZT1cImhvdmVyZWQoKVwiJyArXG4gICAgICAnICAgICAgIHN0eWxlPVwiYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7IGJveC1zaGFkb3c6IG5vbmU7XCInICtcbiAgICAgICcgICAgICAgbmctYXR0ci1kYXRhLW1mYi1sYWJlbD1cInt7bGFiZWx9fVwiIGNsYXNzPVwibWZiLWNvbXBvbmVudF9fYnV0dG9uLS1tYWluXCI+JyArXG4gICAgICAnICAgICA8bWQtYnV0dG9uIGNsYXNzPVwibWQtZmFiIG1kLWFjY2VudFwiIGFyaWEtbGFiZWw9e3tsYWJlbH19IHN0eWxlPVwicG9zaXRpb246cmVsYXRpdmU7IG1hcmdpbjogMDsgcGFkZGluZzowO1wiPicgK1xuICAgICAgJyAgICAgICA8bWQtaWNvbiBzdHlsZT1cImxlZnQ6IDA7IHBvc2l0aW9uOiByZWxhdGl2ZTtcIiBtZC1zdmctaWNvbj1cInt7cmVzdGluZ319XCInICtcbiAgICAgICcgICAgICAgICBjbGFzcz1cIm1mYi1jb21wb25lbnRfX21haW4taWNvbi0tcmVzdGluZ1wiPjwvbWQtaWNvbj4nICtcbiAgICAgICcgICAgICAgPG1kLWljb24gc3R5bGU9XCJwb3NpdGlvbjpyZWxhdGl2ZTtcIiBtZC1zdmctaWNvbj1cInt7YWN0aXZlfX1cIicgK1xuICAgICAgJyAgICAgICAgIGNsYXNzPVwibWZiLWNvbXBvbmVudF9fbWFpbi1pY29uLS1hY3RpdmVcIj48L21kLWljb24+JyArXG4gICAgICAnICAgICA8L21kLWJ1dHRvbj4nICtcbiAgICAgICcgICAgPC9hPicgK1xuICAgICAgJyAgICA8dWwgY2xhc3M9XCJtZmItY29tcG9uZW50X19saXN0XCIgbmctdHJhbnNjbHVkZT4nICtcbiAgICAgICcgICAgPC91bD4nICtcbiAgICAgICc8L2xpPicgK1xuICAgICAgJzwvdWw+J1xuICAgICk7XG5cbiAgICAkdGVtcGxhdGVDYWNoZS5wdXQoJ25nLW1mYi1idXR0b24tZGVmYXVsdC50cGwuaHRtbCcsXG4gICAgICAnPGxpPicgK1xuICAgICAgJyAgPGEgZGF0YS1tZmItbGFiZWw9XCJ7e2xhYmVsfX1cIiBjbGFzcz1cIm1mYi1jb21wb25lbnRfX2J1dHRvbi0tY2hpbGRcIj4nICtcbiAgICAgICcgICAgPGkgY2xhc3M9XCJtZmItY29tcG9uZW50X19jaGlsZC1pY29uIHt7aWNvbn19XCI+JyArXG4gICAgICAnICAgIDwvaT4nICtcbiAgICAgICcgIDwvYT4nICtcbiAgICAgICc8L2xpPidcbiAgICApO1xuXG4gICAgJHRlbXBsYXRlQ2FjaGUucHV0KCduZy1tZmItYnV0dG9uLW1kLnRwbC5odG1sJyxcbiAgICAgICc8bGk+JyArXG4gICAgICAnICA8YSBocmVmPVwiXCIgZGF0YS1tZmItbGFiZWw9XCJ7e2xhYmVsfX1cIiBjbGFzcz1cIm1mYi1jb21wb25lbnRfX2J1dHRvbi0tY2hpbGRcIiAnICtcbiAgICAgICcgICAgIHN0eWxlPVwiYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7IGJveC1zaGFkb3c6IG5vbmU7XCI+JyArXG4gICAgICAnICAgICA8bWQtYnV0dG9uIHN0eWxlPVwibWFyZ2luOiAwO1wiIGNsYXNzPVwibWQtZmFiIG1kLWFjY2VudFwiIGFyaWEtbGFiZWw9e3tsYWJlbH19PicgK1xuICAgICAgJyAgICAgICA8bWQtaWNvbiBtZC1zdmctc3JjPVwiaW1nL2ljb25zL2FuZHJvaWQuc3ZnXCI+PC9tZC1pY29uPicgK1xuICAgICAgJyAgICAgICA8bWQtaWNvbiBtZC1zdmctaWNvbj1cInt7aWNvbn19XCI+PC9tZC1pY29uPicgK1xuICAgICAgJyAgICAgPC9tZC1idXR0b24+JyArXG4gICAgICAnICA8L2E+JyArXG4gICAgICAnPC9saT4nXG4gICAgKTtcbiAgfV0pO1xuXG4gIG1mYi5kaXJlY3RpdmUoJ21mYkJ1dHRvbkNsb3NlJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICByZXF1aXJlOiAnXm1mYk1lbnUnLFxuICAgICAgbGluazogZnVuY3Rpb24oJHNjb3BlLCAkZWxlbWVudCwgJGF0dHJzLCBtZmJNZW51Q29udHJvbGxlcikge1xuICAgICAgICAkZWxlbWVudC5iaW5kKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIG1mYk1lbnVDb250cm9sbGVyLmNsb3NlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICB9O1xuXG4gIH0pO1xuXG4gIG1mYi5kaXJlY3RpdmUoJ21mYk1lbnUnLCBbJyR0aW1lb3V0JywgZnVuY3Rpb24oJHRpbWVvdXQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgICB0cmFuc2NsdWRlOiB0cnVlLFxuICAgICAgcmVwbGFjZTogdHJ1ZSxcbiAgICAgIHNjb3BlOiB7XG4gICAgICAgIHBvc2l0aW9uOiAnQCcsXG4gICAgICAgIGVmZmVjdDogJ0AnLFxuICAgICAgICBsYWJlbDogJ0AnLFxuICAgICAgICByZXN0aW5nOiAnQHJlc3RpbmdJY29uJyxcbiAgICAgICAgYWN0aXZlOiAnQGFjdGl2ZUljb24nLFxuICAgICAgICBtYWluQWN0aW9uOiAnJicsXG4gICAgICAgIG1lbnVTdGF0ZTogJz0/JyxcbiAgICAgICAgdG9nZ2xpbmdNZXRob2Q6ICdAJ1xuICAgICAgfSxcbiAgICAgIHRlbXBsYXRlVXJsOiBmdW5jdGlvbihlbGVtLCBhdHRycykge1xuICAgICAgICByZXR1cm4gYXR0cnMudGVtcGxhdGVVcmwgfHwgJ25nLW1mYi1tZW51LWRlZmF1bHQudHBsLmh0bWwnO1xuICAgICAgfSxcbiAgICAgIGNvbnRyb2xsZXI6IFsnJHNjb3BlJywgJyRhdHRycycsIGZ1bmN0aW9uKCRzY29wZSwgJGF0dHJzKSB7XG4gICAgICAgIHZhciBvcGVuU3RhdGUgPSAnb3BlbicsXG4gICAgICAgICAgY2xvc2VkU3RhdGUgPSAnY2xvc2VkJztcblxuICAgICAgICAvLyBBdHRhY2hlZCB0b2dnbGUsIG9wZW4gYW5kIGNsb3NlIHRvIHRoZSBjb250cm9sbGVyIHRvIGdpdmUgb3RoZXJcbiAgICAgICAgLy8gZGlyZWN0aXZlIGFjY2Vzc1xuICAgICAgICB0aGlzLnRvZ2dsZSA9IHRvZ2dsZTtcbiAgICAgICAgdGhpcy5jbG9zZSA9IGNsb3NlO1xuICAgICAgICB0aGlzLm9wZW4gPSBvcGVuO1xuXG4gICAgICAgICRzY29wZS5jbGlja2VkID0gY2xpY2tlZDtcbiAgICAgICAgJHNjb3BlLmhvdmVyZWQgPSBob3ZlcmVkO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXQgdGhlIHN0YXRlIHRvIHVzZXItZGVmaW5lZCB2YWx1ZS4gRmFsbGJhY2sgdG8gY2xvc2VkIGlmIG5vXG4gICAgICAgICAqIHZhbHVlIGlzIHBhc3NlZCBmcm9tIHRoZSBvdXRzaWRlLlxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKCEkc2NvcGUubWVudVN0YXRlKSB7XG4gICAgICAgICAgJHNjb3BlLm1lbnVTdGF0ZSA9IGNsb3NlZFN0YXRlO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIG9uIHRvdWNoIGRldmljZSBBTkQgJ2hvdmVyJyBtZXRob2QgaXMgc2VsZWN0ZWQ6XG4gICAgICAgICAqIHdhaXQgZm9yIHRoZSBkaWdlc3QgdG8gcGVyZm9ybSBhbmQgdGhlbiBjaGFuZ2UgaG92ZXIgdG8gY2xpY2suXG4gICAgICAgICAqL1xuICAgICAgICBpZiAoX2lzVG91Y2hEZXZpY2UoKSAmJiBfaXNIb3ZlckFjdGl2ZSgpKSB7XG4gICAgICAgICAgJHRpbWVvdXQodXNlQ2xpY2spO1xuICAgICAgICB9XG5cbiAgICAgICAgJGF0dHJzLiRvYnNlcnZlKCdtZW51U3RhdGUnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAkc2NvcGUuY3VycmVudFN0YXRlID0gJHNjb3BlLm1lbnVTdGF0ZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZnVuY3Rpb24gY2xpY2tlZCgpIHtcbiAgICAgICAgICAvLyBJZiB0aGVyZSBpcyBhIG1haW4gYWN0aW9uLCBsZXQncyBmaXJlIGl0XG4gICAgICAgICAgaWYgKCRzY29wZS5tYWluQWN0aW9uKSB7XG4gICAgICAgICAgICAkc2NvcGUubWFpbkFjdGlvbigpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICghX2lzSG92ZXJBY3RpdmUoKSkge1xuICAgICAgICAgICAgdG9nZ2xlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGZ1bmN0aW9uIGhvdmVyZWQoKSB7XG4gICAgICAgICAgaWYgKF9pc0hvdmVyQWN0aXZlKCkpIHtcbiAgICAgICAgICAgIC8vdG9nZ2xlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbnZlcnQgdGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIG1lbnUuXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiB0b2dnbGUoKSB7XG4gICAgICAgICAgaWYgKCRzY29wZS5tZW51U3RhdGUgPT09IG9wZW5TdGF0ZSkge1xuICAgICAgICAgICAgY2xvc2UoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb3BlbigpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIG9wZW4oKSB7XG4gICAgICAgICAgJHNjb3BlLm1lbnVTdGF0ZSA9IG9wZW5TdGF0ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGNsb3NlKCkge1xuICAgICAgICAgICRzY29wZS5tZW51U3RhdGUgPSBjbG9zZWRTdGF0ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDaGVjayBpZiB3ZSdyZSBvbiBhIHRvdWNoLWVuYWJsZWQgZGV2aWNlLlxuICAgICAgICAgKiBSZXF1aXJlcyBNb2Rlcm5penIgdG8gcnVuLCBvdGhlcndpc2Ugc2ltcGx5IHJldHVybnMgZmFsc2VcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIF9pc1RvdWNoRGV2aWNlKCkge1xuICAgICAgICAgIHJldHVybiB3aW5kb3cuTW9kZXJuaXpyICYmIE1vZGVybml6ci50b3VjaDtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIF9pc0hvdmVyQWN0aXZlKCkge1xuICAgICAgICAgIHJldHVybiAkc2NvcGUudG9nZ2xpbmdNZXRob2QgPT09ICdob3Zlcic7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ29udmVydCB0aGUgdG9nZ2xpbmcgbWV0aG9kIHRvICdjbGljaycuXG4gICAgICAgICAqIFRoaXMgaXMgdXNlZCB3aGVuICdob3ZlcicgaXMgc2VsZWN0ZWQgYnkgdGhlIHVzZXJcbiAgICAgICAgICogYnV0IGEgdG91Y2ggZGV2aWNlIGlzIGVuYWJsZWQuXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiB1c2VDbGljaygpIHtcbiAgICAgICAgICAkc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJHNjb3BlLnRvZ2dsaW5nTWV0aG9kID0gJ2NsaWNrJztcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfV1cbiAgICB9O1xuICB9XSk7XG5cbiAgbWZiLmRpcmVjdGl2ZSgnbWZiQnV0dG9uJywgW2Z1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICByZXF1aXJlOiAnXm1mYk1lbnUnLFxuICAgICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgICB0cmFuc2NsdWRlOiB0cnVlLFxuICAgICAgcmVwbGFjZTogdHJ1ZSxcbiAgICAgIHNjb3BlOiB7XG4gICAgICAgIGljb246ICdAJyxcbiAgICAgICAgbGFiZWw6ICdAJ1xuICAgICAgfSxcbiAgICAgIHRlbXBsYXRlVXJsOiBmdW5jdGlvbihlbGVtLCBhdHRycykge1xuICAgICAgICByZXR1cm4gYXR0cnMudGVtcGxhdGVVcmwgfHwgJ25nLW1mYi1idXR0b24tZGVmYXVsdC50cGwuaHRtbCc7XG4gICAgICB9XG4gICAgfTtcbiAgfV0pO1xuXG59KSh3aW5kb3csIGFuZ3VsYXIpO1xuIiwic3luYy5kaXJlY3RpdmUoJ2xlZnRNZW51JyxmdW5jdGlvbigpe1xuICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0FFJyxcbiAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgIGRhdGE6ICc9JyxcbiAgICAgICAgICAgIHVzZXI6ICc9JyxcbiAgICAgICAgICAgIHR5cGU6ICc9J1xuICAgICAgICB9LFxuICAgICAgICB0ZW1wbGF0ZVVybDogXCJkaXJlY3RpdmVzL2xlZnRNZW51Lmh0bWxcIlxuICAgIH07XG59KTtcbnN5bmMuZGlyZWN0aXZlKCdmZWVkcycsZnVuY3Rpb24oKXtcbiAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdBRScsXG4gICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICBwb3N0czogJz0nLFxuICAgICAgICAgICAgcmVwbGllczogJz0nLFxuICAgICAgICAgICAgY3JlYXRlUG9zdDonPSdcbiAgICAgICAgfSxcbiAgICAgICAgdGVtcGxhdGVVcmw6IFwiZGlyZWN0aXZlcy9taWRkbGVDb250ZW50Lmh0bWxcIlxuICAgIH07XG59KTtcbnN5bmMuZGlyZWN0aXZlKCdoZWFkZXInLGZ1bmN0aW9uKCl7XG4gIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiAnQUUnLFxuICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgZGF0YTogJz0nLFxuICAgICAgICAgICAgdXNlcjogJz0nLFxuICAgICAgICAgICAgdHlwZTogJz0nXG4gICAgICAgIH0sXG4gICAgICAgIHRlbXBsYXRlVXJsOiBcIi4vZGlyZWN0aXZlcy9oZWFkZXIuaHRtbFwiXG5cbiAgICB9O1xufSk7XG5cblxuc3luYy5kaXJlY3RpdmUoJ2tleWJpbmRpbmcnLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgIGludm9rZTogJyYnXG4gICAgICAgIH0sXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWwsIGF0dHIpIHtcbiAgICAgICAgICAgIE1vdXNldHJhcC5iaW5kKGF0dHIub24sIHNjb3BlLmludm9rZSk7XG4gICAgICAgIH1cbiAgICB9O1xufSk7XG4iLCIvKiBnbG9iYWwgJHdpbmRvdyAqL1xuLyogZ2xvYmFsIExvZ2dlciAqL1xuXG5Mb2dnZXIuY29udHJvbGxlcignbG9naW5Db250cm9sbGVyJyxbJyRzY29wZScsJyRodHRwJywnJHJvb3RTY29wZScsJyR3aW5kb3cnLCBmdW5jdGlvbiAoJHNjb3BlLCRodHRwLCRyb290U2NvcGUsJHdpbmRvdykge1xuICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICAnY3JlZGVkZW50aWFsLW5vdC1mb3VuZCcgICAgICAgOiAnQ3JlZGVudGlhbHMgbm90IGZvdW5kIScsXG4gICAgICAgICdzdWNjZXNzJyAgICAgICAgICAgICAgICAgICAgICA6ICdsb2dnaW5nIGluLi4uJ1xuICAgIH07XG4gICRzY29wZS5sb2dpbiA9IGZ1bmN0aW9uIChpbmZvKVxuICB7XG4gICAgLy9iZWZvcmUgbm90aWZ5IHRoYXQgd2UgYXJlIGxvZ2dpbmdpblxuICAgICQoJy5sb2dpbi1mb3JtLW1haW4tbWVzc2FnZScpLmFkZENsYXNzKCdzaG93IHN1Y2Nlc3MnKS5odG1sKG9wdGlvbnNbJ3N1Y2Nlc3MnXSk7XG4gICAgJGh0dHAucG9zdCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9zZXNzaW9ucycsaW5mbylcbiAgICAuc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICAgICAgaWYocmVzcG9uc2UgPT09XCIxXCIpe1xuICAgICAgICAgICAgUmVkaXJlY3RpbmcoKTtcblxuICAgICAgICB9ZWxzZSBpZihyZXNwb25zZSA9PT0gXCIwXCIpe1xuICAgICAgICAgICAgICQoJy5sb2dpbi1mb3JtLW1haW4tbWVzc2FnZScpLmFkZENsYXNzKCdzaG93IGVycm9yJykuaHRtbChvcHRpb25zWydjcmVkZWRlbnRpYWwtbm90LWZvdW5kJ10pO1xuICAgICAgICB9ZWxzZSBpZihyZXNwb25zZSA9PT0gXCJub3RWZXJpZmllZFwiKXtcbiAgICAgICAgICAgIG5vdFZlcmlmaWVkKCk7XG4gICAgICAgIH1cbiAgICB9KVxuICAgIC5lcnJvcihmdW5jdGlvbihlcnJvcikge1xuICAgICAgICBjb25zb2xlLmxvZygnZXJyb3I6JysgZXJyb3IpO1xuICAgIH0pXG4gICAgZnVuY3Rpb24gbm90VmVyaWZpZWQoKXtcbiAgICAgICAgICR3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvbm90VmVyaWZpZWQnO1xuICAgIH1cbiAgICBmdW5jdGlvbiBSZWRpcmVjdGluZygpe1xuICAgICAgICAkd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL3N5bmMnO1xuICAgIH1cbiAgfVxufV0pO1xuIiwiTG9nZ2VyLmNvbnRyb2xsZXIoJ1JlZ2lzdGVyQ29udHJvbGxlcicsIFsnJHNjb3BlJywnJHJvb3RTY29wZScsJyRodHRwJyxmdW5jdGlvbiAoJHNjb3BlLCRyb290U2NvcGUsJGh0dHApIHtcbiAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgJ3Bhc3N3b3JkLW5vdE1hdGNoJzogJ3Bhc3N3b3JkIGRvIG5vdCBtYXRjaCcsXG4gICAgICAgICdTaWduVXBJblByb2dyZXNzJyA6ICdXYWl0IHdlIGFyZSBzZXR0aW5nIHVwIHlvdXIgYWNjb3VudC4nXG4gICAgfTtcbiAgICAkc2NvcGUucmVnaXN0ZXI9ZnVuY3Rpb24odXNlcil7XG4gICAgICAkKCcucmVnaXN0ZXItZm9ybS1tYWluLW1lc3NhZ2UnKS5hZGRDbGFzcygnc2hvdyBzdWNjZXNzJykuaHRtbChvcHRpb25zWydTaWduVXBJblByb2dyZXNzJ10pO1xuICAgICAgICBpZigkKCcjcGFzc3dvcmQnKS52YWwoKSAhPSAkKCcjcGFzc3dvcmQtY29uZmlybScpLnZhbCgpKXtcbiAgICAgICAgICAkKCcucmVnaXN0ZXItZm9ybS1tYWluLW1lc3NhZ2UnKS5hZGRDbGFzcygnc2hvdyBlcnJvcicpLmh0bWwob3B0aW9uc1sncGFzc3dvcmQtbm90TWF0Y2gnXSk7XG4gICAgICAgICAgc2V0VGltZW91dChtZXNzYWdlUmVtb3ZlLCAyMDAwKTtcbiAgICAgICAgICBmdW5jdGlvbiBtZXNzYWdlUmVtb3ZlKCl7XG4gICAgICAgICAgICAgICQoJy5yZWdpc3Rlci1mb3JtLW1haW4tbWVzc2FnZScpLnJlbW92ZUNsYXNzKCdzaG93IGVycm9yJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdXNlcm5hbWU9JCgnI3VzZXJuYW1lJykudmFsKCk7XG4gICAgICAgIHZhciBlbWFpbD0kKCcjZW1haWwnKS52YWwoKTtcblxuXG4gICAgICAgIGpRdWVyeS5wb3N0KCcvc2Vzc2lvbnMnLCB7dXNlcm5hbWU6IHVzZXJuYW1lLCBwYXNzd29yZDp1c2VyLnBhc3N3b3JkLCBlbWFpbDplbWFpbCwgb3B0aW9uOnVzZXIub3B0aW9uLCBwaG9uZTp1c2VyLnBob25lfSwgZnVuY3Rpb24oZGF0YSwgdGV4dFN0YXR1cywgeGhyKSB7XG4gICAgICAgICAgICBpZihkYXRhID09IDEpe1xuICAgICAgICAgICAgICAgICBSZWRpcmVjdGluZygpO1xuICAgICAgICAgICAgfWVsc2UgaWYoZGF0YSA9PTApe1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCd3ZSBhcmUgZmlyZWQgdGhpcyBjYW4gbm90IGhhcHBlbicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KS5lcnJvcihmdW5jdGlvbihlcnJvcikge1xuXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICAgIH0pO1xuICAgICAgICBmdW5jdGlvbiBSZWRpcmVjdGluZygpe1xuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uID0gJy9jaGVja0VtYWlsJztcbiAgICAgICAgfVxuICAgIH1cbn1dKTtcblxuTG9nZ2VyLmRpcmVjdGl2ZSgndW5pcXVlVXNlcm5hbWUnLCBbJ2lzVXNlcm5hbWVBdmFpbGFibGUnLGZ1bmN0aW9uKGlzVXNlcm5hbWVBdmFpbGFibGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgICByZXF1aXJlOiAnbmdNb2RlbCcsXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgbmdNb2RlbCkge1xuICAgICAgICAgICAgbmdNb2RlbC4kYXN5bmNWYWxpZGF0b3JzLnVuaXF1ZVVzZXJuYW1lID0gaXNVc2VybmFtZUF2YWlsYWJsZTtcbiAgICAgICAgfVxuICAgIH07XG59XSk7XG5Mb2dnZXIuZmFjdG9yeSgnaXNVc2VybmFtZUF2YWlsYWJsZScsIFsnJHEnLCckaHR0cCcsJyRyb290U2NvcGUnLGZ1bmN0aW9uKCRxLCAkaHR0cCwkcm9vdFNjb3BlKSB7XG4gICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgICdidG4tbG9hZGluZyc6ICc8aSBjbGFzcz1cImZhIGZhLXNwaW5uZXIgZmEtcHVsc2VcIj48L2k+JyxcbiAgICAgICAgJ2J0bi1zdWNjZXNzJzogJzxpIGNsYXNzPVwiZmEgZmEtY2hlY2tcIj48L2k+JyxcbiAgICAgICAgJ2J0bi1lcnJvcic6ICc8aSBjbGFzcz1cImZhIGZhLXJlbW92ZVwiPjwvaT4nLFxuICAgICAgICAnbXNnLXN1Y2Nlc3MnOiAnQWxsIEdvb2QhIFJlZGlyZWN0aW5nLi4uJyxcbiAgICAgICAgJ21zZy11c2VybmFtZS1hdmFpbGFibGUnOiAnZ29vZCB1c2VybmFtZSBhdmFpbGFibGUhJyxcbiAgICAgICAgJ21zZy11c2VybmFtZS10YWtlbicgICAgOiAnb29wcyB1c2VybmFtZSB0YWtlbicsXG4gICAgICAgICdtc2ctZW1haWwtdGFrZW4nICAgICAgIDogJ2VtYWlsIHRha2VuJyxcbiAgICAgICAgJ21zZy15b3VyLXBob25lLXN1Y2snICAgOiAneW91ciBwaG9uZSBpcyBub3QgdmFsaWQnLFxuICAgICAgICAndXNlQUpBWCc6IHRydWUsXG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24odXNlcm5hbWUpIHtcblxuICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgICRodHRwLmdldCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvdXNlcnM/dXNlcm5hbWU9JyArIHVzZXJuYW1lICsgJyZhY2Nlc3NfdG9rZW49QmM3RFdTN0tLUkx0eG1kZFVaSTFUMWxadTJKMVloUjhPTFhHV05abicpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICBpZihkYXRhPT0nYXZhaWxhYmxlJyl7XG4gICAgICAgICAgICAgICAgJCgnLnJlZ2lzdGVyLWZvcm0tbWFpbi1tZXNzYWdlJykuYWRkQ2xhc3MoJ3Nob3cgc3VjY2VzcycpLmh0bWwob3B0aW9uc1snbXNnLXVzZXJuYW1lLWF2YWlsYWJsZSddKTtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KG1lc3NhZ2VSZW1vdmUsIDIwMDApO1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG1lc3NhZ2VSZW1vdmUoKXtcbiAgICAgICAgICAgICAgICAgICAgJCgnLnJlZ2lzdGVyLWZvcm0tbWFpbi1tZXNzYWdlJykucmVtb3ZlQ2xhc3MoJ3Nob3cgc3VjY2VzcycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1lbHNlIGlmKGRhdGE9PSd0YWtlbicpe1xuICAgICAgICAgICAgICAgICQoJy5yZWdpc3Rlci1mb3JtLW1haW4tbWVzc2FnZScpLmFkZENsYXNzKCdzaG93IGVycm9yJykuaHRtbChvcHRpb25zWydtc2ctdXNlcm5hbWUtdGFrZW4nXSk7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCh1c2VybmFtZVRha2VuLCAyMDAwKTtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiB1c2VybmFtZVRha2VuKCl7XG4gICAgICAgICAgICAgICAgICAgICQoJy5yZWdpc3Rlci1mb3JtLW1haW4tbWVzc2FnZScpLnJlbW92ZUNsYXNzKCdzaG93IGVycm9yJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KCk7XG4gICAgICAgIH0pLmVycm9yKGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9XG59XSk7XG5Mb2dnZXIuZGlyZWN0aXZlKCd1bmlxdWVFbWFpbCcsIFsnaXNFbWFpbEF2YWlsYWJsZScsZnVuY3Rpb24oaXNFbWFpbEF2YWlsYWJsZSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICAgIHJlcXVpcmU6ICduZ01vZGVsJyxcbiAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBuZ01vZGVsKSB7XG4gICAgICAgICAgICBuZ01vZGVsLiRhc3luY1ZhbGlkYXRvcnMudW5pcXVlRW1haWwgPSBpc0VtYWlsQXZhaWxhYmxlO1xuICAgICAgICB9XG4gICAgfTtcbn1dKTtcbkxvZ2dlci5mYWN0b3J5KCdpc0VtYWlsQXZhaWxhYmxlJywgWyckcScsJyRodHRwJywnJHJvb3RTY29wZScsZnVuY3Rpb24gKCRxLCAkaHR0cCwgJHJvb3RTY29wZSkge1xuICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICAnYnRuLWxvYWRpbmcnOiAnPGkgY2xhc3M9XCJmYSBmYS1zcGlubmVyIGZhLXB1bHNlXCI+PC9pPicsXG4gICAgICAgICdidG4tc3VjY2Vzcyc6ICc8aSBjbGFzcz1cImZhIGZhLWNoZWNrXCI+PC9pPicsXG4gICAgICAgICdidG4tZXJyb3InOiAnPGkgY2xhc3M9XCJmYSBmYS1yZW1vdmVcIj48L2k+JyxcbiAgICAgICAgJ21zZy1zdWNjZXNzJzogJ0FsbCBHb29kISBSZWRpcmVjdGluZy4uLicsXG4gICAgICAgICdtc2ctdXNlcm5hbWUtYXZhaWxhYmxlJzogJ2dvb2QgdXNlcm5hbWUgYXZhaWxhYmxlIScsXG4gICAgICAgICdtc2ctdXNlcm5hbWUtdGFrZW4nICAgIDogJ29vcHMgdXNlcm5hbWUgdGFrZW4nLFxuICAgICAgICAnbXNnLWVtYWlsLXRha2VuJyAgICAgICA6ICdlbWFpbCB0YWtlbicsXG4gICAgICAgICdtc2ctZW1haWwtYXZhaWxhYmxlJyAgIDogJ2VtYWlsIGF2YWlsYWJsZScsXG4gICAgICAgICdtc2cteW91ci1waG9uZS1zdWNrJyAgIDogJ3lvdXIgcGhvbmUgaXMgbm90IHZhbGlkJyxcbiAgICAgICAgJ3VzZUFKQVgnOiB0cnVlLFxuICAgIH07XG5cbiAgICByZXR1cm4gZnVuY3Rpb24oZW1haWwpIHtcbiAgICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cbiAgICAgICAgJGh0dHAuZ2V0KCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS91c2Vycz9lbWFpbD0nICsgZW1haWwgKyAnJmFjY2Vzc190b2tlbj1CYzdEV1M3S0tSTHR4bWRkVVpJMVQxbFp1MkoxWWhSOE9MWEdXTlpuJykuc3VjY2VzcyhmdW5jdGlvbihkYXRhKXtcblxuICAgICAgICAgICAgaWYoZGF0YT09J2VtYWlsLWF2YWlsYWJsZScpe1xuICAgICAgICAgICAgICAgICQoJy5yZWdpc3Rlci1mb3JtLW1haW4tbWVzc2FnZScpLmFkZENsYXNzKCdzaG93IHN1Y2Nlc3MnKS5odG1sKG9wdGlvbnNbJ21zZy1lbWFpbC1hdmFpbGFibGUnXSk7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChtZXNzYWdlUmVtb3ZlLCAyMDAwKTtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBtZXNzYWdlUmVtb3ZlKCl7XG4gICAgICAgICAgICAgICAgICAgICQoJy5yZWdpc3Rlci1mb3JtLW1haW4tbWVzc2FnZScpLnJlbW92ZUNsYXNzKCdzaG93IHN1Y2Nlc3MnKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1lbHNlIGlmKGRhdGE9PSdlbWFpbC10YWtlbicpe1xuICAgICAgICAgICAgICAgICQoJy5yZWdpc3Rlci1mb3JtLW1haW4tbWVzc2FnZScpLmFkZENsYXNzKCdzaG93IGVycm9yJykuaHRtbChvcHRpb25zWydtc2ctZW1haWwtdGFrZW4nXSk7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChtZXNzYWdlRW1haWxUYWtlbiwgMjAwMCk7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gbWVzc2FnZUVtYWlsVGFrZW4oKXtcbiAgICAgICAgICAgICAgICAgICAgJCgnLnJlZ2lzdGVyLWZvcm0tbWFpbi1tZXNzYWdlJykucmVtb3ZlQ2xhc3MoJ3Nob3cgZXJyb3InKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KCk7XG4gICAgICAgICB9KS5lcnJvcihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgICAgIH0pO1xuICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfTtcbn1dKTtcbiIsInN5bmMuc2VydmljZSgnRmlsZXMnLCBbJyRodHRwJywnJHEnLCckcm9vdFNjb3BlJyxmdW5jdGlvbiBGaWxlcyAoJGh0dHAsJHEsJHJvb3RTY29wZSkge1xuICAgIHRoaXMuZ2V0R3JvdXBGaWxlcyA9ZnVuY3Rpb24oZ3JvdXBJZCkge1xuICAgICAgICB2YXIgZGlmZmVyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICAvL2Rvd24gZW5kcG9pbnQgcmV0dXJuIGFsbCBmaWxlcyBJIG93blxuICAgICAgICAkaHR0cC5nZXQoJHJvb3RTY29wZS5lbmRQb2ludCArJy9hcGkvdjEvZ3JvdXBzLycrZ3JvdXBJZCsnL2dyb3VwZmlsZXMnKVxuICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgICAgICBkaWZmZXJlZC5yZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmVycm9yKGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgICAgICBkaWZmZXJlZC5yZWplY3QoZXJyb3IpO1xuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcbiAgICB9O1xuICAgIHRoaXMuc2luZ2xlID0gZnVuY3Rpb24oZmlsZSl7XG4gICAgICB2YXIgcHJvbWlzZSA9ICRxLmRlZmVyKCk7XG4gICAgICAkaHR0cC5nZXQoJHJvb3RTY29wZS5lbmRQb2ludCsgJy9wcmV2aWV3LycrIGZpbGUpXG4gICAgICAuc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgIHByb21pc2UucmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICB9KVxuICAgICAgLmVycm9yKGZ1bmN0aW9uKGVycil7XG4gICAgICAgIHByb21pc2UucmVqZWN0KGVycik7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBwcm9taXNlLnByb21pc2U7XG4gICAgfTtcbiAgICB0aGlzLmdldEJveEZpbGVzID0gZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIGdyb3VwSWQgPSAxOy8vYnkgZGVmYXVsdCB0aGlzIGNhbiBiZSBhbnkgbnVtYmVyXG4gICAgICAgIHZhciBkaWZmZXJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgIC8vdGhlIGlkZWEgaXMgdG8gZ2V0IGEgZmlsZSBlaXRoZXIgZnJvbSBncm91cHMgb3IgaW5kaXZpZHVhbCBhY2NvdW50IGdyb3VwIGlzIG9wdGlvbmFsXG4gICAgICAgICRodHRwLmdldCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvZ3JvdXBzLycrZ3JvdXBJZCsnL2JveGZpbGVzJylcbiAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgIGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgICB9KVxuICAgICAgICAuZXJyb3IoZnVuY3Rpb24oZXJyKXtcbiAgICAgICAgICBkaWZmZXJlZC5yZWplY3QoZXJyKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuICAgIH07XG4gICAgdGhpcy5nZXRNaW1lVHlwZSA9IGZ1bmN0aW9uKGZpbGVfbmFtZSl7XG4gICAgICB2YXIgcHJvbWlzZSA9ICRxLmRlZmVyKCk7XG4gICAgICAkaHR0cC5nZXQoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL2ZpbGVzL21pbWVUeXBlLycrIGZpbGVfbmFtZSlcbiAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgICBwcm9taXNlLnJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgfSlcbiAgICAgIC5lcnJvcihmdW5jdGlvbihlcnIpe1xuICAgICAgICAgIHByb21pc2UucmVqZWN0KGVycik7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBwcm9taXNlLnByb21pc2U7XG4gICAgfTtcbiAgICB0aGlzLmRvd25sb2FkRmlsZSA9IGZ1bmN0aW9uKGZpbGVfbmFtZSl7XG5cbiAgICAgIHZhciBwcm9taXNlID0gJHEuZGVmZXIoKTtcbiAgICAgIC8vaGFyZCBjb2RlZCBhIHVzZXIgU3RyaW1VcCEgbmVlZCB0byBpbmplY3QgaGltIGR5YW1pY2FsbHlcbiAgICAgICRodHRwLmdldCgkcm9vdFNjb3BlLmVuZFBvaW50KyAnL2FwaS92MS9maWxlcy9kb3dubG9hZC8nK2ZpbGVfbmFtZSsnL29mLycrICdTdHJpbVVwJylcbiAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgcHJvbWlzZS5yZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgIH0pXG4gICAgICAuZXJyb3IoZnVuY3Rpb24oZXJyKXtcbiAgICAgICAgcHJvbWlzZS5yZWplY3QoZXJyKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHByb21pc2UucHJvbWlzZTtcbiAgICB9O1xuICAgIHJldHVybiB0aGlzO1xufV0pO1xuIiwic3luYy5zZXJ2aWNlKCdQZW9wbGUnLCBbJyRxJywnJGh0dHAnLCckcm9vdFNjb3BlJyxmdW5jdGlvbiAoJHEsICRodHRwLCAkcm9vdFNjb3BlKSB7XG5cdHRoaXMuZ2V0ICA9IGZ1bmN0aW9uICgpe1xuXHRcdHZhciBkaWZmZXJlZCA9ICRxLmRlZmVyKCk7XG5cdFx0JGh0dHAuZ2V0KCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS9zdWdnZXN0aW9ucycpXG5cdFx0LnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcG9uc2Upe1xuXHRcdFx0ZGlmZmVyZWQucmVzb2x2ZShyZXNwb25zZSk7XG5cdFx0fSlcblx0XHQuZXJyb3IoZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdGRpZmZlcmVkLnJlamVjdChlcnJvcik7XG5cdFx0fSlcblx0XHRyZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcblx0fVxuXHR0aGlzLmFsbElmb2xsb3cgPSBmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIGRpZmZlcmVkID0gJHEuZGVmZXIoKTtcblx0XHQkaHR0cC5nZXQoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL21lL2ZvbGxvd2luZ3MnKVxuXHRcdC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblx0XHRcdGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuXHRcdH0pXG5cdFx0LmVycm9yKGZ1bmN0aW9uKGVycil7XG5cdFx0XHRkaWZmZXJlZC5yZWplY3QoZXJyKTtcblx0XHR9KVxuXHRcdHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuXHR9XG5cdHRoaXMudW5Gb2xsb3cgPSBmdW5jdGlvbihpZCl7XG5cdFx0dmFyIGRpZmZlcmVkID0gJHEuZGVmZXIoKTtcblx0XHQkaHR0cC5kZWxldGUoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL21lL2ZvbGxvd2luZy8nICtpZClcblx0XHQuc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSl7XG5cdFx0XHRkaWZmZXJlZC5yZXNvbHZlKHJlc3BvbnNlKTtcblx0XHR9KVxuXHRcdC5lcnJvcihmdW5jdGlvbihlcnIpe1xuXHRcdFx0ZGlmZmVyZWQucmVqZWN0KGVycik7XG5cdFx0fSlcblx0XHRyZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcblx0fVxuXHR0aGlzLmZvbGxvdyA9IGZ1bmN0aW9uKHBhcmFtKXtcblx0XHR2YXIgZGlmZmVyZWQgPSAkcS5kZWZlcigpO1xuXHRcdCRodHRwLnB1dCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvbWUvZm9sbG93aW5ncycsIHBhcmFtKVxuXHRcdC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblx0XHRcdGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuXHRcdH0pXG5cdFx0LmVycm9yKGZ1bmN0aW9uKGVycm9yKXtcblx0XHRcdGRpZmZlcmVkLnJlamVjdChlcnJvcik7XG5cdFx0fSlcblx0XHRyZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcblx0fVxuXHRyZXR1cm4gdGhpcztcbn1dKTtcbiIsInN5bmMuc2VydmljZSgnU2hhcmUnLFsnJGxvZycsJyRodHRwJywnJHEnLCckcm9vdFNjb3BlJywgZnVuY3Rpb24gKCRsb2csJGh0dHAsJHEsJHJvb3RTY29wZSkge1xuXHR0aGlzLnNoYXJlID0gZnVuY3Rpb24oc2hhcmVibGVPYmope1xuXHRcdHZhciBkaWZmZXJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgICRodHRwLnBvc3QoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL3NoYXJlJyxzaGFyZWJsZU9iailcbiAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgICAgZGlmZmVyZWQucmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5lcnJvcihmdW5jdGlvbihlcnIpe1xuICAgICAgICAgICAgZGlmZmVyZWQucmVqZWN0KGVycik7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcblx0fTtcblx0dGhpcy5nZXRVc2VyID0gZnVuY3Rpb24odXNlcil7XG5cblx0XHR2YXIgZGlmZmVyZWQgPSAkcS5kZWZlcigpO1xuXHRcdCRodHRwLmdldCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvbWUvdXNlcnMvJysgdXNlcilcblx0XHQuc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSl7XG5cdFx0XHRkaWZmZXJlZC5yZXNvbHZlKHJlc3BvbnNlKTtcblx0XHR9KVxuXHRcdC5lcnJvcihmdW5jdGlvbihlcnIpe1xuXHRcdFx0ZGlmZmVyZWQucmVqZWN0KGVycik7XG5cdFx0fSk7XG5cdFx0cmV0dXJuIGRpZmZlcmVkLnByb21pc2U7XG5cdH07XG5cdHRoaXMuZmlsZU1pbWUgPSBmdW5jdGlvbihmaWxlKXtcblx0XHR2YXIgZGlmZmVyZWQgPSAkcS5kZWZlcigpO1xuXHRcdCRodHRwLmdldCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvbWltZVR5cGUvJysgZmlsZSlcblx0XHQuc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSl7XG5cdFx0XHRkaWZmZXJlZC5yZXNvbHZlKHJlc3BvbnNlKTtcblx0XHR9KVxuXHRcdC5lcnJvcihmdW5jdGlvbihlcnIpe1xuXHRcdFx0ZGlmZmVyZWQucmVqZWN0KGVycik7XG5cdFx0fSk7XG5cdFx0cmV0dXJuIGRpZmZlcmVkLnByb21pc2U7XG5cdH07XG4gICAgcmV0dXJuIHRoaXM7XG59XSk7Iiwic3luYy5zZXJ2aWNlKCdVc2VyJywgWyckaHR0cCcsJyRxJywnJHJvb3RTY29wZScsZnVuY3Rpb24gRmlsZXMgKCRodHRwLCRxLCRyb290U2NvcGUpIHtcblx0dGhpcy5pbmZvID0gZnVuY3Rpb24oKXtcblx0XHR2YXIgcHJvbWlzZSA9ICRxLmRlZmVyKCk7XG5cdFx0JGh0dHAuZ2V0KCRyb290U2NvcGUuZW5kUG9pbnQgK1wiL2FwaS92MS91c2Vycy9pbmZvXCIpXG5cdFx0LnN1Y2Nlc3MoZnVuY3Rpb24ocmVzKXtcblx0XHRcdHByb21pc2UucmVzb2x2ZShyZXMpO1xuXHRcdH0pXG5cdFx0LmVycm9yKGZ1bmN0aW9uKCkge1xuXHRcdFx0cHJvbWlzZS5yZWplY3QoKTtcblx0XHR9KTtcblx0XHRyZXR1cm4gcHJvbWlzZS5wcm9taXNlO1xuXHR9O1xuXHR0aGlzLmdyb3VwcyA9IGZ1bmN0aW9uKHVzZXIpe1xuICAgICAgdmFyIGRpZmZlcmVkID0gJHEuZGVmZXIoKTtcbiAgICAgICRodHRwLmdldCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvbWUvZ3JvdXBzJylcbiAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgZGlmZmVyZWQucmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICB9KVxuICAgICAgLmVycm9yKGZ1bmN0aW9uKGVycil7XG4gICAgICAgIGRpZmZlcmVkLnJlamVjdChlcnIpO1xuICAgICAgfSlcbiAgICAgIHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuICAgIH1cbiAgICBcblx0cmV0dXJuIHRoaXM7XG59XSkiLCIvKiBnbG9iYWwgc3luYyAqL1xuc3luYy5zZXJ2aWNlKCdOb3RpZmljYXRpb24nLCBbJyRodHRwJywgJyRxJywgJyRyb290U2NvcGUnLCBmdW5jdGlvbiBOb3RpZmljYXRpb24oJGh0dHAsICRxLCAkcm9vdFNjb3BlKSB7XG4gICAgdGhpcy5nZXROb3RpZmljYXRpb24gPSBmdW5jdGlvbiAodXNlcl9pZCkge1xuICAgICAgICB2YXIgZGlmZmVyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICAkaHR0cC5nZXQoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL25vdGlmaWNhdGlvbnMnLCB7Y2FjaGU6IGZhbHNlfSlcbiAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBkaWZmZXJlZC5yZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGRpZmZlcmVkLnByb21pc2U7XG4gICAgfVxuICAgIHRoaXMuY3JlYXRlTm90aWZpY2F0aW9uID0gZnVuY3Rpb24gKE5vdGlmaWNhdGlvbikge1xuICAgICAgICB2YXIgZGlmZmVyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICAkaHR0cC5wb3N0KCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS9ub3RpZmljYXRpb25zJywgTm90aWZpY2F0aW9uKVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgZGlmZmVyZWQucmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGRpZmZlcmVkLnJlamVjdChlcnJvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGRpZmZlcmVkLnByb21pc2U7XG4gICAgfVxuICAgIHRoaXMuZGVsZXRlTm90aWZpY2F0aW9uID0gZnVuY3Rpb24gKG5vdGlmaWNhdGlvbikge1xuICAgICAgICB2YXIgZGlmZmVyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICAkaHR0cC5kZWxldGUoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL25vdGlmaWNhdGlvbnMvJyArIG5vdGlmaWNhdGlvbilcbiAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBkaWZmZXJlZC5yZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGRpZmZlcmVkLnByb21pc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG59XSk7XG5cbnN5bmMuY29udHJvbGxlcignbm90aWZpY2F0aW9uQ29udHJvbGxlcicsIFsnJHNjb3BlJywnTm90aWZpY2F0aW9uJywnJGxvZycsIGZ1bmN0aW9uICgkc2NvcGUsTm90aWZpY2F0aW9uLCRsb2cpIHtcbiAgICAkc2NvcGUuaW5pdCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICRzY29wZS5nZXROb3RpZmljYXRpb24oKTtcbiAgICB9XG4gICAgJHNjb3BlLmNsZWFyTm90aWZpY2F0aW9uID0gZnVuY3Rpb24obm90aWZpY2F0aW9uKXtcblxuXG4gICAgICBOb3RpZmljYXRpb24uY2xlYXJOb3RpZmljYXRpb24obm90aWZpY2F0aW9uKVxuICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAvL2xvYWQgcmVtYWluaW5nIG5vdGlmaWNhdGlvblxuICAgICAgICAkc2NvcGUuZ2V0Tm90aWZpY2F0aW9uKCk7XG4gICAgICB9LGZ1bmN0aW9uKGVycil7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICB9KTtcbiAgICB9XG4gICAgJHNjb3BlLmdldE5vdGlmaWNhdGlvbiA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIE5vdGlmaWNhdGlvbi5nZXROb3RpZmljYXRpb24oKVxuICAgICAgICAudGhlbihmdW5jdGlvbihyZXN1bHQpe1xuICAgICAgICAgICAgLy8gJGxvZy5pbmZvKHJlc3VsdCk7XG4gICAgICAgICAgICAkc2NvcGUubm90aWZpY2F0aW9ucyA9IHJlc3VsdDtcbiAgICAgICAgICAgIFxuICAgICAgICB9LGZ1bmN0aW9uKGVycm9yKXtcbiAgICAgICAgICAgIC8vICRsb2cuaW5mbyhlcnJvcik7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAkc2NvcGUuaW5pdCgpO1xufV0pO1xuc3luYy5kaXJlY3RpdmUoJ25vdGlmeScsW2Z1bmN0aW9uKCl7XG4gIHJldHVybntcbiAgICByZXN0cmljdDonQUUnLFxuICAgIHNjb3BlOntcblxuICAgIH0sXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsLCBpQXR0cnMpe1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICB2YXIgdGl0bGU9J1RoaXMgd2lsbCBiZSB0aXRsZSc7XG4gICAgICAgICAgICAgIHZhciBkZXNjPSdNb3N0IHBvcHVsYXIgYXJ0aWNsZS4nO1xuICAgICAgICAgICAgICB2YXIgdXJsPSdzeW5jLmNvbTo4MDAwJztcbiAgICAgICAgICAgICAgbm90aWZ5QnJvd3Nlcih0aXRsZSxkZXNjLHVybCk7XG4gICAgICAgICAgfSwgMjAwMCk7XG4gICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpe1xuICAgICAgICAgICAgICAgIGlmIChOb3RpZmljYXRpb24ucGVybWlzc2lvbiAhPT0gXCJncmFudGVkXCIpe1xuICAgICAgICAgICAgICAgICAgTm90aWZpY2F0aW9uLnJlcXVlc3RQZXJtaXNzaW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgZnVuY3Rpb24gbm90aWZ5QnJvd3Nlcih0aXRsZSxkZXNjLHVybClcbiAgICAgIHtcbiAgICAgICAgaWYgKCFOb3RpZmljYXRpb24pIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdEZXNrdG9wIG5vdGlmaWNhdGlvbnMgbm90IGF2YWlsYWJsZSBpbiB5b3VyIGJyb3dzZXIuLicpO1xuICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKE5vdGlmaWNhdGlvbi5wZXJtaXNzaW9uICE9PSBcImdyYW50ZWRcIil7XG4gICAgICAgICAgTm90aWZpY2F0aW9uLnJlcXVlc3RQZXJtaXNzaW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgdmFyIG5vdGlmaWNhdGlvbiA9IG5ldyBOb3RpZmljYXRpb24odGl0bGUsIHtcbiAgICAgICAgICAgIGljb246J2h0dHBzOi8vbGgzLmdvb2dsZXVzZXJjb250ZW50LmNvbS8tYUNGaUs0YmFYWDQvVmptR0pvanNRX0kvQUFBQUFBQUFOSmcvaC1zTFZYMU01ekEvczQ4LUljNDIvZWdnc21hbGwucG5nJyxcbiAgICAgICAgICAgIGJvZHk6IGRlc2MsXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBSZW1vdmUgdGhlIG5vdGlmaWNhdGlvbiBmcm9tIE5vdGlmaWNhdGlvbiBDZW50ZXIgd2hlbiBjbGlja2VkLlxuICAgICAgICBub3RpZmljYXRpb24ub25jbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHdpbmRvdy5vcGVuKHVybCk7XG4gICAgICAgIH07XG4gICAgICAgIC8vIENhbGxiYWNrIGZ1bmN0aW9uIHdoZW4gdGhlIG5vdGlmaWNhdGlvbiBpcyBjbG9zZWQuXG4gICAgICAgIG5vdGlmaWNhdGlvbi5vbmNsb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdOb3RpZmljYXRpb24gY2xvc2VkJyk7XG4gICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1dKVxuIiwic3luYy5mYWN0b3J5KCd1c2VySW50ZXJhY3Rpb25Ob3RpZmljYXRpb24nLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIHRvYXN0ci5zdWNjZXNzKG1lc3NhZ2UsIFwiU3VjY2Vzc1wiKTtcbiAgICAgICAgfSxcbiAgICAgICAgd2FybjogZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIHRvYXN0ci53YXJuaW5nKG1lc3NhZ2UsIFwiSGV5XCIpO1xuICAgICAgICB9LFxuICAgICAgICBpbmZvOiBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgdG9hc3RyLmluZm8obWVzc2FnZSwgXCJGWUlcIik7XG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yOiBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgdG9hc3RyLmVycm9yKG1lc3NhZ2UsIFwiT2ggTm9cIik7XG4gICAgICAgIH1cbiAgICB9O1xufSk7XG4iLCJzeW5jLmZhY3RvcnkoJ3VzZXJJbnRlcmFjdGlvbk5vdGlmaWNhdGlvbicsIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MobWVzc2FnZSwgXCJTdWNjZXNzXCIpO1xuICAgICAgICB9LFxuICAgICAgICB3YXJuOiBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgdG9hc3RyLndhcm5pbmcobWVzc2FnZSwgXCJIZXlcIik7XG4gICAgICAgIH0sXG4gICAgICAgIGluZm86IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgICAgICB0b2FzdHIuaW5mbyhtZXNzYWdlLCBcIkZZSVwiKTtcbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgICAgICB0b2FzdHIuZXJyb3IobWVzc2FnZSwgXCJPaCBOb1wiKTtcbiAgICAgICAgfVxuICAgIH07XG59KTtcbiIsIlxuc3luYy5jb250cm9sbGVyKCd1cGxvYWREaWFsb2dDdHJsJywgWyckc2NvcGUnLCckdWliTW9kYWwnLCckbWREaWFsb2cnLCckbWRNZWRpYScsIGZ1bmN0aW9uICgkc2NvcGUsJHVpYk1vZGFsLCAkbWREaWFsb2csICRtZE1lZGlhKSB7XG5cblx0XHRcdFx0Ly9kZWNsYXJlIGdsb2JhbCBmdW5jdGlvbiBmb3Igc2hvcnRjdXRcblx0XHRcdFx0JHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdCRtZERpYWxvZy5oaWRlKCk7XG5cdFx0XHRcdH07XG5cdFx0ICAgICRzY29wZS5jdXN0b21GdWxsc2NyZWVuID0gJG1kTWVkaWEoJ3hzJykgfHwgJG1kTWVkaWEoJ3NtJyk7XG5cdFx0ICAgICRzY29wZS51cGxvYWQgPSBmdW5jdGlvbihldikge1xuXHRcdCAgICAgICRtZERpYWxvZy5zaG93KHtcblx0XHRcdFx0XHRcdHBhcmVudDogYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LmJvZHkpLFxuXHRcdCAgICAgICAgY29udHJvbGxlcjogRGlhbG9nQ29udHJvbGxlcixcblx0XHQgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvdXBsb2FkLnRwbC5odG1sJyxcblx0XHQgICAgICAgIHBhcmVudDogYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LmJvZHkpLFxuXHRcdCAgICAgICAgdGFyZ2V0RXZlbnQ6IGV2LFxuXHRcdCAgICAgICAgY2xpY2tPdXRzaWRlVG9DbG9zZTpmYWxzZVxuXHRcdCAgICAgIH0pXG5cdFx0ICAgICAgLnRoZW4oZnVuY3Rpb24oYW5zd2VyKSB7XG5cdFx0ICAgICAgICAgICAgJHNjb3BlLnN0YXR1cyA9ICdZb3Ugc2FpZCB0aGUgaW5mb3JtYXRpb24gd2FzIFwiJyArIGFuc3dlciArICdcIi4nO1xuXHRcdCAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcblx0XHQgICAgICAgICAgICAkc2NvcGUuc3RhdHVzID0gJ1lvdSBjYW5jZWxsZWQgdGhlIGRpYWxvZy4nO1xuXHRcdCAgICAgICAgICB9KTtcblx0XHQgICAgfTtcblx0XHRcdFx0ZnVuY3Rpb24gRGlhbG9nQ29udHJvbGxlcigkc2NvcGUsICRtZERpYWxvZykge1xuXHRcdFx0XHQgICRzY29wZS5oaWRlID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCAgICAkbWREaWFsb2cuaGlkZSgpO1xuXHRcdFx0XHQgIH07XG5cdFx0XHRcdCAgJHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHQgICAgJG1kRGlhbG9nLmNhbmNlbCgpO1xuXHRcdFx0XHQgIH07XG5cdFx0XHRcdCAgJHNjb3BlLmFuc3dlciA9IGZ1bmN0aW9uKGFuc3dlcikge1xuXHRcdFx0XHQgICAgJG1kRGlhbG9nLmhpZGUoYW5zd2VyKTtcblx0XHRcdFx0ICB9O1xuXHRcdFx0XHR9XG59XSk7XG5zeW5jLmNvbnRyb2xsZXIoJ3NoYXJlQ29udHJvbGxlcicsIFsnJHNjb3BlJywnJHVpYk1vZGFsJywnJG1kRGlhbG9nJywnJG1kTWVkaWEnLCd1cmxTaG9ydGVuZXInLCdTaGFyZScsJ1VzZXInLCBmdW5jdGlvbiAoJHNjb3BlLCR1aWJNb2RhbCwgJG1kRGlhbG9nLCAkbWRNZWRpYSx1cmxTaG9ydGVuZXIsU2hhcmUsVXNlcikge1xuXG5cdC8vZGVjbGFyZSBnbG9iYWwgZnVuY3Rpb24gZm9yIHNob3J0Y3V0XG5cdCRzY29wZS5jYW5jZWwgPSBmdW5jdGlvbigpIHtcblx0XHQkbWREaWFsb2cuaGlkZSgpO1xuXHR9O1xuXHQkc2NvcGUuY3VzdG9tRnVsbHNjcmVlbiA9ICRtZE1lZGlhKCd4cycpIHx8ICRtZE1lZGlhKCdzbScpO1xuXHQkc2NvcGUuc2hhcmUgPSBmdW5jdGlvbihldixmaWxlTmFtZSkge1xuXG5cdFx0JG1kRGlhbG9nLnNob3coe1xuXHRcdFx0cGFyZW50OiBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQuYm9keSksXG5cdFx0XHRjb250cm9sbGVyOiBEaWFsb2dDb250cm9sbGVyLFxuXHRcdFx0dGVtcGxhdGVVcmw6ICd2aWV3cy9zaGFyZS50cGwuaHRtbCcsXG5cdFx0XHRwYXJlbnQ6IGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5ib2R5KSxcblx0XHRcdHRhcmdldEV2ZW50OiBldixcblx0XHRcdGNsaWNrT3V0c2lkZVRvQ2xvc2U6ZmFsc2Vcblx0XHR9KVxuXHRcdC50aGVuKGZ1bmN0aW9uKGFuc3dlcikge1xuXHRcdFx0XHRcdCRzY29wZS5zdGF0dXMgPSAnWW91IHNhaWQgdGhlIGluZm9ybWF0aW9uIHdhcyBcIicgKyBhbnN3ZXIgKyAnXCIuJztcblx0XHRcdFx0fSwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0JHNjb3BlLnN0YXR1cyA9ICdZb3UgY2FuY2VsbGVkIHRoZSBkaWFsb2cuJztcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGZ1bmN0aW9uIERpYWxvZ0NvbnRyb2xsZXIoJHNjb3BlLCAkbWREaWFsb2cpIHtcblx0XHRcdFx0XHQvLyBjb25zb2xlLmxvZygnc2hhcmVkRmlsZScrIGZpbGVOYW1lKTtcblx0XHRcdFx0XHQkc2NvcGUuZ2V0RmlsZSA9IGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0XHRyZXR1cm4gJHNjb3BlLmZpbGU9dXJsU2hvcnRlbmVyLm1ha2VTaG9ydChmaWxlTmFtZSk7XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHQkc2NvcGUuaGlkZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0JG1kRGlhbG9nLmhpZGUoKTtcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdCRzY29wZS5jYW5jZWwgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdCRtZERpYWxvZy5jYW5jZWwoKTtcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdCRzY29wZS5hbnN3ZXIgPSBmdW5jdGlvbihhbnN3ZXIpIHtcblx0XHRcdFx0XHRcdCRtZERpYWxvZy5oaWRlKGFuc3dlcik7XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fVxuXG5cdH07XG5cblxuXG5cdCRzY29wZS5zaGFyZUZpbGUgPSBmdW5jdGlvbih2bSl7XG5cblx0XHR2YXIgZW1haWxzPXZtLmVtYWlscztcblx0XHR2YXIgZW1haWxfYXJyYXkgPSBlbWFpbHMuc3BsaXQoJywnKTtcblx0XHR2YXIgaTtcblx0XHRmb3IgKCBpPTA7IGkgPCBlbWFpbF9hcnJheS5sZW5ndGg7IGkrKyApIHtcblx0XHRcdC8vdmFsaWRhdGUgZWFjaCBlbWFpbCB0byBzaGFyZSB3aXRoXG5cdFx0XHRTaGFyZS5zaGFyZSh2bSlcblx0XHRcdC50aGVuKGZ1bmN0aW9uKHJlcyl7XG5cdFx0XHRcdGNvbnNvbGUubG9nKHJlcyk7XG5cdFx0XHR9KS5jYXRjaCgpO1xuXHRcdFx0Ly8gY29uc29sZS5sb2coZW1haWxfYXJyYXlbaV0pO1xuXG5cdFx0fVxuXHR9XG5cbn1dKTtcbiIsIi8qXG4gYW5ndWxhci1maWxlLXVwbG9hZCB2Mi4yLjBcbiBodHRwczovL2dpdGh1Yi5jb20vbmVydmdoL2FuZ3VsYXItZmlsZS11cGxvYWRcbiovXG5cbihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcImFuZ3VsYXItZmlsZS11cGxvYWRcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wiYW5ndWxhci1maWxlLXVwbG9hZFwiXSA9IGZhY3RvcnkoKTtcbn0pKHRoaXMsIGZ1bmN0aW9uKCkge1xucmV0dXJuIC8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9LFxuLyoqKioqKi8gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bG9hZGVkOiBmYWxzZVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0dmFyIF9pbnRlcm9wUmVxdWlyZSA9IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9ialtcImRlZmF1bHRcIl0gOiBvYmo7IH07XG5cblx0dmFyIENPTkZJRyA9IF9pbnRlcm9wUmVxdWlyZShfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKTtcblxuXHR2YXIgb3B0aW9ucyA9IF9pbnRlcm9wUmVxdWlyZShfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKTtcblxuXHR2YXIgc2VydmljZUZpbGVVcGxvYWRlciA9IF9pbnRlcm9wUmVxdWlyZShfX3dlYnBhY2tfcmVxdWlyZV9fKDMpKTtcblxuXHR2YXIgc2VydmljZUZpbGVMaWtlT2JqZWN0ID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oNCkpO1xuXG5cdHZhciBzZXJ2aWNlRmlsZUl0ZW0gPSBfaW50ZXJvcFJlcXVpcmUoX193ZWJwYWNrX3JlcXVpcmVfXyg1KSk7XG5cblx0dmFyIHNlcnZpY2VGaWxlRGlyZWN0aXZlID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oNikpO1xuXG5cdHZhciBzZXJ2aWNlRmlsZVNlbGVjdCA9IF9pbnRlcm9wUmVxdWlyZShfX3dlYnBhY2tfcmVxdWlyZV9fKDcpKTtcblxuXHR2YXIgc2VydmljZUZpbGVEcm9wID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oOCkpO1xuXG5cdHZhciBzZXJ2aWNlRmlsZU92ZXIgPSBfaW50ZXJvcFJlcXVpcmUoX193ZWJwYWNrX3JlcXVpcmVfXyg5KSk7XG5cblx0dmFyIGRpcmVjdGl2ZUZpbGVTZWxlY3QgPSBfaW50ZXJvcFJlcXVpcmUoX193ZWJwYWNrX3JlcXVpcmVfXygxMCkpO1xuXG5cdHZhciBkaXJlY3RpdmVGaWxlRHJvcCA9IF9pbnRlcm9wUmVxdWlyZShfX3dlYnBhY2tfcmVxdWlyZV9fKDExKSk7XG5cblx0dmFyIGRpcmVjdGl2ZUZpbGVPdmVyID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oMTIpKTtcblxuXHRhbmd1bGFyLm1vZHVsZShDT05GSUcubmFtZSwgW10pLnZhbHVlKFwiZmlsZVVwbG9hZGVyT3B0aW9uc1wiLCBvcHRpb25zKS5mYWN0b3J5KFwiRmlsZVVwbG9hZGVyXCIsIHNlcnZpY2VGaWxlVXBsb2FkZXIpLmZhY3RvcnkoXCJGaWxlTGlrZU9iamVjdFwiLCBzZXJ2aWNlRmlsZUxpa2VPYmplY3QpLmZhY3RvcnkoXCJGaWxlSXRlbVwiLCBzZXJ2aWNlRmlsZUl0ZW0pLmZhY3RvcnkoXCJGaWxlRGlyZWN0aXZlXCIsIHNlcnZpY2VGaWxlRGlyZWN0aXZlKS5mYWN0b3J5KFwiRmlsZVNlbGVjdFwiLCBzZXJ2aWNlRmlsZVNlbGVjdCkuZmFjdG9yeShcIkZpbGVEcm9wXCIsIHNlcnZpY2VGaWxlRHJvcCkuZmFjdG9yeShcIkZpbGVPdmVyXCIsIHNlcnZpY2VGaWxlT3ZlcikuZGlyZWN0aXZlKFwibnZGaWxlU2VsZWN0XCIsIGRpcmVjdGl2ZUZpbGVTZWxlY3QpLmRpcmVjdGl2ZShcIm52RmlsZURyb3BcIiwgZGlyZWN0aXZlRmlsZURyb3ApLmRpcmVjdGl2ZShcIm52RmlsZU92ZXJcIiwgZGlyZWN0aXZlRmlsZU92ZXIpLnJ1bihbXCJGaWxlVXBsb2FkZXJcIiwgXCJGaWxlTGlrZU9iamVjdFwiLCBcIkZpbGVJdGVtXCIsIFwiRmlsZURpcmVjdGl2ZVwiLCBcIkZpbGVTZWxlY3RcIiwgXCJGaWxlRHJvcFwiLCBcIkZpbGVPdmVyXCIsIGZ1bmN0aW9uIChGaWxlVXBsb2FkZXIsIEZpbGVMaWtlT2JqZWN0LCBGaWxlSXRlbSwgRmlsZURpcmVjdGl2ZSwgRmlsZVNlbGVjdCwgRmlsZURyb3AsIEZpbGVPdmVyKSB7XG5cdCAgICAvLyBvbmx5IGZvciBjb21wYXRpYmlsaXR5XG5cdCAgICBGaWxlVXBsb2FkZXIuRmlsZUxpa2VPYmplY3QgPSBGaWxlTGlrZU9iamVjdDtcblx0ICAgIEZpbGVVcGxvYWRlci5GaWxlSXRlbSA9IEZpbGVJdGVtO1xuXHQgICAgRmlsZVVwbG9hZGVyLkZpbGVEaXJlY3RpdmUgPSBGaWxlRGlyZWN0aXZlO1xuXHQgICAgRmlsZVVwbG9hZGVyLkZpbGVTZWxlY3QgPSBGaWxlU2VsZWN0O1xuXHQgICAgRmlsZVVwbG9hZGVyLkZpbGVEcm9wID0gRmlsZURyb3A7XG5cdCAgICBGaWxlVXBsb2FkZXIuRmlsZU92ZXIgPSBGaWxlT3Zlcjtcblx0fV0pO1xuXG4vKioqLyB9LFxuXG4vKiAxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IHtcblx0XHRcIm5hbWVcIjogXCJhbmd1bGFyRmlsZVVwbG9hZFwiXG5cdH07XG5cbi8qKiovIH0sXG4vKiAyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IHtcblx0ICAgIHVybDogXCIvXCIsXG5cdCAgICBhbGlhczogXCJmaWxlXCIsXG5cdCAgICBoZWFkZXJzOiB7J2F1dGhvcml6YXRpb24nOiAnQmVhcmVyIEJjN0RXUzdLS1JMdHhtZGRVWkkxVDFsWnUySjFZaFI4T0xYR1dOWm4nfSxcblx0ICAgIHF1ZXVlOiBbXSxcblx0ICAgIHByb2dyZXNzOiAwLFxuXHQgICAgYXV0b1VwbG9hZDogZmFsc2UsXG5cdCAgICByZW1vdmVBZnRlclVwbG9hZDogZmFsc2UsXG5cdCAgICBtZXRob2Q6IFwiUE9TVFwiLFxuXHQgICAgZmlsdGVyczogW10sXG5cdCAgICBmb3JtRGF0YTogW10sXG5cdCAgICBxdWV1ZUxpbWl0OiBOdW1iZXIuTUFYX1ZBTFVFLFxuXHQgICAgd2l0aENyZWRlbnRpYWxzOiBmYWxzZVxuXHR9O1xuXG4vKioqLyB9LFxuLyogMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0dmFyIF9pbnRlcm9wUmVxdWlyZSA9IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9ialtcImRlZmF1bHRcIl0gOiBvYmo7IH07XG5cblx0dmFyIF9jcmVhdGVDbGFzcyA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBrZXkgaW4gcHJvcHMpIHsgdmFyIHByb3AgPSBwcm9wc1trZXldOyBwcm9wLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChwcm9wLnZhbHVlKSBwcm9wLndyaXRhYmxlID0gdHJ1ZTsgfSBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKTsgfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KSgpO1xuXG5cdHZhciBfY2xhc3NDYWxsQ2hlY2sgPSBmdW5jdGlvbiAoaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfTtcblxuXHR2YXIgQ09ORklHID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oMSkpO1xuXG5cdHZhciBjb3B5ID0gYW5ndWxhci5jb3B5O1xuXHR2YXIgZXh0ZW5kID0gYW5ndWxhci5leHRlbmQ7XG5cdHZhciBmb3JFYWNoID0gYW5ndWxhci5mb3JFYWNoO1xuXHR2YXIgaXNPYmplY3QgPSBhbmd1bGFyLmlzT2JqZWN0O1xuXHR2YXIgaXNOdW1iZXIgPSBhbmd1bGFyLmlzTnVtYmVyO1xuXHR2YXIgaXNEZWZpbmVkID0gYW5ndWxhci5pc0RlZmluZWQ7XG5cdHZhciBpc0FycmF5ID0gYW5ndWxhci5pc0FycmF5O1xuXHR2YXIgZWxlbWVudCA9IGFuZ3VsYXIuZWxlbWVudDtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChmaWxlVXBsb2FkZXJPcHRpb25zLCAkcm9vdFNjb3BlLCAkaHR0cCwgJHdpbmRvdywgRmlsZUxpa2VPYmplY3QsIEZpbGVJdGVtKSB7XG5cdCAgICB2YXIgRmlsZSA9ICR3aW5kb3cuRmlsZTtcblx0ICAgIHZhciBGb3JtRGF0YSA9ICR3aW5kb3cuRm9ybURhdGE7XG5cblx0ICAgIHZhciBGaWxlVXBsb2FkZXIgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqXG5cdCAgICAgICAgICogUFVCTElDXG5cdCAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKiovXG5cdCAgICAgICAgLyoqXG5cdCAgICAgICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBGaWxlVXBsb2FkZXJcblx0ICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG5cdCAgICAgICAgICogQGNvbnN0cnVjdG9yXG5cdCAgICAgICAgICovXG5cblx0ICAgICAgICBmdW5jdGlvbiBGaWxlVXBsb2FkZXIob3B0aW9ucykge1xuXHQgICAgICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRmlsZVVwbG9hZGVyKTtcblxuXHQgICAgICAgICAgICB2YXIgc2V0dGluZ3MgPSBjb3B5KGZpbGVVcGxvYWRlck9wdGlvbnMpO1xuXG5cdCAgICAgICAgICAgIGV4dGVuZCh0aGlzLCBzZXR0aW5ncywgb3B0aW9ucywge1xuXHQgICAgICAgICAgICAgICAgaXNVcGxvYWRpbmc6IGZhbHNlLFxuXHQgICAgICAgICAgICAgICAgX25leHRJbmRleDogMCxcblx0ICAgICAgICAgICAgICAgIF9mYWlsRmlsdGVySW5kZXg6IC0xLFxuXHQgICAgICAgICAgICAgICAgX2RpcmVjdGl2ZXM6IHsgc2VsZWN0OiBbXSwgZHJvcDogW10sIG92ZXI6IFtdIH1cblx0ICAgICAgICAgICAgfSk7XG5cblx0ICAgICAgICAgICAgLy8gYWRkIGRlZmF1bHQgZmlsdGVyc1xuXHQgICAgICAgICAgICB0aGlzLmZpbHRlcnMudW5zaGlmdCh7IG5hbWU6IFwicXVldWVMaW1pdFwiLCBmbjogdGhpcy5fcXVldWVMaW1pdEZpbHRlciB9KTtcblx0ICAgICAgICAgICAgdGhpcy5maWx0ZXJzLnVuc2hpZnQoeyBuYW1lOiBcImZvbGRlclwiLCBmbjogdGhpcy5fZm9sZGVyRmlsdGVyIH0pO1xuXHQgICAgICAgIH1cblxuXHQgICAgICAgIF9jcmVhdGVDbGFzcyhGaWxlVXBsb2FkZXIsIHtcblx0ICAgICAgICAgICAgYWRkVG9RdWV1ZToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBBZGRzIGl0ZW1zIHRvIHRoZSBxdWV1ZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtGaWxlfEhUTUxJbnB1dEVsZW1lbnR8T2JqZWN0fEZpbGVMaXN0fEFycmF5PE9iamVjdD59IGZpbGVzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0FycmF5PEZ1bmN0aW9uPnxTdHJpbmd9IGZpbHRlcnNcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYWRkVG9RdWV1ZShmaWxlcywgb3B0aW9ucywgZmlsdGVycykge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cblx0ICAgICAgICAgICAgICAgICAgICB2YXIgbGlzdCA9IHRoaXMuaXNBcnJheUxpa2VPYmplY3QoZmlsZXMpID8gZmlsZXMgOiBbZmlsZXNdO1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBhcnJheU9mRmlsdGVycyA9IHRoaXMuX2dldEZpbHRlcnMoZmlsdGVycyk7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gdGhpcy5xdWV1ZS5sZW5ndGg7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGFkZGVkRmlsZUl0ZW1zID0gW107XG5cblx0ICAgICAgICAgICAgICAgICAgICBmb3JFYWNoKGxpc3QsIGZ1bmN0aW9uIChzb21lIC8qe0ZpbGV8SFRNTElucHV0RWxlbWVudHxPYmplY3R9Ki8pIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBuZXcgRmlsZUxpa2VPYmplY3Qoc29tZSk7XG5cblx0ICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLl9pc1ZhbGlkRmlsZSh0ZW1wLCBhcnJheU9mRmlsdGVycywgb3B0aW9ucykpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaWxlSXRlbSA9IG5ldyBGaWxlSXRlbShfdGhpcywgc29tZSwgb3B0aW9ucyk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRlZEZpbGVJdGVtcy5wdXNoKGZpbGVJdGVtKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnF1ZXVlLnB1c2goZmlsZUl0ZW0pO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX29uQWZ0ZXJBZGRpbmdGaWxlKGZpbGVJdGVtKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaWx0ZXIgPSBhcnJheU9mRmlsdGVyc1tfdGhpcy5fZmFpbEZpbHRlckluZGV4XTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9vbldoZW5BZGRpbmdGaWxlRmFpbGVkKHRlbXAsIGZpbHRlciwgb3B0aW9ucyk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICB9KTtcblxuXHQgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnF1ZXVlLmxlbmd0aCAhPT0gY291bnQpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fb25BZnRlckFkZGluZ0FsbChhZGRlZEZpbGVJdGVtcyk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvZ3Jlc3MgPSB0aGlzLl9nZXRUb3RhbFByb2dyZXNzKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVuZGVyKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYXV0b1VwbG9hZCkgdGhpcy51cGxvYWRBbGwoKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgcmVtb3ZlRnJvbVF1ZXVlOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJlbW92ZSBpdGVtcyBmcm9tIHRoZSBxdWV1ZS4gUmVtb3ZlIGxhc3Q6IGluZGV4ID0gLTFcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZUl0ZW18TnVtYmVyfSB2YWx1ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVGcm9tUXVldWUodmFsdWUpIHtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmdldEluZGV4T2ZJdGVtKHZhbHVlKTtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IHRoaXMucXVldWVbaW5kZXhdO1xuXHQgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLmlzVXBsb2FkaW5nKSBpdGVtLmNhbmNlbCgpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMucXVldWUuc3BsaWNlKGluZGV4LCAxKTtcblx0ICAgICAgICAgICAgICAgICAgICBpdGVtLl9kZXN0cm95KCk7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9ncmVzcyA9IHRoaXMuX2dldFRvdGFsUHJvZ3Jlc3MoKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgY2xlYXJRdWV1ZToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDbGVhcnMgdGhlIHF1ZXVlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNsZWFyUXVldWUoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHRoaXMucXVldWUubGVuZ3RoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucXVldWVbMF0ucmVtb3ZlKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvZ3Jlc3MgPSAwO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICB1cGxvYWRJdGVtOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFVwbG9hZHMgYSBpdGVtIGZyb20gdGhlIHF1ZXVlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGVJdGVtfE51bWJlcn0gdmFsdWVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdXBsb2FkSXRlbSh2YWx1ZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMuZ2V0SW5kZXhPZkl0ZW0odmFsdWUpO1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBpdGVtID0gdGhpcy5xdWV1ZVtpbmRleF07XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIHRyYW5zcG9ydCA9IHRoaXMuaXNIVE1MNSA/IFwiX3hoclRyYW5zcG9ydFwiIDogXCJfaWZyYW1lVHJhbnNwb3J0XCI7XG5cblx0ICAgICAgICAgICAgICAgICAgICBpdGVtLl9wcmVwYXJlVG9VcGxvYWRpbmcoKTtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc1VwbG9hZGluZykge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICAgICAgICAgICAgfXRoaXMuaXNVcGxvYWRpbmcgPSB0cnVlO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXNbdHJhbnNwb3J0XShpdGVtKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgY2FuY2VsSXRlbToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDYW5jZWxzIHVwbG9hZGluZyBvZiBpdGVtIGZyb20gdGhlIHF1ZXVlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGVJdGVtfE51bWJlcn0gdmFsdWVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2FuY2VsSXRlbSh2YWx1ZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMuZ2V0SW5kZXhPZkl0ZW0odmFsdWUpO1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBpdGVtID0gdGhpcy5xdWV1ZVtpbmRleF07XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIHByb3AgPSB0aGlzLmlzSFRNTDUgPyBcIl94aHJcIiA6IFwiX2Zvcm1cIjtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbSAmJiBpdGVtLmlzVXBsb2FkaW5nKSBpdGVtW3Byb3BdLmFib3J0KCk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIHVwbG9hZEFsbDoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBVcGxvYWRzIGFsbCBub3QgdXBsb2FkZWQgaXRlbXMgb2YgcXVldWVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdXBsb2FkQWxsKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBpdGVtcyA9IHRoaXMuZ2V0Tm90VXBsb2FkZWRJdGVtcygpLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWl0ZW0uaXNVcGxvYWRpbmc7XG5cdCAgICAgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKCFpdGVtcy5sZW5ndGgpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgICAgICAgICAgIH1mb3JFYWNoKGl0ZW1zLCBmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5fcHJlcGFyZVRvVXBsb2FkaW5nKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgICAgICAgICAgaXRlbXNbMF0udXBsb2FkKCk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIGNhbmNlbEFsbDoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDYW5jZWxzIGFsbCB1cGxvYWRzXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNhbmNlbEFsbCgpIHtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbXMgPSB0aGlzLmdldE5vdFVwbG9hZGVkSXRlbXMoKTtcblx0ICAgICAgICAgICAgICAgICAgICBmb3JFYWNoKGl0ZW1zLCBmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5jYW5jZWwoKTtcblx0ICAgICAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgaXNGaWxlOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJldHVybnMgXCJ0cnVlXCIgaWYgdmFsdWUgYW4gaW5zdGFuY2Ugb2YgRmlsZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMge0Jvb2xlYW59XG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc0ZpbGUodmFsdWUpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci5pc0ZpbGUodmFsdWUpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBpc0ZpbGVMaWtlT2JqZWN0OiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJldHVybnMgXCJ0cnVlXCIgaWYgdmFsdWUgYW4gaW5zdGFuY2Ugb2YgRmlsZUxpa2VPYmplY3Rcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaXNGaWxlTGlrZU9iamVjdCh2YWx1ZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLmlzRmlsZUxpa2VPYmplY3QodmFsdWUpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBpc0FycmF5TGlrZU9iamVjdDoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBSZXR1cm5zIFwidHJ1ZVwiIGlmIHZhbHVlIGlzIGFycmF5IGxpa2Ugb2JqZWN0XG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaXNBcnJheUxpa2VPYmplY3QodmFsdWUpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci5pc0FycmF5TGlrZU9iamVjdCh2YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIGdldEluZGV4T2ZJdGVtOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJldHVybnMgYSBpbmRleCBvZiBpdGVtIGZyb20gdGhlIHF1ZXVlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0l0ZW18TnVtYmVyfSB2YWx1ZVxuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMge051bWJlcn1cblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SW5kZXhPZkl0ZW0odmFsdWUpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXNOdW1iZXIodmFsdWUpID8gdmFsdWUgOiB0aGlzLnF1ZXVlLmluZGV4T2YodmFsdWUpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBnZXROb3RVcGxvYWRlZEl0ZW1zOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJldHVybnMgbm90IHVwbG9hZGVkIGl0ZW1zXG5cdCAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7QXJyYXl9XG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldE5vdFVwbG9hZGVkSXRlbXMoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucXVldWUuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhaXRlbS5pc1VwbG9hZGVkO1xuXHQgICAgICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBnZXRSZWFkeUl0ZW1zOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJldHVybnMgaXRlbXMgcmVhZHkgZm9yIHVwbG9hZFxuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMge0FycmF5fVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRSZWFkeUl0ZW1zKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnF1ZXVlLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5pc1JlYWR5ICYmICFpdGVtLmlzVXBsb2FkaW5nO1xuXHQgICAgICAgICAgICAgICAgICAgIH0pLnNvcnQoZnVuY3Rpb24gKGl0ZW0xLCBpdGVtMikge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbTEuaW5kZXggLSBpdGVtMi5pbmRleDtcblx0ICAgICAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgZGVzdHJveToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBEZXN0cm95cyBpbnN0YW5jZSBvZiBGaWxlVXBsb2FkZXJcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgZm9yRWFjaCh0aGlzLl9kaXJlY3RpdmVzLCBmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGZvckVhY2goX3RoaXMuX2RpcmVjdGl2ZXNba2V5XSwgZnVuY3Rpb24gKG9iamVjdCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmRlc3Ryb3koKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIG9uQWZ0ZXJBZGRpbmdBbGw6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogQ2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7QXJyYXl9IGZpbGVJdGVtc1xuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvbkFmdGVyQWRkaW5nQWxsKGZpbGVJdGVtcykge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgb25BZnRlckFkZGluZ0ZpbGU6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogQ2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZUl0ZW19IGZpbGVJdGVtXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uQWZ0ZXJBZGRpbmdGaWxlKGZpbGVJdGVtKSB7fVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBvbldoZW5BZGRpbmdGaWxlRmFpbGVkOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGV8T2JqZWN0fSBpdGVtXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gZmlsdGVyXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvbldoZW5BZGRpbmdGaWxlRmFpbGVkKGl0ZW0sIGZpbHRlciwgb3B0aW9ucykge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgb25CZWZvcmVVcGxvYWRJdGVtOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGVJdGVtfSBmaWxlSXRlbVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvbkJlZm9yZVVwbG9hZEl0ZW0oZmlsZUl0ZW0pIHt9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIG9uUHJvZ3Jlc3NJdGVtOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGVJdGVtfSBmaWxlSXRlbVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHByb2dyZXNzXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uUHJvZ3Jlc3NJdGVtKGZpbGVJdGVtLCBwcm9ncmVzcykge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgb25Qcm9ncmVzc0FsbDoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHByb2dyZXNzXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uUHJvZ3Jlc3NBbGwocHJvZ3Jlc3MpIHt9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIG9uU3VjY2Vzc0l0ZW06IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogQ2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZUl0ZW19IGl0ZW1cblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7Kn0gcmVzcG9uc2Vcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzdGF0dXNcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBoZWFkZXJzXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uU3VjY2Vzc0l0ZW0oaXRlbSwgcmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycykge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgb25FcnJvckl0ZW06IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogQ2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZUl0ZW19IGl0ZW1cblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7Kn0gcmVzcG9uc2Vcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzdGF0dXNcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBoZWFkZXJzXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uRXJyb3JJdGVtKGl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpIHt9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIG9uQ2FuY2VsSXRlbToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtGaWxlSXRlbX0gaXRlbVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSByZXNwb25zZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHN0YXR1c1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGhlYWRlcnNcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25DYW5jZWxJdGVtKGl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpIHt9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIG9uQ29tcGxldGVJdGVtOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGVJdGVtfSBpdGVtXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyp9IHJlc3BvbnNlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gc3RhdHVzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaGVhZGVyc1xuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNvbXBsZXRlSXRlbShpdGVtLCByZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKSB7fVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBvbkNvbXBsZXRlQWxsOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ29tcGxldGVBbGwoKSB7fVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfZ2V0VG90YWxQcm9ncmVzczoge1xuXHQgICAgICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKipcblx0ICAgICAgICAgICAgICAgICAqIFBSSVZBVEVcblx0ICAgICAgICAgICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqL1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBSZXR1cm5zIHRoZSB0b3RhbCBwcm9ncmVzc1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IFt2YWx1ZV1cblx0ICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtOdW1iZXJ9XG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfZ2V0VG90YWxQcm9ncmVzcyh2YWx1ZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlbW92ZUFmdGVyVXBsb2FkKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZSB8fCAwO1xuXHQgICAgICAgICAgICAgICAgICAgIH12YXIgbm90VXBsb2FkZWQgPSB0aGlzLmdldE5vdFVwbG9hZGVkSXRlbXMoKS5sZW5ndGg7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIHVwbG9hZGVkID0gbm90VXBsb2FkZWQgPyB0aGlzLnF1ZXVlLmxlbmd0aCAtIG5vdFVwbG9hZGVkIDogdGhpcy5xdWV1ZS5sZW5ndGg7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIHJhdGlvID0gMTAwIC8gdGhpcy5xdWV1ZS5sZW5ndGg7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnQgPSAodmFsdWUgfHwgMCkgKiByYXRpbyAvIDEwMDtcblxuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLnJvdW5kKHVwbG9hZGVkICogcmF0aW8gKyBjdXJyZW50KTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX2dldEZpbHRlcnM6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmV0dXJucyBhcnJheSBvZiBmaWx0ZXJzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0FycmF5PEZ1bmN0aW9uPnxTdHJpbmd9IGZpbHRlcnNcblx0ICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtBcnJheTxGdW5jdGlvbj59XG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfZ2V0RmlsdGVycyhmaWx0ZXJzKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKCFmaWx0ZXJzKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbHRlcnM7XG5cdCAgICAgICAgICAgICAgICAgICAgfWlmIChpc0FycmF5KGZpbHRlcnMpKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmaWx0ZXJzO1xuXHQgICAgICAgICAgICAgICAgICAgIH12YXIgbmFtZXMgPSBmaWx0ZXJzLm1hdGNoKC9bXlxccyxdKy9nKTtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5maWx0ZXJzLmZpbHRlcihmdW5jdGlvbiAoZmlsdGVyKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuYW1lcy5pbmRleE9mKGZpbHRlci5uYW1lKSAhPT0gLTE7XG5cdCAgICAgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9yZW5kZXI6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogVXBkYXRlcyBodG1sXG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVuZGVyKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIGlmICghJHJvb3RTY29wZS4kJHBoYXNlKSAkcm9vdFNjb3BlLiRhcHBseSgpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfZm9sZGVyRmlsdGVyOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJldHVybnMgXCJ0cnVlXCIgaWYgaXRlbSBpcyBhIGZpbGUgKG5vdCBmb2xkZXIpXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGV8RmlsZUxpa2VPYmplY3R9IGl0ZW1cblx0ICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2ZvbGRlckZpbHRlcihpdGVtKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEhKGl0ZW0uc2l6ZSB8fCBpdGVtLnR5cGUpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfcXVldWVMaW1pdEZpbHRlcjoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBSZXR1cm5zIFwidHJ1ZVwiIGlmIHRoZSBsaW1pdCBoYXMgbm90IGJlZW4gcmVhY2hlZFxuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMge0Jvb2xlYW59XG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcXVldWVMaW1pdEZpbHRlcigpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5xdWV1ZS5sZW5ndGggPCB0aGlzLnF1ZXVlTGltaXQ7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9pc1ZhbGlkRmlsZToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBSZXR1cm5zIFwidHJ1ZVwiIGlmIGZpbGUgcGFzcyBhbGwgZmlsdGVyc1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtGaWxlfE9iamVjdH0gZmlsZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtBcnJheTxGdW5jdGlvbj59IGZpbHRlcnNcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9pc1ZhbGlkRmlsZShmaWxlLCBmaWx0ZXJzLCBvcHRpb25zKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuX2ZhaWxGaWx0ZXJJbmRleCA9IC0xO1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiAhZmlsdGVycy5sZW5ndGggPyB0cnVlIDogZmlsdGVycy5ldmVyeShmdW5jdGlvbiAoZmlsdGVyKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9mYWlsRmlsdGVySW5kZXgrKztcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpbHRlci5mbi5jYWxsKF90aGlzLCBmaWxlLCBvcHRpb25zKTtcblx0ICAgICAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX2lzU3VjY2Vzc0NvZGU6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogQ2hlY2tzIHdoZXRoZXIgdXBsb2FkIHN1Y2Nlc3NmdWxcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzdGF0dXNcblx0ICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2lzU3VjY2Vzc0NvZGUoc3RhdHVzKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0YXR1cyA+PSAyMDAgJiYgc3RhdHVzIDwgMzAwIHx8IHN0YXR1cyA9PT0gMzA0O1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfdHJhbnNmb3JtUmVzcG9uc2U6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogVHJhbnNmb3JtcyB0aGUgc2VydmVyIHJlc3BvbnNlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyp9IHJlc3BvbnNlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaGVhZGVyc1xuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMgeyp9XG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfdHJhbnNmb3JtUmVzcG9uc2UocmVzcG9uc2UsIGhlYWRlcnMpIHtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgaGVhZGVyc0dldHRlciA9IHRoaXMuX2hlYWRlcnNHZXR0ZXIoaGVhZGVycyk7XG5cdCAgICAgICAgICAgICAgICAgICAgZm9yRWFjaCgkaHR0cC5kZWZhdWx0cy50cmFuc2Zvcm1SZXNwb25zZSwgZnVuY3Rpb24gKHRyYW5zZm9ybUZuKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gdHJhbnNmb3JtRm4ocmVzcG9uc2UsIGhlYWRlcnNHZXR0ZXIpO1xuXHQgICAgICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX3BhcnNlSGVhZGVyczoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBQYXJzZWQgcmVzcG9uc2UgaGVhZGVyc1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIGhlYWRlcnNcblx0ICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtPYmplY3R9XG5cdCAgICAgICAgICAgICAgICAgKiBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIuanMvYmxvYi9tYXN0ZXIvc3JjL25nL2h0dHAuanNcblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9wYXJzZUhlYWRlcnMoaGVhZGVycykge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBwYXJzZWQgPSB7fSxcblx0ICAgICAgICAgICAgICAgICAgICAgICAga2V5LFxuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YWwsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGk7XG5cblx0ICAgICAgICAgICAgICAgICAgICBpZiAoIWhlYWRlcnMpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlZDtcblx0ICAgICAgICAgICAgICAgICAgICB9Zm9yRWFjaChoZWFkZXJzLnNwbGl0KFwiXFxuXCIpLCBmdW5jdGlvbiAobGluZSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBpID0gbGluZS5pbmRleE9mKFwiOlwiKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAga2V5ID0gbGluZS5zbGljZSgwLCBpKS50cmltKCkudG9Mb3dlckNhc2UoKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdmFsID0gbGluZS5zbGljZShpICsgMSkudHJpbSgpO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXkpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlZFtrZXldID0gcGFyc2VkW2tleV0gPyBwYXJzZWRba2V5XSArIFwiLCBcIiArIHZhbCA6IHZhbDtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgIH0pO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlZDtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX2hlYWRlcnNHZXR0ZXI6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmV0dXJucyBmdW5jdGlvbiB0aGF0IHJldHVybnMgaGVhZGVyc1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IHBhcnNlZEhlYWRlcnNcblx0ICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn1cblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oZWFkZXJzR2V0dGVyKHBhcnNlZEhlYWRlcnMpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKG5hbWUpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWUpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZWRIZWFkZXJzW25hbWUudG9Mb3dlckNhc2UoKV0gfHwgbnVsbDtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VkSGVhZGVycztcblx0ICAgICAgICAgICAgICAgICAgICB9O1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfeGhyVHJhbnNwb3J0OiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFRoZSBYTUxIdHRwUmVxdWVzdCB0cmFuc3BvcnRcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZUl0ZW19IGl0ZW1cblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF94aHJUcmFuc3BvcnQoaXRlbSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cblx0ICAgICAgICAgICAgICAgICAgICB2YXIgeGhyID0gaXRlbS5feGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGZvcm0gPSBuZXcgRm9ybURhdGEoKTtcblxuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuX29uQmVmb3JlVXBsb2FkSXRlbShpdGVtKTtcblxuXHQgICAgICAgICAgICAgICAgICAgIGZvckVhY2goaXRlbS5mb3JtRGF0YSwgZnVuY3Rpb24gKG9iaikge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBmb3JFYWNoKG9iaiwgZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm0uYXBwZW5kKGtleSwgdmFsdWUpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICAgICAgICB9KTtcblxuXHQgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgaXRlbS5fZmlsZS5zaXplICE9IFwibnVtYmVyXCIpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlRoZSBmaWxlIHNwZWNpZmllZCBpcyBubyBsb25nZXIgdmFsaWRcIik7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXG5cdCAgICAgICAgICAgICAgICAgICAgZm9ybS5hcHBlbmQoaXRlbS5hbGlhcywgaXRlbS5fZmlsZSwgaXRlbS5maWxlLm5hbWUpO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgeGhyLnVwbG9hZC5vbnByb2dyZXNzID0gZnVuY3Rpb24gKGV2ZW50KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcm9ncmVzcyA9IE1hdGgucm91bmQoZXZlbnQubGVuZ3RoQ29tcHV0YWJsZSA/IGV2ZW50LmxvYWRlZCAqIDEwMCAvIGV2ZW50LnRvdGFsIDogMCk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9vblByb2dyZXNzSXRlbShpdGVtLCBwcm9ncmVzcyk7XG5cdCAgICAgICAgICAgICAgICAgICAgfTtcblxuXHQgICAgICAgICAgICAgICAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoZWFkZXJzID0gX3RoaXMuX3BhcnNlSGVhZGVycyh4aHIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSBfdGhpcy5fdHJhbnNmb3JtUmVzcG9uc2UoeGhyLnJlc3BvbnNlLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdpc3QgPSBfdGhpcy5faXNTdWNjZXNzQ29kZSh4aHIuc3RhdHVzKSA/IFwiU3VjY2Vzc1wiIDogXCJFcnJvclwiO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWV0aG9kID0gXCJfb25cIiArIGdpc3QgKyBcIkl0ZW1cIjtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXNbbWV0aG9kXShpdGVtLCByZXNwb25zZSwgeGhyLnN0YXR1cywgaGVhZGVycyk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9vbkNvbXBsZXRlSXRlbShpdGVtLCByZXNwb25zZSwgeGhyLnN0YXR1cywgaGVhZGVycyk7XG5cdCAgICAgICAgICAgICAgICAgICAgfTtcblxuXHQgICAgICAgICAgICAgICAgICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaGVhZGVycyA9IF90aGlzLl9wYXJzZUhlYWRlcnMoeGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gX3RoaXMuX3RyYW5zZm9ybVJlc3BvbnNlKHhoci5yZXNwb25zZSwgaGVhZGVycyk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9vbkVycm9ySXRlbShpdGVtLCByZXNwb25zZSwgeGhyLnN0YXR1cywgaGVhZGVycyk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9vbkNvbXBsZXRlSXRlbShpdGVtLCByZXNwb25zZSwgeGhyLnN0YXR1cywgaGVhZGVycyk7XG5cdCAgICAgICAgICAgICAgICAgICAgfTtcblxuXHQgICAgICAgICAgICAgICAgICAgIHhoci5vbmFib3J0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaGVhZGVycyA9IF90aGlzLl9wYXJzZUhlYWRlcnMoeGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gX3RoaXMuX3RyYW5zZm9ybVJlc3BvbnNlKHhoci5yZXNwb25zZSwgaGVhZGVycyk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9vbkNhbmNlbEl0ZW0oaXRlbSwgcmVzcG9uc2UsIHhoci5zdGF0dXMsIGhlYWRlcnMpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5fb25Db21wbGV0ZUl0ZW0oaXRlbSwgcmVzcG9uc2UsIHhoci5zdGF0dXMsIGhlYWRlcnMpO1xuXHQgICAgICAgICAgICAgICAgICAgIH07XG5cblx0ICAgICAgICAgICAgICAgICAgICB4aHIub3BlbihpdGVtLm1ldGhvZCwgaXRlbS51cmwsIHRydWUpO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgeGhyLndpdGhDcmVkZW50aWFscyA9IGl0ZW0ud2l0aENyZWRlbnRpYWxzO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgZm9yRWFjaChpdGVtLmhlYWRlcnMsIGZ1bmN0aW9uICh2YWx1ZSwgbmFtZSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihuYW1lLCB2YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgfSk7XG5cblx0ICAgICAgICAgICAgICAgICAgICB4aHIuc2VuZChmb3JtKTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZW5kZXIoKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX2lmcmFtZVRyYW5zcG9ydDoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBUaGUgSUZyYW1lIHRyYW5zcG9ydFxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtGaWxlSXRlbX0gaXRlbVxuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2lmcmFtZVRyYW5zcG9ydChpdGVtKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuXHQgICAgICAgICAgICAgICAgICAgIHZhciBmb3JtID0gZWxlbWVudChcIjxmb3JtIHN0eWxlPVxcXCJkaXNwbGF5OiBub25lO1xcXCIgLz5cIik7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGlmcmFtZSA9IGVsZW1lbnQoXCI8aWZyYW1lIG5hbWU9XFxcImlmcmFtZVRyYW5zcG9ydFwiICsgRGF0ZS5ub3coKSArIFwiXFxcIj5cIik7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGlucHV0ID0gaXRlbS5faW5wdXQ7XG5cblx0ICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5fZm9ybSkgaXRlbS5fZm9ybS5yZXBsYWNlV2l0aChpbnB1dCk7IC8vIHJlbW92ZSBvbGQgZm9ybVxuXHQgICAgICAgICAgICAgICAgICAgIGl0ZW0uX2Zvcm0gPSBmb3JtOyAvLyBzYXZlIGxpbmsgdG8gbmV3IGZvcm1cblxuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuX29uQmVmb3JlVXBsb2FkSXRlbShpdGVtKTtcblxuXHQgICAgICAgICAgICAgICAgICAgIGlucHV0LnByb3AoXCJuYW1lXCIsIGl0ZW0uYWxpYXMpO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgZm9yRWFjaChpdGVtLmZvcm1EYXRhLCBmdW5jdGlvbiAob2JqKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGZvckVhY2gob2JqLCBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnRfID0gZWxlbWVudChcIjxpbnB1dCB0eXBlPVxcXCJoaWRkZW5cXFwiIG5hbWU9XFxcIlwiICsga2V5ICsgXCJcXFwiIC8+XCIpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudF8udmFsKHZhbHVlKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm0uYXBwZW5kKGVsZW1lbnRfKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgICAgICAgICAgfSk7XG5cblx0ICAgICAgICAgICAgICAgICAgICBmb3JtLnByb3Aoe1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb246IGl0ZW0udXJsLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IGlmcmFtZS5wcm9wKFwibmFtZVwiKSxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgZW5jdHlwZTogXCJtdWx0aXBhcnQvZm9ybS1kYXRhXCIsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGVuY29kaW5nOiBcIm11bHRpcGFydC9mb3JtLWRhdGFcIiAvLyBvbGQgSUVcblx0ICAgICAgICAgICAgICAgICAgICB9KTtcblxuXHQgICAgICAgICAgICAgICAgICAgIGlmcmFtZS5iaW5kKFwibG9hZFwiLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciBodG1sID0gXCJcIjtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXR1cyA9IDIwMDtcblxuXHQgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRml4IGZvciBsZWdhY3kgSUUgYnJvd3NlcnMgdGhhdCBsb2FkcyBpbnRlcm5hbCBlcnJvciBwYWdlXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3aGVuIGZhaWxlZCBXUyByZXNwb25zZSByZWNlaXZlZC4gSW4gY29uc2VxdWVuY2UgaWZyYW1lXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb250ZW50IGFjY2VzcyBkZW5pZWQgZXJyb3IgaXMgdGhyb3duIGJlY291c2UgdHJ5aW5nIHRvXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhY2Nlc3MgY3Jvc3MgZG9tYWluIHBhZ2UuIFdoZW4gc3VjaCB0aGluZyBvY2N1cnMgbm90aWZ5aW5nXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3aXRoIGVtcHR5IHJlc3BvbnNlIG9iamVjdC4gU2VlIG1vcmUgaW5mbyBhdDpcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTUxMzYyL2FjY2Vzcy1pcy1kZW5pZWQtZXJyb3Itb24tYWNjZXNzaW5nLWlmcmFtZS1kb2N1bWVudC1vYmplY3Rcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdGUgdGhhdCBpZiBub24gc3RhbmRhcmQgNHh4IG9yIDV4eCBlcnJvciBjb2RlIHJldHVybmVkXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmcm9tIFdTIHRoZW4gcmVzcG9uc2UgY29udGVudCBjYW4gYmUgYWNjZXNzZWQgd2l0aG91dCBlcnJvclxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYnV0ICdYSFInIHN0YXR1cyBiZWNvbWVzIDIwMC4gSW4gb3JkZXIgdG8gYXZvaWQgY29uZnVzaW9uXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXR1cm5pbmcgcmVzcG9uc2UgdmlhIHNhbWUgJ3N1Y2Nlc3MnIGV2ZW50IGhhbmRsZXIuXG5cblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZpeGVkIGFuZ3VsYXIuY29udGVudHMoKSBmb3IgaWZyYW1lc1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCA9IGlmcmFtZVswXS5jb250ZW50RG9jdW1lbnQuYm9keS5pbm5lckhUTUw7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGluIGNhc2Ugd2UgcnVuIGludG8gdGhlIGFjY2Vzcy1pcy1kZW5pZWQgZXJyb3Igb3Igd2UgaGF2ZSBhbm90aGVyIGVycm9yIG9uIHRoZSBzZXJ2ZXIgc2lkZVxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gKGludGVudGlvbmFsIDUwMCw0MC4uLiBlcnJvcnMpLCB3ZSBhdCBsZWFzdCBzYXkgJ3NvbWV0aGluZyB3ZW50IHdyb25nJyAtPiA1MDBcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1cyA9IDUwMDtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciB4aHIgPSB7IHJlc3BvbnNlOiBodG1sLCBzdGF0dXM6IHN0YXR1cywgZHVtbXk6IHRydWUgfTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhlYWRlcnMgPSB7fTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gX3RoaXMuX3RyYW5zZm9ybVJlc3BvbnNlKHhoci5yZXNwb25zZSwgaGVhZGVycyk7XG5cblx0ICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX29uU3VjY2Vzc0l0ZW0oaXRlbSwgcmVzcG9uc2UsIHhoci5zdGF0dXMsIGhlYWRlcnMpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5fb25Db21wbGV0ZUl0ZW0oaXRlbSwgcmVzcG9uc2UsIHhoci5zdGF0dXMsIGhlYWRlcnMpO1xuXHQgICAgICAgICAgICAgICAgICAgIH0pO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgZm9ybS5hYm9ydCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHhociA9IHsgc3RhdHVzOiAwLCBkdW1teTogdHJ1ZSB9O1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaGVhZGVycyA9IHt9O1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2U7XG5cblx0ICAgICAgICAgICAgICAgICAgICAgICAgaWZyYW1lLnVuYmluZChcImxvYWRcIikucHJvcChcInNyY1wiLCBcImphdmFzY3JpcHQ6ZmFsc2U7XCIpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBmb3JtLnJlcGxhY2VXaXRoKGlucHV0KTtcblxuXHQgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5fb25DYW5jZWxJdGVtKGl0ZW0sIHJlc3BvbnNlLCB4aHIuc3RhdHVzLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX29uQ29tcGxldGVJdGVtKGl0ZW0sIHJlc3BvbnNlLCB4aHIuc3RhdHVzLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICB9O1xuXG5cdCAgICAgICAgICAgICAgICAgICAgaW5wdXQuYWZ0ZXIoZm9ybSk7XG5cdCAgICAgICAgICAgICAgICAgICAgZm9ybS5hcHBlbmQoaW5wdXQpLmFwcGVuZChpZnJhbWUpO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgZm9ybVswXS5zdWJtaXQoKTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZW5kZXIoKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX29uV2hlbkFkZGluZ0ZpbGVGYWlsZWQ6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogSW5uZXIgY2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZXxPYmplY3R9IGl0ZW1cblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBmaWx0ZXJcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfb25XaGVuQWRkaW5nRmlsZUZhaWxlZChpdGVtLCBmaWx0ZXIsIG9wdGlvbnMpIHtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLm9uV2hlbkFkZGluZ0ZpbGVGYWlsZWQoaXRlbSwgZmlsdGVyLCBvcHRpb25zKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX29uQWZ0ZXJBZGRpbmdGaWxlOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIElubmVyIGNhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGVJdGVtfSBpdGVtXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkFmdGVyQWRkaW5nRmlsZShpdGVtKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkFmdGVyQWRkaW5nRmlsZShpdGVtKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX29uQWZ0ZXJBZGRpbmdBbGw6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogSW5uZXIgY2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7QXJyYXk8RmlsZUl0ZW0+fSBpdGVtc1xuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfb25BZnRlckFkZGluZ0FsbChpdGVtcykge1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMub25BZnRlckFkZGluZ0FsbChpdGVtcyk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9vbkJlZm9yZVVwbG9hZEl0ZW06IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogIElubmVyIGNhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGVJdGVtfSBpdGVtXG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfb25CZWZvcmVVcGxvYWRJdGVtKGl0ZW0pIHtcblx0ICAgICAgICAgICAgICAgICAgICBpdGVtLl9vbkJlZm9yZVVwbG9hZCgpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMub25CZWZvcmVVcGxvYWRJdGVtKGl0ZW0pO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfb25Qcm9ncmVzc0l0ZW06IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogSW5uZXIgY2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZUl0ZW19IGl0ZW1cblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBwcm9ncmVzc1xuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX29uUHJvZ3Jlc3NJdGVtKGl0ZW0sIHByb2dyZXNzKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIHRvdGFsID0gdGhpcy5fZ2V0VG90YWxQcm9ncmVzcyhwcm9ncmVzcyk7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9ncmVzcyA9IHRvdGFsO1xuXHQgICAgICAgICAgICAgICAgICAgIGl0ZW0uX29uUHJvZ3Jlc3MocHJvZ3Jlc3MpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMub25Qcm9ncmVzc0l0ZW0oaXRlbSwgcHJvZ3Jlc3MpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMub25Qcm9ncmVzc0FsbCh0b3RhbCk7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVuZGVyKCk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9vblN1Y2Nlc3NJdGVtOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIElubmVyIGNhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGVJdGVtfSBpdGVtXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyp9IHJlc3BvbnNlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gc3RhdHVzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaGVhZGVyc1xuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX29uU3VjY2Vzc0l0ZW0oaXRlbSwgcmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycykge1xuXHQgICAgICAgICAgICAgICAgICAgIGl0ZW0uX29uU3VjY2VzcyhyZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLm9uU3VjY2Vzc0l0ZW0oaXRlbSwgcmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycyk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9vbkVycm9ySXRlbToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBJbm5lciBjYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtGaWxlSXRlbX0gaXRlbVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSByZXNwb25zZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHN0YXR1c1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGhlYWRlcnNcblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkVycm9ySXRlbShpdGVtLCByZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaXRlbS5fb25FcnJvcihyZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRXJyb3JJdGVtKGl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfb25DYW5jZWxJdGVtOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIElubmVyIGNhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGVJdGVtfSBpdGVtXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyp9IHJlc3BvbnNlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gc3RhdHVzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaGVhZGVyc1xuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX29uQ2FuY2VsSXRlbShpdGVtLCByZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaXRlbS5fb25DYW5jZWwocmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycyk7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkNhbmNlbEl0ZW0oaXRlbSwgcmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycyk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9vbkNvbXBsZXRlSXRlbToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBJbm5lciBjYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtGaWxlSXRlbX0gaXRlbVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSByZXNwb25zZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHN0YXR1c1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGhlYWRlcnNcblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkNvbXBsZXRlSXRlbShpdGVtLCByZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaXRlbS5fb25Db21wbGV0ZShyZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQ29tcGxldGVJdGVtKGl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIG5leHRJdGVtID0gdGhpcy5nZXRSZWFkeUl0ZW1zKClbMF07XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1VwbG9hZGluZyA9IGZhbHNlO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKGlzRGVmaW5lZChuZXh0SXRlbSkpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgbmV4dEl0ZW0udXBsb2FkKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQ29tcGxldGVBbGwoKTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2dyZXNzID0gdGhpcy5fZ2V0VG90YWxQcm9ncmVzcygpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlbmRlcigpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSwge1xuXHQgICAgICAgICAgICBpc0ZpbGU6IHtcblx0ICAgICAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqXG5cdCAgICAgICAgICAgICAgICAgKiBTVEFUSUNcblx0ICAgICAgICAgICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqL1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBSZXR1cm5zIFwidHJ1ZVwiIGlmIHZhbHVlIGFuIGluc3RhbmNlIG9mIEZpbGVcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaXNGaWxlKHZhbHVlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEZpbGUgJiYgdmFsdWUgaW5zdGFuY2VvZiBGaWxlO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBpc0ZpbGVMaWtlT2JqZWN0OiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJldHVybnMgXCJ0cnVlXCIgaWYgdmFsdWUgYW4gaW5zdGFuY2Ugb2YgRmlsZUxpa2VPYmplY3Rcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaXNGaWxlTGlrZU9iamVjdCh2YWx1ZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIEZpbGVMaWtlT2JqZWN0O1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBpc0FycmF5TGlrZU9iamVjdDoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBSZXR1cm5zIFwidHJ1ZVwiIGlmIHZhbHVlIGlzIGFycmF5IGxpa2Ugb2JqZWN0XG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaXNBcnJheUxpa2VPYmplY3QodmFsdWUpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXNPYmplY3QodmFsdWUpICYmIFwibGVuZ3RoXCIgaW4gdmFsdWU7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIGluaGVyaXQ6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogSW5oZXJpdHMgYSB0YXJnZXQgKENsYXNzXzEpIGJ5IGEgc291cmNlIChDbGFzc18yKVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gdGFyZ2V0XG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBzb3VyY2Vcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaW5oZXJpdCh0YXJnZXQsIHNvdXJjZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHRhcmdldC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHNvdXJjZS5wcm90b3R5cGUpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRhcmdldC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSB0YXJnZXQ7XG5cdCAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnN1cGVyXyA9IHNvdXJjZTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXG5cdCAgICAgICAgcmV0dXJuIEZpbGVVcGxvYWRlcjtcblx0ICAgIH0pKCk7XG5cblx0ICAgIC8qKioqKioqKioqKioqKioqKioqKioqXG5cdCAgICAgKiBQVUJMSUNcblx0ICAgICAqKioqKioqKioqKioqKioqKioqKioqL1xuXHQgICAgLyoqXG5cdCAgICAgKiBDaGVja3MgYSBzdXBwb3J0IHRoZSBodG1sNSB1cGxvYWRlclxuXHQgICAgICogQHJldHVybnMge0Jvb2xlYW59XG5cdCAgICAgKiBAcmVhZG9ubHlcblx0ICAgICAqL1xuXHQgICAgRmlsZVVwbG9hZGVyLnByb3RvdHlwZS5pc0hUTUw1ID0gISEoRmlsZSAmJiBGb3JtRGF0YSk7XG5cdCAgICAvKioqKioqKioqKioqKioqKioqKioqKlxuXHQgICAgICogU1RBVElDXG5cdCAgICAgKioqKioqKioqKioqKioqKioqKioqKi9cblx0ICAgIC8qKlxuXHQgICAgICogQGJvcnJvd3MgRmlsZVVwbG9hZGVyLnByb3RvdHlwZS5pc0hUTUw1XG5cdCAgICAgKi9cblx0ICAgIEZpbGVVcGxvYWRlci5pc0hUTUw1ID0gRmlsZVVwbG9hZGVyLnByb3RvdHlwZS5pc0hUTUw1O1xuXG5cdCAgICByZXR1cm4gRmlsZVVwbG9hZGVyO1xuXHR9O1xuXG5cdG1vZHVsZS5leHBvcnRzLiRpbmplY3QgPSBbXCJmaWxlVXBsb2FkZXJPcHRpb25zXCIsIFwiJHJvb3RTY29wZVwiLCBcIiRodHRwXCIsIFwiJHdpbmRvd1wiLCBcIkZpbGVMaWtlT2JqZWN0XCIsIFwiRmlsZUl0ZW1cIl07XG5cbi8qKiovIH0sXG4vKiA0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblxuXHR2YXIgX2ludGVyb3BSZXF1aXJlID0gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqW1wiZGVmYXVsdFwiXSA6IG9iajsgfTtcblxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGtleSBpbiBwcm9wcykgeyB2YXIgcHJvcCA9IHByb3BzW2tleV07IHByb3AuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKHByb3AudmFsdWUpIHByb3Aud3JpdGFibGUgPSB0cnVlOyB9IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpOyB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0pKCk7XG5cblx0dmFyIF9jbGFzc0NhbGxDaGVjayA9IGZ1bmN0aW9uIChpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9O1xuXG5cdHZhciBDT05GSUcgPSBfaW50ZXJvcFJlcXVpcmUoX193ZWJwYWNrX3JlcXVpcmVfXygxKSk7XG5cblx0dmFyIGNvcHkgPSBhbmd1bGFyLmNvcHk7XG5cdHZhciBpc0VsZW1lbnQgPSBhbmd1bGFyLmlzRWxlbWVudDtcblx0dmFyIGlzU3RyaW5nID0gYW5ndWxhci5pc1N0cmluZztcblxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBGaWxlTGlrZU9iamVjdCA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgLyoqXG5cdCAgICAgICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBGaWxlTGlrZU9iamVjdFxuXHQgICAgICAgICAqIEBwYXJhbSB7RmlsZXxIVE1MSW5wdXRFbGVtZW50fE9iamVjdH0gZmlsZU9ySW5wdXRcblx0ICAgICAgICAgKiBAY29uc3RydWN0b3Jcblx0ICAgICAgICAgKi9cblxuXHQgICAgICAgIGZ1bmN0aW9uIEZpbGVMaWtlT2JqZWN0KGZpbGVPcklucHV0KSB7XG5cdCAgICAgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBGaWxlTGlrZU9iamVjdCk7XG5cblx0ICAgICAgICAgICAgdmFyIGlzSW5wdXQgPSBpc0VsZW1lbnQoZmlsZU9ySW5wdXQpO1xuXHQgICAgICAgICAgICB2YXIgZmFrZVBhdGhPck9iamVjdCA9IGlzSW5wdXQgPyBmaWxlT3JJbnB1dC52YWx1ZSA6IGZpbGVPcklucHV0O1xuXHQgICAgICAgICAgICB2YXIgcG9zdGZpeCA9IGlzU3RyaW5nKGZha2VQYXRoT3JPYmplY3QpID8gXCJGYWtlUGF0aFwiIDogXCJPYmplY3RcIjtcblx0ICAgICAgICAgICAgdmFyIG1ldGhvZCA9IFwiX2NyZWF0ZUZyb21cIiArIHBvc3RmaXg7XG5cdCAgICAgICAgICAgIHRoaXNbbWV0aG9kXShmYWtlUGF0aE9yT2JqZWN0KTtcblx0ICAgICAgICB9XG5cblx0ICAgICAgICBfY3JlYXRlQ2xhc3MoRmlsZUxpa2VPYmplY3QsIHtcblx0ICAgICAgICAgICAgX2NyZWF0ZUZyb21GYWtlUGF0aDoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDcmVhdGVzIGZpbGUgbGlrZSBvYmplY3QgZnJvbSBmYWtlIHBhdGggc3RyaW5nXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2NyZWF0ZUZyb21GYWtlUGF0aChwYXRoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXN0TW9kaWZpZWREYXRlID0gbnVsbDtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLnNpemUgPSBudWxsO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMudHlwZSA9IFwibGlrZS9cIiArIHBhdGguc2xpY2UocGF0aC5sYXN0SW5kZXhPZihcIi5cIikgKyAxKS50b0xvd2VyQ2FzZSgpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMubmFtZSA9IHBhdGguc2xpY2UocGF0aC5sYXN0SW5kZXhPZihcIi9cIikgKyBwYXRoLmxhc3RJbmRleE9mKFwiXFxcXFwiKSArIDIpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfY3JlYXRlRnJvbU9iamVjdDoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDcmVhdGVzIGZpbGUgbGlrZSBvYmplY3QgZnJvbSBvYmplY3Rcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZXxGaWxlTGlrZU9iamVjdH0gb2JqZWN0XG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfY3JlYXRlRnJvbU9iamVjdChvYmplY3QpIHtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmxhc3RNb2RpZmllZERhdGUgPSBjb3B5KG9iamVjdC5sYXN0TW9kaWZpZWREYXRlKTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLnNpemUgPSBvYmplY3Quc2l6ZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLnR5cGUgPSBvYmplY3QudHlwZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLm5hbWUgPSBvYmplY3QubmFtZTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXG5cdCAgICAgICAgcmV0dXJuIEZpbGVMaWtlT2JqZWN0O1xuXHQgICAgfSkoKTtcblxuXHQgICAgcmV0dXJuIEZpbGVMaWtlT2JqZWN0O1xuXHR9O1xuXG5cdG1vZHVsZS5leHBvcnRzLiRpbmplY3QgPSBbXTtcblxuLyoqKi8gfSxcbi8qIDUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdHZhciBfaW50ZXJvcFJlcXVpcmUgPSBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmpbXCJkZWZhdWx0XCJdIDogb2JqOyB9O1xuXG5cdHZhciBfY3JlYXRlQ2xhc3MgPSAoZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIga2V5IGluIHByb3BzKSB7IHZhciBwcm9wID0gcHJvcHNba2V5XTsgcHJvcC5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAocHJvcC52YWx1ZSkgcHJvcC53cml0YWJsZSA9IHRydWU7IH0gT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcyk7IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTtcblxuXHR2YXIgX2NsYXNzQ2FsbENoZWNrID0gZnVuY3Rpb24gKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH07XG5cblx0dmFyIENPTkZJRyA9IF9pbnRlcm9wUmVxdWlyZShfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKTtcblxuXHR2YXIgY29weSA9IGFuZ3VsYXIuY29weTtcblx0dmFyIGV4dGVuZCA9IGFuZ3VsYXIuZXh0ZW5kO1xuXHR2YXIgZWxlbWVudCA9IGFuZ3VsYXIuZWxlbWVudDtcblx0dmFyIGlzRWxlbWVudCA9IGFuZ3VsYXIuaXNFbGVtZW50O1xuXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCRjb21waWxlLCBGaWxlTGlrZU9iamVjdCkge1xuXHQgICAgdmFyIEZpbGVJdGVtID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIEZpbGVJdGVtXG5cdCAgICAgICAgICogQHBhcmFtIHtGaWxlVXBsb2FkZXJ9IHVwbG9hZGVyXG5cdCAgICAgICAgICogQHBhcmFtIHtGaWxlfEhUTUxJbnB1dEVsZW1lbnR8T2JqZWN0fSBzb21lXG5cdCAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICAgICAgICAgKiBAY29uc3RydWN0b3Jcblx0ICAgICAgICAgKi9cblxuXHQgICAgICAgIGZ1bmN0aW9uIEZpbGVJdGVtKHVwbG9hZGVyLCBzb21lLCBvcHRpb25zKSB7XG5cdCAgICAgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBGaWxlSXRlbSk7XG5cblx0ICAgICAgICAgICAgdmFyIGlzSW5wdXQgPSBpc0VsZW1lbnQoc29tZSk7XG5cdCAgICAgICAgICAgIHZhciBpbnB1dCA9IGlzSW5wdXQgPyBlbGVtZW50KHNvbWUpIDogbnVsbDtcblx0ICAgICAgICAgICAgdmFyIGZpbGUgPSAhaXNJbnB1dCA/IHNvbWUgOiBudWxsO1xuXG5cdCAgICAgICAgICAgIGV4dGVuZCh0aGlzLCB7XG5cdCAgICAgICAgICAgICAgICB1cmw6IHVwbG9hZGVyLnVybCxcblx0ICAgICAgICAgICAgICAgIGFsaWFzOiB1cGxvYWRlci5hbGlhcyxcblx0ICAgICAgICAgICAgICAgIGhlYWRlcnM6IGNvcHkodXBsb2FkZXIuaGVhZGVycyksXG5cdCAgICAgICAgICAgICAgICBmb3JtRGF0YTogY29weSh1cGxvYWRlci5mb3JtRGF0YSksXG5cdCAgICAgICAgICAgICAgICByZW1vdmVBZnRlclVwbG9hZDogdXBsb2FkZXIucmVtb3ZlQWZ0ZXJVcGxvYWQsXG5cdCAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHVwbG9hZGVyLndpdGhDcmVkZW50aWFscyxcblx0ICAgICAgICAgICAgICAgIG1ldGhvZDogdXBsb2FkZXIubWV0aG9kXG5cdCAgICAgICAgICAgIH0sIG9wdGlvbnMsIHtcblx0ICAgICAgICAgICAgICAgIHVwbG9hZGVyOiB1cGxvYWRlcixcblx0ICAgICAgICAgICAgICAgIGZpbGU6IG5ldyBGaWxlTGlrZU9iamVjdChzb21lKSxcblx0ICAgICAgICAgICAgICAgIGlzUmVhZHk6IGZhbHNlLFxuXHQgICAgICAgICAgICAgICAgaXNVcGxvYWRpbmc6IGZhbHNlLFxuXHQgICAgICAgICAgICAgICAgaXNVcGxvYWRlZDogZmFsc2UsXG5cdCAgICAgICAgICAgICAgICBpc1N1Y2Nlc3M6IGZhbHNlLFxuXHQgICAgICAgICAgICAgICAgaXNDYW5jZWw6IGZhbHNlLFxuXHQgICAgICAgICAgICAgICAgaXNFcnJvcjogZmFsc2UsXG5cdCAgICAgICAgICAgICAgICBwcm9ncmVzczogMCxcblx0ICAgICAgICAgICAgICAgIGluZGV4OiBudWxsLFxuXHQgICAgICAgICAgICAgICAgX2ZpbGU6IGZpbGUsXG5cdCAgICAgICAgICAgICAgICBfaW5wdXQ6IGlucHV0XG5cdCAgICAgICAgICAgIH0pO1xuXG5cdCAgICAgICAgICAgIGlmIChpbnB1dCkgdGhpcy5fcmVwbGFjZU5vZGUoaW5wdXQpO1xuXHQgICAgICAgIH1cblxuXHQgICAgICAgIF9jcmVhdGVDbGFzcyhGaWxlSXRlbSwge1xuXHQgICAgICAgICAgICB1cGxvYWQ6IHtcblx0ICAgICAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqXG5cdCAgICAgICAgICAgICAgICAgKiBQVUJMSUNcblx0ICAgICAgICAgICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqL1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBVcGxvYWRzIGEgRmlsZUl0ZW1cblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdXBsb2FkKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBsb2FkZXIudXBsb2FkSXRlbSh0aGlzKTtcblx0ICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBsb2FkZXIuX29uQ29tcGxldGVJdGVtKHRoaXMsIFwiXCIsIDAsIFtdKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGxvYWRlci5fb25FcnJvckl0ZW0odGhpcywgXCJcIiwgMCwgW10pO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgY2FuY2VsOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENhbmNlbHMgdXBsb2FkaW5nIG9mIEZpbGVJdGVtXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNhbmNlbCgpIHtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLnVwbG9hZGVyLmNhbmNlbEl0ZW0odGhpcyk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIHJlbW92ZToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBSZW1vdmVzIGEgRmlsZUl0ZW1cblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMudXBsb2FkZXIucmVtb3ZlRnJvbVF1ZXVlKHRoaXMpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBvbkJlZm9yZVVwbG9hZDoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25CZWZvcmVVcGxvYWQoKSB7fVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBvblByb2dyZXNzOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gcHJvZ3Jlc3Ncblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uUHJvZ3Jlc3MocHJvZ3Jlc3MpIHt9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIG9uU3VjY2Vzczoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSByZXNwb25zZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHN0YXR1c1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGhlYWRlcnNcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25TdWNjZXNzKHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpIHt9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIG9uRXJyb3I6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogQ2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7Kn0gcmVzcG9uc2Vcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzdGF0dXNcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBoZWFkZXJzXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uRXJyb3IocmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycykge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgb25DYW5jZWw6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogQ2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7Kn0gcmVzcG9uc2Vcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzdGF0dXNcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBoZWFkZXJzXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ2FuY2VsKHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpIHt9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIG9uQ29tcGxldGU6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogQ2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7Kn0gcmVzcG9uc2Vcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzdGF0dXNcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBoZWFkZXJzXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ29tcGxldGUocmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycykge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX29uQmVmb3JlVXBsb2FkOiB7XG5cdCAgICAgICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKlxuXHQgICAgICAgICAgICAgICAgICogUFJJVkFURVxuXHQgICAgICAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKiovXG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIElubmVyIGNhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkJlZm9yZVVwbG9hZCgpIHtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzUmVhZHkgPSB0cnVlO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNVcGxvYWRpbmcgPSB0cnVlO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNVcGxvYWRlZCA9IGZhbHNlO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNTdWNjZXNzID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0NhbmNlbCA9IGZhbHNlO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNFcnJvciA9IGZhbHNlO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvZ3Jlc3MgPSAwO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMub25CZWZvcmVVcGxvYWQoKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX29uUHJvZ3Jlc3M6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogSW5uZXIgY2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBwcm9ncmVzc1xuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX29uUHJvZ3Jlc3MocHJvZ3Jlc3MpIHtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2dyZXNzID0gcHJvZ3Jlc3M7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5vblByb2dyZXNzKHByb2dyZXNzKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX29uU3VjY2Vzczoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBJbm5lciBjYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSByZXNwb25zZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHN0YXR1c1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGhlYWRlcnNcblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9vblN1Y2Nlc3MocmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycykge1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNSZWFkeSA9IGZhbHNlO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNVcGxvYWRpbmcgPSBmYWxzZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzVXBsb2FkZWQgPSB0cnVlO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNTdWNjZXNzID0gdHJ1ZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQ2FuY2VsID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0Vycm9yID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9ncmVzcyA9IDEwMDtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmluZGV4ID0gbnVsbDtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLm9uU3VjY2VzcyhyZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX29uRXJyb3I6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogSW5uZXIgY2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7Kn0gcmVzcG9uc2Vcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzdGF0dXNcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBoZWFkZXJzXG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfb25FcnJvcihyZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1JlYWR5ID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1VwbG9hZGluZyA9IGZhbHNlO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNVcGxvYWRlZCA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1N1Y2Nlc3MgPSBmYWxzZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQ2FuY2VsID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0Vycm9yID0gdHJ1ZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2dyZXNzID0gMDtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmluZGV4ID0gbnVsbDtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRXJyb3IocmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycyk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9vbkNhbmNlbDoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBJbm5lciBjYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSByZXNwb25zZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHN0YXR1c1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGhlYWRlcnNcblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkNhbmNlbChyZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1JlYWR5ID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1VwbG9hZGluZyA9IGZhbHNlO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNVcGxvYWRlZCA9IGZhbHNlO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNTdWNjZXNzID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0NhbmNlbCA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0Vycm9yID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9ncmVzcyA9IDA7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmRleCA9IG51bGw7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkNhbmNlbChyZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX29uQ29tcGxldGU6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogSW5uZXIgY2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7Kn0gcmVzcG9uc2Vcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzdGF0dXNcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBoZWFkZXJzXG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfb25Db21wbGV0ZShyZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkNvbXBsZXRlKHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpO1xuXHQgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlbW92ZUFmdGVyVXBsb2FkKSB0aGlzLnJlbW92ZSgpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfZGVzdHJveToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBEZXN0cm95cyBhIEZpbGVJdGVtXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9kZXN0cm95KCkge1xuXHQgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9pbnB1dCkgdGhpcy5faW5wdXQucmVtb3ZlKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2Zvcm0pIHRoaXMuX2Zvcm0ucmVtb3ZlKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuX2Zvcm07XG5cdCAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuX2lucHV0O1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfcHJlcGFyZVRvVXBsb2FkaW5nOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFByZXBhcmVzIHRvIHVwbG9hZGluZ1xuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX3ByZXBhcmVUb1VwbG9hZGluZygpIHtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmluZGV4ID0gdGhpcy5pbmRleCB8fCArK3RoaXMudXBsb2FkZXIuX25leHRJbmRleDtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzUmVhZHkgPSB0cnVlO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfcmVwbGFjZU5vZGU6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmVwbGFjZXMgaW5wdXQgZWxlbWVudCBvbiBoaXMgY2xvbmVcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7SlFMaXRlfGpRdWVyeX0gaW5wdXRcblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZXBsYWNlTm9kZShpbnB1dCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBjbG9uZSA9ICRjb21waWxlKGlucHV0LmNsb25lKCkpKGlucHV0LnNjb3BlKCkpO1xuXHQgICAgICAgICAgICAgICAgICAgIGNsb25lLnByb3AoXCJ2YWx1ZVwiLCBudWxsKTsgLy8gRkYgZml4XG5cdCAgICAgICAgICAgICAgICAgICAgaW5wdXQuY3NzKFwiZGlzcGxheVwiLCBcIm5vbmVcIik7XG5cdCAgICAgICAgICAgICAgICAgICAgaW5wdXQuYWZ0ZXIoY2xvbmUpOyAvLyByZW1vdmUganF1ZXJ5IGRlcGVuZGVuY3lcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXG5cdCAgICAgICAgcmV0dXJuIEZpbGVJdGVtO1xuXHQgICAgfSkoKTtcblxuXHQgICAgcmV0dXJuIEZpbGVJdGVtO1xuXHR9O1xuXG5cdG1vZHVsZS5leHBvcnRzLiRpbmplY3QgPSBbXCIkY29tcGlsZVwiLCBcIkZpbGVMaWtlT2JqZWN0XCJdO1xuXG4vKioqLyB9LFxuLyogNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0dmFyIF9pbnRlcm9wUmVxdWlyZSA9IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9ialtcImRlZmF1bHRcIl0gOiBvYmo7IH07XG5cblx0dmFyIF9jcmVhdGVDbGFzcyA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBrZXkgaW4gcHJvcHMpIHsgdmFyIHByb3AgPSBwcm9wc1trZXldOyBwcm9wLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChwcm9wLnZhbHVlKSBwcm9wLndyaXRhYmxlID0gdHJ1ZTsgfSBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKTsgfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KSgpO1xuXG5cdHZhciBfY2xhc3NDYWxsQ2hlY2sgPSBmdW5jdGlvbiAoaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfTtcblxuXHR2YXIgQ09ORklHID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oMSkpO1xuXG5cdHZhciBleHRlbmQgPSBhbmd1bGFyLmV4dGVuZDtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBGaWxlRGlyZWN0aXZlID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBDcmVhdGVzIGluc3RhbmNlIG9mIHtGaWxlRGlyZWN0aXZlfSBvYmplY3Rcblx0ICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zLnVwbG9hZGVyXG5cdCAgICAgICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gb3B0aW9ucy5lbGVtZW50XG5cdCAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMuZXZlbnRzXG5cdCAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IG9wdGlvbnMucHJvcFxuXHQgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuXHQgICAgICAgICAqL1xuXG5cdCAgICAgICAgZnVuY3Rpb24gRmlsZURpcmVjdGl2ZShvcHRpb25zKSB7XG5cdCAgICAgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBGaWxlRGlyZWN0aXZlKTtcblxuXHQgICAgICAgICAgICBleHRlbmQodGhpcywgb3B0aW9ucyk7XG5cdCAgICAgICAgICAgIHRoaXMudXBsb2FkZXIuX2RpcmVjdGl2ZXNbdGhpcy5wcm9wXS5wdXNoKHRoaXMpO1xuXHQgICAgICAgICAgICB0aGlzLl9zYXZlTGlua3MoKTtcblx0ICAgICAgICAgICAgdGhpcy5iaW5kKCk7XG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgX2NyZWF0ZUNsYXNzKEZpbGVEaXJlY3RpdmUsIHtcblx0ICAgICAgICAgICAgYmluZDoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBCaW5kcyBldmVudHMgaGFuZGxlc1xuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLmV2ZW50cykge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJvcCA9IHRoaXMuZXZlbnRzW2tleV07XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5iaW5kKGtleSwgdGhpc1twcm9wXSk7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICB1bmJpbmQ6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogVW5iaW5kcyBldmVudHMgaGFuZGxlc1xuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMuZXZlbnRzKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC51bmJpbmQoa2V5LCB0aGlzLmV2ZW50c1trZXldKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIGRlc3Ryb3k6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogRGVzdHJveXMgZGlyZWN0aXZlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy51cGxvYWRlci5fZGlyZWN0aXZlc1t0aGlzLnByb3BdLmluZGV4T2YodGhpcyk7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy51cGxvYWRlci5fZGlyZWN0aXZlc1t0aGlzLnByb3BdLnNwbGljZShpbmRleCwgMSk7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy51bmJpbmQoKTtcblx0ICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLmVsZW1lbnQgPSBudWxsO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfc2F2ZUxpbmtzOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFNhdmVzIGxpbmtzIHRvIGZ1bmN0aW9uc1xuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX3NhdmVMaW5rcygpIHtcblx0ICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5ldmVudHMpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByb3AgPSB0aGlzLmV2ZW50c1trZXldO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW3Byb3BdID0gdGhpc1twcm9wXS5iaW5kKHRoaXMpO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXG5cdCAgICAgICAgcmV0dXJuIEZpbGVEaXJlY3RpdmU7XG5cdCAgICB9KSgpO1xuXG5cdCAgICAvKipcblx0ICAgICAqIE1hcCBvZiBldmVudHNcblx0ICAgICAqIEB0eXBlIHtPYmplY3R9XG5cdCAgICAgKi9cblx0ICAgIEZpbGVEaXJlY3RpdmUucHJvdG90eXBlLmV2ZW50cyA9IHt9O1xuXG5cdCAgICByZXR1cm4gRmlsZURpcmVjdGl2ZTtcblx0fTtcblxuXHRtb2R1bGUuZXhwb3J0cy4kaW5qZWN0ID0gW107XG5cbi8qKiovIH0sXG4vKiA3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblxuXHR2YXIgX2ludGVyb3BSZXF1aXJlID0gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqW1wiZGVmYXVsdFwiXSA6IG9iajsgfTtcblxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGtleSBpbiBwcm9wcykgeyB2YXIgcHJvcCA9IHByb3BzW2tleV07IHByb3AuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKHByb3AudmFsdWUpIHByb3Aud3JpdGFibGUgPSB0cnVlOyB9IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpOyB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0pKCk7XG5cblx0dmFyIF9nZXQgPSBmdW5jdGlvbiBnZXQob2JqZWN0LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpIHsgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgcHJvcGVydHkpOyBpZiAoZGVzYyA9PT0gdW5kZWZpbmVkKSB7IHZhciBwYXJlbnQgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqZWN0KTsgaWYgKHBhcmVudCA9PT0gbnVsbCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9IGVsc2UgeyByZXR1cm4gZ2V0KHBhcmVudCwgcHJvcGVydHksIHJlY2VpdmVyKTsgfSB9IGVsc2UgaWYgKFwidmFsdWVcIiBpbiBkZXNjICYmIGRlc2Mud3JpdGFibGUpIHsgcmV0dXJuIGRlc2MudmFsdWU7IH0gZWxzZSB7IHZhciBnZXR0ZXIgPSBkZXNjLmdldDsgaWYgKGdldHRlciA9PT0gdW5kZWZpbmVkKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gcmV0dXJuIGdldHRlci5jYWxsKHJlY2VpdmVyKTsgfSB9O1xuXG5cdHZhciBfaW5oZXJpdHMgPSBmdW5jdGlvbiAoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfTtcblxuXHR2YXIgX2NsYXNzQ2FsbENoZWNrID0gZnVuY3Rpb24gKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH07XG5cblx0dmFyIENPTkZJRyA9IF9pbnRlcm9wUmVxdWlyZShfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKTtcblxuXHR2YXIgZXh0ZW5kID0gYW5ndWxhci5leHRlbmQ7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoRmlsZURpcmVjdGl2ZSkge1xuXHQgICAgdmFyIEZpbGVTZWxlY3QgPSAoZnVuY3Rpb24gKF9GaWxlRGlyZWN0aXZlKSB7XG5cdCAgICAgICAgLyoqXG5cdCAgICAgICAgICogQ3JlYXRlcyBpbnN0YW5jZSBvZiB7RmlsZVNlbGVjdH0gb2JqZWN0XG5cdCAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICAgICAgICAgKiBAY29uc3RydWN0b3Jcblx0ICAgICAgICAgKi9cblxuXHQgICAgICAgIGZ1bmN0aW9uIEZpbGVTZWxlY3Qob3B0aW9ucykge1xuXHQgICAgICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRmlsZVNlbGVjdCk7XG5cblx0ICAgICAgICAgICAgdmFyIGV4dGVuZGVkT3B0aW9ucyA9IGV4dGVuZChvcHRpb25zLCB7XG5cdCAgICAgICAgICAgICAgICAvLyBNYXAgb2YgZXZlbnRzXG5cdCAgICAgICAgICAgICAgICBldmVudHM6IHtcblx0ICAgICAgICAgICAgICAgICAgICAkZGVzdHJveTogXCJkZXN0cm95XCIsXG5cdCAgICAgICAgICAgICAgICAgICAgY2hhbmdlOiBcIm9uQ2hhbmdlXCJcblx0ICAgICAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgICAgICAvLyBOYW1lIG9mIHByb3BlcnR5IGluc2lkZSB1cGxvYWRlci5fZGlyZWN0aXZlIG9iamVjdFxuXHQgICAgICAgICAgICAgICAgcHJvcDogXCJzZWxlY3RcIlxuXHQgICAgICAgICAgICB9KTtcblxuXHQgICAgICAgICAgICBfZ2V0KE9iamVjdC5nZXRQcm90b3R5cGVPZihGaWxlU2VsZWN0LnByb3RvdHlwZSksIFwiY29uc3RydWN0b3JcIiwgdGhpcykuY2FsbCh0aGlzLCBleHRlbmRlZE9wdGlvbnMpO1xuXG5cdCAgICAgICAgICAgIGlmICghdGhpcy51cGxvYWRlci5pc0hUTUw1KSB7XG5cdCAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlQXR0cihcIm11bHRpcGxlXCIpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHRoaXMuZWxlbWVudC5wcm9wKFwidmFsdWVcIiwgbnVsbCk7IC8vIEZGIGZpeFxuXHQgICAgICAgIH1cblxuXHQgICAgICAgIF9pbmhlcml0cyhGaWxlU2VsZWN0LCBfRmlsZURpcmVjdGl2ZSk7XG5cblx0ICAgICAgICBfY3JlYXRlQ2xhc3MoRmlsZVNlbGVjdCwge1xuXHQgICAgICAgICAgICBnZXRPcHRpb25zOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJldHVybnMgb3B0aW9uc1xuXHQgICAgICAgICAgICAgICAgICogQHJldHVybiB7T2JqZWN0fHVuZGVmaW5lZH1cblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0T3B0aW9ucygpIHt9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIGdldEZpbHRlcnM6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmV0dXJucyBmaWx0ZXJzXG5cdCAgICAgICAgICAgICAgICAgKiBAcmV0dXJuIHtBcnJheTxGdW5jdGlvbj58U3RyaW5nfHVuZGVmaW5lZH1cblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RmlsdGVycygpIHt9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIGlzRW1wdHlBZnRlclNlbGVjdGlvbjoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBJZiByZXR1cm5zIFwidHJ1ZVwiIHRoZW4gSFRNTElucHV0RWxlbWVudCB3aWxsIGJlIGNsZWFyZWRcblx0ICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc0VtcHR5QWZ0ZXJTZWxlY3Rpb24oKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEhdGhpcy5lbGVtZW50LmF0dHIoXCJtdWx0aXBsZVwiKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgb25DaGFuZ2U6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogRXZlbnQgaGFuZGxlclxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNoYW5nZSgpIHtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgZmlsZXMgPSB0aGlzLnVwbG9hZGVyLmlzSFRNTDUgPyB0aGlzLmVsZW1lbnRbMF0uZmlsZXMgOiB0aGlzLmVsZW1lbnRbMF07XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB0aGlzLmdldE9wdGlvbnMoKTtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgZmlsdGVycyA9IHRoaXMuZ2V0RmlsdGVycygpO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnVwbG9hZGVyLmlzSFRNTDUpIHRoaXMuZGVzdHJveSgpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMudXBsb2FkZXIuYWRkVG9RdWV1ZShmaWxlcywgb3B0aW9ucywgZmlsdGVycyk7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNFbXB0eUFmdGVyU2VsZWN0aW9uKCkpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnByb3AoXCJ2YWx1ZVwiLCBudWxsKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJlcGxhY2VXaXRoKHRoaXMuZWxlbWVudCA9IHRoaXMuZWxlbWVudC5jbG9uZSh0cnVlKSk7IC8vIElFIGZpeFxuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXG5cdCAgICAgICAgcmV0dXJuIEZpbGVTZWxlY3Q7XG5cdCAgICB9KShGaWxlRGlyZWN0aXZlKTtcblxuXHQgICAgcmV0dXJuIEZpbGVTZWxlY3Q7XG5cdH07XG5cblx0bW9kdWxlLmV4cG9ydHMuJGluamVjdCA9IFtcIkZpbGVEaXJlY3RpdmVcIl07XG5cbi8qKiovIH0sXG4vKiA4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblxuXHR2YXIgX2ludGVyb3BSZXF1aXJlID0gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqW1wiZGVmYXVsdFwiXSA6IG9iajsgfTtcblxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGtleSBpbiBwcm9wcykgeyB2YXIgcHJvcCA9IHByb3BzW2tleV07IHByb3AuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKHByb3AudmFsdWUpIHByb3Aud3JpdGFibGUgPSB0cnVlOyB9IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpOyB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0pKCk7XG5cblx0dmFyIF9nZXQgPSBmdW5jdGlvbiBnZXQob2JqZWN0LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpIHsgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgcHJvcGVydHkpOyBpZiAoZGVzYyA9PT0gdW5kZWZpbmVkKSB7IHZhciBwYXJlbnQgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqZWN0KTsgaWYgKHBhcmVudCA9PT0gbnVsbCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9IGVsc2UgeyByZXR1cm4gZ2V0KHBhcmVudCwgcHJvcGVydHksIHJlY2VpdmVyKTsgfSB9IGVsc2UgaWYgKFwidmFsdWVcIiBpbiBkZXNjICYmIGRlc2Mud3JpdGFibGUpIHsgcmV0dXJuIGRlc2MudmFsdWU7IH0gZWxzZSB7IHZhciBnZXR0ZXIgPSBkZXNjLmdldDsgaWYgKGdldHRlciA9PT0gdW5kZWZpbmVkKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gcmV0dXJuIGdldHRlci5jYWxsKHJlY2VpdmVyKTsgfSB9O1xuXG5cdHZhciBfaW5oZXJpdHMgPSBmdW5jdGlvbiAoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfTtcblxuXHR2YXIgX2NsYXNzQ2FsbENoZWNrID0gZnVuY3Rpb24gKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH07XG5cblx0dmFyIENPTkZJRyA9IF9pbnRlcm9wUmVxdWlyZShfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKTtcblxuXHR2YXIgZXh0ZW5kID0gYW5ndWxhci5leHRlbmQ7XG5cdHZhciBmb3JFYWNoID0gYW5ndWxhci5mb3JFYWNoO1xuXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKEZpbGVEaXJlY3RpdmUpIHtcblx0ICAgIHZhciBGaWxlRHJvcCA9IChmdW5jdGlvbiAoX0ZpbGVEaXJlY3RpdmUpIHtcblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBDcmVhdGVzIGluc3RhbmNlIG9mIHtGaWxlRHJvcH0gb2JqZWN0XG5cdCAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICAgICAgICAgKiBAY29uc3RydWN0b3Jcblx0ICAgICAgICAgKi9cblxuXHQgICAgICAgIGZ1bmN0aW9uIEZpbGVEcm9wKG9wdGlvbnMpIHtcblx0ICAgICAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZpbGVEcm9wKTtcblxuXHQgICAgICAgICAgICB2YXIgZXh0ZW5kZWRPcHRpb25zID0gZXh0ZW5kKG9wdGlvbnMsIHtcblx0ICAgICAgICAgICAgICAgIC8vIE1hcCBvZiBldmVudHNcblx0ICAgICAgICAgICAgICAgIGV2ZW50czoge1xuXHQgICAgICAgICAgICAgICAgICAgICRkZXN0cm95OiBcImRlc3Ryb3lcIixcblx0ICAgICAgICAgICAgICAgICAgICBkcm9wOiBcIm9uRHJvcFwiLFxuXHQgICAgICAgICAgICAgICAgICAgIGRyYWdvdmVyOiBcIm9uRHJhZ092ZXJcIixcblx0ICAgICAgICAgICAgICAgICAgICBkcmFnbGVhdmU6IFwib25EcmFnTGVhdmVcIlxuXHQgICAgICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgICAgIC8vIE5hbWUgb2YgcHJvcGVydHkgaW5zaWRlIHVwbG9hZGVyLl9kaXJlY3RpdmUgb2JqZWN0XG5cdCAgICAgICAgICAgICAgICBwcm9wOiBcImRyb3BcIlxuXHQgICAgICAgICAgICB9KTtcblxuXHQgICAgICAgICAgICBfZ2V0KE9iamVjdC5nZXRQcm90b3R5cGVPZihGaWxlRHJvcC5wcm90b3R5cGUpLCBcImNvbnN0cnVjdG9yXCIsIHRoaXMpLmNhbGwodGhpcywgZXh0ZW5kZWRPcHRpb25zKTtcblx0ICAgICAgICB9XG5cblx0ICAgICAgICBfaW5oZXJpdHMoRmlsZURyb3AsIF9GaWxlRGlyZWN0aXZlKTtcblxuXHQgICAgICAgIF9jcmVhdGVDbGFzcyhGaWxlRHJvcCwge1xuXHQgICAgICAgICAgICBnZXRPcHRpb25zOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJldHVybnMgb3B0aW9uc1xuXHQgICAgICAgICAgICAgICAgICogQHJldHVybiB7T2JqZWN0fHVuZGVmaW5lZH1cblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0T3B0aW9ucygpIHt9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIGdldEZpbHRlcnM6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmV0dXJucyBmaWx0ZXJzXG5cdCAgICAgICAgICAgICAgICAgKiBAcmV0dXJuIHtBcnJheTxGdW5jdGlvbj58U3RyaW5nfHVuZGVmaW5lZH1cblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RmlsdGVycygpIHt9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIG9uRHJvcDoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBFdmVudCBoYW5kbGVyXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uRHJvcChldmVudCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciB0cmFuc2ZlciA9IHRoaXMuX2dldFRyYW5zZmVyKGV2ZW50KTtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAoIXRyYW5zZmVyKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgICAgICAgICAgICB9dmFyIG9wdGlvbnMgPSB0aGlzLmdldE9wdGlvbnMoKTtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgZmlsdGVycyA9IHRoaXMuZ2V0RmlsdGVycygpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuX3ByZXZlbnRBbmRTdG9wKGV2ZW50KTtcblx0ICAgICAgICAgICAgICAgICAgICBmb3JFYWNoKHRoaXMudXBsb2FkZXIuX2RpcmVjdGl2ZXMub3ZlciwgdGhpcy5fcmVtb3ZlT3ZlckNsYXNzLCB0aGlzKTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLnVwbG9hZGVyLmFkZFRvUXVldWUodHJhbnNmZXIuZmlsZXMsIG9wdGlvbnMsIGZpbHRlcnMpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBvbkRyYWdPdmVyOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIEV2ZW50IGhhbmRsZXJcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25EcmFnT3ZlcihldmVudCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciB0cmFuc2ZlciA9IHRoaXMuX2dldFRyYW5zZmVyKGV2ZW50KTtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2hhdmVGaWxlcyh0cmFuc2Zlci50eXBlcykpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgICAgICAgICAgIH10cmFuc2Zlci5kcm9wRWZmZWN0ID0gXCJjb3B5XCI7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5fcHJldmVudEFuZFN0b3AoZXZlbnQpO1xuXHQgICAgICAgICAgICAgICAgICAgIGZvckVhY2godGhpcy51cGxvYWRlci5fZGlyZWN0aXZlcy5vdmVyLCB0aGlzLl9hZGRPdmVyQ2xhc3MsIHRoaXMpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBvbkRyYWdMZWF2ZToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBFdmVudCBoYW5kbGVyXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uRHJhZ0xlYXZlKGV2ZW50KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQgPT09IHRoaXMuZWxlbWVudFswXSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICAgICAgICAgICAgfXRoaXMuX3ByZXZlbnRBbmRTdG9wKGV2ZW50KTtcblx0ICAgICAgICAgICAgICAgICAgICBmb3JFYWNoKHRoaXMudXBsb2FkZXIuX2RpcmVjdGl2ZXMub3ZlciwgdGhpcy5fcmVtb3ZlT3ZlckNsYXNzLCB0aGlzKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX2dldFRyYW5zZmVyOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIEhlbHBlclxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfZ2V0VHJhbnNmZXIoZXZlbnQpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXZlbnQuZGF0YVRyYW5zZmVyID8gZXZlbnQuZGF0YVRyYW5zZmVyIDogZXZlbnQub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXI7IC8vIGpRdWVyeSBmaXg7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9wcmV2ZW50QW5kU3RvcDoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBIZWxwZXJcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX3ByZXZlbnRBbmRTdG9wKGV2ZW50KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0ICAgICAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX2hhdmVGaWxlczoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBSZXR1cm5zIFwidHJ1ZVwiIGlmIHR5cGVzIGNvbnRhaW5zIGZpbGVzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gdHlwZXNcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhdmVGaWxlcyh0eXBlcykge1xuXHQgICAgICAgICAgICAgICAgICAgIGlmICghdHlwZXMpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICAgICAgICAgICAgICAgIH1pZiAodHlwZXMuaW5kZXhPZikge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHlwZXMuaW5kZXhPZihcIkZpbGVzXCIpICE9PSAtMTtcblx0ICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVzLmNvbnRhaW5zKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0eXBlcy5jb250YWlucyhcIkZpbGVzXCIpO1xuXHQgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9hZGRPdmVyQ2xhc3M6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogQ2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2FkZE92ZXJDbGFzcyhpdGVtKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaXRlbS5hZGRPdmVyQ2xhc3MoKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX3JlbW92ZU92ZXJDbGFzczoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVtb3ZlT3ZlckNsYXNzKGl0ZW0pIHtcblx0ICAgICAgICAgICAgICAgICAgICBpdGVtLnJlbW92ZU92ZXJDbGFzcygpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cblx0ICAgICAgICByZXR1cm4gRmlsZURyb3A7XG5cdCAgICB9KShGaWxlRGlyZWN0aXZlKTtcblxuXHQgICAgcmV0dXJuIEZpbGVEcm9wO1xuXHR9O1xuXG5cdG1vZHVsZS5leHBvcnRzLiRpbmplY3QgPSBbXCJGaWxlRGlyZWN0aXZlXCJdO1xuXG4vKioqLyB9LFxuLyogOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0dmFyIF9pbnRlcm9wUmVxdWlyZSA9IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9ialtcImRlZmF1bHRcIl0gOiBvYmo7IH07XG5cblx0dmFyIF9jcmVhdGVDbGFzcyA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBrZXkgaW4gcHJvcHMpIHsgdmFyIHByb3AgPSBwcm9wc1trZXldOyBwcm9wLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChwcm9wLnZhbHVlKSBwcm9wLndyaXRhYmxlID0gdHJ1ZTsgfSBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKTsgfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KSgpO1xuXG5cdHZhciBfZ2V0ID0gZnVuY3Rpb24gZ2V0KG9iamVjdCwgcHJvcGVydHksIHJlY2VpdmVyKSB7IHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHByb3BlcnR5KTsgaWYgKGRlc2MgPT09IHVuZGVmaW5lZCkgeyB2YXIgcGFyZW50ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iamVjdCk7IGlmIChwYXJlbnQgPT09IG51bGwpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSBlbHNlIHsgcmV0dXJuIGdldChwYXJlbnQsIHByb3BlcnR5LCByZWNlaXZlcik7IH0gfSBlbHNlIGlmIChcInZhbHVlXCIgaW4gZGVzYyAmJiBkZXNjLndyaXRhYmxlKSB7IHJldHVybiBkZXNjLnZhbHVlOyB9IGVsc2UgeyB2YXIgZ2V0dGVyID0gZGVzYy5nZXQ7IGlmIChnZXR0ZXIgPT09IHVuZGVmaW5lZCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9IHJldHVybiBnZXR0ZXIuY2FsbChyZWNlaXZlcik7IH0gfTtcblxuXHR2YXIgX2luaGVyaXRzID0gZnVuY3Rpb24gKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH07XG5cblx0dmFyIF9jbGFzc0NhbGxDaGVjayA9IGZ1bmN0aW9uIChpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9O1xuXG5cdHZhciBDT05GSUcgPSBfaW50ZXJvcFJlcXVpcmUoX193ZWJwYWNrX3JlcXVpcmVfXygxKSk7XG5cblx0dmFyIGV4dGVuZCA9IGFuZ3VsYXIuZXh0ZW5kO1xuXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKEZpbGVEaXJlY3RpdmUpIHtcblx0ICAgIHZhciBGaWxlT3ZlciA9IChmdW5jdGlvbiAoX0ZpbGVEaXJlY3RpdmUpIHtcblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBDcmVhdGVzIGluc3RhbmNlIG9mIHtGaWxlRHJvcH0gb2JqZWN0XG5cdCAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICAgICAgICAgKiBAY29uc3RydWN0b3Jcblx0ICAgICAgICAgKi9cblxuXHQgICAgICAgIGZ1bmN0aW9uIEZpbGVPdmVyKG9wdGlvbnMpIHtcblx0ICAgICAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZpbGVPdmVyKTtcblxuXHQgICAgICAgICAgICB2YXIgZXh0ZW5kZWRPcHRpb25zID0gZXh0ZW5kKG9wdGlvbnMsIHtcblx0ICAgICAgICAgICAgICAgIC8vIE1hcCBvZiBldmVudHNcblx0ICAgICAgICAgICAgICAgIGV2ZW50czoge1xuXHQgICAgICAgICAgICAgICAgICAgICRkZXN0cm95OiBcImRlc3Ryb3lcIlxuXHQgICAgICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgICAgIC8vIE5hbWUgb2YgcHJvcGVydHkgaW5zaWRlIHVwbG9hZGVyLl9kaXJlY3RpdmUgb2JqZWN0XG5cdCAgICAgICAgICAgICAgICBwcm9wOiBcIm92ZXJcIixcblx0ICAgICAgICAgICAgICAgIC8vIE92ZXIgY2xhc3Ncblx0ICAgICAgICAgICAgICAgIG92ZXJDbGFzczogXCJudi1maWxlLW92ZXJcIlxuXHQgICAgICAgICAgICB9KTtcblxuXHQgICAgICAgICAgICBfZ2V0KE9iamVjdC5nZXRQcm90b3R5cGVPZihGaWxlT3Zlci5wcm90b3R5cGUpLCBcImNvbnN0cnVjdG9yXCIsIHRoaXMpLmNhbGwodGhpcywgZXh0ZW5kZWRPcHRpb25zKTtcblx0ICAgICAgICB9XG5cblx0ICAgICAgICBfaW5oZXJpdHMoRmlsZU92ZXIsIF9GaWxlRGlyZWN0aXZlKTtcblxuXHQgICAgICAgIF9jcmVhdGVDbGFzcyhGaWxlT3Zlciwge1xuXHQgICAgICAgICAgICBhZGRPdmVyQ2xhc3M6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogQWRkcyBvdmVyIGNsYXNzXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFkZE92ZXJDbGFzcygpIHtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuYWRkQ2xhc3ModGhpcy5nZXRPdmVyQ2xhc3MoKSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIHJlbW92ZU92ZXJDbGFzczoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBSZW1vdmVzIG92ZXIgY2xhc3Ncblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlT3ZlckNsYXNzKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyh0aGlzLmdldE92ZXJDbGFzcygpKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgZ2V0T3ZlckNsYXNzOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJldHVybnMgb3ZlciBjbGFzc1xuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMge1N0cmluZ31cblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0T3ZlckNsYXNzKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm92ZXJDbGFzcztcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXG5cdCAgICAgICAgcmV0dXJuIEZpbGVPdmVyO1xuXHQgICAgfSkoRmlsZURpcmVjdGl2ZSk7XG5cblx0ICAgIHJldHVybiBGaWxlT3Zlcjtcblx0fTtcblxuXHRtb2R1bGUuZXhwb3J0cy4kaW5qZWN0ID0gW1wiRmlsZURpcmVjdGl2ZVwiXTtcblxuLyoqKi8gfSxcbi8qIDEwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblxuXHR2YXIgX2ludGVyb3BSZXF1aXJlID0gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqW1wiZGVmYXVsdFwiXSA6IG9iajsgfTtcblxuXHR2YXIgQ09ORklHID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oMSkpO1xuXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCRwYXJzZSwgRmlsZVVwbG9hZGVyLCBGaWxlU2VsZWN0KSB7XG5cblx0ICAgIHJldHVybiB7XG5cdCAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRyaWJ1dGVzKSB7XG5cdCAgICAgICAgICAgIHZhciB1cGxvYWRlciA9IHNjb3BlLiRldmFsKGF0dHJpYnV0ZXMudXBsb2FkZXIpO1xuXG5cdCAgICAgICAgICAgIGlmICghKHVwbG9hZGVyIGluc3RhbmNlb2YgRmlsZVVwbG9hZGVyKSkge1xuXHQgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlxcXCJVcGxvYWRlclxcXCIgbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiBGaWxlVXBsb2FkZXJcIik7XG5cdCAgICAgICAgICAgIH1cblxuXHQgICAgICAgICAgICB2YXIgb2JqZWN0ID0gbmV3IEZpbGVTZWxlY3Qoe1xuXHQgICAgICAgICAgICAgICAgdXBsb2FkZXI6IHVwbG9hZGVyLFxuXHQgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudFxuXHQgICAgICAgICAgICB9KTtcblxuXHQgICAgICAgICAgICBvYmplY3QuZ2V0T3B0aW9ucyA9ICRwYXJzZShhdHRyaWJ1dGVzLm9wdGlvbnMpLmJpbmQob2JqZWN0LCBzY29wZSk7XG5cdCAgICAgICAgICAgIG9iamVjdC5nZXRGaWx0ZXJzID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIGF0dHJpYnV0ZXMuZmlsdGVycztcblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHR9O1xuXG5cdG1vZHVsZS5leHBvcnRzLiRpbmplY3QgPSBbXCIkcGFyc2VcIiwgXCJGaWxlVXBsb2FkZXJcIiwgXCJGaWxlU2VsZWN0XCJdO1xuXG4vKioqLyB9LFxuLyogMTEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdHZhciBfaW50ZXJvcFJlcXVpcmUgPSBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmpbXCJkZWZhdWx0XCJdIDogb2JqOyB9O1xuXG5cdHZhciBDT05GSUcgPSBfaW50ZXJvcFJlcXVpcmUoX193ZWJwYWNrX3JlcXVpcmVfXygxKSk7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoJHBhcnNlLCBGaWxlVXBsb2FkZXIsIEZpbGVEcm9wKSB7XG5cblx0ICAgIHJldHVybiB7XG5cdCAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRyaWJ1dGVzKSB7XG5cdCAgICAgICAgICAgIHZhciB1cGxvYWRlciA9IHNjb3BlLiRldmFsKGF0dHJpYnV0ZXMudXBsb2FkZXIpO1xuXG5cdCAgICAgICAgICAgIGlmICghKHVwbG9hZGVyIGluc3RhbmNlb2YgRmlsZVVwbG9hZGVyKSkge1xuXHQgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlxcXCJVcGxvYWRlclxcXCIgbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiBGaWxlVXBsb2FkZXJcIik7XG5cdCAgICAgICAgICAgIH1cblxuXHQgICAgICAgICAgICBpZiAoIXVwbG9hZGVyLmlzSFRNTDUpIHJldHVybjtcblxuXHQgICAgICAgICAgICB2YXIgb2JqZWN0ID0gbmV3IEZpbGVEcm9wKHtcblx0ICAgICAgICAgICAgICAgIHVwbG9hZGVyOiB1cGxvYWRlcixcblx0ICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnRcblx0ICAgICAgICAgICAgfSk7XG5cblx0ICAgICAgICAgICAgb2JqZWN0LmdldE9wdGlvbnMgPSAkcGFyc2UoYXR0cmlidXRlcy5vcHRpb25zKS5iaW5kKG9iamVjdCwgc2NvcGUpO1xuXHQgICAgICAgICAgICBvYmplY3QuZ2V0RmlsdGVycyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBhdHRyaWJ1dGVzLmZpbHRlcnM7XG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0fTtcblxuXHRtb2R1bGUuZXhwb3J0cy4kaW5qZWN0ID0gW1wiJHBhcnNlXCIsIFwiRmlsZVVwbG9hZGVyXCIsIFwiRmlsZURyb3BcIl07XG5cbi8qKiovIH0sXG4vKiAxMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0dmFyIF9pbnRlcm9wUmVxdWlyZSA9IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9ialtcImRlZmF1bHRcIl0gOiBvYmo7IH07XG5cblx0dmFyIENPTkZJRyA9IF9pbnRlcm9wUmVxdWlyZShfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKTtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChGaWxlVXBsb2FkZXIsIEZpbGVPdmVyKSB7XG5cblx0ICAgIHJldHVybiB7XG5cdCAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRyaWJ1dGVzKSB7XG5cdCAgICAgICAgICAgIHZhciB1cGxvYWRlciA9IHNjb3BlLiRldmFsKGF0dHJpYnV0ZXMudXBsb2FkZXIpO1xuXG5cdCAgICAgICAgICAgIGlmICghKHVwbG9hZGVyIGluc3RhbmNlb2YgRmlsZVVwbG9hZGVyKSkge1xuXHQgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlxcXCJVcGxvYWRlclxcXCIgbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiBGaWxlVXBsb2FkZXJcIik7XG5cdCAgICAgICAgICAgIH1cblxuXHQgICAgICAgICAgICB2YXIgb2JqZWN0ID0gbmV3IEZpbGVPdmVyKHtcblx0ICAgICAgICAgICAgICAgIHVwbG9hZGVyOiB1cGxvYWRlcixcblx0ICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnRcblx0ICAgICAgICAgICAgfSk7XG5cblx0ICAgICAgICAgICAgb2JqZWN0LmdldE92ZXJDbGFzcyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBhdHRyaWJ1dGVzLm92ZXJDbGFzcyB8fCBvYmplY3Qub3ZlckNsYXNzO1xuXHQgICAgICAgICAgICB9O1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdH07XG5cblx0bW9kdWxlLmV4cG9ydHMuJGluamVjdCA9IFtcIkZpbGVVcGxvYWRlclwiLCBcIkZpbGVPdmVyXCJdO1xuXG4vKioqLyB9XG4vKioqKioqLyBdKVxufSk7XG47XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hbmd1bGFyLWZpbGUtdXBsb2FkLmpzLm1hcFxuXG4vLyAtLUF1dGhvciBNdXJhZ2lqaW1hbmEgUmljaGFyZCA8YmVhc3RhcjQ1N0BnbWFpbC5jb20+XG4vLyB2YXIgc3luYyA9IGFuZ3VsYXIubW9kdWxlKFwic3luY1wiLCBbXCJuZ1JvdXRlXCIsXCJhbmd1bGFyRmlsZVVwbG9hZFwiLFwiaW9uaWNcIixcIm5nUmVzb3VyY2VcIixcInVpLmJvb3RzdHJhcFwiLFwiaW5maW5pdGUtc2Nyb2xsXCJdKTtcbi8vIG1vZHVsZS5leHBvcnRzID0gbW9uZ29vc2UubW9kZWwoJ2FwcENvbmZpZycsIHtcblxuYW5ndWxhci5tb2R1bGUoJ0F1dGhNYW5hZ2VyJyxbXSkuc2VydmljZSgnU2Vzc2lvblNlcnZpY2UnLCBbZnVuY3Rpb24oKXtcbiAgICB2YXIgdXNlcklzQXV0aGVudGljYXRlZCA9IGZhbHNlO1xuXG4gICAgdGhpcy5zZXRVc2VyQXV0aGVudGljYXRlZCA9IGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAgICAgdXNlcklzQXV0aGVudGljYXRlZCA9IHZhbHVlO1xuICAgIH07XG5cbiAgICB0aGlzLmdldFVzZXJBdXRoZW50aWNhdGVkID0gZnVuY3Rpb24oKXtcbiAgICAgICAgcmV0dXJuIHVzZXJJc0F1dGhlbnRpY2F0ZWQ7XG4gICAgfTtcbn1dKTtcblxudmFyIHN5bmMgPSBhbmd1bGFyLm1vZHVsZShcInN5bmNcIiwgW1wibmdSb3V0ZVwiLFwiYW5ndWxhckZpbGVVcGxvYWRcIixcInVpLmJvb3RzdHJhcFwiLFwidWkucm91dGVyXCIsXCJpbmZpbml0ZS1zY3JvbGxcIiwnbmdNYXRlcmlhbCcsICduZ01lc3NhZ2VzJywgJ21hdGVyaWFsLnN2Z0Fzc2V0c0NhY2hlJywnbmctbWZiJywncGRmJywnbmdDb250ZXh0TWVudScsJ2FuZ3VsYXItbG9hZGluZy1iYXInLCduZ0ZpbGVTYXZlcicsJ0F1dGhNYW5hZ2VyJywnbmdEaWFsb2cnXSk7XG5cblxudmFyIExvZ2dlcj1hbmd1bGFyLm1vZHVsZShcIkxvZ2dlclwiLFtdKTtcbkxvZ2dlci5ydW4oWyckcm9vdFNjb3BlJyxmdW5jdGlvbigkcm9vdFNjb3BlKXtcblxuICAgICAgLy8gJHJvb3RTY29wZS5lbmRQb2ludD0naHR0cHM6Ly9zdHJlYW11cGJveC5jb20nO1xuICAgICAgJHJvb3RTY29wZS5lbmRQb2ludD0naHR0cDovL3N5bmNtZS5jb206ODAwMCc7XG59XSk7XG53aW5kb3cucm91dGVzID1cbntcbiAgICBcIi9GaWxlc1wiOiB7XG4gICAgICAgIHVybDogXCIvRmlsZXNcIixcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9maWxlcy5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogJ0ZpbGVzQ29udHJvbGxlcicsXG4gICAgICAgIHJlcXVpcmVMb2dpbjogdHJ1ZVxuICAgICAgfSxcbiAgICAgIFwicHJldmlld1wiOntcbiAgICAgICAgdXJsOiAnLyEvOnByZXZpZXcvOmV4dGVuc2lvbi86b2YvOnVzZXInLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2ZpbGVQcmV2aWV3Lmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyIDogJ3ByZXZpZXdDb250cm9sbGVyJ1xuICAgICAgfSxcblxuICAgICAgXCIvR3JvdXBzXCI6IHtcbiAgICAgICAgICB1cmw6IFwiL0dyb3Vwc1wiLFxuICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvZ3JvdXBzLmh0bWwnLFxuICAgICAgICAgIGNvbnRyb2xsZXI6ICdHcm91cENvbnRyb2xsZXInLFxuICAgICAgICAgIHJlcXVpcmVMb2dpbjogdHJ1ZVxuICAgICAgfVxufTtcblxuXG5zeW5jLnJ1bihbJyRyb290U2NvcGUnLCckbG9nJyxmdW5jdGlvbigkcm9vdFNjb3BlLCRsb2cpe1xuICAkcm9vdFNjb3BlLmVuZFBvaW50PSdodHRwOi8vc3luY21lLmNvbTo4MDAwJztcbiAgIC8vICRyb290U2NvcGUuZW5kUG9pbnQ9J2h0dHBzOi8vc3RyZWFtdXBib3guY29tJztcblxuXG4gICRyb290U2NvcGUuJG9uKCckcm91dGVDaGFuZ2VTdGFydCcsZnVuY3Rpb24oZXZlbnQsIG5leHQsIGN1cnJlbnQpe1xuICAgIGZvcih2YXIgaSBpbiB3aW5kb3cucm91dGVzKSB7XG5cbiAgICAgICAgaWYobmV4dC5pbmRleE9mKGkpICE9IC0xKSB7XG4gICAgICAgICAgICBpZih3aW5kb3cucm91dGVzW2ldLnJlcXVpcmVMb2dpbiAmJiAhU2Vzc2lvblNlcnZpY2UuZ2V0VXNlckF1dGhlbnRpY2F0ZWQoKSkge1xuICAgICAgICAgICAgICAgIGFsZXJ0KFwiWW91IG5lZWQgdG8gYmUgYXV0aGVudGljYXRlZCB0byBzZWUgdGhpcyBwYWdlIVwiKTtcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICB9XG4gIH0pO1xufV0pO1xuc3luYy5wcm92aWRlcih7XG5cbiAgICAkZXhjZXB0aW9uSGFuZGxlcjogZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbihleGNlcHRpb24sIGNhdXNlKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coZXhjZXB0aW9uKTtcblxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuJGdldCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZXI7XG4gICAgICAgIH07XG4gICAgfVxufSk7XG5zeW5jLmNvbmZpZyhbJyRzY2VQcm92aWRlcicsJyRodHRwUHJvdmlkZXInLCckbWRUaGVtaW5nUHJvdmlkZXInLCdjZnBMb2FkaW5nQmFyUHJvdmlkZXInLGZ1bmN0aW9uKCRzY2VQcm92aWRlciwkaHR0cFByb3ZpZGVyLCRtZFRoZW1pbmdQcm92aWRlcixjZnBMb2FkaW5nQmFyUHJvdmlkZXIpIHtcbiAgICBkZWxldGUgJGh0dHBQcm92aWRlci5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnWC1SZXF1ZXN0ZWQtV2l0aCddO1xuICAgICRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVycy5wb3N0WydBY2NlcHQnXSA9ICdhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L2phdmFzY3JpcHQnO1xuICAgICRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVycy5wb3N0WydBY2NlcHQnXSA9ICdhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L2phdmFzY3JpcHQnO1xuICAgIC8vc2V0IGF1dGhvcml6YXRpb24gZm9yIG9hdXRoMi4wIGZvciBwcm90ZWN0aW9uXG5cblxuICAgICRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ2F1dGhvcml6YXRpb24nXSA9ICdCZWFyZXIgQmM3RFdTN0tLUkx0eG1kZFVaSTFUMWxadTJKMVloUjhPTFhHV05abic7XG5cbiAgICAvLyAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLnVzZVhEb21haW4gPSB0cnVlO1xuICAgICRzY2VQcm92aWRlci5lbmFibGVkKGZhbHNlKTtcblxuICAgIGNmcExvYWRpbmdCYXJQcm92aWRlci5pbmNsdWRlQmFyID0gZmFsc2U7XG59XSk7XG5zeW5jLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywnJHVybFJvdXRlclByb3ZpZGVyJyxmdW5jdGlvbigkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyLCRzY29wZSl7XG4gICAgICAgIC8vICRwYXJzZVByb3ZpZGVyLnVud3JhcFByb21pc2VzKHRydWUpIDtcbiAgICAgICAgICBmb3IodmFyIHBhdGggaW4gd2luZG93LnJvdXRlcykge1xuXG4gICAgICAgICAgICAgIC8vIGlmKG5leHQuaW5kZXhPZihwYXRoKSAhPSAtMSkge1xuICAgICAgICAgICAgICAvLyAgICAgaWYod2luZG93LnJvdXRlc1twYXRoXS5yZXF1aXJlTG9naW4gJiYgIVNlc3Npb25TZXJ2aWNlLmdldFVzZXJBdXRoZW50aWNhdGVkKCkpIHtcbiAgICAgICAgICAgICAgLy8gICAgICAgICBhbGVydChcIllvdSBuZWVkIHRvIGJlIGF1dGhlbnRpY2F0ZWQgdG8gc2VlIHRoaXMgcGFnZSFcIik7XG4gICAgICAgICAgICAgIC8vICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgLy8gICAgIH1cbiAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAkc3RhdGVQcm92aWRlci5zdGF0ZShwYXRoLCB3aW5kb3cucm91dGVzW3BhdGhdKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvRmlsZXMnKTtcblxufV0pO1xuXG4vLyB9KTtcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1kb25lIHdpdGggTXVyYWdpamltYW5hIFJpY2hhcmQgPGJlYXN0YXI0NTdAZ21haWwuY29tPi0tLS0tLS0tLS0tLS0tLS8vXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tZGVhbCB3aXRoIHVzZXIncyBhY3Rpb25zIGFuZCBpbnRlcmFjdGlvbiB3aXRoIG90aGVyIHVzZXJzLS0tLS0tLS0tLS0tLS0tLy9cblxuOyhmdW5jdGlvbih3aW5kb3csIGFuZ3VsYXIsIHVuZGVmaW5lZCkge1xuXG4gICd1c2Ugc3RyaWN0JztcblxuICB2YXIgbWZiID0gYW5ndWxhci5tb2R1bGUoJ25nLW1mYicsIFtdKTtcblxuICBtZmIucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkge1xuICAgICR0ZW1wbGF0ZUNhY2hlLnB1dCgnbmctbWZiLW1lbnUtZGVmYXVsdC50cGwuaHRtbCcsXG4gICAgICAnPHVsIGNsYXNzPVwibWZiLWNvbXBvbmVudC0te3twb3NpdGlvbn19IG1mYi17e2VmZmVjdH19XCInICtcbiAgICAgICcgICAgZGF0YS1tZmItdG9nZ2xlPVwie3t0b2dnbGluZ01ldGhvZH19XCIgZGF0YS1tZmItc3RhdGU9XCJ7e21lbnVTdGF0ZX19XCI+JyArXG4gICAgICAnICA8bGkgY2xhc3M9XCJtZmItY29tcG9uZW50X193cmFwXCI+JyArXG4gICAgICAnICAgIDxhIG5nLWNsaWNrPVwiY2xpY2tlZCgpXCIgbmctbW91c2VlbnRlcj1cImhvdmVyZWQoKVwiIG5nLW1vdXNlbGVhdmU9XCJob3ZlcmVkKClcIicgK1xuICAgICAgJyAgICAgICBuZy1hdHRyLWRhdGEtbWZiLWxhYmVsPVwie3tsYWJlbH19XCIgY2xhc3M9XCJtZmItY29tcG9uZW50X19idXR0b24tLW1haW5cIj4nICtcbiAgICAgICcgICAgIDxpIGNsYXNzPVwibWZiLWNvbXBvbmVudF9fbWFpbi1pY29uLS1yZXN0aW5nIHt7cmVzdGluZ319XCI+PC9pPicgK1xuICAgICAgJyAgICAgPGkgY2xhc3M9XCJtZmItY29tcG9uZW50X19tYWluLWljb24tLWFjdGl2ZSB7e2FjdGl2ZX19XCI+PC9pPicgK1xuICAgICAgJyAgICA8L2E+JyArXG4gICAgICAnICAgIDx1bCBjbGFzcz1cIm1mYi1jb21wb25lbnRfX2xpc3RcIiBuZy10cmFuc2NsdWRlPicgK1xuICAgICAgJyAgICA8L3VsPicgK1xuICAgICAgJzwvbGk+JyArXG4gICAgICAnPC91bD4nXG4gICAgKTtcblxuICAgICR0ZW1wbGF0ZUNhY2hlLnB1dCgnbmctbWZiLW1lbnUtbWQudHBsLmh0bWwnLFxuICAgICAgJzx1bCBjbGFzcz1cIm1mYi1jb21wb25lbnQtLXt7cG9zaXRpb259fSBtZmIte3tlZmZlY3R9fVwiJyArXG4gICAgICAnICAgIGRhdGEtbWZiLXRvZ2dsZT1cInt7dG9nZ2xpbmdNZXRob2R9fVwiIGRhdGEtbWZiLXN0YXRlPVwie3ttZW51U3RhdGV9fVwiPicgK1xuICAgICAgJyAgPGxpIGNsYXNzPVwibWZiLWNvbXBvbmVudF9fd3JhcFwiPicgK1xuICAgICAgJyAgICA8YSBuZy1jbGljaz1cImNsaWNrZWQoKVwiIG5nLW1vdXNlZW50ZXI9XCJob3ZlcmVkKClcIiBuZy1tb3VzZWxlYXZlPVwiaG92ZXJlZCgpXCInICtcbiAgICAgICcgICAgICAgc3R5bGU9XCJiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsgYm94LXNoYWRvdzogbm9uZTtcIicgK1xuICAgICAgJyAgICAgICBuZy1hdHRyLWRhdGEtbWZiLWxhYmVsPVwie3tsYWJlbH19XCIgY2xhc3M9XCJtZmItY29tcG9uZW50X19idXR0b24tLW1haW5cIj4nICtcbiAgICAgICcgICAgIDxtZC1idXR0b24gY2xhc3M9XCJtZC1mYWIgbWQtYWNjZW50XCIgYXJpYS1sYWJlbD17e2xhYmVsfX0gc3R5bGU9XCJwb3NpdGlvbjpyZWxhdGl2ZTsgbWFyZ2luOiAwOyBwYWRkaW5nOjA7XCI+JyArXG4gICAgICAnICAgICAgIDxtZC1pY29uIHN0eWxlPVwibGVmdDogMDsgcG9zaXRpb246IHJlbGF0aXZlO1wiIG1kLXN2Zy1pY29uPVwie3tyZXN0aW5nfX1cIicgK1xuICAgICAgJyAgICAgICAgIGNsYXNzPVwibWZiLWNvbXBvbmVudF9fbWFpbi1pY29uLS1yZXN0aW5nXCI+PC9tZC1pY29uPicgK1xuICAgICAgJyAgICAgICA8bWQtaWNvbiBzdHlsZT1cInBvc2l0aW9uOnJlbGF0aXZlO1wiIG1kLXN2Zy1pY29uPVwie3thY3RpdmV9fVwiJyArXG4gICAgICAnICAgICAgICAgY2xhc3M9XCJtZmItY29tcG9uZW50X19tYWluLWljb24tLWFjdGl2ZVwiPjwvbWQtaWNvbj4nICtcbiAgICAgICcgICAgIDwvbWQtYnV0dG9uPicgK1xuICAgICAgJyAgICA8L2E+JyArXG4gICAgICAnICAgIDx1bCBjbGFzcz1cIm1mYi1jb21wb25lbnRfX2xpc3RcIiBuZy10cmFuc2NsdWRlPicgK1xuICAgICAgJyAgICA8L3VsPicgK1xuICAgICAgJzwvbGk+JyArXG4gICAgICAnPC91bD4nXG4gICAgKTtcblxuICAgICR0ZW1wbGF0ZUNhY2hlLnB1dCgnbmctbWZiLWJ1dHRvbi1kZWZhdWx0LnRwbC5odG1sJyxcbiAgICAgICc8bGk+JyArXG4gICAgICAnICA8YSBkYXRhLW1mYi1sYWJlbD1cInt7bGFiZWx9fVwiIGNsYXNzPVwibWZiLWNvbXBvbmVudF9fYnV0dG9uLS1jaGlsZFwiPicgK1xuICAgICAgJyAgICA8aSBjbGFzcz1cIm1mYi1jb21wb25lbnRfX2NoaWxkLWljb24ge3tpY29ufX1cIj4nICtcbiAgICAgICcgICAgPC9pPicgK1xuICAgICAgJyAgPC9hPicgK1xuICAgICAgJzwvbGk+J1xuICAgICk7XG5cbiAgICAkdGVtcGxhdGVDYWNoZS5wdXQoJ25nLW1mYi1idXR0b24tbWQudHBsLmh0bWwnLFxuICAgICAgJzxsaT4nICtcbiAgICAgICcgIDxhIGhyZWY9XCJcIiBkYXRhLW1mYi1sYWJlbD1cInt7bGFiZWx9fVwiIGNsYXNzPVwibWZiLWNvbXBvbmVudF9fYnV0dG9uLS1jaGlsZFwiICcgK1xuICAgICAgJyAgICAgc3R5bGU9XCJiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDsgYm94LXNoYWRvdzogbm9uZTtcIj4nICtcbiAgICAgICcgICAgIDxtZC1idXR0b24gc3R5bGU9XCJtYXJnaW46IDA7XCIgY2xhc3M9XCJtZC1mYWIgbWQtYWNjZW50XCIgYXJpYS1sYWJlbD17e2xhYmVsfX0+JyArXG4gICAgICAnICAgICAgIDxtZC1pY29uIG1kLXN2Zy1zcmM9XCJpbWcvaWNvbnMvYW5kcm9pZC5zdmdcIj48L21kLWljb24+JyArXG4gICAgICAnICAgICAgIDxtZC1pY29uIG1kLXN2Zy1pY29uPVwie3tpY29ufX1cIj48L21kLWljb24+JyArXG4gICAgICAnICAgICA8L21kLWJ1dHRvbj4nICtcbiAgICAgICcgIDwvYT4nICtcbiAgICAgICc8L2xpPidcbiAgICApO1xuICB9XSk7XG5cbiAgbWZiLmRpcmVjdGl2ZSgnbWZiQnV0dG9uQ2xvc2UnLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgIHJlcXVpcmU6ICdebWZiTWVudScsXG4gICAgICBsaW5rOiBmdW5jdGlvbigkc2NvcGUsICRlbGVtZW50LCAkYXR0cnMsIG1mYk1lbnVDb250cm9sbGVyKSB7XG4gICAgICAgICRlbGVtZW50LmJpbmQoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgbWZiTWVudUNvbnRyb2xsZXIuY2xvc2UoKTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgIH07XG5cbiAgfSk7XG5cbiAgbWZiLmRpcmVjdGl2ZSgnbWZiTWVudScsIFsnJHRpbWVvdXQnLCBmdW5jdGlvbigkdGltZW91dCkge1xuICAgIHJldHVybiB7XG4gICAgICByZXN0cmljdDogJ0VBJyxcbiAgICAgIHRyYW5zY2x1ZGU6IHRydWUsXG4gICAgICByZXBsYWNlOiB0cnVlLFxuICAgICAgc2NvcGU6IHtcbiAgICAgICAgcG9zaXRpb246ICdAJyxcbiAgICAgICAgZWZmZWN0OiAnQCcsXG4gICAgICAgIGxhYmVsOiAnQCcsXG4gICAgICAgIHJlc3Rpbmc6ICdAcmVzdGluZ0ljb24nLFxuICAgICAgICBhY3RpdmU6ICdAYWN0aXZlSWNvbicsXG4gICAgICAgIG1haW5BY3Rpb246ICcmJyxcbiAgICAgICAgbWVudVN0YXRlOiAnPT8nLFxuICAgICAgICB0b2dnbGluZ01ldGhvZDogJ0AnXG4gICAgICB9LFxuICAgICAgdGVtcGxhdGVVcmw6IGZ1bmN0aW9uKGVsZW0sIGF0dHJzKSB7XG4gICAgICAgIHJldHVybiBhdHRycy50ZW1wbGF0ZVVybCB8fCAnbmctbWZiLW1lbnUtZGVmYXVsdC50cGwuaHRtbCc7XG4gICAgICB9LFxuICAgICAgY29udHJvbGxlcjogWyckc2NvcGUnLCAnJGF0dHJzJywgZnVuY3Rpb24oJHNjb3BlLCAkYXR0cnMpIHtcbiAgICAgICAgdmFyIG9wZW5TdGF0ZSA9ICdvcGVuJyxcbiAgICAgICAgICBjbG9zZWRTdGF0ZSA9ICdjbG9zZWQnO1xuXG4gICAgICAgIC8vIEF0dGFjaGVkIHRvZ2dsZSwgb3BlbiBhbmQgY2xvc2UgdG8gdGhlIGNvbnRyb2xsZXIgdG8gZ2l2ZSBvdGhlclxuICAgICAgICAvLyBkaXJlY3RpdmUgYWNjZXNzXG4gICAgICAgIHRoaXMudG9nZ2xlID0gdG9nZ2xlO1xuICAgICAgICB0aGlzLmNsb3NlID0gY2xvc2U7XG4gICAgICAgIHRoaXMub3BlbiA9IG9wZW47XG5cbiAgICAgICAgJHNjb3BlLmNsaWNrZWQgPSBjbGlja2VkO1xuICAgICAgICAkc2NvcGUuaG92ZXJlZCA9IGhvdmVyZWQ7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldCB0aGUgc3RhdGUgdG8gdXNlci1kZWZpbmVkIHZhbHVlLiBGYWxsYmFjayB0byBjbG9zZWQgaWYgbm9cbiAgICAgICAgICogdmFsdWUgaXMgcGFzc2VkIGZyb20gdGhlIG91dHNpZGUuXG4gICAgICAgICAqL1xuICAgICAgICBpZiAoISRzY29wZS5tZW51U3RhdGUpIHtcbiAgICAgICAgICAkc2NvcGUubWVudVN0YXRlID0gY2xvc2VkU3RhdGU7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogSWYgb24gdG91Y2ggZGV2aWNlIEFORCAnaG92ZXInIG1ldGhvZCBpcyBzZWxlY3RlZDpcbiAgICAgICAgICogd2FpdCBmb3IgdGhlIGRpZ2VzdCB0byBwZXJmb3JtIGFuZCB0aGVuIGNoYW5nZSBob3ZlciB0byBjbGljay5cbiAgICAgICAgICovXG4gICAgICAgIGlmIChfaXNUb3VjaERldmljZSgpICYmIF9pc0hvdmVyQWN0aXZlKCkpIHtcbiAgICAgICAgICAkdGltZW91dCh1c2VDbGljayk7XG4gICAgICAgIH1cblxuICAgICAgICAkYXR0cnMuJG9ic2VydmUoJ21lbnVTdGF0ZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICRzY29wZS5jdXJyZW50U3RhdGUgPSAkc2NvcGUubWVudVN0YXRlO1xuICAgICAgICB9KTtcblxuICAgICAgICBmdW5jdGlvbiBjbGlja2VkKCkge1xuICAgICAgICAgIC8vIElmIHRoZXJlIGlzIGEgbWFpbiBhY3Rpb24sIGxldCdzIGZpcmUgaXRcbiAgICAgICAgICBpZiAoJHNjb3BlLm1haW5BY3Rpb24pIHtcbiAgICAgICAgICAgICRzY29wZS5tYWluQWN0aW9uKCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKCFfaXNIb3ZlckFjdGl2ZSgpKSB7XG4gICAgICAgICAgICB0b2dnbGUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgZnVuY3Rpb24gaG92ZXJlZCgpIHtcbiAgICAgICAgICBpZiAoX2lzSG92ZXJBY3RpdmUoKSkge1xuICAgICAgICAgICAgLy90b2dnbGUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEludmVydCB0aGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgbWVudS5cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHRvZ2dsZSgpIHtcbiAgICAgICAgICBpZiAoJHNjb3BlLm1lbnVTdGF0ZSA9PT0gb3BlblN0YXRlKSB7XG4gICAgICAgICAgICBjbG9zZSgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBvcGVuKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gb3BlbigpIHtcbiAgICAgICAgICAkc2NvcGUubWVudVN0YXRlID0gb3BlblN0YXRlO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gY2xvc2UoKSB7XG4gICAgICAgICAgJHNjb3BlLm1lbnVTdGF0ZSA9IGNsb3NlZFN0YXRlO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENoZWNrIGlmIHdlJ3JlIG9uIGEgdG91Y2gtZW5hYmxlZCBkZXZpY2UuXG4gICAgICAgICAqIFJlcXVpcmVzIE1vZGVybml6ciB0byBydW4sIG90aGVyd2lzZSBzaW1wbHkgcmV0dXJucyBmYWxzZVxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gX2lzVG91Y2hEZXZpY2UoKSB7XG4gICAgICAgICAgcmV0dXJuIHdpbmRvdy5Nb2Rlcm5penIgJiYgTW9kZXJuaXpyLnRvdWNoO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gX2lzSG92ZXJBY3RpdmUoKSB7XG4gICAgICAgICAgcmV0dXJuICRzY29wZS50b2dnbGluZ01ldGhvZCA9PT0gJ2hvdmVyJztcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb252ZXJ0IHRoZSB0b2dnbGluZyBtZXRob2QgdG8gJ2NsaWNrJy5cbiAgICAgICAgICogVGhpcyBpcyB1c2VkIHdoZW4gJ2hvdmVyJyBpcyBzZWxlY3RlZCBieSB0aGUgdXNlclxuICAgICAgICAgKiBidXQgYSB0b3VjaCBkZXZpY2UgaXMgZW5hYmxlZC5cbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIHVzZUNsaWNrKCkge1xuICAgICAgICAgICRzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkc2NvcGUudG9nZ2xpbmdNZXRob2QgPSAnY2xpY2snO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XVxuICAgIH07XG4gIH1dKTtcblxuICBtZmIuZGlyZWN0aXZlKCdtZmJCdXR0b24nLCBbZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlcXVpcmU6ICdebWZiTWVudScsXG4gICAgICByZXN0cmljdDogJ0VBJyxcbiAgICAgIHRyYW5zY2x1ZGU6IHRydWUsXG4gICAgICByZXBsYWNlOiB0cnVlLFxuICAgICAgc2NvcGU6IHtcbiAgICAgICAgaWNvbjogJ0AnLFxuICAgICAgICBsYWJlbDogJ0AnXG4gICAgICB9LFxuICAgICAgdGVtcGxhdGVVcmw6IGZ1bmN0aW9uKGVsZW0sIGF0dHJzKSB7XG4gICAgICAgIHJldHVybiBhdHRycy50ZW1wbGF0ZVVybCB8fCAnbmctbWZiLWJ1dHRvbi1kZWZhdWx0LnRwbC5odG1sJztcbiAgICAgIH1cbiAgICB9O1xuICB9XSk7XG5cbn0pKHdpbmRvdywgYW5ndWxhcik7XG5cbnN5bmMuZGlyZWN0aXZlKCdsZWZ0TWVudScsZnVuY3Rpb24oKXtcbiAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdBRScsXG4gICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICBkYXRhOiAnPScsXG4gICAgICAgICAgICB1c2VyOiAnPScsXG4gICAgICAgICAgICB0eXBlOiAnPSdcbiAgICAgICAgfSxcbiAgICAgICAgdGVtcGxhdGVVcmw6IFwiZGlyZWN0aXZlcy9sZWZ0TWVudS5odG1sXCJcbiAgICB9O1xufSk7XG5zeW5jLmRpcmVjdGl2ZSgnZmVlZHMnLGZ1bmN0aW9uKCl7XG4gIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiAnQUUnLFxuICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgcG9zdHM6ICc9JyxcbiAgICAgICAgICAgIHJlcGxpZXM6ICc9JyxcbiAgICAgICAgICAgIGNyZWF0ZVBvc3Q6Jz0nXG4gICAgICAgIH0sXG4gICAgICAgIHRlbXBsYXRlVXJsOiBcImRpcmVjdGl2ZXMvbWlkZGxlQ29udGVudC5odG1sXCJcbiAgICB9O1xufSk7XG5zeW5jLmRpcmVjdGl2ZSgnaGVhZGVyJyxmdW5jdGlvbigpe1xuICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0FFJyxcbiAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgIGRhdGE6ICc9JyxcbiAgICAgICAgICAgIHVzZXI6ICc9JyxcbiAgICAgICAgICAgIHR5cGU6ICc9J1xuICAgICAgICB9LFxuICAgICAgICB0ZW1wbGF0ZVVybDogXCIuL2RpcmVjdGl2ZXMvaGVhZGVyLmh0bWxcIlxuXG4gICAgfTtcbn0pO1xuXG5cbnN5bmMuZGlyZWN0aXZlKCdrZXliaW5kaW5nJywgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICBpbnZva2U6ICcmJ1xuICAgICAgICB9LFxuICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsLCBhdHRyKSB7XG4gICAgICAgICAgICBNb3VzZXRyYXAuYmluZChhdHRyLm9uLCBzY29wZS5pbnZva2UpO1xuICAgICAgICB9XG4gICAgfTtcbn0pO1xuXG4vKiBnbG9iYWwgJHdpbmRvdyAqL1xuLyogZ2xvYmFsIExvZ2dlciAqL1xuXG5Mb2dnZXIuY29udHJvbGxlcignbG9naW5Db250cm9sbGVyJyxbJyRzY29wZScsJyRodHRwJywnJHJvb3RTY29wZScsJyR3aW5kb3cnLCBmdW5jdGlvbiAoJHNjb3BlLCRodHRwLCRyb290U2NvcGUsJHdpbmRvdykge1xuICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICAnY3JlZGVkZW50aWFsLW5vdC1mb3VuZCcgICAgICAgOiAnQ3JlZGVudGlhbHMgbm90IGZvdW5kIScsXG4gICAgICAgICdzdWNjZXNzJyAgICAgICAgICAgICAgICAgICAgICA6ICdsb2dnaW5nIGluLi4uJ1xuICAgIH07XG4gICRzY29wZS5sb2dpbiA9IGZ1bmN0aW9uIChpbmZvKVxuICB7XG4gICAgLy9iZWZvcmUgbm90aWZ5IHRoYXQgd2UgYXJlIGxvZ2dpbmdpblxuICAgICQoJy5sb2dpbi1mb3JtLW1haW4tbWVzc2FnZScpLmFkZENsYXNzKCdzaG93IHN1Y2Nlc3MnKS5odG1sKG9wdGlvbnNbJ3N1Y2Nlc3MnXSk7XG4gICAgJGh0dHAucG9zdCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9zZXNzaW9ucycsaW5mbylcbiAgICAuc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICAgICAgaWYocmVzcG9uc2UgPT09XCIxXCIpe1xuICAgICAgICAgICAgUmVkaXJlY3RpbmcoKTtcblxuICAgICAgICB9ZWxzZSBpZihyZXNwb25zZSA9PT0gXCIwXCIpe1xuICAgICAgICAgICAgICQoJy5sb2dpbi1mb3JtLW1haW4tbWVzc2FnZScpLmFkZENsYXNzKCdzaG93IGVycm9yJykuaHRtbChvcHRpb25zWydjcmVkZWRlbnRpYWwtbm90LWZvdW5kJ10pO1xuICAgICAgICB9ZWxzZSBpZihyZXNwb25zZSA9PT0gXCJub3RWZXJpZmllZFwiKXtcbiAgICAgICAgICAgIG5vdFZlcmlmaWVkKCk7XG4gICAgICAgIH1cbiAgICB9KVxuICAgIC5lcnJvcihmdW5jdGlvbihlcnJvcikge1xuICAgICAgICBjb25zb2xlLmxvZygnZXJyb3I6JysgZXJyb3IpO1xuICAgIH0pXG4gICAgZnVuY3Rpb24gbm90VmVyaWZpZWQoKXtcbiAgICAgICAgICR3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvbm90VmVyaWZpZWQnO1xuICAgIH1cbiAgICBmdW5jdGlvbiBSZWRpcmVjdGluZygpe1xuICAgICAgICAkd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL3N5bmMnO1xuICAgIH1cbiAgfVxufV0pO1xuXG5Mb2dnZXIuY29udHJvbGxlcignUmVnaXN0ZXJDb250cm9sbGVyJywgWyckc2NvcGUnLCckcm9vdFNjb3BlJywnJGh0dHAnLGZ1bmN0aW9uICgkc2NvcGUsJHJvb3RTY29wZSwkaHR0cCkge1xuICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICAncGFzc3dvcmQtbm90TWF0Y2gnOiAncGFzc3dvcmQgZG8gbm90IG1hdGNoJyxcbiAgICAgICAgJ1NpZ25VcEluUHJvZ3Jlc3MnIDogJ1dhaXQgd2UgYXJlIHNldHRpbmcgdXAgeW91ciBhY2NvdW50LidcbiAgICB9O1xuICAgICRzY29wZS5yZWdpc3Rlcj1mdW5jdGlvbih1c2VyKXtcbiAgICAgICQoJy5yZWdpc3Rlci1mb3JtLW1haW4tbWVzc2FnZScpLmFkZENsYXNzKCdzaG93IHN1Y2Nlc3MnKS5odG1sKG9wdGlvbnNbJ1NpZ25VcEluUHJvZ3Jlc3MnXSk7XG4gICAgICAgIGlmKCQoJyNwYXNzd29yZCcpLnZhbCgpICE9ICQoJyNwYXNzd29yZC1jb25maXJtJykudmFsKCkpe1xuICAgICAgICAgICQoJy5yZWdpc3Rlci1mb3JtLW1haW4tbWVzc2FnZScpLmFkZENsYXNzKCdzaG93IGVycm9yJykuaHRtbChvcHRpb25zWydwYXNzd29yZC1ub3RNYXRjaCddKTtcbiAgICAgICAgICBzZXRUaW1lb3V0KG1lc3NhZ2VSZW1vdmUsIDIwMDApO1xuICAgICAgICAgIGZ1bmN0aW9uIG1lc3NhZ2VSZW1vdmUoKXtcbiAgICAgICAgICAgICAgJCgnLnJlZ2lzdGVyLWZvcm0tbWFpbi1tZXNzYWdlJykucmVtb3ZlQ2xhc3MoJ3Nob3cgZXJyb3InKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciB1c2VybmFtZT0kKCcjdXNlcm5hbWUnKS52YWwoKTtcbiAgICAgICAgdmFyIGVtYWlsPSQoJyNlbWFpbCcpLnZhbCgpO1xuXG5cbiAgICAgICAgalF1ZXJ5LnBvc3QoJy9zZXNzaW9ucycsIHt1c2VybmFtZTogdXNlcm5hbWUsIHBhc3N3b3JkOnVzZXIucGFzc3dvcmQsIGVtYWlsOmVtYWlsLCBvcHRpb246dXNlci5vcHRpb24sIHBob25lOnVzZXIucGhvbmV9LCBmdW5jdGlvbihkYXRhLCB0ZXh0U3RhdHVzLCB4aHIpIHtcbiAgICAgICAgICAgIGlmKGRhdGEgPT0gMSl7XG4gICAgICAgICAgICAgICAgIFJlZGlyZWN0aW5nKCk7XG4gICAgICAgICAgICB9ZWxzZSBpZihkYXRhID09MCl7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3dlIGFyZSBmaXJlZCB0aGlzIGNhbiBub3QgaGFwcGVuJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLmVycm9yKGZ1bmN0aW9uKGVycm9yKSB7XG5cbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGZ1bmN0aW9uIFJlZGlyZWN0aW5nKCl7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24gPSAnL2NoZWNrRW1haWwnO1xuICAgICAgICB9XG4gICAgfVxufV0pO1xuXG5Mb2dnZXIuZGlyZWN0aXZlKCd1bmlxdWVVc2VybmFtZScsIFsnaXNVc2VybmFtZUF2YWlsYWJsZScsZnVuY3Rpb24oaXNVc2VybmFtZUF2YWlsYWJsZSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICAgIHJlcXVpcmU6ICduZ01vZGVsJyxcbiAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBuZ01vZGVsKSB7XG4gICAgICAgICAgICBuZ01vZGVsLiRhc3luY1ZhbGlkYXRvcnMudW5pcXVlVXNlcm5hbWUgPSBpc1VzZXJuYW1lQXZhaWxhYmxlO1xuICAgICAgICB9XG4gICAgfTtcbn1dKTtcbkxvZ2dlci5mYWN0b3J5KCdpc1VzZXJuYW1lQXZhaWxhYmxlJywgWyckcScsJyRodHRwJywnJHJvb3RTY29wZScsZnVuY3Rpb24oJHEsICRodHRwLCRyb290U2NvcGUpIHtcbiAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgJ2J0bi1sb2FkaW5nJzogJzxpIGNsYXNzPVwiZmEgZmEtc3Bpbm5lciBmYS1wdWxzZVwiPjwvaT4nLFxuICAgICAgICAnYnRuLXN1Y2Nlc3MnOiAnPGkgY2xhc3M9XCJmYSBmYS1jaGVja1wiPjwvaT4nLFxuICAgICAgICAnYnRuLWVycm9yJzogJzxpIGNsYXNzPVwiZmEgZmEtcmVtb3ZlXCI+PC9pPicsXG4gICAgICAgICdtc2ctc3VjY2Vzcyc6ICdBbGwgR29vZCEgUmVkaXJlY3RpbmcuLi4nLFxuICAgICAgICAnbXNnLXVzZXJuYW1lLWF2YWlsYWJsZSc6ICdnb29kIHVzZXJuYW1lIGF2YWlsYWJsZSEnLFxuICAgICAgICAnbXNnLXVzZXJuYW1lLXRha2VuJyAgICA6ICdvb3BzIHVzZXJuYW1lIHRha2VuJyxcbiAgICAgICAgJ21zZy1lbWFpbC10YWtlbicgICAgICAgOiAnZW1haWwgdGFrZW4nLFxuICAgICAgICAnbXNnLXlvdXItcGhvbmUtc3VjaycgICA6ICd5b3VyIHBob25lIGlzIG5vdCB2YWxpZCcsXG4gICAgICAgICd1c2VBSkFYJzogdHJ1ZSxcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbih1c2VybmFtZSkge1xuXG4gICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cbiAgICAgICAgJGh0dHAuZ2V0KCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS91c2Vycz91c2VybmFtZT0nICsgdXNlcm5hbWUgKyAnJmFjY2Vzc190b2tlbj1CYzdEV1M3S0tSTHR4bWRkVVpJMVQxbFp1MkoxWWhSOE9MWEdXTlpuJykuc3VjY2VzcyhmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgIGlmKGRhdGE9PSdhdmFpbGFibGUnKXtcbiAgICAgICAgICAgICAgICAkKCcucmVnaXN0ZXItZm9ybS1tYWluLW1lc3NhZ2UnKS5hZGRDbGFzcygnc2hvdyBzdWNjZXNzJykuaHRtbChvcHRpb25zWydtc2ctdXNlcm5hbWUtYXZhaWxhYmxlJ10pO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQobWVzc2FnZVJlbW92ZSwgMjAwMCk7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gbWVzc2FnZVJlbW92ZSgpe1xuICAgICAgICAgICAgICAgICAgICAkKCcucmVnaXN0ZXItZm9ybS1tYWluLW1lc3NhZ2UnKS5yZW1vdmVDbGFzcygnc2hvdyBzdWNjZXNzJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfWVsc2UgaWYoZGF0YT09J3Rha2VuJyl7XG4gICAgICAgICAgICAgICAgJCgnLnJlZ2lzdGVyLWZvcm0tbWFpbi1tZXNzYWdlJykuYWRkQ2xhc3MoJ3Nob3cgZXJyb3InKS5odG1sKG9wdGlvbnNbJ21zZy11c2VybmFtZS10YWtlbiddKTtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KHVzZXJuYW1lVGFrZW4sIDIwMDApO1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHVzZXJuYW1lVGFrZW4oKXtcbiAgICAgICAgICAgICAgICAgICAgJCgnLnJlZ2lzdGVyLWZvcm0tbWFpbi1tZXNzYWdlJykucmVtb3ZlQ2xhc3MoJ3Nob3cgZXJyb3InKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoKTtcbiAgICAgICAgfSkuZXJyb3IoZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgIH1cbn1dKTtcbkxvZ2dlci5kaXJlY3RpdmUoJ3VuaXF1ZUVtYWlsJywgWydpc0VtYWlsQXZhaWxhYmxlJyxmdW5jdGlvbihpc0VtYWlsQXZhaWxhYmxlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgcmVxdWlyZTogJ25nTW9kZWwnLFxuICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIG5nTW9kZWwpIHtcbiAgICAgICAgICAgIG5nTW9kZWwuJGFzeW5jVmFsaWRhdG9ycy51bmlxdWVFbWFpbCA9IGlzRW1haWxBdmFpbGFibGU7XG4gICAgICAgIH1cbiAgICB9O1xufV0pO1xuTG9nZ2VyLmZhY3RvcnkoJ2lzRW1haWxBdmFpbGFibGUnLCBbJyRxJywnJGh0dHAnLCckcm9vdFNjb3BlJyxmdW5jdGlvbiAoJHEsICRodHRwLCAkcm9vdFNjb3BlKSB7XG4gICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgICdidG4tbG9hZGluZyc6ICc8aSBjbGFzcz1cImZhIGZhLXNwaW5uZXIgZmEtcHVsc2VcIj48L2k+JyxcbiAgICAgICAgJ2J0bi1zdWNjZXNzJzogJzxpIGNsYXNzPVwiZmEgZmEtY2hlY2tcIj48L2k+JyxcbiAgICAgICAgJ2J0bi1lcnJvcic6ICc8aSBjbGFzcz1cImZhIGZhLXJlbW92ZVwiPjwvaT4nLFxuICAgICAgICAnbXNnLXN1Y2Nlc3MnOiAnQWxsIEdvb2QhIFJlZGlyZWN0aW5nLi4uJyxcbiAgICAgICAgJ21zZy11c2VybmFtZS1hdmFpbGFibGUnOiAnZ29vZCB1c2VybmFtZSBhdmFpbGFibGUhJyxcbiAgICAgICAgJ21zZy11c2VybmFtZS10YWtlbicgICAgOiAnb29wcyB1c2VybmFtZSB0YWtlbicsXG4gICAgICAgICdtc2ctZW1haWwtdGFrZW4nICAgICAgIDogJ2VtYWlsIHRha2VuJyxcbiAgICAgICAgJ21zZy1lbWFpbC1hdmFpbGFibGUnICAgOiAnZW1haWwgYXZhaWxhYmxlJyxcbiAgICAgICAgJ21zZy15b3VyLXBob25lLXN1Y2snICAgOiAneW91ciBwaG9uZSBpcyBub3QgdmFsaWQnLFxuICAgICAgICAndXNlQUpBWCc6IHRydWUsXG4gICAgfTtcblxuICAgIHJldHVybiBmdW5jdGlvbihlbWFpbCkge1xuICAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuICAgICAgICAkaHR0cC5nZXQoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL3VzZXJzP2VtYWlsPScgKyBlbWFpbCArICcmYWNjZXNzX3Rva2VuPUJjN0RXUzdLS1JMdHhtZGRVWkkxVDFsWnUySjFZaFI4T0xYR1dOWm4nKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpe1xuXG4gICAgICAgICAgICBpZihkYXRhPT0nZW1haWwtYXZhaWxhYmxlJyl7XG4gICAgICAgICAgICAgICAgJCgnLnJlZ2lzdGVyLWZvcm0tbWFpbi1tZXNzYWdlJykuYWRkQ2xhc3MoJ3Nob3cgc3VjY2VzcycpLmh0bWwob3B0aW9uc1snbXNnLWVtYWlsLWF2YWlsYWJsZSddKTtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KG1lc3NhZ2VSZW1vdmUsIDIwMDApO1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG1lc3NhZ2VSZW1vdmUoKXtcbiAgICAgICAgICAgICAgICAgICAgJCgnLnJlZ2lzdGVyLWZvcm0tbWFpbi1tZXNzYWdlJykucmVtb3ZlQ2xhc3MoJ3Nob3cgc3VjY2VzcycpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfWVsc2UgaWYoZGF0YT09J2VtYWlsLXRha2VuJyl7XG4gICAgICAgICAgICAgICAgJCgnLnJlZ2lzdGVyLWZvcm0tbWFpbi1tZXNzYWdlJykuYWRkQ2xhc3MoJ3Nob3cgZXJyb3InKS5odG1sKG9wdGlvbnNbJ21zZy1lbWFpbC10YWtlbiddKTtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KG1lc3NhZ2VFbWFpbFRha2VuLCAyMDAwKTtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBtZXNzYWdlRW1haWxUYWtlbigpe1xuICAgICAgICAgICAgICAgICAgICAkKCcucmVnaXN0ZXItZm9ybS1tYWluLW1lc3NhZ2UnKS5yZW1vdmVDbGFzcygnc2hvdyBlcnJvcicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoKTtcbiAgICAgICAgIH0pLmVycm9yKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgICAgICAgfSk7XG4gICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9O1xufV0pO1xuXG5zeW5jLnNlcnZpY2UoJ0ZpbGVzJywgWyckaHR0cCcsJyRxJywnJHJvb3RTY29wZScsZnVuY3Rpb24gRmlsZXMgKCRodHRwLCRxLCRyb290U2NvcGUpIHtcbiAgICB0aGlzLmdldEdyb3VwRmlsZXMgPWZ1bmN0aW9uKGdyb3VwSWQpIHtcbiAgICAgICAgdmFyIGRpZmZlcmVkID0gJHEuZGVmZXIoKTtcbiAgICAgICAgLy9kb3duIGVuZHBvaW50IHJldHVybiBhbGwgZmlsZXMgSSBvd25cbiAgICAgICAgJGh0dHAuZ2V0KCRyb290U2NvcGUuZW5kUG9pbnQgKycvYXBpL3YxL2dyb3Vwcy8nK2dyb3VwSWQrJy9ncm91cGZpbGVzJylcbiAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgICAgZGlmZmVyZWQucmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5lcnJvcihmdW5jdGlvbihlcnJvcikge1xuICAgICAgICAgICAgZGlmZmVyZWQucmVqZWN0KGVycm9yKTtcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGRpZmZlcmVkLnByb21pc2U7XG4gICAgfTtcbiAgICB0aGlzLnNpbmdsZSA9IGZ1bmN0aW9uKGZpbGUpe1xuICAgICAgdmFyIHByb21pc2UgPSAkcS5kZWZlcigpO1xuICAgICAgJGh0dHAuZ2V0KCRyb290U2NvcGUuZW5kUG9pbnQrICcvcHJldmlldy8nKyBmaWxlKVxuICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICBwcm9taXNlLnJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgfSlcbiAgICAgIC5lcnJvcihmdW5jdGlvbihlcnIpe1xuICAgICAgICBwcm9taXNlLnJlamVjdChlcnIpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gcHJvbWlzZS5wcm9taXNlO1xuICAgIH07XG4gICAgdGhpcy5nZXRCb3hGaWxlcyA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciBncm91cElkID0gMTsvL2J5IGRlZmF1bHQgdGhpcyBjYW4gYmUgYW55IG51bWJlclxuICAgICAgICB2YXIgZGlmZmVyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICAvL3RoZSBpZGVhIGlzIHRvIGdldCBhIGZpbGUgZWl0aGVyIGZyb20gZ3JvdXBzIG9yIGluZGl2aWR1YWwgYWNjb3VudCBncm91cCBpcyBvcHRpb25hbFxuICAgICAgICAkaHR0cC5nZXQoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL2dyb3Vwcy8nK2dyb3VwSWQrJy9ib3hmaWxlcycpXG4gICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgICBkaWZmZXJlZC5yZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmVycm9yKGZ1bmN0aW9uKGVycil7XG4gICAgICAgICAgZGlmZmVyZWQucmVqZWN0KGVycik7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcbiAgICB9O1xuICAgIHRoaXMuZ2V0TWltZVR5cGUgPSBmdW5jdGlvbihmaWxlX25hbWUpe1xuICAgICAgdmFyIHByb21pc2UgPSAkcS5kZWZlcigpO1xuICAgICAgJGh0dHAuZ2V0KCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS9maWxlcy9taW1lVHlwZS8nKyBmaWxlX25hbWUpXG4gICAgICAuc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgICAgcHJvbWlzZS5yZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgIH0pXG4gICAgICAuZXJyb3IoZnVuY3Rpb24oZXJyKXtcbiAgICAgICAgICBwcm9taXNlLnJlamVjdChlcnIpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gcHJvbWlzZS5wcm9taXNlO1xuICAgIH07XG4gICAgdGhpcy5kb3dubG9hZEZpbGUgPSBmdW5jdGlvbihmaWxlX25hbWUpe1xuXG4gICAgICB2YXIgcHJvbWlzZSA9ICRxLmRlZmVyKCk7XG4gICAgICAvL2hhcmQgY29kZWQgYSB1c2VyIFN0cmltVXAhIG5lZWQgdG8gaW5qZWN0IGhpbSBkeWFtaWNhbGx5XG4gICAgICAkaHR0cC5nZXQoJHJvb3RTY29wZS5lbmRQb2ludCsgJy9hcGkvdjEvZmlsZXMvZG93bmxvYWQvJytmaWxlX25hbWUrJy9vZi8nKyAnU3RyaW1VcCcpXG4gICAgICAuc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgIHByb21pc2UucmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICB9KVxuICAgICAgLmVycm9yKGZ1bmN0aW9uKGVycil7XG4gICAgICAgIHByb21pc2UucmVqZWN0KGVycik7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBwcm9taXNlLnByb21pc2U7XG4gICAgfTtcbiAgICByZXR1cm4gdGhpcztcbn1dKTtcblxuc3luYy5zZXJ2aWNlKCdQZW9wbGUnLCBbJyRxJywnJGh0dHAnLCckcm9vdFNjb3BlJyxmdW5jdGlvbiAoJHEsICRodHRwLCAkcm9vdFNjb3BlKSB7XG5cdHRoaXMuZ2V0ICA9IGZ1bmN0aW9uICgpe1xuXHRcdHZhciBkaWZmZXJlZCA9ICRxLmRlZmVyKCk7XG5cdFx0JGh0dHAuZ2V0KCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS9zdWdnZXN0aW9ucycpXG5cdFx0LnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcG9uc2Upe1xuXHRcdFx0ZGlmZmVyZWQucmVzb2x2ZShyZXNwb25zZSk7XG5cdFx0fSlcblx0XHQuZXJyb3IoZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdGRpZmZlcmVkLnJlamVjdChlcnJvcik7XG5cdFx0fSlcblx0XHRyZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcblx0fVxuXHR0aGlzLmFsbElmb2xsb3cgPSBmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIGRpZmZlcmVkID0gJHEuZGVmZXIoKTtcblx0XHQkaHR0cC5nZXQoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL21lL2ZvbGxvd2luZ3MnKVxuXHRcdC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblx0XHRcdGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuXHRcdH0pXG5cdFx0LmVycm9yKGZ1bmN0aW9uKGVycil7XG5cdFx0XHRkaWZmZXJlZC5yZWplY3QoZXJyKTtcblx0XHR9KVxuXHRcdHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuXHR9XG5cdHRoaXMudW5Gb2xsb3cgPSBmdW5jdGlvbihpZCl7XG5cdFx0dmFyIGRpZmZlcmVkID0gJHEuZGVmZXIoKTtcblx0XHQkaHR0cC5kZWxldGUoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL21lL2ZvbGxvd2luZy8nICtpZClcblx0XHQuc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSl7XG5cdFx0XHRkaWZmZXJlZC5yZXNvbHZlKHJlc3BvbnNlKTtcblx0XHR9KVxuXHRcdC5lcnJvcihmdW5jdGlvbihlcnIpe1xuXHRcdFx0ZGlmZmVyZWQucmVqZWN0KGVycik7XG5cdFx0fSlcblx0XHRyZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcblx0fVxuXHR0aGlzLmZvbGxvdyA9IGZ1bmN0aW9uKHBhcmFtKXtcblx0XHR2YXIgZGlmZmVyZWQgPSAkcS5kZWZlcigpO1xuXHRcdCRodHRwLnB1dCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvbWUvZm9sbG93aW5ncycsIHBhcmFtKVxuXHRcdC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblx0XHRcdGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuXHRcdH0pXG5cdFx0LmVycm9yKGZ1bmN0aW9uKGVycm9yKXtcblx0XHRcdGRpZmZlcmVkLnJlamVjdChlcnJvcik7XG5cdFx0fSlcblx0XHRyZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcblx0fVxuXHRyZXR1cm4gdGhpcztcbn1dKTtcblxuc3luYy5zZXJ2aWNlKCdTaGFyZScsWyckbG9nJywnJGh0dHAnLCckcScsJyRyb290U2NvcGUnLCBmdW5jdGlvbiAoJGxvZywkaHR0cCwkcSwkcm9vdFNjb3BlKSB7XG5cdHRoaXMuc2hhcmUgPSBmdW5jdGlvbihzaGFyZWJsZU9iail7XG5cdFx0dmFyIGRpZmZlcmVkID0gJHEuZGVmZXIoKTtcbiAgICAgICAgJGh0dHAucG9zdCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvc2hhcmUnLHNoYXJlYmxlT2JqKVxuICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgICAgICBkaWZmZXJlZC5yZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmVycm9yKGZ1bmN0aW9uKGVycil7XG4gICAgICAgICAgICBkaWZmZXJlZC5yZWplY3QoZXJyKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuXHR9O1xuXHR0aGlzLmdldFVzZXIgPSBmdW5jdGlvbih1c2VyKXtcblxuXHRcdHZhciBkaWZmZXJlZCA9ICRxLmRlZmVyKCk7XG5cdFx0JGh0dHAuZ2V0KCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS9tZS91c2Vycy8nKyB1c2VyKVxuXHRcdC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblx0XHRcdGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuXHRcdH0pXG5cdFx0LmVycm9yKGZ1bmN0aW9uKGVycil7XG5cdFx0XHRkaWZmZXJlZC5yZWplY3QoZXJyKTtcblx0XHR9KTtcblx0XHRyZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcblx0fTtcblx0dGhpcy5maWxlTWltZSA9IGZ1bmN0aW9uKGZpbGUpe1xuXHRcdHZhciBkaWZmZXJlZCA9ICRxLmRlZmVyKCk7XG5cdFx0JGh0dHAuZ2V0KCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS9taW1lVHlwZS8nKyBmaWxlKVxuXHRcdC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblx0XHRcdGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuXHRcdH0pXG5cdFx0LmVycm9yKGZ1bmN0aW9uKGVycil7XG5cdFx0XHRkaWZmZXJlZC5yZWplY3QoZXJyKTtcblx0XHR9KTtcblx0XHRyZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcblx0fTtcbiAgICByZXR1cm4gdGhpcztcbn1dKTtcbnN5bmMuc2VydmljZSgnVXNlcicsIFsnJGh0dHAnLCckcScsJyRyb290U2NvcGUnLGZ1bmN0aW9uIEZpbGVzICgkaHR0cCwkcSwkcm9vdFNjb3BlKSB7XG5cdHRoaXMuaW5mbyA9IGZ1bmN0aW9uKCl7XG5cdFx0dmFyIHByb21pc2UgPSAkcS5kZWZlcigpO1xuXHRcdCRodHRwLmdldCgkcm9vdFNjb3BlLmVuZFBvaW50ICtcIi9hcGkvdjEvdXNlcnMvaW5mb1wiKVxuXHRcdC5zdWNjZXNzKGZ1bmN0aW9uKHJlcyl7XG5cdFx0XHRwcm9taXNlLnJlc29sdmUocmVzKTtcblx0XHR9KVxuXHRcdC5lcnJvcihmdW5jdGlvbigpIHtcblx0XHRcdHByb21pc2UucmVqZWN0KCk7XG5cdFx0fSk7XG5cdFx0cmV0dXJuIHByb21pc2UucHJvbWlzZTtcblx0fTtcblx0dGhpcy5ncm91cHMgPSBmdW5jdGlvbih1c2VyKXtcbiAgICAgIHZhciBkaWZmZXJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAkaHR0cC5nZXQoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL21lL2dyb3VwcycpXG4gICAgICAuc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgIGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgfSlcbiAgICAgIC5lcnJvcihmdW5jdGlvbihlcnIpe1xuICAgICAgICBkaWZmZXJlZC5yZWplY3QoZXJyKTtcbiAgICAgIH0pXG4gICAgICByZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcbiAgICB9XG4gICAgXG5cdHJldHVybiB0aGlzO1xufV0pXG4vKiBnbG9iYWwgc3luYyAqL1xuc3luYy5zZXJ2aWNlKCdOb3RpZmljYXRpb24nLCBbJyRodHRwJywgJyRxJywgJyRyb290U2NvcGUnLCBmdW5jdGlvbiBOb3RpZmljYXRpb24oJGh0dHAsICRxLCAkcm9vdFNjb3BlKSB7XG4gICAgdGhpcy5nZXROb3RpZmljYXRpb24gPSBmdW5jdGlvbiAodXNlcl9pZCkge1xuICAgICAgICB2YXIgZGlmZmVyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICAkaHR0cC5nZXQoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL25vdGlmaWNhdGlvbnMnLCB7Y2FjaGU6IGZhbHNlfSlcbiAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBkaWZmZXJlZC5yZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGRpZmZlcmVkLnByb21pc2U7XG4gICAgfVxuICAgIHRoaXMuY3JlYXRlTm90aWZpY2F0aW9uID0gZnVuY3Rpb24gKE5vdGlmaWNhdGlvbikge1xuICAgICAgICB2YXIgZGlmZmVyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICAkaHR0cC5wb3N0KCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS9ub3RpZmljYXRpb25zJywgTm90aWZpY2F0aW9uKVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgZGlmZmVyZWQucmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGRpZmZlcmVkLnJlamVjdChlcnJvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGRpZmZlcmVkLnByb21pc2U7XG4gICAgfVxuICAgIHRoaXMuZGVsZXRlTm90aWZpY2F0aW9uID0gZnVuY3Rpb24gKG5vdGlmaWNhdGlvbikge1xuICAgICAgICB2YXIgZGlmZmVyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICAkaHR0cC5kZWxldGUoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL25vdGlmaWNhdGlvbnMvJyArIG5vdGlmaWNhdGlvbilcbiAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBkaWZmZXJlZC5yZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGRpZmZlcmVkLnByb21pc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG59XSk7XG5cbnN5bmMuY29udHJvbGxlcignbm90aWZpY2F0aW9uQ29udHJvbGxlcicsIFsnJHNjb3BlJywnTm90aWZpY2F0aW9uJywnJGxvZycsIGZ1bmN0aW9uICgkc2NvcGUsTm90aWZpY2F0aW9uLCRsb2cpIHtcbiAgICAkc2NvcGUuaW5pdCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICRzY29wZS5nZXROb3RpZmljYXRpb24oKTtcbiAgICB9XG4gICAgJHNjb3BlLmNsZWFyTm90aWZpY2F0aW9uID0gZnVuY3Rpb24obm90aWZpY2F0aW9uKXtcblxuXG4gICAgICBOb3RpZmljYXRpb24uY2xlYXJOb3RpZmljYXRpb24obm90aWZpY2F0aW9uKVxuICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAvL2xvYWQgcmVtYWluaW5nIG5vdGlmaWNhdGlvblxuICAgICAgICAkc2NvcGUuZ2V0Tm90aWZpY2F0aW9uKCk7XG4gICAgICB9LGZ1bmN0aW9uKGVycil7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICB9KTtcbiAgICB9XG4gICAgJHNjb3BlLmdldE5vdGlmaWNhdGlvbiA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIE5vdGlmaWNhdGlvbi5nZXROb3RpZmljYXRpb24oKVxuICAgICAgICAudGhlbihmdW5jdGlvbihyZXN1bHQpe1xuICAgICAgICAgICAgLy8gJGxvZy5pbmZvKHJlc3VsdCk7XG4gICAgICAgICAgICAkc2NvcGUubm90aWZpY2F0aW9ucyA9IHJlc3VsdDtcbiAgICAgICAgICAgIFxuICAgICAgICB9LGZ1bmN0aW9uKGVycm9yKXtcbiAgICAgICAgICAgIC8vICRsb2cuaW5mbyhlcnJvcik7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAkc2NvcGUuaW5pdCgpO1xufV0pO1xuc3luYy5kaXJlY3RpdmUoJ25vdGlmeScsW2Z1bmN0aW9uKCl7XG4gIHJldHVybntcbiAgICByZXN0cmljdDonQUUnLFxuICAgIHNjb3BlOntcblxuICAgIH0sXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsLCBpQXR0cnMpe1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICB2YXIgdGl0bGU9J1RoaXMgd2lsbCBiZSB0aXRsZSc7XG4gICAgICAgICAgICAgIHZhciBkZXNjPSdNb3N0IHBvcHVsYXIgYXJ0aWNsZS4nO1xuICAgICAgICAgICAgICB2YXIgdXJsPSdzeW5jLmNvbTo4MDAwJztcbiAgICAgICAgICAgICAgbm90aWZ5QnJvd3Nlcih0aXRsZSxkZXNjLHVybCk7XG4gICAgICAgICAgfSwgMjAwMCk7XG4gICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpe1xuICAgICAgICAgICAgICAgIGlmIChOb3RpZmljYXRpb24ucGVybWlzc2lvbiAhPT0gXCJncmFudGVkXCIpe1xuICAgICAgICAgICAgICAgICAgTm90aWZpY2F0aW9uLnJlcXVlc3RQZXJtaXNzaW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgZnVuY3Rpb24gbm90aWZ5QnJvd3Nlcih0aXRsZSxkZXNjLHVybClcbiAgICAgIHtcbiAgICAgICAgaWYgKCFOb3RpZmljYXRpb24pIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdEZXNrdG9wIG5vdGlmaWNhdGlvbnMgbm90IGF2YWlsYWJsZSBpbiB5b3VyIGJyb3dzZXIuLicpO1xuICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKE5vdGlmaWNhdGlvbi5wZXJtaXNzaW9uICE9PSBcImdyYW50ZWRcIil7XG4gICAgICAgICAgTm90aWZpY2F0aW9uLnJlcXVlc3RQZXJtaXNzaW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgdmFyIG5vdGlmaWNhdGlvbiA9IG5ldyBOb3RpZmljYXRpb24odGl0bGUsIHtcbiAgICAgICAgICAgIGljb246J2h0dHBzOi8vbGgzLmdvb2dsZXVzZXJjb250ZW50LmNvbS8tYUNGaUs0YmFYWDQvVmptR0pvanNRX0kvQUFBQUFBQUFOSmcvaC1zTFZYMU01ekEvczQ4LUljNDIvZWdnc21hbGwucG5nJyxcbiAgICAgICAgICAgIGJvZHk6IGRlc2MsXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBSZW1vdmUgdGhlIG5vdGlmaWNhdGlvbiBmcm9tIE5vdGlmaWNhdGlvbiBDZW50ZXIgd2hlbiBjbGlja2VkLlxuICAgICAgICBub3RpZmljYXRpb24ub25jbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHdpbmRvdy5vcGVuKHVybCk7XG4gICAgICAgIH07XG4gICAgICAgIC8vIENhbGxiYWNrIGZ1bmN0aW9uIHdoZW4gdGhlIG5vdGlmaWNhdGlvbiBpcyBjbG9zZWQuXG4gICAgICAgIG5vdGlmaWNhdGlvbi5vbmNsb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdOb3RpZmljYXRpb24gY2xvc2VkJyk7XG4gICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1dKVxuXG5zeW5jLmZhY3RvcnkoJ3VzZXJJbnRlcmFjdGlvbk5vdGlmaWNhdGlvbicsIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MobWVzc2FnZSwgXCJTdWNjZXNzXCIpO1xuICAgICAgICB9LFxuICAgICAgICB3YXJuOiBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgdG9hc3RyLndhcm5pbmcobWVzc2FnZSwgXCJIZXlcIik7XG4gICAgICAgIH0sXG4gICAgICAgIGluZm86IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgICAgICB0b2FzdHIuaW5mbyhtZXNzYWdlLCBcIkZZSVwiKTtcbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgICAgICB0b2FzdHIuZXJyb3IobWVzc2FnZSwgXCJPaCBOb1wiKTtcbiAgICAgICAgfVxuICAgIH07XG59KTtcblxuc3luYy5mYWN0b3J5KCd1c2VySW50ZXJhY3Rpb25Ob3RpZmljYXRpb24nLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIHRvYXN0ci5zdWNjZXNzKG1lc3NhZ2UsIFwiU3VjY2Vzc1wiKTtcbiAgICAgICAgfSxcbiAgICAgICAgd2FybjogZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIHRvYXN0ci53YXJuaW5nKG1lc3NhZ2UsIFwiSGV5XCIpO1xuICAgICAgICB9LFxuICAgICAgICBpbmZvOiBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgdG9hc3RyLmluZm8obWVzc2FnZSwgXCJGWUlcIik7XG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yOiBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgdG9hc3RyLmVycm9yKG1lc3NhZ2UsIFwiT2ggTm9cIik7XG4gICAgICAgIH1cbiAgICB9O1xufSk7XG5cblxuc3luYy5jb250cm9sbGVyKCd1cGxvYWREaWFsb2dDdHJsJywgWyckc2NvcGUnLCckdWliTW9kYWwnLCckbWREaWFsb2cnLCckbWRNZWRpYScsIGZ1bmN0aW9uICgkc2NvcGUsJHVpYk1vZGFsLCAkbWREaWFsb2csICRtZE1lZGlhKSB7XG5cblx0XHRcdFx0Ly9kZWNsYXJlIGdsb2JhbCBmdW5jdGlvbiBmb3Igc2hvcnRjdXRcblx0XHRcdFx0JHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdCRtZERpYWxvZy5oaWRlKCk7XG5cdFx0XHRcdH07XG5cdFx0ICAgICRzY29wZS5jdXN0b21GdWxsc2NyZWVuID0gJG1kTWVkaWEoJ3hzJykgfHwgJG1kTWVkaWEoJ3NtJyk7XG5cdFx0ICAgICRzY29wZS51cGxvYWQgPSBmdW5jdGlvbihldikge1xuXHRcdCAgICAgICRtZERpYWxvZy5zaG93KHtcblx0XHRcdFx0XHRcdHBhcmVudDogYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LmJvZHkpLFxuXHRcdCAgICAgICAgY29udHJvbGxlcjogRGlhbG9nQ29udHJvbGxlcixcblx0XHQgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvdXBsb2FkLnRwbC5odG1sJyxcblx0XHQgICAgICAgIHBhcmVudDogYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LmJvZHkpLFxuXHRcdCAgICAgICAgdGFyZ2V0RXZlbnQ6IGV2LFxuXHRcdCAgICAgICAgY2xpY2tPdXRzaWRlVG9DbG9zZTpmYWxzZVxuXHRcdCAgICAgIH0pXG5cdFx0ICAgICAgLnRoZW4oZnVuY3Rpb24oYW5zd2VyKSB7XG5cdFx0ICAgICAgICAgICAgJHNjb3BlLnN0YXR1cyA9ICdZb3Ugc2FpZCB0aGUgaW5mb3JtYXRpb24gd2FzIFwiJyArIGFuc3dlciArICdcIi4nO1xuXHRcdCAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcblx0XHQgICAgICAgICAgICAkc2NvcGUuc3RhdHVzID0gJ1lvdSBjYW5jZWxsZWQgdGhlIGRpYWxvZy4nO1xuXHRcdCAgICAgICAgICB9KTtcblx0XHQgICAgfTtcblx0XHRcdFx0ZnVuY3Rpb24gRGlhbG9nQ29udHJvbGxlcigkc2NvcGUsICRtZERpYWxvZykge1xuXHRcdFx0XHQgICRzY29wZS5oaWRlID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCAgICAkbWREaWFsb2cuaGlkZSgpO1xuXHRcdFx0XHQgIH07XG5cdFx0XHRcdCAgJHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHQgICAgJG1kRGlhbG9nLmNhbmNlbCgpO1xuXHRcdFx0XHQgIH07XG5cdFx0XHRcdCAgJHNjb3BlLmFuc3dlciA9IGZ1bmN0aW9uKGFuc3dlcikge1xuXHRcdFx0XHQgICAgJG1kRGlhbG9nLmhpZGUoYW5zd2VyKTtcblx0XHRcdFx0ICB9O1xuXHRcdFx0XHR9XG5cdFx0XHRcdERpYWxvZ0NvbnRyb2xsZXIuJGluamVjdCA9IFtcIiRzY29wZVwiLCBcIiRtZERpYWxvZ1wiXTtcbn1dKTtcbnN5bmMuY29udHJvbGxlcignc2hhcmVDb250cm9sbGVyJywgWyckc2NvcGUnLCckdWliTW9kYWwnLCckbWREaWFsb2cnLCckbWRNZWRpYScsJ3VybFNob3J0ZW5lcicsJ1NoYXJlJywnVXNlcicsIGZ1bmN0aW9uICgkc2NvcGUsJHVpYk1vZGFsLCAkbWREaWFsb2csICRtZE1lZGlhLHVybFNob3J0ZW5lcixTaGFyZSxVc2VyKSB7XG5cblx0Ly9kZWNsYXJlIGdsb2JhbCBmdW5jdGlvbiBmb3Igc2hvcnRjdXRcblx0JHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uKCkge1xuXHRcdCRtZERpYWxvZy5oaWRlKCk7XG5cdH07XG5cdCRzY29wZS5jdXN0b21GdWxsc2NyZWVuID0gJG1kTWVkaWEoJ3hzJykgfHwgJG1kTWVkaWEoJ3NtJyk7XG5cdCRzY29wZS5zaGFyZSA9IGZ1bmN0aW9uKGV2LGZpbGVOYW1lKSB7XG5cblx0XHQkbWREaWFsb2cuc2hvdyh7XG5cdFx0XHRwYXJlbnQ6IGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5ib2R5KSxcblx0XHRcdGNvbnRyb2xsZXI6IERpYWxvZ0NvbnRyb2xsZXIsXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL3NoYXJlLnRwbC5odG1sJyxcblx0XHRcdHBhcmVudDogYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LmJvZHkpLFxuXHRcdFx0dGFyZ2V0RXZlbnQ6IGV2LFxuXHRcdFx0Y2xpY2tPdXRzaWRlVG9DbG9zZTpmYWxzZVxuXHRcdH0pXG5cdFx0LnRoZW4oZnVuY3Rpb24oYW5zd2VyKSB7XG5cdFx0XHRcdFx0JHNjb3BlLnN0YXR1cyA9ICdZb3Ugc2FpZCB0aGUgaW5mb3JtYXRpb24gd2FzIFwiJyArIGFuc3dlciArICdcIi4nO1xuXHRcdFx0XHR9LCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHQkc2NvcGUuc3RhdHVzID0gJ1lvdSBjYW5jZWxsZWQgdGhlIGRpYWxvZy4nO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0ZnVuY3Rpb24gRGlhbG9nQ29udHJvbGxlcigkc2NvcGUsICRtZERpYWxvZykge1xuXHRcdFx0XHRcdC8vIGNvbnNvbGUubG9nKCdzaGFyZWRGaWxlJysgZmlsZU5hbWUpO1xuXHRcdFx0XHRcdCRzY29wZS5nZXRGaWxlID0gZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRcdHJldHVybiAkc2NvcGUuZmlsZT11cmxTaG9ydGVuZXIubWFrZVNob3J0KGZpbGVOYW1lKTtcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdCRzY29wZS5oaWRlID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHQkbWREaWFsb2cuaGlkZSgpO1xuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0JHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0JG1kRGlhbG9nLmNhbmNlbCgpO1xuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0JHNjb3BlLmFuc3dlciA9IGZ1bmN0aW9uKGFuc3dlcikge1xuXHRcdFx0XHRcdFx0JG1kRGlhbG9nLmhpZGUoYW5zd2VyKTtcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9XG5cdFx0XHRcdERpYWxvZ0NvbnRyb2xsZXIuJGluamVjdCA9IFtcIiRzY29wZVwiLCBcIiRtZERpYWxvZ1wiXTtcblxuXHR9O1xuXG5cblxuXHQkc2NvcGUuc2hhcmVGaWxlID0gZnVuY3Rpb24odm0pe1xuXG5cdFx0dmFyIGVtYWlscz12bS5lbWFpbHM7XG5cdFx0dmFyIGVtYWlsX2FycmF5ID0gZW1haWxzLnNwbGl0KCcsJyk7XG5cdFx0dmFyIGk7XG5cdFx0Zm9yICggaT0wOyBpIDwgZW1haWxfYXJyYXkubGVuZ3RoOyBpKysgKSB7XG5cdFx0XHQvL3ZhbGlkYXRlIGVhY2ggZW1haWwgdG8gc2hhcmUgd2l0aFxuXHRcdFx0U2hhcmUuc2hhcmUodm0pXG5cdFx0XHQudGhlbihmdW5jdGlvbihyZXMpe1xuXHRcdFx0XHRjb25zb2xlLmxvZyhyZXMpO1xuXHRcdFx0fSkuY2F0Y2goKTtcblx0XHRcdC8vIGNvbnNvbGUubG9nKGVtYWlsX2FycmF5W2ldKTtcblxuXHRcdH1cblx0fVxuXG59XSk7XG5cbi8qIGdsb2JhbCBzeW5jICovXG4vKipcbiAqICBDcmVhdGVkIGJ5IE11cmFnaWppbWFuYSBSaWNoYXJkIG9uIDEwLzIwLzE1LlxuICogIEJlYXN0YXI0NTdAZ21haWwuY29tICwgc3luY0BnbWFpbC5jb20gLCBjaGVjayB3aXRoIG1lIVxuICovXG4vKkkgdXNlIENhbWVsQ2FzZSB3aGlsZSByZW5hbWluZyBteSBmdW5jdGlvbnMgKi9cbi8qYW5kIGkgdXNlIHNuYWtlIGNhc2Ugd2hpbGUgcmVuYW1pbmcgdmFyaWFibGVzICovXG4vKnBvc3Qgc2VydmljZSAqL1xuXG5zeW5jLnNlcnZpY2UoJ1Bvc3QnLCBbJyRodHRwJywgJyRxJywgJyRyb290U2NvcGUnLCBmdW5jdGlvbiBQb3N0KCRodHRwLCAkcSwgJHJvb3RTY29wZSkge1xuICAgIHRoaXMuZ2V0UG9zdCA9IGZ1bmN0aW9uICh1c2VyX2lkKSB7XG4gICAgICAgIHZhciBkaWZmZXJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgICRodHRwLmdldCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvbWUvcG9zdHM/dXNlcl9pZCcgKyB1c2VyX2lkLCB7Y2FjaGU6IGZhbHNlfSlcbiAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXG4gICAgICAgICAgICAgICAgZGlmZmVyZWQucmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGRpZmZlcmVkLnJlamVjdChlcnJvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGRpZmZlcmVkLnByb21pc2U7XG4gICAgfTtcbiAgICB0aGlzLnBhcnRpY2lwYXRlID0gZnVuY3Rpb24ob2JqKXtcbiAgICAgIHZhciBkaWZmZXJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAkaHR0cC5wdXQoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL21lL3Bvc3RzLycsb2JqKVxuICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICBkaWZmZXJlZC5yZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgIH0pXG4gICAgICAuZXJyb3IoZnVuY3Rpb24oZXJyKXtcbiAgICAgICAgZGlmZmVyZWQucmVqZWN0KGVycik7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuICAgIH07XG4gICAgdGhpcy5jcmVhdGVQb3N0ID0gZnVuY3Rpb24gKHBvc3QpIHtcbiAgICAgICAgdmFyIGRpZmZlcmVkID0gJHEuZGVmZXIoKTtcbiAgICAgICAgJGh0dHAucG9zdCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvbWUvcG9zdHMnLCBwb3N0KVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgZGlmZmVyZWQucmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGRpZmZlcmVkLnJlamVjdChlcnJvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGRpZmZlcmVkLnByb21pc2U7XG4gICAgfTtcbiAgICB0aGlzLmRlbGV0ZVBvc3QgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgdmFyIGRpZmZlcmVkID0gJHEuZGVmZXIoKTtcbiAgICAgICAgJGh0dHAuZGVsZXRlKCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS9tZS9wb3N0cy8nICsgaWQpXG4gICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICBkaWZmZXJlZC5yZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgZGlmZmVyZWQucmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcbiAgICB9O1xuICAgIHJldHVybiB0aGlzO1xufV0pO1xuXG5zeW5jLmNvbnRyb2xsZXIoJ1Bvc3RpbmdDb250cm9sbGVyJywgW1xuICAnJHNjb3BlJyxcbiAgJ1Bvc3QnLFxuICAnJHRpbWVvdXQnLFxuICAnVXNlcicsXG4gICckaW50ZXJ2YWwnLFxuICAnTm90aWZpY2F0aW9uJyxcbiAgLy8gJyRpb25pY0xpc3REZWxlZ2F0ZScsXG4gICckbG9nJyxcbiAgJ3VzZXJJbnRlcmFjdGlvbk5vdGlmaWNhdGlvbicsXG4gIGZ1bmN0aW9uIChcbiAgJHNjb3BlLFxuICBQb3N0LFxuICAkdGltZW91dCxcbiAgVXNlcixcbiAgJGludGVydmFsLFxuICBOb3RpZmljYXRpb24sXG4gICRpb25pY0xpc3REZWxlZ2F0ZSxcbiAgJGxvZyxcbiAgdXNlckludGVyYWN0aW9uTm90aWZpY2F0aW9uXG4pIHtcblxuICAgICRzY29wZS5pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkc2NvcGUucG9zdExvYWRlcigpO1xuICAgICAgICAkc2NvcGUuZ2V0VXNlcigpO1xuXG4gICAgfTtcblxuICAgICRpbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICRzY29wZS5wb3N0TG9hZGVyKCk7XG4gICAgfSwgODAwMCk7XG4gICAgJHNjb3BlLmdldFVzZXIgPWZ1bmN0aW9uKCl7XG5cbiAgICAgIFVzZXIuX2lkKClcbiAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblxuICAgICAgICAkc2NvcGUudXNlciA9IHJlc3BvbnNlO1xuICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgICB9LGZ1bmN0aW9uKGVycil7XG4gICAgICAgIC8vcXVpdCBzbGludGx5XG4gICAgICB9KTtcbiAgICB9O1xuICAgICRzY29wZS5sb2FkTW9yZSA9IGZ1bmN0aW9uKCl7XG5cbiAgICB9O1xuICAgICRzY29wZS5wYXJ0aWNpcGF0ZUludG9Qb3N0ID0gZnVuY3Rpb24ocG9zdCx1c2VyKXtcbiAgICAgIC8vIGNvbnNvbGUubG9nKHVzZXIpO1xuICAgICAgdmFyIG9iaiA9e1xuICAgICAgICAncG9zdF9pZCc6cG9zdCxcbiAgICAgICAgJ3VzZXJfaWQnOnVzZXJcbiAgICAgIH07XG4gICAgICBQb3N0LnBhcnRpY2lwYXRlKG9iailcbiAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgJHNjb3BlLnBvc3RMb2FkZXIoKTtcbiAgICAgIH0sZnVuY3Rpb24oZXJyKXtcbiAgICAgICAgLy9xdWl0IHNsZW50bHlcblxuICAgICAgfSk7XG4gICAgfTtcbiAgICAkc2NvcGUucG9zdExvYWRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJHNjb3BlLmRhdGFMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgUG9zdC5nZXRQb3N0KClcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uICh0cmVlKSB7XG5cbiAgICAgICAgICAgICAgICAkc2NvcGUucG9zdHMgPXRyZWU7XG4gICAgICAgICAgICAgICAgLy9uYXZpZ2F0ZSB0cm91Z2ggdHJlZSByZXNwb25zZSB3aGljaCBpcyByZXF1aXJlIG11Y2ggYXR0ZW50aW9uXG4gICAgICAgICAgICAgICAgJHNjb3BlLmZyaWVuZHM9W107XG4gICAgICAgICAgICAgICAgJHNjb3BlLnJlcGxpZXM9W107XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0cmVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0cmVlW2ldLmhhc093blByb3BlcnR5KCdmcmllbmRzJykgJiYgdHJlZVtpXVsncmVwbGllcyddICAmJiB0cmVlW2ldWydmcmllbmRzJ10gKSB7XG4gICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmZyaWVuZHMucHVzaCh0cmVlW2ldLmZyaWVuZHMpO1xuICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5yZXBsaWVzLnB1c2godHJlZVtpXS5yZXBsaWVzKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0cmVlW2ldLmhhc093blByb3BlcnR5KCdmcmllbmRzJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5mcmllbmRzID0gZnJpZW5kcy5jb25jYXQodHJhdmVyc2UodHJlZVtpXS5mcmllbmRzKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVwbGllcyA9IHJlcGxpZXMuY29uY2F0KHRyYXZlcnNlKHRyZWVbaV0ucmVwbGllcykpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgJHNjb3BlLmltYWdlRGVzYyA9IGZ1bmN0aW9uKGluZGV4KXtcbiAgICAgIC8vc2hvdyBpbWFnZXMgd2l0aCBkaWZmZXJlbnQgcGl4ZWxcbiAgICAgIHN3aXRjaCAoaW5kZXgpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgIHJldHVybiAnNjBweCc7XG5cbiAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICByZXR1cm4gXCI2MHB4XCI7XG5cbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICByZXR1cm4gXCI2MHB4XCI7XG5cbiAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICByZXR1cm4gXCI2MHB4XCI7XG5cbiAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICByZXR1cm4gXCI2MHB4XCI7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIFwiNjBweFwiO1xuXG4gICAgICB9XG4gICAgICBjb25zb2xlLmxvZyhpbmRleCk7XG4gICAgfTtcbiAgICAkc2NvcGUuc2hhcmUgPSBmdW5jdGlvbihpZCl7XG4gICAgICAgICRpb25pY0xpc3REZWxlZ2F0ZS5jbG9zZU9wdGlvbkJ1dHRvbnMoKTtcbiAgICAgICAgJGxvZy5pbmZvKGlkKTtcbiAgICB9O1xuICAgICRzY29wZS5jcmVhdGVQb3N0ID0gZnVuY3Rpb24gKHBvc3RpbmcpIHtcbiAgICAgIC8vaWYgaW1hZ2UgaXMgdXBsb2FkZWQgdXBsb2FkZWRcbiAgICAgICAgdmFyIF90aGlzID0geyBtZXNzYWdlOiBwb3N0aW5nIH07XG4gICAgICAgIFBvc3QuY3JlYXRlUG9zdChfdGhpcylcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChwb3N0Q3JlYXRlZCkge1xuICAgICAgICAgICAgICAgICAgJHNjb3BlLm1lc3NhZ2UgPSAnJztcbiAgICAgICAgICAgICAgICAgICRzY29wZS5wb3N0cy5wdXNoKHBvc3RDcmVhdGVkKTtcbiAgICAgICAgICAgICAgICAgIHVzZXJJbnRlcmFjdGlvbk5vdGlmaWNhdGlvbi5zdWNjZXNzKFwiTmV3IFBvc3QgZmVlZCBjcmVhdGVkIVwiKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuXG4gICAgICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLmluaXQoKTtcbn1dKTtcbnN5bmMuZGlyZWN0aXZlKCdmZWVkc1VwbG9hZGVyJyxbZnVuY3Rpb24oKXtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0FFJyxcbiAgICByZXBsYWNlOiBmYWxzZSxcbiAgICB0ZW1wbGF0ZVVybDogJ0FwcC9qcy9zY3JpcHRzL3ZpZXdzL2ZlZWRBdHRhY2htZW50Lmh0bWwnLFxuICAgIHNjb3BlOiB7XG4gICAgICBhY3Rpb246ICdAJ1xuICAgIH0sXG4gICAgY29udHJvbGxlcjogWyckc2NvcGUnLCBmdW5jdGlvbiAoJHNjb3BlKSB7XG4gICAgICAkc2NvcGUucHJvZ3Jlc3MgPSAwO1xuICAgICAgJHNjb3BlLmF2YXRhciA9ICcnO1xuICAgICAgJHNjb3BlLnNlbmRGaWxlID0gZnVuY3Rpb24oZWwpIHtcbiAgICAgICAgdmFyICRmb3JtID0gJChlbCkucGFyZW50cygnZm9ybScpO1xuICAgICAgICBpZiAoJChlbCkudmFsKCkgPT09ICcnKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgICRmb3JtLmF0dHIoJ2FjdGlvbicsICRzY29wZS5hY3Rpb24pO1xuICAgICAgICAkc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICRzY29wZS5wcm9ncmVzcyA9IDA7XG4gICAgICAgIH0pO1xuICAgICAgICAkZm9ybS5hamF4U3VibWl0KHtcbiAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgIFx0YmVmb3JlU2VuZDogZnVuY3Rpb24gKHhocikge1xuICAgICAgICBcdFx0eGhyLnNldFJlcXVlc3RIZWFkZXIoJ2F1dGhvcml6YXRpb24nLCAnQmVhcmVyIE9xRmlyUVM0NFJRVGpSdVduaVhqZEhaSlFYZEN1RXg0OXJxOEpZNUEnKTtcbiAgICAgICAgXHR9LFxuICAgICAgICAgIHVwbG9hZFByb2dyZXNzOiBmdW5jdGlvbihldnQsIHBvcywgdG90LCBwZXJjQ29tcGxldGUpIHtcbiAgICAgICAgICAgICRzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIC8vIHVwbG9hZCB0aGUgcHJvZ3Jlc3MgYmFyIGR1cmluZyB0aGUgdXBsb2FkXG4gICAgICAgICAgICAgIC8vICRzY29wZS5wcm9ncmVzcyA9IHBlcmNlbnRDb21wbGV0ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKGV2dCwgc3RhdHVzVGV4dCwgcmVzcG9uc2UsIGZvcm0pIHtcbiAgICAgICAgICAgIC8vIHJlbW92ZSB0aGUgYWN0aW9uIGF0dHJpYnV0ZSBmcm9tIHRoZSBmb3JtXG4gICAgICAgICAgICAkZm9ybS5yZW1vdmVBdHRyKCdhY3Rpb24nKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3BvbnNlLCBzdGF0dXMsIHhociwgZm9ybSkge1xuICAgICAgICAgICAgdmFyIGFyID0gJChlbCkudmFsKCkuc3BsaXQoJ1xcXFwnKSxcbiAgICAgICAgICAgICAgZmlsZW5hbWUgPSAgYXJbYXIubGVuZ3RoLTFdO1xuICAgICAgICAgICAgLy8gcmVtb3ZlIHRoZSBhY3Rpb24gYXR0cmlidXRlIGZyb20gdGhlIGZvcm1cbiAgICAgICAgICAgICRmb3JtLnJlbW92ZUF0dHIoJ2FjdGlvbicpO1xuICAgICAgICAgICAgJHNjb3BlLiRhcHBseShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgJHNjb3BlLmF2YXRhciA9IGZpbGVuYW1lO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgIH1dLFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtLCBhdHRycywgY3RybCkge1xuXG4gICAgICBlbGVtLmZpbmQoJy5mYWtlLXVwbG9hZGVyJykuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgIGVsZW0uZmluZCgnaW5wdXRbdHlwZT1cImZpbGVcIl0nKS5jbGljaygpO1xuICAgICAgfSk7XG5cbiAgICB9XG4gIH07XG59XSk7XG5cbi8qIGdsb2JhbCAkdWliTW9kYWxJbnN0YW5jZSAqL1xuLyogZ2xvYmFsIE1vZGFsSW5zdGFuY2VDdHJsICovXG4vKiBnbG9iYWwgJHVpYk1vZGFsICovXG4vKiBnbG9iYWwgc3luYyAqL1xuLyogZ2xvYmFsIHN5bmMgKi9cbnN5bmMuY29udHJvbGxlcignRmlsZXNDb250cm9sbGVyJyxcbiBbXG5cdCckc2NvcGUnLCdGaWxlcycsJyRsb2cnLCckd2luZG93JywnVXNlcicsJyR1aWJNb2RhbCcsJyRpbnRlcnZhbCcsJ3BkZkRlbGVnYXRlJywnJHRpbWVvdXQnLCckc3RhdGVQYXJhbXMnLCckcm9vdFNjb3BlJywnJGV4Y2VwdGlvbkhhbmRsZXInLCBmdW5jdGlvbiAoXG5cdFx0JHNjb3BlLCBGaWxlcywkbG9nLCR3aW5kb3csVXNlciwkdWliTW9kYWwsJGludGVydmFsLHBkZkRlbGVnYXRlLCR0aW1lb3V0LCRzdGF0ZVBhcmFtcywkcm9vdFNjb3BlLCRleGNlcHRpb25IYW5kbGVyKSB7XG5cblx0ICAkc2NvcGUuaW5pdCA9IGZ1bmN0aW9uKCl7XG4gICAgICAvL2xvYWQgYWxsIGJveCBmaWxlc1xuXHRcdCAgICAkc2NvcGUuYWxsKCk7XG5cdCAgfTtcblxuXG5cdCAgLy8gJGludGVydmFsKGZ1bmN0aW9uICgpIHtcblx0XHRcdC8vICRzY29wZS5hbGwoKTtcbiAgIC8vICB9LCA4MDAwKTtcblxuXG5cdCAkc2NvcGUuYWxsID0gZnVuY3Rpb24oKXtcbiAgICAkc2NvcGUuZGF0YUxvYWRpbmcgPSB0cnVlO1xuXHRcdEZpbGVzLmdldEJveEZpbGVzKClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKHJlcyl7XG5cdFx0XHRcdCRzY29wZS5maWxlcyBcdD1cdHJlcztcblxuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3Ipe1xuXHRcdFx0XHQvLyBjb25zb2xlLmxvZyhlcnJvcik7XG5cdFx0XHR9KVxuICAgICAgLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICRzY29wZS5kYXRhTG9hZGluZyA9IGZhbHNlO1xuICAgICB9KTtcblx0IH07XG4gICRzY29wZS5maWxlVHlwZSAgPSBmdW5jdGlvbih0eXBlKSB7XG5cbiAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlICdwZGYnOlxuICAgICAgICAgIHJldHVybiAnaW1nL3BkZi5wbmcnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdmb2xkZXInOlxuICAgICAgICAgIHJldHVybiAnaW1nL3VuaXZlcnNhbF9mb2xkZXIucG5nJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnZm9sZGVyKyc6XG4gICAgICAgICAgcmV0dXJuICdpbWcvQWRkX2ZvbGRlci5wbmcnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdwaHAnOlxuICAgICAgICAgIHJldHVybiAnaW1nL2NvZGUucG5nJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAndHh0JzpcbiAgICAgICAgcmV0dXJuICdpbWcvY29kZS5wbmcnO1xuICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnZG9jeCc6XG4gICAgICAgICAgcmV0dXJuICdpbWcvd29yZC5wbmcnO1xuICAgICAgICBjYXNlICdqcGcnOlxuICAgICAgICAgIHJldHVybiAnZmEgZmEtaW1hZ2UnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdwbmcnOlxuICAgICAgICAgIHJldHVybiAnaW1nL3ZpZGVvLnBuZyc7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2pwZWcnOlxuICAgICAgICAgICAgcmV0dXJuICdpbWcvdW5pdmVyc2FsX2ZvbGRlci5wbmcnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICd6aXAnOlxuICAgICAgICAgcmV0dXJuICdpbWcvemlwLnBuZyc7XG4gICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuICdpbWcvdW5pdmVyc2FsX2ZvbGRlci5wbmcnO1xuICAgICAgfVxuICB9O1xuXG5cdCRzY29wZS5pbml0KCk7XG59XSk7XG5cbnN5bmMuZGlyZWN0aXZlKCdkcmFnZ2FibGUnLCBmdW5jdGlvbigpIHtcblxuICAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0FFJyxcbiAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XG4gICAgICAgICAgIHZhciBlbCA9IGVsZW1lbnRbMF07XG5cbiAgICAgICAgICAgIGVsLmRyYWdnYWJsZSA9IHRydWU7XG5cbiAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgICAgICAgJ2RyYWdzdGFydCcsXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2RyYWcgZXZlbnQgc3RhcnRlZCcpO1xuICAgICAgICAgICAgICAgICAgICBlLmRhdGFUcmFuc2Zlci5lZmZlY3RBbGxvd2VkID0gJ21vdmUnO1xuICAgICAgICAgICAgICAgICAgICBlLmRhdGFUcmFuc2Zlci5zZXREYXRhKCdUZXh0JywgdGhpcy5pZCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LmFkZCgnZHJhZycpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBmYWxzZVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICAgICAgICAnZHJhZ2VuZCcsXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZHJhZyBldmVudCByZWxlYXNlZCcpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5yZW1vdmUoJ2RyYWcnKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZmFsc2VcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9O1xufSk7XG5cbnN5bmMuZGlyZWN0aXZlKCdkcm9wcGFibGUnLCBbJ3VzZXJJbnRlcmFjdGlvbk5vdGlmaWNhdGlvbicsJ0ZpbGVzJyxmdW5jdGlvbih1c2VySW50ZXJhY3Rpb25Ob3RpZmljYXRpb24sRmlsZXMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgZHJvcDogJyYnLFxuICAgICAgICAgICAgYmluOiAnPScvLyBwYXJlbnRcbiAgICAgICAgfSxcbiAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQpIHtcbiAgICAgICAgICAgIC8vIGFnYWluIHdlIG5lZWQgdGhlIG5hdGl2ZSBvYmplY3RcbiAgICAgICAgICAgIHZhciBlbCA9IGVsZW1lbnRbMF07XG4gICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgICAnZHJhZ292ZXInLFxuICAgICAgICAgICAgICBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICBlLmRhdGFUcmFuc2Zlci5kcm9wRWZmZWN0ID0gJ21vdmUnO1xuICAgICAgICAgICAgICAgICAgLy8gYWxsb3dzIHVzIHRvIGRyb3BcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgaWYgKGUucHJldmVudERlZmF1bHQpIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LmFkZCgnb3ZlcicpO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBmYWxzZVxuICAgICAgICAgICk7XG4gICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgICAgICdkcmFnZW50ZXInLFxuICAgICAgICAgICAgICBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoJ292ZXInKTtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgZmFsc2VcbiAgICAgICAgICApO1xuXG4gICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICAgICAgJ2RyYWdsZWF2ZScsXG4gICAgICAgICAgICAgIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZSgnb3ZlcicpO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBmYWxzZVxuICAgICAgICAgICk7IFxuICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgICAnZHJvcCcsXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBTdG9wcyBzb21lIGJyb3dzZXJzIGZyb20gcmVkaXJlY3RpbmcuXG4gICAgICAgICAgICAgICAgICAgIGlmIChlLnN0b3BQcm9wYWdhdGlvbikgZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5yZW1vdmUoJ292ZXInKTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgYmluSWQgPSB0aGlzLmlkO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGUuZGF0YVRyYW5zZmVyLmdldERhdGEoJ1RleHQnKSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdJdGVtIG5vdyBpczonK2l0ZW0pO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHRyeXtcbiAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxsIHRoZSBwYXNzZWQgZHJvcCBmdW5jdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBlbmRDaGlsZChpdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbihzY29wZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmbiA9IHNjb3BlLmRyb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJ3VuZGVmaW5lZCcgIT09IHR5cGVvZiBmbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm4oaXRlbS5pZCwgYmluSWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1jYXRjaChlKXtcbiAgICAgICAgICAgICAgICAgICAgICAvL3Rocm93IGVycm9yIHRoYXQgaGFwcGVuIHdoZW4gZmlsZSBpcyBkcm9wcGVkIGluIGl0J3Mgb3duIGxvY2F0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgLy9naXZlIHNvbWUgYWxlcnQgdG8gbm90aWZ5IHdoYXQgaGFwcG5lZFxuICAgICAgICAgICAgICAgICAgICAgIC8vIHRocm93KCBuZXcgRXJyb3IoZSkpXG4gICAgICAgICAgICAgICAgICAgICAgLy8gdXNlckludGVyYWN0aW9uTm90aWZpY2F0aW9uLmVycm9yKFwiRHJvcCBGaWxlIG9uIGZvbGRlciB0byBtb3ZlIGl0IVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGZhbHNlXG4gICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG59XSk7XG5zeW5jLmNvbnRyb2xsZXIoJ0RyYWdEcm9wQ3RybCcsIFsnJHNjb3BlJywnRmlsZXMnLCckaW50ZXJ2YWwnLGZ1bmN0aW9uKCRzY29wZSxGaWxlcywkaW50ZXJ2YWwpIHtcblxuICBcbiAgICAkc2NvcGUuaGFuZGxlRHJvcCA9IGZ1bmN0aW9uKCkge1xuICAgICAgLy8gMSlpZiBtb3ZlZCBvbmx5IHdoZW4gaXQgcmVhY2ggb24gZm9sZGVyIGFsbG93IG1vdmVcbiAgICAgIC8vIDIpdGFrZSB0aCBpZCBvZiBmaWxlIG1vdmVkIGFuZCB0YWtlIGlkIG9mIGZvbGRlciBtb3ZlIGZpbGUgaW50byBmb2xkZXJcblxuICAgICAgIC8vbW92ZSB0aGUgaXRlbSBpbnRvIHdoZXJlIGl0IGlzIGRyb3BlZFxuICAgICAgIC8vdGhlIGZpcnN0IHRoaW5nIGhlcmUgaXMgdG8gcmVjYWxjdWxhdGUgdGhlIGFycmF5IHRvIGtlZXAgdGhlIGFycmFuZ2VtZW50IGludGFjdFxuICAgICAgIFxuICAgICAgICBcbiAgICB9XG59XSk7XG5cbnN5bmMuY29udHJvbGxlcigncHJldmlld0NvbnRyb2xsZXInLFxuIFtcblx0JyRzY29wZScsJ3BkZkRlbGVnYXRlJywnJHRpbWVvdXQnLCckc3RhdGVQYXJhbXMnLCckcm9vdFNjb3BlJywnJGV4Y2VwdGlvbkhhbmRsZXInLCdGaWxlcycsICdGaWxlU2F2ZXInLCdCbG9iJyxmdW5jdGlvbiAoXG5cdFx0JHNjb3BlLHBkZkRlbGVnYXRlLCR0aW1lb3V0LCRzdGF0ZVBhcmFtcywkcm9vdFNjb3BlLCRleGNlcHRpb25IYW5kbGVyLEZpbGVzLEZpbGVTYXZlciwgQmxvYikge1xuXG4gICAgICAvL2dldCBtaW1lIHR5cGUgb2YgYW55RmlsZSB0aGF0IGNvbWVzIGluIG15IGhvb2QhXG5cbiAgICAgIFxuXG4gICAgICBpZigkc3RhdGVQYXJhbXMucHJldmlldyAmJiAkc3RhdGVQYXJhbXMuZXh0ZW5zaW9uID09ICdwZGYnKXtcbiAgICAgICAgJHNjb3BlLnByZXZpZXdhYmxlID0gdHJ1ZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vYSB1c2VyIFN0cmltVXAgaXMgaW5qZWN0ZWQgaW4gYmVsbG93IHVybCBpdCBzaG91bGQgYmUgZHluYW1pYyBpbiBmdXR1cmUhXG4gICAgICAgICAgICAkc2NvcGUucGRmVXJsID0gJHJvb3RTY29wZS5lbmRQb2ludCsgJy9wcmV2aWV3LycrICRzdGF0ZVBhcmFtcy5wcmV2aWV3Kycvb2YvJysnU3RyaW1VcCc7XG5cbiAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHBkZkRlbGVnYXRlLiRnZXRCeUhhbmRsZSgnbXktcGRmLWNvbnRhaW5lcicpLnpvb21JbigwLjUpO1xuICAgICAgICAgICAgfSwgMzAwMCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcblxuICAgICAgICAgICB0aHJvdyggbmV3IEVycm9yKGUpKVxuICAgICAgICB9XG4gICAgICB9ZWxzZSBpZigkc3RhdGVQYXJhbXMucHJldmlldyAmJiAkc3RhdGVQYXJhbXMuZXh0ZW5zaW9uID09ICdqcGcnfHwkc3RhdGVQYXJhbXMuZXh0ZW5zaW9uID09ICdwbmcnKXtcbiAgICAgICAgJHNjb3BlLmZpbGVfbmFtZSA9ICRzdGF0ZVBhcmFtcy5wcmV2aWV3O1xuICAgICAgICAkc2NvcGUucHJldmlld2FibGUgPSBmYWxzZTtcbiAgICAgICAgLy9hcyBieSBub3cgaW1hZ2VzIGFyZSBub3QgcmVhZHkgdG8gYmUgcHJldmlld2VkIHNvIHNldCBpdCB0byBmYWxzZSFwcm92aWRlIG9ubHkgb3B0aW9uIHRvIGRvd25sb2FkIHRoZW0hXG4gICAgICAgICAgLy8gJHNjb3BlLnByZXZpZXdhYmxlID0gZmFsc2U7XG4gICAgICAgICAgLy8gRmlsZXMuc2luZ2xlKCRzdGF0ZVBhcmFtcy5wcmV2aWV3KVxuICAgICAgICAgIC8vIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgICAvLyAgICRzY29wZS5pbWFnZVByZXZpZXcgPSByZXNwb25zZTtcbiAgICAgICAgICAvLyB9LGZ1bmN0aW9uKGVycil7XG4gICAgICAgICAgLy8gICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgIC8vIH0pO1xuICAgICAgfWVsc2Uge1xuICAgICAgICAvL3NlbmQgYSBmaWxlbmFtZSB0byBhIGRvd25sb2FkIGJ1dHRvblxuICAgICAgICAkc2NvcGUuZmlsZV9uYW1lID0gJHN0YXRlUGFyYW1zLnByZXZpZXc7XG4gICAgICAgICRzY29wZS5wcmV2aWV3YWJsZSA9IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAkc2NvcGUuZ29OZXh0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgJHNjb3BlLmluY3JlbWVudCA9IDE7XG4gICAgICAgICAgcGRmRGVsZWdhdGUuJGdldEJ5SGFuZGxlKCdteS1wZGYtY29udGFpbmVyJykubmV4dCgkc2NvcGUuaW5jcmVtZW50KzEpO1xuICAgICAgfTtcbiAgICAgIC8vdGhpcyBvcHRpb24gZG93biBoZXJlIG9mIGRvd25sb2FkaW5nIGEgZmlsZSB3YXMgbmljZSBidXQgc3RpbGwgaGF2ZSBzb21lIGRyb3diYWNrXG5cbiAgICAgIC8vICRzY29wZS5kb3dubG9hZCA9IGZ1bmN0aW9uKGZpbGVfbmFtZSl7XG5cbiAgICAgIC8vICAgRmlsZXMuZG93bmxvYWRGaWxlKGZpbGVfbmFtZSlcbiAgICAgIC8vICAgLnRoZW4oZnVuY3Rpb24oZmlsZV93cml0ZW4pe1xuICAgICAgICAgICAgXG4gICAgICAvLyAgICAgRmlsZXMuZ2V0TWltZVR5cGUoJHN0YXRlUGFyYW1zLnByZXZpZXcpXG4gICAgICAvLyAgICAgICAudGhlbihmdW5jdGlvbihtaW1lVHlwZSl7XG5cbiAgICAgIC8vICAgICAgICAgdmFyIGJsb2IgPSBuZXcgQmxvYihbZmlsZV93cml0ZW5dLCB7XG4gICAgICAvLyAgICAgICAgICAgICB0eXBlOiBtaW1lVHlwZSxcbiAgICAgIC8vICAgICAgICAgfSk7XG4gICAgICAvLyAgICAgICAgIEZpbGVTYXZlci5zYXZlQXMoYmxvYiwgJHN0YXRlUGFyYW1zLnByZXZpZXcpO1xuXG4gICAgICAvLyAgICAgICB9LGZ1bmN0aW9uKGVycil7XG4gICAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAvLyAgICAgICB9KTtcblxuICAgICAgICAgIFxuXG4gICAgICAvLyAgIH0sZnVuY3Rpb24oZXJyKXtcbiAgICAgIC8vICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgLy8gICB9KTtcbiAgICAgIC8vIH07XG4gICAgICAkc2NvcGUuZ29QcmV2ID0gZnVuY3Rpb24ocGFnZSl7XG4gICAgICAgICAgcGRmRGVsZWdhdGUuJGdldEJ5SGFuZGxlKCdteS1wZGYtY29udGFpbmVyJykucHJldigkc2NvcGUuaW5jcmVtZW50LTEpO1xuICAgICAgfTtcbn1dKTtcblxuc3luYy5kaXJlY3RpdmUoJ2ZpbGVEb3dubG9hZCcsIFtmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZSxcbiAgICAgICAgICAgIHRlbXBsYXRlOiAnPGJ1dHRvbiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdFwiIGRhdGEtbmctY2xpY2s9XCJkb3dubG9hZCgpXCI+PHNwYW4gY2xhc3M9XCJcIj48L3NwYW4+RG93bmxvYWQ8L2J1dHRvbj4nLFxuICAgICAgICAgICAgY29udHJvbGxlcjogWyckcm9vdFNjb3BlJywgJyRzY29wZScsICckZWxlbWVudCcsICckYXR0cnMnLCAnJHRpbWVvdXQnLCBmdW5jdGlvbiAoJHJvb3RTY29wZSwgJHNjb3BlLCAkZWxlbWVudCwgJGF0dHJzLCAkdGltZW91dCkge1xuICAgICAgICAgICAgICAgICRzY29wZS5wcm9ncmVzcyA9IDA7XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBwcmVwYXJlKHVybCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBkaWFsb2dzLndhaXQoXCJQbGVhc2Ugd2FpdFwiLCBcIllvdXIgZG93bmxvYWQgc3RhcnRzIGluIGEgZmV3IHNlY29uZHMuXCIsICRzY29wZS5wcm9ncmVzcyk7XG4gICAgICAgICAgICAgICAgICAgIGZha2VQcm9ncmVzcygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzdWNjZXNzKHVybCkge1xuICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ2RpYWxvZ3Mud2FpdC5jb21wbGV0ZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBlcnJvcihyZXNwb25zZSwgdXJsKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGRpYWxvZ3MuZXJyb3IoXCJDb3VsZG4ndCBwcm9jZXNzIHlvdXIgZG93bmxvYWQhXCIpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGZha2VQcm9ncmVzcygpIHtcbiAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5wcm9ncmVzcyA8IDk1KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb2dyZXNzICs9ICg5NiAtICRzY29wZS5wcm9ncmVzcykgLyAyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICRyb290U2NvcGUuJGJyb2FkY2FzdCgnZGlhbG9ncy53YWl0LnByb2dyZXNzJywgeyAncHJvZ3Jlc3MnOiAkc2NvcGUucHJvZ3Jlc3MgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFrZVByb2dyZXNzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sIDI1MCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgJHNjb3BlLmRvd25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucHJvZ3Jlc3MgPSAwO1xuICAgICAgICAgICAgICAgICAgICAkLmZpbGVEb3dubG9hZCgnaHR0cDovL3N5bmNtZS5jb206ODAwMC9hcGkvdjEvZmlsZXMvZG93bmxvYWQvcGhweEZubGhlRFZFNWo1bWNWRFgucG5nL29mL1N0cmltVXA/YWNjZXNzX3Rva2VuPUJjN0RXUzdLS1JMdHhtZGRVWkkxVDFsWnUySjFZaFI4T0xYR1dOWm4nLCB7IHByZXBhcmVDYWxsYmFjazogcHJlcGFyZSwgc3VjY2Vzc0NhbGxiYWNrOiBzdWNjZXNzLCBmYWlsQ2FsbGJhY2s6IGVycm9yIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1dXG4gICAgICAgIH1cbn1dKTtcblxuLyogZ2xvYmFsIHN5bmMgKi9cblwidXNlIHN0cmljdFwiO1xuc3luYy5jb250cm9sbGVyKCdQZW9wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCdQZW9wbGUnLGZ1bmN0aW9uICgkc2NvcGUsIFBlb3BsZSkge1xuXHRcdCRzY29wZS5pbml0ID0gZnVuY3Rpb24oKXtcblx0XHRcdCRzY29wZS5nZXRQZW9wbGVUb0ZvbGxvdygpO1xuXHRcdH1cblx0XHQkc2NvcGUuZ2V0UGVvcGxlVG9Gb2xsb3cgID0gZnVuY3Rpb24oKXtcblx0XHRcdFBlb3BsZS5nZXQoKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuXHRcdFx0XHRcblx0XHRcdFx0JHNjb3BlLnBlb3BsZSA9IHJlc3BvbnNlO1xuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3Ipe1xuXG5cdFx0XHR9KVxuXHRcdH1cblx0XHQkc2NvcGUuJG9uKCdmb2xsb3dNZW1iZXInLGZ1bmN0aW9uKGV2ZW50LHBhcmFtcyl7XG5cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0UGVvcGxlLmZvbGxvdyhwYXJhbXMpXG5cdFx0XHQudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG5cdFx0XHRcdC8vY29uc29sZS5sb2cocmVzcG9uc2UpO1xuXHRcdFx0XHQkc2NvcGUuZ2V0UGVvcGxlVG9Gb2xsb3coKTtcblx0XHRcdH0sZnVuY3Rpb24oZXJyb3Ipe1xuXHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcik7XG5cdFx0XHR9KVxuXHRcdH0pO1xuXHRcdCRzY29wZS5mb2xsb3cgPSBmdW5jdGlvbihpZCl7XG5cdFx0XHR2YXIgZm9sbG93ID17aWQ6IGlkLCBvcHRpb246J2FkZFBlb3BsZSd9O1xuXHRcdFx0JHNjb3BlLiRlbWl0KFwiZm9sbG93TWVtYmVyXCIsIGZvbGxvdyk7XG5cdFx0fVxuXHRcdCRzY29wZS5pbml0KCk7XG59XSk7XG5cbi8qIGdsb2JhbCBGaWxlcyAqL1xuLyogZ2xvYmFsIHN5bmMgKi9cbi8qIGdsb2JhbCAkc2NvcGUgKi9cbi8qIGdsb2JhbCBhbmd1bGFyICovXG4vKkF1dGhvciBNdXJhZ2lqaW1hbmEgRm91bmRlciAmIENFTyBvZiBzeW5jIGNhbGwgaGltIG9uIFN0cmltVXBAZ21haWwuY29tKi9cblxuc3luYy5zZXJ2aWNlKCdHcm91cCcsIFtcblx0JyRodHRwJyxcblx0JyRyb290U2NvcGUnLFxuXHQnJHEnLGZ1bmN0aW9uIEdyb3VwIChcblx0XHQkaHR0cCxcblx0XHQkcm9vdFNjb3BlLFxuXHRcdCRxKSB7XG5cdHRoaXMuY3JlYXRlIFx0XHQ9XHRmdW5jdGlvbihuYW1lKXtcblx0XHR2YXIgZGlmZmVyZWQgXHQ9XHQkcS5kZWZlcigpO1xuXHRcdCRodHRwLnBvc3QoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL21lL2dyb3VwcycsIG5hbWUpXG5cdFx0LnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcG9uc2Upe1xuXHRcdFx0ZGlmZmVyZWQucmVzb2x2ZShyZXNwb25zZSk7XG5cdFx0fSlcblx0XHQuZXJyb3IoZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdGRpZmZlcmVkLnJlamVjdChlcnJvcik7XG5cdFx0fSlcblx0XHRyZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcblx0fVxuXHR0aGlzLmRlbGV0ZSBcdFx0PVx0ZnVuY3Rpb24oaWQpe1xuXHRcdHZhciBkaWZmZXJlZCBcdD1cdCRxLmRlZmVyKCk7XG5cdFx0JGh0dHAuZGVsZXRlKCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS9tZS9ncm91cHMvJytpZClcblx0XHQuc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSl7XG5cdFx0XHRkaWZmZXJlZC5yZXNvbHZlKHJlc3BvbnNlKTtcblx0XHR9KVxuXHRcdC5lcnJvcihmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0ZGlmZmVyZWQucmVqZWN0KGVycm9yKTtcblx0XHR9KVxuXHRcdHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuXHR9XG5cdHRoaXMubXlHcm91cHNcdFx0PVx0ZnVuY3Rpb24oKXtcblx0XHR2YXIgZGlmZmVyZWQgXHQ9XHQkcS5kZWZlcigpO1xuXG5cdFx0JGh0dHAuZ2V0KCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS9tZS9ncm91cHMnKVxuXHRcdC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblx0XHRcdGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuXHRcdH0pXG5cdFx0LmVycm9yKGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRjb25zb2xlLmxvZygnZGlmZmVyZWQgc2xvdzonICsgZXJyb3IpO1xuXHRcdFx0ZGlmZmVyZWQucmVqZWN0KGVycm9yKTtcblx0XHR9KVxuXHRcdHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuXHR9XG5cblx0dGhpcy5hZGRQZW9wbGUgXHQ9XHRmdW5jdGlvbihtZW1iZXIpe1xuXHRcdHZhciBkaWZmZXJlZCBcdD1cdCRxLmRlZmVyKCk7XG5cdFx0JGh0dHAucHV0KCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS9tZS9ncm91cHMvJytKU09OLnN0cmluZ2lmeShtZW1iZXIpKVxuXHRcdC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblx0XHRcdGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuXHRcdH0pXG5cdFx0LmVycm9yKGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRkaWZmZXJlZC5yZXNvbHZlKGVycm9yKTtcblx0XHR9KVxuXHRcdHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuXHR9O1xuXHR0aGlzLmFkZEZpbGVUb0dyb3VwID0gZnVuY3Rpb24oZmlsZU9iail7XG5cdFx0dmFyIGRpZmZlcmVkID0gJHEuZGVmZXIoKTtcblx0XHQkaHR0cC5wdXQoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL21lL2dyb3Vwcy8nKyBKU09OLnN0cmluZ2lmeShmaWxlT2JqKSlcblx0XHQuc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSl7XG5cdFx0XHRkaWZmZXJlZC5yZXNvbHZlKHJlc3BvbnNlKTtcblx0XHR9KVxuXHRcdC5lcnJvcihmdW5jdGlvbihlcnIpe1xuXHRcdFx0ZGlmZmVyZWQucmVqZWN0KGVycik7XG5cdFx0fSlcblx0XHRyZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcblx0fVxuXHR0aGlzLnJlbW92ZVBlb3BsZSBcdD1cdGZ1bmN0aW9uKG1lbWJlcil7XG5cdFx0dmFyIGRpZmZlcmVkIFx0PVx0JHEuZGVmZXIoKTtcblx0XHQkaHR0cC5wdXQoJHJvb3RTY29wZS5lbmRQb2ludCArJy9hcGkvdjEvbWUvZ3JvdXBzLycrSlNPTi5zdHJpbmdpZnkobWVtYmVyKSlcblx0XHQuc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSl7XG5cdFx0XHRkaWZmZXJlZC5yZXNvbHZlKHJlc3BvbnNlKTtcblx0XHR9KVxuXHRcdC5lcnJvcihmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0ZGlmZmVyZWQucmVqZWN0KGVycm9yKTtcblx0XHR9KVxuXHRcdHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuXHR9XG4gIHRoaXMuc3VnZ2VzdFBlb3BsZSA9IGZ1bmN0aW9uKGlkKXtcblxuICAgIFx0dmFyIGRpZmZlcmVkID0gJHEuZGVmZXIoKTtcbiAgICBcdCRodHRwLmdldCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvbWUvZ3JvdXBzLycgKyBpZClcbiAgICBcdC5zdWNjZXNzKGZ1bmN0aW9uKHJlcyl7XG4gICAgXHRcdGRpZmZlcmVkLnJlc29sdmUocmVzKTtcbiAgICBcdH0pXG4gICAgXHQuZXJyb3IoZnVuY3Rpb24oZXJyKSB7XG4gICAgXHRcdGRpZmZlcmVkLnJlamVjdChlcnIpO1xuICAgIFx0fSlcbiAgICBcdHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuICAgIH1cblx0cmV0dXJuIHRoaXM7XG59XSk7XG5cbnN5bmMuY29udHJvbGxlcignR3JvdXBDb250cm9sbGVyJywgW1xuXHQnJHNjb3BlJyxcblx0J0dyb3VwJyxcblx0J1VzZXInLFxuXHQnRmlsZXMnLFxuXHQndXNlckludGVyYWN0aW9uTm90aWZpY2F0aW9uJyxcblx0ZnVuY3Rpb24gR3JvdXBDb250cm9sbGVyIChcblx0XHQkc2NvcGUsXG5cdFx0R3JvdXAsXG5cdFx0VXNlcixcblx0XHRGaWxlcyxcblx0XHR1c2VySW50ZXJhY3Rpb25Ob3RpZmljYXRpb25cblx0KSB7XG5cdCRzY29wZS5pbml0IFx0PVx0ZnVuY3Rpb24oKXtcblx0XHQkc2NvcGUubXlHcm91cHMoKTtcblxuXHRcdCRzY29wZS5zdWdnZXN0ZWRQZW9wbGVUb0dyb3VwKCk7Ly9vZmNhdXNlIHRoZXkgYXJlIGFybGVhZHkgeW91ciBmcmllbmQgYnV0IG5vdCBwYXJ0aWNpcGFudCBpbiB5b3VyIHN0dWZmIHdvcmshXG5cdH1cblx0JHNjb3BlLnVzZXJJZCBcdFx0XHRcdD1cdGZ1bmN0aW9uKCl7XG5cdFx0VXNlci5faWQoKVxuXHRcdC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblx0XHRcdCRzY29wZS51c2VySWQgXHQ9XHRyZXNwb25zZTtcblx0XHR9LCBmdW5jdGlvbihlcnJvcil7XG5cdFx0XHRjb25zb2xlLmxvZyhlcnJvcik7XG5cdFx0fSk7XG5cdH07XG5cdCRzY29wZS5teUdyb3VwcyBcdFx0XHQ9XHRmdW5jdGlvbigpe1xuXHRcdEdyb3VwLm15R3JvdXBzKClcblx0XHQudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG5cdFx0XHQkc2NvcGUuZ3JvdXAgXHQ9IHJlc3BvbnNlO1xuXHRcdH0sIGZ1bmN0aW9uKGVycm9yKXtcblx0XHR9KTtcblx0fTtcblx0JHNjb3BlLnN1Z2dlc3RlZFBlb3BsZVRvR3JvdXAgXHQ9XHRmdW5jdGlvbihpZCl7XG5cdFx0Ly9jbGVhcmluZyBhbGwgdmlldyByZW5kZXJlZCBiZWZvcmVcblx0XHQkc2NvcGUuc2hvd0ZpbGVzPWZhbHNlO1xuXHRcdCRzY29wZS5zaG93R3JvdXA9ZmFsc2U7XG5cdFx0JHNjb3BlLnNob3dCb3g9ZmFsc2U7XG5cdFx0aWYoIWFuZ3VsYXIuaXNVbmRlZmluZWQoaWQpKXtcblx0XHRcdEdyb3VwLnN1Z2dlc3RQZW9wbGUoaWQpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuXHRcdFx0XHQvLyBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG5cdFx0XHRcdCRzY29wZS5mb2xsb3dlcnMgPSByZXNwb25zZTtcblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yKXtcblx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3IpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9O1xuXHQkc2NvcGUuJG9uKCdyZWZyZXNoR3JvdXAnLGZ1bmN0aW9uKCl7XG4gICAgICAgJHNjb3BlLmluaXQoKTtcbiAgXHR9KTtcblx0JHNjb3BlLiRvbignZ3JvdXBEZWxldGVkJywgZnVuY3Rpb24gKGV2ZW50LCBhcmdzKSB7XG5cdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHQkc2NvcGUubXlHcm91cHMoKTtcblx0fSk7XG5cdCRzY29wZS4kb24oJ2dyb3VwVG9iaW5kd2l0aCcsIGZ1bmN0aW9uIChldmVudCwgZ3JvdXBpZCkge1xuXHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICRzY29wZS5lbWl0dGVkID1ncm91cGlkO1xuICAgICAgICBpZiggJHNjb3BlLnNob3dGaWxlcyA9PSB0cnVlKXtcbiAgICAgICAgICAgICRzY29wZS5zaG93RmlsZXM9ZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgJHNjb3BlLnN1Z2dlc3RlZFBlb3BsZVRvR3JvdXAoZ3JvdXBpZCk7XG4gICAgICAgICRzY29wZS5hZGRQZW9wbGU9dHJ1ZTtcblx0fSk7XG5cdCRzY29wZS5nZXRHcm91cEZpbGVzID0gZnVuY3Rpb24ob3duZXIpe1xuICAgIEZpbGVzLmdldEdyb3VwRmlsZXMob3duZXIpXG5cdFx0LnRoZW4oZnVuY3Rpb24odHJlZSl7XG5cdFx0XHQkc2NvcGUuZmlsZXMgPSB0cmVlO1xuXHRcdFx0XHQvL25hdmlnYXRlIHRyb3VnaCB0cmVlIHJlc3BvbnNlIHdoaWNoIGlzIHJlcXVpcmUgbXVjaCBhdHRlbnRpb25cblx0XHRcdFx0JHNjb3BlLmdyb3Vwcz1bXTtcblx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCB0cmVlLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0XHRpZiAodHJlZVtpXS5oYXNPd25Qcm9wZXJ0eSgnZ3JvdXBzJykgJiYgdHJlZVtpXVsnZ3JvdXBzJ10pIHtcblx0XHRcdFx0XHRcdFx0XHQkc2NvcGUuZ3JvdXBzLnB1c2godHJlZVtpXS5mcmllbmRzKTtcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAodHJlZVtpXS5oYXNPd25Qcm9wZXJ0eSgnZ3JvdXBzJykpIHtcblx0XHRcdFx0XHRcdFx0XHQkc2NvcGUuZ3JvdXBzID0gZ3JvdXBzLmNvbmNhdCh0cmF2ZXJzZSh0cmVlW2ldLmdyb3VwcykpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0fSwgZnVuY3Rpb24oZXJyb3Ipe1xuXHRcdFx0Y29uc29sZS5sb2coZXJyb3IpO1xuXHRcdH0pO1xuICB9O1xuXHQkc2NvcGUuZ2V0Qm94RmlsZXMgPSBmdW5jdGlvbihncm91cElkKXtcblx0XHQkc2NvcGUuZW1pdHRlZCA9Z3JvdXBJZDtcbiAgXHRGaWxlcy5nZXRCb3hGaWxlcyhncm91cElkKVxuXHRcdC50aGVuKGZ1bmN0aW9uKHRyZWUpe1xuXHRcdFx0JHNjb3BlLmZpbGVzID0gdHJlZTtcblx0XHRcdFx0Ly9uYXZpZ2F0ZSB0cm91Z2ggdHJlZSByZXNwb25zZSB3aGljaCBpcyByZXF1aXJlIG11Y2ggYXR0ZW50aW9uXG5cdFx0XHRcdCRzY29wZS5ncm91cHM9W107XG5cdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgdHJlZS5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdFx0aWYgKHRyZWVbaV0uaGFzT3duUHJvcGVydHkoJ2dyb3VwcycpICYmIHRyZWVbaV1bJ2dyb3VwcyddKSB7XG5cdFx0XHRcdFx0XHRcdFx0JHNjb3BlLmdyb3Vwcy5wdXNoKHRyZWVbaV0uZnJpZW5kcyk7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKHRyZWVbaV0uaGFzT3duUHJvcGVydHkoJ2dyb3VwcycpKSB7XG5cdFx0XHRcdCAgICAgICAgICAgICRzY29wZS5ncm91cHMgPSBncm91cHMuY29uY2F0KHRyYXZlcnNlKHRyZWVbaV0uZ3JvdXBzKSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHR9LCBmdW5jdGlvbihlcnJvcil7XG5cdFx0XHRjb25zb2xlLmxvZyhlcnJvcik7XG5cdFx0fSk7XG4gIH07XG4kc2NvcGUuJG9uKCdzaG93T3B0aW9ucycsZnVuY3Rpb24oXyxwYXJhbXMpe1xuICAgICBpZihwYXJhbXMub3duZXIgPT09XCJib3hcIil7XG5cdFx0XHQgJHNjb3BlLmFkZFBlb3BsZT1mYWxzZTtcblx0XHRcdCAkc2NvcGUuc2hvd0dyb3VwPWZhbHNlO1xuICAgICAgICRzY29wZS5zaG93Qm94PXRydWU7XG4gICAgICAgaWYoICRzY29wZS5hZGRQZW9wbGUgPT0gdHJ1ZSl7XG4gICAgICAgICAgICRzY29wZS5hZGRQZW9wbGU9ZmFsc2U7XG4gICAgICAgfVxuXHRcdFx0IC8vc2V0IGZpbGVzIHNjb3BlIHRvIHNob3cgZmlsZXMgb2YgYm94IGZpbGVzIGlzIHJlcGVhdGVkIGluIHZpZXcgZGlyZWN0aXZlXG4gICAgICAgJHNjb3BlLmdldEJveEZpbGVzIChwYXJhbXMuZ3JvdXBfaWQpO1xuXHRcdCB9ZWxzZSBpZiAocGFyYW1zLm93bmVyID09PSBcImdyb3VwXCIpIHtcblx0XHRcdCAkc2NvcGUuc2hvd0JveD1mYWxzZTtcblx0XHRcdCAkc2NvcGUuYWRkUGVvcGxlPWZhbHNlO1xuXHRcdFx0ICRzY29wZS5zaG93R3JvdXA9dHJ1ZTtcblx0XHRcdCBpZiggJHNjb3BlLmFkZFBlb3BsZSA9PSB0cnVlKXtcblx0XHRcdFx0XHQgJHNjb3BlLmFkZFBlb3BsZT1mYWxzZTtcblx0XHRcdCB9XG5cdFx0XHQgLy9jaGFuZ2UgZmlsZXMgdG8gbmV3IHNjb3BlIGZpbGVzIHRvIHNob3cgZmlsZXMgb2YgZ3JvdXBzICBpcyByZXBlYXRlZCBpbiB2aWV3IGRpcmVjdGl2ZVxuXHRcdFx0ICRzY29wZS5nZXRHcm91cEZpbGVzIChwYXJhbXMuZ3JvdXBfaWQpO1xuXHRcdCB9XG59KTtcbiRzY29wZS5pbml0KCk7XG59XSk7XG5zeW5jLmRpcmVjdGl2ZSgnbXlHcm91cHMnLCBbXG5cdCdHcm91cCcsXG5cdCdSZXBvcnQnLFxuXHQndXNlckludGVyYWN0aW9uTm90aWZpY2F0aW9uJyxcblx0ZnVuY3Rpb24gbXlHcm91cHMgKFxuXHRcdEdyb3VwLFxuXHRcdFJlcG9ydCxcblx0XHR1c2VySW50ZXJhY3Rpb25Ob3RpZmljYXRpb24sXG5cdFx0Tm90aWZpY2F0aW9uKSB7XG5cdHJldHVybiB7XG5cdFx0cHJpb3JpdHk6IDEwLFxuXHRcdHRlbXBsYXRlVXJsOiAnQXBwL3NjcmlwdHMvanMvZGlyZWN0aXZlcy9ncm91cHMuaHRtbCcsXG5cdFx0cmVzdHJpY3Q6ICdFJyxcblx0XHRzY29wZToge1xuXHRcdFx0ICBpZDogJz11c2VySWQnLFxuICAgICAgICAgIGdyb3VwczogJz0nLFxuICAgICAgICAgIGZvbGxvd2VyczogJz0nLFxuICAgICAgICAgIGVtaXR0ZWQ6Jz0nLFxuICAgICAgICAgIHNob3dQZW9wbGU6Jz0nLFxuICAgICAgICAgIHNob3dHcm91cCAgIDogICc9JyxcbiAgICAgICAgICBmaWxlcyAgIDogICc9Jyxcblx0ICBcdFx0XHRzaG93Qm94OiAgJz0nXG5cdFx0fSxcblx0XHRsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGlFbGVtZW50LCBpQXR0cnMpIHtcblx0XHRcdHNjb3BlLmRlbGV0ZUdyb3VwID0gZnVuY3Rpb24oaWQpe1xuXHRcdFx0XHRHcm91cC5kZWxldGUoaWQpXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uKHJlcyl7XG5cdFx0XHRcdFx0XHR1c2VySW50ZXJhY3Rpb25Ob3RpZmljYXRpb24uaW5mbyhcIkdyb3VwIGRlbGV0ZWRcIik7XG5cdFx0XHRcdFx0IFx0c2NvcGUuJGVtaXQoXCJncm91cERlbGV0ZWRcIiwgJ2dyb3VwIGRlbGV0ZWQnKTtcblx0XHRcdFx0fSwgZnVuY3Rpb24oZXJyKXtcblx0XHRcdFx0XHRSZXBvcnQuc2VuZCgnZGVsZXRlIGdyb3VwIGVycm9yOicrZXJyKVxuXHRcdFx0XHRcdC50aGVuKGZ1bmN0aW9uKCl7fSwgZnVuY3Rpb24oKXt9KTtcblx0XHRcdFx0fSlcblx0XHRcdH07XG4gICAgICBzY29wZS5jcmVhdGVHcm91cFx0PVx0ZnVuY3Rpb24obmFtZSl7XG4gICAgICAgICAgR3JvdXAuY3JlYXRlKG5hbWUpXG4gICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dXNlckludGVyYWN0aW9uTm90aWZpY2F0aW9uLnN1Y2Nlc3MoXCJDcmVhdGVkIG5ldyBHcm91cFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICBzY29wZS4kZW1pdCgncmVmcmVzaEdyb3VwJyxudWxsKTtcbiAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycm9yKXtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfTtcblx0XHRcdHNjb3BlLmluaXRBZGRQZW9wbGUgPSBmdW5jdGlvbihncm91cGlkKXtcblx0XHRcdFx0c2NvcGUuJGVtaXQoXCJncm91cFRvYmluZHdpdGhcIiwgZ3JvdXBpZCk7XG5cdFx0XHR9O1xuXG5cdFx0XHRzY29wZS5hZGRQZW9wbGUgPSBmdW5jdGlvbihwYXJhbXMpe1xuXHRcdFx0XHR2YXIgbmV3UGFyYW1zID17XG5cdFx0XHRcdFx0J29wdGlvbic6J2FkZE1lbWJlcicsXG5cdFx0XHRcdFx0J3VzZXJJZCc6cGFyYW1zLnVzZXJJZCxcblx0XHRcdFx0XHQnZ3JvdXBJZCc6cGFyYW1zLmdyb3VwSWRcblx0XHRcdFx0fVxuXHRcdFx0XHRpZihhbmd1bGFyLmlzVW5kZWZpbmVkKHBhcmFtcykpe1xuXHRcdFx0XHRcdC8vd29uJ3QgaGFwcGVuIW9yIGlmIHRpIGhhcHBlbiB3ZSBxdWl0XG5cdFx0XHRcdH1lbHNle1xuXG5cdFx0XHRcdFx0R3JvdXAuYWRkUGVvcGxlKG5ld1BhcmFtcylcblx0XHRcdFx0XHQudGhlbihmdW5jdGlvbiAocmVzcG9uc2Upe1xuXHRcdFx0XHRcdFx0Ly9yZWZyZXNoIGdyb3VwIHdpdGggbmV3IG1lbWJlciBzdGF0dXNcblx0XHRcdFx0XHRcdFx0dXNlckludGVyYWN0aW9uTm90aWZpY2F0aW9uLnN1Y2Nlc3MoXCJBZGRlZCBNZW1iZXIgaW4gZ3JvdXAuXCIpO1xuICAgICAgICAgICAgICBzY29wZS5pbml0QWRkUGVvcGxlKHBhcmFtcy5ncm91cElkKTtcbiAgICAgICAgICAgICAgc2NvcGUuJGVtaXQoJ3JlZnJlc2hHcm91cCcsJycpO1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG5cdFx0XHRcdFx0fSwgZnVuY3Rpb24gKGVycm9yLHN0YXR1cyl7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0c2NvcGUucmVtb3ZlUGVvcGxlID0gZnVuY3Rpb24ocGFyYW1zKXtcblxuXHRcdFx0XHR2YXIgbmV3UGFyYW1zID17XG5cdFx0XHRcdFx0J29wdGlvbic6J3JlbW92ZU1lbWJlcicsXG5cdFx0XHRcdFx0J3VzZXJJZCc6cGFyYW1zLnVzZXJJZCxcblx0XHRcdFx0XHQnZ3JvdXBJZCc6cGFyYW1zLmdyb3VwSWRcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmKGFuZ3VsYXIuaXNVbmRlZmluZWQocGFyYW1zKSl7XG5cdFx0XHRcdFx0Ly93b24ndCBoYXBwZW4hb3IgaWYgdGkgaGFwcGVuIHdlIHF1aXQgdG9vIGJhZCBoaWVyYWNoeSFcblx0XHRcdFx0fWVsc2V7XG5cdFx0XHRcdEdyb3VwLnJlbW92ZVBlb3BsZShuZXdQYXJhbXMpXG5cdFx0XHRcdFx0LnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKXtcblx0XHRcdFx0XHRcdFx0dXNlckludGVyYWN0aW9uTm90aWZpY2F0aW9uLmluZm8oXCJSZW1vdmVkIE1lbWJlciBpbiBncm91cC5cIik7XG5cdCAgICAgICAgICAgIHNjb3BlLmluaXRBZGRQZW9wbGUocGFyYW1zLmdyb3VwSWQpO1xuXHQgICAgICAgICAgICBzY29wZS4kZW1pdCgncmVmcmVzaEdyb3VwJywnJyk7XG4gICAgICAgICAgICBcdGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcblx0XHRcdFx0XHR9LCBmdW5jdGlvbiAoZXJyb3Isc3RhdHVzKXtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdFx0c2NvcGUucmVtb3ZlRnJvbUdyb3VwID0gZnVuY3Rpb24oKXtcblx0XHRcdFx0Y29uc29sZS5sb2coJ3dlIGNhbiByZW1vdmUgZmlsZSBpbiBncm91cCcpO1xuXHRcdFx0fVxuXHRcdFx0c2NvcGUuYWRkRmlsZVRvR3JvdXAgPSBmdW5jdGlvbihwYXJhbXMpe1xuXHRcdFx0XHR2YXIgZmlsZU9iaiA9e1xuXHRcdFx0XHRcdCdvcHRpb24nOidhZGRGaWxlcycsXG5cdFx0XHRcdFx0J2ZpbGVJZCc6cGFyYW1zLmZpbGVJZCxcblx0XHRcdFx0XHQnZ3JvdXBJZCc6cGFyYW1zLmdyb3VwSWRcblx0XHRcdFx0fVxuXG5cdFx0XHRcdEdyb3VwLmFkZEZpbGVUb0dyb3VwKGZpbGVPYmopXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhyZXNwb25zZSk7XG5cdFx0XHRcdFx0Ly8gdXNlckludGVyYWN0aW9uTm90aWZpY2F0aW9uLnN1Y2Nlc3MoXCJBIGZpbGUgaXMgYWRkZWQgaW4gZ3JvdXBcIik7XG5cdFx0XHRcdH0sZnVuY3Rpb24oZXJyKXtcblx0XHRcdFx0XHR1c2VySW50ZXJhY3Rpb25Ob3RpZmljYXRpb24ud2FybihcIlNvbWUgZXJyb3Igb2NjdXJlZCBkdXJpbmcgYWRkaW5nIGZpbGVcIik7XG5cdFx0XHRcdH0pXG5cblx0XHRcdH1cblx0XHRcdHNjb3BlLmZpbGVzSW5Cb3ggPSBmdW5jdGlvbihncm91cGlkKXtcblx0XHRcdFx0dmFyIHBhcmFtcyA9eydncm91cF9pZCc6Z3JvdXBpZCwnb3duZXInOidib3gnfTtcblx0XHRcdFx0c2NvcGUuJGVtaXQoJ3Nob3dPcHRpb25zJyxwYXJhbXMpO1xuXG5cdFx0XHR9XG5cdFx0XHRzY29wZS5maWxlc0luR3JvdXAgPSBmdW5jdGlvbihncm91cGlkKXtcblxuXHRcdFx0XHR2YXIgcGFyYW1zID17J2dyb3VwX2lkJzpncm91cGlkLCdvd25lcic6J2dyb3VwJ307XG5cdFx0XHRcdHNjb3BlLiRlbWl0KCdzaG93T3B0aW9ucycscGFyYW1zKTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG59XSk7XG5cbnN5bmMuc2VydmljZSgnUmVwb3J0JywgW2Z1bmN0aW9uIFJlcG9ydCAoJGh0dHAsJHEsJHJvb3RTY29wZSkge1xuXHR0aGlzLnNlbmQgPSBmdW5jdGlvbihpc3N1ZSl7XG5cdFx0dmFyIGRpZmZlcmVkID0gJHEuZGVmZXIoKTtcblx0XHQkaHR0cC5wb3N0KCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS9pc3N1ZXMnLCBpc3N1ZSlcblx0XHQuc3VjY2VzcyhmdW5jdGlvbihyZXMpe1xuXHRcdFx0ZGlmZmVyZWQucmVzb2x2ZShyZXMpO1xuXHRcdH0pXG5cdFx0LmVycm9yKGZ1bmN0aW9uKGVycikge1xuXHRcdFx0ZGlmZmVyZWQucmVqZWN0KGVycik7XG5cdFx0fSlcblx0XHRyZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcblx0fVxuXHRyZXR1cm4gdGhpcztcbn1dKTtcblxuLyogZ2xvYmFsIHN5bmMgKi9cbnN5bmMuc2VydmljZSgnU2V0dGluZ3MnLCBbJyRodHRwJywnJHJvb3RTY29wZScsJyRxJyxmdW5jdGlvbiAoJGh0dHAsJHJvb3RTY29wZSwkcSkge1xuXHR0aGlzLmN1cnJlbnQgPSBmdW5jdGlvbigpe1xuICAgICAgICB2YXIgZGlmZmVyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICAkaHR0cC5nZXQoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL3NldHRpbmdzJylcbiAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcCl7XG4gICAgICAgICAgICBkaWZmZXJlZC5yZXNvbHZlKHJlc3ApO1xuICAgICAgICB9KVxuICAgICAgICAuZXJyb3IoZnVuY3Rpb24oZXJyKXtcbiAgICAgICAgICAgIGRpZmZlcmVkLnJlamVjdChlcnIpO1xuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG59XSk7XG5cbnN5bmMuY29udHJvbGxlcignU2V0dGluZ3NDb250cm9sbGVyJywgWyckc2NvcGUnLCdTZXR0aW5ncycsJyRsb2cnLCBmdW5jdGlvbiAoJHNjb3BlLFNldHRpbmdzLCRsb2cpIHtcblx0JHNjb3BlLmluaXQgPSBmdW5jdGlvbigpe1xuICAgICAgICAkc2NvcGUubG9hZEN1cnJlbnRTZXR0aW5ncygpO1xuICAgIH1cbiAgICAgJHNjb3BlLmxvYWRDdXJyZW50U2V0dGluZ3MgPSBmdW5jdGlvbigpe1xuICAgICAgICAgU2V0dGluZ3MuY3VycmVudCgpLnRoZW4oZnVuY3Rpb24ocmVzcCl7XG4gICAgICAgICAgICAgJHNjb3BlLnNldHRpbmdzID0gcmVzcDtcbiAgICAgICAgIH0sIGZ1bmN0aW9uKGVycil7XG4gICAgICAgICAgICAgJGxvZy5pbmZvKCdlcnJyb3IgcHJldmVudCBwcm9taXNlIHRvIGJlIGZ1bGxmaWxsJyk7XG4gICAgICAgICB9KTtcbiAgICAgfVxuICAgICAkc2NvcGUuaW5pdCgpO1xufV0pO1xuXG4vKiBnbG9iYWwgc3luYyAqL1xuc3luYy5jb250cm9sbGVyKCdTaGFyZUNvbnRyb2xsZXInLCBbXG5cdCckc2NvcGUnLFxuXHQnJHJvb3RTY29wZScsXG5cdCckcm91dGVQYXJhbXMnLFxuXHQnJHJvdXRlJyxcblx0JyRsb2cnLFxuXHQnJHVpYk1vZGFsJyxcblx0J1NoYXJlJyxcblx0J1VzZXInLFxuXHRmdW5jdGlvbiAoXG5cdFx0JHNjb3BlLFxuXHRcdCRyb290U2NvcGUsXG5cdFx0JHJvdXRlUGFyYW1zLFxuXHRcdCRyb3V0ZSxcblx0XHQkbG9nLFxuXHRcdCR1aWJNb2RhbCxcblx0XHRTaGFyZSxcblx0XHRVc2VyXG5cdCkgXG57XG5cblx0JHNjb3BlLnNoYXJlID0gZnVuY3Rpb24oZmlsZV9pZCl7XG5cdFx0Ly8gYWxlcnQoJ2hlcmUnKTtcblx0XHRjb25zb2xlLmxvZyhmaWxlX2lkKTtcblx0fTtcbn1cbl0pO1xuXG4vKiBnbG9iYWwgc3luYyAqL1xuLyogZ2xvYmFsIGFuZ3VsYXIgKi9cbid1c2Ugc3RyaWN0JztcblxuYW5ndWxhclxuXG4gICAgc3luYy5jb250cm9sbGVyKCdVcGxvYWRDb250cm9sbGVyJywgWyckc2NvcGUnLCAnRmlsZVVwbG9hZGVyJywnJHJvb3RTY29wZScsJ0ZpbGVzJywgZnVuY3Rpb24oJHNjb3BlLCBGaWxlVXBsb2FkZXIsJHJvb3RTY29wZSxGaWxlcykge1xuICAgICAgICB2YXIgdXBsb2FkZXIgPSAkc2NvcGUudXBsb2FkZXIgPSBuZXcgRmlsZVVwbG9hZGVyKHtcbiAgICAgICAgICAgIHVybDogJHJvb3RTY29wZS5lbmRQb2ludCsnL2FwaS92MS91cGxvYWQnXG4gICAgICAgIH0pO1xuICAgICAgICAvL0ZJTFRFUlNcbiAgICAgICAgdXBsb2FkZXIuZmlsdGVycy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6ICdjdXN0b21GaWx0ZXInLFxuICAgICAgICAgICAgZm46IGZ1bmN0aW9uKGl0ZW0gLyp7RmlsZXxGaWxlTGlrZU9iamVjdH0qLywgb3B0aW9ucykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnF1ZXVlLmxlbmd0aCA8IDEwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy9DQUxMQkFDS1NcbiAgICAgICAgdXBsb2FkZXIub25XaGVuQWRkaW5nRmlsZUZhaWxlZCA9IGZ1bmN0aW9uKGl0ZW0gLyp7RmlsZXxGaWxlTGlrZU9iamVjdH0qLywgZmlsdGVyLCBvcHRpb25zKSB7XG4gICAgICAgICAgICBjb25zb2xlLmluZm8oJ29uV2hlbkFkZGluZ0ZpbGVGYWlsZWQnLCBpdGVtLCBmaWx0ZXIsIG9wdGlvbnMpO1xuICAgICAgICB9O1xuICAgICAgICB1cGxvYWRlci5vbkFmdGVyQWRkaW5nRmlsZSA9IGZ1bmN0aW9uKGZpbGVJdGVtKSB7XG4gICAgICAgICAgICBjb25zb2xlLmluZm8oJ29uQWZ0ZXJBZGRpbmdGaWxlJywgZmlsZUl0ZW0pO1xuICAgICAgICB9O1xuICAgICAgICB1cGxvYWRlci5vbkFmdGVyQWRkaW5nQWxsID0gZnVuY3Rpb24oYWRkZWRGaWxlSXRlbXMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnb25BZnRlckFkZGluZ0FsbCcsIGFkZGVkRmlsZUl0ZW1zKTtcbiAgICAgICAgfTtcbiAgICAgICAgdXBsb2FkZXIub25CZWZvcmVVcGxvYWRJdGVtID0gZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICAgICAgY29uc29sZS5pbmZvKCdvbkJlZm9yZVVwbG9hZEl0ZW0nLCBpdGVtKTtcbiAgICAgICAgfTtcbiAgICAgICAgdXBsb2FkZXIub25Qcm9ncmVzc0l0ZW0gPSBmdW5jdGlvbihmaWxlSXRlbSwgcHJvZ3Jlc3MpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnb25Qcm9ncmVzc0l0ZW0nLCBmaWxlSXRlbSwgcHJvZ3Jlc3MpO1xuICAgICAgICB9O1xuICAgICAgICB1cGxvYWRlci5vblByb2dyZXNzQWxsID0gZnVuY3Rpb24ocHJvZ3Jlc3MpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnb25Qcm9ncmVzc0FsbCcsIHByb2dyZXNzKTtcbiAgICAgICAgfTtcbiAgICAgICAgdXBsb2FkZXIub25TdWNjZXNzSXRlbSA9IGZ1bmN0aW9uKGZpbGVJdGVtLCByZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKSB7XG4gICAgICAgICAgICBjb25zb2xlLmluZm8oJ29uU3VjY2Vzc0l0ZW0nLCBmaWxlSXRlbSwgcmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycyk7XG4gICAgICAgIH07XG4gICAgICAgIHVwbG9hZGVyLm9uRXJyb3JJdGVtID0gZnVuY3Rpb24oZmlsZUl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnb25FcnJvckl0ZW0nLCBmaWxlSXRlbSwgcmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycyk7XG4gICAgICAgIH07XG4gICAgICAgIHVwbG9hZGVyLm9uQ2FuY2VsSXRlbSA9IGZ1bmN0aW9uKGZpbGVJdGVtLCByZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKSB7XG4gICAgICAgICAgICBjb25zb2xlLmluZm8oJ29uQ2FuY2VsSXRlbScsIGZpbGVJdGVtLCByZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKTtcbiAgICAgICAgfTtcbiAgICAgICAgdXBsb2FkZXIub25Db21wbGV0ZUl0ZW0gPSBmdW5jdGlvbihmaWxlSXRlbSwgcmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycykge1xuICAgICAgICAgICAgY29uc29sZS5pbmZvKCdvbkNvbXBsZXRlSXRlbScsIGZpbGVJdGVtLCByZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKTtcbiAgICAgICAgfTtcbiAgICAgICAgdXBsb2FkZXIub25Db21wbGV0ZUFsbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIEZpbGVzLmdldEJveEZpbGVzKClcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlcyl7XG4gICAgICAgICAgICAgICRzY29wZS5maWxlcyBcdD1cdHJlcztcblxuICAgICAgICAgICAgfSwgZnVuY3Rpb24oZXJyb3Ipe1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICRzY29wZS5kYXRhTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnb25Db21wbGV0ZUFsbCcpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zb2xlLmluZm8oJ3VwbG9hZGVyJywgdXBsb2FkZXIpO1xuICAgIH1dKTtcblxuc3luYy5zZXJ2aWNlKCd1cmxTaG9ydGVuZXInLFtmdW5jdGlvbigpe1xuICB0aGlzLm1ha2VTaG9ydCA9IGZ1bmN0aW9uKGxvbmdVcmwpe1xuICAgIHJldHVybiBsb25nVXJsO1xuICB9O1xuICAvLyB0aGlzLm1ha2VTaG9ydCA9IGZ1bmN0aW9uKGxvbmdVcmwpXG4gIC8vIHtcbiAgLy8gICAvLyAgdmFyIGxvbmdVcmw9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsb25ndXJsXCIpLnZhbHVlO1xuICAvLyAgICAgdmFyIHJlcXVlc3QgPSBnYXBpLmNsaWVudC51cmxzaG9ydGVuZXIudXJsLmluc2VydCh7XG4gIC8vICAgICAncmVzb3VyY2UnOiB7XG4gIC8vICAgICAgICdsb25nVXJsJzogbG9uZ1VybFxuICAvLyBcdH1cbiAgLy8gICAgIH0pO1xuICAvLyAgICAgcmVxdWVzdC5leGVjdXRlKGZ1bmN0aW9uKHJlc3BvbnNlKVxuICAvLyBcdHtcbiAgLy9cbiAgLy8gXHRcdGlmKHJlc3BvbnNlLmlkICE9IG51bGwpXG4gIC8vIFx0XHR7XG4gIC8vIFx0XHRcdHN0ciA9XCI8Yj5Mb25nIFVSTDo8L2I+XCIrbG9uZ1VybCtcIjxicj5cIjtcbiAgLy8gXHRcdFx0c3RyICs9XCI8Yj55b3VyIEZpbGUgaXM6PC9iPiA8YSBocmVmPSdcIityZXNwb25zZS5pZCtcIic+XCIrcmVzcG9uc2UuaWQrXCI8L2E+PGJyPlwiO1xuICAvLyBcdFx0XHRyZXR1cm4gc3RyO1xuICAvLyBcdFx0fVxuICAvLyBcdFx0ZWxzZVxuICAvLyBcdFx0e1xuICAvLyBcdFx0XHRjb25zb2xlLmxvZyhcImVycm9yOiB1bmFibGUgdG8gY3JlYXRlIHNob3J0IHVybFwiKTtcbiAgLy8gXHRcdH1cbiAgLy9cbiAgLy8gICAgIH0pO1xuICAvLyAgfVxuICAvL1xuICAvLyB0aGlzLmdldFNob3J0SW5mbyA9IGZ1bmN0aW9uKClcbiAgLy8gIHtcbiAgLy8gICAgICB2YXIgc2hvcnRVcmw9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaG9ydHVybFwiKS52YWx1ZTtcbiAgLy9cbiAgLy8gICAgICB2YXIgcmVxdWVzdCA9IGdhcGkuY2xpZW50LnVybHNob3J0ZW5lci51cmwuZ2V0KHtcbiAgLy8gICAgICAgICdzaG9ydFVybCc6IHNob3J0VXJsLFxuICAvLyAgXHQgICAgICdwcm9qZWN0aW9uJzonRlVMTCdcbiAgLy8gICAgICB9KTtcbiAgLy8gICAgICByZXF1ZXN0LmV4ZWN1dGUoZnVuY3Rpb24ocmVzcG9uc2UpXG4gIC8vICBcdHtcbiAgLy8gIFx0XHRpZihyZXNwb25zZS5sb25nVXJsIT0gbnVsbClcbiAgLy8gIFx0XHR7XG4gIC8vICBcdFx0XHRzdHIgPVwiPGI+TG9uZyBVUkw6PC9iPlwiK3Jlc3BvbnNlLmxvbmdVcmwrXCI8YnI+XCI7XG4gIC8vICBcdFx0XHRzdHIgKz1cIjxiPkNyZWF0ZSBPbjo8L2I+XCIrcmVzcG9uc2UuY3JlYXRlZCtcIjxicj5cIjtcbiAgLy8gIFx0XHRcdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwib3V0cHV0XCIpLmlubmVySFRNTCA9IHN0cjtcbiAgLy8gIFx0XHR9XG4gIC8vICBcdFx0ZWxzZVxuICAvLyAgXHRcdHtcbiAgLy8gIFx0XHRcdGNvbnNvbGUubG9nKFwiZXJyb3I6IHVuYWJsZSB0byBnZXQgVVJMIGluZm9ybWF0aW9uXCIpO1xuICAvLyAgXHRcdH1cbiAgLy9cbiAgLy8gICAgICB9KTtcbiAgLy9cbiAgLy8gIH1cbiAgLy8gIGZ1bmN0aW9uIGxvYWQoKVxuICAvLyAge1xuICAvLyAgXHRnYXBpLmNsaWVudC5zZXRBcGlLZXkoJ0FJemFTeURTbjd6N1YxZjZIM3lYcmdBbGdWR3c1MmRTRW1xQUxJYycpOyAvL2dldCB5b3VyIG93bm4gQnJvd3NlciBBUEkgS0VZXG4gIC8vICBcdGdhcGkuY2xpZW50LmxvYWQoJ3VybHNob3J0ZW5lcicsICd2MScsZnVuY3Rpb24oKXt9KTtcbiAgLy8gIH1cbiAgLy8gIHdpbmRvdy5vbmxvYWQgPSBsb2FkO1xufV0pO1xuXG4gIC8vXG4gIC8vIChmdW5jdGlvbihpLHMsbyxnLHIsYSxtKXtpWydHb29nbGVBbmFseXRpY3NPYmplY3QnXT1yO2lbcl09aVtyXXx8ZnVuY3Rpb24oKXtcbiAgLy8gKGlbcl0ucT1pW3JdLnF8fFtdKS5wdXNoKGFyZ3VtZW50cyl9LGlbcl0ubD0xKm5ldyBEYXRlKCk7YT1zLmNyZWF0ZUVsZW1lbnQobyksXG4gIC8vIG09cy5nZXRFbGVtZW50c0J5VGFnTmFtZShvKVswXTthLmFzeW5jPTE7YS5zcmM9ZzttLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEsbSlcbiAgLy8gfSkod2luZG93LGRvY3VtZW50LCdzY3JpcHQnLCcvL3d3dy5nb29nbGUtYW5hbHl0aWNzLmNvbS9hbmFseXRpY3MuanMnLCdnYScpO1xuICAvL1xuICAvLyBnYSgnY3JlYXRlJywgJ1VBLTY0OTU1ODY2LTInLCAnYXV0bycpO1xuICAvLyBnYSgnc2VuZCcsICdwYWdldmlldycpO1xuXG4gICAgICAgIC8vdGhpcyBmdW5jdGlvbiBjYW4gcmVtb3ZlIGFuIGFycmF5IGVsZW1lbnQuXG4gICAgICAgICAgICBBcnJheS5yZW1vdmUgPSBmdW5jdGlvbihhcnJheSwgZnJvbSwgdG8pIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVzdCA9IGFycmF5LnNsaWNlKCh0byB8fCBmcm9tKSArIDEgfHwgYXJyYXkubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBhcnJheS5sZW5ndGggPSBmcm9tIDwgMCA/IGFycmF5Lmxlbmd0aCArIGZyb20gOiBmcm9tO1xuICAgICAgICAgICAgICAgIHJldHVybiBhcnJheS5wdXNoLmFwcGx5KGFycmF5LCByZXN0KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgdG90YWxfcG9wdXBzID0gMDtcbiAgICAgICAgICAgIHZhciBwb3B1cHMgPSBbXTtcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNsb3NlX3BvcHVwKGlkKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGZvcih2YXIgaWlpID0gMDsgaWlpIDwgcG9wdXBzLmxlbmd0aDsgaWlpKyspXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBpZihpZCA9PSBwb3B1cHNbaWlpXSlcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgQXJyYXkucmVtb3ZlKHBvcHVwcywgaWlpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsY3VsYXRlX3BvcHVwcygpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vZGlzcGxheXMgdGhlIHBvcHVwcy4gRGlzcGxheXMgYmFzZWQgb24gdGhlIG1heGltdW0gbnVtYmVyIG9mIHBvcHVwcyB0aGF0IGNhbiBiZSBkaXNwbGF5ZWQgb24gdGhlIGN1cnJlbnQgdmlld3BvcnQgd2lkdGhcbiAgICAgICAgICAgIGZ1bmN0aW9uIGRpc3BsYXlfcG9wdXBzKClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB2YXIgcmlnaHQgPSAyMjA7XG5cbiAgICAgICAgICAgICAgICB2YXIgaWlpID0gMDtcbiAgICAgICAgICAgICAgICBmb3IoaWlpOyBpaWkgPCB0b3RhbF9wb3B1cHM7IGlpaSsrKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWYocG9wdXBzW2lpaV0gIT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHBvcHVwc1tpaWldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUucmlnaHQgPSByaWdodCArIFwicHhcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0ID0gcmlnaHQgKyAzMjA7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmb3IodmFyIGpqaiA9IGlpaTsgampqIDwgcG9wdXBzLmxlbmd0aDsgampqKyspXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHBvcHVwc1tqampdKTtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgdGhpcyBzY3JpcHQgaGFzIGJlZW4gYWRkZWQgYnkgbWUgZm9yIG15IGN1c3RvbWVcblxuICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICQuYWpheFNldHVwKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdYLUNTUkYtVE9LRU4nOiAkKCdtZXRhW25hbWU9XCJjc3JmLXRva2VuXCJdJykuYXR0cignY29udGVudCcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuXG4gICAgICAgICAgICAgICAgICAgICQoXCIjY2hhdFwiKS5rZXlwcmVzcyhmdW5jdGlvbihldnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGV2dC53aGljaCA9PSAxMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KFwid2UgYXJlIGxpc3RuaW5nIHRvIGVudGVyIGV2ZW50XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXVzZXJuYW1lID0gJCgnI3Nob3V0X3VzZXJuYW1lJykudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbWVzc2FnZSA9ICQoJyNzaG91dF9tZXNzYWdlJykudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc3RfZGF0YSA9IHsndXNlcm5hbWUnOml1c2VybmFtZSwgJ21lc3NhZ2UnOmltZXNzYWdlfTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3NlbmQgZGF0YSB0byBcInNob3V0LnBocFwiIHVzaW5nIGpRdWVyeSAkLnBvc3QoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkLnBvc3QoJ3Nob3V0LnBocCcsIHBvc3RfZGF0YSwgZnVuY3Rpb24oZGF0YSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2FwcGVuZCBkYXRhIGludG8gbWVzc2FnZWJveCB3aXRoIGpRdWVyeSBmYWRlIGVmZmVjdCFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoZGF0YSkuaGlkZSgpLmFwcGVuZFRvKCcubWVzc2FnZV9ib3gnKS5mYWRlSW4oKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9rZWVwIHNjcm9sbGVkIHRvIGJvdHRvbSBvZiBjaGF0IVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNjcm9sbHRvaCA9ICQoJy5tZXNzYWdlX2JveCcpWzBdLnNjcm9sbEhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5tZXNzYWdlX2JveCcpLnNjcm9sbFRvcChzY3JvbGx0b2gpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3Jlc2V0IHZhbHVlIG9mIG1lc3NhZ2UgYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjc2hvdXRfbWVzc2FnZScpLnZhbCgnJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuZmFpbChmdW5jdGlvbihlcnIpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2FsZXJ0IEhUVFAgc2VydmVyIGVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KGVyci5zdGF0dXNUZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAvL3RvZ2dsZSBoaWRlL3Nob3cgc2hvdXQgYm94XG4gICAgICAgICAgICAgICAgICAgICQoXCIuY2xvc2VfYnRuXCIpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL2dldCBDU1MgZGlzcGxheSBzdGF0ZSBvZiAudG9nZ2xlX2NoYXQgZWxlbWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRvZ2dsZVN0YXRlID0gJCgnLnRvZ2dsZV9jaGF0JykuY3NzKCdkaXNwbGF5Jyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vdG9nZ2xlIHNob3cvaGlkZSBjaGF0IGJveFxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnRvZ2dsZV9jaGF0Jykuc2xpZGVUb2dnbGUoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy91c2UgdG9nZ2xlU3RhdGUgdmFyIHRvIGNoYW5nZSBjbG9zZS9vcGVuIGljb24gaW1hZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRvZ2dsZVN0YXRlID09ICdibG9jaycpXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJChcIi5oZWFkZXIgZGl2XCIpLmF0dHIoJ2NsYXNzJywgJ29wZW5fYnRuJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiLmhlYWRlciBkaXZcIikuYXR0cignY2xhc3MnLCAnY2xvc2VfYnRuJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvKmRvbmUgYWRkaW5nIG15IGN1c3RvbSBzY3JpcHRzKi9cbiAgICAgICAgICAgIC8vY3JlYXRlcyBtYXJrdXAgZm9yIGEgbmV3IHBvcHVwLiBBZGRzIHRoZSBpZCB0byBwb3B1cHMgYXJyYXkuXG4gICAgICAgICAgICBmdW5jdGlvbiByZWdpc3Rlcl9wb3B1cChpZCwgbmFtZSlcbiAgICAgICAgICAgIHtcblxuICAgICAgICAgICAgICAgIGZvcih2YXIgaWlpID0gMDsgaWlpIDwgcG9wdXBzLmxlbmd0aDsgaWlpKyspXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAvL2FscmVhZHkgcmVnaXN0ZXJlZC4gQnJpbmcgaXQgdG8gZnJvbnQuXG4gICAgICAgICAgICAgICAgICAgIGlmKGlkID09IHBvcHVwc1tpaWldKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBBcnJheS5yZW1vdmUocG9wdXBzLCBpaWkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3B1cHMudW5zaGlmdChpZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGN1bGF0ZV9wb3B1cHMoKTtcblxuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudD0nPGRpdiBjbGFzcz1cInBvcHVwLWJveCBjaGF0LXBvcHVwXCIgaWQ9XCInKyBpZCArJ1wiPic7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQgPWVsZW1lbnQgKyAnPGRpdiBzdHlsZT1cImJhY2tncm91bmQ6I2RkZDtjb2xvcjojZmZmO1wiIGNsYXNzPVwiaGVhZGVyXCI+R3JvdXA8ZGl2IGNsYXNzPVwiY2xvc2VfYnRuXCI+Jm5ic3A7PC9kaXY+PC9kaXY+JztcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudCA9ZWxlbWVudCArICcgPGRpdiBjbGFzcz1cInRvZ2dsZV9jaGF0XCI+JztcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudCA9ZWxlbWVudCArICc8ZGl2IGNsYXNzPVwibWVzc2FnZV9ib3hcIj48L2Rpdj4nO1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50ID1lbGVtZW50ICsgJzx0ZXh0YXJlYSBzdHlsZT1cImJhY2tncm91bmQ6d2hpdGU7bWFyZ2luLXRvcDoxODBweDtcIiBpZD1cImNoYXRcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIHJvd3M9XCIzXCIgcmVxdWlyZWQ9XCJyZXF1aXJlZFwiPjwvdGV4dGFyZWE+JztcbiAgICAgICAgICAgICAgICAgICAgLy8gZWxlbWVudCA9ZWxlbWVudCArXG4gICAgICAgICAgICAgICAgICAgIC8vIGVsZW1lbnQgPSBlbGVtZW50ICsgJzxkaXYgY2xhc3M9XCJwb3B1cC1oZWFkLXJpZ2h0XCI+PGEgaHJlZj1cImphdmFzY3JpcHQ6Y2xvc2VfcG9wdXAoXFwnJysgaWQgKydcXCcpO1wiPiYjMTAwMDU7PC9hPjwvZGl2Pic7XG4gICAgICAgICAgICAgICAgLy8gdmFyIGVsZW1lbnQgPSAnPGRpdiBjbGFzcz1cInBvcHVwLWJveCBjaGF0LXBvcHVwXCIgaWQ9XCInKyBpZCArJ1wiPic7XG4gICAgICAgICAgICAgICAgLy8gZWxlbWVudCA9IGVsZW1lbnQgKyAnPGRpdiBjbGFzcz1cInBvcHVwLWhlYWRcIj4nO1xuICAgICAgICAgICAgICAgIC8vIGVsZW1lbnQgPSBlbGVtZW50ICsgJzxkaXYgY2xhc3M9XCJwb3B1cC1oZWFkLWxlZnRcIj4nKyBuYW1lICsnPC9kaXY+JztcbiAgICAgICAgICAgICAgICAvLyBlbGVtZW50ID0gZWxlbWVudCArICc8ZGl2IGNsYXNzPVwicG9wdXAtaGVhZC1yaWdodFwiPjxhIGhyZWY9XCJqYXZhc2NyaXB0OmNsb3NlX3BvcHVwKFxcJycrIGlkICsnXFwnKTtcIj4mIzEwMDA1OzwvYT48L2Rpdj4nO1xuICAgICAgICAgICAgICAgIC8vIGVsZW1lbnQgPSBlbGVtZW50ICsgJzxkaXYgc3R5bGU9XCJjbGVhcjogYm90aDtcIj48L2Rpdj48L2Rpdj48cCBvbmNsaWNrPVwidCgpXCIgaWQ9XCJtXCI+PC9wPjxkaXYgY2xhc3M9XCJwb3B1cC1tZXNzYWdlc1wiPjx0ZXh0YXJlYSAgY2xhc3M9XCJ0b3BcIj48L3RleHRhcmVhPjwvZGl2PjwvZGl2Pic7XG5cbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJvZHlcIilbMF0uaW5uZXJIVE1MID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJib2R5XCIpWzBdLmlubmVySFRNTCArIGVsZW1lbnQ7XG5cbiAgICAgICAgICAgICAgICBwb3B1cHMudW5zaGlmdChpZCk7XG5cbiAgICAgICAgICAgICAgICBjYWxjdWxhdGVfcG9wdXBzKCk7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9jYWxjdWxhdGUgdGhlIHRvdGFsIG51bWJlciBvZiBwb3B1cHMgc3VpdGFibGUgYW5kIHRoZW4gcG9wdWxhdGUgdGhlIHRvYXRhbF9wb3B1cHMgdmFyaWFibGUuXG4gICAgICAgICAgICBmdW5jdGlvbiBjYWxjdWxhdGVfcG9wdXBzKClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB2YXIgd2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgICAgICAgICAgICBpZih3aWR0aCA8IDU0MClcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHRvdGFsX3BvcHVwcyA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoID0gd2lkdGggLSAyMDA7XG4gICAgICAgICAgICAgICAgICAgIC8vMzIwIGlzIHdpZHRoIG9mIGEgc2luZ2xlIHBvcHVwIGJveFxuICAgICAgICAgICAgICAgICAgICB0b3RhbF9wb3B1cHMgPSBwYXJzZUludCh3aWR0aC8zMjApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGRpc3BsYXlfcG9wdXBzKCk7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9yZWNhbGN1bGF0ZSB3aGVuIHdpbmRvdyBpcyBsb2FkZWQgYW5kIGFsc28gd2hlbiB3aW5kb3cgaXMgcmVzaXplZC5cbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIGNhbGN1bGF0ZV9wb3B1cHMpO1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGNhbGN1bGF0ZV9wb3B1cHMpO1xuLy9BdXRob3IgTXVyYWdpamltYW5hIFJpY2hhcmQgc3RyaW11cEBnbWFpbC5jb20gYmVhc3RhcjQ1N0BnbWFpbC5jb21cblxuICBzeW5jLmNvbnRyb2xsZXIoJ01lc3NhZ2VDb250cm9sbGVyJywgW1wiJGh0dHBcIiwgXCIkc2NvcGVcIiwgXCIkcVwiLCBcIiRyb290U2NvcGVcIiwgZnVuY3Rpb24gKCRodHRwLCRzY29wZSwkcSwkcm9vdFNjb3BlKSB7XG4gICAgICAgJC5hamF4U2V0dXAoe1xuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICdYLUNTUkYtVE9LRU4nOiAkKCdtZXRhW25hbWU9XCJjc3JmLXRva2VuXCJdJykuYXR0cignY29udGVudCcpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgXG4gICAgICAgICAkc2NvcGUubmFtZT1cIk11cmFnaWppbWFuYVwiO1xuICAgICAgICAgdmFyIHBvc3RzPSRodHRwLmdldCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvcG9zdCcpLFxuICAgICAgICAgICAgIGluc3RpdHV0aW9ucz0kaHR0cC5nZXQoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL3Bvc3QnKTtcblxuICAgICAgICAgICRxLmFsbChbcG9zdHMsaW5zdGl0dXRpb25zXSkudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICAgIHZhciB0bXAgPSBbXTtcbiAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChyZXN1bHQsIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgIHRtcC5wdXNoKHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gdG1wO1xuICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24odG1wUmVzdWx0KSB7XG4gICAgICAgICAgICAgIC8vIHBvc3RzPXRtcFJlc3VsdDtcbiAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYW5ndWxhci50b0pzb24odG1wUmVzdWx0WzBdLCB0cnVlKSk7XG4gICAgICAgICAgICAkc2NvcGUucG9zdHMgPSB0bXBSZXN1bHRbMF07XG4gICAgICAgICAgfSk7XG4gICAgICAgICAkKCcucG9zdC1pbicpLmF0d2hvKHtcbiAgICAgICAgICAgIGF0OiBcIkBcIixcbiAgICAgICAgICAgIGRhdGE6WydQZXRlcicsICdUb20nLCAnQW5uZSddLFxuXG4gICAgICAgICB9KTtcblxuICB9XSk7XG5cblxuc3luYy5jb250cm9sbGVyKFwiVHV0b3JpYWxNb2RhbFwiLCBbXCIkc2NvcGVcIiwgZnVuY3Rpb24oJHNjb3BlKSB7XG5cbiAgJHNjb3BlLm9wZW4gPSBmdW5jdGlvbigpIHtcbiAgICAkc2NvcGUuc2hvd01vZGFsID0gdHJ1ZTtcbiAgfTtcbiAgJHNjb3BlLm9rID0gZnVuY3Rpb24oKSB7XG4gICAgJHNjb3BlLnNob3dNb2RhbCA9IGZhbHNlO1xuICB9O1xuXG4gICRzY29wZS5jYW5jZWwgPSBmdW5jdGlvbigpIHtcbiAgICAkc2NvcGUuc2hvd01vZGFsID0gZmFsc2U7XG4gIH07XG5cbn1dKTtcblxuc3luYy5jb250cm9sbGVyKFwiU3RyaW1pbk1vZGFsXCIsIFtcIiRzY29wZVwiLCBmdW5jdGlvbigkc2NvcGUpIHtcblxuICAkc2NvcGUub3BlbiA9IGZ1bmN0aW9uKCkge1xuICAgICRzY29wZS5zaG93TW9kYWwgPSB0cnVlO1xuICB9O1xuICAkc2NvcGUub2sgPSBmdW5jdGlvbigpIHtcbiAgICAkc2NvcGUuc2hvd01vZGFsID0gZmFsc2U7XG4gIH07XG5cbiAgJHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uKCkge1xuICAgICRzY29wZS5zaG93TW9kYWwgPSBmYWxzZTtcbiAgfTtcblxufV0pO1xuIiwiLyogZ2xvYmFsIHN5bmMgKi9cbi8qKlxuICogIENyZWF0ZWQgYnkgTXVyYWdpamltYW5hIFJpY2hhcmQgb24gMTAvMjAvMTUuXG4gKiAgQmVhc3RhcjQ1N0BnbWFpbC5jb20gLCBzeW5jQGdtYWlsLmNvbSAsIGNoZWNrIHdpdGggbWUhXG4gKi9cbi8qSSB1c2UgQ2FtZWxDYXNlIHdoaWxlIHJlbmFtaW5nIG15IGZ1bmN0aW9ucyAqL1xuLyphbmQgaSB1c2Ugc25ha2UgY2FzZSB3aGlsZSByZW5hbWluZyB2YXJpYWJsZXMgKi9cbi8qcG9zdCBzZXJ2aWNlICovXG5cbnN5bmMuc2VydmljZSgnUG9zdCcsIFsnJGh0dHAnLCAnJHEnLCAnJHJvb3RTY29wZScsIGZ1bmN0aW9uIFBvc3QoJGh0dHAsICRxLCAkcm9vdFNjb3BlKSB7XG4gICAgdGhpcy5nZXRQb3N0ID0gZnVuY3Rpb24gKHVzZXJfaWQpIHtcbiAgICAgICAgdmFyIGRpZmZlcmVkID0gJHEuZGVmZXIoKTtcbiAgICAgICAgJGh0dHAuZ2V0KCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS9tZS9wb3N0cz91c2VyX2lkJyArIHVzZXJfaWQsIHtjYWNoZTogZmFsc2V9KVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cbiAgICAgICAgICAgICAgICBkaWZmZXJlZC5yZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgZGlmZmVyZWQucmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcbiAgICB9O1xuICAgIHRoaXMucGFydGljaXBhdGUgPSBmdW5jdGlvbihvYmope1xuICAgICAgdmFyIGRpZmZlcmVkID0gJHEuZGVmZXIoKTtcbiAgICAgICRodHRwLnB1dCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvbWUvcG9zdHMvJyxvYmopXG4gICAgICAuc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgIGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgfSlcbiAgICAgIC5lcnJvcihmdW5jdGlvbihlcnIpe1xuICAgICAgICBkaWZmZXJlZC5yZWplY3QoZXJyKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGRpZmZlcmVkLnByb21pc2U7XG4gICAgfTtcbiAgICB0aGlzLmNyZWF0ZVBvc3QgPSBmdW5jdGlvbiAocG9zdCkge1xuICAgICAgICB2YXIgZGlmZmVyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICAkaHR0cC5wb3N0KCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS9tZS9wb3N0cycsIHBvc3QpXG4gICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICBkaWZmZXJlZC5yZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgZGlmZmVyZWQucmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcbiAgICB9O1xuICAgIHRoaXMuZGVsZXRlUG9zdCA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICB2YXIgZGlmZmVyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICAkaHR0cC5kZWxldGUoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL21lL3Bvc3RzLycgKyBpZClcbiAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBkaWZmZXJlZC5yZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuICAgIH07XG4gICAgcmV0dXJuIHRoaXM7XG59XSk7XG5cbnN5bmMuY29udHJvbGxlcignUG9zdGluZ0NvbnRyb2xsZXInLCBbXG4gICckc2NvcGUnLFxuICAnUG9zdCcsXG4gICckdGltZW91dCcsXG4gICdVc2VyJyxcbiAgJyRpbnRlcnZhbCcsXG4gICdOb3RpZmljYXRpb24nLFxuICAvLyAnJGlvbmljTGlzdERlbGVnYXRlJyxcbiAgJyRsb2cnLFxuICAndXNlckludGVyYWN0aW9uTm90aWZpY2F0aW9uJyxcbiAgZnVuY3Rpb24gKFxuICAkc2NvcGUsXG4gIFBvc3QsXG4gICR0aW1lb3V0LFxuICBVc2VyLFxuICAkaW50ZXJ2YWwsXG4gIE5vdGlmaWNhdGlvbixcbiAgJGlvbmljTGlzdERlbGVnYXRlLFxuICAkbG9nLFxuICB1c2VySW50ZXJhY3Rpb25Ob3RpZmljYXRpb25cbikge1xuXG4gICAgJHNjb3BlLmluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICRzY29wZS5wb3N0TG9hZGVyKCk7XG4gICAgICAgICRzY29wZS5nZXRVc2VyKCk7XG5cbiAgICB9O1xuXG4gICAgJGludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJHNjb3BlLnBvc3RMb2FkZXIoKTtcbiAgICB9LCA4MDAwKTtcbiAgICAkc2NvcGUuZ2V0VXNlciA9ZnVuY3Rpb24oKXtcblxuICAgICAgVXNlci5faWQoKVxuICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuXG4gICAgICAgICRzY29wZS51c2VyID0gcmVzcG9uc2U7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICAgIH0sZnVuY3Rpb24oZXJyKXtcbiAgICAgICAgLy9xdWl0IHNsaW50bHlcbiAgICAgIH0pO1xuICAgIH07XG4gICAgJHNjb3BlLmxvYWRNb3JlID0gZnVuY3Rpb24oKXtcblxuICAgIH07XG4gICAgJHNjb3BlLnBhcnRpY2lwYXRlSW50b1Bvc3QgPSBmdW5jdGlvbihwb3N0LHVzZXIpe1xuICAgICAgLy8gY29uc29sZS5sb2codXNlcik7XG4gICAgICB2YXIgb2JqID17XG4gICAgICAgICdwb3N0X2lkJzpwb3N0LFxuICAgICAgICAndXNlcl9pZCc6dXNlclxuICAgICAgfTtcbiAgICAgIFBvc3QucGFydGljaXBhdGUob2JqKVxuICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAkc2NvcGUucG9zdExvYWRlcigpO1xuICAgICAgfSxmdW5jdGlvbihlcnIpe1xuICAgICAgICAvL3F1aXQgc2xlbnRseVxuXG4gICAgICB9KTtcbiAgICB9O1xuICAgICRzY29wZS5wb3N0TG9hZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkc2NvcGUuZGF0YUxvYWRpbmcgPSB0cnVlO1xuICAgICAgICBQb3N0LmdldFBvc3QoKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHRyZWUpIHtcblxuICAgICAgICAgICAgICAgICRzY29wZS5wb3N0cyA9dHJlZTtcbiAgICAgICAgICAgICAgICAvL25hdmlnYXRlIHRyb3VnaCB0cmVlIHJlc3BvbnNlIHdoaWNoIGlzIHJlcXVpcmUgbXVjaCBhdHRlbnRpb25cbiAgICAgICAgICAgICAgICAkc2NvcGUuZnJpZW5kcz1bXTtcbiAgICAgICAgICAgICAgICAkc2NvcGUucmVwbGllcz1bXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRyZWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRyZWVbaV0uaGFzT3duUHJvcGVydHkoJ2ZyaWVuZHMnKSAmJiB0cmVlW2ldWydyZXBsaWVzJ10gICYmIHRyZWVbaV1bJ2ZyaWVuZHMnXSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZnJpZW5kcy5wdXNoKHRyZWVbaV0uZnJpZW5kcyk7XG4gICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnJlcGxpZXMucHVzaCh0cmVlW2ldLnJlcGxpZXMpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRyZWVbaV0uaGFzT3duUHJvcGVydHkoJ2ZyaWVuZHMnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmZyaWVuZHMgPSBmcmllbmRzLmNvbmNhdCh0cmF2ZXJzZSh0cmVlW2ldLmZyaWVuZHMpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5yZXBsaWVzID0gcmVwbGllcy5jb25jYXQodHJhdmVyc2UodHJlZVtpXS5yZXBsaWVzKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAkc2NvcGUuaW1hZ2VEZXNjID0gZnVuY3Rpb24oaW5kZXgpe1xuICAgICAgLy9zaG93IGltYWdlcyB3aXRoIGRpZmZlcmVudCBwaXhlbFxuICAgICAgc3dpdGNoIChpbmRleCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgcmV0dXJuICc2MHB4JztcblxuICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHJldHVybiBcIjYwcHhcIjtcblxuICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHJldHVybiBcIjYwcHhcIjtcblxuICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIHJldHVybiBcIjYwcHhcIjtcblxuICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgIHJldHVybiBcIjYwcHhcIjtcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gXCI2MHB4XCI7XG5cbiAgICAgIH1cbiAgICAgIGNvbnNvbGUubG9nKGluZGV4KTtcbiAgICB9O1xuICAgICRzY29wZS5zaGFyZSA9IGZ1bmN0aW9uKGlkKXtcbiAgICAgICAgJGlvbmljTGlzdERlbGVnYXRlLmNsb3NlT3B0aW9uQnV0dG9ucygpO1xuICAgICAgICAkbG9nLmluZm8oaWQpO1xuICAgIH07XG4gICAgJHNjb3BlLmNyZWF0ZVBvc3QgPSBmdW5jdGlvbiAocG9zdGluZykge1xuICAgICAgLy9pZiBpbWFnZSBpcyB1cGxvYWRlZCB1cGxvYWRlZFxuICAgICAgICB2YXIgX3RoaXMgPSB7IG1lc3NhZ2U6IHBvc3RpbmcgfTtcbiAgICAgICAgUG9zdC5jcmVhdGVQb3N0KF90aGlzKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHBvc3RDcmVhdGVkKSB7XG4gICAgICAgICAgICAgICAgICAkc2NvcGUubWVzc2FnZSA9ICcnO1xuICAgICAgICAgICAgICAgICAgJHNjb3BlLnBvc3RzLnB1c2gocG9zdENyZWF0ZWQpO1xuICAgICAgICAgICAgICAgICAgdXNlckludGVyYWN0aW9uTm90aWZpY2F0aW9uLnN1Y2Nlc3MoXCJOZXcgUG9zdCBmZWVkIGNyZWF0ZWQhXCIpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XG5cbiAgICAgICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuaW5pdCgpO1xufV0pO1xuc3luYy5kaXJlY3RpdmUoJ2ZlZWRzVXBsb2FkZXInLFtmdW5jdGlvbigpe1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQUUnLFxuICAgIHJlcGxhY2U6IGZhbHNlLFxuICAgIHRlbXBsYXRlVXJsOiAnQXBwL2pzL3NjcmlwdHMvdmlld3MvZmVlZEF0dGFjaG1lbnQuaHRtbCcsXG4gICAgc2NvcGU6IHtcbiAgICAgIGFjdGlvbjogJ0AnXG4gICAgfSxcbiAgICBjb250cm9sbGVyOiBbJyRzY29wZScsIGZ1bmN0aW9uICgkc2NvcGUpIHtcbiAgICAgICRzY29wZS5wcm9ncmVzcyA9IDA7XG4gICAgICAkc2NvcGUuYXZhdGFyID0gJyc7XG4gICAgICAkc2NvcGUuc2VuZEZpbGUgPSBmdW5jdGlvbihlbCkge1xuICAgICAgICB2YXIgJGZvcm0gPSAkKGVsKS5wYXJlbnRzKCdmb3JtJyk7XG4gICAgICAgIGlmICgkKGVsKS52YWwoKSA9PT0gJycpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgJGZvcm0uYXR0cignYWN0aW9uJywgJHNjb3BlLmFjdGlvbik7XG4gICAgICAgICRzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgJHNjb3BlLnByb2dyZXNzID0gMDtcbiAgICAgICAgfSk7XG4gICAgICAgICRmb3JtLmFqYXhTdWJtaXQoe1xuICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgXHRiZWZvcmVTZW5kOiBmdW5jdGlvbiAoeGhyKSB7XG4gICAgICAgIFx0XHR4aHIuc2V0UmVxdWVzdEhlYWRlcignYXV0aG9yaXphdGlvbicsICdCZWFyZXIgT3FGaXJRUzQ0UlFUalJ1V25pWGpkSFpKUVhkQ3VFeDQ5cnE4Slk1QScpO1xuICAgICAgICBcdH0sXG4gICAgICAgICAgdXBsb2FkUHJvZ3Jlc3M6IGZ1bmN0aW9uKGV2dCwgcG9zLCB0b3QsIHBlcmNDb21wbGV0ZSkge1xuICAgICAgICAgICAgJHNjb3BlLiRhcHBseShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgLy8gdXBsb2FkIHRoZSBwcm9ncmVzcyBiYXIgZHVyaW5nIHRoZSB1cGxvYWRcbiAgICAgICAgICAgICAgLy8gJHNjb3BlLnByb2dyZXNzID0gcGVyY2VudENvbXBsZXRlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oZXZ0LCBzdGF0dXNUZXh0LCByZXNwb25zZSwgZm9ybSkge1xuICAgICAgICAgICAgLy8gcmVtb3ZlIHRoZSBhY3Rpb24gYXR0cmlidXRlIGZyb20gdGhlIGZvcm1cbiAgICAgICAgICAgICRmb3JtLnJlbW92ZUF0dHIoJ2FjdGlvbicpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzcG9uc2UsIHN0YXR1cywgeGhyLCBmb3JtKSB7XG4gICAgICAgICAgICB2YXIgYXIgPSAkKGVsKS52YWwoKS5zcGxpdCgnXFxcXCcpLFxuICAgICAgICAgICAgICBmaWxlbmFtZSA9ICBhclthci5sZW5ndGgtMV07XG4gICAgICAgICAgICAvLyByZW1vdmUgdGhlIGFjdGlvbiBhdHRyaWJ1dGUgZnJvbSB0aGUgZm9ybVxuICAgICAgICAgICAgJGZvcm0ucmVtb3ZlQXR0cignYWN0aW9uJyk7XG4gICAgICAgICAgICAkc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAkc2NvcGUuYXZhdGFyID0gZmlsZW5hbWU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfV0sXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW0sIGF0dHJzLCBjdHJsKSB7XG5cbiAgICAgIGVsZW0uZmluZCgnLmZha2UtdXBsb2FkZXInKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgZWxlbS5maW5kKCdpbnB1dFt0eXBlPVwiZmlsZVwiXScpLmNsaWNrKCk7XG4gICAgICB9KTtcblxuICAgIH1cbiAgfTtcbn1dKTtcbiIsIi8qIGdsb2JhbCAkdWliTW9kYWxJbnN0YW5jZSAqL1xuLyogZ2xvYmFsIE1vZGFsSW5zdGFuY2VDdHJsICovXG4vKiBnbG9iYWwgJHVpYk1vZGFsICovXG4vKiBnbG9iYWwgc3luYyAqL1xuLyogZ2xvYmFsIHN5bmMgKi9cbnN5bmMuY29udHJvbGxlcignRmlsZXNDb250cm9sbGVyJyxcbiBbXG5cdCckc2NvcGUnLCdGaWxlcycsJyRsb2cnLCckd2luZG93JywnVXNlcicsJyR1aWJNb2RhbCcsJyRpbnRlcnZhbCcsJ3BkZkRlbGVnYXRlJywnJHRpbWVvdXQnLCckc3RhdGVQYXJhbXMnLCckcm9vdFNjb3BlJywnJGV4Y2VwdGlvbkhhbmRsZXInLCBmdW5jdGlvbiAoXG5cdFx0JHNjb3BlLCBGaWxlcywkbG9nLCR3aW5kb3csVXNlciwkdWliTW9kYWwsJGludGVydmFsLHBkZkRlbGVnYXRlLCR0aW1lb3V0LCRzdGF0ZVBhcmFtcywkcm9vdFNjb3BlLCRleGNlcHRpb25IYW5kbGVyKSB7XG5cblx0ICAkc2NvcGUuaW5pdCA9IGZ1bmN0aW9uKCl7XG4gICAgICAvL2xvYWQgYWxsIGJveCBmaWxlc1xuXHRcdCAgICAkc2NvcGUuYWxsKCk7XG5cdCAgfTtcblxuXG5cdCAgLy8gJGludGVydmFsKGZ1bmN0aW9uICgpIHtcblx0XHRcdC8vICRzY29wZS5hbGwoKTtcbiAgIC8vICB9LCA4MDAwKTtcblxuXG5cdCAkc2NvcGUuYWxsID0gZnVuY3Rpb24oKXtcbiAgICAkc2NvcGUuZGF0YUxvYWRpbmcgPSB0cnVlO1xuXHRcdEZpbGVzLmdldEJveEZpbGVzKClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKHJlcyl7XG5cdFx0XHRcdCRzY29wZS5maWxlcyBcdD1cdHJlcztcblxuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3Ipe1xuXHRcdFx0XHQvLyBjb25zb2xlLmxvZyhlcnJvcik7XG5cdFx0XHR9KVxuICAgICAgLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICRzY29wZS5kYXRhTG9hZGluZyA9IGZhbHNlO1xuICAgICB9KTtcblx0IH07XG4gICRzY29wZS5maWxlVHlwZSAgPSBmdW5jdGlvbih0eXBlKSB7XG5cbiAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlICdwZGYnOlxuICAgICAgICAgIHJldHVybiAnaW1nL3BkZi5wbmcnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdmb2xkZXInOlxuICAgICAgICAgIHJldHVybiAnaW1nL3VuaXZlcnNhbF9mb2xkZXIucG5nJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnZm9sZGVyKyc6XG4gICAgICAgICAgcmV0dXJuICdpbWcvQWRkX2ZvbGRlci5wbmcnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdwaHAnOlxuICAgICAgICAgIHJldHVybiAnaW1nL2NvZGUucG5nJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAndHh0JzpcbiAgICAgICAgcmV0dXJuICdpbWcvY29kZS5wbmcnO1xuICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnZG9jeCc6XG4gICAgICAgICAgcmV0dXJuICdpbWcvd29yZC5wbmcnO1xuICAgICAgICBjYXNlICdqcGcnOlxuICAgICAgICAgIHJldHVybiAnZmEgZmEtaW1hZ2UnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdwbmcnOlxuICAgICAgICAgIHJldHVybiAnaW1nL3ZpZGVvLnBuZyc7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2pwZWcnOlxuICAgICAgICAgICAgcmV0dXJuICdpbWcvdW5pdmVyc2FsX2ZvbGRlci5wbmcnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICd6aXAnOlxuICAgICAgICAgcmV0dXJuICdpbWcvemlwLnBuZyc7XG4gICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuICdpbWcvdW5pdmVyc2FsX2ZvbGRlci5wbmcnO1xuICAgICAgfVxuICB9O1xuXG5cdCRzY29wZS5pbml0KCk7XG59XSk7XG5cbnN5bmMuZGlyZWN0aXZlKCdkcmFnZ2FibGUnLCBmdW5jdGlvbigpIHtcblxuICAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0FFJyxcbiAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XG4gICAgICAgICAgIHZhciBlbCA9IGVsZW1lbnRbMF07XG5cbiAgICAgICAgICAgIGVsLmRyYWdnYWJsZSA9IHRydWU7XG5cbiAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgICAgICAgJ2RyYWdzdGFydCcsXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2RyYWcgZXZlbnQgc3RhcnRlZCcpO1xuICAgICAgICAgICAgICAgICAgICBlLmRhdGFUcmFuc2Zlci5lZmZlY3RBbGxvd2VkID0gJ21vdmUnO1xuICAgICAgICAgICAgICAgICAgICBlLmRhdGFUcmFuc2Zlci5zZXREYXRhKCdUZXh0JywgdGhpcy5pZCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LmFkZCgnZHJhZycpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBmYWxzZVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICAgICAgICAnZHJhZ2VuZCcsXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZHJhZyBldmVudCByZWxlYXNlZCcpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5yZW1vdmUoJ2RyYWcnKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZmFsc2VcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9O1xufSk7XG5cbnN5bmMuZGlyZWN0aXZlKCdkcm9wcGFibGUnLCBbJ3VzZXJJbnRlcmFjdGlvbk5vdGlmaWNhdGlvbicsJ0ZpbGVzJyxmdW5jdGlvbih1c2VySW50ZXJhY3Rpb25Ob3RpZmljYXRpb24sRmlsZXMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgZHJvcDogJyYnLFxuICAgICAgICAgICAgYmluOiAnPScvLyBwYXJlbnRcbiAgICAgICAgfSxcbiAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQpIHtcbiAgICAgICAgICAgIC8vIGFnYWluIHdlIG5lZWQgdGhlIG5hdGl2ZSBvYmplY3RcbiAgICAgICAgICAgIHZhciBlbCA9IGVsZW1lbnRbMF07XG4gICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgICAnZHJhZ292ZXInLFxuICAgICAgICAgICAgICBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICBlLmRhdGFUcmFuc2Zlci5kcm9wRWZmZWN0ID0gJ21vdmUnO1xuICAgICAgICAgICAgICAgICAgLy8gYWxsb3dzIHVzIHRvIGRyb3BcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgaWYgKGUucHJldmVudERlZmF1bHQpIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LmFkZCgnb3ZlcicpO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBmYWxzZVxuICAgICAgICAgICk7XG4gICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgICAgICdkcmFnZW50ZXInLFxuICAgICAgICAgICAgICBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5hZGQoJ292ZXInKTtcbiAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgZmFsc2VcbiAgICAgICAgICApO1xuXG4gICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICAgICAgJ2RyYWdsZWF2ZScsXG4gICAgICAgICAgICAgIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZSgnb3ZlcicpO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBmYWxzZVxuICAgICAgICAgICk7IFxuICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgICAnZHJvcCcsXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBTdG9wcyBzb21lIGJyb3dzZXJzIGZyb20gcmVkaXJlY3RpbmcuXG4gICAgICAgICAgICAgICAgICAgIGlmIChlLnN0b3BQcm9wYWdhdGlvbikgZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsYXNzTGlzdC5yZW1vdmUoJ292ZXInKTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgYmluSWQgPSB0aGlzLmlkO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGUuZGF0YVRyYW5zZmVyLmdldERhdGEoJ1RleHQnKSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdJdGVtIG5vdyBpczonK2l0ZW0pO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHRyeXtcbiAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxsIHRoZSBwYXNzZWQgZHJvcCBmdW5jdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBlbmRDaGlsZChpdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbihzY29wZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmbiA9IHNjb3BlLmRyb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJ3VuZGVmaW5lZCcgIT09IHR5cGVvZiBmbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm4oaXRlbS5pZCwgYmluSWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1jYXRjaChlKXtcbiAgICAgICAgICAgICAgICAgICAgICAvL3Rocm93IGVycm9yIHRoYXQgaGFwcGVuIHdoZW4gZmlsZSBpcyBkcm9wcGVkIGluIGl0J3Mgb3duIGxvY2F0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgLy9naXZlIHNvbWUgYWxlcnQgdG8gbm90aWZ5IHdoYXQgaGFwcG5lZFxuICAgICAgICAgICAgICAgICAgICAgIC8vIHRocm93KCBuZXcgRXJyb3IoZSkpXG4gICAgICAgICAgICAgICAgICAgICAgLy8gdXNlckludGVyYWN0aW9uTm90aWZpY2F0aW9uLmVycm9yKFwiRHJvcCBGaWxlIG9uIGZvbGRlciB0byBtb3ZlIGl0IVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGZhbHNlXG4gICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG59XSk7XG5zeW5jLmNvbnRyb2xsZXIoJ0RyYWdEcm9wQ3RybCcsIFsnJHNjb3BlJywnRmlsZXMnLCckaW50ZXJ2YWwnLGZ1bmN0aW9uKCRzY29wZSxGaWxlcywkaW50ZXJ2YWwpIHtcblxuICBcbiAgICAkc2NvcGUuaGFuZGxlRHJvcCA9IGZ1bmN0aW9uKCkge1xuICAgICAgLy8gMSlpZiBtb3ZlZCBvbmx5IHdoZW4gaXQgcmVhY2ggb24gZm9sZGVyIGFsbG93IG1vdmVcbiAgICAgIC8vIDIpdGFrZSB0aCBpZCBvZiBmaWxlIG1vdmVkIGFuZCB0YWtlIGlkIG9mIGZvbGRlciBtb3ZlIGZpbGUgaW50byBmb2xkZXJcblxuICAgICAgIC8vbW92ZSB0aGUgaXRlbSBpbnRvIHdoZXJlIGl0IGlzIGRyb3BlZFxuICAgICAgIC8vdGhlIGZpcnN0IHRoaW5nIGhlcmUgaXMgdG8gcmVjYWxjdWxhdGUgdGhlIGFycmF5IHRvIGtlZXAgdGhlIGFycmFuZ2VtZW50IGludGFjdFxuICAgICAgIFxuICAgICAgICBcbiAgICB9XG59XSk7XG4iLCJzeW5jLmNvbnRyb2xsZXIoJ3ByZXZpZXdDb250cm9sbGVyJyxcbiBbXG5cdCckc2NvcGUnLCdwZGZEZWxlZ2F0ZScsJyR0aW1lb3V0JywnJHN0YXRlUGFyYW1zJywnJHJvb3RTY29wZScsJyRleGNlcHRpb25IYW5kbGVyJywnRmlsZXMnLCAnRmlsZVNhdmVyJywnQmxvYicsZnVuY3Rpb24gKFxuXHRcdCRzY29wZSxwZGZEZWxlZ2F0ZSwkdGltZW91dCwkc3RhdGVQYXJhbXMsJHJvb3RTY29wZSwkZXhjZXB0aW9uSGFuZGxlcixGaWxlcyxGaWxlU2F2ZXIsIEJsb2IpIHtcblxuICAgICAgLy9nZXQgbWltZSB0eXBlIG9mIGFueUZpbGUgdGhhdCBjb21lcyBpbiBteSBob29kIVxuXG4gICAgICBcblxuICAgICAgaWYoJHN0YXRlUGFyYW1zLnByZXZpZXcgJiYgJHN0YXRlUGFyYW1zLmV4dGVuc2lvbiA9PSAncGRmJyl7XG4gICAgICAgICRzY29wZS5wcmV2aWV3YWJsZSA9IHRydWU7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvL2EgdXNlciBTdHJpbVVwIGlzIGluamVjdGVkIGluIGJlbGxvdyB1cmwgaXQgc2hvdWxkIGJlIGR5bmFtaWMgaW4gZnV0dXJlIVxuICAgICAgICAgICAgJHNjb3BlLnBkZlVybCA9ICRyb290U2NvcGUuZW5kUG9pbnQrICcvcHJldmlldy8nKyAkc3RhdGVQYXJhbXMucHJldmlldysnL29mLycrJ1N0cmltVXAnO1xuXG4gICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBwZGZEZWxlZ2F0ZS4kZ2V0QnlIYW5kbGUoJ215LXBkZi1jb250YWluZXInKS56b29tSW4oMC41KTtcbiAgICAgICAgICAgIH0sIDMwMDApO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG5cbiAgICAgICAgICAgdGhyb3coIG5ldyBFcnJvcihlKSlcbiAgICAgICAgfVxuICAgICAgfWVsc2UgaWYoJHN0YXRlUGFyYW1zLnByZXZpZXcgJiYgJHN0YXRlUGFyYW1zLmV4dGVuc2lvbiA9PSAnanBnJ3x8JHN0YXRlUGFyYW1zLmV4dGVuc2lvbiA9PSAncG5nJyl7XG4gICAgICAgICRzY29wZS5maWxlX25hbWUgPSAkc3RhdGVQYXJhbXMucHJldmlldztcbiAgICAgICAgJHNjb3BlLnByZXZpZXdhYmxlID0gZmFsc2U7XG4gICAgICAgIC8vYXMgYnkgbm93IGltYWdlcyBhcmUgbm90IHJlYWR5IHRvIGJlIHByZXZpZXdlZCBzbyBzZXQgaXQgdG8gZmFsc2UhcHJvdmlkZSBvbmx5IG9wdGlvbiB0byBkb3dubG9hZCB0aGVtIVxuICAgICAgICAgIC8vICRzY29wZS5wcmV2aWV3YWJsZSA9IGZhbHNlO1xuICAgICAgICAgIC8vIEZpbGVzLnNpbmdsZSgkc3RhdGVQYXJhbXMucHJldmlldylcbiAgICAgICAgICAvLyAudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgICAgLy8gICAkc2NvcGUuaW1hZ2VQcmV2aWV3ID0gcmVzcG9uc2U7XG4gICAgICAgICAgLy8gfSxmdW5jdGlvbihlcnIpe1xuICAgICAgICAgIC8vICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAvLyB9KTtcbiAgICAgIH1lbHNlIHtcbiAgICAgICAgLy9zZW5kIGEgZmlsZW5hbWUgdG8gYSBkb3dubG9hZCBidXR0b25cbiAgICAgICAgJHNjb3BlLmZpbGVfbmFtZSA9ICRzdGF0ZVBhcmFtcy5wcmV2aWV3O1xuICAgICAgICAkc2NvcGUucHJldmlld2FibGUgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgJHNjb3BlLmdvTmV4dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICRzY29wZS5pbmNyZW1lbnQgPSAxO1xuICAgICAgICAgIHBkZkRlbGVnYXRlLiRnZXRCeUhhbmRsZSgnbXktcGRmLWNvbnRhaW5lcicpLm5leHQoJHNjb3BlLmluY3JlbWVudCsxKTtcbiAgICAgIH07XG4gICAgICAvL3RoaXMgb3B0aW9uIGRvd24gaGVyZSBvZiBkb3dubG9hZGluZyBhIGZpbGUgd2FzIG5pY2UgYnV0IHN0aWxsIGhhdmUgc29tZSBkcm93YmFja1xuXG4gICAgICAvLyAkc2NvcGUuZG93bmxvYWQgPSBmdW5jdGlvbihmaWxlX25hbWUpe1xuXG4gICAgICAvLyAgIEZpbGVzLmRvd25sb2FkRmlsZShmaWxlX25hbWUpXG4gICAgICAvLyAgIC50aGVuKGZ1bmN0aW9uKGZpbGVfd3JpdGVuKXtcbiAgICAgICAgICAgIFxuICAgICAgLy8gICAgIEZpbGVzLmdldE1pbWVUeXBlKCRzdGF0ZVBhcmFtcy5wcmV2aWV3KVxuICAgICAgLy8gICAgICAgLnRoZW4oZnVuY3Rpb24obWltZVR5cGUpe1xuXG4gICAgICAvLyAgICAgICAgIHZhciBibG9iID0gbmV3IEJsb2IoW2ZpbGVfd3JpdGVuXSwge1xuICAgICAgLy8gICAgICAgICAgICAgdHlwZTogbWltZVR5cGUsXG4gICAgICAvLyAgICAgICAgIH0pO1xuICAgICAgLy8gICAgICAgICBGaWxlU2F2ZXIuc2F2ZUFzKGJsb2IsICRzdGF0ZVBhcmFtcy5wcmV2aWV3KTtcblxuICAgICAgLy8gICAgICAgfSxmdW5jdGlvbihlcnIpe1xuICAgICAgLy8gICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgLy8gICAgICAgfSk7XG5cbiAgICAgICAgICBcblxuICAgICAgLy8gICB9LGZ1bmN0aW9uKGVycil7XG4gICAgICAvLyAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIC8vICAgfSk7XG4gICAgICAvLyB9O1xuICAgICAgJHNjb3BlLmdvUHJldiA9IGZ1bmN0aW9uKHBhZ2Upe1xuICAgICAgICAgIHBkZkRlbGVnYXRlLiRnZXRCeUhhbmRsZSgnbXktcGRmLWNvbnRhaW5lcicpLnByZXYoJHNjb3BlLmluY3JlbWVudC0xKTtcbiAgICAgIH07XG59XSk7XG5cbnN5bmMuZGlyZWN0aXZlKCdmaWxlRG93bmxvYWQnLCBbZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgICAgIHJlcGxhY2U6IHRydWUsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogJzxidXR0b24gY2xhc3M9XCJidG4gYnRuLWRlZmF1bHRcIiBkYXRhLW5nLWNsaWNrPVwiZG93bmxvYWQoKVwiPjxzcGFuIGNsYXNzPVwiXCI+PC9zcGFuPkRvd25sb2FkPC9idXR0b24+JyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IFsnJHJvb3RTY29wZScsICckc2NvcGUnLCAnJGVsZW1lbnQnLCAnJGF0dHJzJywgJyR0aW1lb3V0JywgZnVuY3Rpb24gKCRyb290U2NvcGUsICRzY29wZSwgJGVsZW1lbnQsICRhdHRycywgJHRpbWVvdXQpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUucHJvZ3Jlc3MgPSAwO1xuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gcHJlcGFyZSh1cmwpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZGlhbG9ncy53YWl0KFwiUGxlYXNlIHdhaXRcIiwgXCJZb3VyIGRvd25sb2FkIHN0YXJ0cyBpbiBhIGZldyBzZWNvbmRzLlwiLCAkc2NvcGUucHJvZ3Jlc3MpO1xuICAgICAgICAgICAgICAgICAgICBmYWtlUHJvZ3Jlc3MoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gc3VjY2Vzcyh1cmwpIHtcbiAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdkaWFsb2dzLndhaXQuY29tcGxldGUnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZXJyb3IocmVzcG9uc2UsIHVybCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBkaWFsb2dzLmVycm9yKFwiQ291bGRuJ3QgcHJvY2VzcyB5b3VyIGRvd25sb2FkIVwiKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBmYWtlUHJvZ3Jlc3MoKSB7XG4gICAgICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUucHJvZ3Jlc3MgPCA5NSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5wcm9ncmVzcyArPSAoOTYgLSAkc2NvcGUucHJvZ3Jlc3MpIC8gMjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ2RpYWxvZ3Mud2FpdC5wcm9ncmVzcycsIHsgJ3Byb2dyZXNzJzogJHNjb3BlLnByb2dyZXNzIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZha2VQcm9ncmVzcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LCAyNTApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICRzY29wZS5kb3dubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb2dyZXNzID0gMDtcbiAgICAgICAgICAgICAgICAgICAgJC5maWxlRG93bmxvYWQoJ2h0dHA6Ly9zeW5jbWUuY29tOjgwMDAvYXBpL3YxL2ZpbGVzL2Rvd25sb2FkL3BocHhGbmxoZURWRTVqNW1jVkRYLnBuZy9vZi9TdHJpbVVwP2FjY2Vzc190b2tlbj1CYzdEV1M3S0tSTHR4bWRkVVpJMVQxbFp1MkoxWWhSOE9MWEdXTlpuJywgeyBwcmVwYXJlQ2FsbGJhY2s6IHByZXBhcmUsIHN1Y2Nlc3NDYWxsYmFjazogc3VjY2VzcywgZmFpbENhbGxiYWNrOiBlcnJvciB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XVxuICAgICAgICB9XG59XSk7XG4iLCIvKiBnbG9iYWwgc3luYyAqL1xuXCJ1c2Ugc3RyaWN0XCI7XG5zeW5jLmNvbnRyb2xsZXIoJ1Blb3BsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsJ1Blb3BsZScsZnVuY3Rpb24gKCRzY29wZSwgUGVvcGxlKSB7XG5cdFx0JHNjb3BlLmluaXQgPSBmdW5jdGlvbigpe1xuXHRcdFx0JHNjb3BlLmdldFBlb3BsZVRvRm9sbG93KCk7XG5cdFx0fVxuXHRcdCRzY29wZS5nZXRQZW9wbGVUb0ZvbGxvdyAgPSBmdW5jdGlvbigpe1xuXHRcdFx0UGVvcGxlLmdldCgpXG5cdFx0XHQudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG5cdFx0XHRcdFxuXHRcdFx0XHQkc2NvcGUucGVvcGxlID0gcmVzcG9uc2U7XG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcil7XG5cblx0XHRcdH0pXG5cdFx0fVxuXHRcdCRzY29wZS4kb24oJ2ZvbGxvd01lbWJlcicsZnVuY3Rpb24oZXZlbnQscGFyYW1zKXtcblx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRQZW9wbGUuZm9sbG93KHBhcmFtcylcblx0XHRcdC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblx0XHRcdFx0Ly9jb25zb2xlLmxvZyhyZXNwb25zZSk7XG5cdFx0XHRcdCRzY29wZS5nZXRQZW9wbGVUb0ZvbGxvdygpO1xuXHRcdFx0fSxmdW5jdGlvbihlcnJvcil7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGVycm9yKTtcblx0XHRcdH0pXG5cdFx0fSk7XG5cdFx0JHNjb3BlLmZvbGxvdyA9IGZ1bmN0aW9uKGlkKXtcblx0XHRcdHZhciBmb2xsb3cgPXtpZDogaWQsIG9wdGlvbjonYWRkUGVvcGxlJ307XG5cdFx0XHQkc2NvcGUuJGVtaXQoXCJmb2xsb3dNZW1iZXJcIiwgZm9sbG93KTtcblx0XHR9XG5cdFx0JHNjb3BlLmluaXQoKTtcbn1dKTtcbiIsIi8qIGdsb2JhbCBGaWxlcyAqL1xuLyogZ2xvYmFsIHN5bmMgKi9cbi8qIGdsb2JhbCAkc2NvcGUgKi9cbi8qIGdsb2JhbCBhbmd1bGFyICovXG4vKkF1dGhvciBNdXJhZ2lqaW1hbmEgRm91bmRlciAmIENFTyBvZiBzeW5jIGNhbGwgaGltIG9uIFN0cmltVXBAZ21haWwuY29tKi9cblxuc3luYy5zZXJ2aWNlKCdHcm91cCcsIFtcblx0JyRodHRwJyxcblx0JyRyb290U2NvcGUnLFxuXHQnJHEnLGZ1bmN0aW9uIEdyb3VwIChcblx0XHQkaHR0cCxcblx0XHQkcm9vdFNjb3BlLFxuXHRcdCRxKSB7XG5cdHRoaXMuY3JlYXRlIFx0XHQ9XHRmdW5jdGlvbihuYW1lKXtcblx0XHR2YXIgZGlmZmVyZWQgXHQ9XHQkcS5kZWZlcigpO1xuXHRcdCRodHRwLnBvc3QoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL21lL2dyb3VwcycsIG5hbWUpXG5cdFx0LnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcG9uc2Upe1xuXHRcdFx0ZGlmZmVyZWQucmVzb2x2ZShyZXNwb25zZSk7XG5cdFx0fSlcblx0XHQuZXJyb3IoZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdGRpZmZlcmVkLnJlamVjdChlcnJvcik7XG5cdFx0fSlcblx0XHRyZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcblx0fVxuXHR0aGlzLmRlbGV0ZSBcdFx0PVx0ZnVuY3Rpb24oaWQpe1xuXHRcdHZhciBkaWZmZXJlZCBcdD1cdCRxLmRlZmVyKCk7XG5cdFx0JGh0dHAuZGVsZXRlKCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS9tZS9ncm91cHMvJytpZClcblx0XHQuc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSl7XG5cdFx0XHRkaWZmZXJlZC5yZXNvbHZlKHJlc3BvbnNlKTtcblx0XHR9KVxuXHRcdC5lcnJvcihmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0ZGlmZmVyZWQucmVqZWN0KGVycm9yKTtcblx0XHR9KVxuXHRcdHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuXHR9XG5cdHRoaXMubXlHcm91cHNcdFx0PVx0ZnVuY3Rpb24oKXtcblx0XHR2YXIgZGlmZmVyZWQgXHQ9XHQkcS5kZWZlcigpO1xuXG5cdFx0JGh0dHAuZ2V0KCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS9tZS9ncm91cHMnKVxuXHRcdC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblx0XHRcdGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuXHRcdH0pXG5cdFx0LmVycm9yKGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRjb25zb2xlLmxvZygnZGlmZmVyZWQgc2xvdzonICsgZXJyb3IpO1xuXHRcdFx0ZGlmZmVyZWQucmVqZWN0KGVycm9yKTtcblx0XHR9KVxuXHRcdHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuXHR9XG5cblx0dGhpcy5hZGRQZW9wbGUgXHQ9XHRmdW5jdGlvbihtZW1iZXIpe1xuXHRcdHZhciBkaWZmZXJlZCBcdD1cdCRxLmRlZmVyKCk7XG5cdFx0JGh0dHAucHV0KCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS9tZS9ncm91cHMvJytKU09OLnN0cmluZ2lmeShtZW1iZXIpKVxuXHRcdC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblx0XHRcdGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuXHRcdH0pXG5cdFx0LmVycm9yKGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRkaWZmZXJlZC5yZXNvbHZlKGVycm9yKTtcblx0XHR9KVxuXHRcdHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuXHR9O1xuXHR0aGlzLmFkZEZpbGVUb0dyb3VwID0gZnVuY3Rpb24oZmlsZU9iail7XG5cdFx0dmFyIGRpZmZlcmVkID0gJHEuZGVmZXIoKTtcblx0XHQkaHR0cC5wdXQoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL21lL2dyb3Vwcy8nKyBKU09OLnN0cmluZ2lmeShmaWxlT2JqKSlcblx0XHQuc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSl7XG5cdFx0XHRkaWZmZXJlZC5yZXNvbHZlKHJlc3BvbnNlKTtcblx0XHR9KVxuXHRcdC5lcnJvcihmdW5jdGlvbihlcnIpe1xuXHRcdFx0ZGlmZmVyZWQucmVqZWN0KGVycik7XG5cdFx0fSlcblx0XHRyZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcblx0fVxuXHR0aGlzLnJlbW92ZVBlb3BsZSBcdD1cdGZ1bmN0aW9uKG1lbWJlcil7XG5cdFx0dmFyIGRpZmZlcmVkIFx0PVx0JHEuZGVmZXIoKTtcblx0XHQkaHR0cC5wdXQoJHJvb3RTY29wZS5lbmRQb2ludCArJy9hcGkvdjEvbWUvZ3JvdXBzLycrSlNPTi5zdHJpbmdpZnkobWVtYmVyKSlcblx0XHQuc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSl7XG5cdFx0XHRkaWZmZXJlZC5yZXNvbHZlKHJlc3BvbnNlKTtcblx0XHR9KVxuXHRcdC5lcnJvcihmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0ZGlmZmVyZWQucmVqZWN0KGVycm9yKTtcblx0XHR9KVxuXHRcdHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuXHR9XG4gIHRoaXMuc3VnZ2VzdFBlb3BsZSA9IGZ1bmN0aW9uKGlkKXtcblxuICAgIFx0dmFyIGRpZmZlcmVkID0gJHEuZGVmZXIoKTtcbiAgICBcdCRodHRwLmdldCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvbWUvZ3JvdXBzLycgKyBpZClcbiAgICBcdC5zdWNjZXNzKGZ1bmN0aW9uKHJlcyl7XG4gICAgXHRcdGRpZmZlcmVkLnJlc29sdmUocmVzKTtcbiAgICBcdH0pXG4gICAgXHQuZXJyb3IoZnVuY3Rpb24oZXJyKSB7XG4gICAgXHRcdGRpZmZlcmVkLnJlamVjdChlcnIpO1xuICAgIFx0fSlcbiAgICBcdHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuICAgIH1cblx0cmV0dXJuIHRoaXM7XG59XSk7XG5cbnN5bmMuY29udHJvbGxlcignR3JvdXBDb250cm9sbGVyJywgW1xuXHQnJHNjb3BlJyxcblx0J0dyb3VwJyxcblx0J1VzZXInLFxuXHQnRmlsZXMnLFxuXHQndXNlckludGVyYWN0aW9uTm90aWZpY2F0aW9uJyxcblx0ZnVuY3Rpb24gR3JvdXBDb250cm9sbGVyIChcblx0XHQkc2NvcGUsXG5cdFx0R3JvdXAsXG5cdFx0VXNlcixcblx0XHRGaWxlcyxcblx0XHR1c2VySW50ZXJhY3Rpb25Ob3RpZmljYXRpb25cblx0KSB7XG5cdCRzY29wZS5pbml0IFx0PVx0ZnVuY3Rpb24oKXtcblx0XHQkc2NvcGUubXlHcm91cHMoKTtcblxuXHRcdCRzY29wZS5zdWdnZXN0ZWRQZW9wbGVUb0dyb3VwKCk7Ly9vZmNhdXNlIHRoZXkgYXJlIGFybGVhZHkgeW91ciBmcmllbmQgYnV0IG5vdCBwYXJ0aWNpcGFudCBpbiB5b3VyIHN0dWZmIHdvcmshXG5cdH1cblx0JHNjb3BlLnVzZXJJZCBcdFx0XHRcdD1cdGZ1bmN0aW9uKCl7XG5cdFx0VXNlci5faWQoKVxuXHRcdC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblx0XHRcdCRzY29wZS51c2VySWQgXHQ9XHRyZXNwb25zZTtcblx0XHR9LCBmdW5jdGlvbihlcnJvcil7XG5cdFx0XHRjb25zb2xlLmxvZyhlcnJvcik7XG5cdFx0fSk7XG5cdH07XG5cdCRzY29wZS5teUdyb3VwcyBcdFx0XHQ9XHRmdW5jdGlvbigpe1xuXHRcdEdyb3VwLm15R3JvdXBzKClcblx0XHQudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG5cdFx0XHQkc2NvcGUuZ3JvdXAgXHQ9IHJlc3BvbnNlO1xuXHRcdH0sIGZ1bmN0aW9uKGVycm9yKXtcblx0XHR9KTtcblx0fTtcblx0JHNjb3BlLnN1Z2dlc3RlZFBlb3BsZVRvR3JvdXAgXHQ9XHRmdW5jdGlvbihpZCl7XG5cdFx0Ly9jbGVhcmluZyBhbGwgdmlldyByZW5kZXJlZCBiZWZvcmVcblx0XHQkc2NvcGUuc2hvd0ZpbGVzPWZhbHNlO1xuXHRcdCRzY29wZS5zaG93R3JvdXA9ZmFsc2U7XG5cdFx0JHNjb3BlLnNob3dCb3g9ZmFsc2U7XG5cdFx0aWYoIWFuZ3VsYXIuaXNVbmRlZmluZWQoaWQpKXtcblx0XHRcdEdyb3VwLnN1Z2dlc3RQZW9wbGUoaWQpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuXHRcdFx0XHQvLyBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG5cdFx0XHRcdCRzY29wZS5mb2xsb3dlcnMgPSByZXNwb25zZTtcblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yKXtcblx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3IpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9O1xuXHQkc2NvcGUuJG9uKCdyZWZyZXNoR3JvdXAnLGZ1bmN0aW9uKCl7XG4gICAgICAgJHNjb3BlLmluaXQoKTtcbiAgXHR9KTtcblx0JHNjb3BlLiRvbignZ3JvdXBEZWxldGVkJywgZnVuY3Rpb24gKGV2ZW50LCBhcmdzKSB7XG5cdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHQkc2NvcGUubXlHcm91cHMoKTtcblx0fSk7XG5cdCRzY29wZS4kb24oJ2dyb3VwVG9iaW5kd2l0aCcsIGZ1bmN0aW9uIChldmVudCwgZ3JvdXBpZCkge1xuXHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICRzY29wZS5lbWl0dGVkID1ncm91cGlkO1xuICAgICAgICBpZiggJHNjb3BlLnNob3dGaWxlcyA9PSB0cnVlKXtcbiAgICAgICAgICAgICRzY29wZS5zaG93RmlsZXM9ZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgJHNjb3BlLnN1Z2dlc3RlZFBlb3BsZVRvR3JvdXAoZ3JvdXBpZCk7XG4gICAgICAgICRzY29wZS5hZGRQZW9wbGU9dHJ1ZTtcblx0fSk7XG5cdCRzY29wZS5nZXRHcm91cEZpbGVzID0gZnVuY3Rpb24ob3duZXIpe1xuICAgIEZpbGVzLmdldEdyb3VwRmlsZXMob3duZXIpXG5cdFx0LnRoZW4oZnVuY3Rpb24odHJlZSl7XG5cdFx0XHQkc2NvcGUuZmlsZXMgPSB0cmVlO1xuXHRcdFx0XHQvL25hdmlnYXRlIHRyb3VnaCB0cmVlIHJlc3BvbnNlIHdoaWNoIGlzIHJlcXVpcmUgbXVjaCBhdHRlbnRpb25cblx0XHRcdFx0JHNjb3BlLmdyb3Vwcz1bXTtcblx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCB0cmVlLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0XHRpZiAodHJlZVtpXS5oYXNPd25Qcm9wZXJ0eSgnZ3JvdXBzJykgJiYgdHJlZVtpXVsnZ3JvdXBzJ10pIHtcblx0XHRcdFx0XHRcdFx0XHQkc2NvcGUuZ3JvdXBzLnB1c2godHJlZVtpXS5mcmllbmRzKTtcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAodHJlZVtpXS5oYXNPd25Qcm9wZXJ0eSgnZ3JvdXBzJykpIHtcblx0XHRcdFx0XHRcdFx0XHQkc2NvcGUuZ3JvdXBzID0gZ3JvdXBzLmNvbmNhdCh0cmF2ZXJzZSh0cmVlW2ldLmdyb3VwcykpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0fSwgZnVuY3Rpb24oZXJyb3Ipe1xuXHRcdFx0Y29uc29sZS5sb2coZXJyb3IpO1xuXHRcdH0pO1xuICB9O1xuXHQkc2NvcGUuZ2V0Qm94RmlsZXMgPSBmdW5jdGlvbihncm91cElkKXtcblx0XHQkc2NvcGUuZW1pdHRlZCA9Z3JvdXBJZDtcbiAgXHRGaWxlcy5nZXRCb3hGaWxlcyhncm91cElkKVxuXHRcdC50aGVuKGZ1bmN0aW9uKHRyZWUpe1xuXHRcdFx0JHNjb3BlLmZpbGVzID0gdHJlZTtcblx0XHRcdFx0Ly9uYXZpZ2F0ZSB0cm91Z2ggdHJlZSByZXNwb25zZSB3aGljaCBpcyByZXF1aXJlIG11Y2ggYXR0ZW50aW9uXG5cdFx0XHRcdCRzY29wZS5ncm91cHM9W107XG5cdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgdHJlZS5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdFx0aWYgKHRyZWVbaV0uaGFzT3duUHJvcGVydHkoJ2dyb3VwcycpICYmIHRyZWVbaV1bJ2dyb3VwcyddKSB7XG5cdFx0XHRcdFx0XHRcdFx0JHNjb3BlLmdyb3Vwcy5wdXNoKHRyZWVbaV0uZnJpZW5kcyk7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKHRyZWVbaV0uaGFzT3duUHJvcGVydHkoJ2dyb3VwcycpKSB7XG5cdFx0XHRcdCAgICAgICAgICAgICRzY29wZS5ncm91cHMgPSBncm91cHMuY29uY2F0KHRyYXZlcnNlKHRyZWVbaV0uZ3JvdXBzKSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHR9LCBmdW5jdGlvbihlcnJvcil7XG5cdFx0XHRjb25zb2xlLmxvZyhlcnJvcik7XG5cdFx0fSk7XG4gIH07XG4kc2NvcGUuJG9uKCdzaG93T3B0aW9ucycsZnVuY3Rpb24oXyxwYXJhbXMpe1xuICAgICBpZihwYXJhbXMub3duZXIgPT09XCJib3hcIil7XG5cdFx0XHQgJHNjb3BlLmFkZFBlb3BsZT1mYWxzZTtcblx0XHRcdCAkc2NvcGUuc2hvd0dyb3VwPWZhbHNlO1xuICAgICAgICRzY29wZS5zaG93Qm94PXRydWU7XG4gICAgICAgaWYoICRzY29wZS5hZGRQZW9wbGUgPT0gdHJ1ZSl7XG4gICAgICAgICAgICRzY29wZS5hZGRQZW9wbGU9ZmFsc2U7XG4gICAgICAgfVxuXHRcdFx0IC8vc2V0IGZpbGVzIHNjb3BlIHRvIHNob3cgZmlsZXMgb2YgYm94IGZpbGVzIGlzIHJlcGVhdGVkIGluIHZpZXcgZGlyZWN0aXZlXG4gICAgICAgJHNjb3BlLmdldEJveEZpbGVzIChwYXJhbXMuZ3JvdXBfaWQpO1xuXHRcdCB9ZWxzZSBpZiAocGFyYW1zLm93bmVyID09PSBcImdyb3VwXCIpIHtcblx0XHRcdCAkc2NvcGUuc2hvd0JveD1mYWxzZTtcblx0XHRcdCAkc2NvcGUuYWRkUGVvcGxlPWZhbHNlO1xuXHRcdFx0ICRzY29wZS5zaG93R3JvdXA9dHJ1ZTtcblx0XHRcdCBpZiggJHNjb3BlLmFkZFBlb3BsZSA9PSB0cnVlKXtcblx0XHRcdFx0XHQgJHNjb3BlLmFkZFBlb3BsZT1mYWxzZTtcblx0XHRcdCB9XG5cdFx0XHQgLy9jaGFuZ2UgZmlsZXMgdG8gbmV3IHNjb3BlIGZpbGVzIHRvIHNob3cgZmlsZXMgb2YgZ3JvdXBzICBpcyByZXBlYXRlZCBpbiB2aWV3IGRpcmVjdGl2ZVxuXHRcdFx0ICRzY29wZS5nZXRHcm91cEZpbGVzIChwYXJhbXMuZ3JvdXBfaWQpO1xuXHRcdCB9XG59KTtcbiRzY29wZS5pbml0KCk7XG59XSk7XG5zeW5jLmRpcmVjdGl2ZSgnbXlHcm91cHMnLCBbXG5cdCdHcm91cCcsXG5cdCdSZXBvcnQnLFxuXHQndXNlckludGVyYWN0aW9uTm90aWZpY2F0aW9uJyxcblx0ZnVuY3Rpb24gbXlHcm91cHMgKFxuXHRcdEdyb3VwLFxuXHRcdFJlcG9ydCxcblx0XHR1c2VySW50ZXJhY3Rpb25Ob3RpZmljYXRpb24sXG5cdFx0Tm90aWZpY2F0aW9uKSB7XG5cdHJldHVybiB7XG5cdFx0cHJpb3JpdHk6IDEwLFxuXHRcdHRlbXBsYXRlVXJsOiAnQXBwL3NjcmlwdHMvanMvZGlyZWN0aXZlcy9ncm91cHMuaHRtbCcsXG5cdFx0cmVzdHJpY3Q6ICdFJyxcblx0XHRzY29wZToge1xuXHRcdFx0ICBpZDogJz11c2VySWQnLFxuICAgICAgICAgIGdyb3VwczogJz0nLFxuICAgICAgICAgIGZvbGxvd2VyczogJz0nLFxuICAgICAgICAgIGVtaXR0ZWQ6Jz0nLFxuICAgICAgICAgIHNob3dQZW9wbGU6Jz0nLFxuICAgICAgICAgIHNob3dHcm91cCAgIDogICc9JyxcbiAgICAgICAgICBmaWxlcyAgIDogICc9Jyxcblx0ICBcdFx0XHRzaG93Qm94OiAgJz0nXG5cdFx0fSxcblx0XHRsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGlFbGVtZW50LCBpQXR0cnMpIHtcblx0XHRcdHNjb3BlLmRlbGV0ZUdyb3VwID0gZnVuY3Rpb24oaWQpe1xuXHRcdFx0XHRHcm91cC5kZWxldGUoaWQpXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uKHJlcyl7XG5cdFx0XHRcdFx0XHR1c2VySW50ZXJhY3Rpb25Ob3RpZmljYXRpb24uaW5mbyhcIkdyb3VwIGRlbGV0ZWRcIik7XG5cdFx0XHRcdFx0IFx0c2NvcGUuJGVtaXQoXCJncm91cERlbGV0ZWRcIiwgJ2dyb3VwIGRlbGV0ZWQnKTtcblx0XHRcdFx0fSwgZnVuY3Rpb24oZXJyKXtcblx0XHRcdFx0XHRSZXBvcnQuc2VuZCgnZGVsZXRlIGdyb3VwIGVycm9yOicrZXJyKVxuXHRcdFx0XHRcdC50aGVuKGZ1bmN0aW9uKCl7fSwgZnVuY3Rpb24oKXt9KTtcblx0XHRcdFx0fSlcblx0XHRcdH07XG4gICAgICBzY29wZS5jcmVhdGVHcm91cFx0PVx0ZnVuY3Rpb24obmFtZSl7XG4gICAgICAgICAgR3JvdXAuY3JlYXRlKG5hbWUpXG4gICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dXNlckludGVyYWN0aW9uTm90aWZpY2F0aW9uLnN1Y2Nlc3MoXCJDcmVhdGVkIG5ldyBHcm91cFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICBzY29wZS4kZW1pdCgncmVmcmVzaEdyb3VwJyxudWxsKTtcbiAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycm9yKXtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfTtcblx0XHRcdHNjb3BlLmluaXRBZGRQZW9wbGUgPSBmdW5jdGlvbihncm91cGlkKXtcblx0XHRcdFx0c2NvcGUuJGVtaXQoXCJncm91cFRvYmluZHdpdGhcIiwgZ3JvdXBpZCk7XG5cdFx0XHR9O1xuXG5cdFx0XHRzY29wZS5hZGRQZW9wbGUgPSBmdW5jdGlvbihwYXJhbXMpe1xuXHRcdFx0XHR2YXIgbmV3UGFyYW1zID17XG5cdFx0XHRcdFx0J29wdGlvbic6J2FkZE1lbWJlcicsXG5cdFx0XHRcdFx0J3VzZXJJZCc6cGFyYW1zLnVzZXJJZCxcblx0XHRcdFx0XHQnZ3JvdXBJZCc6cGFyYW1zLmdyb3VwSWRcblx0XHRcdFx0fVxuXHRcdFx0XHRpZihhbmd1bGFyLmlzVW5kZWZpbmVkKHBhcmFtcykpe1xuXHRcdFx0XHRcdC8vd29uJ3QgaGFwcGVuIW9yIGlmIHRpIGhhcHBlbiB3ZSBxdWl0XG5cdFx0XHRcdH1lbHNle1xuXG5cdFx0XHRcdFx0R3JvdXAuYWRkUGVvcGxlKG5ld1BhcmFtcylcblx0XHRcdFx0XHQudGhlbihmdW5jdGlvbiAocmVzcG9uc2Upe1xuXHRcdFx0XHRcdFx0Ly9yZWZyZXNoIGdyb3VwIHdpdGggbmV3IG1lbWJlciBzdGF0dXNcblx0XHRcdFx0XHRcdFx0dXNlckludGVyYWN0aW9uTm90aWZpY2F0aW9uLnN1Y2Nlc3MoXCJBZGRlZCBNZW1iZXIgaW4gZ3JvdXAuXCIpO1xuICAgICAgICAgICAgICBzY29wZS5pbml0QWRkUGVvcGxlKHBhcmFtcy5ncm91cElkKTtcbiAgICAgICAgICAgICAgc2NvcGUuJGVtaXQoJ3JlZnJlc2hHcm91cCcsJycpO1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG5cdFx0XHRcdFx0fSwgZnVuY3Rpb24gKGVycm9yLHN0YXR1cyl7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0c2NvcGUucmVtb3ZlUGVvcGxlID0gZnVuY3Rpb24ocGFyYW1zKXtcblxuXHRcdFx0XHR2YXIgbmV3UGFyYW1zID17XG5cdFx0XHRcdFx0J29wdGlvbic6J3JlbW92ZU1lbWJlcicsXG5cdFx0XHRcdFx0J3VzZXJJZCc6cGFyYW1zLnVzZXJJZCxcblx0XHRcdFx0XHQnZ3JvdXBJZCc6cGFyYW1zLmdyb3VwSWRcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmKGFuZ3VsYXIuaXNVbmRlZmluZWQocGFyYW1zKSl7XG5cdFx0XHRcdFx0Ly93b24ndCBoYXBwZW4hb3IgaWYgdGkgaGFwcGVuIHdlIHF1aXQgdG9vIGJhZCBoaWVyYWNoeSFcblx0XHRcdFx0fWVsc2V7XG5cdFx0XHRcdEdyb3VwLnJlbW92ZVBlb3BsZShuZXdQYXJhbXMpXG5cdFx0XHRcdFx0LnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKXtcblx0XHRcdFx0XHRcdFx0dXNlckludGVyYWN0aW9uTm90aWZpY2F0aW9uLmluZm8oXCJSZW1vdmVkIE1lbWJlciBpbiBncm91cC5cIik7XG5cdCAgICAgICAgICAgIHNjb3BlLmluaXRBZGRQZW9wbGUocGFyYW1zLmdyb3VwSWQpO1xuXHQgICAgICAgICAgICBzY29wZS4kZW1pdCgncmVmcmVzaEdyb3VwJywnJyk7XG4gICAgICAgICAgICBcdGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcblx0XHRcdFx0XHR9LCBmdW5jdGlvbiAoZXJyb3Isc3RhdHVzKXtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdFx0c2NvcGUucmVtb3ZlRnJvbUdyb3VwID0gZnVuY3Rpb24oKXtcblx0XHRcdFx0Y29uc29sZS5sb2coJ3dlIGNhbiByZW1vdmUgZmlsZSBpbiBncm91cCcpO1xuXHRcdFx0fVxuXHRcdFx0c2NvcGUuYWRkRmlsZVRvR3JvdXAgPSBmdW5jdGlvbihwYXJhbXMpe1xuXHRcdFx0XHR2YXIgZmlsZU9iaiA9e1xuXHRcdFx0XHRcdCdvcHRpb24nOidhZGRGaWxlcycsXG5cdFx0XHRcdFx0J2ZpbGVJZCc6cGFyYW1zLmZpbGVJZCxcblx0XHRcdFx0XHQnZ3JvdXBJZCc6cGFyYW1zLmdyb3VwSWRcblx0XHRcdFx0fVxuXG5cdFx0XHRcdEdyb3VwLmFkZEZpbGVUb0dyb3VwKGZpbGVPYmopXG5cdFx0XHRcdC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhyZXNwb25zZSk7XG5cdFx0XHRcdFx0Ly8gdXNlckludGVyYWN0aW9uTm90aWZpY2F0aW9uLnN1Y2Nlc3MoXCJBIGZpbGUgaXMgYWRkZWQgaW4gZ3JvdXBcIik7XG5cdFx0XHRcdH0sZnVuY3Rpb24oZXJyKXtcblx0XHRcdFx0XHR1c2VySW50ZXJhY3Rpb25Ob3RpZmljYXRpb24ud2FybihcIlNvbWUgZXJyb3Igb2NjdXJlZCBkdXJpbmcgYWRkaW5nIGZpbGVcIik7XG5cdFx0XHRcdH0pXG5cblx0XHRcdH1cblx0XHRcdHNjb3BlLmZpbGVzSW5Cb3ggPSBmdW5jdGlvbihncm91cGlkKXtcblx0XHRcdFx0dmFyIHBhcmFtcyA9eydncm91cF9pZCc6Z3JvdXBpZCwnb3duZXInOidib3gnfTtcblx0XHRcdFx0c2NvcGUuJGVtaXQoJ3Nob3dPcHRpb25zJyxwYXJhbXMpO1xuXG5cdFx0XHR9XG5cdFx0XHRzY29wZS5maWxlc0luR3JvdXAgPSBmdW5jdGlvbihncm91cGlkKXtcblxuXHRcdFx0XHR2YXIgcGFyYW1zID17J2dyb3VwX2lkJzpncm91cGlkLCdvd25lcic6J2dyb3VwJ307XG5cdFx0XHRcdHNjb3BlLiRlbWl0KCdzaG93T3B0aW9ucycscGFyYW1zKTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG59XSk7XG5cbnN5bmMuc2VydmljZSgnUmVwb3J0JywgW2Z1bmN0aW9uIFJlcG9ydCAoJGh0dHAsJHEsJHJvb3RTY29wZSkge1xuXHR0aGlzLnNlbmQgPSBmdW5jdGlvbihpc3N1ZSl7XG5cdFx0dmFyIGRpZmZlcmVkID0gJHEuZGVmZXIoKTtcblx0XHQkaHR0cC5wb3N0KCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS9pc3N1ZXMnLCBpc3N1ZSlcblx0XHQuc3VjY2VzcyhmdW5jdGlvbihyZXMpe1xuXHRcdFx0ZGlmZmVyZWQucmVzb2x2ZShyZXMpO1xuXHRcdH0pXG5cdFx0LmVycm9yKGZ1bmN0aW9uKGVycikge1xuXHRcdFx0ZGlmZmVyZWQucmVqZWN0KGVycik7XG5cdFx0fSlcblx0XHRyZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcblx0fVxuXHRyZXR1cm4gdGhpcztcbn1dKTtcbiIsIi8qIGdsb2JhbCBzeW5jICovXG5zeW5jLnNlcnZpY2UoJ1NldHRpbmdzJywgWyckaHR0cCcsJyRyb290U2NvcGUnLCckcScsZnVuY3Rpb24gKCRodHRwLCRyb290U2NvcGUsJHEpIHtcblx0dGhpcy5jdXJyZW50ID0gZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIGRpZmZlcmVkID0gJHEuZGVmZXIoKTtcbiAgICAgICAgJGh0dHAuZ2V0KCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS9zZXR0aW5ncycpXG4gICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3Ape1xuICAgICAgICAgICAgZGlmZmVyZWQucmVzb2x2ZShyZXNwKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmVycm9yKGZ1bmN0aW9uKGVycil7XG4gICAgICAgICAgICBkaWZmZXJlZC5yZWplY3QoZXJyKTtcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGRpZmZlcmVkLnByb21pc2U7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xufV0pO1xuXG5zeW5jLmNvbnRyb2xsZXIoJ1NldHRpbmdzQ29udHJvbGxlcicsIFsnJHNjb3BlJywnU2V0dGluZ3MnLCckbG9nJywgZnVuY3Rpb24gKCRzY29wZSxTZXR0aW5ncywkbG9nKSB7XG5cdCRzY29wZS5pbml0ID0gZnVuY3Rpb24oKXtcbiAgICAgICAgJHNjb3BlLmxvYWRDdXJyZW50U2V0dGluZ3MoKTtcbiAgICB9XG4gICAgICRzY29wZS5sb2FkQ3VycmVudFNldHRpbmdzID0gZnVuY3Rpb24oKXtcbiAgICAgICAgIFNldHRpbmdzLmN1cnJlbnQoKS50aGVuKGZ1bmN0aW9uKHJlc3Ape1xuICAgICAgICAgICAgICRzY29wZS5zZXR0aW5ncyA9IHJlc3A7XG4gICAgICAgICB9LCBmdW5jdGlvbihlcnIpe1xuICAgICAgICAgICAgICRsb2cuaW5mbygnZXJycm9yIHByZXZlbnQgcHJvbWlzZSB0byBiZSBmdWxsZmlsbCcpO1xuICAgICAgICAgfSk7XG4gICAgIH1cbiAgICAgJHNjb3BlLmluaXQoKTtcbn1dKTtcbiIsIi8qIGdsb2JhbCBzeW5jICovXG5zeW5jLmNvbnRyb2xsZXIoJ1NoYXJlQ29udHJvbGxlcicsIFtcblx0JyRzY29wZScsXG5cdCckcm9vdFNjb3BlJyxcblx0JyRyb3V0ZVBhcmFtcycsXG5cdCckcm91dGUnLFxuXHQnJGxvZycsXG5cdCckdWliTW9kYWwnLFxuXHQnU2hhcmUnLFxuXHQnVXNlcicsXG5cdGZ1bmN0aW9uIChcblx0XHQkc2NvcGUsXG5cdFx0JHJvb3RTY29wZSxcblx0XHQkcm91dGVQYXJhbXMsXG5cdFx0JHJvdXRlLFxuXHRcdCRsb2csXG5cdFx0JHVpYk1vZGFsLFxuXHRcdFNoYXJlLFxuXHRcdFVzZXJcblx0KSBcbntcblxuXHQkc2NvcGUuc2hhcmUgPSBmdW5jdGlvbihmaWxlX2lkKXtcblx0XHQvLyBhbGVydCgnaGVyZScpO1xuXHRcdGNvbnNvbGUubG9nKGZpbGVfaWQpO1xuXHR9O1xufVxuXSk7XG4iLCIvKiBnbG9iYWwgc3luYyAqL1xuLyogZ2xvYmFsIGFuZ3VsYXIgKi9cbid1c2Ugc3RyaWN0JztcblxuYW5ndWxhclxuXG4gICAgc3luYy5jb250cm9sbGVyKCdVcGxvYWRDb250cm9sbGVyJywgWyckc2NvcGUnLCAnRmlsZVVwbG9hZGVyJywnJHJvb3RTY29wZScsJ0ZpbGVzJywgZnVuY3Rpb24oJHNjb3BlLCBGaWxlVXBsb2FkZXIsJHJvb3RTY29wZSxGaWxlcykge1xuICAgICAgICB2YXIgdXBsb2FkZXIgPSAkc2NvcGUudXBsb2FkZXIgPSBuZXcgRmlsZVVwbG9hZGVyKHtcbiAgICAgICAgICAgIHVybDogJHJvb3RTY29wZS5lbmRQb2ludCsnL2FwaS92MS91cGxvYWQnXG4gICAgICAgIH0pO1xuICAgICAgICAvL0ZJTFRFUlNcbiAgICAgICAgdXBsb2FkZXIuZmlsdGVycy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6ICdjdXN0b21GaWx0ZXInLFxuICAgICAgICAgICAgZm46IGZ1bmN0aW9uKGl0ZW0gLyp7RmlsZXxGaWxlTGlrZU9iamVjdH0qLywgb3B0aW9ucykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnF1ZXVlLmxlbmd0aCA8IDEwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy9DQUxMQkFDS1NcbiAgICAgICAgdXBsb2FkZXIub25XaGVuQWRkaW5nRmlsZUZhaWxlZCA9IGZ1bmN0aW9uKGl0ZW0gLyp7RmlsZXxGaWxlTGlrZU9iamVjdH0qLywgZmlsdGVyLCBvcHRpb25zKSB7XG4gICAgICAgICAgICBjb25zb2xlLmluZm8oJ29uV2hlbkFkZGluZ0ZpbGVGYWlsZWQnLCBpdGVtLCBmaWx0ZXIsIG9wdGlvbnMpO1xuICAgICAgICB9O1xuICAgICAgICB1cGxvYWRlci5vbkFmdGVyQWRkaW5nRmlsZSA9IGZ1bmN0aW9uKGZpbGVJdGVtKSB7XG4gICAgICAgICAgICBjb25zb2xlLmluZm8oJ29uQWZ0ZXJBZGRpbmdGaWxlJywgZmlsZUl0ZW0pO1xuICAgICAgICB9O1xuICAgICAgICB1cGxvYWRlci5vbkFmdGVyQWRkaW5nQWxsID0gZnVuY3Rpb24oYWRkZWRGaWxlSXRlbXMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnb25BZnRlckFkZGluZ0FsbCcsIGFkZGVkRmlsZUl0ZW1zKTtcbiAgICAgICAgfTtcbiAgICAgICAgdXBsb2FkZXIub25CZWZvcmVVcGxvYWRJdGVtID0gZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICAgICAgY29uc29sZS5pbmZvKCdvbkJlZm9yZVVwbG9hZEl0ZW0nLCBpdGVtKTtcbiAgICAgICAgfTtcbiAgICAgICAgdXBsb2FkZXIub25Qcm9ncmVzc0l0ZW0gPSBmdW5jdGlvbihmaWxlSXRlbSwgcHJvZ3Jlc3MpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnb25Qcm9ncmVzc0l0ZW0nLCBmaWxlSXRlbSwgcHJvZ3Jlc3MpO1xuICAgICAgICB9O1xuICAgICAgICB1cGxvYWRlci5vblByb2dyZXNzQWxsID0gZnVuY3Rpb24ocHJvZ3Jlc3MpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnb25Qcm9ncmVzc0FsbCcsIHByb2dyZXNzKTtcbiAgICAgICAgfTtcbiAgICAgICAgdXBsb2FkZXIub25TdWNjZXNzSXRlbSA9IGZ1bmN0aW9uKGZpbGVJdGVtLCByZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKSB7XG4gICAgICAgICAgICBjb25zb2xlLmluZm8oJ29uU3VjY2Vzc0l0ZW0nLCBmaWxlSXRlbSwgcmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycyk7XG4gICAgICAgIH07XG4gICAgICAgIHVwbG9hZGVyLm9uRXJyb3JJdGVtID0gZnVuY3Rpb24oZmlsZUl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnb25FcnJvckl0ZW0nLCBmaWxlSXRlbSwgcmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycyk7XG4gICAgICAgIH07XG4gICAgICAgIHVwbG9hZGVyLm9uQ2FuY2VsSXRlbSA9IGZ1bmN0aW9uKGZpbGVJdGVtLCByZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKSB7XG4gICAgICAgICAgICBjb25zb2xlLmluZm8oJ29uQ2FuY2VsSXRlbScsIGZpbGVJdGVtLCByZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKTtcbiAgICAgICAgfTtcbiAgICAgICAgdXBsb2FkZXIub25Db21wbGV0ZUl0ZW0gPSBmdW5jdGlvbihmaWxlSXRlbSwgcmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycykge1xuICAgICAgICAgICAgY29uc29sZS5pbmZvKCdvbkNvbXBsZXRlSXRlbScsIGZpbGVJdGVtLCByZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKTtcbiAgICAgICAgfTtcbiAgICAgICAgdXBsb2FkZXIub25Db21wbGV0ZUFsbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIEZpbGVzLmdldEJveEZpbGVzKClcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlcyl7XG4gICAgICAgICAgICAgICRzY29wZS5maWxlcyBcdD1cdHJlcztcblxuICAgICAgICAgICAgfSwgZnVuY3Rpb24oZXJyb3Ipe1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICRzY29wZS5kYXRhTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnb25Db21wbGV0ZUFsbCcpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zb2xlLmluZm8oJ3VwbG9hZGVyJywgdXBsb2FkZXIpO1xuICAgIH1dKTtcbiIsInN5bmMuc2VydmljZSgndXJsU2hvcnRlbmVyJyxbZnVuY3Rpb24oKXtcbiAgdGhpcy5tYWtlU2hvcnQgPSBmdW5jdGlvbihsb25nVXJsKXtcbiAgICByZXR1cm4gbG9uZ1VybDtcbiAgfTtcbiAgLy8gdGhpcy5tYWtlU2hvcnQgPSBmdW5jdGlvbihsb25nVXJsKVxuICAvLyB7XG4gIC8vICAgLy8gIHZhciBsb25nVXJsPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibG9uZ3VybFwiKS52YWx1ZTtcbiAgLy8gICAgIHZhciByZXF1ZXN0ID0gZ2FwaS5jbGllbnQudXJsc2hvcnRlbmVyLnVybC5pbnNlcnQoe1xuICAvLyAgICAgJ3Jlc291cmNlJzoge1xuICAvLyAgICAgICAnbG9uZ1VybCc6IGxvbmdVcmxcbiAgLy8gXHR9XG4gIC8vICAgICB9KTtcbiAgLy8gICAgIHJlcXVlc3QuZXhlY3V0ZShmdW5jdGlvbihyZXNwb25zZSlcbiAgLy8gXHR7XG4gIC8vXG4gIC8vIFx0XHRpZihyZXNwb25zZS5pZCAhPSBudWxsKVxuICAvLyBcdFx0e1xuICAvLyBcdFx0XHRzdHIgPVwiPGI+TG9uZyBVUkw6PC9iPlwiK2xvbmdVcmwrXCI8YnI+XCI7XG4gIC8vIFx0XHRcdHN0ciArPVwiPGI+eW91ciBGaWxlIGlzOjwvYj4gPGEgaHJlZj0nXCIrcmVzcG9uc2UuaWQrXCInPlwiK3Jlc3BvbnNlLmlkK1wiPC9hPjxicj5cIjtcbiAgLy8gXHRcdFx0cmV0dXJuIHN0cjtcbiAgLy8gXHRcdH1cbiAgLy8gXHRcdGVsc2VcbiAgLy8gXHRcdHtcbiAgLy8gXHRcdFx0Y29uc29sZS5sb2coXCJlcnJvcjogdW5hYmxlIHRvIGNyZWF0ZSBzaG9ydCB1cmxcIik7XG4gIC8vIFx0XHR9XG4gIC8vXG4gIC8vICAgICB9KTtcbiAgLy8gIH1cbiAgLy9cbiAgLy8gdGhpcy5nZXRTaG9ydEluZm8gPSBmdW5jdGlvbigpXG4gIC8vICB7XG4gIC8vICAgICAgdmFyIHNob3J0VXJsPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2hvcnR1cmxcIikudmFsdWU7XG4gIC8vXG4gIC8vICAgICAgdmFyIHJlcXVlc3QgPSBnYXBpLmNsaWVudC51cmxzaG9ydGVuZXIudXJsLmdldCh7XG4gIC8vICAgICAgICAnc2hvcnRVcmwnOiBzaG9ydFVybCxcbiAgLy8gIFx0ICAgICAncHJvamVjdGlvbic6J0ZVTEwnXG4gIC8vICAgICAgfSk7XG4gIC8vICAgICAgcmVxdWVzdC5leGVjdXRlKGZ1bmN0aW9uKHJlc3BvbnNlKVxuICAvLyAgXHR7XG4gIC8vICBcdFx0aWYocmVzcG9uc2UubG9uZ1VybCE9IG51bGwpXG4gIC8vICBcdFx0e1xuICAvLyAgXHRcdFx0c3RyID1cIjxiPkxvbmcgVVJMOjwvYj5cIityZXNwb25zZS5sb25nVXJsK1wiPGJyPlwiO1xuICAvLyAgXHRcdFx0c3RyICs9XCI8Yj5DcmVhdGUgT246PC9iPlwiK3Jlc3BvbnNlLmNyZWF0ZWQrXCI8YnI+XCI7XG4gIC8vICBcdFx0XHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm91dHB1dFwiKS5pbm5lckhUTUwgPSBzdHI7XG4gIC8vICBcdFx0fVxuICAvLyAgXHRcdGVsc2VcbiAgLy8gIFx0XHR7XG4gIC8vICBcdFx0XHRjb25zb2xlLmxvZyhcImVycm9yOiB1bmFibGUgdG8gZ2V0IFVSTCBpbmZvcm1hdGlvblwiKTtcbiAgLy8gIFx0XHR9XG4gIC8vXG4gIC8vICAgICAgfSk7XG4gIC8vXG4gIC8vICB9XG4gIC8vICBmdW5jdGlvbiBsb2FkKClcbiAgLy8gIHtcbiAgLy8gIFx0Z2FwaS5jbGllbnQuc2V0QXBpS2V5KCdBSXphU3lEU243ejdWMWY2SDN5WHJnQWxnVkd3NTJkU0VtcUFMSWMnKTsgLy9nZXQgeW91ciBvd25uIEJyb3dzZXIgQVBJIEtFWVxuICAvLyAgXHRnYXBpLmNsaWVudC5sb2FkKCd1cmxzaG9ydGVuZXInLCAndjEnLGZ1bmN0aW9uKCl7fSk7XG4gIC8vICB9XG4gIC8vICB3aW5kb3cub25sb2FkID0gbG9hZDtcbn1dKTtcbiIsIi8vQXV0aG9yIE11cmFnaWppbWFuYSBSaWNoYXJkIHN0cmltdXBAZ21haWwuY29tIGJlYXN0YXI0NTdAZ21haWwuY29tXG5cbiAgc3luYy5jb250cm9sbGVyKCdNZXNzYWdlQ29udHJvbGxlcicsIGZ1bmN0aW9uICgkaHR0cCwkc2NvcGUsJHEsJHJvb3RTY29wZSkge1xuICAgICAgICQuYWpheFNldHVwKHtcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAnWC1DU1JGLVRPS0VOJzogJCgnbWV0YVtuYW1lPVwiY3NyZi10b2tlblwiXScpLmF0dHIoJ2NvbnRlbnQnKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIFxuICAgICAgICAgJHNjb3BlLm5hbWU9XCJNdXJhZ2lqaW1hbmFcIjtcbiAgICAgICAgIHZhciBwb3N0cz0kaHR0cC5nZXQoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL3Bvc3QnKSxcbiAgICAgICAgICAgICBpbnN0aXR1dGlvbnM9JGh0dHAuZ2V0KCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS9wb3N0Jyk7XG5cbiAgICAgICAgICAkcS5hbGwoW3Bvc3RzLGluc3RpdHV0aW9uc10pLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAgICAgICB2YXIgdG1wID0gW107XG4gICAgICAgICAgICBhbmd1bGFyLmZvckVhY2gocmVzdWx0LCBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgICB0bXAucHVzaChyZXNwb25zZS5kYXRhKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHRtcDtcbiAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKHRtcFJlc3VsdCkge1xuICAgICAgICAgICAgICAvLyBwb3N0cz10bXBSZXN1bHQ7XG4gICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGFuZ3VsYXIudG9Kc29uKHRtcFJlc3VsdFswXSwgdHJ1ZSkpO1xuICAgICAgICAgICAgJHNjb3BlLnBvc3RzID0gdG1wUmVzdWx0WzBdO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgJCgnLnBvc3QtaW4nKS5hdHdobyh7XG4gICAgICAgICAgICBhdDogXCJAXCIsXG4gICAgICAgICAgICBkYXRhOlsnUGV0ZXInLCAnVG9tJywgJ0FubmUnXSxcblxuICAgICAgICAgfSk7XG5cbiAgfSk7XG4iLCJcbnN5bmMuY29udHJvbGxlcihcIlR1dG9yaWFsTW9kYWxcIiwgZnVuY3Rpb24oJHNjb3BlKSB7XG5cbiAgJHNjb3BlLm9wZW4gPSBmdW5jdGlvbigpIHtcbiAgICAkc2NvcGUuc2hvd01vZGFsID0gdHJ1ZTtcbiAgfTtcbiAgJHNjb3BlLm9rID0gZnVuY3Rpb24oKSB7XG4gICAgJHNjb3BlLnNob3dNb2RhbCA9IGZhbHNlO1xuICB9O1xuXG4gICRzY29wZS5jYW5jZWwgPSBmdW5jdGlvbigpIHtcbiAgICAkc2NvcGUuc2hvd01vZGFsID0gZmFsc2U7XG4gIH07XG5cbn0pO1xuXG5zeW5jLmNvbnRyb2xsZXIoXCJTdHJpbWluTW9kYWxcIiwgZnVuY3Rpb24oJHNjb3BlKSB7XG5cbiAgJHNjb3BlLm9wZW4gPSBmdW5jdGlvbigpIHtcbiAgICAkc2NvcGUuc2hvd01vZGFsID0gdHJ1ZTtcbiAgfTtcbiAgJHNjb3BlLm9rID0gZnVuY3Rpb24oKSB7XG4gICAgJHNjb3BlLnNob3dNb2RhbCA9IGZhbHNlO1xuICB9O1xuXG4gICRzY29wZS5jYW5jZWwgPSBmdW5jdGlvbigpIHtcbiAgICAkc2NvcGUuc2hvd01vZGFsID0gZmFsc2U7XG4gIH07XG5cbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
