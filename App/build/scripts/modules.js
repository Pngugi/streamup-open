function close_popup(e){for(var t=0;t<popups.length;t++)if(e==popups[t])return Array.remove(popups,t),document.getElementById(e).style.display="none",void calculate_popups()}function display_popups(){var e=220,t=0;for(t;total_popups>t;t++)if(void 0!=popups[t]){var n=document.getElementById(popups[t]);n.style.right=e+"px",e+=320,n.style.display="block"}for(var o=t;o<popups.length;o++){var n=document.getElementById(popups[o]);n.style.display="none"}}function register_popup(e,t){for(var n=0;n<popups.length;n++)if(e==popups[n])return Array.remove(popups,n),popups.unshift(e),void calculate_popups();var o='<div class="popup-box chat-popup" id="'+e+'">';o+='<div style="background:#ddd;color:#fff;" class="header">Group<div class="close_btn">&nbsp;</div></div>',o+=' <div class="toggle_chat">',o+='<div class="message_box"></div>',o+='<textarea style="background:white;margin-top:180px;" id="chat" class="form-control" rows="3" required="required"></textarea>',document.getElementsByTagName("body")[0].innerHTML=document.getElementsByTagName("body")[0].innerHTML+o,popups.unshift(e),calculate_popups()}function calculate_popups(){var e=window.innerWidth;540>e?total_popups=0:(e-=200,total_popups=parseInt(e/320)),display_popups()}!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["angular-file-upload"]=t():e["angular-file-upload"]=t()}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";var o=function(e){return e&&e.__esModule?e["default"]:e},r=o(n(1)),i=o(n(2)),s=o(n(3)),a=o(n(4)),u=o(n(5)),c=o(n(6)),l=o(n(7)),f=o(n(8)),p=o(n(9)),d=o(n(10)),m=o(n(11)),v=o(n(12));angular.module(r.name,[]).value("fileUploaderOptions",i).factory("FileUploader",s).factory("FileLikeObject",a).factory("FileItem",u).factory("FileDirective",c).factory("FileSelect",l).factory("FileDrop",f).factory("FileOver",p).directive("nvFileSelect",d).directive("nvFileDrop",m).directive("nvFileOver",v).run(["FileUploader","FileLikeObject","FileItem","FileDirective","FileSelect","FileDrop","FileOver",function(e,t,n,o,r,i,s){e.FileLikeObject=t,e.FileItem=n,e.FileDirective=o,e.FileSelect=r,e.FileDrop=i,e.FileOver=s}])},function(e,t){e.exports={name:"angularFileUpload"}},function(e,t){"use strict";e.exports={url:"/",alias:"file",headers:{authorization:"Bearer 8EuqcMNkF2yP50Dicpv9hLRRp7WOSabPlCu22liY"},queue:[],progress:0,autoUpload:!1,removeAfterUpload:!1,method:"POST",filters:[],formData:[],queueLimit:Number.MAX_VALUE,withCredentials:!1}},function(e,t,n){"use strict";var o=function(e){return e&&e.__esModule?e["default"]:e},r=function(){function e(e,t){for(var n in t){var o=t[n];o.configurable=!0,o.value&&(o.writable=!0)}Object.defineProperties(e,t)}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},s=(o(n(1)),angular.copy),a=angular.extend,u=angular.forEach,c=angular.isObject,l=angular.isNumber,f=angular.isDefined,p=angular.isArray,d=angular.element;e.exports=function(e,t,n,o,m,v){var g=o.File,h=o.FormData,y=function(){function o(t){i(this,o);var n=s(e);a(this,n,t,{isUploading:!1,_nextIndex:0,_failFilterIndex:-1,_directives:{select:[],drop:[],over:[]}}),this.filters.unshift({name:"queueLimit",fn:this._queueLimitFilter}),this.filters.unshift({name:"folder",fn:this._folderFilter})}return r(o,{addToQueue:{value:function(e,t,n){var o=this,r=this.isArrayLikeObject(e)?e:[e],i=this._getFilters(n),s=this.queue.length,a=[];u(r,function(e){var n=new m(e);if(o._isValidFile(n,i,t)){var r=new v(o,e,t);a.push(r),o.queue.push(r),o._onAfterAddingFile(r)}else{var s=i[o._failFilterIndex];o._onWhenAddingFileFailed(n,s,t)}}),this.queue.length!==s&&(this._onAfterAddingAll(a),this.progress=this._getTotalProgress()),this._render(),this.autoUpload&&this.uploadAll()}},removeFromQueue:{value:function(e){var t=this.getIndexOfItem(e),n=this.queue[t];n.isUploading&&n.cancel(),this.queue.splice(t,1),n._destroy(),this.progress=this._getTotalProgress()}},clearQueue:{value:function(){for(;this.queue.length;)this.queue[0].remove();this.progress=0}},uploadItem:{value:function(e){var t=this.getIndexOfItem(e),n=this.queue[t],o=this.isHTML5?"_xhrTransport":"_iframeTransport";n._prepareToUploading(),this.isUploading||(this.isUploading=!0,this[o](n))}},cancelItem:{value:function(e){var t=this.getIndexOfItem(e),n=this.queue[t],o=this.isHTML5?"_xhr":"_form";n&&n.isUploading&&n[o].abort()}},uploadAll:{value:function(){var e=this.getNotUploadedItems().filter(function(e){return!e.isUploading});e.length&&(u(e,function(e){return e._prepareToUploading()}),e[0].upload())}},cancelAll:{value:function(){var e=this.getNotUploadedItems();u(e,function(e){return e.cancel()})}},isFile:{value:function(e){return this.constructor.isFile(e)}},isFileLikeObject:{value:function(e){return this.constructor.isFileLikeObject(e)}},isArrayLikeObject:{value:function(e){return this.constructor.isArrayLikeObject(e)}},getIndexOfItem:{value:function(e){return l(e)?e:this.queue.indexOf(e)}},getNotUploadedItems:{value:function(){return this.queue.filter(function(e){return!e.isUploaded})}},getReadyItems:{value:function(){return this.queue.filter(function(e){return e.isReady&&!e.isUploading}).sort(function(e,t){return e.index-t.index})}},destroy:{value:function(){var e=this;u(this._directives,function(t){u(e._directives[t],function(e){e.destroy()})})}},onAfterAddingAll:{value:function(e){}},onAfterAddingFile:{value:function(e){}},onWhenAddingFileFailed:{value:function(e,t,n){}},onBeforeUploadItem:{value:function(e){}},onProgressItem:{value:function(e,t){}},onProgressAll:{value:function(e){}},onSuccessItem:{value:function(e,t,n,o){}},onErrorItem:{value:function(e,t,n,o){}},onCancelItem:{value:function(e,t,n,o){}},onCompleteItem:{value:function(e,t,n,o){}},onCompleteAll:{value:function(){}},_getTotalProgress:{value:function(e){if(this.removeAfterUpload)return e||0;var t=this.getNotUploadedItems().length,n=t?this.queue.length-t:this.queue.length,o=100/this.queue.length,r=(e||0)*o/100;return Math.round(n*o+r)}},_getFilters:{value:function(e){if(!e)return this.filters;if(p(e))return e;var t=e.match(/[^\s,]+/g);return this.filters.filter(function(e){return-1!==t.indexOf(e.name)})}},_render:{value:function(){t.$$phase||t.$apply()}},_folderFilter:{value:function(e){return!(!e.size&&!e.type)}},_queueLimitFilter:{value:function(){return this.queue.length<this.queueLimit}},_isValidFile:{value:function(e,t,n){var o=this;return this._failFilterIndex=-1,t.length?t.every(function(t){return o._failFilterIndex++,t.fn.call(o,e,n)}):!0}},_isSuccessCode:{value:function(e){return e>=200&&300>e||304===e}},_transformResponse:{value:function(e,t){var o=this._headersGetter(t);return u(n.defaults.transformResponse,function(t){e=t(e,o)}),e}},_parseHeaders:{value:function(e){var t,n,o,r={};return e?(u(e.split("\n"),function(e){o=e.indexOf(":"),t=e.slice(0,o).trim().toLowerCase(),n=e.slice(o+1).trim(),t&&(r[t]=r[t]?r[t]+", "+n:n)}),r):r}},_headersGetter:{value:function(e){return function(t){return t?e[t.toLowerCase()]||null:e}}},_xhrTransport:{value:function(e){var t=this,n=e._xhr=new XMLHttpRequest,o=new h;if(this._onBeforeUploadItem(e),u(e.formData,function(e){u(e,function(e,t){o.append(t,e)})}),"number"!=typeof e._file.size)throw new TypeError("The file specified is no longer valid");o.append(e.alias,e._file,e.file.name),n.upload.onprogress=function(n){var o=Math.round(n.lengthComputable?100*n.loaded/n.total:0);t._onProgressItem(e,o)},n.onload=function(){var o=t._parseHeaders(n.getAllResponseHeaders()),r=t._transformResponse(n.response,o),i=t._isSuccessCode(n.status)?"Success":"Error",s="_on"+i+"Item";t[s](e,r,n.status,o),t._onCompleteItem(e,r,n.status,o)},n.onerror=function(){var o=t._parseHeaders(n.getAllResponseHeaders()),r=t._transformResponse(n.response,o);t._onErrorItem(e,r,n.status,o),t._onCompleteItem(e,r,n.status,o)},n.onabort=function(){var o=t._parseHeaders(n.getAllResponseHeaders()),r=t._transformResponse(n.response,o);t._onCancelItem(e,r,n.status,o),t._onCompleteItem(e,r,n.status,o)},n.open(e.method,e.url,!0),n.withCredentials=e.withCredentials,u(e.headers,function(e,t){n.setRequestHeader(t,e)}),n.send(o),this._render()}},_iframeTransport:{value:function(e){var t=this,n=d('<form style="display: none;" />'),o=d('<iframe name="iframeTransport'+Date.now()+'">'),r=e._input;e._form&&e._form.replaceWith(r),e._form=n,this._onBeforeUploadItem(e),r.prop("name",e.alias),u(e.formData,function(e){u(e,function(e,t){var o=d('<input type="hidden" name="'+t+'" />');o.val(e),n.append(o)})}),n.prop({action:e.url,method:"POST",target:o.prop("name"),enctype:"multipart/form-data",encoding:"multipart/form-data"}),o.bind("load",function(){var n="",r=200;try{n=o[0].contentDocument.body.innerHTML}catch(i){r=500}var s={response:n,status:r,dummy:!0},a={},u=t._transformResponse(s.response,a);t._onSuccessItem(e,u,s.status,a),t._onCompleteItem(e,u,s.status,a)}),n.abort=function(){var i,s={status:0,dummy:!0},a={};o.unbind("load").prop("src","javascript:false;"),n.replaceWith(r),t._onCancelItem(e,i,s.status,a),t._onCompleteItem(e,i,s.status,a)},r.after(n),n.append(r).append(o),n[0].submit(),this._render()}},_onWhenAddingFileFailed:{value:function(e,t,n){this.onWhenAddingFileFailed(e,t,n)}},_onAfterAddingFile:{value:function(e){this.onAfterAddingFile(e)}},_onAfterAddingAll:{value:function(e){this.onAfterAddingAll(e)}},_onBeforeUploadItem:{value:function(e){e._onBeforeUpload(),this.onBeforeUploadItem(e)}},_onProgressItem:{value:function(e,t){var n=this._getTotalProgress(t);this.progress=n,e._onProgress(t),this.onProgressItem(e,t),this.onProgressAll(n),this._render()}},_onSuccessItem:{value:function(e,t,n,o){e._onSuccess(t,n,o),this.onSuccessItem(e,t,n,o)}},_onErrorItem:{value:function(e,t,n,o){e._onError(t,n,o),this.onErrorItem(e,t,n,o)}},_onCancelItem:{value:function(e,t,n,o){e._onCancel(t,n,o),this.onCancelItem(e,t,n,o)}},_onCompleteItem:{value:function(e,t,n,o){e._onComplete(t,n,o),this.onCompleteItem(e,t,n,o);var r=this.getReadyItems()[0];return this.isUploading=!1,f(r)?void r.upload():(this.onCompleteAll(),this.progress=this._getTotalProgress(),void this._render())}}},{isFile:{value:function(e){return g&&e instanceof g}},isFileLikeObject:{value:function(e){return e instanceof m}},isArrayLikeObject:{value:function(e){return c(e)&&"length"in e}},inherit:{value:function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.super_=t}}}),o}();return y.prototype.isHTML5=!(!g||!h),y.isHTML5=y.prototype.isHTML5,y},e.exports.$inject=["fileUploaderOptions","$rootScope","$http","$window","FileLikeObject","FileItem"]},function(e,t,n){"use strict";var o=function(e){return e&&e.__esModule?e["default"]:e},r=function(){function e(e,t){for(var n in t){var o=t[n];o.configurable=!0,o.value&&(o.writable=!0)}Object.defineProperties(e,t)}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},s=(o(n(1)),angular.copy),a=angular.isElement,u=angular.isString;e.exports=function(){var e=function(){function e(t){i(this,e);var n=a(t),o=n?t.value:t,r=u(o)?"FakePath":"Object",s="_createFrom"+r;this[s](o)}return r(e,{_createFromFakePath:{value:function(e){this.lastModifiedDate=null,this.size=null,this.type="like/"+e.slice(e.lastIndexOf(".")+1).toLowerCase(),this.name=e.slice(e.lastIndexOf("/")+e.lastIndexOf("\\")+2)}},_createFromObject:{value:function(e){this.lastModifiedDate=s(e.lastModifiedDate),this.size=e.size,this.type=e.type,this.name=e.name}}}),e}();return e},e.exports.$inject=[]},function(e,t,n){"use strict";var o=function(e){return e&&e.__esModule?e["default"]:e},r=function(){function e(e,t){for(var n in t){var o=t[n];o.configurable=!0,o.value&&(o.writable=!0)}Object.defineProperties(e,t)}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},s=(o(n(1)),angular.copy),a=angular.extend,u=angular.element,c=angular.isElement;e.exports=function(e,t){var n=function(){function n(e,o,r){i(this,n);var l=c(o),f=l?u(o):null,p=l?null:o;a(this,{url:e.url,alias:e.alias,headers:s(e.headers),formData:s(e.formData),removeAfterUpload:e.removeAfterUpload,withCredentials:e.withCredentials,method:e.method},r,{uploader:e,file:new t(o),isReady:!1,isUploading:!1,isUploaded:!1,isSuccess:!1,isCancel:!1,isError:!1,progress:0,index:null,_file:p,_input:f}),f&&this._replaceNode(f)}return r(n,{upload:{value:function(){try{this.uploader.uploadItem(this)}catch(e){this.uploader._onCompleteItem(this,"",0,[]),this.uploader._onErrorItem(this,"",0,[])}}},cancel:{value:function(){this.uploader.cancelItem(this)}},remove:{value:function(){this.uploader.removeFromQueue(this)}},onBeforeUpload:{value:function(){}},onProgress:{value:function(e){}},onSuccess:{value:function(e,t,n){}},onError:{value:function(e,t,n){}},onCancel:{value:function(e,t,n){}},onComplete:{value:function(e,t,n){}},_onBeforeUpload:{value:function(){this.isReady=!0,this.isUploading=!0,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!1,this.isError=!1,this.progress=0,this.onBeforeUpload()}},_onProgress:{value:function(e){this.progress=e,this.onProgress(e)}},_onSuccess:{value:function(e,t,n){this.isReady=!1,this.isUploading=!1,this.isUploaded=!0,this.isSuccess=!0,this.isCancel=!1,this.isError=!1,this.progress=100,this.index=null,this.onSuccess(e,t,n)}},_onError:{value:function(e,t,n){this.isReady=!1,this.isUploading=!1,this.isUploaded=!0,this.isSuccess=!1,this.isCancel=!1,this.isError=!0,this.progress=0,this.index=null,this.onError(e,t,n)}},_onCancel:{value:function(e,t,n){this.isReady=!1,this.isUploading=!1,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!0,this.isError=!1,this.progress=0,this.index=null,this.onCancel(e,t,n)}},_onComplete:{value:function(e,t,n){this.onComplete(e,t,n),this.removeAfterUpload&&this.remove()}},_destroy:{value:function(){this._input&&this._input.remove(),this._form&&this._form.remove(),delete this._form,delete this._input}},_prepareToUploading:{value:function(){this.index=this.index||++this.uploader._nextIndex,this.isReady=!0}},_replaceNode:{value:function(t){var n=e(t.clone())(t.scope());n.prop("value",null),t.css("display","none"),t.after(n)}}}),n}();return n},e.exports.$inject=["$compile","FileLikeObject"]},function(e,t,n){"use strict";var o=function(e){return e&&e.__esModule?e["default"]:e},r=function(){function e(e,t){for(var n in t){var o=t[n];o.configurable=!0,o.value&&(o.writable=!0)}Object.defineProperties(e,t)}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},s=(o(n(1)),angular.extend);e.exports=function(){var e=function(){function e(t){i(this,e),s(this,t),this.uploader._directives[this.prop].push(this),this._saveLinks(),this.bind()}return r(e,{bind:{value:function(){for(var e in this.events){var t=this.events[e];this.element.bind(e,this[t])}}},unbind:{value:function(){for(var e in this.events)this.element.unbind(e,this.events[e])}},destroy:{value:function(){var e=this.uploader._directives[this.prop].indexOf(this);this.uploader._directives[this.prop].splice(e,1),this.unbind()}},_saveLinks:{value:function(){for(var e in this.events){var t=this.events[e];this[t]=this[t].bind(this)}}}}),e}();return e.prototype.events={},e},e.exports.$inject=[]},function(e,t,n){"use strict";var o=function(e){return e&&e.__esModule?e["default"]:e},r=function(){function e(e,t){for(var n in t){var o=t[n];o.configurable=!0,o.value&&(o.writable=!0)}Object.defineProperties(e,t)}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function c(e,t,n){var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:c(r,t,n)}if("value"in o&&o.writable)return o.value;var i=o.get;if(void 0!==i)return i.call(n)},s=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},u=(o(n(1)),angular.extend);e.exports=function(e){var t=function(e){function t(e){a(this,t);var n=u(e,{events:{$destroy:"destroy",change:"onChange"},prop:"select"});i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n),this.uploader.isHTML5||this.element.removeAttr("multiple"),this.element.prop("value",null)}return s(t,e),r(t,{getOptions:{value:function(){}},getFilters:{value:function(){}},isEmptyAfterSelection:{value:function(){return!!this.element.attr("multiple")}},onChange:{value:function(){var e=this.uploader.isHTML5?this.element[0].files:this.element[0],t=this.getOptions(),n=this.getFilters();this.uploader.isHTML5||this.destroy(),this.uploader.addToQueue(e,t,n),this.isEmptyAfterSelection()&&(this.element.prop("value",null),this.element.replaceWith(this.element=this.element.clone(!0)))}}}),t}(e);return t},e.exports.$inject=["FileDirective"]},function(e,t,n){"use strict";var o=function(e){return e&&e.__esModule?e["default"]:e},r=function(){function e(e,t){for(var n in t){var o=t[n];o.configurable=!0,o.value&&(o.writable=!0)}Object.defineProperties(e,t)}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function l(e,t,n){var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:l(r,t,n)}if("value"in o&&o.writable)return o.value;var i=o.get;if(void 0!==i)return i.call(n)},s=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},u=(o(n(1)),angular.extend),c=angular.forEach;e.exports=function(e){var t=function(e){function t(e){a(this,t);var n=u(e,{events:{$destroy:"destroy",drop:"onDrop",dragover:"onDragOver",dragleave:"onDragLeave"},prop:"drop"});i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n)}return s(t,e),r(t,{getOptions:{value:function(){}},getFilters:{value:function(){}},onDrop:{value:function(e){var t=this._getTransfer(e);if(t){var n=this.getOptions(),o=this.getFilters();this._preventAndStop(e),c(this.uploader._directives.over,this._removeOverClass,this),this.uploader.addToQueue(t.files,n,o)}}},onDragOver:{value:function(e){var t=this._getTransfer(e);this._haveFiles(t.types)&&(t.dropEffect="copy",this._preventAndStop(e),c(this.uploader._directives.over,this._addOverClass,this))}},onDragLeave:{value:function(e){e.currentTarget!==this.element[0]&&(this._preventAndStop(e),c(this.uploader._directives.over,this._removeOverClass,this))}},_getTransfer:{value:function(e){return e.dataTransfer?e.dataTransfer:e.originalEvent.dataTransfer}},_preventAndStop:{value:function(e){e.preventDefault(),e.stopPropagation()}},_haveFiles:{value:function(e){return e?e.indexOf?-1!==e.indexOf("Files"):e.contains?e.contains("Files"):!1:!1}},_addOverClass:{value:function(e){e.addOverClass()}},_removeOverClass:{value:function(e){e.removeOverClass()}}}),t}(e);return t},e.exports.$inject=["FileDirective"]},function(e,t,n){"use strict";var o=function(e){return e&&e.__esModule?e["default"]:e},r=function(){function e(e,t){for(var n in t){var o=t[n];o.configurable=!0,o.value&&(o.writable=!0)}Object.defineProperties(e,t)}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function c(e,t,n){var o=Object.getOwnPropertyDescriptor(e,t);if(void 0===o){var r=Object.getPrototypeOf(e);return null===r?void 0:c(r,t,n)}if("value"in o&&o.writable)return o.value;var i=o.get;if(void 0!==i)return i.call(n)},s=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},u=(o(n(1)),angular.extend);e.exports=function(e){var t=function(e){function t(e){a(this,t);var n=u(e,{events:{$destroy:"destroy"},prop:"over",overClass:"nv-file-over"});i(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,n)}return s(t,e),r(t,{addOverClass:{value:function(){this.element.addClass(this.getOverClass())}},removeOverClass:{value:function(){this.element.removeClass(this.getOverClass())}},getOverClass:{value:function(){return this.overClass}}}),t}(e);return t},e.exports.$inject=["FileDirective"]},function(e,t,n){"use strict";var o=function(e){return e&&e.__esModule?e["default"]:e};o(n(1));e.exports=function(e,t,n){return{link:function(o,r,i){var s=o.$eval(i.uploader);if(!(s instanceof t))throw new TypeError('"Uploader" must be an instance of FileUploader');var a=new n({uploader:s,element:r});a.getOptions=e(i.options).bind(a,o),a.getFilters=function(){return i.filters}}}},e.exports.$inject=["$parse","FileUploader","FileSelect"]},function(e,t,n){"use strict";var o=function(e){return e&&e.__esModule?e["default"]:e};o(n(1));e.exports=function(e,t,n){return{link:function(o,r,i){var s=o.$eval(i.uploader);if(!(s instanceof t))throw new TypeError('"Uploader" must be an instance of FileUploader');if(s.isHTML5){var a=new n({uploader:s,element:r});a.getOptions=e(i.options).bind(a,o),a.getFilters=function(){return i.filters}}}}},e.exports.$inject=["$parse","FileUploader","FileDrop"]},function(e,t,n){"use strict";var o=function(e){return e&&e.__esModule?e["default"]:e};o(n(1));e.exports=function(e,t){return{link:function(n,o,r){var i=n.$eval(r.uploader);if(!(i instanceof e))throw new TypeError('"Uploader" must be an instance of FileUploader');var s=new t({uploader:i,element:o});s.getOverClass=function(){return r.overClass||s.overClass}}}},e.exports.$inject=["FileUploader","FileOver"]}])}),angular.module("AuthManager",[]).service("SessionService",[function(){var e=!1;this.setUserAuthenticated=function(t){e=t},this.getUserAuthenticated=function(){return e}}]);var sync=angular.module("sync",["ngRoute","angularFileUpload","ui.bootstrap","ui.router","infinite-scroll","ngMaterial","ngMessages","material.svgAssetsCache","ng-mfb","pdf","ngContextMenu","angular-loading-bar","ngFileSaver","AuthManager","ngDialog"]),Logger=angular.module("Logger",[]);Logger.run(["$rootScope",function(e){e.endPoint="http://syncme.com:8000"}]),window.routes={"/Files":{url:"/Files",templateUrl:"views/files.html",controller:"FilesController",requireLogin:!0},preview:{url:"/!/:preview/:extension/:of/:user",templateUrl:"views/filePreview.html",controller:"previewController"},"/Groups":{url:"/Groups",templateUrl:"views/groups.html",controller:"GroupController",requireLogin:!0}},sync.run(["$rootScope","$log",function(e,t){e.endPoint="http://syncme.com:8000",e.$on("$routeChangeStart",function(e,t,n){for(var o in window.routes)-1!=t.indexOf(o)&&window.routes[o].requireLogin&&!SessionService.getUserAuthenticated()&&(alert("You need to be authenticated to see this page!"),e.preventDefault())})}]),sync.provider({$exceptionHandler:function(){var e=function(e,t){console.log(e)};this.$get=function(){return e}}}),sync.config(["$sceProvider","$httpProvider","$mdThemingProvider","cfpLoadingBarProvider",function(e,t,n,o){delete t.defaults.headers.common["X-Requested-With"],t.defaults.headers.post.Accept="application/json, text/javascript",t.defaults.headers.post.Accept="application/json, text/javascript",t.defaults.headers.common.authorization="Bearer 8EuqcMNkF2yP50Dicpv9hLRRp7WOSabPlCu22liY",e.enabled(!1),o.includeBar=!1}]),sync.config(["$stateProvider","$urlRouterProvider",function(e,t,n){for(var o in window.routes)e.state(o,window.routes[o]);t.otherwise("/Files")}]),function(e,t,n){"use strict";var o=t.module("ng-mfb",[]);o.run(["$templateCache",function(e){e.put("ng-mfb-menu-default.tpl.html",'<ul class="mfb-component--{{position}} mfb-{{effect}}"    data-mfb-toggle="{{togglingMethod}}" data-mfb-state="{{menuState}}">  <li class="mfb-component__wrap">    <a ng-click="clicked()" ng-mouseenter="hovered()" ng-mouseleave="hovered()"       ng-attr-data-mfb-label="{{label}}" class="mfb-component__button--main">     <i class="mfb-component__main-icon--resting {{resting}}"></i>     <i class="mfb-component__main-icon--active {{active}}"></i>    </a>    <ul class="mfb-component__list" ng-transclude>    </ul></li></ul>'),e.put("ng-mfb-menu-md.tpl.html",'<ul class="mfb-component--{{position}} mfb-{{effect}}"    data-mfb-toggle="{{togglingMethod}}" data-mfb-state="{{menuState}}">  <li class="mfb-component__wrap">    <a ng-click="clicked()" ng-mouseenter="hovered()" ng-mouseleave="hovered()"       style="background: transparent; box-shadow: none;"       ng-attr-data-mfb-label="{{label}}" class="mfb-component__button--main">     <md-button class="md-fab md-accent" aria-label={{label}} style="position:relative; margin: 0; padding:0;">       <md-icon style="left: 0; position: relative;" md-svg-icon="{{resting}}"         class="mfb-component__main-icon--resting"></md-icon>       <md-icon style="position:relative;" md-svg-icon="{{active}}"         class="mfb-component__main-icon--active"></md-icon>     </md-button>    </a>    <ul class="mfb-component__list" ng-transclude>    </ul></li></ul>'),e.put("ng-mfb-button-default.tpl.html",'<li>  <a data-mfb-label="{{label}}" class="mfb-component__button--child">    <i class="mfb-component__child-icon {{icon}}">    </i>  </a></li>'),e.put("ng-mfb-button-md.tpl.html",'<li>  <a href="" data-mfb-label="{{label}}" class="mfb-component__button--child"      style="background: transparent; box-shadow: none;">     <md-button style="margin: 0;" class="md-fab md-accent" aria-label={{label}}>       <md-icon md-svg-src="img/icons/android.svg"></md-icon>       <md-icon md-svg-icon="{{icon}}"></md-icon>     </md-button>  </a></li>')}]),o.directive("mfbButtonClose",function(){return{restrict:"A",require:"^mfbMenu",link:function(e,t,n,o){t.bind("click",function(){o.close()})}}}),o.directive("mfbMenu",["$timeout",function(t){return{restrict:"EA",transclude:!0,replace:!0,scope:{position:"@",effect:"@",label:"@",resting:"@restingIcon",active:"@activeIcon",mainAction:"&",menuState:"=?",togglingMethod:"@"},templateUrl:function(e,t){return t.templateUrl||"ng-mfb-menu-default.tpl.html"},controller:["$scope","$attrs",function(n,o){function r(){n.mainAction&&n.mainAction(),l()||s()}function i(){l()}function s(){n.menuState===p?u():a()}function a(){n.menuState=p}function u(){n.menuState=d}function c(){return e.Modernizr&&Modernizr.touch}function l(){return"hover"===n.togglingMethod}function f(){n.$apply(function(){n.togglingMethod="click"})}var p="open",d="closed";this.toggle=s,this.close=u,this.open=a,n.clicked=r,n.hovered=i,n.menuState||(n.menuState=d),c()&&l()&&t(f),o.$observe("menuState",function(){n.currentState=n.menuState})}]}}]),o.directive("mfbButton",[function(){return{require:"^mfbMenu",restrict:"EA",transclude:!0,replace:!0,scope:{icon:"@",label:"@"},templateUrl:function(e,t){return t.templateUrl||"ng-mfb-button-default.tpl.html"}}}])}(window,angular),sync.directive("leftMenu",function(){return{restrict:"AE",scope:{data:"=",user:"=",type:"="},templateUrl:"directives/leftMenu.html"}}),sync.directive("feeds",function(){return{restrict:"AE",scope:{posts:"=",replies:"=",createPost:"="},templateUrl:"directives/middleContent.html"}}),sync.directive("header",function(){return{restrict:"AE",scope:{data:"=",user:"=",type:"="},templateUrl:"./directives/header.html"}}),sync.directive("keybinding",function(){return{restrict:"E",scope:{invoke:"&"},link:function(e,t,n){Mousetrap.bind(n.on,e.invoke)}}}),Logger.controller("loginController",["$scope","$http","$rootScope","$window",function(e,t,n,o){var r={"crededential-not-found":"Credentials not found!",success:"logging in..."};e.login=function(e){function i(){o.location.href="/notVerified"}function s(){o.location.href="/sync"}$(".login-form-main-message").addClass("show success").html(r.success),t.post(n.endPoint+"/sessions",e).success(function(e){console.log(e),"1"===e?s():"0"===e?$(".login-form-main-message").addClass("show error").html(r["crededential-not-found"]):"notVerified"===e&&i()}).error(function(e){console.log("error:"+e)})}}]),Logger.controller("RegisterController",["$scope","$rootScope","$http",function(e,t,n){var o={"password-notMatch":"password do not match",SignUpInProgress:"Wait we are setting up your account."};e.register=function(e){function t(){$(".register-form-main-message").removeClass("show error")}function n(){window.location="/checkEmail"}if($(".register-form-main-message").addClass("show success").html(o.SignUpInProgress),$("#password").val()!=$("#password-confirm").val())return $(".register-form-main-message").addClass("show error").html(o["password-notMatch"]),void setTimeout(t,2e3);var r=$("#username").val(),i=$("#email").val();jQuery.post("/sessions",{username:r,password:e.password,email:i,option:e.option,phone:e.phone},function(e,t,o){1==e&&n()}).error(function(e){})}}]),Logger.directive("uniqueUsername",["isUsernameAvailable",function(e){return{restrict:"A",require:"ngModel",link:function(t,n,o,r){r.$asyncValidators.uniqueUsername=e}}}]),Logger.factory("isUsernameAvailable",["$q","$http","$rootScope",function(e,t,n){var o={"btn-loading":'<i class="fa fa-spinner fa-pulse"></i>',"btn-success":'<i class="fa fa-check"></i>',"btn-error":'<i class="fa fa-remove"></i>',"msg-success":"All Good! Redirecting...","msg-username-available":"good username available!","msg-username-taken":"oops username taken","msg-email-taken":"email taken","msg-your-phone-suck":"your phone is not valid",useAJAX:!0};return function(r){var i=e.defer();return t.get(n.endPoint+"/api/v1/users?username="+r+"&access_token=Bc7DWS7KKRLtxmddUZI1T1lZu2J1YhR8OLXGWNZn").success(function(e){function t(){$(".register-form-main-message").removeClass("show success")}function n(){$(".register-form-main-message").removeClass("show error")}"available"==e?($(".register-form-main-message").addClass("show success").html(o["msg-username-available"]),setTimeout(t,2e3)):"taken"==e&&($(".register-form-main-message").addClass("show error").html(o["msg-username-taken"]),setTimeout(n,2e3)),i.reject()}).error(function(e){i.resolve()}),i.promise}}]),Logger.directive("uniqueEmail",["isEmailAvailable",function(e){return{restrict:"A",require:"ngModel",link:function(t,n,o,r){r.$asyncValidators.uniqueEmail=e}}}]),Logger.factory("isEmailAvailable",["$q","$http","$rootScope",function(e,t,n){var o={"btn-loading":'<i class="fa fa-spinner fa-pulse"></i>',"btn-success":'<i class="fa fa-check"></i>',"btn-error":'<i class="fa fa-remove"></i>',"msg-success":"All Good! Redirecting...","msg-username-available":"good username available!","msg-username-taken":"oops username taken","msg-email-taken":"email taken","msg-email-available":"email available","msg-your-phone-suck":"your phone is not valid",useAJAX:!0};return function(r){var i=e.defer();return t.get(n.endPoint+"/api/v1/users?email="+r+"&access_token=Bc7DWS7KKRLtxmddUZI1T1lZu2J1YhR8OLXGWNZn").success(function(e){function t(){$(".register-form-main-message").removeClass("show success")}function n(){$(".register-form-main-message").removeClass("show error")}"email-available"==e?($(".register-form-main-message").addClass("show success").html(o["msg-email-available"]),setTimeout(t,2e3)):"email-taken"==e&&($(".register-form-main-message").addClass("show error").html(o["msg-email-taken"]),setTimeout(n,2e3)),i.reject();
}).error(function(){i.resolve()}),i.promise}}]),sync.service("Fetcher",["$http","$q","$rootScope",function(e,t,n){this.fetch=function(o){var r=t.defer();return e.get(n.endPoint+"/api/v1/?+query=query+FetchUsers"+o).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise}}]),sync.service("Files",["$http","$q","$rootScope",function(e,t,n){return this.getGroupFiles=function(o){var r=t.defer();return e.get(n.endPoint+"/api/v1/groups/"+o+"/groupfiles").success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this.single=function(o){var r=t.defer();return e.get(n.endPoint+"/preview/"+o).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this.getBoxFiles=function(){var o=1,r=t.defer();return e.get(n.endPoint+"/api/v1/files/"+o+"/boxfiles").success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this.getMimeType=function(o){var r=t.defer();return e.get(n.endPoint+"/api/v1/files/mimeType/"+o).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this.downloadFile=function(o){var r=t.defer();return e.get(n.endPoint+"/api/v1/files/download/"+o+"/of/StrimUp").success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this}]),sync.service("People",["$q","$http","$rootScope",function(e,t,n){return this.get=function(){var o=e.defer();return t.get(n.endPoint+"/api/v1/suggestions").success(function(e){o.resolve(e)}).error(function(e){o.reject(e)}),o.promise},this.allIfollow=function(){var o=e.defer();return t.get(n.endPoint+"/api/v1/me/followings").success(function(e){o.resolve(e)}).error(function(e){o.reject(e)}),o.promise},this.unFollow=function(o){var r=e.defer();return t["delete"](n.endPoint+"/api/v1/me/following/"+o).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this.follow=function(o){var r=e.defer();return t.put(n.endPoint+"/api/v1/me/followings",o).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this}]),sync.service("Share",["$log","$http","$q","$rootScope",function(e,t,n,o){return this.share=function(e){var r=n.defer();return t.post(o.endPoint+"/api/v1/share",e).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this.getUser=function(e){var r=n.defer();return t.get(o.endPoint+"/api/v1/me/users/"+e).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this.fileMime=function(e){var r=n.defer();return t.get(o.endPoint+"/api/v1/mimeType/"+e).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this}]),sync.service("User",["$http","$q","$rootScope",function(e,t,n){return this.info=function(){var o=t.defer();return e.get(n.endPoint+"/api/v1/users/info").success(function(e){o.resolve(e)}).error(function(){o.reject()}),o.promise},this.groups=function(o){var r=t.defer();return e.get(n.endPoint+"/api/v1/me/groups").success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this}]),sync.service("Notification",["$http","$q","$rootScope",function(e,t,n){return this.getNotification=function(o){var r=t.defer();return e.get(n.endPoint+"/api/v1/notifications",{cache:!1}).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this.createNotification=function(o){var r=t.defer();return e.post(n.endPoint+"/api/v1/notifications",o).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this.deleteNotification=function(o){var r=t.defer();return e["delete"](n.endPoint+"/api/v1/notifications/"+o).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this}]),sync.controller("notificationController",["$scope","Notification","$log",function(e,t,n){e.init=function(){e.getNotification()},e.clearNotification=function(n){t.clearNotification(n).then(function(t){e.getNotification()},function(e){console.log(e)})},e.getNotification=function(){t.getNotification().then(function(t){e.notifications=t},function(e){})},e.init()}]),sync.directive("notify",[function(){return{restrict:"AE",scope:{},link:function(e,t,n){function o(e,t,n){if(!Notification)return void console.log("Desktop notifications not available in your browser..");if("granted"!==Notification.permission)Notification.requestPermission();else{var o=new Notification(e,{icon:"https://lh3.googleusercontent.com/-aCFiK4baXX4/VjmGJojsQ_I/AAAAAAAANJg/h-sLVX1M5zA/s48-Ic42/eggsmall.png",body:t});o.onclick=function(){window.open(n)},o.onclose=function(){console.log("Notification closed")}}}setTimeout(function(){var e="This will be title",t="Most popular article.",n="sync.com:8000";o(e,t,n)},2e3),document.addEventListener("DOMContentLoaded",function(){"granted"!==Notification.permission&&Notification.requestPermission()})}}}]),sync.factory("userInteractionNotification",function(){return{success:function(e){toastr.success(e,"Success")},warn:function(e){toastr.warning(e,"Hey")},info:function(e){toastr.info(e,"FYI")},error:function(e){toastr.error(e,"Oh No")}}}),sync.factory("userInteractionNotification",function(){return{success:function(e){toastr.success(e,"Success")},warn:function(e){toastr.warning(e,"Hey")},info:function(e){toastr.info(e,"FYI")},error:function(e){toastr.error(e,"Oh No")}}}),sync.controller("uploadDialogCtrl",["$scope","$uibModal","$mdDialog","$mdMedia",function(e,t,n,o){function r(e,t){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.answer=function(e){t.hide(e)}}e.cancel=function(){n.hide()},e.customFullscreen=o("xs")||o("sm"),e.upload=function(t){n.show({parent:angular.element(document.body),controller:r,templateUrl:"views/upload.tpl.html",parent:angular.element(document.body),targetEvent:t,clickOutsideToClose:!1}).then(function(t){e.status='You said the information was "'+t+'".'},function(){e.status="You cancelled the dialog."})},r.$inject=["$scope","$mdDialog"]}]),sync.controller("shareController",["$scope","$uibModal","$mdDialog","$mdMedia","urlShortener","Share","User",function(e,t,n,o,r,i,s){e.cancel=function(){n.hide()},e.customFullscreen=o("xs")||o("sm"),e.share=function(t,o){function i(e,t){e.getFile=function(){return e.file=r.makeShort(o)},e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.answer=function(e){t.hide(e)}}n.show({parent:angular.element(document.body),controller:i,templateUrl:"views/share.tpl.html",parent:angular.element(document.body),targetEvent:t,clickOutsideToClose:!1}).then(function(t){e.status='You said the information was "'+t+'".'},function(){e.status="You cancelled the dialog."}),i.$inject=["$scope","$mdDialog"]},e.shareFile=function(e){var t,n=e.emails,o=n.split(",");for(t=0;t<o.length;t++)i.share(e).then(function(e){console.log(e)})["catch"]()}}]),sync.service("Post",["$http","$q","$rootScope",function(e,t,n){return this.getPost=function(o){var r=t.defer();return e.get(n.endPoint+"/api/v1/me/posts?user_id"+o,{cache:!1}).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this.participate=function(o){var r=t.defer();return e.put(n.endPoint+"/api/v1/me/posts/",o).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this.createPost=function(o){var r=t.defer();return e.post(n.endPoint+"/api/v1/me/posts",o).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this.deletePost=function(o){var r=t.defer();return e["delete"](n.endPoint+"/api/v1/me/posts/"+o).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this}]),sync.controller("PostingController",["$scope","Post","$timeout","User","$interval","Notification","$log","userInteractionNotification",function(e,t,n,o,r,i,s,a,u){e.init=function(){e.postLoader(),e.getUser()},r(function(){e.postLoader()},8e3),e.getUser=function(){o._id().then(function(t){e.user=t,console.log(t)},function(e){})},e.loadMore=function(){},e.participateIntoPost=function(n,o){var r={post_id:n,user_id:o};t.participate(r).then(function(t){e.postLoader()},function(e){})},e.postLoader=function(){e.dataLoading=!0,t.getPost().then(function(t){e.posts=t,e.friends=[],e.replies=[];for(var n=0;n<t.length;n++)t[n].hasOwnProperty("friends")&&t[n].replies&&t[n].friends?(e.friends.push(t[n].friends),e.replies.push(t[n].replies)):t[n].hasOwnProperty("friends")&&(e.friends=friends.concat(traverse(t[n].friends)),e.replies=replies.concat(traverse(t[n].replies)))},function(e){})},e.imageDesc=function(e){switch(e){case 0:return"60px";case 1:return"60px";case 2:return"60px";case 3:return"60px";case 4:return"60px";default:return"60px"}console.log(e)},e.share=function(e){s.closeOptionButtons(),a.info(e)},e.createPost=function(n){var o={message:n};t.createPost(o).then(function(t){e.message="",e.posts.push(t),u.success("New Post feed created!")},function(e){})},e.init()}]),sync.directive("feedsUploader",[function(){return{restrict:"AE",replace:!1,templateUrl:"App/js/scripts/views/feedAttachment.html",scope:{action:"@"},controller:["$scope",function(e){e.progress=0,e.avatar="",e.sendFile=function(t){var n=$(t).parents("form");return""===$(t).val()?!1:(n.attr("action",e.action),e.$apply(function(){e.progress=0}),void n.ajaxSubmit({type:"POST",beforeSend:function(e){e.setRequestHeader("authorization","Bearer OqFirQS44RQTjRuWniXjdHZJQXdCuEx49rq8JY5A")},uploadProgress:function(t,n,o,r){e.$apply(function(){})},error:function(e,t,o,r){n.removeAttr("action")},success:function(o,r,i,s){var a=$(t).val().split("\\"),u=a[a.length-1];n.removeAttr("action"),e.$apply(function(){e.avatar=u})}}))}}],link:function(e,t,n,o){t.find(".fake-uploader").click(function(){t.find('input[type="file"]').click()})}}}]),sync.controller("FilesController",["$scope","Files","$log","$window","User","$uibModal","$interval","pdfDelegate","$timeout","$stateParams","$rootScope","$exceptionHandler","Fetcher",function(e,t,n,o,r,i,s,a,u,c,l,f,p){e.init=function(){e.all(),e.crazy()},e.crazy=function(){var t="{users{email,id}}";p.fetch(t).then(function(t){e.crazy=t,console.log(t)},function(e){console.log(e)})},e.all=function(){e.dataLoading=!0,t.getBoxFiles().then(function(t){e.files=t},function(e){console.log(e)})["finally"](function(){e.dataLoading=!1})},e.fileType=function(e){switch(e){case"pdf":return"img/pdf.png";case"folder":return"img/universal_folder.png";case"folder+":return"img/Add_folder.png";case"php":return"img/code.png";case"txt":return"img/code.png";case"docx":return"img/word.png";case"jpg":return"fa fa-image";case"png":return"img/video.png";case"jpeg":return"img/universal_folder.png";case"zip":return"img/zip.png";default:return"img/universal_folder.png"}},e.init()}]),sync.directive("draggable",function(){return{restrict:"AE",link:function(e,t,n){var o=t[0];o.draggable=!0,o.addEventListener("dragstart",function(e){return e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("Text",this.id),this.classList.add("drag"),!1},!1),o.addEventListener("dragend",function(e){return this.classList.remove("drag"),!1},!1)}}}),sync.directive("droppable",["userInteractionNotification","Files",function(e,t){return{scope:{drop:"&",bin:"="},link:function(e,t){var n=t[0];n.addEventListener("dragover",function(e){return e.dataTransfer.dropEffect="move",e.preventDefault&&e.preventDefault(),this.classList.add("over"),!1},!1),n.addEventListener("dragenter",function(e){return this.classList.add("over"),!1},!1),n.addEventListener("dragleave",function(e){return this.classList.remove("over"),!1},!1),n.addEventListener("drop",function(t){t.stopPropagation&&t.stopPropagation(),this.classList.remove("over");var n=this.id,o=document.getElementById(t.dataTransfer.getData("Text"));try{return this.appendChild(o),e.$apply(function(e){var t=e.drop();"undefined"!=typeof t&&t(o.id,n)}),!1}catch(t){}},!1)}}}]),sync.controller("DragDropCtrl",["$scope","Files","$interval",function(e,t,n){e.handleDrop=function(){}}]),sync.controller("previewController",["$scope","pdfDelegate","$timeout","$stateParams","$rootScope","$exceptionHandler","Files","FileSaver","Blob",function(e,t,n,o,r,i,s,a,u){if(o.preview&&"pdf"==o.extension){e.previewable=!0;try{e.pdfUrl=r.endPoint+"/preview/"+o.preview+"/of/StrimUp",n(function(){t.$getByHandle("my-pdf-container").zoomIn(.5)},3e3)}catch(c){throw new Error(c)}}else o.preview&&"jpg"==o.extension||"png"==o.extension?(e.file_name=o.preview,e.previewable=!1):(e.file_name=o.preview,e.previewable=!1);e.goNext=function(){e.increment=1,t.$getByHandle("my-pdf-container").next(e.increment+1)},e.goPrev=function(n){t.$getByHandle("my-pdf-container").prev(e.increment-1)}}]),sync.directive("fileDownload",[function(){return{restrict:"A",replace:!0,template:'<button class="btn btn-default" data-ng-click="download()"><span class=""></span>Download</button>',controller:["$rootScope","$scope","$element","$attrs","$timeout",function(e,t,n,o,r){function i(e){u()}function s(t){e.$broadcast("dialogs.wait.complete")}function a(e,t){}function u(){r(function(){t.progress<95&&(t.progress+=(96-t.progress)/2,u())},250)}t.progress=0,t.download=function(){t.progress=0,$.fileDownload("http://syncme.com:8000/api/v1/files/download/phpxFnlheDVE5j5mcVDX.png/of/StrimUp?access_token=Bc7DWS7KKRLtxmddUZI1T1lZu2J1YhR8OLXGWNZn",{prepareCallback:i,successCallback:s,failCallback:a})}}]}}]),sync.controller("PeopleController",["$scope","People",function(e,t){e.init=function(){e.getPeopleToFollow()},e.getPeopleToFollow=function(){t.get().then(function(t){e.people=t},function(e){})},e.$on("followMember",function(n,o){n.preventDefault(),t.follow(o).then(function(t){e.getPeopleToFollow()},function(e){console.log(e)})}),e.follow=function(t){var n={id:t,option:"addPeople"};e.$emit("followMember",n)},e.init()}]),sync.service("Group",["$http","$rootScope","$q",function(e,t,n){return this.create=function(o){var r=n.defer();return e.post(t.endPoint+"/api/v1/me/groups",o).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this["delete"]=function(o){var r=n.defer();return e["delete"](t.endPoint+"/api/v1/me/groups/"+o).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this.myGroups=function(){var o=n.defer();return e.get(t.endPoint+"/api/v1/me/groups").success(function(e){o.resolve(e)}).error(function(e){console.log("differed slow:"+e),o.reject(e)}),o.promise},this.addPeople=function(o){var r=n.defer();return e.put(t.endPoint+"/api/v1/me/groups/"+JSON.stringify(o)).success(function(e){r.resolve(e)}).error(function(e){r.resolve(e)}),r.promise},this.addFileToGroup=function(o){var r=n.defer();return e.put(t.endPoint+"/api/v1/me/groups/"+JSON.stringify(o)).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this.removePeople=function(o){var r=n.defer();return e.put(t.endPoint+"/api/v1/me/groups/"+JSON.stringify(o)).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this.suggestPeople=function(o){var r=n.defer();return e.get(t.endPoint+"/api/v1/me/groups/"+o).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this}]),sync.controller("GroupController",["$scope","Group","User","Files","userInteractionNotification",function(e,t,n,o,r){e.init=function(){e.myGroups(),e.suggestedPeopleToGroup()},e.userId=function(){n._id().then(function(t){e.userId=t},function(e){console.log(e)})},e.myGroups=function(){t.myGroups().then(function(t){e.group=t},function(e){})},e.suggestedPeopleToGroup=function(n){e.showFiles=!1,e.showGroup=!1,e.showBox=!1,angular.isUndefined(n)||t.suggestPeople(n).then(function(t){e.followers=t},function(e){console.log(e)})},e.$on("refreshGroup",function(){e.init()}),e.$on("groupDeleted",function(t,n){t.preventDefault(),e.myGroups()}),e.$on("groupTobindwith",function(t,n){t.preventDefault(),e.emitted=n,1==e.showFiles&&(e.showFiles=!1),e.suggestedPeopleToGroup(n),e.addPeople=!0}),e.getGroupFiles=function(t){o.getGroupFiles(t).then(function(t){e.files=t,e.groups=[];for(var n=0;n<t.length;n++)t[n].hasOwnProperty("groups")&&t[n].groups?e.groups.push(t[n].friends):t[n].hasOwnProperty("groups")&&(e.groups=groups.concat(traverse(t[n].groups)))},function(e){console.log(e)})},e.getBoxFiles=function(t){e.emitted=t,o.getBoxFiles(t).then(function(t){e.files=t,e.groups=[];for(var n=0;n<t.length;n++)t[n].hasOwnProperty("groups")&&t[n].groups?e.groups.push(t[n].friends):t[n].hasOwnProperty("groups")&&(e.groups=groups.concat(traverse(t[n].groups)))},function(e){console.log(e)})},e.$on("showOptions",function(t,n){"box"===n.owner?(e.addPeople=!1,e.showGroup=!1,e.showBox=!0,1==e.addPeople&&(e.addPeople=!1),e.getBoxFiles(n.group_id)):"group"===n.owner&&(e.showBox=!1,e.addPeople=!1,e.showGroup=!0,1==e.addPeople&&(e.addPeople=!1),e.getGroupFiles(n.group_id))}),e.init()}]),sync.directive("myGroups",["Group","Report","userInteractionNotification",function(e,t,n,o){return{priority:10,templateUrl:"App/scripts/js/directives/groups.html",restrict:"E",scope:{id:"=userId",groups:"=",followers:"=",emitted:"=",showPeople:"=",showGroup:"=",files:"=",showBox:"="},link:function(o,r,i){o.deleteGroup=function(r){e["delete"](r).then(function(e){n.info("Group deleted"),o.$emit("groupDeleted","group deleted")},function(e){t.send("delete group error:"+e).then(function(){},function(){})})},o.createGroup=function(t){e.create(t).then(function(e){n.success("Created new Group"),o.$emit("refreshGroup",null)},function(e){console.log(e)})},o.initAddPeople=function(e){o.$emit("groupTobindwith",e)},o.addPeople=function(t){var r={option:"addMember",userId:t.userId,groupId:t.groupId};angular.isUndefined(t)||e.addPeople(r).then(function(e){n.success("Added Member in group."),o.initAddPeople(t.groupId),o.$emit("refreshGroup",""),console.log(e)},function(e,t){console.log(e)})},o.removePeople=function(t){var r={option:"removeMember",userId:t.userId,groupId:t.groupId};angular.isUndefined(t)||e.removePeople(r).then(function(e){n.info("Removed Member in group."),o.initAddPeople(t.groupId),o.$emit("refreshGroup",""),console.log(e)},function(e,t){console.log(e)})},o.removeFromGroup=function(){console.log("we can remove file in group")},o.addFileToGroup=function(t){var o={option:"addFiles",fileId:t.fileId,groupId:t.groupId};e.addFileToGroup(o).then(function(e){console.log(e)},function(e){n.warn("Some error occured during adding file")})},o.filesInBox=function(e){var t={group_id:e,owner:"box"};o.$emit("showOptions",t)},o.filesInGroup=function(e){var t={group_id:e,owner:"group"};o.$emit("showOptions",t)}}}}]),sync.service("Report",[function(e,t,n){return this.send=function(o){var r=t.defer();return e.post(n.endPoint+"/api/v1/issues",o).success(function(e){r.resolve(e)}).error(function(e){r.reject(e)}),r.promise},this}]),sync.service("Settings",["$http","$rootScope","$q",function(e,t,n){return this.current=function(){var o=n.defer();return e.get(t.endPoint+"/api/v1/settings").success(function(e){o.resolve(e)}).error(function(e){o.reject(e)}),o.promise},this}]),sync.controller("SettingsController",["$scope","Settings","$log",function(e,t,n){e.init=function(){e.loadCurrentSettings()},e.loadCurrentSettings=function(){t.current().then(function(t){e.settings=t},function(e){n.info("errror prevent promise to be fullfill")})},e.init()}]),sync.controller("ShareController",["$scope","$rootScope","$routeParams","$route","$log","$uibModal","Share","User",function(e,t,n,o,r,i,s,a){e.share=function(e){console.log(e)}}]),angular,sync.controller("UploadController",["$scope","FileUploader","$rootScope","Files",function(e,t,n,o){var r=e.uploader=new t({url:n.endPoint+"/api/v1/upload"});r.filters.push({name:"customFilter",fn:function(e,t){return this.queue.length<10}}),r.onWhenAddingFileFailed=function(e,t,n){console.info("onWhenAddingFileFailed",e,t,n)},r.onAfterAddingFile=function(e){console.info("onAfterAddingFile",e)},r.onAfterAddingAll=function(e){console.info("onAfterAddingAll",e)},r.onBeforeUploadItem=function(e){console.info("onBeforeUploadItem",e)},r.onProgressItem=function(e,t){console.info("onProgressItem",e,t)},r.onProgressAll=function(e){console.info("onProgressAll",e)},r.onSuccessItem=function(e,t,n,o){console.info("onSuccessItem",e,t,n,o)},r.onErrorItem=function(e,t,n,o){console.info("onErrorItem",e,t,n,o)},r.onCancelItem=function(e,t,n,o){console.info("onCancelItem",e,t,n,o)},r.onCompleteItem=function(e,t,n,o){console.info("onCompleteItem",e,t,n,o)},r.onCompleteAll=function(){o.getBoxFiles().then(function(t){e.files=t},function(e){console.log(e)})["finally"](function(){e.dataLoading=!1}),console.info("onCompleteAll")},console.info("uploader",r)}]),sync.service("urlShortener",[function(){this.makeShort=function(e){return e}}]),Array.remove=function(e,t,n){var o=e.slice((n||t)+1||e.length);return e.length=0>t?e.length+t:t,e.push.apply(e,o)};var total_popups=0,popups=[];$(document).ready(function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$("#chat").keypress(function(e){if(13==e.which){alert("we are listning to enter event");var t=$("#shout_username").val(),n=$("#shout_message").val();post_data={username:t,message:n},$.post("shout.php",post_data,function(e){$(e).hide().appendTo(".message_box").fadeIn();var t=$(".message_box")[0].scrollHeight;$(".message_box").scrollTop(t),$("#shout_message").val("")}).fail(function(e){alert(e.statusText)})}}),$(".close_btn").click(function(e){var t=$(".toggle_chat").css("display");$(".toggle_chat").slideToggle(),"block"==t?$(".header div").attr("class","open_btn"):$(".header div").attr("class","close_btn")})}),window.addEventListener("resize",calculate_popups),window.addEventListener("load",calculate_popups),sync.controller("MessageController",["$http","$scope","$q","$rootScope",function(e,t,n,o){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),t.name="Muragijimana";var r=e.get(o.endPoint+"/api/v1/post"),i=e.get(o.endPoint+"/api/v1/post");n.all([r,i]).then(function(e){var t=[];return angular.forEach(e,function(e){t.push(e.data)}),t}).then(function(e){t.posts=e[0]}),$(".post-in").atwho({at:"@",data:["Peter","Tom","Anne"]})}]),sync.controller("TutorialModal",["$scope",function(e){e.open=function(){e.showModal=!0},e.ok=function(){e.showModal=!1},e.cancel=function(){e.showModal=!1}}]),sync.controller("StriminModal",["$scope",function(e){e.open=function(){e.showModal=!0},e.ok=function(){e.showModal=!1},e.cancel=function(){e.showModal=!1}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZlZWRzL2NvbnRyb2xsZXIvY2hhdFBvcHVwQ29udHJvbGxlci5qcyIsImFuZ3VsYXItdXBsb2FkLmpzIiwiYXBwQ29uZmlnLmpzIiwiYnV0dG9uLmpzIiwiZGlyZWN0aXZlcy5qcyIsImxvZ2luQ29udHJvbGxlci5qcyIsInJlZ2lzdGVyQ29udHJvbGxlci5qcyIsImNvbW1vbi9GZXRjaGVyLmpzIiwiY29tbW9uL0ZpbGVTZXJ2aWNlLmpzIiwiY29tbW9uL1Blb3BsZVNlcnZpY2UuanMiLCJjb21tb24vU2hhcmVTZXJ2aWNlLmpzIiwiY29tbW9uL1VzZXJTZXJ2aWNlLmpzIiwiY29tbW9uL25vdGlmaWNhdGlvbi5qcyIsImNvbW1vbi91c2VySW50ZXJhY3Rpb25NYW5hZ2VyLmpzIiwiY29tbW9uL3VzZXJJbnRlcmFjdGlvbk5vdGlmaWNhdGlvbi5qcyIsImRpYWxvZ3MvZGlhbG9nQ3RybC5qcyIsIm1vZHVsZXMuanMiLCJmZWVkcy9mZWVkcy5qcyIsImZpbGVzL2ZpbGUuanMiLCJmaWxlcy9wcmV2aWV3LmpzIiwiZm9sbG93ZXJzL2ZvbGxvd2Vycy5qcyIsImdyb3Vwcy9ncm91cHMuanMiLCJzZXR0aW5ncy9zZXR0aW5ncy5qcyIsInNoYXJpbmcvc2hhcmluZy5qcyIsInVwbG9hZGVyL3VwbG9hZGVyLmpzIiwidXJsU2hvcnRuZXIvc2hvcnRuZXIuanMiLCJmZWVkcy9jb250cm9sbGVyL21lc3NhZ2VDb250cm9sbGVyLmpzIiwiZmVlZHMvY29udHJvbGxlci9tb2RlbC5qcyJdLCJuYW1lcyI6WyJjbG9zZV9wb3B1cCIsImlkIiwiaWlpIiwicG9wdXBzIiwibGVuZ3RoIiwiQXJyYXkiLCJyZW1vdmUiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwic3R5bGUiLCJkaXNwbGF5IiwiY2FsY3VsYXRlX3BvcHVwcyIsImRpc3BsYXlfcG9wdXBzIiwicmlnaHQiLCJ0b3RhbF9wb3B1cHMiLCJ1bmRlZmluZWQiLCJlbGVtZW50IiwiampqIiwicmVnaXN0ZXJfcG9wdXAiLCJuYW1lIiwidW5zaGlmdCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiaW5uZXJIVE1MIiwid2lkdGgiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwicGFyc2VJbnQiLCJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJkZWZpbmUiLCJhbWQiLCJ0aGlzIiwibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJsb2FkZWQiLCJjYWxsIiwibSIsImMiLCJwIiwiX2ludGVyb3BSZXF1aXJlIiwib2JqIiwiX19lc01vZHVsZSIsIkNPTkZJRyIsIm9wdGlvbnMiLCJzZXJ2aWNlRmlsZVVwbG9hZGVyIiwic2VydmljZUZpbGVMaWtlT2JqZWN0Iiwic2VydmljZUZpbGVJdGVtIiwic2VydmljZUZpbGVEaXJlY3RpdmUiLCJzZXJ2aWNlRmlsZVNlbGVjdCIsInNlcnZpY2VGaWxlRHJvcCIsInNlcnZpY2VGaWxlT3ZlciIsImRpcmVjdGl2ZUZpbGVTZWxlY3QiLCJkaXJlY3RpdmVGaWxlRHJvcCIsImRpcmVjdGl2ZUZpbGVPdmVyIiwiYW5ndWxhciIsInZhbHVlIiwiZGlyZWN0aXZlIiwicnVuIiwiRmlsZVVwbG9hZGVyIiwiRmlsZUxpa2VPYmplY3QiLCJGaWxlSXRlbSIsIkZpbGVEaXJlY3RpdmUiLCJGaWxlU2VsZWN0IiwiRmlsZURyb3AiLCJGaWxlT3ZlciIsInVybCIsImFsaWFzIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJxdWV1ZSIsInByb2dyZXNzIiwiYXV0b1VwbG9hZCIsInJlbW92ZUFmdGVyVXBsb2FkIiwibWV0aG9kIiwiZmlsdGVycyIsImZvcm1EYXRhIiwicXVldWVMaW1pdCIsIk51bWJlciIsIk1BWF9WQUxVRSIsIndpdGhDcmVkZW50aWFscyIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImtleSIsInByb3AiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsIk9iamVjdCIsIkNvbnN0cnVjdG9yIiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwicHJvdG90eXBlIiwiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJUeXBlRXJyb3IiLCJjb3B5IiwiZXh0ZW5kIiwiZm9yRWFjaCIsImlzT2JqZWN0IiwiaXNOdW1iZXIiLCJpc0RlZmluZWQiLCJpc0FycmF5IiwiZmlsZVVwbG9hZGVyT3B0aW9ucyIsIiRyb290U2NvcGUiLCIkaHR0cCIsIiR3aW5kb3ciLCJGaWxlIiwiRm9ybURhdGEiLCJzZXR0aW5ncyIsImlzVXBsb2FkaW5nIiwiX25leHRJbmRleCIsIl9mYWlsRmlsdGVySW5kZXgiLCJfZGlyZWN0aXZlcyIsInNlbGVjdCIsImRyb3AiLCJvdmVyIiwiZm4iLCJfcXVldWVMaW1pdEZpbHRlciIsIl9mb2xkZXJGaWx0ZXIiLCJhZGRUb1F1ZXVlIiwiZmlsZXMiLCJfdGhpcyIsImxpc3QiLCJpc0FycmF5TGlrZU9iamVjdCIsImFycmF5T2ZGaWx0ZXJzIiwiX2dldEZpbHRlcnMiLCJjb3VudCIsImFkZGVkRmlsZUl0ZW1zIiwic29tZSIsInRlbXAiLCJfaXNWYWxpZEZpbGUiLCJmaWxlSXRlbSIsInB1c2giLCJfb25BZnRlckFkZGluZ0ZpbGUiLCJmaWx0ZXIiLCJfb25XaGVuQWRkaW5nRmlsZUZhaWxlZCIsIl9vbkFmdGVyQWRkaW5nQWxsIiwiX2dldFRvdGFsUHJvZ3Jlc3MiLCJfcmVuZGVyIiwidXBsb2FkQWxsIiwicmVtb3ZlRnJvbVF1ZXVlIiwiaW5kZXgiLCJnZXRJbmRleE9mSXRlbSIsIml0ZW0iLCJjYW5jZWwiLCJzcGxpY2UiLCJfZGVzdHJveSIsImNsZWFyUXVldWUiLCJ1cGxvYWRJdGVtIiwidHJhbnNwb3J0IiwiaXNIVE1MNSIsIl9wcmVwYXJlVG9VcGxvYWRpbmciLCJjYW5jZWxJdGVtIiwiYWJvcnQiLCJpdGVtcyIsImdldE5vdFVwbG9hZGVkSXRlbXMiLCJ1cGxvYWQiLCJjYW5jZWxBbGwiLCJpc0ZpbGUiLCJjb25zdHJ1Y3RvciIsImlzRmlsZUxpa2VPYmplY3QiLCJpbmRleE9mIiwiaXNVcGxvYWRlZCIsImdldFJlYWR5SXRlbXMiLCJpc1JlYWR5Iiwic29ydCIsIml0ZW0xIiwiaXRlbTIiLCJkZXN0cm95Iiwib2JqZWN0Iiwib25BZnRlckFkZGluZ0FsbCIsImZpbGVJdGVtcyIsIm9uQWZ0ZXJBZGRpbmdGaWxlIiwib25XaGVuQWRkaW5nRmlsZUZhaWxlZCIsIm9uQmVmb3JlVXBsb2FkSXRlbSIsIm9uUHJvZ3Jlc3NJdGVtIiwib25Qcm9ncmVzc0FsbCIsIm9uU3VjY2Vzc0l0ZW0iLCJyZXNwb25zZSIsInN0YXR1cyIsIm9uRXJyb3JJdGVtIiwib25DYW5jZWxJdGVtIiwib25Db21wbGV0ZUl0ZW0iLCJvbkNvbXBsZXRlQWxsIiwibm90VXBsb2FkZWQiLCJ1cGxvYWRlZCIsInJhdGlvIiwiY3VycmVudCIsIk1hdGgiLCJyb3VuZCIsIm5hbWVzIiwibWF0Y2giLCIkJHBoYXNlIiwiJGFwcGx5Iiwic2l6ZSIsInR5cGUiLCJmaWxlIiwiZXZlcnkiLCJfaXNTdWNjZXNzQ29kZSIsIl90cmFuc2Zvcm1SZXNwb25zZSIsImhlYWRlcnNHZXR0ZXIiLCJfaGVhZGVyc0dldHRlciIsImRlZmF1bHRzIiwidHJhbnNmb3JtUmVzcG9uc2UiLCJ0cmFuc2Zvcm1GbiIsIl9wYXJzZUhlYWRlcnMiLCJ2YWwiLCJpIiwicGFyc2VkIiwic3BsaXQiLCJsaW5lIiwic2xpY2UiLCJ0cmltIiwidG9Mb3dlckNhc2UiLCJwYXJzZWRIZWFkZXJzIiwiX3hoclRyYW5zcG9ydCIsInhociIsIl94aHIiLCJYTUxIdHRwUmVxdWVzdCIsImZvcm0iLCJfb25CZWZvcmVVcGxvYWRJdGVtIiwiYXBwZW5kIiwiX2ZpbGUiLCJvbnByb2dyZXNzIiwiZXZlbnQiLCJsZW5ndGhDb21wdXRhYmxlIiwidG90YWwiLCJfb25Qcm9ncmVzc0l0ZW0iLCJvbmxvYWQiLCJnZXRBbGxSZXNwb25zZUhlYWRlcnMiLCJnaXN0IiwiX29uQ29tcGxldGVJdGVtIiwib25lcnJvciIsIl9vbkVycm9ySXRlbSIsIm9uYWJvcnQiLCJfb25DYW5jZWxJdGVtIiwib3BlbiIsInNldFJlcXVlc3RIZWFkZXIiLCJzZW5kIiwiX2lmcmFtZVRyYW5zcG9ydCIsImlmcmFtZSIsIkRhdGUiLCJub3ciLCJpbnB1dCIsIl9pbnB1dCIsIl9mb3JtIiwicmVwbGFjZVdpdGgiLCJlbGVtZW50XyIsImFjdGlvbiIsImVuY3R5cGUiLCJlbmNvZGluZyIsImJpbmQiLCJodG1sIiwiY29udGVudERvY3VtZW50IiwiYm9keSIsImUiLCJkdW1teSIsIl9vblN1Y2Nlc3NJdGVtIiwidW5iaW5kIiwiYWZ0ZXIiLCJzdWJtaXQiLCJfb25CZWZvcmVVcGxvYWQiLCJfb25Qcm9ncmVzcyIsIl9vblN1Y2Nlc3MiLCJfb25FcnJvciIsIl9vbkNhbmNlbCIsIl9vbkNvbXBsZXRlIiwibmV4dEl0ZW0iLCJpbmhlcml0Iiwic291cmNlIiwiY3JlYXRlIiwic3VwZXJfIiwiJGluamVjdCIsImlzRWxlbWVudCIsImlzU3RyaW5nIiwiZmlsZU9ySW5wdXQiLCJpc0lucHV0IiwiZmFrZVBhdGhPck9iamVjdCIsInBvc3RmaXgiLCJfY3JlYXRlRnJvbUZha2VQYXRoIiwicGF0aCIsImxhc3RNb2RpZmllZERhdGUiLCJsYXN0SW5kZXhPZiIsIl9jcmVhdGVGcm9tT2JqZWN0IiwiJGNvbXBpbGUiLCJ1cGxvYWRlciIsImlzU3VjY2VzcyIsImlzQ2FuY2VsIiwiaXNFcnJvciIsIl9yZXBsYWNlTm9kZSIsIm9uQmVmb3JlVXBsb2FkIiwib25Qcm9ncmVzcyIsIm9uU3VjY2VzcyIsIm9uRXJyb3IiLCJvbkNhbmNlbCIsIm9uQ29tcGxldGUiLCJjbG9uZSIsInNjb3BlIiwiY3NzIiwiX3NhdmVMaW5rcyIsImV2ZW50cyIsIl9nZXQiLCJnZXQiLCJwcm9wZXJ0eSIsInJlY2VpdmVyIiwiZGVzYyIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsInBhcmVudCIsImdldFByb3RvdHlwZU9mIiwiZ2V0dGVyIiwiX2luaGVyaXRzIiwic3ViQ2xhc3MiLCJzdXBlckNsYXNzIiwiZW51bWVyYWJsZSIsIl9fcHJvdG9fXyIsIl9GaWxlRGlyZWN0aXZlIiwiZXh0ZW5kZWRPcHRpb25zIiwiJGRlc3Ryb3kiLCJjaGFuZ2UiLCJyZW1vdmVBdHRyIiwiZ2V0T3B0aW9ucyIsImdldEZpbHRlcnMiLCJpc0VtcHR5QWZ0ZXJTZWxlY3Rpb24iLCJhdHRyIiwib25DaGFuZ2UiLCJkcmFnb3ZlciIsImRyYWdsZWF2ZSIsIm9uRHJvcCIsInRyYW5zZmVyIiwiX2dldFRyYW5zZmVyIiwiX3ByZXZlbnRBbmRTdG9wIiwiX3JlbW92ZU92ZXJDbGFzcyIsIm9uRHJhZ092ZXIiLCJfaGF2ZUZpbGVzIiwidHlwZXMiLCJkcm9wRWZmZWN0IiwiX2FkZE92ZXJDbGFzcyIsIm9uRHJhZ0xlYXZlIiwiY3VycmVudFRhcmdldCIsImRhdGFUcmFuc2ZlciIsIm9yaWdpbmFsRXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BQcm9wYWdhdGlvbiIsImNvbnRhaW5zIiwiYWRkT3ZlckNsYXNzIiwicmVtb3ZlT3ZlckNsYXNzIiwib3ZlckNsYXNzIiwiYWRkQ2xhc3MiLCJnZXRPdmVyQ2xhc3MiLCJyZW1vdmVDbGFzcyIsIiRwYXJzZSIsImxpbmsiLCJhdHRyaWJ1dGVzIiwiJGV2YWwiLCJzZXJ2aWNlIiwidXNlcklzQXV0aGVudGljYXRlZCIsInNldFVzZXJBdXRoZW50aWNhdGVkIiwiZ2V0VXNlckF1dGhlbnRpY2F0ZWQiLCJzeW5jIiwiTG9nZ2VyIiwiZW5kUG9pbnQiLCJyb3V0ZXMiLCIvRmlsZXMiLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJyZXF1aXJlTG9naW4iLCJwcmV2aWV3IiwiL0dyb3VwcyIsIiRsb2ciLCIkb24iLCJuZXh0IiwiU2Vzc2lvblNlcnZpY2UiLCJhbGVydCIsInByb3ZpZGVyIiwiJGV4Y2VwdGlvbkhhbmRsZXIiLCJoYW5kbGVyIiwiZXhjZXB0aW9uIiwiY2F1c2UiLCJjb25zb2xlIiwibG9nIiwiJGdldCIsImNvbmZpZyIsIiRzY2VQcm92aWRlciIsIiRodHRwUHJvdmlkZXIiLCIkbWRUaGVtaW5nUHJvdmlkZXIiLCJjZnBMb2FkaW5nQmFyUHJvdmlkZXIiLCJjb21tb24iLCJwb3N0IiwiZW5hYmxlZCIsImluY2x1ZGVCYXIiLCIkc3RhdGVQcm92aWRlciIsIiR1cmxSb3V0ZXJQcm92aWRlciIsIiRzY29wZSIsInN0YXRlIiwib3RoZXJ3aXNlIiwibWZiIiwiJHRlbXBsYXRlQ2FjaGUiLCJwdXQiLCJyZXN0cmljdCIsInJlcXVpcmUiLCIkZWxlbWVudCIsIiRhdHRycyIsIm1mYk1lbnVDb250cm9sbGVyIiwiY2xvc2UiLCIkdGltZW91dCIsInRyYW5zY2x1ZGUiLCJyZXBsYWNlIiwicG9zaXRpb24iLCJlZmZlY3QiLCJsYWJlbCIsInJlc3RpbmciLCJhY3RpdmUiLCJtYWluQWN0aW9uIiwibWVudVN0YXRlIiwidG9nZ2xpbmdNZXRob2QiLCJlbGVtIiwiYXR0cnMiLCJjbGlja2VkIiwiX2lzSG92ZXJBY3RpdmUiLCJ0b2dnbGUiLCJob3ZlcmVkIiwib3BlblN0YXRlIiwiY2xvc2VkU3RhdGUiLCJfaXNUb3VjaERldmljZSIsIk1vZGVybml6ciIsInRvdWNoIiwidXNlQ2xpY2siLCIkb2JzZXJ2ZSIsImN1cnJlbnRTdGF0ZSIsImljb24iLCJkYXRhIiwidXNlciIsInBvc3RzIiwicmVwbGllcyIsImNyZWF0ZVBvc3QiLCJpbnZva2UiLCJlbCIsIk1vdXNldHJhcCIsIm9uIiwiY3JlZGVkZW50aWFsLW5vdC1mb3VuZCIsInN1Y2Nlc3MiLCJsb2dpbiIsImluZm8iLCJub3RWZXJpZmllZCIsImxvY2F0aW9uIiwiaHJlZiIsIlJlZGlyZWN0aW5nIiwiJCIsImVycm9yIiwicGFzc3dvcmQtbm90TWF0Y2giLCJTaWduVXBJblByb2dyZXNzIiwicmVnaXN0ZXIiLCJtZXNzYWdlUmVtb3ZlIiwic2V0VGltZW91dCIsInVzZXJuYW1lIiwiZW1haWwiLCJqUXVlcnkiLCJwYXNzd29yZCIsIm9wdGlvbiIsInBob25lIiwidGV4dFN0YXR1cyIsImlzVXNlcm5hbWVBdmFpbGFibGUiLCJuZ01vZGVsIiwiJGFzeW5jVmFsaWRhdG9ycyIsInVuaXF1ZVVzZXJuYW1lIiwiJHEiLCJidG4tbG9hZGluZyIsImJ0bi1zdWNjZXNzIiwiYnRuLWVycm9yIiwibXNnLXN1Y2Nlc3MiLCJtc2ctdXNlcm5hbWUtYXZhaWxhYmxlIiwibXNnLXVzZXJuYW1lLXRha2VuIiwibXNnLWVtYWlsLXRha2VuIiwibXNnLXlvdXItcGhvbmUtc3VjayIsInVzZUFKQVgiLCJkZWZlcnJlZCIsImRlZmVyIiwidXNlcm5hbWVUYWtlbiIsInJlamVjdCIsImVyciIsInJlc29sdmUiLCJwcm9taXNlIiwiaXNFbWFpbEF2YWlsYWJsZSIsInVuaXF1ZUVtYWlsIiwibXNnLWVtYWlsLWF2YWlsYWJsZSIsIm1lc3NhZ2VFbWFpbFRha2VuIiwiZmV0Y2giLCJkaWZmZXJlZCIsImdldEdyb3VwRmlsZXMiLCJncm91cElkIiwic2luZ2xlIiwiZ2V0Qm94RmlsZXMiLCJnZXRNaW1lVHlwZSIsImZpbGVfbmFtZSIsImRvd25sb2FkRmlsZSIsImFsbElmb2xsb3ciLCJ1bkZvbGxvdyIsImZvbGxvdyIsInBhcmFtIiwic2hhcmUiLCJzaGFyZWJsZU9iaiIsImdldFVzZXIiLCJmaWxlTWltZSIsInJlcyIsImdyb3VwcyIsImdldE5vdGlmaWNhdGlvbiIsInVzZXJfaWQiLCJjYWNoZSIsImNyZWF0ZU5vdGlmaWNhdGlvbiIsIk5vdGlmaWNhdGlvbiIsImRlbGV0ZU5vdGlmaWNhdGlvbiIsIm5vdGlmaWNhdGlvbiIsImluaXQiLCJjbGVhck5vdGlmaWNhdGlvbiIsInRoZW4iLCJyZXN1bHQiLCJub3RpZmljYXRpb25zIiwiaUF0dHJzIiwibm90aWZ5QnJvd3NlciIsInRpdGxlIiwicGVybWlzc2lvbiIsInJlcXVlc3RQZXJtaXNzaW9uIiwib25jbGljayIsIm9uY2xvc2UiLCJhZGRFdmVudExpc3RlbmVyIiwibWVzc2FnZSIsInRvYXN0ciIsIndhcm4iLCJ3YXJuaW5nIiwiJHVpYk1vZGFsIiwiJG1kRGlhbG9nIiwiJG1kTWVkaWEiLCJEaWFsb2dDb250cm9sbGVyIiwiaGlkZSIsImFuc3dlciIsImN1c3RvbUZ1bGxzY3JlZW4iLCJldiIsInNob3ciLCJ0YXJnZXRFdmVudCIsImNsaWNrT3V0c2lkZVRvQ2xvc2UiLCJ1cmxTaG9ydGVuZXIiLCJTaGFyZSIsIlVzZXIiLCJmaWxlTmFtZSIsImdldEZpbGUiLCJtYWtlU2hvcnQiLCJzaGFyZUZpbGUiLCJ2bSIsImVtYWlscyIsImVtYWlsX2FycmF5IiwiZ2V0UG9zdCIsInBhcnRpY2lwYXRlIiwiZGVsZXRlUG9zdCIsIlBvc3QiLCIkaW50ZXJ2YWwiLCIkaW9uaWNMaXN0RGVsZWdhdGUiLCJ1c2VySW50ZXJhY3Rpb25Ob3RpZmljYXRpb24iLCJwb3N0TG9hZGVyIiwiX2lkIiwibG9hZE1vcmUiLCJwYXJ0aWNpcGF0ZUludG9Qb3N0IiwicG9zdF9pZCIsImRhdGFMb2FkaW5nIiwidHJlZSIsImZyaWVuZHMiLCJoYXNPd25Qcm9wZXJ0eSIsImNvbmNhdCIsInRyYXZlcnNlIiwiaW1hZ2VEZXNjIiwiY2xvc2VPcHRpb25CdXR0b25zIiwicG9zdGluZyIsInBvc3RDcmVhdGVkIiwiYXZhdGFyIiwic2VuZEZpbGUiLCIkZm9ybSIsInBhcmVudHMiLCJhamF4U3VibWl0IiwiYmVmb3JlU2VuZCIsInVwbG9hZFByb2dyZXNzIiwiZXZ0IiwicG9zIiwidG90IiwicGVyY0NvbXBsZXRlIiwic3RhdHVzVGV4dCIsImFyIiwiZmlsZW5hbWUiLCJjdHJsIiwiZmluZCIsImNsaWNrIiwiRmlsZXMiLCJwZGZEZWxlZ2F0ZSIsIiRzdGF0ZVBhcmFtcyIsIkZldGNoZXIiLCJhbGwiLCJjcmF6eSIsInVzZXJzIiwiZmlsZVR5cGUiLCJkcmFnZ2FibGUiLCJlZmZlY3RBbGxvd2VkIiwic2V0RGF0YSIsImNsYXNzTGlzdCIsImFkZCIsImJpbiIsImJpbklkIiwiZ2V0RGF0YSIsImFwcGVuZENoaWxkIiwiaGFuZGxlRHJvcCIsIkZpbGVTYXZlciIsIkJsb2IiLCJleHRlbnNpb24iLCJwcmV2aWV3YWJsZSIsInBkZlVybCIsIiRnZXRCeUhhbmRsZSIsInpvb21JbiIsIkVycm9yIiwiZ29OZXh0IiwiaW5jcmVtZW50IiwiZ29QcmV2IiwicGFnZSIsInByZXYiLCJ0ZW1wbGF0ZSIsInByZXBhcmUiLCJmYWtlUHJvZ3Jlc3MiLCIkYnJvYWRjYXN0IiwiZG93bmxvYWQiLCJmaWxlRG93bmxvYWQiLCJwcmVwYXJlQ2FsbGJhY2siLCJzdWNjZXNzQ2FsbGJhY2siLCJmYWlsQ2FsbGJhY2siLCJQZW9wbGUiLCJnZXRQZW9wbGVUb0ZvbGxvdyIsInBlb3BsZSIsInBhcmFtcyIsIiRlbWl0IiwibXlHcm91cHMiLCJhZGRQZW9wbGUiLCJtZW1iZXIiLCJKU09OIiwic3RyaW5naWZ5IiwiYWRkRmlsZVRvR3JvdXAiLCJmaWxlT2JqIiwicmVtb3ZlUGVvcGxlIiwic3VnZ2VzdFBlb3BsZSIsIkdyb3VwIiwic3VnZ2VzdGVkUGVvcGxlVG9Hcm91cCIsInVzZXJJZCIsImdyb3VwIiwic2hvd0ZpbGVzIiwic2hvd0dyb3VwIiwic2hvd0JveCIsImlzVW5kZWZpbmVkIiwiZm9sbG93ZXJzIiwiYXJncyIsImdyb3VwaWQiLCJlbWl0dGVkIiwib3duZXIiLCJfIiwiZ3JvdXBfaWQiLCJSZXBvcnQiLCJwcmlvcml0eSIsInNob3dQZW9wbGUiLCJpRWxlbWVudCIsImRlbGV0ZUdyb3VwIiwiY3JlYXRlR3JvdXAiLCJpbml0QWRkUGVvcGxlIiwibmV3UGFyYW1zIiwicmVtb3ZlRnJvbUdyb3VwIiwiZmlsZUlkIiwiZmlsZXNJbkJveCIsImZpbGVzSW5Hcm91cCIsImlzc3VlIiwicmVzcCIsIlNldHRpbmdzIiwibG9hZEN1cnJlbnRTZXR0aW5ncyIsIiRyb3V0ZVBhcmFtcyIsIiRyb3V0ZSIsImZpbGVfaWQiLCJsb25nVXJsIiwiYXJyYXkiLCJmcm9tIiwidG8iLCJyZXN0IiwiYXBwbHkiLCJyZWFkeSIsImFqYXhTZXR1cCIsIlgtQ1NSRi1UT0tFTiIsImtleXByZXNzIiwid2hpY2giLCJpdXNlcm5hbWUiLCJpbWVzc2FnZSIsInBvc3RfZGF0YSIsImFwcGVuZFRvIiwiZmFkZUluIiwic2Nyb2xsdG9oIiwic2Nyb2xsSGVpZ2h0Iiwic2Nyb2xsVG9wIiwiZmFpbCIsInRvZ2dsZVN0YXRlIiwic2xpZGVUb2dnbGUiLCJpbnN0aXR1dGlvbnMiLCJ0bXAiLCJ0bXBSZXN1bHQiLCJhdHdobyIsImF0Iiwic2hvd01vZGFsIiwib2siXSwibWFwcGluZ3MiOiJBQVFZLFFBQVNBLGFBQVlDLEdBRWpCLElBQUksR0FBSUMsR0FBTSxFQUFHQSxFQUFNQyxPQUFPQyxPQUFRRixJQUVsQyxHQUFHRCxHQUFNRSxPQUFPRCxHQVFaLE1BTkFHLE9BQU1DLE9BQU9ILE9BQVFELEdBRXJCSyxTQUFTQyxlQUFlUCxHQUFJUSxNQUFNQyxRQUFVLFdBRTVDQyxvQkFRWixRQUFTQyxrQkFFTCxHQUFJQyxHQUFRLElBRVJYLEVBQU0sQ0FDVixLQUFJQSxFQUFXWSxhQUFOWixFQUFvQkEsSUFFekIsR0FBa0JhLFFBQWZaLE9BQU9ELEdBQ1YsQ0FDSSxHQUFJYyxHQUFVVCxTQUFTQyxlQUFlTCxPQUFPRCxHQUM3Q2MsR0FBUVAsTUFBTUksTUFBUUEsRUFBUSxLQUM5QkEsR0FBZ0IsSUFDaEJHLEVBQVFQLE1BQU1DLFFBQVUsUUFJaEMsSUFBSSxHQUFJTyxHQUFNZixFQUFLZSxFQUFNZCxPQUFPQyxPQUFRYSxJQUN4QyxDQUNJLEdBQUlELEdBQVVULFNBQVNDLGVBQWVMLE9BQU9jLEdBQzdDRCxHQUFRUCxNQUFNQyxRQUFVLFFBZ0VoQyxRQUFTUSxnQkFBZWpCLEVBQUlrQixHQUd4QixJQUFJLEdBQUlqQixHQUFNLEVBQUdBLEVBQU1DLE9BQU9DLE9BQVFGLElBR2xDLEdBQUdELEdBQU1FLE9BQU9ELEdBU1osTUFQQUcsT0FBTUMsT0FBT0gsT0FBUUQsR0FFckJDLE9BQU9pQixRQUFRbkIsT0FFZlUsbUJBT1IsSUFBSUssR0FBUSx5Q0FBMENmLEVBQUksSUFDdERlLElBQW1CLHlHQUNuQkEsR0FBbUIsNkJBQ25CQSxHQUFtQixrQ0FDbkJBLEdBQW1CLCtIQVN2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Y2VzQ29udGVudCI6WyIgICAgICAgIC8vdGhpcyBmdW5jdGlvbiBjYW4gcmVtb3ZlIGFuIGFycmF5IGVsZW1lbnQuXG4gICAgICAgICAgICBBcnJheS5yZW1vdmUgPSBmdW5jdGlvbihhcnJheSwgZnJvbSwgdG8pIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVzdCA9IGFycmF5LnNsaWNlKCh0byB8fCBmcm9tKSArIDEgfHwgYXJyYXkubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICBhcnJheS5sZW5ndGggPSBmcm9tIDwgMCA/IGFycmF5Lmxlbmd0aCArIGZyb20gOiBmcm9tO1xuICAgICAgICAgICAgICAgIHJldHVybiBhcnJheS5wdXNoLmFwcGx5KGFycmF5LCByZXN0KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgdG90YWxfcG9wdXBzID0gMDtcbiAgICAgICAgICAgIHZhciBwb3B1cHMgPSBbXTtcbiAgICAgICAgICAgIGZ1bmN0aW9uIGNsb3NlX3BvcHVwKGlkKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGZvcih2YXIgaWlpID0gMDsgaWlpIDwgcG9wdXBzLmxlbmd0aDsgaWlpKyspXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBpZihpZCA9PSBwb3B1cHNbaWlpXSlcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgQXJyYXkucmVtb3ZlKHBvcHVwcywgaWlpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsY3VsYXRlX3BvcHVwcygpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vZGlzcGxheXMgdGhlIHBvcHVwcy4gRGlzcGxheXMgYmFzZWQgb24gdGhlIG1heGltdW0gbnVtYmVyIG9mIHBvcHVwcyB0aGF0IGNhbiBiZSBkaXNwbGF5ZWQgb24gdGhlIGN1cnJlbnQgdmlld3BvcnQgd2lkdGhcbiAgICAgICAgICAgIGZ1bmN0aW9uIGRpc3BsYXlfcG9wdXBzKClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB2YXIgcmlnaHQgPSAyMjA7XG5cbiAgICAgICAgICAgICAgICB2YXIgaWlpID0gMDtcbiAgICAgICAgICAgICAgICBmb3IoaWlpOyBpaWkgPCB0b3RhbF9wb3B1cHM7IGlpaSsrKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWYocG9wdXBzW2lpaV0gIT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHBvcHVwc1tpaWldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUucmlnaHQgPSByaWdodCArIFwicHhcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0ID0gcmlnaHQgKyAzMjA7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmb3IodmFyIGpqaiA9IGlpaTsgampqIDwgcG9wdXBzLmxlbmd0aDsgampqKyspXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHBvcHVwc1tqampdKTtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgdGhpcyBzY3JpcHQgaGFzIGJlZW4gYWRkZWQgYnkgbWUgZm9yIG15IGN1c3RvbWVcblxuICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICQuYWpheFNldHVwKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdYLUNTUkYtVE9LRU4nOiAkKCdtZXRhW25hbWU9XCJjc3JmLXRva2VuXCJdJykuYXR0cignY29udGVudCcpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuXG4gICAgICAgICAgICAgICAgICAgICQoXCIjY2hhdFwiKS5rZXlwcmVzcyhmdW5jdGlvbihldnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGV2dC53aGljaCA9PSAxMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KFwid2UgYXJlIGxpc3RuaW5nIHRvIGVudGVyIGV2ZW50XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXVzZXJuYW1lID0gJCgnI3Nob3V0X3VzZXJuYW1lJykudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbWVzc2FnZSA9ICQoJyNzaG91dF9tZXNzYWdlJykudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvc3RfZGF0YSA9IHsndXNlcm5hbWUnOml1c2VybmFtZSwgJ21lc3NhZ2UnOmltZXNzYWdlfTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3NlbmQgZGF0YSB0byBcInNob3V0LnBocFwiIHVzaW5nIGpRdWVyeSAkLnBvc3QoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkLnBvc3QoJ3Nob3V0LnBocCcsIHBvc3RfZGF0YSwgZnVuY3Rpb24oZGF0YSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2FwcGVuZCBkYXRhIGludG8gbWVzc2FnZWJveCB3aXRoIGpRdWVyeSBmYWRlIGVmZmVjdCFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoZGF0YSkuaGlkZSgpLmFwcGVuZFRvKCcubWVzc2FnZV9ib3gnKS5mYWRlSW4oKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9rZWVwIHNjcm9sbGVkIHRvIGJvdHRvbSBvZiBjaGF0IVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNjcm9sbHRvaCA9ICQoJy5tZXNzYWdlX2JveCcpWzBdLnNjcm9sbEhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy5tZXNzYWdlX2JveCcpLnNjcm9sbFRvcChzY3JvbGx0b2gpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3Jlc2V0IHZhbHVlIG9mIG1lc3NhZ2UgYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjc2hvdXRfbWVzc2FnZScpLnZhbCgnJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuZmFpbChmdW5jdGlvbihlcnIpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2FsZXJ0IEhUVFAgc2VydmVyIGVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KGVyci5zdGF0dXNUZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAvL3RvZ2dsZSBoaWRlL3Nob3cgc2hvdXQgYm94XG4gICAgICAgICAgICAgICAgICAgICQoXCIuY2xvc2VfYnRuXCIpLmNsaWNrKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL2dldCBDU1MgZGlzcGxheSBzdGF0ZSBvZiAudG9nZ2xlX2NoYXQgZWxlbWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRvZ2dsZVN0YXRlID0gJCgnLnRvZ2dsZV9jaGF0JykuY3NzKCdkaXNwbGF5Jyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vdG9nZ2xlIHNob3cvaGlkZSBjaGF0IGJveFxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnRvZ2dsZV9jaGF0Jykuc2xpZGVUb2dnbGUoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy91c2UgdG9nZ2xlU3RhdGUgdmFyIHRvIGNoYW5nZSBjbG9zZS9vcGVuIGljb24gaW1hZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRvZ2dsZVN0YXRlID09ICdibG9jaycpXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJChcIi5oZWFkZXIgZGl2XCIpLmF0dHIoJ2NsYXNzJywgJ29wZW5fYnRuJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiLmhlYWRlciBkaXZcIikuYXR0cignY2xhc3MnLCAnY2xvc2VfYnRuJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAvKmRvbmUgYWRkaW5nIG15IGN1c3RvbSBzY3JpcHRzKi9cbiAgICAgICAgICAgIC8vY3JlYXRlcyBtYXJrdXAgZm9yIGEgbmV3IHBvcHVwLiBBZGRzIHRoZSBpZCB0byBwb3B1cHMgYXJyYXkuXG4gICAgICAgICAgICBmdW5jdGlvbiByZWdpc3Rlcl9wb3B1cChpZCwgbmFtZSlcbiAgICAgICAgICAgIHtcblxuICAgICAgICAgICAgICAgIGZvcih2YXIgaWlpID0gMDsgaWlpIDwgcG9wdXBzLmxlbmd0aDsgaWlpKyspXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAvL2FscmVhZHkgcmVnaXN0ZXJlZC4gQnJpbmcgaXQgdG8gZnJvbnQuXG4gICAgICAgICAgICAgICAgICAgIGlmKGlkID09IHBvcHVwc1tpaWldKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBBcnJheS5yZW1vdmUocG9wdXBzLCBpaWkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3B1cHMudW5zaGlmdChpZCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGN1bGF0ZV9wb3B1cHMoKTtcblxuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudD0nPGRpdiBjbGFzcz1cInBvcHVwLWJveCBjaGF0LXBvcHVwXCIgaWQ9XCInKyBpZCArJ1wiPic7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQgPWVsZW1lbnQgKyAnPGRpdiBzdHlsZT1cImJhY2tncm91bmQ6I2RkZDtjb2xvcjojZmZmO1wiIGNsYXNzPVwiaGVhZGVyXCI+R3JvdXA8ZGl2IGNsYXNzPVwiY2xvc2VfYnRuXCI+Jm5ic3A7PC9kaXY+PC9kaXY+JztcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudCA9ZWxlbWVudCArICcgPGRpdiBjbGFzcz1cInRvZ2dsZV9jaGF0XCI+JztcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudCA9ZWxlbWVudCArICc8ZGl2IGNsYXNzPVwibWVzc2FnZV9ib3hcIj48L2Rpdj4nO1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50ID1lbGVtZW50ICsgJzx0ZXh0YXJlYSBzdHlsZT1cImJhY2tncm91bmQ6d2hpdGU7bWFyZ2luLXRvcDoxODBweDtcIiBpZD1cImNoYXRcIiBjbGFzcz1cImZvcm0tY29udHJvbFwiIHJvd3M9XCIzXCIgcmVxdWlyZWQ9XCJyZXF1aXJlZFwiPjwvdGV4dGFyZWE+JztcbiAgICAgICAgICAgICAgICAgICAgLy8gZWxlbWVudCA9ZWxlbWVudCArXG4gICAgICAgICAgICAgICAgICAgIC8vIGVsZW1lbnQgPSBlbGVtZW50ICsgJzxkaXYgY2xhc3M9XCJwb3B1cC1oZWFkLXJpZ2h0XCI+PGEgaHJlZj1cImphdmFzY3JpcHQ6Y2xvc2VfcG9wdXAoXFwnJysgaWQgKydcXCcpO1wiPiYjMTAwMDU7PC9hPjwvZGl2Pic7XG4gICAgICAgICAgICAgICAgLy8gdmFyIGVsZW1lbnQgPSAnPGRpdiBjbGFzcz1cInBvcHVwLWJveCBjaGF0LXBvcHVwXCIgaWQ9XCInKyBpZCArJ1wiPic7XG4gICAgICAgICAgICAgICAgLy8gZWxlbWVudCA9IGVsZW1lbnQgKyAnPGRpdiBjbGFzcz1cInBvcHVwLWhlYWRcIj4nO1xuICAgICAgICAgICAgICAgIC8vIGVsZW1lbnQgPSBlbGVtZW50ICsgJzxkaXYgY2xhc3M9XCJwb3B1cC1oZWFkLWxlZnRcIj4nKyBuYW1lICsnPC9kaXY+JztcbiAgICAgICAgICAgICAgICAvLyBlbGVtZW50ID0gZWxlbWVudCArICc8ZGl2IGNsYXNzPVwicG9wdXAtaGVhZC1yaWdodFwiPjxhIGhyZWY9XCJqYXZhc2NyaXB0OmNsb3NlX3BvcHVwKFxcJycrIGlkICsnXFwnKTtcIj4mIzEwMDA1OzwvYT48L2Rpdj4nO1xuICAgICAgICAgICAgICAgIC8vIGVsZW1lbnQgPSBlbGVtZW50ICsgJzxkaXYgc3R5bGU9XCJjbGVhcjogYm90aDtcIj48L2Rpdj48L2Rpdj48cCBvbmNsaWNrPVwidCgpXCIgaWQ9XCJtXCI+PC9wPjxkaXYgY2xhc3M9XCJwb3B1cC1tZXNzYWdlc1wiPjx0ZXh0YXJlYSAgY2xhc3M9XCJ0b3BcIj48L3RleHRhcmVhPjwvZGl2PjwvZGl2Pic7XG5cbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJvZHlcIilbMF0uaW5uZXJIVE1MID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJib2R5XCIpWzBdLmlubmVySFRNTCArIGVsZW1lbnQ7XG5cbiAgICAgICAgICAgICAgICBwb3B1cHMudW5zaGlmdChpZCk7XG5cbiAgICAgICAgICAgICAgICBjYWxjdWxhdGVfcG9wdXBzKCk7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9jYWxjdWxhdGUgdGhlIHRvdGFsIG51bWJlciBvZiBwb3B1cHMgc3VpdGFibGUgYW5kIHRoZW4gcG9wdWxhdGUgdGhlIHRvYXRhbF9wb3B1cHMgdmFyaWFibGUuXG4gICAgICAgICAgICBmdW5jdGlvbiBjYWxjdWxhdGVfcG9wdXBzKClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB2YXIgd2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgICAgICAgICAgICBpZih3aWR0aCA8IDU0MClcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHRvdGFsX3BvcHVwcyA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoID0gd2lkdGggLSAyMDA7XG4gICAgICAgICAgICAgICAgICAgIC8vMzIwIGlzIHdpZHRoIG9mIGEgc2luZ2xlIHBvcHVwIGJveFxuICAgICAgICAgICAgICAgICAgICB0b3RhbF9wb3B1cHMgPSBwYXJzZUludCh3aWR0aC8zMjApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGRpc3BsYXlfcG9wdXBzKCk7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9yZWNhbGN1bGF0ZSB3aGVuIHdpbmRvdyBpcyBsb2FkZWQgYW5kIGFsc28gd2hlbiB3aW5kb3cgaXMgcmVzaXplZC5cbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIGNhbGN1bGF0ZV9wb3B1cHMpO1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGNhbGN1bGF0ZV9wb3B1cHMpOyIsIi8qXG4gYW5ndWxhci1maWxlLXVwbG9hZCB2Mi4yLjBcbiBodHRwczovL2dpdGh1Yi5jb20vbmVydmdoL2FuZ3VsYXItZmlsZS11cGxvYWRcbiovXG5cbihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcImFuZ3VsYXItZmlsZS11cGxvYWRcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1wiYW5ndWxhci1maWxlLXVwbG9hZFwiXSA9IGZhY3RvcnkoKTtcbn0pKHRoaXMsIGZ1bmN0aW9uKCkge1xucmV0dXJuIC8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9LFxuLyoqKioqKi8gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bG9hZGVkOiBmYWxzZVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0dmFyIF9pbnRlcm9wUmVxdWlyZSA9IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9ialtcImRlZmF1bHRcIl0gOiBvYmo7IH07XG5cblx0dmFyIENPTkZJRyA9IF9pbnRlcm9wUmVxdWlyZShfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKTtcblxuXHR2YXIgb3B0aW9ucyA9IF9pbnRlcm9wUmVxdWlyZShfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKTtcblxuXHR2YXIgc2VydmljZUZpbGVVcGxvYWRlciA9IF9pbnRlcm9wUmVxdWlyZShfX3dlYnBhY2tfcmVxdWlyZV9fKDMpKTtcblxuXHR2YXIgc2VydmljZUZpbGVMaWtlT2JqZWN0ID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oNCkpO1xuXG5cdHZhciBzZXJ2aWNlRmlsZUl0ZW0gPSBfaW50ZXJvcFJlcXVpcmUoX193ZWJwYWNrX3JlcXVpcmVfXyg1KSk7XG5cblx0dmFyIHNlcnZpY2VGaWxlRGlyZWN0aXZlID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oNikpO1xuXG5cdHZhciBzZXJ2aWNlRmlsZVNlbGVjdCA9IF9pbnRlcm9wUmVxdWlyZShfX3dlYnBhY2tfcmVxdWlyZV9fKDcpKTtcblxuXHR2YXIgc2VydmljZUZpbGVEcm9wID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oOCkpO1xuXG5cdHZhciBzZXJ2aWNlRmlsZU92ZXIgPSBfaW50ZXJvcFJlcXVpcmUoX193ZWJwYWNrX3JlcXVpcmVfXyg5KSk7XG5cblx0dmFyIGRpcmVjdGl2ZUZpbGVTZWxlY3QgPSBfaW50ZXJvcFJlcXVpcmUoX193ZWJwYWNrX3JlcXVpcmVfXygxMCkpO1xuXG5cdHZhciBkaXJlY3RpdmVGaWxlRHJvcCA9IF9pbnRlcm9wUmVxdWlyZShfX3dlYnBhY2tfcmVxdWlyZV9fKDExKSk7XG5cblx0dmFyIGRpcmVjdGl2ZUZpbGVPdmVyID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oMTIpKTtcblxuXHRhbmd1bGFyLm1vZHVsZShDT05GSUcubmFtZSwgW10pLnZhbHVlKFwiZmlsZVVwbG9hZGVyT3B0aW9uc1wiLCBvcHRpb25zKS5mYWN0b3J5KFwiRmlsZVVwbG9hZGVyXCIsIHNlcnZpY2VGaWxlVXBsb2FkZXIpLmZhY3RvcnkoXCJGaWxlTGlrZU9iamVjdFwiLCBzZXJ2aWNlRmlsZUxpa2VPYmplY3QpLmZhY3RvcnkoXCJGaWxlSXRlbVwiLCBzZXJ2aWNlRmlsZUl0ZW0pLmZhY3RvcnkoXCJGaWxlRGlyZWN0aXZlXCIsIHNlcnZpY2VGaWxlRGlyZWN0aXZlKS5mYWN0b3J5KFwiRmlsZVNlbGVjdFwiLCBzZXJ2aWNlRmlsZVNlbGVjdCkuZmFjdG9yeShcIkZpbGVEcm9wXCIsIHNlcnZpY2VGaWxlRHJvcCkuZmFjdG9yeShcIkZpbGVPdmVyXCIsIHNlcnZpY2VGaWxlT3ZlcikuZGlyZWN0aXZlKFwibnZGaWxlU2VsZWN0XCIsIGRpcmVjdGl2ZUZpbGVTZWxlY3QpLmRpcmVjdGl2ZShcIm52RmlsZURyb3BcIiwgZGlyZWN0aXZlRmlsZURyb3ApLmRpcmVjdGl2ZShcIm52RmlsZU92ZXJcIiwgZGlyZWN0aXZlRmlsZU92ZXIpLnJ1bihbXCJGaWxlVXBsb2FkZXJcIiwgXCJGaWxlTGlrZU9iamVjdFwiLCBcIkZpbGVJdGVtXCIsIFwiRmlsZURpcmVjdGl2ZVwiLCBcIkZpbGVTZWxlY3RcIiwgXCJGaWxlRHJvcFwiLCBcIkZpbGVPdmVyXCIsIGZ1bmN0aW9uIChGaWxlVXBsb2FkZXIsIEZpbGVMaWtlT2JqZWN0LCBGaWxlSXRlbSwgRmlsZURpcmVjdGl2ZSwgRmlsZVNlbGVjdCwgRmlsZURyb3AsIEZpbGVPdmVyKSB7XG5cdCAgICAvLyBvbmx5IGZvciBjb21wYXRpYmlsaXR5XG5cdCAgICBGaWxlVXBsb2FkZXIuRmlsZUxpa2VPYmplY3QgPSBGaWxlTGlrZU9iamVjdDtcblx0ICAgIEZpbGVVcGxvYWRlci5GaWxlSXRlbSA9IEZpbGVJdGVtO1xuXHQgICAgRmlsZVVwbG9hZGVyLkZpbGVEaXJlY3RpdmUgPSBGaWxlRGlyZWN0aXZlO1xuXHQgICAgRmlsZVVwbG9hZGVyLkZpbGVTZWxlY3QgPSBGaWxlU2VsZWN0O1xuXHQgICAgRmlsZVVwbG9hZGVyLkZpbGVEcm9wID0gRmlsZURyb3A7XG5cdCAgICBGaWxlVXBsb2FkZXIuRmlsZU92ZXIgPSBGaWxlT3Zlcjtcblx0fV0pO1xuXG4vKioqLyB9LFxuXG4vKiAxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IHtcblx0XHRcIm5hbWVcIjogXCJhbmd1bGFyRmlsZVVwbG9hZFwiXG5cdH07XG5cbi8qKiovIH0sXG4vKiAyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IHtcblx0ICAgIHVybDogXCIvXCIsXG5cdCAgICBhbGlhczogXCJmaWxlXCIsXG5cdCAgICBoZWFkZXJzOiB7J2F1dGhvcml6YXRpb24nOiAnQmVhcmVyIDhFdXFjTU5rRjJ5UDUwRGljcHY5aExSUnA3V09TYWJQbEN1MjJsaVknfSxcblx0ICAgIHF1ZXVlOiBbXSxcblx0ICAgIHByb2dyZXNzOiAwLFxuXHQgICAgYXV0b1VwbG9hZDogZmFsc2UsXG5cdCAgICByZW1vdmVBZnRlclVwbG9hZDogZmFsc2UsXG5cdCAgICBtZXRob2Q6IFwiUE9TVFwiLFxuXHQgICAgZmlsdGVyczogW10sXG5cdCAgICBmb3JtRGF0YTogW10sXG5cdCAgICBxdWV1ZUxpbWl0OiBOdW1iZXIuTUFYX1ZBTFVFLFxuXHQgICAgd2l0aENyZWRlbnRpYWxzOiBmYWxzZVxuXHR9O1xuXG4vKioqLyB9LFxuLyogMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0dmFyIF9pbnRlcm9wUmVxdWlyZSA9IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9ialtcImRlZmF1bHRcIl0gOiBvYmo7IH07XG5cblx0dmFyIF9jcmVhdGVDbGFzcyA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBrZXkgaW4gcHJvcHMpIHsgdmFyIHByb3AgPSBwcm9wc1trZXldOyBwcm9wLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChwcm9wLnZhbHVlKSBwcm9wLndyaXRhYmxlID0gdHJ1ZTsgfSBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKTsgfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KSgpO1xuXG5cdHZhciBfY2xhc3NDYWxsQ2hlY2sgPSBmdW5jdGlvbiAoaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfTtcblxuXHR2YXIgQ09ORklHID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oMSkpO1xuXG5cdHZhciBjb3B5ID0gYW5ndWxhci5jb3B5O1xuXHR2YXIgZXh0ZW5kID0gYW5ndWxhci5leHRlbmQ7XG5cdHZhciBmb3JFYWNoID0gYW5ndWxhci5mb3JFYWNoO1xuXHR2YXIgaXNPYmplY3QgPSBhbmd1bGFyLmlzT2JqZWN0O1xuXHR2YXIgaXNOdW1iZXIgPSBhbmd1bGFyLmlzTnVtYmVyO1xuXHR2YXIgaXNEZWZpbmVkID0gYW5ndWxhci5pc0RlZmluZWQ7XG5cdHZhciBpc0FycmF5ID0gYW5ndWxhci5pc0FycmF5O1xuXHR2YXIgZWxlbWVudCA9IGFuZ3VsYXIuZWxlbWVudDtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChmaWxlVXBsb2FkZXJPcHRpb25zLCAkcm9vdFNjb3BlLCAkaHR0cCwgJHdpbmRvdywgRmlsZUxpa2VPYmplY3QsIEZpbGVJdGVtKSB7XG5cdCAgICB2YXIgRmlsZSA9ICR3aW5kb3cuRmlsZTtcblx0ICAgIHZhciBGb3JtRGF0YSA9ICR3aW5kb3cuRm9ybURhdGE7XG5cblx0ICAgIHZhciBGaWxlVXBsb2FkZXIgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqXG5cdCAgICAgICAgICogUFVCTElDXG5cdCAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKiovXG5cdCAgICAgICAgLyoqXG5cdCAgICAgICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBGaWxlVXBsb2FkZXJcblx0ICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG5cdCAgICAgICAgICogQGNvbnN0cnVjdG9yXG5cdCAgICAgICAgICovXG5cblx0ICAgICAgICBmdW5jdGlvbiBGaWxlVXBsb2FkZXIob3B0aW9ucykge1xuXHQgICAgICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRmlsZVVwbG9hZGVyKTtcblxuXHQgICAgICAgICAgICB2YXIgc2V0dGluZ3MgPSBjb3B5KGZpbGVVcGxvYWRlck9wdGlvbnMpO1xuXG5cdCAgICAgICAgICAgIGV4dGVuZCh0aGlzLCBzZXR0aW5ncywgb3B0aW9ucywge1xuXHQgICAgICAgICAgICAgICAgaXNVcGxvYWRpbmc6IGZhbHNlLFxuXHQgICAgICAgICAgICAgICAgX25leHRJbmRleDogMCxcblx0ICAgICAgICAgICAgICAgIF9mYWlsRmlsdGVySW5kZXg6IC0xLFxuXHQgICAgICAgICAgICAgICAgX2RpcmVjdGl2ZXM6IHsgc2VsZWN0OiBbXSwgZHJvcDogW10sIG92ZXI6IFtdIH1cblx0ICAgICAgICAgICAgfSk7XG5cblx0ICAgICAgICAgICAgLy8gYWRkIGRlZmF1bHQgZmlsdGVyc1xuXHQgICAgICAgICAgICB0aGlzLmZpbHRlcnMudW5zaGlmdCh7IG5hbWU6IFwicXVldWVMaW1pdFwiLCBmbjogdGhpcy5fcXVldWVMaW1pdEZpbHRlciB9KTtcblx0ICAgICAgICAgICAgdGhpcy5maWx0ZXJzLnVuc2hpZnQoeyBuYW1lOiBcImZvbGRlclwiLCBmbjogdGhpcy5fZm9sZGVyRmlsdGVyIH0pO1xuXHQgICAgICAgIH1cblxuXHQgICAgICAgIF9jcmVhdGVDbGFzcyhGaWxlVXBsb2FkZXIsIHtcblx0ICAgICAgICAgICAgYWRkVG9RdWV1ZToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBBZGRzIGl0ZW1zIHRvIHRoZSBxdWV1ZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtGaWxlfEhUTUxJbnB1dEVsZW1lbnR8T2JqZWN0fEZpbGVMaXN0fEFycmF5PE9iamVjdD59IGZpbGVzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0FycmF5PEZ1bmN0aW9uPnxTdHJpbmd9IGZpbHRlcnNcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYWRkVG9RdWV1ZShmaWxlcywgb3B0aW9ucywgZmlsdGVycykge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cblx0ICAgICAgICAgICAgICAgICAgICB2YXIgbGlzdCA9IHRoaXMuaXNBcnJheUxpa2VPYmplY3QoZmlsZXMpID8gZmlsZXMgOiBbZmlsZXNdO1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBhcnJheU9mRmlsdGVycyA9IHRoaXMuX2dldEZpbHRlcnMoZmlsdGVycyk7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gdGhpcy5xdWV1ZS5sZW5ndGg7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGFkZGVkRmlsZUl0ZW1zID0gW107XG5cblx0ICAgICAgICAgICAgICAgICAgICBmb3JFYWNoKGxpc3QsIGZ1bmN0aW9uIChzb21lIC8qe0ZpbGV8SFRNTElucHV0RWxlbWVudHxPYmplY3R9Ki8pIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBuZXcgRmlsZUxpa2VPYmplY3Qoc29tZSk7XG5cblx0ICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLl9pc1ZhbGlkRmlsZSh0ZW1wLCBhcnJheU9mRmlsdGVycywgb3B0aW9ucykpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaWxlSXRlbSA9IG5ldyBGaWxlSXRlbShfdGhpcywgc29tZSwgb3B0aW9ucyk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRlZEZpbGVJdGVtcy5wdXNoKGZpbGVJdGVtKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnF1ZXVlLnB1c2goZmlsZUl0ZW0pO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX29uQWZ0ZXJBZGRpbmdGaWxlKGZpbGVJdGVtKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaWx0ZXIgPSBhcnJheU9mRmlsdGVyc1tfdGhpcy5fZmFpbEZpbHRlckluZGV4XTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9vbldoZW5BZGRpbmdGaWxlRmFpbGVkKHRlbXAsIGZpbHRlciwgb3B0aW9ucyk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgICAgICB9KTtcblxuXHQgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnF1ZXVlLmxlbmd0aCAhPT0gY291bnQpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fb25BZnRlckFkZGluZ0FsbChhZGRlZEZpbGVJdGVtcyk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvZ3Jlc3MgPSB0aGlzLl9nZXRUb3RhbFByb2dyZXNzKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVuZGVyKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYXV0b1VwbG9hZCkgdGhpcy51cGxvYWRBbGwoKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgcmVtb3ZlRnJvbVF1ZXVlOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJlbW92ZSBpdGVtcyBmcm9tIHRoZSBxdWV1ZS4gUmVtb3ZlIGxhc3Q6IGluZGV4ID0gLTFcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZUl0ZW18TnVtYmVyfSB2YWx1ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVGcm9tUXVldWUodmFsdWUpIHtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmdldEluZGV4T2ZJdGVtKHZhbHVlKTtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IHRoaXMucXVldWVbaW5kZXhdO1xuXHQgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLmlzVXBsb2FkaW5nKSBpdGVtLmNhbmNlbCgpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMucXVldWUuc3BsaWNlKGluZGV4LCAxKTtcblx0ICAgICAgICAgICAgICAgICAgICBpdGVtLl9kZXN0cm95KCk7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9ncmVzcyA9IHRoaXMuX2dldFRvdGFsUHJvZ3Jlc3MoKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgY2xlYXJRdWV1ZToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDbGVhcnMgdGhlIHF1ZXVlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNsZWFyUXVldWUoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgd2hpbGUgKHRoaXMucXVldWUubGVuZ3RoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucXVldWVbMF0ucmVtb3ZlKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvZ3Jlc3MgPSAwO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICB1cGxvYWRJdGVtOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFVwbG9hZHMgYSBpdGVtIGZyb20gdGhlIHF1ZXVlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGVJdGVtfE51bWJlcn0gdmFsdWVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdXBsb2FkSXRlbSh2YWx1ZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMuZ2V0SW5kZXhPZkl0ZW0odmFsdWUpO1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBpdGVtID0gdGhpcy5xdWV1ZVtpbmRleF07XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIHRyYW5zcG9ydCA9IHRoaXMuaXNIVE1MNSA/IFwiX3hoclRyYW5zcG9ydFwiIDogXCJfaWZyYW1lVHJhbnNwb3J0XCI7XG5cblx0ICAgICAgICAgICAgICAgICAgICBpdGVtLl9wcmVwYXJlVG9VcGxvYWRpbmcoKTtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc1VwbG9hZGluZykge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICAgICAgICAgICAgfXRoaXMuaXNVcGxvYWRpbmcgPSB0cnVlO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXNbdHJhbnNwb3J0XShpdGVtKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgY2FuY2VsSXRlbToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDYW5jZWxzIHVwbG9hZGluZyBvZiBpdGVtIGZyb20gdGhlIHF1ZXVlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGVJdGVtfE51bWJlcn0gdmFsdWVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2FuY2VsSXRlbSh2YWx1ZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMuZ2V0SW5kZXhPZkl0ZW0odmFsdWUpO1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBpdGVtID0gdGhpcy5xdWV1ZVtpbmRleF07XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIHByb3AgPSB0aGlzLmlzSFRNTDUgPyBcIl94aHJcIiA6IFwiX2Zvcm1cIjtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbSAmJiBpdGVtLmlzVXBsb2FkaW5nKSBpdGVtW3Byb3BdLmFib3J0KCk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIHVwbG9hZEFsbDoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBVcGxvYWRzIGFsbCBub3QgdXBsb2FkZWQgaXRlbXMgb2YgcXVldWVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdXBsb2FkQWxsKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBpdGVtcyA9IHRoaXMuZ2V0Tm90VXBsb2FkZWRJdGVtcygpLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIWl0ZW0uaXNVcGxvYWRpbmc7XG5cdCAgICAgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKCFpdGVtcy5sZW5ndGgpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgICAgICAgICAgIH1mb3JFYWNoKGl0ZW1zLCBmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5fcHJlcGFyZVRvVXBsb2FkaW5nKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgICAgICAgICAgaXRlbXNbMF0udXBsb2FkKCk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIGNhbmNlbEFsbDoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDYW5jZWxzIGFsbCB1cGxvYWRzXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNhbmNlbEFsbCgpIHtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbXMgPSB0aGlzLmdldE5vdFVwbG9hZGVkSXRlbXMoKTtcblx0ICAgICAgICAgICAgICAgICAgICBmb3JFYWNoKGl0ZW1zLCBmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5jYW5jZWwoKTtcblx0ICAgICAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgaXNGaWxlOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJldHVybnMgXCJ0cnVlXCIgaWYgdmFsdWUgYW4gaW5zdGFuY2Ugb2YgRmlsZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMge0Jvb2xlYW59XG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc0ZpbGUodmFsdWUpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci5pc0ZpbGUodmFsdWUpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBpc0ZpbGVMaWtlT2JqZWN0OiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJldHVybnMgXCJ0cnVlXCIgaWYgdmFsdWUgYW4gaW5zdGFuY2Ugb2YgRmlsZUxpa2VPYmplY3Rcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaXNGaWxlTGlrZU9iamVjdCh2YWx1ZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLmlzRmlsZUxpa2VPYmplY3QodmFsdWUpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBpc0FycmF5TGlrZU9iamVjdDoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBSZXR1cm5zIFwidHJ1ZVwiIGlmIHZhbHVlIGlzIGFycmF5IGxpa2Ugb2JqZWN0XG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaXNBcnJheUxpa2VPYmplY3QodmFsdWUpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci5pc0FycmF5TGlrZU9iamVjdCh2YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIGdldEluZGV4T2ZJdGVtOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJldHVybnMgYSBpbmRleCBvZiBpdGVtIGZyb20gdGhlIHF1ZXVlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0l0ZW18TnVtYmVyfSB2YWx1ZVxuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMge051bWJlcn1cblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SW5kZXhPZkl0ZW0odmFsdWUpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXNOdW1iZXIodmFsdWUpID8gdmFsdWUgOiB0aGlzLnF1ZXVlLmluZGV4T2YodmFsdWUpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBnZXROb3RVcGxvYWRlZEl0ZW1zOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJldHVybnMgbm90IHVwbG9hZGVkIGl0ZW1zXG5cdCAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7QXJyYXl9XG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldE5vdFVwbG9hZGVkSXRlbXMoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucXVldWUuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhaXRlbS5pc1VwbG9hZGVkO1xuXHQgICAgICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBnZXRSZWFkeUl0ZW1zOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJldHVybnMgaXRlbXMgcmVhZHkgZm9yIHVwbG9hZFxuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMge0FycmF5fVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRSZWFkeUl0ZW1zKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnF1ZXVlLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5pc1JlYWR5ICYmICFpdGVtLmlzVXBsb2FkaW5nO1xuXHQgICAgICAgICAgICAgICAgICAgIH0pLnNvcnQoZnVuY3Rpb24gKGl0ZW0xLCBpdGVtMikge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbTEuaW5kZXggLSBpdGVtMi5pbmRleDtcblx0ICAgICAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgZGVzdHJveToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBEZXN0cm95cyBpbnN0YW5jZSBvZiBGaWxlVXBsb2FkZXJcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgZm9yRWFjaCh0aGlzLl9kaXJlY3RpdmVzLCBmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGZvckVhY2goX3RoaXMuX2RpcmVjdGl2ZXNba2V5XSwgZnVuY3Rpb24gKG9iamVjdCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmRlc3Ryb3koKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIG9uQWZ0ZXJBZGRpbmdBbGw6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogQ2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7QXJyYXl9IGZpbGVJdGVtc1xuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvbkFmdGVyQWRkaW5nQWxsKGZpbGVJdGVtcykge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgb25BZnRlckFkZGluZ0ZpbGU6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogQ2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZUl0ZW19IGZpbGVJdGVtXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uQWZ0ZXJBZGRpbmdGaWxlKGZpbGVJdGVtKSB7fVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBvbldoZW5BZGRpbmdGaWxlRmFpbGVkOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGV8T2JqZWN0fSBpdGVtXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gZmlsdGVyXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvbldoZW5BZGRpbmdGaWxlRmFpbGVkKGl0ZW0sIGZpbHRlciwgb3B0aW9ucykge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgb25CZWZvcmVVcGxvYWRJdGVtOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGVJdGVtfSBmaWxlSXRlbVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvbkJlZm9yZVVwbG9hZEl0ZW0oZmlsZUl0ZW0pIHt9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIG9uUHJvZ3Jlc3NJdGVtOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGVJdGVtfSBmaWxlSXRlbVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHByb2dyZXNzXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uUHJvZ3Jlc3NJdGVtKGZpbGVJdGVtLCBwcm9ncmVzcykge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgb25Qcm9ncmVzc0FsbDoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHByb2dyZXNzXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uUHJvZ3Jlc3NBbGwocHJvZ3Jlc3MpIHt9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIG9uU3VjY2Vzc0l0ZW06IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogQ2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZUl0ZW19IGl0ZW1cblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7Kn0gcmVzcG9uc2Vcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzdGF0dXNcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBoZWFkZXJzXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uU3VjY2Vzc0l0ZW0oaXRlbSwgcmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycykge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgb25FcnJvckl0ZW06IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogQ2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZUl0ZW19IGl0ZW1cblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7Kn0gcmVzcG9uc2Vcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzdGF0dXNcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBoZWFkZXJzXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uRXJyb3JJdGVtKGl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpIHt9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIG9uQ2FuY2VsSXRlbToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtGaWxlSXRlbX0gaXRlbVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSByZXNwb25zZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHN0YXR1c1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGhlYWRlcnNcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25DYW5jZWxJdGVtKGl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpIHt9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIG9uQ29tcGxldGVJdGVtOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGVJdGVtfSBpdGVtXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyp9IHJlc3BvbnNlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gc3RhdHVzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaGVhZGVyc1xuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNvbXBsZXRlSXRlbShpdGVtLCByZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKSB7fVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBvbkNvbXBsZXRlQWxsOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ29tcGxldGVBbGwoKSB7fVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfZ2V0VG90YWxQcm9ncmVzczoge1xuXHQgICAgICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKipcblx0ICAgICAgICAgICAgICAgICAqIFBSSVZBVEVcblx0ICAgICAgICAgICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqL1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBSZXR1cm5zIHRoZSB0b3RhbCBwcm9ncmVzc1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IFt2YWx1ZV1cblx0ICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtOdW1iZXJ9XG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfZ2V0VG90YWxQcm9ncmVzcyh2YWx1ZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlbW92ZUFmdGVyVXBsb2FkKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZSB8fCAwO1xuXHQgICAgICAgICAgICAgICAgICAgIH12YXIgbm90VXBsb2FkZWQgPSB0aGlzLmdldE5vdFVwbG9hZGVkSXRlbXMoKS5sZW5ndGg7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIHVwbG9hZGVkID0gbm90VXBsb2FkZWQgPyB0aGlzLnF1ZXVlLmxlbmd0aCAtIG5vdFVwbG9hZGVkIDogdGhpcy5xdWV1ZS5sZW5ndGg7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIHJhdGlvID0gMTAwIC8gdGhpcy5xdWV1ZS5sZW5ndGg7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnQgPSAodmFsdWUgfHwgMCkgKiByYXRpbyAvIDEwMDtcblxuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLnJvdW5kKHVwbG9hZGVkICogcmF0aW8gKyBjdXJyZW50KTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX2dldEZpbHRlcnM6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmV0dXJucyBhcnJheSBvZiBmaWx0ZXJzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0FycmF5PEZ1bmN0aW9uPnxTdHJpbmd9IGZpbHRlcnNcblx0ICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtBcnJheTxGdW5jdGlvbj59XG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfZ2V0RmlsdGVycyhmaWx0ZXJzKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKCFmaWx0ZXJzKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbHRlcnM7XG5cdCAgICAgICAgICAgICAgICAgICAgfWlmIChpc0FycmF5KGZpbHRlcnMpKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmaWx0ZXJzO1xuXHQgICAgICAgICAgICAgICAgICAgIH12YXIgbmFtZXMgPSBmaWx0ZXJzLm1hdGNoKC9bXlxccyxdKy9nKTtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5maWx0ZXJzLmZpbHRlcihmdW5jdGlvbiAoZmlsdGVyKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuYW1lcy5pbmRleE9mKGZpbHRlci5uYW1lKSAhPT0gLTE7XG5cdCAgICAgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9yZW5kZXI6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogVXBkYXRlcyBodG1sXG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVuZGVyKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIGlmICghJHJvb3RTY29wZS4kJHBoYXNlKSAkcm9vdFNjb3BlLiRhcHBseSgpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfZm9sZGVyRmlsdGVyOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJldHVybnMgXCJ0cnVlXCIgaWYgaXRlbSBpcyBhIGZpbGUgKG5vdCBmb2xkZXIpXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGV8RmlsZUxpa2VPYmplY3R9IGl0ZW1cblx0ICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2ZvbGRlckZpbHRlcihpdGVtKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEhKGl0ZW0uc2l6ZSB8fCBpdGVtLnR5cGUpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfcXVldWVMaW1pdEZpbHRlcjoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBSZXR1cm5zIFwidHJ1ZVwiIGlmIHRoZSBsaW1pdCBoYXMgbm90IGJlZW4gcmVhY2hlZFxuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMge0Jvb2xlYW59XG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcXVldWVMaW1pdEZpbHRlcigpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5xdWV1ZS5sZW5ndGggPCB0aGlzLnF1ZXVlTGltaXQ7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9pc1ZhbGlkRmlsZToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBSZXR1cm5zIFwidHJ1ZVwiIGlmIGZpbGUgcGFzcyBhbGwgZmlsdGVyc1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtGaWxlfE9iamVjdH0gZmlsZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtBcnJheTxGdW5jdGlvbj59IGZpbHRlcnNcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9pc1ZhbGlkRmlsZShmaWxlLCBmaWx0ZXJzLCBvcHRpb25zKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuX2ZhaWxGaWx0ZXJJbmRleCA9IC0xO1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiAhZmlsdGVycy5sZW5ndGggPyB0cnVlIDogZmlsdGVycy5ldmVyeShmdW5jdGlvbiAoZmlsdGVyKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9mYWlsRmlsdGVySW5kZXgrKztcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpbHRlci5mbi5jYWxsKF90aGlzLCBmaWxlLCBvcHRpb25zKTtcblx0ICAgICAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX2lzU3VjY2Vzc0NvZGU6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogQ2hlY2tzIHdoZXRoZXIgdXBsb2FkIHN1Y2Nlc3NmdWxcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzdGF0dXNcblx0ICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2lzU3VjY2Vzc0NvZGUoc3RhdHVzKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0YXR1cyA+PSAyMDAgJiYgc3RhdHVzIDwgMzAwIHx8IHN0YXR1cyA9PT0gMzA0O1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfdHJhbnNmb3JtUmVzcG9uc2U6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogVHJhbnNmb3JtcyB0aGUgc2VydmVyIHJlc3BvbnNlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyp9IHJlc3BvbnNlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaGVhZGVyc1xuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMgeyp9XG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfdHJhbnNmb3JtUmVzcG9uc2UocmVzcG9uc2UsIGhlYWRlcnMpIHtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgaGVhZGVyc0dldHRlciA9IHRoaXMuX2hlYWRlcnNHZXR0ZXIoaGVhZGVycyk7XG5cdCAgICAgICAgICAgICAgICAgICAgZm9yRWFjaCgkaHR0cC5kZWZhdWx0cy50cmFuc2Zvcm1SZXNwb25zZSwgZnVuY3Rpb24gKHRyYW5zZm9ybUZuKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gdHJhbnNmb3JtRm4ocmVzcG9uc2UsIGhlYWRlcnNHZXR0ZXIpO1xuXHQgICAgICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX3BhcnNlSGVhZGVyczoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBQYXJzZWQgcmVzcG9uc2UgaGVhZGVyc1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIGhlYWRlcnNcblx0ICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtPYmplY3R9XG5cdCAgICAgICAgICAgICAgICAgKiBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIuanMvYmxvYi9tYXN0ZXIvc3JjL25nL2h0dHAuanNcblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9wYXJzZUhlYWRlcnMoaGVhZGVycykge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBwYXJzZWQgPSB7fSxcblx0ICAgICAgICAgICAgICAgICAgICAgICAga2V5LFxuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YWwsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGk7XG5cblx0ICAgICAgICAgICAgICAgICAgICBpZiAoIWhlYWRlcnMpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlZDtcblx0ICAgICAgICAgICAgICAgICAgICB9Zm9yRWFjaChoZWFkZXJzLnNwbGl0KFwiXFxuXCIpLCBmdW5jdGlvbiAobGluZSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBpID0gbGluZS5pbmRleE9mKFwiOlwiKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAga2V5ID0gbGluZS5zbGljZSgwLCBpKS50cmltKCkudG9Mb3dlckNhc2UoKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdmFsID0gbGluZS5zbGljZShpICsgMSkudHJpbSgpO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXkpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlZFtrZXldID0gcGFyc2VkW2tleV0gPyBwYXJzZWRba2V5XSArIFwiLCBcIiArIHZhbCA6IHZhbDtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgIH0pO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlZDtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX2hlYWRlcnNHZXR0ZXI6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmV0dXJucyBmdW5jdGlvbiB0aGF0IHJldHVybnMgaGVhZGVyc1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IHBhcnNlZEhlYWRlcnNcblx0ICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtGdW5jdGlvbn1cblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oZWFkZXJzR2V0dGVyKHBhcnNlZEhlYWRlcnMpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKG5hbWUpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWUpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZWRIZWFkZXJzW25hbWUudG9Mb3dlckNhc2UoKV0gfHwgbnVsbDtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VkSGVhZGVycztcblx0ICAgICAgICAgICAgICAgICAgICB9O1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfeGhyVHJhbnNwb3J0OiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFRoZSBYTUxIdHRwUmVxdWVzdCB0cmFuc3BvcnRcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZUl0ZW19IGl0ZW1cblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF94aHJUcmFuc3BvcnQoaXRlbSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cblx0ICAgICAgICAgICAgICAgICAgICB2YXIgeGhyID0gaXRlbS5feGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGZvcm0gPSBuZXcgRm9ybURhdGEoKTtcblxuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuX29uQmVmb3JlVXBsb2FkSXRlbShpdGVtKTtcblxuXHQgICAgICAgICAgICAgICAgICAgIGZvckVhY2goaXRlbS5mb3JtRGF0YSwgZnVuY3Rpb24gKG9iaikge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBmb3JFYWNoKG9iaiwgZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm0uYXBwZW5kKGtleSwgdmFsdWUpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICAgICAgICB9KTtcblxuXHQgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgaXRlbS5fZmlsZS5zaXplICE9IFwibnVtYmVyXCIpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlRoZSBmaWxlIHNwZWNpZmllZCBpcyBubyBsb25nZXIgdmFsaWRcIik7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXG5cdCAgICAgICAgICAgICAgICAgICAgZm9ybS5hcHBlbmQoaXRlbS5hbGlhcywgaXRlbS5fZmlsZSwgaXRlbS5maWxlLm5hbWUpO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgeGhyLnVwbG9hZC5vbnByb2dyZXNzID0gZnVuY3Rpb24gKGV2ZW50KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcm9ncmVzcyA9IE1hdGgucm91bmQoZXZlbnQubGVuZ3RoQ29tcHV0YWJsZSA/IGV2ZW50LmxvYWRlZCAqIDEwMCAvIGV2ZW50LnRvdGFsIDogMCk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9vblByb2dyZXNzSXRlbShpdGVtLCBwcm9ncmVzcyk7XG5cdCAgICAgICAgICAgICAgICAgICAgfTtcblxuXHQgICAgICAgICAgICAgICAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoZWFkZXJzID0gX3RoaXMuX3BhcnNlSGVhZGVycyh4aHIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSBfdGhpcy5fdHJhbnNmb3JtUmVzcG9uc2UoeGhyLnJlc3BvbnNlLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdpc3QgPSBfdGhpcy5faXNTdWNjZXNzQ29kZSh4aHIuc3RhdHVzKSA/IFwiU3VjY2Vzc1wiIDogXCJFcnJvclwiO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbWV0aG9kID0gXCJfb25cIiArIGdpc3QgKyBcIkl0ZW1cIjtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXNbbWV0aG9kXShpdGVtLCByZXNwb25zZSwgeGhyLnN0YXR1cywgaGVhZGVycyk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9vbkNvbXBsZXRlSXRlbShpdGVtLCByZXNwb25zZSwgeGhyLnN0YXR1cywgaGVhZGVycyk7XG5cdCAgICAgICAgICAgICAgICAgICAgfTtcblxuXHQgICAgICAgICAgICAgICAgICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaGVhZGVycyA9IF90aGlzLl9wYXJzZUhlYWRlcnMoeGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gX3RoaXMuX3RyYW5zZm9ybVJlc3BvbnNlKHhoci5yZXNwb25zZSwgaGVhZGVycyk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9vbkVycm9ySXRlbShpdGVtLCByZXNwb25zZSwgeGhyLnN0YXR1cywgaGVhZGVycyk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9vbkNvbXBsZXRlSXRlbShpdGVtLCByZXNwb25zZSwgeGhyLnN0YXR1cywgaGVhZGVycyk7XG5cdCAgICAgICAgICAgICAgICAgICAgfTtcblxuXHQgICAgICAgICAgICAgICAgICAgIHhoci5vbmFib3J0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaGVhZGVycyA9IF90aGlzLl9wYXJzZUhlYWRlcnMoeGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gX3RoaXMuX3RyYW5zZm9ybVJlc3BvbnNlKHhoci5yZXNwb25zZSwgaGVhZGVycyk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9vbkNhbmNlbEl0ZW0oaXRlbSwgcmVzcG9uc2UsIHhoci5zdGF0dXMsIGhlYWRlcnMpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5fb25Db21wbGV0ZUl0ZW0oaXRlbSwgcmVzcG9uc2UsIHhoci5zdGF0dXMsIGhlYWRlcnMpO1xuXHQgICAgICAgICAgICAgICAgICAgIH07XG5cblx0ICAgICAgICAgICAgICAgICAgICB4aHIub3BlbihpdGVtLm1ldGhvZCwgaXRlbS51cmwsIHRydWUpO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgeGhyLndpdGhDcmVkZW50aWFscyA9IGl0ZW0ud2l0aENyZWRlbnRpYWxzO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgZm9yRWFjaChpdGVtLmhlYWRlcnMsIGZ1bmN0aW9uICh2YWx1ZSwgbmFtZSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihuYW1lLCB2YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgfSk7XG5cblx0ICAgICAgICAgICAgICAgICAgICB4aHIuc2VuZChmb3JtKTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZW5kZXIoKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX2lmcmFtZVRyYW5zcG9ydDoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBUaGUgSUZyYW1lIHRyYW5zcG9ydFxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtGaWxlSXRlbX0gaXRlbVxuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2lmcmFtZVRyYW5zcG9ydChpdGVtKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuXHQgICAgICAgICAgICAgICAgICAgIHZhciBmb3JtID0gZWxlbWVudChcIjxmb3JtIHN0eWxlPVxcXCJkaXNwbGF5OiBub25lO1xcXCIgLz5cIik7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGlmcmFtZSA9IGVsZW1lbnQoXCI8aWZyYW1lIG5hbWU9XFxcImlmcmFtZVRyYW5zcG9ydFwiICsgRGF0ZS5ub3coKSArIFwiXFxcIj5cIik7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGlucHV0ID0gaXRlbS5faW5wdXQ7XG5cblx0ICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5fZm9ybSkgaXRlbS5fZm9ybS5yZXBsYWNlV2l0aChpbnB1dCk7IC8vIHJlbW92ZSBvbGQgZm9ybVxuXHQgICAgICAgICAgICAgICAgICAgIGl0ZW0uX2Zvcm0gPSBmb3JtOyAvLyBzYXZlIGxpbmsgdG8gbmV3IGZvcm1cblxuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuX29uQmVmb3JlVXBsb2FkSXRlbShpdGVtKTtcblxuXHQgICAgICAgICAgICAgICAgICAgIGlucHV0LnByb3AoXCJuYW1lXCIsIGl0ZW0uYWxpYXMpO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgZm9yRWFjaChpdGVtLmZvcm1EYXRhLCBmdW5jdGlvbiAob2JqKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGZvckVhY2gob2JqLCBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnRfID0gZWxlbWVudChcIjxpbnB1dCB0eXBlPVxcXCJoaWRkZW5cXFwiIG5hbWU9XFxcIlwiICsga2V5ICsgXCJcXFwiIC8+XCIpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudF8udmFsKHZhbHVlKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm0uYXBwZW5kKGVsZW1lbnRfKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgICAgICAgICAgfSk7XG5cblx0ICAgICAgICAgICAgICAgICAgICBmb3JtLnByb3Aoe1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb246IGl0ZW0udXJsLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IGlmcmFtZS5wcm9wKFwibmFtZVwiKSxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgZW5jdHlwZTogXCJtdWx0aXBhcnQvZm9ybS1kYXRhXCIsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGVuY29kaW5nOiBcIm11bHRpcGFydC9mb3JtLWRhdGFcIiAvLyBvbGQgSUVcblx0ICAgICAgICAgICAgICAgICAgICB9KTtcblxuXHQgICAgICAgICAgICAgICAgICAgIGlmcmFtZS5iaW5kKFwibG9hZFwiLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciBodG1sID0gXCJcIjtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXR1cyA9IDIwMDtcblxuXHQgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRml4IGZvciBsZWdhY3kgSUUgYnJvd3NlcnMgdGhhdCBsb2FkcyBpbnRlcm5hbCBlcnJvciBwYWdlXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3aGVuIGZhaWxlZCBXUyByZXNwb25zZSByZWNlaXZlZC4gSW4gY29uc2VxdWVuY2UgaWZyYW1lXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb250ZW50IGFjY2VzcyBkZW5pZWQgZXJyb3IgaXMgdGhyb3duIGJlY291c2UgdHJ5aW5nIHRvXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhY2Nlc3MgY3Jvc3MgZG9tYWluIHBhZ2UuIFdoZW4gc3VjaCB0aGluZyBvY2N1cnMgbm90aWZ5aW5nXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3aXRoIGVtcHR5IHJlc3BvbnNlIG9iamVjdC4gU2VlIG1vcmUgaW5mbyBhdDpcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTUxMzYyL2FjY2Vzcy1pcy1kZW5pZWQtZXJyb3Itb24tYWNjZXNzaW5nLWlmcmFtZS1kb2N1bWVudC1vYmplY3Rcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdGUgdGhhdCBpZiBub24gc3RhbmRhcmQgNHh4IG9yIDV4eCBlcnJvciBjb2RlIHJldHVybmVkXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmcm9tIFdTIHRoZW4gcmVzcG9uc2UgY29udGVudCBjYW4gYmUgYWNjZXNzZWQgd2l0aG91dCBlcnJvclxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYnV0ICdYSFInIHN0YXR1cyBiZWNvbWVzIDIwMC4gSW4gb3JkZXIgdG8gYXZvaWQgY29uZnVzaW9uXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyByZXR1cm5pbmcgcmVzcG9uc2UgdmlhIHNhbWUgJ3N1Y2Nlc3MnIGV2ZW50IGhhbmRsZXIuXG5cblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZpeGVkIGFuZ3VsYXIuY29udGVudHMoKSBmb3IgaWZyYW1lc1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCA9IGlmcmFtZVswXS5jb250ZW50RG9jdW1lbnQuYm9keS5pbm5lckhUTUw7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGluIGNhc2Ugd2UgcnVuIGludG8gdGhlIGFjY2Vzcy1pcy1kZW5pZWQgZXJyb3Igb3Igd2UgaGF2ZSBhbm90aGVyIGVycm9yIG9uIHRoZSBzZXJ2ZXIgc2lkZVxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gKGludGVudGlvbmFsIDUwMCw0MC4uLiBlcnJvcnMpLCB3ZSBhdCBsZWFzdCBzYXkgJ3NvbWV0aGluZyB3ZW50IHdyb25nJyAtPiA1MDBcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1cyA9IDUwMDtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciB4aHIgPSB7IHJlc3BvbnNlOiBodG1sLCBzdGF0dXM6IHN0YXR1cywgZHVtbXk6IHRydWUgfTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhlYWRlcnMgPSB7fTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gX3RoaXMuX3RyYW5zZm9ybVJlc3BvbnNlKHhoci5yZXNwb25zZSwgaGVhZGVycyk7XG5cblx0ICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX29uU3VjY2Vzc0l0ZW0oaXRlbSwgcmVzcG9uc2UsIHhoci5zdGF0dXMsIGhlYWRlcnMpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5fb25Db21wbGV0ZUl0ZW0oaXRlbSwgcmVzcG9uc2UsIHhoci5zdGF0dXMsIGhlYWRlcnMpO1xuXHQgICAgICAgICAgICAgICAgICAgIH0pO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgZm9ybS5hYm9ydCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHhociA9IHsgc3RhdHVzOiAwLCBkdW1teTogdHJ1ZSB9O1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaGVhZGVycyA9IHt9O1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2U7XG5cblx0ICAgICAgICAgICAgICAgICAgICAgICAgaWZyYW1lLnVuYmluZChcImxvYWRcIikucHJvcChcInNyY1wiLCBcImphdmFzY3JpcHQ6ZmFsc2U7XCIpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBmb3JtLnJlcGxhY2VXaXRoKGlucHV0KTtcblxuXHQgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5fb25DYW5jZWxJdGVtKGl0ZW0sIHJlc3BvbnNlLCB4aHIuc3RhdHVzLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX29uQ29tcGxldGVJdGVtKGl0ZW0sIHJlc3BvbnNlLCB4aHIuc3RhdHVzLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICB9O1xuXG5cdCAgICAgICAgICAgICAgICAgICAgaW5wdXQuYWZ0ZXIoZm9ybSk7XG5cdCAgICAgICAgICAgICAgICAgICAgZm9ybS5hcHBlbmQoaW5wdXQpLmFwcGVuZChpZnJhbWUpO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgZm9ybVswXS5zdWJtaXQoKTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZW5kZXIoKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX29uV2hlbkFkZGluZ0ZpbGVGYWlsZWQ6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogSW5uZXIgY2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZXxPYmplY3R9IGl0ZW1cblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBmaWx0ZXJcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfb25XaGVuQWRkaW5nRmlsZUZhaWxlZChpdGVtLCBmaWx0ZXIsIG9wdGlvbnMpIHtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLm9uV2hlbkFkZGluZ0ZpbGVGYWlsZWQoaXRlbSwgZmlsdGVyLCBvcHRpb25zKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX29uQWZ0ZXJBZGRpbmdGaWxlOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIElubmVyIGNhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGVJdGVtfSBpdGVtXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkFmdGVyQWRkaW5nRmlsZShpdGVtKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkFmdGVyQWRkaW5nRmlsZShpdGVtKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX29uQWZ0ZXJBZGRpbmdBbGw6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogSW5uZXIgY2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7QXJyYXk8RmlsZUl0ZW0+fSBpdGVtc1xuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfb25BZnRlckFkZGluZ0FsbChpdGVtcykge1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMub25BZnRlckFkZGluZ0FsbChpdGVtcyk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9vbkJlZm9yZVVwbG9hZEl0ZW06IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogIElubmVyIGNhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGVJdGVtfSBpdGVtXG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfb25CZWZvcmVVcGxvYWRJdGVtKGl0ZW0pIHtcblx0ICAgICAgICAgICAgICAgICAgICBpdGVtLl9vbkJlZm9yZVVwbG9hZCgpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMub25CZWZvcmVVcGxvYWRJdGVtKGl0ZW0pO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfb25Qcm9ncmVzc0l0ZW06IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogSW5uZXIgY2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZUl0ZW19IGl0ZW1cblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBwcm9ncmVzc1xuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX29uUHJvZ3Jlc3NJdGVtKGl0ZW0sIHByb2dyZXNzKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIHRvdGFsID0gdGhpcy5fZ2V0VG90YWxQcm9ncmVzcyhwcm9ncmVzcyk7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9ncmVzcyA9IHRvdGFsO1xuXHQgICAgICAgICAgICAgICAgICAgIGl0ZW0uX29uUHJvZ3Jlc3MocHJvZ3Jlc3MpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMub25Qcm9ncmVzc0l0ZW0oaXRlbSwgcHJvZ3Jlc3MpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMub25Qcm9ncmVzc0FsbCh0b3RhbCk7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVuZGVyKCk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9vblN1Y2Nlc3NJdGVtOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIElubmVyIGNhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGVJdGVtfSBpdGVtXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyp9IHJlc3BvbnNlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gc3RhdHVzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaGVhZGVyc1xuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX29uU3VjY2Vzc0l0ZW0oaXRlbSwgcmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycykge1xuXHQgICAgICAgICAgICAgICAgICAgIGl0ZW0uX29uU3VjY2VzcyhyZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLm9uU3VjY2Vzc0l0ZW0oaXRlbSwgcmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycyk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9vbkVycm9ySXRlbToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBJbm5lciBjYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtGaWxlSXRlbX0gaXRlbVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSByZXNwb25zZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHN0YXR1c1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGhlYWRlcnNcblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkVycm9ySXRlbShpdGVtLCByZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaXRlbS5fb25FcnJvcihyZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRXJyb3JJdGVtKGl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfb25DYW5jZWxJdGVtOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIElubmVyIGNhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGVJdGVtfSBpdGVtXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyp9IHJlc3BvbnNlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gc3RhdHVzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaGVhZGVyc1xuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX29uQ2FuY2VsSXRlbShpdGVtLCByZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaXRlbS5fb25DYW5jZWwocmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycyk7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkNhbmNlbEl0ZW0oaXRlbSwgcmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycyk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9vbkNvbXBsZXRlSXRlbToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBJbm5lciBjYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtGaWxlSXRlbX0gaXRlbVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSByZXNwb25zZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHN0YXR1c1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGhlYWRlcnNcblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkNvbXBsZXRlSXRlbShpdGVtLCByZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaXRlbS5fb25Db21wbGV0ZShyZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQ29tcGxldGVJdGVtKGl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIG5leHRJdGVtID0gdGhpcy5nZXRSZWFkeUl0ZW1zKClbMF07XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1VwbG9hZGluZyA9IGZhbHNlO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKGlzRGVmaW5lZChuZXh0SXRlbSkpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgbmV4dEl0ZW0udXBsb2FkKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQ29tcGxldGVBbGwoKTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2dyZXNzID0gdGhpcy5fZ2V0VG90YWxQcm9ncmVzcygpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlbmRlcigpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSwge1xuXHQgICAgICAgICAgICBpc0ZpbGU6IHtcblx0ICAgICAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqXG5cdCAgICAgICAgICAgICAgICAgKiBTVEFUSUNcblx0ICAgICAgICAgICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqL1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBSZXR1cm5zIFwidHJ1ZVwiIGlmIHZhbHVlIGFuIGluc3RhbmNlIG9mIEZpbGVcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaXNGaWxlKHZhbHVlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEZpbGUgJiYgdmFsdWUgaW5zdGFuY2VvZiBGaWxlO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBpc0ZpbGVMaWtlT2JqZWN0OiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJldHVybnMgXCJ0cnVlXCIgaWYgdmFsdWUgYW4gaW5zdGFuY2Ugb2YgRmlsZUxpa2VPYmplY3Rcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaXNGaWxlTGlrZU9iamVjdCh2YWx1ZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIEZpbGVMaWtlT2JqZWN0O1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBpc0FycmF5TGlrZU9iamVjdDoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBSZXR1cm5zIFwidHJ1ZVwiIGlmIHZhbHVlIGlzIGFycmF5IGxpa2Ugb2JqZWN0XG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaXNBcnJheUxpa2VPYmplY3QodmFsdWUpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXNPYmplY3QodmFsdWUpICYmIFwibGVuZ3RoXCIgaW4gdmFsdWU7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIGluaGVyaXQ6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogSW5oZXJpdHMgYSB0YXJnZXQgKENsYXNzXzEpIGJ5IGEgc291cmNlIChDbGFzc18yKVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gdGFyZ2V0XG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBzb3VyY2Vcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gaW5oZXJpdCh0YXJnZXQsIHNvdXJjZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHRhcmdldC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHNvdXJjZS5wcm90b3R5cGUpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRhcmdldC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSB0YXJnZXQ7XG5cdCAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnN1cGVyXyA9IHNvdXJjZTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXG5cdCAgICAgICAgcmV0dXJuIEZpbGVVcGxvYWRlcjtcblx0ICAgIH0pKCk7XG5cblx0ICAgIC8qKioqKioqKioqKioqKioqKioqKioqXG5cdCAgICAgKiBQVUJMSUNcblx0ICAgICAqKioqKioqKioqKioqKioqKioqKioqL1xuXHQgICAgLyoqXG5cdCAgICAgKiBDaGVja3MgYSBzdXBwb3J0IHRoZSBodG1sNSB1cGxvYWRlclxuXHQgICAgICogQHJldHVybnMge0Jvb2xlYW59XG5cdCAgICAgKiBAcmVhZG9ubHlcblx0ICAgICAqL1xuXHQgICAgRmlsZVVwbG9hZGVyLnByb3RvdHlwZS5pc0hUTUw1ID0gISEoRmlsZSAmJiBGb3JtRGF0YSk7XG5cdCAgICAvKioqKioqKioqKioqKioqKioqKioqKlxuXHQgICAgICogU1RBVElDXG5cdCAgICAgKioqKioqKioqKioqKioqKioqKioqKi9cblx0ICAgIC8qKlxuXHQgICAgICogQGJvcnJvd3MgRmlsZVVwbG9hZGVyLnByb3RvdHlwZS5pc0hUTUw1XG5cdCAgICAgKi9cblx0ICAgIEZpbGVVcGxvYWRlci5pc0hUTUw1ID0gRmlsZVVwbG9hZGVyLnByb3RvdHlwZS5pc0hUTUw1O1xuXG5cdCAgICByZXR1cm4gRmlsZVVwbG9hZGVyO1xuXHR9O1xuXG5cdG1vZHVsZS5leHBvcnRzLiRpbmplY3QgPSBbXCJmaWxlVXBsb2FkZXJPcHRpb25zXCIsIFwiJHJvb3RTY29wZVwiLCBcIiRodHRwXCIsIFwiJHdpbmRvd1wiLCBcIkZpbGVMaWtlT2JqZWN0XCIsIFwiRmlsZUl0ZW1cIl07XG5cbi8qKiovIH0sXG4vKiA0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblxuXHR2YXIgX2ludGVyb3BSZXF1aXJlID0gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqW1wiZGVmYXVsdFwiXSA6IG9iajsgfTtcblxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGtleSBpbiBwcm9wcykgeyB2YXIgcHJvcCA9IHByb3BzW2tleV07IHByb3AuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKHByb3AudmFsdWUpIHByb3Aud3JpdGFibGUgPSB0cnVlOyB9IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpOyB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0pKCk7XG5cblx0dmFyIF9jbGFzc0NhbGxDaGVjayA9IGZ1bmN0aW9uIChpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9O1xuXG5cdHZhciBDT05GSUcgPSBfaW50ZXJvcFJlcXVpcmUoX193ZWJwYWNrX3JlcXVpcmVfXygxKSk7XG5cblx0dmFyIGNvcHkgPSBhbmd1bGFyLmNvcHk7XG5cdHZhciBpc0VsZW1lbnQgPSBhbmd1bGFyLmlzRWxlbWVudDtcblx0dmFyIGlzU3RyaW5nID0gYW5ndWxhci5pc1N0cmluZztcblxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBGaWxlTGlrZU9iamVjdCA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgLyoqXG5cdCAgICAgICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBGaWxlTGlrZU9iamVjdFxuXHQgICAgICAgICAqIEBwYXJhbSB7RmlsZXxIVE1MSW5wdXRFbGVtZW50fE9iamVjdH0gZmlsZU9ySW5wdXRcblx0ICAgICAgICAgKiBAY29uc3RydWN0b3Jcblx0ICAgICAgICAgKi9cblxuXHQgICAgICAgIGZ1bmN0aW9uIEZpbGVMaWtlT2JqZWN0KGZpbGVPcklucHV0KSB7XG5cdCAgICAgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBGaWxlTGlrZU9iamVjdCk7XG5cblx0ICAgICAgICAgICAgdmFyIGlzSW5wdXQgPSBpc0VsZW1lbnQoZmlsZU9ySW5wdXQpO1xuXHQgICAgICAgICAgICB2YXIgZmFrZVBhdGhPck9iamVjdCA9IGlzSW5wdXQgPyBmaWxlT3JJbnB1dC52YWx1ZSA6IGZpbGVPcklucHV0O1xuXHQgICAgICAgICAgICB2YXIgcG9zdGZpeCA9IGlzU3RyaW5nKGZha2VQYXRoT3JPYmplY3QpID8gXCJGYWtlUGF0aFwiIDogXCJPYmplY3RcIjtcblx0ICAgICAgICAgICAgdmFyIG1ldGhvZCA9IFwiX2NyZWF0ZUZyb21cIiArIHBvc3RmaXg7XG5cdCAgICAgICAgICAgIHRoaXNbbWV0aG9kXShmYWtlUGF0aE9yT2JqZWN0KTtcblx0ICAgICAgICB9XG5cblx0ICAgICAgICBfY3JlYXRlQ2xhc3MoRmlsZUxpa2VPYmplY3QsIHtcblx0ICAgICAgICAgICAgX2NyZWF0ZUZyb21GYWtlUGF0aDoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDcmVhdGVzIGZpbGUgbGlrZSBvYmplY3QgZnJvbSBmYWtlIHBhdGggc3RyaW5nXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2NyZWF0ZUZyb21GYWtlUGF0aChwYXRoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXN0TW9kaWZpZWREYXRlID0gbnVsbDtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLnNpemUgPSBudWxsO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMudHlwZSA9IFwibGlrZS9cIiArIHBhdGguc2xpY2UocGF0aC5sYXN0SW5kZXhPZihcIi5cIikgKyAxKS50b0xvd2VyQ2FzZSgpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMubmFtZSA9IHBhdGguc2xpY2UocGF0aC5sYXN0SW5kZXhPZihcIi9cIikgKyBwYXRoLmxhc3RJbmRleE9mKFwiXFxcXFwiKSArIDIpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfY3JlYXRlRnJvbU9iamVjdDoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDcmVhdGVzIGZpbGUgbGlrZSBvYmplY3QgZnJvbSBvYmplY3Rcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZXxGaWxlTGlrZU9iamVjdH0gb2JqZWN0XG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfY3JlYXRlRnJvbU9iamVjdChvYmplY3QpIHtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmxhc3RNb2RpZmllZERhdGUgPSBjb3B5KG9iamVjdC5sYXN0TW9kaWZpZWREYXRlKTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLnNpemUgPSBvYmplY3Quc2l6ZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLnR5cGUgPSBvYmplY3QudHlwZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLm5hbWUgPSBvYmplY3QubmFtZTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXG5cdCAgICAgICAgcmV0dXJuIEZpbGVMaWtlT2JqZWN0O1xuXHQgICAgfSkoKTtcblxuXHQgICAgcmV0dXJuIEZpbGVMaWtlT2JqZWN0O1xuXHR9O1xuXG5cdG1vZHVsZS5leHBvcnRzLiRpbmplY3QgPSBbXTtcblxuLyoqKi8gfSxcbi8qIDUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdHZhciBfaW50ZXJvcFJlcXVpcmUgPSBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmpbXCJkZWZhdWx0XCJdIDogb2JqOyB9O1xuXG5cdHZhciBfY3JlYXRlQ2xhc3MgPSAoZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIga2V5IGluIHByb3BzKSB7IHZhciBwcm9wID0gcHJvcHNba2V5XTsgcHJvcC5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAocHJvcC52YWx1ZSkgcHJvcC53cml0YWJsZSA9IHRydWU7IH0gT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcyk7IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTtcblxuXHR2YXIgX2NsYXNzQ2FsbENoZWNrID0gZnVuY3Rpb24gKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH07XG5cblx0dmFyIENPTkZJRyA9IF9pbnRlcm9wUmVxdWlyZShfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKTtcblxuXHR2YXIgY29weSA9IGFuZ3VsYXIuY29weTtcblx0dmFyIGV4dGVuZCA9IGFuZ3VsYXIuZXh0ZW5kO1xuXHR2YXIgZWxlbWVudCA9IGFuZ3VsYXIuZWxlbWVudDtcblx0dmFyIGlzRWxlbWVudCA9IGFuZ3VsYXIuaXNFbGVtZW50O1xuXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCRjb21waWxlLCBGaWxlTGlrZU9iamVjdCkge1xuXHQgICAgdmFyIEZpbGVJdGVtID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIEZpbGVJdGVtXG5cdCAgICAgICAgICogQHBhcmFtIHtGaWxlVXBsb2FkZXJ9IHVwbG9hZGVyXG5cdCAgICAgICAgICogQHBhcmFtIHtGaWxlfEhUTUxJbnB1dEVsZW1lbnR8T2JqZWN0fSBzb21lXG5cdCAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICAgICAgICAgKiBAY29uc3RydWN0b3Jcblx0ICAgICAgICAgKi9cblxuXHQgICAgICAgIGZ1bmN0aW9uIEZpbGVJdGVtKHVwbG9hZGVyLCBzb21lLCBvcHRpb25zKSB7XG5cdCAgICAgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBGaWxlSXRlbSk7XG5cblx0ICAgICAgICAgICAgdmFyIGlzSW5wdXQgPSBpc0VsZW1lbnQoc29tZSk7XG5cdCAgICAgICAgICAgIHZhciBpbnB1dCA9IGlzSW5wdXQgPyBlbGVtZW50KHNvbWUpIDogbnVsbDtcblx0ICAgICAgICAgICAgdmFyIGZpbGUgPSAhaXNJbnB1dCA/IHNvbWUgOiBudWxsO1xuXG5cdCAgICAgICAgICAgIGV4dGVuZCh0aGlzLCB7XG5cdCAgICAgICAgICAgICAgICB1cmw6IHVwbG9hZGVyLnVybCxcblx0ICAgICAgICAgICAgICAgIGFsaWFzOiB1cGxvYWRlci5hbGlhcyxcblx0ICAgICAgICAgICAgICAgIGhlYWRlcnM6IGNvcHkodXBsb2FkZXIuaGVhZGVycyksXG5cdCAgICAgICAgICAgICAgICBmb3JtRGF0YTogY29weSh1cGxvYWRlci5mb3JtRGF0YSksXG5cdCAgICAgICAgICAgICAgICByZW1vdmVBZnRlclVwbG9hZDogdXBsb2FkZXIucmVtb3ZlQWZ0ZXJVcGxvYWQsXG5cdCAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHVwbG9hZGVyLndpdGhDcmVkZW50aWFscyxcblx0ICAgICAgICAgICAgICAgIG1ldGhvZDogdXBsb2FkZXIubWV0aG9kXG5cdCAgICAgICAgICAgIH0sIG9wdGlvbnMsIHtcblx0ICAgICAgICAgICAgICAgIHVwbG9hZGVyOiB1cGxvYWRlcixcblx0ICAgICAgICAgICAgICAgIGZpbGU6IG5ldyBGaWxlTGlrZU9iamVjdChzb21lKSxcblx0ICAgICAgICAgICAgICAgIGlzUmVhZHk6IGZhbHNlLFxuXHQgICAgICAgICAgICAgICAgaXNVcGxvYWRpbmc6IGZhbHNlLFxuXHQgICAgICAgICAgICAgICAgaXNVcGxvYWRlZDogZmFsc2UsXG5cdCAgICAgICAgICAgICAgICBpc1N1Y2Nlc3M6IGZhbHNlLFxuXHQgICAgICAgICAgICAgICAgaXNDYW5jZWw6IGZhbHNlLFxuXHQgICAgICAgICAgICAgICAgaXNFcnJvcjogZmFsc2UsXG5cdCAgICAgICAgICAgICAgICBwcm9ncmVzczogMCxcblx0ICAgICAgICAgICAgICAgIGluZGV4OiBudWxsLFxuXHQgICAgICAgICAgICAgICAgX2ZpbGU6IGZpbGUsXG5cdCAgICAgICAgICAgICAgICBfaW5wdXQ6IGlucHV0XG5cdCAgICAgICAgICAgIH0pO1xuXG5cdCAgICAgICAgICAgIGlmIChpbnB1dCkgdGhpcy5fcmVwbGFjZU5vZGUoaW5wdXQpO1xuXHQgICAgICAgIH1cblxuXHQgICAgICAgIF9jcmVhdGVDbGFzcyhGaWxlSXRlbSwge1xuXHQgICAgICAgICAgICB1cGxvYWQ6IHtcblx0ICAgICAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqXG5cdCAgICAgICAgICAgICAgICAgKiBQVUJMSUNcblx0ICAgICAgICAgICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqL1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBVcGxvYWRzIGEgRmlsZUl0ZW1cblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gdXBsb2FkKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBsb2FkZXIudXBsb2FkSXRlbSh0aGlzKTtcblx0ICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBsb2FkZXIuX29uQ29tcGxldGVJdGVtKHRoaXMsIFwiXCIsIDAsIFtdKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGxvYWRlci5fb25FcnJvckl0ZW0odGhpcywgXCJcIiwgMCwgW10pO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgY2FuY2VsOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENhbmNlbHMgdXBsb2FkaW5nIG9mIEZpbGVJdGVtXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNhbmNlbCgpIHtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLnVwbG9hZGVyLmNhbmNlbEl0ZW0odGhpcyk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIHJlbW92ZToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBSZW1vdmVzIGEgRmlsZUl0ZW1cblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMudXBsb2FkZXIucmVtb3ZlRnJvbVF1ZXVlKHRoaXMpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBvbkJlZm9yZVVwbG9hZDoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25CZWZvcmVVcGxvYWQoKSB7fVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBvblByb2dyZXNzOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gcHJvZ3Jlc3Ncblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uUHJvZ3Jlc3MocHJvZ3Jlc3MpIHt9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIG9uU3VjY2Vzczoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSByZXNwb25zZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHN0YXR1c1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGhlYWRlcnNcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25TdWNjZXNzKHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpIHt9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIG9uRXJyb3I6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogQ2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7Kn0gcmVzcG9uc2Vcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzdGF0dXNcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBoZWFkZXJzXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uRXJyb3IocmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycykge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgb25DYW5jZWw6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogQ2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7Kn0gcmVzcG9uc2Vcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzdGF0dXNcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBoZWFkZXJzXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ2FuY2VsKHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpIHt9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIG9uQ29tcGxldGU6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogQ2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7Kn0gcmVzcG9uc2Vcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzdGF0dXNcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBoZWFkZXJzXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ29tcGxldGUocmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycykge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX29uQmVmb3JlVXBsb2FkOiB7XG5cdCAgICAgICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKlxuXHQgICAgICAgICAgICAgICAgICogUFJJVkFURVxuXHQgICAgICAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKiovXG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIElubmVyIGNhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkJlZm9yZVVwbG9hZCgpIHtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzUmVhZHkgPSB0cnVlO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNVcGxvYWRpbmcgPSB0cnVlO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNVcGxvYWRlZCA9IGZhbHNlO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNTdWNjZXNzID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0NhbmNlbCA9IGZhbHNlO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNFcnJvciA9IGZhbHNlO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvZ3Jlc3MgPSAwO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMub25CZWZvcmVVcGxvYWQoKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX29uUHJvZ3Jlc3M6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogSW5uZXIgY2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBwcm9ncmVzc1xuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX29uUHJvZ3Jlc3MocHJvZ3Jlc3MpIHtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2dyZXNzID0gcHJvZ3Jlc3M7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5vblByb2dyZXNzKHByb2dyZXNzKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX29uU3VjY2Vzczoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBJbm5lciBjYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSByZXNwb25zZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHN0YXR1c1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGhlYWRlcnNcblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9vblN1Y2Nlc3MocmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycykge1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNSZWFkeSA9IGZhbHNlO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNVcGxvYWRpbmcgPSBmYWxzZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzVXBsb2FkZWQgPSB0cnVlO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNTdWNjZXNzID0gdHJ1ZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQ2FuY2VsID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0Vycm9yID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9ncmVzcyA9IDEwMDtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmluZGV4ID0gbnVsbDtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLm9uU3VjY2VzcyhyZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX29uRXJyb3I6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogSW5uZXIgY2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7Kn0gcmVzcG9uc2Vcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzdGF0dXNcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBoZWFkZXJzXG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfb25FcnJvcihyZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1JlYWR5ID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1VwbG9hZGluZyA9IGZhbHNlO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNVcGxvYWRlZCA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1N1Y2Nlc3MgPSBmYWxzZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQ2FuY2VsID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0Vycm9yID0gdHJ1ZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2dyZXNzID0gMDtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmluZGV4ID0gbnVsbDtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRXJyb3IocmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycyk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9vbkNhbmNlbDoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBJbm5lciBjYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSByZXNwb25zZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHN0YXR1c1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGhlYWRlcnNcblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkNhbmNlbChyZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1JlYWR5ID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1VwbG9hZGluZyA9IGZhbHNlO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNVcGxvYWRlZCA9IGZhbHNlO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNTdWNjZXNzID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0NhbmNlbCA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0Vycm9yID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9ncmVzcyA9IDA7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmRleCA9IG51bGw7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkNhbmNlbChyZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX29uQ29tcGxldGU6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogSW5uZXIgY2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7Kn0gcmVzcG9uc2Vcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzdGF0dXNcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBoZWFkZXJzXG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfb25Db21wbGV0ZShyZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkNvbXBsZXRlKHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpO1xuXHQgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlbW92ZUFmdGVyVXBsb2FkKSB0aGlzLnJlbW92ZSgpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfZGVzdHJveToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBEZXN0cm95cyBhIEZpbGVJdGVtXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9kZXN0cm95KCkge1xuXHQgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9pbnB1dCkgdGhpcy5faW5wdXQucmVtb3ZlKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2Zvcm0pIHRoaXMuX2Zvcm0ucmVtb3ZlKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuX2Zvcm07XG5cdCAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuX2lucHV0O1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfcHJlcGFyZVRvVXBsb2FkaW5nOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFByZXBhcmVzIHRvIHVwbG9hZGluZ1xuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX3ByZXBhcmVUb1VwbG9hZGluZygpIHtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmluZGV4ID0gdGhpcy5pbmRleCB8fCArK3RoaXMudXBsb2FkZXIuX25leHRJbmRleDtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzUmVhZHkgPSB0cnVlO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfcmVwbGFjZU5vZGU6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmVwbGFjZXMgaW5wdXQgZWxlbWVudCBvbiBoaXMgY2xvbmVcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7SlFMaXRlfGpRdWVyeX0gaW5wdXRcblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZXBsYWNlTm9kZShpbnB1dCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBjbG9uZSA9ICRjb21waWxlKGlucHV0LmNsb25lKCkpKGlucHV0LnNjb3BlKCkpO1xuXHQgICAgICAgICAgICAgICAgICAgIGNsb25lLnByb3AoXCJ2YWx1ZVwiLCBudWxsKTsgLy8gRkYgZml4XG5cdCAgICAgICAgICAgICAgICAgICAgaW5wdXQuY3NzKFwiZGlzcGxheVwiLCBcIm5vbmVcIik7XG5cdCAgICAgICAgICAgICAgICAgICAgaW5wdXQuYWZ0ZXIoY2xvbmUpOyAvLyByZW1vdmUganF1ZXJ5IGRlcGVuZGVuY3lcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXG5cdCAgICAgICAgcmV0dXJuIEZpbGVJdGVtO1xuXHQgICAgfSkoKTtcblxuXHQgICAgcmV0dXJuIEZpbGVJdGVtO1xuXHR9O1xuXG5cdG1vZHVsZS5leHBvcnRzLiRpbmplY3QgPSBbXCIkY29tcGlsZVwiLCBcIkZpbGVMaWtlT2JqZWN0XCJdO1xuXG4vKioqLyB9LFxuLyogNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0dmFyIF9pbnRlcm9wUmVxdWlyZSA9IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9ialtcImRlZmF1bHRcIl0gOiBvYmo7IH07XG5cblx0dmFyIF9jcmVhdGVDbGFzcyA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBrZXkgaW4gcHJvcHMpIHsgdmFyIHByb3AgPSBwcm9wc1trZXldOyBwcm9wLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChwcm9wLnZhbHVlKSBwcm9wLndyaXRhYmxlID0gdHJ1ZTsgfSBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKTsgfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KSgpO1xuXG5cdHZhciBfY2xhc3NDYWxsQ2hlY2sgPSBmdW5jdGlvbiAoaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfTtcblxuXHR2YXIgQ09ORklHID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oMSkpO1xuXG5cdHZhciBleHRlbmQgPSBhbmd1bGFyLmV4dGVuZDtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBGaWxlRGlyZWN0aXZlID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBDcmVhdGVzIGluc3RhbmNlIG9mIHtGaWxlRGlyZWN0aXZlfSBvYmplY3Rcblx0ICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zLnVwbG9hZGVyXG5cdCAgICAgICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gb3B0aW9ucy5lbGVtZW50XG5cdCAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMuZXZlbnRzXG5cdCAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IG9wdGlvbnMucHJvcFxuXHQgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuXHQgICAgICAgICAqL1xuXG5cdCAgICAgICAgZnVuY3Rpb24gRmlsZURpcmVjdGl2ZShvcHRpb25zKSB7XG5cdCAgICAgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBGaWxlRGlyZWN0aXZlKTtcblxuXHQgICAgICAgICAgICBleHRlbmQodGhpcywgb3B0aW9ucyk7XG5cdCAgICAgICAgICAgIHRoaXMudXBsb2FkZXIuX2RpcmVjdGl2ZXNbdGhpcy5wcm9wXS5wdXNoKHRoaXMpO1xuXHQgICAgICAgICAgICB0aGlzLl9zYXZlTGlua3MoKTtcblx0ICAgICAgICAgICAgdGhpcy5iaW5kKCk7XG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgX2NyZWF0ZUNsYXNzKEZpbGVEaXJlY3RpdmUsIHtcblx0ICAgICAgICAgICAgYmluZDoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBCaW5kcyBldmVudHMgaGFuZGxlc1xuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLmV2ZW50cykge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJvcCA9IHRoaXMuZXZlbnRzW2tleV07XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5iaW5kKGtleSwgdGhpc1twcm9wXSk7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICB1bmJpbmQ6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogVW5iaW5kcyBldmVudHMgaGFuZGxlc1xuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMuZXZlbnRzKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC51bmJpbmQoa2V5LCB0aGlzLmV2ZW50c1trZXldKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIGRlc3Ryb3k6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogRGVzdHJveXMgZGlyZWN0aXZlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy51cGxvYWRlci5fZGlyZWN0aXZlc1t0aGlzLnByb3BdLmluZGV4T2YodGhpcyk7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy51cGxvYWRlci5fZGlyZWN0aXZlc1t0aGlzLnByb3BdLnNwbGljZShpbmRleCwgMSk7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy51bmJpbmQoKTtcblx0ICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLmVsZW1lbnQgPSBudWxsO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfc2F2ZUxpbmtzOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFNhdmVzIGxpbmtzIHRvIGZ1bmN0aW9uc1xuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX3NhdmVMaW5rcygpIHtcblx0ICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5ldmVudHMpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByb3AgPSB0aGlzLmV2ZW50c1trZXldO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW3Byb3BdID0gdGhpc1twcm9wXS5iaW5kKHRoaXMpO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXG5cdCAgICAgICAgcmV0dXJuIEZpbGVEaXJlY3RpdmU7XG5cdCAgICB9KSgpO1xuXG5cdCAgICAvKipcblx0ICAgICAqIE1hcCBvZiBldmVudHNcblx0ICAgICAqIEB0eXBlIHtPYmplY3R9XG5cdCAgICAgKi9cblx0ICAgIEZpbGVEaXJlY3RpdmUucHJvdG90eXBlLmV2ZW50cyA9IHt9O1xuXG5cdCAgICByZXR1cm4gRmlsZURpcmVjdGl2ZTtcblx0fTtcblxuXHRtb2R1bGUuZXhwb3J0cy4kaW5qZWN0ID0gW107XG5cbi8qKiovIH0sXG4vKiA3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblxuXHR2YXIgX2ludGVyb3BSZXF1aXJlID0gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqW1wiZGVmYXVsdFwiXSA6IG9iajsgfTtcblxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGtleSBpbiBwcm9wcykgeyB2YXIgcHJvcCA9IHByb3BzW2tleV07IHByb3AuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKHByb3AudmFsdWUpIHByb3Aud3JpdGFibGUgPSB0cnVlOyB9IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpOyB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0pKCk7XG5cblx0dmFyIF9nZXQgPSBmdW5jdGlvbiBnZXQob2JqZWN0LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpIHsgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgcHJvcGVydHkpOyBpZiAoZGVzYyA9PT0gdW5kZWZpbmVkKSB7IHZhciBwYXJlbnQgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqZWN0KTsgaWYgKHBhcmVudCA9PT0gbnVsbCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9IGVsc2UgeyByZXR1cm4gZ2V0KHBhcmVudCwgcHJvcGVydHksIHJlY2VpdmVyKTsgfSB9IGVsc2UgaWYgKFwidmFsdWVcIiBpbiBkZXNjICYmIGRlc2Mud3JpdGFibGUpIHsgcmV0dXJuIGRlc2MudmFsdWU7IH0gZWxzZSB7IHZhciBnZXR0ZXIgPSBkZXNjLmdldDsgaWYgKGdldHRlciA9PT0gdW5kZWZpbmVkKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gcmV0dXJuIGdldHRlci5jYWxsKHJlY2VpdmVyKTsgfSB9O1xuXG5cdHZhciBfaW5oZXJpdHMgPSBmdW5jdGlvbiAoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfTtcblxuXHR2YXIgX2NsYXNzQ2FsbENoZWNrID0gZnVuY3Rpb24gKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH07XG5cblx0dmFyIENPTkZJRyA9IF9pbnRlcm9wUmVxdWlyZShfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKTtcblxuXHR2YXIgZXh0ZW5kID0gYW5ndWxhci5leHRlbmQ7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoRmlsZURpcmVjdGl2ZSkge1xuXHQgICAgdmFyIEZpbGVTZWxlY3QgPSAoZnVuY3Rpb24gKF9GaWxlRGlyZWN0aXZlKSB7XG5cdCAgICAgICAgLyoqXG5cdCAgICAgICAgICogQ3JlYXRlcyBpbnN0YW5jZSBvZiB7RmlsZVNlbGVjdH0gb2JqZWN0XG5cdCAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICAgICAgICAgKiBAY29uc3RydWN0b3Jcblx0ICAgICAgICAgKi9cblxuXHQgICAgICAgIGZ1bmN0aW9uIEZpbGVTZWxlY3Qob3B0aW9ucykge1xuXHQgICAgICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRmlsZVNlbGVjdCk7XG5cblx0ICAgICAgICAgICAgdmFyIGV4dGVuZGVkT3B0aW9ucyA9IGV4dGVuZChvcHRpb25zLCB7XG5cdCAgICAgICAgICAgICAgICAvLyBNYXAgb2YgZXZlbnRzXG5cdCAgICAgICAgICAgICAgICBldmVudHM6IHtcblx0ICAgICAgICAgICAgICAgICAgICAkZGVzdHJveTogXCJkZXN0cm95XCIsXG5cdCAgICAgICAgICAgICAgICAgICAgY2hhbmdlOiBcIm9uQ2hhbmdlXCJcblx0ICAgICAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgICAgICAvLyBOYW1lIG9mIHByb3BlcnR5IGluc2lkZSB1cGxvYWRlci5fZGlyZWN0aXZlIG9iamVjdFxuXHQgICAgICAgICAgICAgICAgcHJvcDogXCJzZWxlY3RcIlxuXHQgICAgICAgICAgICB9KTtcblxuXHQgICAgICAgICAgICBfZ2V0KE9iamVjdC5nZXRQcm90b3R5cGVPZihGaWxlU2VsZWN0LnByb3RvdHlwZSksIFwiY29uc3RydWN0b3JcIiwgdGhpcykuY2FsbCh0aGlzLCBleHRlbmRlZE9wdGlvbnMpO1xuXG5cdCAgICAgICAgICAgIGlmICghdGhpcy51cGxvYWRlci5pc0hUTUw1KSB7XG5cdCAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlQXR0cihcIm11bHRpcGxlXCIpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHRoaXMuZWxlbWVudC5wcm9wKFwidmFsdWVcIiwgbnVsbCk7IC8vIEZGIGZpeFxuXHQgICAgICAgIH1cblxuXHQgICAgICAgIF9pbmhlcml0cyhGaWxlU2VsZWN0LCBfRmlsZURpcmVjdGl2ZSk7XG5cblx0ICAgICAgICBfY3JlYXRlQ2xhc3MoRmlsZVNlbGVjdCwge1xuXHQgICAgICAgICAgICBnZXRPcHRpb25zOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJldHVybnMgb3B0aW9uc1xuXHQgICAgICAgICAgICAgICAgICogQHJldHVybiB7T2JqZWN0fHVuZGVmaW5lZH1cblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0T3B0aW9ucygpIHt9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIGdldEZpbHRlcnM6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmV0dXJucyBmaWx0ZXJzXG5cdCAgICAgICAgICAgICAgICAgKiBAcmV0dXJuIHtBcnJheTxGdW5jdGlvbj58U3RyaW5nfHVuZGVmaW5lZH1cblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RmlsdGVycygpIHt9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIGlzRW1wdHlBZnRlclNlbGVjdGlvbjoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBJZiByZXR1cm5zIFwidHJ1ZVwiIHRoZW4gSFRNTElucHV0RWxlbWVudCB3aWxsIGJlIGNsZWFyZWRcblx0ICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc0VtcHR5QWZ0ZXJTZWxlY3Rpb24oKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEhdGhpcy5lbGVtZW50LmF0dHIoXCJtdWx0aXBsZVwiKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgb25DaGFuZ2U6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogRXZlbnQgaGFuZGxlclxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNoYW5nZSgpIHtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgZmlsZXMgPSB0aGlzLnVwbG9hZGVyLmlzSFRNTDUgPyB0aGlzLmVsZW1lbnRbMF0uZmlsZXMgOiB0aGlzLmVsZW1lbnRbMF07XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB0aGlzLmdldE9wdGlvbnMoKTtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgZmlsdGVycyA9IHRoaXMuZ2V0RmlsdGVycygpO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnVwbG9hZGVyLmlzSFRNTDUpIHRoaXMuZGVzdHJveSgpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMudXBsb2FkZXIuYWRkVG9RdWV1ZShmaWxlcywgb3B0aW9ucywgZmlsdGVycyk7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNFbXB0eUFmdGVyU2VsZWN0aW9uKCkpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnByb3AoXCJ2YWx1ZVwiLCBudWxsKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJlcGxhY2VXaXRoKHRoaXMuZWxlbWVudCA9IHRoaXMuZWxlbWVudC5jbG9uZSh0cnVlKSk7IC8vIElFIGZpeFxuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXG5cdCAgICAgICAgcmV0dXJuIEZpbGVTZWxlY3Q7XG5cdCAgICB9KShGaWxlRGlyZWN0aXZlKTtcblxuXHQgICAgcmV0dXJuIEZpbGVTZWxlY3Q7XG5cdH07XG5cblx0bW9kdWxlLmV4cG9ydHMuJGluamVjdCA9IFtcIkZpbGVEaXJlY3RpdmVcIl07XG5cbi8qKiovIH0sXG4vKiA4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblxuXHR2YXIgX2ludGVyb3BSZXF1aXJlID0gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqW1wiZGVmYXVsdFwiXSA6IG9iajsgfTtcblxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGtleSBpbiBwcm9wcykgeyB2YXIgcHJvcCA9IHByb3BzW2tleV07IHByb3AuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKHByb3AudmFsdWUpIHByb3Aud3JpdGFibGUgPSB0cnVlOyB9IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpOyB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0pKCk7XG5cblx0dmFyIF9nZXQgPSBmdW5jdGlvbiBnZXQob2JqZWN0LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpIHsgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgcHJvcGVydHkpOyBpZiAoZGVzYyA9PT0gdW5kZWZpbmVkKSB7IHZhciBwYXJlbnQgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqZWN0KTsgaWYgKHBhcmVudCA9PT0gbnVsbCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9IGVsc2UgeyByZXR1cm4gZ2V0KHBhcmVudCwgcHJvcGVydHksIHJlY2VpdmVyKTsgfSB9IGVsc2UgaWYgKFwidmFsdWVcIiBpbiBkZXNjICYmIGRlc2Mud3JpdGFibGUpIHsgcmV0dXJuIGRlc2MudmFsdWU7IH0gZWxzZSB7IHZhciBnZXR0ZXIgPSBkZXNjLmdldDsgaWYgKGdldHRlciA9PT0gdW5kZWZpbmVkKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gcmV0dXJuIGdldHRlci5jYWxsKHJlY2VpdmVyKTsgfSB9O1xuXG5cdHZhciBfaW5oZXJpdHMgPSBmdW5jdGlvbiAoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfTtcblxuXHR2YXIgX2NsYXNzQ2FsbENoZWNrID0gZnVuY3Rpb24gKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH07XG5cblx0dmFyIENPTkZJRyA9IF9pbnRlcm9wUmVxdWlyZShfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKTtcblxuXHR2YXIgZXh0ZW5kID0gYW5ndWxhci5leHRlbmQ7XG5cdHZhciBmb3JFYWNoID0gYW5ndWxhci5mb3JFYWNoO1xuXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKEZpbGVEaXJlY3RpdmUpIHtcblx0ICAgIHZhciBGaWxlRHJvcCA9IChmdW5jdGlvbiAoX0ZpbGVEaXJlY3RpdmUpIHtcblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBDcmVhdGVzIGluc3RhbmNlIG9mIHtGaWxlRHJvcH0gb2JqZWN0XG5cdCAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICAgICAgICAgKiBAY29uc3RydWN0b3Jcblx0ICAgICAgICAgKi9cblxuXHQgICAgICAgIGZ1bmN0aW9uIEZpbGVEcm9wKG9wdGlvbnMpIHtcblx0ICAgICAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZpbGVEcm9wKTtcblxuXHQgICAgICAgICAgICB2YXIgZXh0ZW5kZWRPcHRpb25zID0gZXh0ZW5kKG9wdGlvbnMsIHtcblx0ICAgICAgICAgICAgICAgIC8vIE1hcCBvZiBldmVudHNcblx0ICAgICAgICAgICAgICAgIGV2ZW50czoge1xuXHQgICAgICAgICAgICAgICAgICAgICRkZXN0cm95OiBcImRlc3Ryb3lcIixcblx0ICAgICAgICAgICAgICAgICAgICBkcm9wOiBcIm9uRHJvcFwiLFxuXHQgICAgICAgICAgICAgICAgICAgIGRyYWdvdmVyOiBcIm9uRHJhZ092ZXJcIixcblx0ICAgICAgICAgICAgICAgICAgICBkcmFnbGVhdmU6IFwib25EcmFnTGVhdmVcIlxuXHQgICAgICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgICAgIC8vIE5hbWUgb2YgcHJvcGVydHkgaW5zaWRlIHVwbG9hZGVyLl9kaXJlY3RpdmUgb2JqZWN0XG5cdCAgICAgICAgICAgICAgICBwcm9wOiBcImRyb3BcIlxuXHQgICAgICAgICAgICB9KTtcblxuXHQgICAgICAgICAgICBfZ2V0KE9iamVjdC5nZXRQcm90b3R5cGVPZihGaWxlRHJvcC5wcm90b3R5cGUpLCBcImNvbnN0cnVjdG9yXCIsIHRoaXMpLmNhbGwodGhpcywgZXh0ZW5kZWRPcHRpb25zKTtcblx0ICAgICAgICB9XG5cblx0ICAgICAgICBfaW5oZXJpdHMoRmlsZURyb3AsIF9GaWxlRGlyZWN0aXZlKTtcblxuXHQgICAgICAgIF9jcmVhdGVDbGFzcyhGaWxlRHJvcCwge1xuXHQgICAgICAgICAgICBnZXRPcHRpb25zOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJldHVybnMgb3B0aW9uc1xuXHQgICAgICAgICAgICAgICAgICogQHJldHVybiB7T2JqZWN0fHVuZGVmaW5lZH1cblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0T3B0aW9ucygpIHt9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIGdldEZpbHRlcnM6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmV0dXJucyBmaWx0ZXJzXG5cdCAgICAgICAgICAgICAgICAgKiBAcmV0dXJuIHtBcnJheTxGdW5jdGlvbj58U3RyaW5nfHVuZGVmaW5lZH1cblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RmlsdGVycygpIHt9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIG9uRHJvcDoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBFdmVudCBoYW5kbGVyXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uRHJvcChldmVudCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciB0cmFuc2ZlciA9IHRoaXMuX2dldFRyYW5zZmVyKGV2ZW50KTtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAoIXRyYW5zZmVyKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgICAgICAgICAgICB9dmFyIG9wdGlvbnMgPSB0aGlzLmdldE9wdGlvbnMoKTtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgZmlsdGVycyA9IHRoaXMuZ2V0RmlsdGVycygpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuX3ByZXZlbnRBbmRTdG9wKGV2ZW50KTtcblx0ICAgICAgICAgICAgICAgICAgICBmb3JFYWNoKHRoaXMudXBsb2FkZXIuX2RpcmVjdGl2ZXMub3ZlciwgdGhpcy5fcmVtb3ZlT3ZlckNsYXNzLCB0aGlzKTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLnVwbG9hZGVyLmFkZFRvUXVldWUodHJhbnNmZXIuZmlsZXMsIG9wdGlvbnMsIGZpbHRlcnMpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBvbkRyYWdPdmVyOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIEV2ZW50IGhhbmRsZXJcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25EcmFnT3ZlcihldmVudCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciB0cmFuc2ZlciA9IHRoaXMuX2dldFRyYW5zZmVyKGV2ZW50KTtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2hhdmVGaWxlcyh0cmFuc2Zlci50eXBlcykpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgICAgICAgICAgIH10cmFuc2Zlci5kcm9wRWZmZWN0ID0gXCJjb3B5XCI7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5fcHJldmVudEFuZFN0b3AoZXZlbnQpO1xuXHQgICAgICAgICAgICAgICAgICAgIGZvckVhY2godGhpcy51cGxvYWRlci5fZGlyZWN0aXZlcy5vdmVyLCB0aGlzLl9hZGRPdmVyQ2xhc3MsIHRoaXMpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBvbkRyYWdMZWF2ZToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBFdmVudCBoYW5kbGVyXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uRHJhZ0xlYXZlKGV2ZW50KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQgPT09IHRoaXMuZWxlbWVudFswXSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICAgICAgICAgICAgfXRoaXMuX3ByZXZlbnRBbmRTdG9wKGV2ZW50KTtcblx0ICAgICAgICAgICAgICAgICAgICBmb3JFYWNoKHRoaXMudXBsb2FkZXIuX2RpcmVjdGl2ZXMub3ZlciwgdGhpcy5fcmVtb3ZlT3ZlckNsYXNzLCB0aGlzKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX2dldFRyYW5zZmVyOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIEhlbHBlclxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfZ2V0VHJhbnNmZXIoZXZlbnQpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXZlbnQuZGF0YVRyYW5zZmVyID8gZXZlbnQuZGF0YVRyYW5zZmVyIDogZXZlbnQub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXI7IC8vIGpRdWVyeSBmaXg7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9wcmV2ZW50QW5kU3RvcDoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBIZWxwZXJcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX3ByZXZlbnRBbmRTdG9wKGV2ZW50KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0ICAgICAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX2hhdmVGaWxlczoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBSZXR1cm5zIFwidHJ1ZVwiIGlmIHR5cGVzIGNvbnRhaW5zIGZpbGVzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gdHlwZXNcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhdmVGaWxlcyh0eXBlcykge1xuXHQgICAgICAgICAgICAgICAgICAgIGlmICghdHlwZXMpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICAgICAgICAgICAgICAgIH1pZiAodHlwZXMuaW5kZXhPZikge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHlwZXMuaW5kZXhPZihcIkZpbGVzXCIpICE9PSAtMTtcblx0ICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVzLmNvbnRhaW5zKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0eXBlcy5jb250YWlucyhcIkZpbGVzXCIpO1xuXHQgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9hZGRPdmVyQ2xhc3M6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogQ2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2FkZE92ZXJDbGFzcyhpdGVtKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaXRlbS5hZGRPdmVyQ2xhc3MoKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX3JlbW92ZU92ZXJDbGFzczoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVtb3ZlT3ZlckNsYXNzKGl0ZW0pIHtcblx0ICAgICAgICAgICAgICAgICAgICBpdGVtLnJlbW92ZU92ZXJDbGFzcygpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cblx0ICAgICAgICByZXR1cm4gRmlsZURyb3A7XG5cdCAgICB9KShGaWxlRGlyZWN0aXZlKTtcblxuXHQgICAgcmV0dXJuIEZpbGVEcm9wO1xuXHR9O1xuXG5cdG1vZHVsZS5leHBvcnRzLiRpbmplY3QgPSBbXCJGaWxlRGlyZWN0aXZlXCJdO1xuXG4vKioqLyB9LFxuLyogOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0dmFyIF9pbnRlcm9wUmVxdWlyZSA9IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9ialtcImRlZmF1bHRcIl0gOiBvYmo7IH07XG5cblx0dmFyIF9jcmVhdGVDbGFzcyA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBrZXkgaW4gcHJvcHMpIHsgdmFyIHByb3AgPSBwcm9wc1trZXldOyBwcm9wLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChwcm9wLnZhbHVlKSBwcm9wLndyaXRhYmxlID0gdHJ1ZTsgfSBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKTsgfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KSgpO1xuXG5cdHZhciBfZ2V0ID0gZnVuY3Rpb24gZ2V0KG9iamVjdCwgcHJvcGVydHksIHJlY2VpdmVyKSB7IHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHByb3BlcnR5KTsgaWYgKGRlc2MgPT09IHVuZGVmaW5lZCkgeyB2YXIgcGFyZW50ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iamVjdCk7IGlmIChwYXJlbnQgPT09IG51bGwpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSBlbHNlIHsgcmV0dXJuIGdldChwYXJlbnQsIHByb3BlcnR5LCByZWNlaXZlcik7IH0gfSBlbHNlIGlmIChcInZhbHVlXCIgaW4gZGVzYyAmJiBkZXNjLndyaXRhYmxlKSB7IHJldHVybiBkZXNjLnZhbHVlOyB9IGVsc2UgeyB2YXIgZ2V0dGVyID0gZGVzYy5nZXQ7IGlmIChnZXR0ZXIgPT09IHVuZGVmaW5lZCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9IHJldHVybiBnZXR0ZXIuY2FsbChyZWNlaXZlcik7IH0gfTtcblxuXHR2YXIgX2luaGVyaXRzID0gZnVuY3Rpb24gKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH07XG5cblx0dmFyIF9jbGFzc0NhbGxDaGVjayA9IGZ1bmN0aW9uIChpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9O1xuXG5cdHZhciBDT05GSUcgPSBfaW50ZXJvcFJlcXVpcmUoX193ZWJwYWNrX3JlcXVpcmVfXygxKSk7XG5cblx0dmFyIGV4dGVuZCA9IGFuZ3VsYXIuZXh0ZW5kO1xuXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKEZpbGVEaXJlY3RpdmUpIHtcblx0ICAgIHZhciBGaWxlT3ZlciA9IChmdW5jdGlvbiAoX0ZpbGVEaXJlY3RpdmUpIHtcblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBDcmVhdGVzIGluc3RhbmNlIG9mIHtGaWxlRHJvcH0gb2JqZWN0XG5cdCAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICAgICAgICAgKiBAY29uc3RydWN0b3Jcblx0ICAgICAgICAgKi9cblxuXHQgICAgICAgIGZ1bmN0aW9uIEZpbGVPdmVyKG9wdGlvbnMpIHtcblx0ICAgICAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZpbGVPdmVyKTtcblxuXHQgICAgICAgICAgICB2YXIgZXh0ZW5kZWRPcHRpb25zID0gZXh0ZW5kKG9wdGlvbnMsIHtcblx0ICAgICAgICAgICAgICAgIC8vIE1hcCBvZiBldmVudHNcblx0ICAgICAgICAgICAgICAgIGV2ZW50czoge1xuXHQgICAgICAgICAgICAgICAgICAgICRkZXN0cm95OiBcImRlc3Ryb3lcIlxuXHQgICAgICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgICAgIC8vIE5hbWUgb2YgcHJvcGVydHkgaW5zaWRlIHVwbG9hZGVyLl9kaXJlY3RpdmUgb2JqZWN0XG5cdCAgICAgICAgICAgICAgICBwcm9wOiBcIm92ZXJcIixcblx0ICAgICAgICAgICAgICAgIC8vIE92ZXIgY2xhc3Ncblx0ICAgICAgICAgICAgICAgIG92ZXJDbGFzczogXCJudi1maWxlLW92ZXJcIlxuXHQgICAgICAgICAgICB9KTtcblxuXHQgICAgICAgICAgICBfZ2V0KE9iamVjdC5nZXRQcm90b3R5cGVPZihGaWxlT3Zlci5wcm90b3R5cGUpLCBcImNvbnN0cnVjdG9yXCIsIHRoaXMpLmNhbGwodGhpcywgZXh0ZW5kZWRPcHRpb25zKTtcblx0ICAgICAgICB9XG5cblx0ICAgICAgICBfaW5oZXJpdHMoRmlsZU92ZXIsIF9GaWxlRGlyZWN0aXZlKTtcblxuXHQgICAgICAgIF9jcmVhdGVDbGFzcyhGaWxlT3Zlciwge1xuXHQgICAgICAgICAgICBhZGRPdmVyQ2xhc3M6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogQWRkcyBvdmVyIGNsYXNzXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFkZE92ZXJDbGFzcygpIHtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuYWRkQ2xhc3ModGhpcy5nZXRPdmVyQ2xhc3MoKSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIHJlbW92ZU92ZXJDbGFzczoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBSZW1vdmVzIG92ZXIgY2xhc3Ncblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlT3ZlckNsYXNzKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyh0aGlzLmdldE92ZXJDbGFzcygpKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgZ2V0T3ZlckNsYXNzOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJldHVybnMgb3ZlciBjbGFzc1xuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMge1N0cmluZ31cblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0T3ZlckNsYXNzKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm92ZXJDbGFzcztcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXG5cdCAgICAgICAgcmV0dXJuIEZpbGVPdmVyO1xuXHQgICAgfSkoRmlsZURpcmVjdGl2ZSk7XG5cblx0ICAgIHJldHVybiBGaWxlT3Zlcjtcblx0fTtcblxuXHRtb2R1bGUuZXhwb3J0cy4kaW5qZWN0ID0gW1wiRmlsZURpcmVjdGl2ZVwiXTtcblxuLyoqKi8gfSxcbi8qIDEwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblxuXHR2YXIgX2ludGVyb3BSZXF1aXJlID0gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqW1wiZGVmYXVsdFwiXSA6IG9iajsgfTtcblxuXHR2YXIgQ09ORklHID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oMSkpO1xuXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCRwYXJzZSwgRmlsZVVwbG9hZGVyLCBGaWxlU2VsZWN0KSB7XG5cblx0ICAgIHJldHVybiB7XG5cdCAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRyaWJ1dGVzKSB7XG5cdCAgICAgICAgICAgIHZhciB1cGxvYWRlciA9IHNjb3BlLiRldmFsKGF0dHJpYnV0ZXMudXBsb2FkZXIpO1xuXG5cdCAgICAgICAgICAgIGlmICghKHVwbG9hZGVyIGluc3RhbmNlb2YgRmlsZVVwbG9hZGVyKSkge1xuXHQgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlxcXCJVcGxvYWRlclxcXCIgbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiBGaWxlVXBsb2FkZXJcIik7XG5cdCAgICAgICAgICAgIH1cblxuXHQgICAgICAgICAgICB2YXIgb2JqZWN0ID0gbmV3IEZpbGVTZWxlY3Qoe1xuXHQgICAgICAgICAgICAgICAgdXBsb2FkZXI6IHVwbG9hZGVyLFxuXHQgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudFxuXHQgICAgICAgICAgICB9KTtcblxuXHQgICAgICAgICAgICBvYmplY3QuZ2V0T3B0aW9ucyA9ICRwYXJzZShhdHRyaWJ1dGVzLm9wdGlvbnMpLmJpbmQob2JqZWN0LCBzY29wZSk7XG5cdCAgICAgICAgICAgIG9iamVjdC5nZXRGaWx0ZXJzID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIGF0dHJpYnV0ZXMuZmlsdGVycztcblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHR9O1xuXG5cdG1vZHVsZS5leHBvcnRzLiRpbmplY3QgPSBbXCIkcGFyc2VcIiwgXCJGaWxlVXBsb2FkZXJcIiwgXCJGaWxlU2VsZWN0XCJdO1xuXG4vKioqLyB9LFxuLyogMTEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdHZhciBfaW50ZXJvcFJlcXVpcmUgPSBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmpbXCJkZWZhdWx0XCJdIDogb2JqOyB9O1xuXG5cdHZhciBDT05GSUcgPSBfaW50ZXJvcFJlcXVpcmUoX193ZWJwYWNrX3JlcXVpcmVfXygxKSk7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoJHBhcnNlLCBGaWxlVXBsb2FkZXIsIEZpbGVEcm9wKSB7XG5cblx0ICAgIHJldHVybiB7XG5cdCAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRyaWJ1dGVzKSB7XG5cdCAgICAgICAgICAgIHZhciB1cGxvYWRlciA9IHNjb3BlLiRldmFsKGF0dHJpYnV0ZXMudXBsb2FkZXIpO1xuXG5cdCAgICAgICAgICAgIGlmICghKHVwbG9hZGVyIGluc3RhbmNlb2YgRmlsZVVwbG9hZGVyKSkge1xuXHQgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlxcXCJVcGxvYWRlclxcXCIgbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiBGaWxlVXBsb2FkZXJcIik7XG5cdCAgICAgICAgICAgIH1cblxuXHQgICAgICAgICAgICBpZiAoIXVwbG9hZGVyLmlzSFRNTDUpIHJldHVybjtcblxuXHQgICAgICAgICAgICB2YXIgb2JqZWN0ID0gbmV3IEZpbGVEcm9wKHtcblx0ICAgICAgICAgICAgICAgIHVwbG9hZGVyOiB1cGxvYWRlcixcblx0ICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnRcblx0ICAgICAgICAgICAgfSk7XG5cblx0ICAgICAgICAgICAgb2JqZWN0LmdldE9wdGlvbnMgPSAkcGFyc2UoYXR0cmlidXRlcy5vcHRpb25zKS5iaW5kKG9iamVjdCwgc2NvcGUpO1xuXHQgICAgICAgICAgICBvYmplY3QuZ2V0RmlsdGVycyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBhdHRyaWJ1dGVzLmZpbHRlcnM7XG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0fTtcblxuXHRtb2R1bGUuZXhwb3J0cy4kaW5qZWN0ID0gW1wiJHBhcnNlXCIsIFwiRmlsZVVwbG9hZGVyXCIsIFwiRmlsZURyb3BcIl07XG5cbi8qKiovIH0sXG4vKiAxMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0dmFyIF9pbnRlcm9wUmVxdWlyZSA9IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9ialtcImRlZmF1bHRcIl0gOiBvYmo7IH07XG5cblx0dmFyIENPTkZJRyA9IF9pbnRlcm9wUmVxdWlyZShfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKTtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChGaWxlVXBsb2FkZXIsIEZpbGVPdmVyKSB7XG5cblx0ICAgIHJldHVybiB7XG5cdCAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRyaWJ1dGVzKSB7XG5cdCAgICAgICAgICAgIHZhciB1cGxvYWRlciA9IHNjb3BlLiRldmFsKGF0dHJpYnV0ZXMudXBsb2FkZXIpO1xuXG5cdCAgICAgICAgICAgIGlmICghKHVwbG9hZGVyIGluc3RhbmNlb2YgRmlsZVVwbG9hZGVyKSkge1xuXHQgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlxcXCJVcGxvYWRlclxcXCIgbXVzdCBiZSBhbiBpbnN0YW5jZSBvZiBGaWxlVXBsb2FkZXJcIik7XG5cdCAgICAgICAgICAgIH1cblxuXHQgICAgICAgICAgICB2YXIgb2JqZWN0ID0gbmV3IEZpbGVPdmVyKHtcblx0ICAgICAgICAgICAgICAgIHVwbG9hZGVyOiB1cGxvYWRlcixcblx0ICAgICAgICAgICAgICAgIGVsZW1lbnQ6IGVsZW1lbnRcblx0ICAgICAgICAgICAgfSk7XG5cblx0ICAgICAgICAgICAgb2JqZWN0LmdldE92ZXJDbGFzcyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgIHJldHVybiBhdHRyaWJ1dGVzLm92ZXJDbGFzcyB8fCBvYmplY3Qub3ZlckNsYXNzO1xuXHQgICAgICAgICAgICB9O1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdH07XG5cblx0bW9kdWxlLmV4cG9ydHMuJGluamVjdCA9IFtcIkZpbGVVcGxvYWRlclwiLCBcIkZpbGVPdmVyXCJdO1xuXG4vKioqLyB9XG4vKioqKioqLyBdKVxufSk7XG47XG4vLyMgc291cmNlTWFwcGluZ1VSTD1hbmd1bGFyLWZpbGUtdXBsb2FkLmpzLm1hcFxuIiwiLy8gLS1BdXRob3IgTXVyYWdpamltYW5hIFJpY2hhcmQgPGJlYXN0YXI0NTdAZ21haWwuY29tPlxuLy8gdmFyIHN5bmMgPSBhbmd1bGFyLm1vZHVsZShcInN5bmNcIiwgW1wibmdSb3V0ZVwiLFwiYW5ndWxhckZpbGVVcGxvYWRcIixcImlvbmljXCIsXCJuZ1Jlc291cmNlXCIsXCJ1aS5ib290c3RyYXBcIixcImluZmluaXRlLXNjcm9sbFwiXSk7XG4vLyBtb2R1bGUuZXhwb3J0cyA9IG1vbmdvb3NlLm1vZGVsKCdhcHBDb25maWcnLCB7XG5cbmFuZ3VsYXIubW9kdWxlKCdBdXRoTWFuYWdlcicsW10pLnNlcnZpY2UoJ1Nlc3Npb25TZXJ2aWNlJywgW2Z1bmN0aW9uKCl7XG4gICAgdmFyIHVzZXJJc0F1dGhlbnRpY2F0ZWQgPSBmYWxzZTtcblxuICAgIHRoaXMuc2V0VXNlckF1dGhlbnRpY2F0ZWQgPSBmdW5jdGlvbih2YWx1ZSl7XG4gICAgICAgIHVzZXJJc0F1dGhlbnRpY2F0ZWQgPSB2YWx1ZTtcbiAgICB9O1xuXG4gICAgdGhpcy5nZXRVc2VyQXV0aGVudGljYXRlZCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIHJldHVybiB1c2VySXNBdXRoZW50aWNhdGVkO1xuICAgIH07XG59XSk7XG5cbnZhciBzeW5jID0gYW5ndWxhci5tb2R1bGUoXCJzeW5jXCIsIFtcIm5nUm91dGVcIixcImFuZ3VsYXJGaWxlVXBsb2FkXCIsXCJ1aS5ib290c3RyYXBcIixcInVpLnJvdXRlclwiLFwiaW5maW5pdGUtc2Nyb2xsXCIsJ25nTWF0ZXJpYWwnLCAnbmdNZXNzYWdlcycsICdtYXRlcmlhbC5zdmdBc3NldHNDYWNoZScsJ25nLW1mYicsJ3BkZicsJ25nQ29udGV4dE1lbnUnLCdhbmd1bGFyLWxvYWRpbmctYmFyJywnbmdGaWxlU2F2ZXInLCdBdXRoTWFuYWdlcicsJ25nRGlhbG9nJ10pO1xuXG5cbnZhciBMb2dnZXI9YW5ndWxhci5tb2R1bGUoXCJMb2dnZXJcIixbXSk7XG5Mb2dnZXIucnVuKFsnJHJvb3RTY29wZScsZnVuY3Rpb24oJHJvb3RTY29wZSl7XG5cbiAgICAgIC8vICRyb290U2NvcGUuZW5kUG9pbnQ9J2h0dHBzOi8vc3RyZWFtdXBib3guY29tJztcbiAgICAgICRyb290U2NvcGUuZW5kUG9pbnQ9J2h0dHA6Ly9zeW5jbWUuY29tOjgwMDAnO1xufV0pO1xud2luZG93LnJvdXRlcyA9XG57XG4gICAgXCIvRmlsZXNcIjoge1xuICAgICAgICB1cmw6IFwiL0ZpbGVzXCIsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvZmlsZXMuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdGaWxlc0NvbnRyb2xsZXInLFxuICAgICAgICByZXF1aXJlTG9naW46IHRydWVcbiAgICAgIH0sXG4gICAgICBcInByZXZpZXdcIjp7XG4gICAgICAgIHVybDogJy8hLzpwcmV2aWV3LzpleHRlbnNpb24vOm9mLzp1c2VyJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9maWxlUHJldmlldy5odG1sJyxcbiAgICAgICAgY29udHJvbGxlciA6ICdwcmV2aWV3Q29udHJvbGxlcidcbiAgICAgIH0sXG5cbiAgICAgIFwiL0dyb3Vwc1wiOiB7XG4gICAgICAgICAgdXJsOiBcIi9Hcm91cHNcIixcbiAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2dyb3Vwcy5odG1sJyxcbiAgICAgICAgICBjb250cm9sbGVyOiAnR3JvdXBDb250cm9sbGVyJyxcbiAgICAgICAgICByZXF1aXJlTG9naW46IHRydWVcbiAgICAgIH1cbn07XG5cblxuc3luYy5ydW4oWyckcm9vdFNjb3BlJywnJGxvZycsZnVuY3Rpb24oJHJvb3RTY29wZSwkbG9nKXtcbiAgJHJvb3RTY29wZS5lbmRQb2ludD0naHR0cDovL3N5bmNtZS5jb206ODAwMCc7XG4gICAvLyAkcm9vdFNjb3BlLmVuZFBvaW50PSdodHRwczovL3N0cmVhbXVwYm94LmNvbSc7XG5cblxuICAkcm9vdFNjb3BlLiRvbignJHJvdXRlQ2hhbmdlU3RhcnQnLGZ1bmN0aW9uKGV2ZW50LCBuZXh0LCBjdXJyZW50KXtcbiAgICBmb3IodmFyIGkgaW4gd2luZG93LnJvdXRlcykge1xuXG4gICAgICAgIGlmKG5leHQuaW5kZXhPZihpKSAhPSAtMSkge1xuICAgICAgICAgICAgaWYod2luZG93LnJvdXRlc1tpXS5yZXF1aXJlTG9naW4gJiYgIVNlc3Npb25TZXJ2aWNlLmdldFVzZXJBdXRoZW50aWNhdGVkKCkpIHtcbiAgICAgICAgICAgICAgICBhbGVydChcIllvdSBuZWVkIHRvIGJlIGF1dGhlbnRpY2F0ZWQgdG8gc2VlIHRoaXMgcGFnZSFcIik7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgfVxuICB9KTtcbn1dKTtcbnN5bmMucHJvdmlkZXIoe1xuXG4gICAgJGV4Y2VwdGlvbkhhbmRsZXI6IGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciBoYW5kbGVyID0gZnVuY3Rpb24oZXhjZXB0aW9uLCBjYXVzZSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGV4Y2VwdGlvbik7XG5cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLiRnZXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVyO1xuICAgICAgICB9O1xuICAgIH1cbn0pO1xuc3luYy5jb25maWcoWyckc2NlUHJvdmlkZXInLCckaHR0cFByb3ZpZGVyJywnJG1kVGhlbWluZ1Byb3ZpZGVyJywnY2ZwTG9hZGluZ0JhclByb3ZpZGVyJyxmdW5jdGlvbigkc2NlUHJvdmlkZXIsJGh0dHBQcm92aWRlciwkbWRUaGVtaW5nUHJvdmlkZXIsY2ZwTG9hZGluZ0JhclByb3ZpZGVyKSB7XG4gICAgZGVsZXRlICRodHRwUHJvdmlkZXIuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ1gtUmVxdWVzdGVkLVdpdGgnXTtcbiAgICAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMucG9zdFsnQWNjZXB0J10gPSAnYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0JztcbiAgICAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMucG9zdFsnQWNjZXB0J10gPSAnYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0JztcbiAgICAvL3NldCBhdXRob3JpemF0aW9uIGZvciBvYXV0aDIuMCBmb3IgcHJvdGVjdGlvblxuXG5cbiAgICAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydhdXRob3JpemF0aW9uJ10gPSAnQmVhcmVyIDhFdXFjTU5rRjJ5UDUwRGljcHY5aExSUnA3V09TYWJQbEN1MjJsaVknO1xuXG4gICAgLy8gJGh0dHBQcm92aWRlci5kZWZhdWx0cy51c2VYRG9tYWluID0gdHJ1ZTtcbiAgICAkc2NlUHJvdmlkZXIuZW5hYmxlZChmYWxzZSk7XG5cbiAgICBjZnBMb2FkaW5nQmFyUHJvdmlkZXIuaW5jbHVkZUJhciA9IGZhbHNlO1xufV0pO1xuc3luYy5jb25maWcoWyckc3RhdGVQcm92aWRlcicsJyR1cmxSb3V0ZXJQcm92aWRlcicsZnVuY3Rpb24oJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlciwkc2NvcGUpe1xuICAgICAgICAvLyAkcGFyc2VQcm92aWRlci51bndyYXBQcm9taXNlcyh0cnVlKSA7XG4gICAgICAgICAgZm9yKHZhciBwYXRoIGluIHdpbmRvdy5yb3V0ZXMpIHtcblxuICAgICAgICAgICAgICAvLyBpZihuZXh0LmluZGV4T2YocGF0aCkgIT0gLTEpIHtcbiAgICAgICAgICAgICAgLy8gICAgIGlmKHdpbmRvdy5yb3V0ZXNbcGF0aF0ucmVxdWlyZUxvZ2luICYmICFTZXNzaW9uU2VydmljZS5nZXRVc2VyQXV0aGVudGljYXRlZCgpKSB7XG4gICAgICAgICAgICAgIC8vICAgICAgICAgYWxlcnQoXCJZb3UgbmVlZCB0byBiZSBhdXRoZW50aWNhdGVkIHRvIHNlZSB0aGlzIHBhZ2UhXCIpO1xuICAgICAgICAgICAgICAvLyAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgIC8vICAgICB9XG4gICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgICAgJHN0YXRlUHJvdmlkZXIuc3RhdGUocGF0aCwgd2luZG93LnJvdXRlc1twYXRoXSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnL0ZpbGVzJyk7XG5cbn1dKTtcblxuLy8gfSk7XG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tZG9uZSB3aXRoIE11cmFnaWppbWFuYSBSaWNoYXJkIDxiZWFzdGFyNDU3QGdtYWlsLmNvbT4tLS0tLS0tLS0tLS0tLS0vL1xuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLWRlYWwgd2l0aCB1c2VyJ3MgYWN0aW9ucyBhbmQgaW50ZXJhY3Rpb24gd2l0aCBvdGhlciB1c2Vycy0tLS0tLS0tLS0tLS0tLS8vXG4iLCI7KGZ1bmN0aW9uKHdpbmRvdywgYW5ndWxhciwgdW5kZWZpbmVkKSB7XG5cbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIHZhciBtZmIgPSBhbmd1bGFyLm1vZHVsZSgnbmctbWZiJywgW10pO1xuXG4gIG1mYi5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICAgJHRlbXBsYXRlQ2FjaGUucHV0KCduZy1tZmItbWVudS1kZWZhdWx0LnRwbC5odG1sJyxcbiAgICAgICc8dWwgY2xhc3M9XCJtZmItY29tcG9uZW50LS17e3Bvc2l0aW9ufX0gbWZiLXt7ZWZmZWN0fX1cIicgK1xuICAgICAgJyAgICBkYXRhLW1mYi10b2dnbGU9XCJ7e3RvZ2dsaW5nTWV0aG9kfX1cIiBkYXRhLW1mYi1zdGF0ZT1cInt7bWVudVN0YXRlfX1cIj4nICtcbiAgICAgICcgIDxsaSBjbGFzcz1cIm1mYi1jb21wb25lbnRfX3dyYXBcIj4nICtcbiAgICAgICcgICAgPGEgbmctY2xpY2s9XCJjbGlja2VkKClcIiBuZy1tb3VzZWVudGVyPVwiaG92ZXJlZCgpXCIgbmctbW91c2VsZWF2ZT1cImhvdmVyZWQoKVwiJyArXG4gICAgICAnICAgICAgIG5nLWF0dHItZGF0YS1tZmItbGFiZWw9XCJ7e2xhYmVsfX1cIiBjbGFzcz1cIm1mYi1jb21wb25lbnRfX2J1dHRvbi0tbWFpblwiPicgK1xuICAgICAgJyAgICAgPGkgY2xhc3M9XCJtZmItY29tcG9uZW50X19tYWluLWljb24tLXJlc3Rpbmcge3tyZXN0aW5nfX1cIj48L2k+JyArXG4gICAgICAnICAgICA8aSBjbGFzcz1cIm1mYi1jb21wb25lbnRfX21haW4taWNvbi0tYWN0aXZlIHt7YWN0aXZlfX1cIj48L2k+JyArXG4gICAgICAnICAgIDwvYT4nICtcbiAgICAgICcgICAgPHVsIGNsYXNzPVwibWZiLWNvbXBvbmVudF9fbGlzdFwiIG5nLXRyYW5zY2x1ZGU+JyArXG4gICAgICAnICAgIDwvdWw+JyArXG4gICAgICAnPC9saT4nICtcbiAgICAgICc8L3VsPidcbiAgICApO1xuXG4gICAgJHRlbXBsYXRlQ2FjaGUucHV0KCduZy1tZmItbWVudS1tZC50cGwuaHRtbCcsXG4gICAgICAnPHVsIGNsYXNzPVwibWZiLWNvbXBvbmVudC0te3twb3NpdGlvbn19IG1mYi17e2VmZmVjdH19XCInICtcbiAgICAgICcgICAgZGF0YS1tZmItdG9nZ2xlPVwie3t0b2dnbGluZ01ldGhvZH19XCIgZGF0YS1tZmItc3RhdGU9XCJ7e21lbnVTdGF0ZX19XCI+JyArXG4gICAgICAnICA8bGkgY2xhc3M9XCJtZmItY29tcG9uZW50X193cmFwXCI+JyArXG4gICAgICAnICAgIDxhIG5nLWNsaWNrPVwiY2xpY2tlZCgpXCIgbmctbW91c2VlbnRlcj1cImhvdmVyZWQoKVwiIG5nLW1vdXNlbGVhdmU9XCJob3ZlcmVkKClcIicgK1xuICAgICAgJyAgICAgICBzdHlsZT1cImJhY2tncm91bmQ6IHRyYW5zcGFyZW50OyBib3gtc2hhZG93OiBub25lO1wiJyArXG4gICAgICAnICAgICAgIG5nLWF0dHItZGF0YS1tZmItbGFiZWw9XCJ7e2xhYmVsfX1cIiBjbGFzcz1cIm1mYi1jb21wb25lbnRfX2J1dHRvbi0tbWFpblwiPicgK1xuICAgICAgJyAgICAgPG1kLWJ1dHRvbiBjbGFzcz1cIm1kLWZhYiBtZC1hY2NlbnRcIiBhcmlhLWxhYmVsPXt7bGFiZWx9fSBzdHlsZT1cInBvc2l0aW9uOnJlbGF0aXZlOyBtYXJnaW46IDA7IHBhZGRpbmc6MDtcIj4nICtcbiAgICAgICcgICAgICAgPG1kLWljb24gc3R5bGU9XCJsZWZ0OiAwOyBwb3NpdGlvbjogcmVsYXRpdmU7XCIgbWQtc3ZnLWljb249XCJ7e3Jlc3Rpbmd9fVwiJyArXG4gICAgICAnICAgICAgICAgY2xhc3M9XCJtZmItY29tcG9uZW50X19tYWluLWljb24tLXJlc3RpbmdcIj48L21kLWljb24+JyArXG4gICAgICAnICAgICAgIDxtZC1pY29uIHN0eWxlPVwicG9zaXRpb246cmVsYXRpdmU7XCIgbWQtc3ZnLWljb249XCJ7e2FjdGl2ZX19XCInICtcbiAgICAgICcgICAgICAgICBjbGFzcz1cIm1mYi1jb21wb25lbnRfX21haW4taWNvbi0tYWN0aXZlXCI+PC9tZC1pY29uPicgK1xuICAgICAgJyAgICAgPC9tZC1idXR0b24+JyArXG4gICAgICAnICAgIDwvYT4nICtcbiAgICAgICcgICAgPHVsIGNsYXNzPVwibWZiLWNvbXBvbmVudF9fbGlzdFwiIG5nLXRyYW5zY2x1ZGU+JyArXG4gICAgICAnICAgIDwvdWw+JyArXG4gICAgICAnPC9saT4nICtcbiAgICAgICc8L3VsPidcbiAgICApO1xuXG4gICAgJHRlbXBsYXRlQ2FjaGUucHV0KCduZy1tZmItYnV0dG9uLWRlZmF1bHQudHBsLmh0bWwnLFxuICAgICAgJzxsaT4nICtcbiAgICAgICcgIDxhIGRhdGEtbWZiLWxhYmVsPVwie3tsYWJlbH19XCIgY2xhc3M9XCJtZmItY29tcG9uZW50X19idXR0b24tLWNoaWxkXCI+JyArXG4gICAgICAnICAgIDxpIGNsYXNzPVwibWZiLWNvbXBvbmVudF9fY2hpbGQtaWNvbiB7e2ljb259fVwiPicgK1xuICAgICAgJyAgICA8L2k+JyArXG4gICAgICAnICA8L2E+JyArXG4gICAgICAnPC9saT4nXG4gICAgKTtcblxuICAgICR0ZW1wbGF0ZUNhY2hlLnB1dCgnbmctbWZiLWJ1dHRvbi1tZC50cGwuaHRtbCcsXG4gICAgICAnPGxpPicgK1xuICAgICAgJyAgPGEgaHJlZj1cIlwiIGRhdGEtbWZiLWxhYmVsPVwie3tsYWJlbH19XCIgY2xhc3M9XCJtZmItY29tcG9uZW50X19idXR0b24tLWNoaWxkXCIgJyArXG4gICAgICAnICAgICBzdHlsZT1cImJhY2tncm91bmQ6IHRyYW5zcGFyZW50OyBib3gtc2hhZG93OiBub25lO1wiPicgK1xuICAgICAgJyAgICAgPG1kLWJ1dHRvbiBzdHlsZT1cIm1hcmdpbjogMDtcIiBjbGFzcz1cIm1kLWZhYiBtZC1hY2NlbnRcIiBhcmlhLWxhYmVsPXt7bGFiZWx9fT4nICtcbiAgICAgICcgICAgICAgPG1kLWljb24gbWQtc3ZnLXNyYz1cImltZy9pY29ucy9hbmRyb2lkLnN2Z1wiPjwvbWQtaWNvbj4nICtcbiAgICAgICcgICAgICAgPG1kLWljb24gbWQtc3ZnLWljb249XCJ7e2ljb259fVwiPjwvbWQtaWNvbj4nICtcbiAgICAgICcgICAgIDwvbWQtYnV0dG9uPicgK1xuICAgICAgJyAgPC9hPicgK1xuICAgICAgJzwvbGk+J1xuICAgICk7XG4gIH1dKTtcblxuICBtZmIuZGlyZWN0aXZlKCdtZmJCdXR0b25DbG9zZScsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgcmVxdWlyZTogJ15tZmJNZW51JyxcbiAgICAgIGxpbms6IGZ1bmN0aW9uKCRzY29wZSwgJGVsZW1lbnQsICRhdHRycywgbWZiTWVudUNvbnRyb2xsZXIpIHtcbiAgICAgICAgJGVsZW1lbnQuYmluZCgnY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBtZmJNZW51Q29udHJvbGxlci5jbG9zZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgfTtcblxuICB9KTtcblxuICBtZmIuZGlyZWN0aXZlKCdtZmJNZW51JywgWyckdGltZW91dCcsIGZ1bmN0aW9uKCR0aW1lb3V0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiAnRUEnLFxuICAgICAgdHJhbnNjbHVkZTogdHJ1ZSxcbiAgICAgIHJlcGxhY2U6IHRydWUsXG4gICAgICBzY29wZToge1xuICAgICAgICBwb3NpdGlvbjogJ0AnLFxuICAgICAgICBlZmZlY3Q6ICdAJyxcbiAgICAgICAgbGFiZWw6ICdAJyxcbiAgICAgICAgcmVzdGluZzogJ0ByZXN0aW5nSWNvbicsXG4gICAgICAgIGFjdGl2ZTogJ0BhY3RpdmVJY29uJyxcbiAgICAgICAgbWFpbkFjdGlvbjogJyYnLFxuICAgICAgICBtZW51U3RhdGU6ICc9PycsXG4gICAgICAgIHRvZ2dsaW5nTWV0aG9kOiAnQCdcbiAgICAgIH0sXG4gICAgICB0ZW1wbGF0ZVVybDogZnVuY3Rpb24oZWxlbSwgYXR0cnMpIHtcbiAgICAgICAgcmV0dXJuIGF0dHJzLnRlbXBsYXRlVXJsIHx8ICduZy1tZmItbWVudS1kZWZhdWx0LnRwbC5odG1sJztcbiAgICAgIH0sXG4gICAgICBjb250cm9sbGVyOiBbJyRzY29wZScsICckYXR0cnMnLCBmdW5jdGlvbigkc2NvcGUsICRhdHRycykge1xuICAgICAgICB2YXIgb3BlblN0YXRlID0gJ29wZW4nLFxuICAgICAgICAgIGNsb3NlZFN0YXRlID0gJ2Nsb3NlZCc7XG5cbiAgICAgICAgLy8gQXR0YWNoZWQgdG9nZ2xlLCBvcGVuIGFuZCBjbG9zZSB0byB0aGUgY29udHJvbGxlciB0byBnaXZlIG90aGVyXG4gICAgICAgIC8vIGRpcmVjdGl2ZSBhY2Nlc3NcbiAgICAgICAgdGhpcy50b2dnbGUgPSB0b2dnbGU7XG4gICAgICAgIHRoaXMuY2xvc2UgPSBjbG9zZTtcbiAgICAgICAgdGhpcy5vcGVuID0gb3BlbjtcblxuICAgICAgICAkc2NvcGUuY2xpY2tlZCA9IGNsaWNrZWQ7XG4gICAgICAgICRzY29wZS5ob3ZlcmVkID0gaG92ZXJlZDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0IHRoZSBzdGF0ZSB0byB1c2VyLWRlZmluZWQgdmFsdWUuIEZhbGxiYWNrIHRvIGNsb3NlZCBpZiBub1xuICAgICAgICAgKiB2YWx1ZSBpcyBwYXNzZWQgZnJvbSB0aGUgb3V0c2lkZS5cbiAgICAgICAgICovXG4gICAgICAgIGlmICghJHNjb3BlLm1lbnVTdGF0ZSkge1xuICAgICAgICAgICRzY29wZS5tZW51U3RhdGUgPSBjbG9zZWRTdGF0ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiBvbiB0b3VjaCBkZXZpY2UgQU5EICdob3ZlcicgbWV0aG9kIGlzIHNlbGVjdGVkOlxuICAgICAgICAgKiB3YWl0IGZvciB0aGUgZGlnZXN0IHRvIHBlcmZvcm0gYW5kIHRoZW4gY2hhbmdlIGhvdmVyIHRvIGNsaWNrLlxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKF9pc1RvdWNoRGV2aWNlKCkgJiYgX2lzSG92ZXJBY3RpdmUoKSkge1xuICAgICAgICAgICR0aW1lb3V0KHVzZUNsaWNrKTtcbiAgICAgICAgfVxuXG4gICAgICAgICRhdHRycy4kb2JzZXJ2ZSgnbWVudVN0YXRlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgJHNjb3BlLmN1cnJlbnRTdGF0ZSA9ICRzY29wZS5tZW51U3RhdGU7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGZ1bmN0aW9uIGNsaWNrZWQoKSB7XG4gICAgICAgICAgLy8gSWYgdGhlcmUgaXMgYSBtYWluIGFjdGlvbiwgbGV0J3MgZmlyZSBpdFxuICAgICAgICAgIGlmICgkc2NvcGUubWFpbkFjdGlvbikge1xuICAgICAgICAgICAgJHNjb3BlLm1haW5BY3Rpb24oKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIV9pc0hvdmVyQWN0aXZlKCkpIHtcbiAgICAgICAgICAgIHRvZ2dsZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBmdW5jdGlvbiBob3ZlcmVkKCkge1xuICAgICAgICAgIGlmIChfaXNIb3ZlckFjdGl2ZSgpKSB7XG4gICAgICAgICAgICAvL3RvZ2dsZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogSW52ZXJ0IHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBtZW51LlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gdG9nZ2xlKCkge1xuICAgICAgICAgIGlmICgkc2NvcGUubWVudVN0YXRlID09PSBvcGVuU3RhdGUpIHtcbiAgICAgICAgICAgIGNsb3NlKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG9wZW4oKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBvcGVuKCkge1xuICAgICAgICAgICRzY29wZS5tZW51U3RhdGUgPSBvcGVuU3RhdGU7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBjbG9zZSgpIHtcbiAgICAgICAgICAkc2NvcGUubWVudVN0YXRlID0gY2xvc2VkU3RhdGU7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2hlY2sgaWYgd2UncmUgb24gYSB0b3VjaC1lbmFibGVkIGRldmljZS5cbiAgICAgICAgICogUmVxdWlyZXMgTW9kZXJuaXpyIHRvIHJ1biwgb3RoZXJ3aXNlIHNpbXBseSByZXR1cm5zIGZhbHNlXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBfaXNUb3VjaERldmljZSgpIHtcbiAgICAgICAgICByZXR1cm4gd2luZG93Lk1vZGVybml6ciAmJiBNb2Rlcm5penIudG91Y2g7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBfaXNIb3ZlckFjdGl2ZSgpIHtcbiAgICAgICAgICByZXR1cm4gJHNjb3BlLnRvZ2dsaW5nTWV0aG9kID09PSAnaG92ZXInO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbnZlcnQgdGhlIHRvZ2dsaW5nIG1ldGhvZCB0byAnY2xpY2snLlxuICAgICAgICAgKiBUaGlzIGlzIHVzZWQgd2hlbiAnaG92ZXInIGlzIHNlbGVjdGVkIGJ5IHRoZSB1c2VyXG4gICAgICAgICAqIGJ1dCBhIHRvdWNoIGRldmljZSBpcyBlbmFibGVkLlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gdXNlQ2xpY2soKSB7XG4gICAgICAgICAgJHNjb3BlLiRhcHBseShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRzY29wZS50b2dnbGluZ01ldGhvZCA9ICdjbGljayc7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1dXG4gICAgfTtcbiAgfV0pO1xuXG4gIG1mYi5kaXJlY3RpdmUoJ21mYkJ1dHRvbicsIFtmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVxdWlyZTogJ15tZmJNZW51JyxcbiAgICAgIHJlc3RyaWN0OiAnRUEnLFxuICAgICAgdHJhbnNjbHVkZTogdHJ1ZSxcbiAgICAgIHJlcGxhY2U6IHRydWUsXG4gICAgICBzY29wZToge1xuICAgICAgICBpY29uOiAnQCcsXG4gICAgICAgIGxhYmVsOiAnQCdcbiAgICAgIH0sXG4gICAgICB0ZW1wbGF0ZVVybDogZnVuY3Rpb24oZWxlbSwgYXR0cnMpIHtcbiAgICAgICAgcmV0dXJuIGF0dHJzLnRlbXBsYXRlVXJsIHx8ICduZy1tZmItYnV0dG9uLWRlZmF1bHQudHBsLmh0bWwnO1xuICAgICAgfVxuICAgIH07XG4gIH1dKTtcblxufSkod2luZG93LCBhbmd1bGFyKTtcbiIsInN5bmMuZGlyZWN0aXZlKCdsZWZ0TWVudScsZnVuY3Rpb24oKXtcbiAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdBRScsXG4gICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICBkYXRhOiAnPScsXG4gICAgICAgICAgICB1c2VyOiAnPScsXG4gICAgICAgICAgICB0eXBlOiAnPSdcbiAgICAgICAgfSxcbiAgICAgICAgdGVtcGxhdGVVcmw6IFwiZGlyZWN0aXZlcy9sZWZ0TWVudS5odG1sXCJcbiAgICB9O1xufSk7XG5zeW5jLmRpcmVjdGl2ZSgnZmVlZHMnLGZ1bmN0aW9uKCl7XG4gIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiAnQUUnLFxuICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgcG9zdHM6ICc9JyxcbiAgICAgICAgICAgIHJlcGxpZXM6ICc9JyxcbiAgICAgICAgICAgIGNyZWF0ZVBvc3Q6Jz0nXG4gICAgICAgIH0sXG4gICAgICAgIHRlbXBsYXRlVXJsOiBcImRpcmVjdGl2ZXMvbWlkZGxlQ29udGVudC5odG1sXCJcbiAgICB9O1xufSk7XG5zeW5jLmRpcmVjdGl2ZSgnaGVhZGVyJyxmdW5jdGlvbigpe1xuICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0FFJyxcbiAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgIGRhdGE6ICc9JyxcbiAgICAgICAgICAgIHVzZXI6ICc9JyxcbiAgICAgICAgICAgIHR5cGU6ICc9J1xuICAgICAgICB9LFxuICAgICAgICB0ZW1wbGF0ZVVybDogXCIuL2RpcmVjdGl2ZXMvaGVhZGVyLmh0bWxcIlxuXG4gICAgfTtcbn0pO1xuXG5cbnN5bmMuZGlyZWN0aXZlKCdrZXliaW5kaW5nJywgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICBpbnZva2U6ICcmJ1xuICAgICAgICB9LFxuICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsLCBhdHRyKSB7XG4gICAgICAgICAgICBNb3VzZXRyYXAuYmluZChhdHRyLm9uLCBzY29wZS5pbnZva2UpO1xuICAgICAgICB9XG4gICAgfTtcbn0pO1xuIiwiLyogZ2xvYmFsICR3aW5kb3cgKi9cbi8qIGdsb2JhbCBMb2dnZXIgKi9cblxuTG9nZ2VyLmNvbnRyb2xsZXIoJ2xvZ2luQ29udHJvbGxlcicsWyckc2NvcGUnLCckaHR0cCcsJyRyb290U2NvcGUnLCckd2luZG93JywgZnVuY3Rpb24gKCRzY29wZSwkaHR0cCwkcm9vdFNjb3BlLCR3aW5kb3cpIHtcbiAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgJ2NyZWRlZGVudGlhbC1ub3QtZm91bmQnICAgICAgIDogJ0NyZWRlbnRpYWxzIG5vdCBmb3VuZCEnLFxuICAgICAgICAnc3VjY2VzcycgICAgICAgICAgICAgICAgICAgICAgOiAnbG9nZ2luZyBpbi4uLidcbiAgICB9O1xuICAkc2NvcGUubG9naW4gPSBmdW5jdGlvbiAoaW5mbylcbiAge1xuICAgIC8vYmVmb3JlIG5vdGlmeSB0aGF0IHdlIGFyZSBsb2dnaW5naW5cbiAgICAkKCcubG9naW4tZm9ybS1tYWluLW1lc3NhZ2UnKS5hZGRDbGFzcygnc2hvdyBzdWNjZXNzJykuaHRtbChvcHRpb25zWydzdWNjZXNzJ10pO1xuICAgICRodHRwLnBvc3QoJHJvb3RTY29wZS5lbmRQb2ludCArICcvc2Vzc2lvbnMnLGluZm8pXG4gICAgLnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgICAgIGlmKHJlc3BvbnNlID09PVwiMVwiKXtcbiAgICAgICAgICAgIFJlZGlyZWN0aW5nKCk7XG5cbiAgICAgICAgfWVsc2UgaWYocmVzcG9uc2UgPT09IFwiMFwiKXtcbiAgICAgICAgICAgICAkKCcubG9naW4tZm9ybS1tYWluLW1lc3NhZ2UnKS5hZGRDbGFzcygnc2hvdyBlcnJvcicpLmh0bWwob3B0aW9uc1snY3JlZGVkZW50aWFsLW5vdC1mb3VuZCddKTtcbiAgICAgICAgfWVsc2UgaWYocmVzcG9uc2UgPT09IFwibm90VmVyaWZpZWRcIil7XG4gICAgICAgICAgICBub3RWZXJpZmllZCgpO1xuICAgICAgICB9XG4gICAgfSlcbiAgICAuZXJyb3IoZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yOicrIGVycm9yKTtcbiAgICB9KVxuICAgIGZ1bmN0aW9uIG5vdFZlcmlmaWVkKCl7XG4gICAgICAgICAkd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL25vdFZlcmlmaWVkJztcbiAgICB9XG4gICAgZnVuY3Rpb24gUmVkaXJlY3RpbmcoKXtcbiAgICAgICAgJHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy9zeW5jJztcbiAgICB9XG4gIH1cbn1dKTtcbiIsIkxvZ2dlci5jb250cm9sbGVyKCdSZWdpc3RlckNvbnRyb2xsZXInLCBbJyRzY29wZScsJyRyb290U2NvcGUnLCckaHR0cCcsZnVuY3Rpb24gKCRzY29wZSwkcm9vdFNjb3BlLCRodHRwKSB7XG4gICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgICdwYXNzd29yZC1ub3RNYXRjaCc6ICdwYXNzd29yZCBkbyBub3QgbWF0Y2gnLFxuICAgICAgICAnU2lnblVwSW5Qcm9ncmVzcycgOiAnV2FpdCB3ZSBhcmUgc2V0dGluZyB1cCB5b3VyIGFjY291bnQuJ1xuICAgIH07XG4gICAgJHNjb3BlLnJlZ2lzdGVyPWZ1bmN0aW9uKHVzZXIpe1xuICAgICAgJCgnLnJlZ2lzdGVyLWZvcm0tbWFpbi1tZXNzYWdlJykuYWRkQ2xhc3MoJ3Nob3cgc3VjY2VzcycpLmh0bWwob3B0aW9uc1snU2lnblVwSW5Qcm9ncmVzcyddKTtcbiAgICAgICAgaWYoJCgnI3Bhc3N3b3JkJykudmFsKCkgIT0gJCgnI3Bhc3N3b3JkLWNvbmZpcm0nKS52YWwoKSl7XG4gICAgICAgICAgJCgnLnJlZ2lzdGVyLWZvcm0tbWFpbi1tZXNzYWdlJykuYWRkQ2xhc3MoJ3Nob3cgZXJyb3InKS5odG1sKG9wdGlvbnNbJ3Bhc3N3b3JkLW5vdE1hdGNoJ10pO1xuICAgICAgICAgIHNldFRpbWVvdXQobWVzc2FnZVJlbW92ZSwgMjAwMCk7XG4gICAgICAgICAgZnVuY3Rpb24gbWVzc2FnZVJlbW92ZSgpe1xuICAgICAgICAgICAgICAkKCcucmVnaXN0ZXItZm9ybS1tYWluLW1lc3NhZ2UnKS5yZW1vdmVDbGFzcygnc2hvdyBlcnJvcicpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHVzZXJuYW1lPSQoJyN1c2VybmFtZScpLnZhbCgpO1xuICAgICAgICB2YXIgZW1haWw9JCgnI2VtYWlsJykudmFsKCk7XG5cblxuICAgICAgICBqUXVlcnkucG9zdCgnL3Nlc3Npb25zJywge3VzZXJuYW1lOiB1c2VybmFtZSwgcGFzc3dvcmQ6dXNlci5wYXNzd29yZCwgZW1haWw6ZW1haWwsIG9wdGlvbjp1c2VyLm9wdGlvbiwgcGhvbmU6dXNlci5waG9uZX0sIGZ1bmN0aW9uKGRhdGEsIHRleHRTdGF0dXMsIHhocikge1xuICAgICAgICAgICAgaWYoZGF0YSA9PSAxKXtcbiAgICAgICAgICAgICAgICAgUmVkaXJlY3RpbmcoKTtcbiAgICAgICAgICAgIH1lbHNlIGlmKGRhdGEgPT0wKXtcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnd2UgYXJlIGZpcmVkIHRoaXMgY2FuIG5vdCBoYXBwZW4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkuZXJyb3IoZnVuY3Rpb24oZXJyb3IpIHtcblxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICAgICAgZnVuY3Rpb24gUmVkaXJlY3RpbmcoKXtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9ICcvY2hlY2tFbWFpbCc7XG4gICAgICAgIH1cbiAgICB9XG59XSk7XG5cbkxvZ2dlci5kaXJlY3RpdmUoJ3VuaXF1ZVVzZXJuYW1lJywgWydpc1VzZXJuYW1lQXZhaWxhYmxlJyxmdW5jdGlvbihpc1VzZXJuYW1lQXZhaWxhYmxlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgcmVxdWlyZTogJ25nTW9kZWwnLFxuICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIG5nTW9kZWwpIHtcbiAgICAgICAgICAgIG5nTW9kZWwuJGFzeW5jVmFsaWRhdG9ycy51bmlxdWVVc2VybmFtZSA9IGlzVXNlcm5hbWVBdmFpbGFibGU7XG4gICAgICAgIH1cbiAgICB9O1xufV0pO1xuTG9nZ2VyLmZhY3RvcnkoJ2lzVXNlcm5hbWVBdmFpbGFibGUnLCBbJyRxJywnJGh0dHAnLCckcm9vdFNjb3BlJyxmdW5jdGlvbigkcSwgJGh0dHAsJHJvb3RTY29wZSkge1xuICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICAnYnRuLWxvYWRpbmcnOiAnPGkgY2xhc3M9XCJmYSBmYS1zcGlubmVyIGZhLXB1bHNlXCI+PC9pPicsXG4gICAgICAgICdidG4tc3VjY2Vzcyc6ICc8aSBjbGFzcz1cImZhIGZhLWNoZWNrXCI+PC9pPicsXG4gICAgICAgICdidG4tZXJyb3InOiAnPGkgY2xhc3M9XCJmYSBmYS1yZW1vdmVcIj48L2k+JyxcbiAgICAgICAgJ21zZy1zdWNjZXNzJzogJ0FsbCBHb29kISBSZWRpcmVjdGluZy4uLicsXG4gICAgICAgICdtc2ctdXNlcm5hbWUtYXZhaWxhYmxlJzogJ2dvb2QgdXNlcm5hbWUgYXZhaWxhYmxlIScsXG4gICAgICAgICdtc2ctdXNlcm5hbWUtdGFrZW4nICAgIDogJ29vcHMgdXNlcm5hbWUgdGFrZW4nLFxuICAgICAgICAnbXNnLWVtYWlsLXRha2VuJyAgICAgICA6ICdlbWFpbCB0YWtlbicsXG4gICAgICAgICdtc2cteW91ci1waG9uZS1zdWNrJyAgIDogJ3lvdXIgcGhvbmUgaXMgbm90IHZhbGlkJyxcbiAgICAgICAgJ3VzZUFKQVgnOiB0cnVlLFxuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHVzZXJuYW1lKSB7XG5cbiAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuICAgICAgICAkaHR0cC5nZXQoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL3VzZXJzP3VzZXJuYW1lPScgKyB1c2VybmFtZSArICcmYWNjZXNzX3Rva2VuPUJjN0RXUzdLS1JMdHhtZGRVWkkxVDFsWnUySjFZaFI4T0xYR1dOWm4nKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgaWYoZGF0YT09J2F2YWlsYWJsZScpe1xuICAgICAgICAgICAgICAgICQoJy5yZWdpc3Rlci1mb3JtLW1haW4tbWVzc2FnZScpLmFkZENsYXNzKCdzaG93IHN1Y2Nlc3MnKS5odG1sKG9wdGlvbnNbJ21zZy11c2VybmFtZS1hdmFpbGFibGUnXSk7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChtZXNzYWdlUmVtb3ZlLCAyMDAwKTtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBtZXNzYWdlUmVtb3ZlKCl7XG4gICAgICAgICAgICAgICAgICAgICQoJy5yZWdpc3Rlci1mb3JtLW1haW4tbWVzc2FnZScpLnJlbW92ZUNsYXNzKCdzaG93IHN1Y2Nlc3MnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9ZWxzZSBpZihkYXRhPT0ndGFrZW4nKXtcbiAgICAgICAgICAgICAgICAkKCcucmVnaXN0ZXItZm9ybS1tYWluLW1lc3NhZ2UnKS5hZGRDbGFzcygnc2hvdyBlcnJvcicpLmh0bWwob3B0aW9uc1snbXNnLXVzZXJuYW1lLXRha2VuJ10pO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQodXNlcm5hbWVUYWtlbiwgMjAwMCk7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gdXNlcm5hbWVUYWtlbigpe1xuICAgICAgICAgICAgICAgICAgICAkKCcucmVnaXN0ZXItZm9ybS1tYWluLW1lc3NhZ2UnKS5yZW1vdmVDbGFzcygnc2hvdyBlcnJvcicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdCgpO1xuICAgICAgICB9KS5lcnJvcihmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfVxufV0pO1xuTG9nZ2VyLmRpcmVjdGl2ZSgndW5pcXVlRW1haWwnLCBbJ2lzRW1haWxBdmFpbGFibGUnLGZ1bmN0aW9uKGlzRW1haWxBdmFpbGFibGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgICByZXF1aXJlOiAnbmdNb2RlbCcsXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgbmdNb2RlbCkge1xuICAgICAgICAgICAgbmdNb2RlbC4kYXN5bmNWYWxpZGF0b3JzLnVuaXF1ZUVtYWlsID0gaXNFbWFpbEF2YWlsYWJsZTtcbiAgICAgICAgfVxuICAgIH07XG59XSk7XG5Mb2dnZXIuZmFjdG9yeSgnaXNFbWFpbEF2YWlsYWJsZScsIFsnJHEnLCckaHR0cCcsJyRyb290U2NvcGUnLGZ1bmN0aW9uICgkcSwgJGh0dHAsICRyb290U2NvcGUpIHtcbiAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgJ2J0bi1sb2FkaW5nJzogJzxpIGNsYXNzPVwiZmEgZmEtc3Bpbm5lciBmYS1wdWxzZVwiPjwvaT4nLFxuICAgICAgICAnYnRuLXN1Y2Nlc3MnOiAnPGkgY2xhc3M9XCJmYSBmYS1jaGVja1wiPjwvaT4nLFxuICAgICAgICAnYnRuLWVycm9yJzogJzxpIGNsYXNzPVwiZmEgZmEtcmVtb3ZlXCI+PC9pPicsXG4gICAgICAgICdtc2ctc3VjY2Vzcyc6ICdBbGwgR29vZCEgUmVkaXJlY3RpbmcuLi4nLFxuICAgICAgICAnbXNnLXVzZXJuYW1lLWF2YWlsYWJsZSc6ICdnb29kIHVzZXJuYW1lIGF2YWlsYWJsZSEnLFxuICAgICAgICAnbXNnLXVzZXJuYW1lLXRha2VuJyAgICA6ICdvb3BzIHVzZXJuYW1lIHRha2VuJyxcbiAgICAgICAgJ21zZy1lbWFpbC10YWtlbicgICAgICAgOiAnZW1haWwgdGFrZW4nLFxuICAgICAgICAnbXNnLWVtYWlsLWF2YWlsYWJsZScgICA6ICdlbWFpbCBhdmFpbGFibGUnLFxuICAgICAgICAnbXNnLXlvdXItcGhvbmUtc3VjaycgICA6ICd5b3VyIHBob25lIGlzIG5vdCB2YWxpZCcsXG4gICAgICAgICd1c2VBSkFYJzogdHJ1ZSxcbiAgICB9O1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uKGVtYWlsKSB7XG4gICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgICRodHRwLmdldCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvdXNlcnM/ZW1haWw9JyArIGVtYWlsICsgJyZhY2Nlc3NfdG9rZW49QmM3RFdTN0tLUkx0eG1kZFVaSTFUMWxadTJKMVloUjhPTFhHV05abicpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSl7XG5cbiAgICAgICAgICAgIGlmKGRhdGE9PSdlbWFpbC1hdmFpbGFibGUnKXtcbiAgICAgICAgICAgICAgICAkKCcucmVnaXN0ZXItZm9ybS1tYWluLW1lc3NhZ2UnKS5hZGRDbGFzcygnc2hvdyBzdWNjZXNzJykuaHRtbChvcHRpb25zWydtc2ctZW1haWwtYXZhaWxhYmxlJ10pO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQobWVzc2FnZVJlbW92ZSwgMjAwMCk7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gbWVzc2FnZVJlbW92ZSgpe1xuICAgICAgICAgICAgICAgICAgICAkKCcucmVnaXN0ZXItZm9ybS1tYWluLW1lc3NhZ2UnKS5yZW1vdmVDbGFzcygnc2hvdyBzdWNjZXNzJyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9ZWxzZSBpZihkYXRhPT0nZW1haWwtdGFrZW4nKXtcbiAgICAgICAgICAgICAgICAkKCcucmVnaXN0ZXItZm9ybS1tYWluLW1lc3NhZ2UnKS5hZGRDbGFzcygnc2hvdyBlcnJvcicpLmh0bWwob3B0aW9uc1snbXNnLWVtYWlsLXRha2VuJ10pO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQobWVzc2FnZUVtYWlsVGFrZW4sIDIwMDApO1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG1lc3NhZ2VFbWFpbFRha2VuKCl7XG4gICAgICAgICAgICAgICAgICAgICQoJy5yZWdpc3Rlci1mb3JtLW1haW4tbWVzc2FnZScpLnJlbW92ZUNsYXNzKCdzaG93IGVycm9yJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdCgpO1xuICAgICAgICAgfSkuZXJyb3IoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgICAgICB9KTtcbiAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgIH07XG59XSk7XG4iLCJzeW5jLnNlcnZpY2UoJ0ZldGNoZXInLFsnJGh0dHAnLCckcScsJyRyb290U2NvcGUnLGZ1bmN0aW9uIEZpbGVzICgkaHR0cCwkcSwkcm9vdFNjb3BlKSB7XG4gICAgdGhpcy5mZXRjaCA9IGZ1bmN0aW9uKG9iamVjdCl7XG4gICAgICB2YXIgZGlmZmVyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgLy9kb3duIGVuZHBvaW50IHJldHVybiBhbGwgZmlsZXMgSSBvd25cbiAgICAgICRodHRwLmdldCgkcm9vdFNjb3BlLmVuZFBvaW50ICsnL2FwaS92MS8/K3F1ZXJ5PScrJ3F1ZXJ5K0ZldGNoVXNlcnMnK29iamVjdClcbiAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgICBkaWZmZXJlZC5yZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgIH0pXG4gICAgICAuZXJyb3IoZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgICBkaWZmZXJlZC5yZWplY3QoZXJyb3IpO1xuICAgICAgfSlcbiAgICAgIHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuICAgIH07XG59XSk7XG4iLCJzeW5jLnNlcnZpY2UoJ0ZpbGVzJywgWyckaHR0cCcsJyRxJywnJHJvb3RTY29wZScsZnVuY3Rpb24gRmlsZXMgKCRodHRwLCRxLCRyb290U2NvcGUpIHtcbiAgICB0aGlzLmdldEdyb3VwRmlsZXMgPWZ1bmN0aW9uKGdyb3VwSWQpIHtcbiAgICAgICAgdmFyIGRpZmZlcmVkID0gJHEuZGVmZXIoKTtcbiAgICAgICAgLy9kb3duIGVuZHBvaW50IHJldHVybiBhbGwgZmlsZXMgSSBvd25cbiAgICAgICAgJGh0dHAuZ2V0KCRyb290U2NvcGUuZW5kUG9pbnQgKycvYXBpL3YxL2dyb3Vwcy8nK2dyb3VwSWQrJy9ncm91cGZpbGVzJylcbiAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgICAgZGlmZmVyZWQucmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5lcnJvcihmdW5jdGlvbihlcnJvcikge1xuICAgICAgICAgICAgZGlmZmVyZWQucmVqZWN0KGVycm9yKTtcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGRpZmZlcmVkLnByb21pc2U7XG4gICAgfTtcbiAgICBcblxuICAgIHRoaXMuc2luZ2xlID0gZnVuY3Rpb24oZmlsZSl7XG4gICAgICB2YXIgcHJvbWlzZSA9ICRxLmRlZmVyKCk7XG4gICAgICAkaHR0cC5nZXQoJHJvb3RTY29wZS5lbmRQb2ludCsgJy9wcmV2aWV3LycrIGZpbGUpXG4gICAgICAuc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgIHByb21pc2UucmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICB9KVxuICAgICAgLmVycm9yKGZ1bmN0aW9uKGVycil7XG4gICAgICAgIHByb21pc2UucmVqZWN0KGVycik7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBwcm9taXNlLnByb21pc2U7XG4gICAgfTtcbiAgICB0aGlzLmdldEJveEZpbGVzID0gZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIGdyb3VwSWQgPSAxOy8vYnkgZGVmYXVsdCB0aGlzIGNhbiBiZSBhbnkgbnVtYmVyXG4gICAgICAgIHZhciBkaWZmZXJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgIC8vdGhlIGlkZWEgaXMgdG8gZ2V0IGEgZmlsZSBlaXRoZXIgZnJvbSBncm91cHMgb3IgaW5kaXZpZHVhbCBhY2NvdW50IGdyb3VwIGlzIG9wdGlvbmFsXG4gICAgICAgICRodHRwLmdldCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvZmlsZXMvJytncm91cElkKycvYm94ZmlsZXMnKVxuICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgICAgZGlmZmVyZWQucmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5lcnJvcihmdW5jdGlvbihlcnIpe1xuICAgICAgICAgIGRpZmZlcmVkLnJlamVjdChlcnIpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGRpZmZlcmVkLnByb21pc2U7XG4gICAgfTtcbiAgICB0aGlzLmdldE1pbWVUeXBlID0gZnVuY3Rpb24oZmlsZV9uYW1lKXtcbiAgICAgIHZhciBwcm9taXNlID0gJHEuZGVmZXIoKTtcbiAgICAgICRodHRwLmdldCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvZmlsZXMvbWltZVR5cGUvJysgZmlsZV9uYW1lKVxuICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgIHByb21pc2UucmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICB9KVxuICAgICAgLmVycm9yKGZ1bmN0aW9uKGVycil7XG4gICAgICAgICAgcHJvbWlzZS5yZWplY3QoZXJyKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHByb21pc2UucHJvbWlzZTtcbiAgICB9O1xuICAgIHRoaXMuZG93bmxvYWRGaWxlID0gZnVuY3Rpb24oZmlsZV9uYW1lKXtcblxuICAgICAgdmFyIHByb21pc2UgPSAkcS5kZWZlcigpO1xuICAgICAgLy9oYXJkIGNvZGVkIGEgdXNlciBTdHJpbVVwISBuZWVkIHRvIGluamVjdCBoaW0gZHlhbWljYWxseVxuICAgICAgJGh0dHAuZ2V0KCRyb290U2NvcGUuZW5kUG9pbnQrICcvYXBpL3YxL2ZpbGVzL2Rvd25sb2FkLycrZmlsZV9uYW1lKycvb2YvJysgJ1N0cmltVXAnKVxuICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICBwcm9taXNlLnJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgfSlcbiAgICAgIC5lcnJvcihmdW5jdGlvbihlcnIpe1xuICAgICAgICBwcm9taXNlLnJlamVjdChlcnIpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gcHJvbWlzZS5wcm9taXNlO1xuICAgIH07XG4gICAgcmV0dXJuIHRoaXM7XG59XSk7XG4iLCJzeW5jLnNlcnZpY2UoJ1Blb3BsZScsIFsnJHEnLCckaHR0cCcsJyRyb290U2NvcGUnLGZ1bmN0aW9uICgkcSwgJGh0dHAsICRyb290U2NvcGUpIHtcblx0dGhpcy5nZXQgID0gZnVuY3Rpb24gKCl7XG5cdFx0dmFyIGRpZmZlcmVkID0gJHEuZGVmZXIoKTtcblx0XHQkaHR0cC5nZXQoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL3N1Z2dlc3Rpb25zJylcblx0XHQuc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSl7XG5cdFx0XHRkaWZmZXJlZC5yZXNvbHZlKHJlc3BvbnNlKTtcblx0XHR9KVxuXHRcdC5lcnJvcihmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0ZGlmZmVyZWQucmVqZWN0KGVycm9yKTtcblx0XHR9KVxuXHRcdHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuXHR9XG5cdHRoaXMuYWxsSWZvbGxvdyA9IGZ1bmN0aW9uICgpIHtcblx0XHR2YXIgZGlmZmVyZWQgPSAkcS5kZWZlcigpO1xuXHRcdCRodHRwLmdldCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvbWUvZm9sbG93aW5ncycpXG5cdFx0LnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcG9uc2Upe1xuXHRcdFx0ZGlmZmVyZWQucmVzb2x2ZShyZXNwb25zZSk7XG5cdFx0fSlcblx0XHQuZXJyb3IoZnVuY3Rpb24oZXJyKXtcblx0XHRcdGRpZmZlcmVkLnJlamVjdChlcnIpO1xuXHRcdH0pXG5cdFx0cmV0dXJuIGRpZmZlcmVkLnByb21pc2U7XG5cdH1cblx0dGhpcy51bkZvbGxvdyA9IGZ1bmN0aW9uKGlkKXtcblx0XHR2YXIgZGlmZmVyZWQgPSAkcS5kZWZlcigpO1xuXHRcdCRodHRwLmRlbGV0ZSgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvbWUvZm9sbG93aW5nLycgK2lkKVxuXHRcdC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblx0XHRcdGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuXHRcdH0pXG5cdFx0LmVycm9yKGZ1bmN0aW9uKGVycil7XG5cdFx0XHRkaWZmZXJlZC5yZWplY3QoZXJyKTtcblx0XHR9KVxuXHRcdHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuXHR9XG5cdHRoaXMuZm9sbG93ID0gZnVuY3Rpb24ocGFyYW0pe1xuXHRcdHZhciBkaWZmZXJlZCA9ICRxLmRlZmVyKCk7XG5cdFx0JGh0dHAucHV0KCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS9tZS9mb2xsb3dpbmdzJywgcGFyYW0pXG5cdFx0LnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcG9uc2Upe1xuXHRcdFx0ZGlmZmVyZWQucmVzb2x2ZShyZXNwb25zZSk7XG5cdFx0fSlcblx0XHQuZXJyb3IoZnVuY3Rpb24oZXJyb3Ipe1xuXHRcdFx0ZGlmZmVyZWQucmVqZWN0KGVycm9yKTtcblx0XHR9KVxuXHRcdHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuXHR9XG5cdHJldHVybiB0aGlzO1xufV0pO1xuIiwic3luYy5zZXJ2aWNlKCdTaGFyZScsWyckbG9nJywnJGh0dHAnLCckcScsJyRyb290U2NvcGUnLCBmdW5jdGlvbiAoJGxvZywkaHR0cCwkcSwkcm9vdFNjb3BlKSB7XG5cdHRoaXMuc2hhcmUgPSBmdW5jdGlvbihzaGFyZWJsZU9iail7XG5cdFx0dmFyIGRpZmZlcmVkID0gJHEuZGVmZXIoKTtcbiAgICAgICAgJGh0dHAucG9zdCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvc2hhcmUnLHNoYXJlYmxlT2JqKVxuICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgICAgICBkaWZmZXJlZC5yZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmVycm9yKGZ1bmN0aW9uKGVycil7XG4gICAgICAgICAgICBkaWZmZXJlZC5yZWplY3QoZXJyKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuXHR9O1xuXHR0aGlzLmdldFVzZXIgPSBmdW5jdGlvbih1c2VyKXtcblxuXHRcdHZhciBkaWZmZXJlZCA9ICRxLmRlZmVyKCk7XG5cdFx0JGh0dHAuZ2V0KCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS9tZS91c2Vycy8nKyB1c2VyKVxuXHRcdC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblx0XHRcdGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuXHRcdH0pXG5cdFx0LmVycm9yKGZ1bmN0aW9uKGVycil7XG5cdFx0XHRkaWZmZXJlZC5yZWplY3QoZXJyKTtcblx0XHR9KTtcblx0XHRyZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcblx0fTtcblx0dGhpcy5maWxlTWltZSA9IGZ1bmN0aW9uKGZpbGUpe1xuXHRcdHZhciBkaWZmZXJlZCA9ICRxLmRlZmVyKCk7XG5cdFx0JGh0dHAuZ2V0KCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS9taW1lVHlwZS8nKyBmaWxlKVxuXHRcdC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblx0XHRcdGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuXHRcdH0pXG5cdFx0LmVycm9yKGZ1bmN0aW9uKGVycil7XG5cdFx0XHRkaWZmZXJlZC5yZWplY3QoZXJyKTtcblx0XHR9KTtcblx0XHRyZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcblx0fTtcbiAgICByZXR1cm4gdGhpcztcbn1dKTsiLCJzeW5jLnNlcnZpY2UoJ1VzZXInLCBbJyRodHRwJywnJHEnLCckcm9vdFNjb3BlJyxmdW5jdGlvbiBGaWxlcyAoJGh0dHAsJHEsJHJvb3RTY29wZSkge1xuXHR0aGlzLmluZm8gPSBmdW5jdGlvbigpe1xuXHRcdHZhciBwcm9taXNlID0gJHEuZGVmZXIoKTtcblx0XHQkaHR0cC5nZXQoJHJvb3RTY29wZS5lbmRQb2ludCArXCIvYXBpL3YxL3VzZXJzL2luZm9cIilcblx0XHQuc3VjY2VzcyhmdW5jdGlvbihyZXMpe1xuXHRcdFx0cHJvbWlzZS5yZXNvbHZlKHJlcyk7XG5cdFx0fSlcblx0XHQuZXJyb3IoZnVuY3Rpb24oKSB7XG5cdFx0XHRwcm9taXNlLnJlamVjdCgpO1xuXHRcdH0pO1xuXHRcdHJldHVybiBwcm9taXNlLnByb21pc2U7XG5cdH07XG5cdHRoaXMuZ3JvdXBzID0gZnVuY3Rpb24odXNlcil7XG4gICAgICB2YXIgZGlmZmVyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgJGh0dHAuZ2V0KCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS9tZS9ncm91cHMnKVxuICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICBkaWZmZXJlZC5yZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgIH0pXG4gICAgICAuZXJyb3IoZnVuY3Rpb24oZXJyKXtcbiAgICAgICAgZGlmZmVyZWQucmVqZWN0KGVycik7XG4gICAgICB9KVxuICAgICAgcmV0dXJuIGRpZmZlcmVkLnByb21pc2U7XG4gICAgfVxuICAgIFxuXHRyZXR1cm4gdGhpcztcbn1dKSIsIi8qIGdsb2JhbCBzeW5jICovXG5zeW5jLnNlcnZpY2UoJ05vdGlmaWNhdGlvbicsIFsnJGh0dHAnLCAnJHEnLCAnJHJvb3RTY29wZScsIGZ1bmN0aW9uIE5vdGlmaWNhdGlvbigkaHR0cCwgJHEsICRyb290U2NvcGUpIHtcbiAgICB0aGlzLmdldE5vdGlmaWNhdGlvbiA9IGZ1bmN0aW9uICh1c2VyX2lkKSB7XG4gICAgICAgIHZhciBkaWZmZXJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgICRodHRwLmdldCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvbm90aWZpY2F0aW9ucycsIHtjYWNoZTogZmFsc2V9KVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgZGlmZmVyZWQucmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGRpZmZlcmVkLnJlamVjdChlcnJvcik7XG4gICAgICAgICAgICB9KVxuICAgICAgICByZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcbiAgICB9XG4gICAgdGhpcy5jcmVhdGVOb3RpZmljYXRpb24gPSBmdW5jdGlvbiAoTm90aWZpY2F0aW9uKSB7XG4gICAgICAgIHZhciBkaWZmZXJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgICRodHRwLnBvc3QoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL25vdGlmaWNhdGlvbnMnLCBOb3RpZmljYXRpb24pXG4gICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICBkaWZmZXJlZC5yZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgZGlmZmVyZWQucmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcbiAgICB9XG4gICAgdGhpcy5kZWxldGVOb3RpZmljYXRpb24gPSBmdW5jdGlvbiAobm90aWZpY2F0aW9uKSB7XG4gICAgICAgIHZhciBkaWZmZXJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgICRodHRwLmRlbGV0ZSgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvbm90aWZpY2F0aW9ucy8nICsgbm90aWZpY2F0aW9uKVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgZGlmZmVyZWQucmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGRpZmZlcmVkLnJlamVjdChlcnJvcik7XG4gICAgICAgICAgICB9KVxuICAgICAgICByZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbn1dKTtcblxuc3luYy5jb250cm9sbGVyKCdub3RpZmljYXRpb25Db250cm9sbGVyJywgWyckc2NvcGUnLCdOb3RpZmljYXRpb24nLCckbG9nJywgZnVuY3Rpb24gKCRzY29wZSxOb3RpZmljYXRpb24sJGxvZykge1xuICAgICRzY29wZS5pbml0ID0gZnVuY3Rpb24oKXtcbiAgICAgICAgJHNjb3BlLmdldE5vdGlmaWNhdGlvbigpO1xuICAgIH1cbiAgICAkc2NvcGUuY2xlYXJOb3RpZmljYXRpb24gPSBmdW5jdGlvbihub3RpZmljYXRpb24pe1xuXG5cbiAgICAgIE5vdGlmaWNhdGlvbi5jbGVhck5vdGlmaWNhdGlvbihub3RpZmljYXRpb24pXG4gICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgIC8vbG9hZCByZW1haW5pbmcgbm90aWZpY2F0aW9uXG4gICAgICAgICRzY29wZS5nZXROb3RpZmljYXRpb24oKTtcbiAgICAgIH0sZnVuY3Rpb24oZXJyKXtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICAkc2NvcGUuZ2V0Tm90aWZpY2F0aW9uID0gZnVuY3Rpb24oKXtcbiAgICAgICAgTm90aWZpY2F0aW9uLmdldE5vdGlmaWNhdGlvbigpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7XG4gICAgICAgICAgICAvLyAkbG9nLmluZm8ocmVzdWx0KTtcbiAgICAgICAgICAgICRzY29wZS5ub3RpZmljYXRpb25zID0gcmVzdWx0O1xuICAgICAgICAgICAgXG4gICAgICAgIH0sZnVuY3Rpb24oZXJyb3Ipe1xuICAgICAgICAgICAgLy8gJGxvZy5pbmZvKGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgICRzY29wZS5pbml0KCk7XG59XSk7XG5zeW5jLmRpcmVjdGl2ZSgnbm90aWZ5JyxbZnVuY3Rpb24oKXtcbiAgcmV0dXJue1xuICAgIHJlc3RyaWN0OidBRScsXG4gICAgc2NvcGU6e1xuXG4gICAgfSxcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWwsIGlBdHRycyl7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgIHZhciB0aXRsZT0nVGhpcyB3aWxsIGJlIHRpdGxlJztcbiAgICAgICAgICAgICAgdmFyIGRlc2M9J01vc3QgcG9wdWxhciBhcnRpY2xlLic7XG4gICAgICAgICAgICAgIHZhciB1cmw9J3N5bmMuY29tOjgwMDAnO1xuICAgICAgICAgICAgICBub3RpZnlCcm93c2VyKHRpdGxlLGRlc2MsdXJsKTtcbiAgICAgICAgICB9LCAyMDAwKTtcbiAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCl7XG4gICAgICAgICAgICAgICAgaWYgKE5vdGlmaWNhdGlvbi5wZXJtaXNzaW9uICE9PSBcImdyYW50ZWRcIil7XG4gICAgICAgICAgICAgICAgICBOb3RpZmljYXRpb24ucmVxdWVzdFBlcm1pc3Npb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBmdW5jdGlvbiBub3RpZnlCcm93c2VyKHRpdGxlLGRlc2MsdXJsKVxuICAgICAge1xuICAgICAgICBpZiAoIU5vdGlmaWNhdGlvbikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0Rlc2t0b3Agbm90aWZpY2F0aW9ucyBub3QgYXZhaWxhYmxlIGluIHlvdXIgYnJvd3Nlci4uJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoTm90aWZpY2F0aW9uLnBlcm1pc3Npb24gIT09IFwiZ3JhbnRlZFwiKXtcbiAgICAgICAgICBOb3RpZmljYXRpb24ucmVxdWVzdFBlcm1pc3Npb24oKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICB2YXIgbm90aWZpY2F0aW9uID0gbmV3IE5vdGlmaWNhdGlvbih0aXRsZSwge1xuICAgICAgICAgICAgaWNvbjonaHR0cHM6Ly9saDMuZ29vZ2xldXNlcmNvbnRlbnQuY29tLy1hQ0ZpSzRiYVhYNC9Wam1HSm9qc1FfSS9BQUFBQUFBQU5KZy9oLXNMVlgxTTV6QS9zNDgtSWM0Mi9lZ2dzbWFsbC5wbmcnLFxuICAgICAgICAgICAgYm9keTogZGVzYyxcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIFJlbW92ZSB0aGUgbm90aWZpY2F0aW9uIGZyb20gTm90aWZpY2F0aW9uIENlbnRlciB3aGVuIGNsaWNrZWQuXG4gICAgICAgIG5vdGlmaWNhdGlvbi5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgd2luZG93Lm9wZW4odXJsKTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gQ2FsbGJhY2sgZnVuY3Rpb24gd2hlbiB0aGUgbm90aWZpY2F0aW9uIGlzIGNsb3NlZC5cbiAgICAgICAgbm90aWZpY2F0aW9uLm9uY2xvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ05vdGlmaWNhdGlvbiBjbG9zZWQnKTtcbiAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufV0pXG4iLCJzeW5jLmZhY3RvcnkoJ3VzZXJJbnRlcmFjdGlvbk5vdGlmaWNhdGlvbicsIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MobWVzc2FnZSwgXCJTdWNjZXNzXCIpO1xuICAgICAgICB9LFxuICAgICAgICB3YXJuOiBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgdG9hc3RyLndhcm5pbmcobWVzc2FnZSwgXCJIZXlcIik7XG4gICAgICAgIH0sXG4gICAgICAgIGluZm86IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgICAgICB0b2FzdHIuaW5mbyhtZXNzYWdlLCBcIkZZSVwiKTtcbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgICAgICB0b2FzdHIuZXJyb3IobWVzc2FnZSwgXCJPaCBOb1wiKTtcbiAgICAgICAgfVxuICAgIH07XG59KTtcbiIsInN5bmMuZmFjdG9yeSgndXNlckludGVyYWN0aW9uTm90aWZpY2F0aW9uJywgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgICAgICB0b2FzdHIuc3VjY2VzcyhtZXNzYWdlLCBcIlN1Y2Nlc3NcIik7XG4gICAgICAgIH0sXG4gICAgICAgIHdhcm46IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgICAgICB0b2FzdHIud2FybmluZyhtZXNzYWdlLCBcIkhleVwiKTtcbiAgICAgICAgfSxcbiAgICAgICAgaW5mbzogZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIHRvYXN0ci5pbmZvKG1lc3NhZ2UsIFwiRllJXCIpO1xuICAgICAgICB9LFxuICAgICAgICBlcnJvcjogZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIHRvYXN0ci5lcnJvcihtZXNzYWdlLCBcIk9oIE5vXCIpO1xuICAgICAgICB9XG4gICAgfTtcbn0pO1xuIiwiXG5zeW5jLmNvbnRyb2xsZXIoJ3VwbG9hZERpYWxvZ0N0cmwnLCBbJyRzY29wZScsJyR1aWJNb2RhbCcsJyRtZERpYWxvZycsJyRtZE1lZGlhJywgZnVuY3Rpb24gKCRzY29wZSwkdWliTW9kYWwsICRtZERpYWxvZywgJG1kTWVkaWEpIHtcblxuXHRcdFx0XHQvL2RlY2xhcmUgZ2xvYmFsIGZ1bmN0aW9uIGZvciBzaG9ydGN1dFxuXHRcdFx0XHQkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0JG1kRGlhbG9nLmhpZGUoKTtcblx0XHRcdFx0fTtcblx0XHQgICAgJHNjb3BlLmN1c3RvbUZ1bGxzY3JlZW4gPSAkbWRNZWRpYSgneHMnKSB8fCAkbWRNZWRpYSgnc20nKTtcblx0XHQgICAgJHNjb3BlLnVwbG9hZCA9IGZ1bmN0aW9uKGV2KSB7XG5cdFx0ICAgICAgJG1kRGlhbG9nLnNob3coe1xuXHRcdFx0XHRcdFx0cGFyZW50OiBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQuYm9keSksXG5cdFx0ICAgICAgICBjb250cm9sbGVyOiBEaWFsb2dDb250cm9sbGVyLFxuXHRcdCAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy91cGxvYWQudHBsLmh0bWwnLFxuXHRcdCAgICAgICAgcGFyZW50OiBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQuYm9keSksXG5cdFx0ICAgICAgICB0YXJnZXRFdmVudDogZXYsXG5cdFx0ICAgICAgICBjbGlja091dHNpZGVUb0Nsb3NlOmZhbHNlXG5cdFx0ICAgICAgfSlcblx0XHQgICAgICAudGhlbihmdW5jdGlvbihhbnN3ZXIpIHtcblx0XHQgICAgICAgICAgICAkc2NvcGUuc3RhdHVzID0gJ1lvdSBzYWlkIHRoZSBpbmZvcm1hdGlvbiB3YXMgXCInICsgYW5zd2VyICsgJ1wiLic7XG5cdFx0ICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuXHRcdCAgICAgICAgICAgICRzY29wZS5zdGF0dXMgPSAnWW91IGNhbmNlbGxlZCB0aGUgZGlhbG9nLic7XG5cdFx0ICAgICAgICAgIH0pO1xuXHRcdCAgICB9O1xuXHRcdFx0XHRmdW5jdGlvbiBEaWFsb2dDb250cm9sbGVyKCRzY29wZSwgJG1kRGlhbG9nKSB7XG5cdFx0XHRcdCAgJHNjb3BlLmhpZGUgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0ICAgICRtZERpYWxvZy5oaWRlKCk7XG5cdFx0XHRcdCAgfTtcblx0XHRcdFx0ICAkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCAgICAkbWREaWFsb2cuY2FuY2VsKCk7XG5cdFx0XHRcdCAgfTtcblx0XHRcdFx0ICAkc2NvcGUuYW5zd2VyID0gZnVuY3Rpb24oYW5zd2VyKSB7XG5cdFx0XHRcdCAgICAkbWREaWFsb2cuaGlkZShhbnN3ZXIpO1xuXHRcdFx0XHQgIH07XG5cdFx0XHRcdH1cbn1dKTtcbnN5bmMuY29udHJvbGxlcignc2hhcmVDb250cm9sbGVyJywgWyckc2NvcGUnLCckdWliTW9kYWwnLCckbWREaWFsb2cnLCckbWRNZWRpYScsJ3VybFNob3J0ZW5lcicsJ1NoYXJlJywnVXNlcicsIGZ1bmN0aW9uICgkc2NvcGUsJHVpYk1vZGFsLCAkbWREaWFsb2csICRtZE1lZGlhLHVybFNob3J0ZW5lcixTaGFyZSxVc2VyKSB7XG5cblx0Ly9kZWNsYXJlIGdsb2JhbCBmdW5jdGlvbiBmb3Igc2hvcnRjdXRcblx0JHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uKCkge1xuXHRcdCRtZERpYWxvZy5oaWRlKCk7XG5cdH07XG5cdCRzY29wZS5jdXN0b21GdWxsc2NyZWVuID0gJG1kTWVkaWEoJ3hzJykgfHwgJG1kTWVkaWEoJ3NtJyk7XG5cdCRzY29wZS5zaGFyZSA9IGZ1bmN0aW9uKGV2LGZpbGVOYW1lKSB7XG5cblx0XHQkbWREaWFsb2cuc2hvdyh7XG5cdFx0XHRwYXJlbnQ6IGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5ib2R5KSxcblx0XHRcdGNvbnRyb2xsZXI6IERpYWxvZ0NvbnRyb2xsZXIsXG5cdFx0XHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL3NoYXJlLnRwbC5odG1sJyxcblx0XHRcdHBhcmVudDogYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LmJvZHkpLFxuXHRcdFx0dGFyZ2V0RXZlbnQ6IGV2LFxuXHRcdFx0Y2xpY2tPdXRzaWRlVG9DbG9zZTpmYWxzZVxuXHRcdH0pXG5cdFx0LnRoZW4oZnVuY3Rpb24oYW5zd2VyKSB7XG5cdFx0XHRcdFx0JHNjb3BlLnN0YXR1cyA9ICdZb3Ugc2FpZCB0aGUgaW5mb3JtYXRpb24gd2FzIFwiJyArIGFuc3dlciArICdcIi4nO1xuXHRcdFx0XHR9LCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHQkc2NvcGUuc3RhdHVzID0gJ1lvdSBjYW5jZWxsZWQgdGhlIGRpYWxvZy4nO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0ZnVuY3Rpb24gRGlhbG9nQ29udHJvbGxlcigkc2NvcGUsICRtZERpYWxvZykge1xuXHRcdFx0XHRcdC8vIGNvbnNvbGUubG9nKCdzaGFyZWRGaWxlJysgZmlsZU5hbWUpO1xuXHRcdFx0XHRcdCRzY29wZS5nZXRGaWxlID0gZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRcdHJldHVybiAkc2NvcGUuZmlsZT11cmxTaG9ydGVuZXIubWFrZVNob3J0KGZpbGVOYW1lKTtcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdCRzY29wZS5oaWRlID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHQkbWREaWFsb2cuaGlkZSgpO1xuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0JHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0JG1kRGlhbG9nLmNhbmNlbCgpO1xuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0JHNjb3BlLmFuc3dlciA9IGZ1bmN0aW9uKGFuc3dlcikge1xuXHRcdFx0XHRcdFx0JG1kRGlhbG9nLmhpZGUoYW5zd2VyKTtcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9XG5cblx0fTtcblxuXG5cblx0JHNjb3BlLnNoYXJlRmlsZSA9IGZ1bmN0aW9uKHZtKXtcblxuXHRcdHZhciBlbWFpbHM9dm0uZW1haWxzO1xuXHRcdHZhciBlbWFpbF9hcnJheSA9IGVtYWlscy5zcGxpdCgnLCcpO1xuXHRcdHZhciBpO1xuXHRcdGZvciAoIGk9MDsgaSA8IGVtYWlsX2FycmF5Lmxlbmd0aDsgaSsrICkge1xuXHRcdFx0Ly92YWxpZGF0ZSBlYWNoIGVtYWlsIHRvIHNoYXJlIHdpdGhcblx0XHRcdFNoYXJlLnNoYXJlKHZtKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24ocmVzKXtcblx0XHRcdFx0Y29uc29sZS5sb2cocmVzKTtcblx0XHRcdH0pLmNhdGNoKCk7XG5cdFx0XHQvLyBjb25zb2xlLmxvZyhlbWFpbF9hcnJheVtpXSk7XG5cblx0XHR9XG5cdH1cblxufV0pO1xuIiwiLypcbiBhbmd1bGFyLWZpbGUtdXBsb2FkIHYyLjIuMFxuIGh0dHBzOi8vZ2l0aHViLmNvbS9uZXJ2Z2gvYW5ndWxhci1maWxlLXVwbG9hZFxuKi9cblxuKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiYW5ndWxhci1maWxlLXVwbG9hZFwiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJhbmd1bGFyLWZpbGUtdXBsb2FkXCJdID0gZmFjdG9yeSgpO1xufSkodGhpcywgZnVuY3Rpb24oKSB7XG5yZXR1cm4gLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge30sXG4vKioqKioqLyBcdFx0XHRpZDogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblxuXHR2YXIgX2ludGVyb3BSZXF1aXJlID0gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqW1wiZGVmYXVsdFwiXSA6IG9iajsgfTtcblxuXHR2YXIgQ09ORklHID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oMSkpO1xuXG5cdHZhciBvcHRpb25zID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oMikpO1xuXG5cdHZhciBzZXJ2aWNlRmlsZVVwbG9hZGVyID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oMykpO1xuXG5cdHZhciBzZXJ2aWNlRmlsZUxpa2VPYmplY3QgPSBfaW50ZXJvcFJlcXVpcmUoX193ZWJwYWNrX3JlcXVpcmVfXyg0KSk7XG5cblx0dmFyIHNlcnZpY2VGaWxlSXRlbSA9IF9pbnRlcm9wUmVxdWlyZShfX3dlYnBhY2tfcmVxdWlyZV9fKDUpKTtcblxuXHR2YXIgc2VydmljZUZpbGVEaXJlY3RpdmUgPSBfaW50ZXJvcFJlcXVpcmUoX193ZWJwYWNrX3JlcXVpcmVfXyg2KSk7XG5cblx0dmFyIHNlcnZpY2VGaWxlU2VsZWN0ID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oNykpO1xuXG5cdHZhciBzZXJ2aWNlRmlsZURyb3AgPSBfaW50ZXJvcFJlcXVpcmUoX193ZWJwYWNrX3JlcXVpcmVfXyg4KSk7XG5cblx0dmFyIHNlcnZpY2VGaWxlT3ZlciA9IF9pbnRlcm9wUmVxdWlyZShfX3dlYnBhY2tfcmVxdWlyZV9fKDkpKTtcblxuXHR2YXIgZGlyZWN0aXZlRmlsZVNlbGVjdCA9IF9pbnRlcm9wUmVxdWlyZShfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKSk7XG5cblx0dmFyIGRpcmVjdGl2ZUZpbGVEcm9wID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oMTEpKTtcblxuXHR2YXIgZGlyZWN0aXZlRmlsZU92ZXIgPSBfaW50ZXJvcFJlcXVpcmUoX193ZWJwYWNrX3JlcXVpcmVfXygxMikpO1xuXG5cdGFuZ3VsYXIubW9kdWxlKENPTkZJRy5uYW1lLCBbXSkudmFsdWUoXCJmaWxlVXBsb2FkZXJPcHRpb25zXCIsIG9wdGlvbnMpLmZhY3RvcnkoXCJGaWxlVXBsb2FkZXJcIiwgc2VydmljZUZpbGVVcGxvYWRlcikuZmFjdG9yeShcIkZpbGVMaWtlT2JqZWN0XCIsIHNlcnZpY2VGaWxlTGlrZU9iamVjdCkuZmFjdG9yeShcIkZpbGVJdGVtXCIsIHNlcnZpY2VGaWxlSXRlbSkuZmFjdG9yeShcIkZpbGVEaXJlY3RpdmVcIiwgc2VydmljZUZpbGVEaXJlY3RpdmUpLmZhY3RvcnkoXCJGaWxlU2VsZWN0XCIsIHNlcnZpY2VGaWxlU2VsZWN0KS5mYWN0b3J5KFwiRmlsZURyb3BcIiwgc2VydmljZUZpbGVEcm9wKS5mYWN0b3J5KFwiRmlsZU92ZXJcIiwgc2VydmljZUZpbGVPdmVyKS5kaXJlY3RpdmUoXCJudkZpbGVTZWxlY3RcIiwgZGlyZWN0aXZlRmlsZVNlbGVjdCkuZGlyZWN0aXZlKFwibnZGaWxlRHJvcFwiLCBkaXJlY3RpdmVGaWxlRHJvcCkuZGlyZWN0aXZlKFwibnZGaWxlT3ZlclwiLCBkaXJlY3RpdmVGaWxlT3ZlcikucnVuKFtcIkZpbGVVcGxvYWRlclwiLCBcIkZpbGVMaWtlT2JqZWN0XCIsIFwiRmlsZUl0ZW1cIiwgXCJGaWxlRGlyZWN0aXZlXCIsIFwiRmlsZVNlbGVjdFwiLCBcIkZpbGVEcm9wXCIsIFwiRmlsZU92ZXJcIiwgZnVuY3Rpb24gKEZpbGVVcGxvYWRlciwgRmlsZUxpa2VPYmplY3QsIEZpbGVJdGVtLCBGaWxlRGlyZWN0aXZlLCBGaWxlU2VsZWN0LCBGaWxlRHJvcCwgRmlsZU92ZXIpIHtcblx0ICAgIC8vIG9ubHkgZm9yIGNvbXBhdGliaWxpdHlcblx0ICAgIEZpbGVVcGxvYWRlci5GaWxlTGlrZU9iamVjdCA9IEZpbGVMaWtlT2JqZWN0O1xuXHQgICAgRmlsZVVwbG9hZGVyLkZpbGVJdGVtID0gRmlsZUl0ZW07XG5cdCAgICBGaWxlVXBsb2FkZXIuRmlsZURpcmVjdGl2ZSA9IEZpbGVEaXJlY3RpdmU7XG5cdCAgICBGaWxlVXBsb2FkZXIuRmlsZVNlbGVjdCA9IEZpbGVTZWxlY3Q7XG5cdCAgICBGaWxlVXBsb2FkZXIuRmlsZURyb3AgPSBGaWxlRHJvcDtcblx0ICAgIEZpbGVVcGxvYWRlci5GaWxlT3ZlciA9IEZpbGVPdmVyO1xuXHR9XSk7XG5cbi8qKiovIH0sXG5cbi8qIDEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0ge1xuXHRcdFwibmFtZVwiOiBcImFuZ3VsYXJGaWxlVXBsb2FkXCJcblx0fTtcblxuLyoqKi8gfSxcbi8qIDIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdG1vZHVsZS5leHBvcnRzID0ge1xuXHQgICAgdXJsOiBcIi9cIixcblx0ICAgIGFsaWFzOiBcImZpbGVcIixcblx0ICAgIGhlYWRlcnM6IHsnYXV0aG9yaXphdGlvbic6ICdCZWFyZXIgOEV1cWNNTmtGMnlQNTBEaWNwdjloTFJScDdXT1NhYlBsQ3UyMmxpWSd9LFxuXHQgICAgcXVldWU6IFtdLFxuXHQgICAgcHJvZ3Jlc3M6IDAsXG5cdCAgICBhdXRvVXBsb2FkOiBmYWxzZSxcblx0ICAgIHJlbW92ZUFmdGVyVXBsb2FkOiBmYWxzZSxcblx0ICAgIG1ldGhvZDogXCJQT1NUXCIsXG5cdCAgICBmaWx0ZXJzOiBbXSxcblx0ICAgIGZvcm1EYXRhOiBbXSxcblx0ICAgIHF1ZXVlTGltaXQ6IE51bWJlci5NQVhfVkFMVUUsXG5cdCAgICB3aXRoQ3JlZGVudGlhbHM6IGZhbHNlXG5cdH07XG5cbi8qKiovIH0sXG4vKiAzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblxuXHR2YXIgX2ludGVyb3BSZXF1aXJlID0gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqW1wiZGVmYXVsdFwiXSA6IG9iajsgfTtcblxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGtleSBpbiBwcm9wcykgeyB2YXIgcHJvcCA9IHByb3BzW2tleV07IHByb3AuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKHByb3AudmFsdWUpIHByb3Aud3JpdGFibGUgPSB0cnVlOyB9IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpOyB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0pKCk7XG5cblx0dmFyIF9jbGFzc0NhbGxDaGVjayA9IGZ1bmN0aW9uIChpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9O1xuXG5cdHZhciBDT05GSUcgPSBfaW50ZXJvcFJlcXVpcmUoX193ZWJwYWNrX3JlcXVpcmVfXygxKSk7XG5cblx0dmFyIGNvcHkgPSBhbmd1bGFyLmNvcHk7XG5cdHZhciBleHRlbmQgPSBhbmd1bGFyLmV4dGVuZDtcblx0dmFyIGZvckVhY2ggPSBhbmd1bGFyLmZvckVhY2g7XG5cdHZhciBpc09iamVjdCA9IGFuZ3VsYXIuaXNPYmplY3Q7XG5cdHZhciBpc051bWJlciA9IGFuZ3VsYXIuaXNOdW1iZXI7XG5cdHZhciBpc0RlZmluZWQgPSBhbmd1bGFyLmlzRGVmaW5lZDtcblx0dmFyIGlzQXJyYXkgPSBhbmd1bGFyLmlzQXJyYXk7XG5cdHZhciBlbGVtZW50ID0gYW5ndWxhci5lbGVtZW50O1xuXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGZpbGVVcGxvYWRlck9wdGlvbnMsICRyb290U2NvcGUsICRodHRwLCAkd2luZG93LCBGaWxlTGlrZU9iamVjdCwgRmlsZUl0ZW0pIHtcblx0ICAgIHZhciBGaWxlID0gJHdpbmRvdy5GaWxlO1xuXHQgICAgdmFyIEZvcm1EYXRhID0gJHdpbmRvdy5Gb3JtRGF0YTtcblxuXHQgICAgdmFyIEZpbGVVcGxvYWRlciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKipcblx0ICAgICAgICAgKiBQVUJMSUNcblx0ICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKi9cblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIEZpbGVVcGxvYWRlclxuXHQgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cblx0ICAgICAgICAgKiBAY29uc3RydWN0b3Jcblx0ICAgICAgICAgKi9cblxuXHQgICAgICAgIGZ1bmN0aW9uIEZpbGVVcGxvYWRlcihvcHRpb25zKSB7XG5cdCAgICAgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBGaWxlVXBsb2FkZXIpO1xuXG5cdCAgICAgICAgICAgIHZhciBzZXR0aW5ncyA9IGNvcHkoZmlsZVVwbG9hZGVyT3B0aW9ucyk7XG5cblx0ICAgICAgICAgICAgZXh0ZW5kKHRoaXMsIHNldHRpbmdzLCBvcHRpb25zLCB7XG5cdCAgICAgICAgICAgICAgICBpc1VwbG9hZGluZzogZmFsc2UsXG5cdCAgICAgICAgICAgICAgICBfbmV4dEluZGV4OiAwLFxuXHQgICAgICAgICAgICAgICAgX2ZhaWxGaWx0ZXJJbmRleDogLTEsXG5cdCAgICAgICAgICAgICAgICBfZGlyZWN0aXZlczogeyBzZWxlY3Q6IFtdLCBkcm9wOiBbXSwgb3ZlcjogW10gfVxuXHQgICAgICAgICAgICB9KTtcblxuXHQgICAgICAgICAgICAvLyBhZGQgZGVmYXVsdCBmaWx0ZXJzXG5cdCAgICAgICAgICAgIHRoaXMuZmlsdGVycy51bnNoaWZ0KHsgbmFtZTogXCJxdWV1ZUxpbWl0XCIsIGZuOiB0aGlzLl9xdWV1ZUxpbWl0RmlsdGVyIH0pO1xuXHQgICAgICAgICAgICB0aGlzLmZpbHRlcnMudW5zaGlmdCh7IG5hbWU6IFwiZm9sZGVyXCIsIGZuOiB0aGlzLl9mb2xkZXJGaWx0ZXIgfSk7XG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgX2NyZWF0ZUNsYXNzKEZpbGVVcGxvYWRlciwge1xuXHQgICAgICAgICAgICBhZGRUb1F1ZXVlOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIEFkZHMgaXRlbXMgdG8gdGhlIHF1ZXVlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGV8SFRNTElucHV0RWxlbWVudHxPYmplY3R8RmlsZUxpc3R8QXJyYXk8T2JqZWN0Pn0gZmlsZXNcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7QXJyYXk8RnVuY3Rpb24+fFN0cmluZ30gZmlsdGVyc1xuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRUb1F1ZXVlKGZpbGVzLCBvcHRpb25zLCBmaWx0ZXJzKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuXHQgICAgICAgICAgICAgICAgICAgIHZhciBsaXN0ID0gdGhpcy5pc0FycmF5TGlrZU9iamVjdChmaWxlcykgPyBmaWxlcyA6IFtmaWxlc107XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGFycmF5T2ZGaWx0ZXJzID0gdGhpcy5fZ2V0RmlsdGVycyhmaWx0ZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgY291bnQgPSB0aGlzLnF1ZXVlLmxlbmd0aDtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgYWRkZWRGaWxlSXRlbXMgPSBbXTtcblxuXHQgICAgICAgICAgICAgICAgICAgIGZvckVhY2gobGlzdCwgZnVuY3Rpb24gKHNvbWUgLyp7RmlsZXxIVE1MSW5wdXRFbGVtZW50fE9iamVjdH0qLykge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IG5ldyBGaWxlTGlrZU9iamVjdChzb21lKTtcblxuXHQgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuX2lzVmFsaWRGaWxlKHRlbXAsIGFycmF5T2ZGaWx0ZXJzLCBvcHRpb25zKSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpbGVJdGVtID0gbmV3IEZpbGVJdGVtKF90aGlzLCBzb21lLCBvcHRpb25zKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFkZGVkRmlsZUl0ZW1zLnB1c2goZmlsZUl0ZW0pO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMucXVldWUucHVzaChmaWxlSXRlbSk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5fb25BZnRlckFkZGluZ0ZpbGUoZmlsZUl0ZW0pO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpbHRlciA9IGFycmF5T2ZGaWx0ZXJzW190aGlzLl9mYWlsRmlsdGVySW5kZXhdO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX29uV2hlbkFkZGluZ0ZpbGVGYWlsZWQodGVtcCwgZmlsdGVyLCBvcHRpb25zKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgICAgIH0pO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucXVldWUubGVuZ3RoICE9PSBjb3VudCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9vbkFmdGVyQWRkaW5nQWxsKGFkZGVkRmlsZUl0ZW1zKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9ncmVzcyA9IHRoaXMuX2dldFRvdGFsUHJvZ3Jlc3MoKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZW5kZXIoKTtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hdXRvVXBsb2FkKSB0aGlzLnVwbG9hZEFsbCgpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICByZW1vdmVGcm9tUXVldWU6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmVtb3ZlIGl0ZW1zIGZyb20gdGhlIHF1ZXVlLiBSZW1vdmUgbGFzdDogaW5kZXggPSAtMVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtGaWxlSXRlbXxOdW1iZXJ9IHZhbHVlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbW92ZUZyb21RdWV1ZSh2YWx1ZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMuZ2V0SW5kZXhPZkl0ZW0odmFsdWUpO1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBpdGVtID0gdGhpcy5xdWV1ZVtpbmRleF07XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0uaXNVcGxvYWRpbmcpIGl0ZW0uY2FuY2VsKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWV1ZS5zcGxpY2UoaW5kZXgsIDEpO1xuXHQgICAgICAgICAgICAgICAgICAgIGl0ZW0uX2Rlc3Ryb3koKTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2dyZXNzID0gdGhpcy5fZ2V0VG90YWxQcm9ncmVzcygpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBjbGVhclF1ZXVlOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENsZWFycyB0aGUgcXVldWVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYXJRdWV1ZSgpIHtcblx0ICAgICAgICAgICAgICAgICAgICB3aGlsZSAodGhpcy5xdWV1ZS5sZW5ndGgpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5xdWV1ZVswXS5yZW1vdmUoKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9ncmVzcyA9IDA7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIHVwbG9hZEl0ZW06IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogVXBsb2FkcyBhIGl0ZW0gZnJvbSB0aGUgcXVldWVcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZUl0ZW18TnVtYmVyfSB2YWx1ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiB1cGxvYWRJdGVtKHZhbHVlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5nZXRJbmRleE9mSXRlbSh2YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSB0aGlzLnF1ZXVlW2luZGV4XTtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgdHJhbnNwb3J0ID0gdGhpcy5pc0hUTUw1ID8gXCJfeGhyVHJhbnNwb3J0XCIgOiBcIl9pZnJhbWVUcmFuc3BvcnRcIjtcblxuXHQgICAgICAgICAgICAgICAgICAgIGl0ZW0uX3ByZXBhcmVUb1VwbG9hZGluZygpO1xuXHQgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzVXBsb2FkaW5nKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgICAgICAgICAgICB9dGhpcy5pc1VwbG9hZGluZyA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpc1t0cmFuc3BvcnRdKGl0ZW0pO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBjYW5jZWxJdGVtOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENhbmNlbHMgdXBsb2FkaW5nIG9mIGl0ZW0gZnJvbSB0aGUgcXVldWVcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZUl0ZW18TnVtYmVyfSB2YWx1ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjYW5jZWxJdGVtKHZhbHVlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5nZXRJbmRleE9mSXRlbSh2YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSB0aGlzLnF1ZXVlW2luZGV4XTtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgcHJvcCA9IHRoaXMuaXNIVE1MNSA/IFwiX3hoclwiIDogXCJfZm9ybVwiO1xuXHQgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtICYmIGl0ZW0uaXNVcGxvYWRpbmcpIGl0ZW1bcHJvcF0uYWJvcnQoKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgdXBsb2FkQWxsOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFVwbG9hZHMgYWxsIG5vdCB1cGxvYWRlZCBpdGVtcyBvZiBxdWV1ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiB1cGxvYWRBbGwoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW1zID0gdGhpcy5nZXROb3RVcGxvYWRlZEl0ZW1zKCkuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhaXRlbS5pc1VwbG9hZGluZztcblx0ICAgICAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAoIWl0ZW1zLmxlbmd0aCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICAgICAgICAgICAgfWZvckVhY2goaXRlbXMsIGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLl9wcmVwYXJlVG9VcGxvYWRpbmcoKTtcblx0ICAgICAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICAgICAgICBpdGVtc1swXS51cGxvYWQoKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgY2FuY2VsQWxsOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENhbmNlbHMgYWxsIHVwbG9hZHNcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2FuY2VsQWxsKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBpdGVtcyA9IHRoaXMuZ2V0Tm90VXBsb2FkZWRJdGVtcygpO1xuXHQgICAgICAgICAgICAgICAgICAgIGZvckVhY2goaXRlbXMsIGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmNhbmNlbCgpO1xuXHQgICAgICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBpc0ZpbGU6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmV0dXJucyBcInRydWVcIiBpZiB2YWx1ZSBhbiBpbnN0YW5jZSBvZiBGaWxlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGlzRmlsZSh2YWx1ZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLmlzRmlsZSh2YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIGlzRmlsZUxpa2VPYmplY3Q6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmV0dXJucyBcInRydWVcIiBpZiB2YWx1ZSBhbiBpbnN0YW5jZSBvZiBGaWxlTGlrZU9iamVjdFxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMge0Jvb2xlYW59XG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc0ZpbGVMaWtlT2JqZWN0KHZhbHVlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IuaXNGaWxlTGlrZU9iamVjdCh2YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIGlzQXJyYXlMaWtlT2JqZWN0OiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJldHVybnMgXCJ0cnVlXCIgaWYgdmFsdWUgaXMgYXJyYXkgbGlrZSBvYmplY3Rcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc0FycmF5TGlrZU9iamVjdCh2YWx1ZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLmlzQXJyYXlMaWtlT2JqZWN0KHZhbHVlKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgZ2V0SW5kZXhPZkl0ZW06IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmV0dXJucyBhIGluZGV4IG9mIGl0ZW0gZnJvbSB0aGUgcXVldWVcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7SXRlbXxOdW1iZXJ9IHZhbHVlXG5cdCAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7TnVtYmVyfVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJbmRleE9mSXRlbSh2YWx1ZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBpc051bWJlcih2YWx1ZSkgPyB2YWx1ZSA6IHRoaXMucXVldWUuaW5kZXhPZih2YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIGdldE5vdFVwbG9hZGVkSXRlbXM6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmV0dXJucyBub3QgdXBsb2FkZWQgaXRlbXNcblx0ICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtBcnJheX1cblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Tm90VXBsb2FkZWRJdGVtcygpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5xdWV1ZS5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFpdGVtLmlzVXBsb2FkZWQ7XG5cdCAgICAgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIGdldFJlYWR5SXRlbXM6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmV0dXJucyBpdGVtcyByZWFkeSBmb3IgdXBsb2FkXG5cdCAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7QXJyYXl9XG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFJlYWR5SXRlbXMoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucXVldWUuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmlzUmVhZHkgJiYgIWl0ZW0uaXNVcGxvYWRpbmc7XG5cdCAgICAgICAgICAgICAgICAgICAgfSkuc29ydChmdW5jdGlvbiAoaXRlbTEsIGl0ZW0yKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtMS5pbmRleCAtIGl0ZW0yLmluZGV4O1xuXHQgICAgICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBkZXN0cm95OiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIERlc3Ryb3lzIGluc3RhbmNlIG9mIEZpbGVVcGxvYWRlclxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95KCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cblx0ICAgICAgICAgICAgICAgICAgICBmb3JFYWNoKHRoaXMuX2RpcmVjdGl2ZXMsIGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgZm9yRWFjaChfdGhpcy5fZGlyZWN0aXZlc1trZXldLCBmdW5jdGlvbiAob2JqZWN0KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QuZGVzdHJveSgpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgb25BZnRlckFkZGluZ0FsbDoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtBcnJheX0gZmlsZUl0ZW1zXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uQWZ0ZXJBZGRpbmdBbGwoZmlsZUl0ZW1zKSB7fVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBvbkFmdGVyQWRkaW5nRmlsZToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtGaWxlSXRlbX0gZmlsZUl0ZW1cblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25BZnRlckFkZGluZ0ZpbGUoZmlsZUl0ZW0pIHt9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIG9uV2hlbkFkZGluZ0ZpbGVGYWlsZWQ6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogQ2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZXxPYmplY3R9IGl0ZW1cblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBmaWx0ZXJcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uV2hlbkFkZGluZ0ZpbGVGYWlsZWQoaXRlbSwgZmlsdGVyLCBvcHRpb25zKSB7fVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBvbkJlZm9yZVVwbG9hZEl0ZW06IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogQ2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZUl0ZW19IGZpbGVJdGVtXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uQmVmb3JlVXBsb2FkSXRlbShmaWxlSXRlbSkge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgb25Qcm9ncmVzc0l0ZW06IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogQ2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZUl0ZW19IGZpbGVJdGVtXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gcHJvZ3Jlc3Ncblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25Qcm9ncmVzc0l0ZW0oZmlsZUl0ZW0sIHByb2dyZXNzKSB7fVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBvblByb2dyZXNzQWxsOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gcHJvZ3Jlc3Ncblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25Qcm9ncmVzc0FsbChwcm9ncmVzcykge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgb25TdWNjZXNzSXRlbToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtGaWxlSXRlbX0gaXRlbVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSByZXNwb25zZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHN0YXR1c1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGhlYWRlcnNcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25TdWNjZXNzSXRlbShpdGVtLCByZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKSB7fVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBvbkVycm9ySXRlbToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtGaWxlSXRlbX0gaXRlbVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSByZXNwb25zZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHN0YXR1c1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGhlYWRlcnNcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25FcnJvckl0ZW0oaXRlbSwgcmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycykge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgb25DYW5jZWxJdGVtOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGVJdGVtfSBpdGVtXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyp9IHJlc3BvbnNlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gc3RhdHVzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaGVhZGVyc1xuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvbkNhbmNlbEl0ZW0oaXRlbSwgcmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycykge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgb25Db21wbGV0ZUl0ZW06IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogQ2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZUl0ZW19IGl0ZW1cblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7Kn0gcmVzcG9uc2Vcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzdGF0dXNcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBoZWFkZXJzXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ29tcGxldGVJdGVtKGl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpIHt9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIG9uQ29tcGxldGVBbGw6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogQ2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25Db21wbGV0ZUFsbCgpIHt9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9nZXRUb3RhbFByb2dyZXNzOiB7XG5cdCAgICAgICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKlxuXHQgICAgICAgICAgICAgICAgICogUFJJVkFURVxuXHQgICAgICAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKiovXG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJldHVybnMgdGhlIHRvdGFsIHByb2dyZXNzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gW3ZhbHVlXVxuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMge051bWJlcn1cblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRUb3RhbFByb2dyZXNzKHZhbHVlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVtb3ZlQWZ0ZXJVcGxvYWQpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlIHx8IDA7XG5cdCAgICAgICAgICAgICAgICAgICAgfXZhciBub3RVcGxvYWRlZCA9IHRoaXMuZ2V0Tm90VXBsb2FkZWRJdGVtcygpLmxlbmd0aDtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgdXBsb2FkZWQgPSBub3RVcGxvYWRlZCA/IHRoaXMucXVldWUubGVuZ3RoIC0gbm90VXBsb2FkZWQgOiB0aGlzLnF1ZXVlLmxlbmd0aDtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgcmF0aW8gPSAxMDAgLyB0aGlzLnF1ZXVlLmxlbmd0aDtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudCA9ICh2YWx1ZSB8fCAwKSAqIHJhdGlvIC8gMTAwO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hdGgucm91bmQodXBsb2FkZWQgKiByYXRpbyArIGN1cnJlbnQpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfZ2V0RmlsdGVyczoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBSZXR1cm5zIGFycmF5IG9mIGZpbHRlcnNcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7QXJyYXk8RnVuY3Rpb24+fFN0cmluZ30gZmlsdGVyc1xuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMge0FycmF5PEZ1bmN0aW9uPn1cblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRGaWx0ZXJzKGZpbHRlcnMpIHtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAoIWZpbHRlcnMpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmlsdGVycztcblx0ICAgICAgICAgICAgICAgICAgICB9aWYgKGlzQXJyYXkoZmlsdGVycykpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpbHRlcnM7XG5cdCAgICAgICAgICAgICAgICAgICAgfXZhciBuYW1lcyA9IGZpbHRlcnMubWF0Y2goL1teXFxzLF0rL2cpO1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbHRlcnMuZmlsdGVyKGZ1bmN0aW9uIChmaWx0ZXIpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5hbWVzLmluZGV4T2YoZmlsdGVyLm5hbWUpICE9PSAtMTtcblx0ICAgICAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX3JlbmRlcjoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBVcGRhdGVzIGh0bWxcblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW5kZXIoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKCEkcm9vdFNjb3BlLiQkcGhhc2UpICRyb290U2NvcGUuJGFwcGx5KCk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9mb2xkZXJGaWx0ZXI6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmV0dXJucyBcInRydWVcIiBpZiBpdGVtIGlzIGEgZmlsZSAobm90IGZvbGRlcilcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZXxGaWxlTGlrZU9iamVjdH0gaXRlbVxuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMge0Jvb2xlYW59XG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfZm9sZGVyRmlsdGVyKGl0ZW0pIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gISEoaXRlbS5zaXplIHx8IGl0ZW0udHlwZSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9xdWV1ZUxpbWl0RmlsdGVyOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJldHVybnMgXCJ0cnVlXCIgaWYgdGhlIGxpbWl0IGhhcyBub3QgYmVlbiByZWFjaGVkXG5cdCAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9xdWV1ZUxpbWl0RmlsdGVyKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnF1ZXVlLmxlbmd0aCA8IHRoaXMucXVldWVMaW1pdDtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX2lzVmFsaWRGaWxlOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJldHVybnMgXCJ0cnVlXCIgaWYgZmlsZSBwYXNzIGFsbCBmaWx0ZXJzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGV8T2JqZWN0fSBmaWxlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0FycmF5PEZ1bmN0aW9uPn0gZmlsdGVyc1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2lzVmFsaWRGaWxlKGZpbGUsIGZpbHRlcnMsIG9wdGlvbnMpIHtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5fZmFpbEZpbHRlckluZGV4ID0gLTE7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFmaWx0ZXJzLmxlbmd0aCA/IHRydWUgOiBmaWx0ZXJzLmV2ZXJ5KGZ1bmN0aW9uIChmaWx0ZXIpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX2ZhaWxGaWx0ZXJJbmRleCsrO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmlsdGVyLmZuLmNhbGwoX3RoaXMsIGZpbGUsIG9wdGlvbnMpO1xuXHQgICAgICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfaXNTdWNjZXNzQ29kZToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDaGVja3Mgd2hldGhlciB1cGxvYWQgc3VjY2Vzc2Z1bFxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHN0YXR1c1xuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMge0Jvb2xlYW59XG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaXNTdWNjZXNzQ29kZShzdGF0dXMpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RhdHVzID49IDIwMCAmJiBzdGF0dXMgPCAzMDAgfHwgc3RhdHVzID09PSAzMDQ7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF90cmFuc2Zvcm1SZXNwb25zZToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBUcmFuc2Zvcm1zIHRoZSBzZXJ2ZXIgcmVzcG9uc2Vcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7Kn0gcmVzcG9uc2Vcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBoZWFkZXJzXG5cdCAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7Kn1cblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF90cmFuc2Zvcm1SZXNwb25zZShyZXNwb25zZSwgaGVhZGVycykge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBoZWFkZXJzR2V0dGVyID0gdGhpcy5faGVhZGVyc0dldHRlcihoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICBmb3JFYWNoKCRodHRwLmRlZmF1bHRzLnRyYW5zZm9ybVJlc3BvbnNlLCBmdW5jdGlvbiAodHJhbnNmb3JtRm4pIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSB0cmFuc2Zvcm1GbihyZXNwb25zZSwgaGVhZGVyc0dldHRlcik7XG5cdCAgICAgICAgICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfcGFyc2VIZWFkZXJzOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFBhcnNlZCByZXNwb25zZSBoZWFkZXJzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0gaGVhZGVyc1xuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMge09iamVjdH1cblx0ICAgICAgICAgICAgICAgICAqIEBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9ibG9iL21hc3Rlci9zcmMvbmcvaHR0cC5qc1xuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX3BhcnNlSGVhZGVycyhoZWFkZXJzKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIHBhcnNlZCA9IHt9LFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBrZXksXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhbCxcblx0ICAgICAgICAgICAgICAgICAgICAgICAgaTtcblxuXHQgICAgICAgICAgICAgICAgICAgIGlmICghaGVhZGVycykge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VkO1xuXHQgICAgICAgICAgICAgICAgICAgIH1mb3JFYWNoKGhlYWRlcnMuc3BsaXQoXCJcXG5cIiksIGZ1bmN0aW9uIChsaW5lKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBsaW5lLmluZGV4T2YoXCI6XCIpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBrZXkgPSBsaW5lLnNsaWNlKDAsIGkpLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSBsaW5lLnNsaWNlKGkgKyAxKS50cmltKCk7XG5cblx0ICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGtleSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VkW2tleV0gPSBwYXJzZWRba2V5XSA/IHBhcnNlZFtrZXldICsgXCIsIFwiICsgdmFsIDogdmFsO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgfSk7XG5cblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VkO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfaGVhZGVyc0dldHRlcjoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBSZXR1cm5zIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBoZWFkZXJzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gcGFyc2VkSGVhZGVyc1xuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMge0Z1bmN0aW9ufVxuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2hlYWRlcnNHZXR0ZXIocGFyc2VkSGVhZGVycykge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAobmFtZSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBpZiAobmFtZSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlZEhlYWRlcnNbbmFtZS50b0xvd2VyQ2FzZSgpXSB8fCBudWxsO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZWRIZWFkZXJzO1xuXHQgICAgICAgICAgICAgICAgICAgIH07XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF94aHJUcmFuc3BvcnQ6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogVGhlIFhNTEh0dHBSZXF1ZXN0IHRyYW5zcG9ydFxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtGaWxlSXRlbX0gaXRlbVxuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX3hoclRyYW5zcG9ydChpdGVtKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuXHQgICAgICAgICAgICAgICAgICAgIHZhciB4aHIgPSBpdGVtLl94aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgZm9ybSA9IG5ldyBGb3JtRGF0YSgpO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5fb25CZWZvcmVVcGxvYWRJdGVtKGl0ZW0pO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgZm9yRWFjaChpdGVtLmZvcm1EYXRhLCBmdW5jdGlvbiAob2JqKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGZvckVhY2gob2JqLCBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybS5hcHBlbmQoa2V5LCB2YWx1ZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgICAgICAgICAgIH0pO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpdGVtLl9maWxlLnNpemUgIT0gXCJudW1iZXJcIikge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiVGhlIGZpbGUgc3BlY2lmaWVkIGlzIG5vIGxvbmdlciB2YWxpZFwiKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cblx0ICAgICAgICAgICAgICAgICAgICBmb3JtLmFwcGVuZChpdGVtLmFsaWFzLCBpdGVtLl9maWxlLCBpdGVtLmZpbGUubmFtZSk7XG5cblx0ICAgICAgICAgICAgICAgICAgICB4aHIudXBsb2FkLm9ucHJvZ3Jlc3MgPSBmdW5jdGlvbiAoZXZlbnQpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByb2dyZXNzID0gTWF0aC5yb3VuZChldmVudC5sZW5ndGhDb21wdXRhYmxlID8gZXZlbnQubG9hZGVkICogMTAwIC8gZXZlbnQudG90YWwgOiAwKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX29uUHJvZ3Jlc3NJdGVtKGl0ZW0sIHByb2dyZXNzKTtcblx0ICAgICAgICAgICAgICAgICAgICB9O1xuXG5cdCAgICAgICAgICAgICAgICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhlYWRlcnMgPSBfdGhpcy5fcGFyc2VIZWFkZXJzKHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXNwb25zZSA9IF90aGlzLl90cmFuc2Zvcm1SZXNwb25zZSh4aHIucmVzcG9uc2UsIGhlYWRlcnMpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ2lzdCA9IF90aGlzLl9pc1N1Y2Nlc3NDb2RlKHhoci5zdGF0dXMpID8gXCJTdWNjZXNzXCIgOiBcIkVycm9yXCI7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtZXRob2QgPSBcIl9vblwiICsgZ2lzdCArIFwiSXRlbVwiO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBfdGhpc1ttZXRob2RdKGl0ZW0sIHJlc3BvbnNlLCB4aHIuc3RhdHVzLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX29uQ29tcGxldGVJdGVtKGl0ZW0sIHJlc3BvbnNlLCB4aHIuc3RhdHVzLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICB9O1xuXG5cdCAgICAgICAgICAgICAgICAgICAgeGhyLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoZWFkZXJzID0gX3RoaXMuX3BhcnNlSGVhZGVycyh4aHIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSBfdGhpcy5fdHJhbnNmb3JtUmVzcG9uc2UoeGhyLnJlc3BvbnNlLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX29uRXJyb3JJdGVtKGl0ZW0sIHJlc3BvbnNlLCB4aHIuc3RhdHVzLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX29uQ29tcGxldGVJdGVtKGl0ZW0sIHJlc3BvbnNlLCB4aHIuc3RhdHVzLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICB9O1xuXG5cdCAgICAgICAgICAgICAgICAgICAgeGhyLm9uYWJvcnQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoZWFkZXJzID0gX3RoaXMuX3BhcnNlSGVhZGVycyh4aHIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSBfdGhpcy5fdHJhbnNmb3JtUmVzcG9uc2UoeGhyLnJlc3BvbnNlLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuX29uQ2FuY2VsSXRlbShpdGVtLCByZXNwb25zZSwgeGhyLnN0YXR1cywgaGVhZGVycyk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9vbkNvbXBsZXRlSXRlbShpdGVtLCByZXNwb25zZSwgeGhyLnN0YXR1cywgaGVhZGVycyk7XG5cdCAgICAgICAgICAgICAgICAgICAgfTtcblxuXHQgICAgICAgICAgICAgICAgICAgIHhoci5vcGVuKGl0ZW0ubWV0aG9kLCBpdGVtLnVybCwgdHJ1ZSk7XG5cblx0ICAgICAgICAgICAgICAgICAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gaXRlbS53aXRoQ3JlZGVudGlhbHM7XG5cblx0ICAgICAgICAgICAgICAgICAgICBmb3JFYWNoKGl0ZW0uaGVhZGVycywgZnVuY3Rpb24gKHZhbHVlLCBuYW1lKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKG5hbWUsIHZhbHVlKTtcblx0ICAgICAgICAgICAgICAgICAgICB9KTtcblxuXHQgICAgICAgICAgICAgICAgICAgIHhoci5zZW5kKGZvcm0pO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlbmRlcigpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfaWZyYW1lVHJhbnNwb3J0OiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFRoZSBJRnJhbWUgdHJhbnNwb3J0XG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGVJdGVtfSBpdGVtXG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaWZyYW1lVHJhbnNwb3J0KGl0ZW0pIHtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGZvcm0gPSBlbGVtZW50KFwiPGZvcm0gc3R5bGU9XFxcImRpc3BsYXk6IG5vbmU7XFxcIiAvPlwiKTtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgaWZyYW1lID0gZWxlbWVudChcIjxpZnJhbWUgbmFtZT1cXFwiaWZyYW1lVHJhbnNwb3J0XCIgKyBEYXRlLm5vdygpICsgXCJcXFwiPlwiKTtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgaW5wdXQgPSBpdGVtLl9pbnB1dDtcblxuXHQgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLl9mb3JtKSBpdGVtLl9mb3JtLnJlcGxhY2VXaXRoKGlucHV0KTsgLy8gcmVtb3ZlIG9sZCBmb3JtXG5cdCAgICAgICAgICAgICAgICAgICAgaXRlbS5fZm9ybSA9IGZvcm07IC8vIHNhdmUgbGluayB0byBuZXcgZm9ybVxuXG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5fb25CZWZvcmVVcGxvYWRJdGVtKGl0ZW0pO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgaW5wdXQucHJvcChcIm5hbWVcIiwgaXRlbS5hbGlhcyk7XG5cblx0ICAgICAgICAgICAgICAgICAgICBmb3JFYWNoKGl0ZW0uZm9ybURhdGEsIGZ1bmN0aW9uIChvYmopIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgZm9yRWFjaChvYmosIGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudF8gPSBlbGVtZW50KFwiPGlucHV0IHR5cGU9XFxcImhpZGRlblxcXCIgbmFtZT1cXFwiXCIgKyBrZXkgKyBcIlxcXCIgLz5cIik7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50Xy52YWwodmFsdWUpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybS5hcHBlbmQoZWxlbWVudF8pO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgICAgICAgICAgICB9KTtcblxuXHQgICAgICAgICAgICAgICAgICAgIGZvcm0ucHJvcCh7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogaXRlbS51cmwsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldDogaWZyYW1lLnByb3AoXCJuYW1lXCIpLFxuXHQgICAgICAgICAgICAgICAgICAgICAgICBlbmN0eXBlOiBcIm11bHRpcGFydC9mb3JtLWRhdGFcIixcblx0ICAgICAgICAgICAgICAgICAgICAgICAgZW5jb2Rpbmc6IFwibXVsdGlwYXJ0L2Zvcm0tZGF0YVwiIC8vIG9sZCBJRVxuXHQgICAgICAgICAgICAgICAgICAgIH0pO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgaWZyYW1lLmJpbmQoXCJsb2FkXCIsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGh0bWwgPSBcIlwiO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RhdHVzID0gMjAwO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGaXggZm9yIGxlZ2FjeSBJRSBicm93c2VycyB0aGF0IGxvYWRzIGludGVybmFsIGVycm9yIHBhZ2Vcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdoZW4gZmFpbGVkIFdTIHJlc3BvbnNlIHJlY2VpdmVkLiBJbiBjb25zZXF1ZW5jZSBpZnJhbWVcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnRlbnQgYWNjZXNzIGRlbmllZCBlcnJvciBpcyB0aHJvd24gYmVjb3VzZSB0cnlpbmcgdG9cblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFjY2VzcyBjcm9zcyBkb21haW4gcGFnZS4gV2hlbiBzdWNoIHRoaW5nIG9jY3VycyBub3RpZnlpbmdcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdpdGggZW1wdHkgcmVzcG9uc2Ugb2JqZWN0LiBTZWUgbW9yZSBpbmZvIGF0OlxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xNTEzNjIvYWNjZXNzLWlzLWRlbmllZC1lcnJvci1vbi1hY2Nlc3NpbmctaWZyYW1lLWRvY3VtZW50LW9iamVjdFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90ZSB0aGF0IGlmIG5vbiBzdGFuZGFyZCA0eHggb3IgNXh4IGVycm9yIGNvZGUgcmV0dXJuZWRcblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGZyb20gV1MgdGhlbiByZXNwb25zZSBjb250ZW50IGNhbiBiZSBhY2Nlc3NlZCB3aXRob3V0IGVycm9yXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBidXQgJ1hIUicgc3RhdHVzIGJlY29tZXMgMjAwLiBJbiBvcmRlciB0byBhdm9pZCBjb25mdXNpb25cblx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJldHVybmluZyByZXNwb25zZSB2aWEgc2FtZSAnc3VjY2VzcycgZXZlbnQgaGFuZGxlci5cblxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZml4ZWQgYW5ndWxhci5jb250ZW50cygpIGZvciBpZnJhbWVzXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sID0gaWZyYW1lWzBdLmNvbnRlbnREb2N1bWVudC5ib2R5LmlubmVySFRNTDtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaW4gY2FzZSB3ZSBydW4gaW50byB0aGUgYWNjZXNzLWlzLWRlbmllZCBlcnJvciBvciB3ZSBoYXZlIGFub3RoZXIgZXJyb3Igb24gdGhlIHNlcnZlciBzaWRlXG5cdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAoaW50ZW50aW9uYWwgNTAwLDQwLi4uIGVycm9ycyksIHdlIGF0IGxlYXN0IHNheSAnc29tZXRoaW5nIHdlbnQgd3JvbmcnIC0+IDUwMFxuXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzID0gNTAwO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB9XG5cblx0ICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHhociA9IHsgcmVzcG9uc2U6IGh0bWwsIHN0YXR1czogc3RhdHVzLCBkdW1teTogdHJ1ZSB9O1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaGVhZGVycyA9IHt9O1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSBfdGhpcy5fdHJhbnNmb3JtUmVzcG9uc2UoeGhyLnJlc3BvbnNlLCBoZWFkZXJzKTtcblxuXHQgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5fb25TdWNjZXNzSXRlbShpdGVtLCByZXNwb25zZSwgeGhyLnN0YXR1cywgaGVhZGVycyk7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9vbkNvbXBsZXRlSXRlbShpdGVtLCByZXNwb25zZSwgeGhyLnN0YXR1cywgaGVhZGVycyk7XG5cdCAgICAgICAgICAgICAgICAgICAgfSk7XG5cblx0ICAgICAgICAgICAgICAgICAgICBmb3JtLmFib3J0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgeGhyID0geyBzdGF0dXM6IDAsIGR1bW15OiB0cnVlIH07XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoZWFkZXJzID0ge307XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXNwb25zZTtcblxuXHQgICAgICAgICAgICAgICAgICAgICAgICBpZnJhbWUudW5iaW5kKFwibG9hZFwiKS5wcm9wKFwic3JjXCIsIFwiamF2YXNjcmlwdDpmYWxzZTtcIik7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIGZvcm0ucmVwbGFjZVdpdGgoaW5wdXQpO1xuXG5cdCAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLl9vbkNhbmNlbEl0ZW0oaXRlbSwgcmVzcG9uc2UsIHhoci5zdGF0dXMsIGhlYWRlcnMpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5fb25Db21wbGV0ZUl0ZW0oaXRlbSwgcmVzcG9uc2UsIHhoci5zdGF0dXMsIGhlYWRlcnMpO1xuXHQgICAgICAgICAgICAgICAgICAgIH07XG5cblx0ICAgICAgICAgICAgICAgICAgICBpbnB1dC5hZnRlcihmb3JtKTtcblx0ICAgICAgICAgICAgICAgICAgICBmb3JtLmFwcGVuZChpbnB1dCkuYXBwZW5kKGlmcmFtZSk7XG5cblx0ICAgICAgICAgICAgICAgICAgICBmb3JtWzBdLnN1Ym1pdCgpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlbmRlcigpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfb25XaGVuQWRkaW5nRmlsZUZhaWxlZDoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBJbm5lciBjYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtGaWxlfE9iamVjdH0gaXRlbVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGZpbHRlclxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9vbldoZW5BZGRpbmdGaWxlRmFpbGVkKGl0ZW0sIGZpbHRlciwgb3B0aW9ucykge1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMub25XaGVuQWRkaW5nRmlsZUZhaWxlZChpdGVtLCBmaWx0ZXIsIG9wdGlvbnMpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfb25BZnRlckFkZGluZ0ZpbGU6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogSW5uZXIgY2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZUl0ZW19IGl0ZW1cblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX29uQWZ0ZXJBZGRpbmdGaWxlKGl0ZW0pIHtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQWZ0ZXJBZGRpbmdGaWxlKGl0ZW0pO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfb25BZnRlckFkZGluZ0FsbDoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBJbm5lciBjYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtBcnJheTxGaWxlSXRlbT59IGl0ZW1zXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkFmdGVyQWRkaW5nQWxsKGl0ZW1zKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkFmdGVyQWRkaW5nQWxsKGl0ZW1zKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX29uQmVmb3JlVXBsb2FkSXRlbToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiAgSW5uZXIgY2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZUl0ZW19IGl0ZW1cblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkJlZm9yZVVwbG9hZEl0ZW0oaXRlbSkge1xuXHQgICAgICAgICAgICAgICAgICAgIGl0ZW0uX29uQmVmb3JlVXBsb2FkKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkJlZm9yZVVwbG9hZEl0ZW0oaXRlbSk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9vblByb2dyZXNzSXRlbToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBJbm5lciBjYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtGaWxlSXRlbX0gaXRlbVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHByb2dyZXNzXG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfb25Qcm9ncmVzc0l0ZW0oaXRlbSwgcHJvZ3Jlc3MpIHtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgdG90YWwgPSB0aGlzLl9nZXRUb3RhbFByb2dyZXNzKHByb2dyZXNzKTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2dyZXNzID0gdG90YWw7XG5cdCAgICAgICAgICAgICAgICAgICAgaXRlbS5fb25Qcm9ncmVzcyhwcm9ncmVzcyk7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5vblByb2dyZXNzSXRlbShpdGVtLCBwcm9ncmVzcyk7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5vblByb2dyZXNzQWxsKHRvdGFsKTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZW5kZXIoKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX29uU3VjY2Vzc0l0ZW06IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogSW5uZXIgY2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZUl0ZW19IGl0ZW1cblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7Kn0gcmVzcG9uc2Vcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzdGF0dXNcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBoZWFkZXJzXG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfb25TdWNjZXNzSXRlbShpdGVtLCByZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaXRlbS5fb25TdWNjZXNzKHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMub25TdWNjZXNzSXRlbShpdGVtLCByZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX29uRXJyb3JJdGVtOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIElubmVyIGNhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGVJdGVtfSBpdGVtXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyp9IHJlc3BvbnNlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gc3RhdHVzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaGVhZGVyc1xuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX29uRXJyb3JJdGVtKGl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpIHtcblx0ICAgICAgICAgICAgICAgICAgICBpdGVtLl9vbkVycm9yKHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMub25FcnJvckl0ZW0oaXRlbSwgcmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycyk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9vbkNhbmNlbEl0ZW06IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogSW5uZXIgY2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RmlsZUl0ZW19IGl0ZW1cblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7Kn0gcmVzcG9uc2Vcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBzdGF0dXNcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBoZWFkZXJzXG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfb25DYW5jZWxJdGVtKGl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpIHtcblx0ICAgICAgICAgICAgICAgICAgICBpdGVtLl9vbkNhbmNlbChyZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQ2FuY2VsSXRlbShpdGVtLCByZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX29uQ29tcGxldGVJdGVtOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIElubmVyIGNhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0ZpbGVJdGVtfSBpdGVtXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyp9IHJlc3BvbnNlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gc3RhdHVzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaGVhZGVyc1xuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX29uQ29tcGxldGVJdGVtKGl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpIHtcblx0ICAgICAgICAgICAgICAgICAgICBpdGVtLl9vbkNvbXBsZXRlKHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMub25Db21wbGV0ZUl0ZW0oaXRlbSwgcmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycyk7XG5cblx0ICAgICAgICAgICAgICAgICAgICB2YXIgbmV4dEl0ZW0gPSB0aGlzLmdldFJlYWR5SXRlbXMoKVswXTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzVXBsb2FkaW5nID0gZmFsc2U7XG5cblx0ICAgICAgICAgICAgICAgICAgICBpZiAoaXNEZWZpbmVkKG5leHRJdGVtKSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICBuZXh0SXRlbS51cGxvYWQoKTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblxuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMub25Db21wbGV0ZUFsbCgpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvZ3Jlc3MgPSB0aGlzLl9nZXRUb3RhbFByb2dyZXNzKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVuZGVyKCk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9LCB7XG5cdCAgICAgICAgICAgIGlzRmlsZToge1xuXHQgICAgICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKipcblx0ICAgICAgICAgICAgICAgICAqIFNUQVRJQ1xuXHQgICAgICAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKiovXG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJldHVybnMgXCJ0cnVlXCIgaWYgdmFsdWUgYW4gaW5zdGFuY2Ugb2YgRmlsZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMge0Jvb2xlYW59XG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc0ZpbGUodmFsdWUpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gRmlsZSAmJiB2YWx1ZSBpbnN0YW5jZW9mIEZpbGU7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIGlzRmlsZUxpa2VPYmplY3Q6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmV0dXJucyBcInRydWVcIiBpZiB2YWx1ZSBhbiBpbnN0YW5jZSBvZiBGaWxlTGlrZU9iamVjdFxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMge0Jvb2xlYW59XG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc0ZpbGVMaWtlT2JqZWN0KHZhbHVlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgRmlsZUxpa2VPYmplY3Q7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIGlzQXJyYXlMaWtlT2JqZWN0OiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJldHVybnMgXCJ0cnVlXCIgaWYgdmFsdWUgaXMgYXJyYXkgbGlrZSBvYmplY3Rcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICAgICAgICAgICAgICAgICAqIEByZXR1cm5zIHtCb29sZWFufVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpc0FycmF5TGlrZU9iamVjdCh2YWx1ZSkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBpc09iamVjdCh2YWx1ZSkgJiYgXCJsZW5ndGhcIiBpbiB2YWx1ZTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgaW5oZXJpdDoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBJbmhlcml0cyBhIHRhcmdldCAoQ2xhc3NfMSkgYnkgYSBzb3VyY2UgKENsYXNzXzIpXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSB0YXJnZXRcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHNvdXJjZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbmhlcml0KHRhcmdldCwgc291cmNlKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc291cmNlLnByb3RvdHlwZSk7XG5cdCAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHRhcmdldDtcblx0ICAgICAgICAgICAgICAgICAgICB0YXJnZXQuc3VwZXJfID0gc291cmNlO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cblx0ICAgICAgICByZXR1cm4gRmlsZVVwbG9hZGVyO1xuXHQgICAgfSkoKTtcblxuXHQgICAgLyoqKioqKioqKioqKioqKioqKioqKipcblx0ICAgICAqIFBVQkxJQ1xuXHQgICAgICoqKioqKioqKioqKioqKioqKioqKiovXG5cdCAgICAvKipcblx0ICAgICAqIENoZWNrcyBhIHN1cHBvcnQgdGhlIGh0bWw1IHVwbG9hZGVyXG5cdCAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn1cblx0ICAgICAqIEByZWFkb25seVxuXHQgICAgICovXG5cdCAgICBGaWxlVXBsb2FkZXIucHJvdG90eXBlLmlzSFRNTDUgPSAhIShGaWxlICYmIEZvcm1EYXRhKTtcblx0ICAgIC8qKioqKioqKioqKioqKioqKioqKioqXG5cdCAgICAgKiBTVEFUSUNcblx0ICAgICAqKioqKioqKioqKioqKioqKioqKioqL1xuXHQgICAgLyoqXG5cdCAgICAgKiBAYm9ycm93cyBGaWxlVXBsb2FkZXIucHJvdG90eXBlLmlzSFRNTDVcblx0ICAgICAqL1xuXHQgICAgRmlsZVVwbG9hZGVyLmlzSFRNTDUgPSBGaWxlVXBsb2FkZXIucHJvdG90eXBlLmlzSFRNTDU7XG5cblx0ICAgIHJldHVybiBGaWxlVXBsb2FkZXI7XG5cdH07XG5cblx0bW9kdWxlLmV4cG9ydHMuJGluamVjdCA9IFtcImZpbGVVcGxvYWRlck9wdGlvbnNcIiwgXCIkcm9vdFNjb3BlXCIsIFwiJGh0dHBcIiwgXCIkd2luZG93XCIsIFwiRmlsZUxpa2VPYmplY3RcIiwgXCJGaWxlSXRlbVwiXTtcblxuLyoqKi8gfSxcbi8qIDQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdHZhciBfaW50ZXJvcFJlcXVpcmUgPSBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmpbXCJkZWZhdWx0XCJdIDogb2JqOyB9O1xuXG5cdHZhciBfY3JlYXRlQ2xhc3MgPSAoZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIga2V5IGluIHByb3BzKSB7IHZhciBwcm9wID0gcHJvcHNba2V5XTsgcHJvcC5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAocHJvcC52YWx1ZSkgcHJvcC53cml0YWJsZSA9IHRydWU7IH0gT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcyk7IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTtcblxuXHR2YXIgX2NsYXNzQ2FsbENoZWNrID0gZnVuY3Rpb24gKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH07XG5cblx0dmFyIENPTkZJRyA9IF9pbnRlcm9wUmVxdWlyZShfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKTtcblxuXHR2YXIgY29weSA9IGFuZ3VsYXIuY29weTtcblx0dmFyIGlzRWxlbWVudCA9IGFuZ3VsYXIuaXNFbGVtZW50O1xuXHR2YXIgaXNTdHJpbmcgPSBhbmd1bGFyLmlzU3RyaW5nO1xuXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIEZpbGVMaWtlT2JqZWN0ID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIEZpbGVMaWtlT2JqZWN0XG5cdCAgICAgICAgICogQHBhcmFtIHtGaWxlfEhUTUxJbnB1dEVsZW1lbnR8T2JqZWN0fSBmaWxlT3JJbnB1dFxuXHQgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuXHQgICAgICAgICAqL1xuXG5cdCAgICAgICAgZnVuY3Rpb24gRmlsZUxpa2VPYmplY3QoZmlsZU9ySW5wdXQpIHtcblx0ICAgICAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZpbGVMaWtlT2JqZWN0KTtcblxuXHQgICAgICAgICAgICB2YXIgaXNJbnB1dCA9IGlzRWxlbWVudChmaWxlT3JJbnB1dCk7XG5cdCAgICAgICAgICAgIHZhciBmYWtlUGF0aE9yT2JqZWN0ID0gaXNJbnB1dCA/IGZpbGVPcklucHV0LnZhbHVlIDogZmlsZU9ySW5wdXQ7XG5cdCAgICAgICAgICAgIHZhciBwb3N0Zml4ID0gaXNTdHJpbmcoZmFrZVBhdGhPck9iamVjdCkgPyBcIkZha2VQYXRoXCIgOiBcIk9iamVjdFwiO1xuXHQgICAgICAgICAgICB2YXIgbWV0aG9kID0gXCJfY3JlYXRlRnJvbVwiICsgcG9zdGZpeDtcblx0ICAgICAgICAgICAgdGhpc1ttZXRob2RdKGZha2VQYXRoT3JPYmplY3QpO1xuXHQgICAgICAgIH1cblxuXHQgICAgICAgIF9jcmVhdGVDbGFzcyhGaWxlTGlrZU9iamVjdCwge1xuXHQgICAgICAgICAgICBfY3JlYXRlRnJvbUZha2VQYXRoOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENyZWF0ZXMgZmlsZSBsaWtlIG9iamVjdCBmcm9tIGZha2UgcGF0aCBzdHJpbmdcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfY3JlYXRlRnJvbUZha2VQYXRoKHBhdGgpIHtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmxhc3RNb2RpZmllZERhdGUgPSBudWxsO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuc2l6ZSA9IG51bGw7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy50eXBlID0gXCJsaWtlL1wiICsgcGF0aC5zbGljZShwYXRoLmxhc3RJbmRleE9mKFwiLlwiKSArIDEpLnRvTG93ZXJDYXNlKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5uYW1lID0gcGF0aC5zbGljZShwYXRoLmxhc3RJbmRleE9mKFwiL1wiKSArIHBhdGgubGFzdEluZGV4T2YoXCJcXFxcXCIpICsgMik7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9jcmVhdGVGcm9tT2JqZWN0OiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENyZWF0ZXMgZmlsZSBsaWtlIG9iamVjdCBmcm9tIG9iamVjdFxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtGaWxlfEZpbGVMaWtlT2JqZWN0fSBvYmplY3Rcblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9jcmVhdGVGcm9tT2JqZWN0KG9iamVjdCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMubGFzdE1vZGlmaWVkRGF0ZSA9IGNvcHkob2JqZWN0Lmxhc3RNb2RpZmllZERhdGUpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuc2l6ZSA9IG9iamVjdC5zaXplO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMudHlwZSA9IG9iamVjdC50eXBlO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMubmFtZSA9IG9iamVjdC5uYW1lO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cblx0ICAgICAgICByZXR1cm4gRmlsZUxpa2VPYmplY3Q7XG5cdCAgICB9KSgpO1xuXG5cdCAgICByZXR1cm4gRmlsZUxpa2VPYmplY3Q7XG5cdH07XG5cblx0bW9kdWxlLmV4cG9ydHMuJGluamVjdCA9IFtdO1xuXG4vKioqLyB9LFxuLyogNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0dmFyIF9pbnRlcm9wUmVxdWlyZSA9IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9ialtcImRlZmF1bHRcIl0gOiBvYmo7IH07XG5cblx0dmFyIF9jcmVhdGVDbGFzcyA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBrZXkgaW4gcHJvcHMpIHsgdmFyIHByb3AgPSBwcm9wc1trZXldOyBwcm9wLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChwcm9wLnZhbHVlKSBwcm9wLndyaXRhYmxlID0gdHJ1ZTsgfSBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKTsgfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KSgpO1xuXG5cdHZhciBfY2xhc3NDYWxsQ2hlY2sgPSBmdW5jdGlvbiAoaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfTtcblxuXHR2YXIgQ09ORklHID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oMSkpO1xuXG5cdHZhciBjb3B5ID0gYW5ndWxhci5jb3B5O1xuXHR2YXIgZXh0ZW5kID0gYW5ndWxhci5leHRlbmQ7XG5cdHZhciBlbGVtZW50ID0gYW5ndWxhci5lbGVtZW50O1xuXHR2YXIgaXNFbGVtZW50ID0gYW5ndWxhci5pc0VsZW1lbnQ7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoJGNvbXBpbGUsIEZpbGVMaWtlT2JqZWN0KSB7XG5cdCAgICB2YXIgRmlsZUl0ZW0gPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIC8qKlxuXHQgICAgICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgRmlsZUl0ZW1cblx0ICAgICAgICAgKiBAcGFyYW0ge0ZpbGVVcGxvYWRlcn0gdXBsb2FkZXJcblx0ICAgICAgICAgKiBAcGFyYW0ge0ZpbGV8SFRNTElucHV0RWxlbWVudHxPYmplY3R9IHNvbWVcblx0ICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuXHQgICAgICAgICAqL1xuXG5cdCAgICAgICAgZnVuY3Rpb24gRmlsZUl0ZW0odXBsb2FkZXIsIHNvbWUsIG9wdGlvbnMpIHtcblx0ICAgICAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZpbGVJdGVtKTtcblxuXHQgICAgICAgICAgICB2YXIgaXNJbnB1dCA9IGlzRWxlbWVudChzb21lKTtcblx0ICAgICAgICAgICAgdmFyIGlucHV0ID0gaXNJbnB1dCA/IGVsZW1lbnQoc29tZSkgOiBudWxsO1xuXHQgICAgICAgICAgICB2YXIgZmlsZSA9ICFpc0lucHV0ID8gc29tZSA6IG51bGw7XG5cblx0ICAgICAgICAgICAgZXh0ZW5kKHRoaXMsIHtcblx0ICAgICAgICAgICAgICAgIHVybDogdXBsb2FkZXIudXJsLFxuXHQgICAgICAgICAgICAgICAgYWxpYXM6IHVwbG9hZGVyLmFsaWFzLFxuXHQgICAgICAgICAgICAgICAgaGVhZGVyczogY29weSh1cGxvYWRlci5oZWFkZXJzKSxcblx0ICAgICAgICAgICAgICAgIGZvcm1EYXRhOiBjb3B5KHVwbG9hZGVyLmZvcm1EYXRhKSxcblx0ICAgICAgICAgICAgICAgIHJlbW92ZUFmdGVyVXBsb2FkOiB1cGxvYWRlci5yZW1vdmVBZnRlclVwbG9hZCxcblx0ICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdXBsb2FkZXIud2l0aENyZWRlbnRpYWxzLFxuXHQgICAgICAgICAgICAgICAgbWV0aG9kOiB1cGxvYWRlci5tZXRob2Rcblx0ICAgICAgICAgICAgfSwgb3B0aW9ucywge1xuXHQgICAgICAgICAgICAgICAgdXBsb2FkZXI6IHVwbG9hZGVyLFxuXHQgICAgICAgICAgICAgICAgZmlsZTogbmV3IEZpbGVMaWtlT2JqZWN0KHNvbWUpLFxuXHQgICAgICAgICAgICAgICAgaXNSZWFkeTogZmFsc2UsXG5cdCAgICAgICAgICAgICAgICBpc1VwbG9hZGluZzogZmFsc2UsXG5cdCAgICAgICAgICAgICAgICBpc1VwbG9hZGVkOiBmYWxzZSxcblx0ICAgICAgICAgICAgICAgIGlzU3VjY2VzczogZmFsc2UsXG5cdCAgICAgICAgICAgICAgICBpc0NhbmNlbDogZmFsc2UsXG5cdCAgICAgICAgICAgICAgICBpc0Vycm9yOiBmYWxzZSxcblx0ICAgICAgICAgICAgICAgIHByb2dyZXNzOiAwLFxuXHQgICAgICAgICAgICAgICAgaW5kZXg6IG51bGwsXG5cdCAgICAgICAgICAgICAgICBfZmlsZTogZmlsZSxcblx0ICAgICAgICAgICAgICAgIF9pbnB1dDogaW5wdXRcblx0ICAgICAgICAgICAgfSk7XG5cblx0ICAgICAgICAgICAgaWYgKGlucHV0KSB0aGlzLl9yZXBsYWNlTm9kZShpbnB1dCk7XG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgX2NyZWF0ZUNsYXNzKEZpbGVJdGVtLCB7XG5cdCAgICAgICAgICAgIHVwbG9hZDoge1xuXHQgICAgICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKipcblx0ICAgICAgICAgICAgICAgICAqIFBVQkxJQ1xuXHQgICAgICAgICAgICAgICAgICoqKioqKioqKioqKioqKioqKioqKiovXG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFVwbG9hZHMgYSBGaWxlSXRlbVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiB1cGxvYWQoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGxvYWRlci51cGxvYWRJdGVtKHRoaXMpO1xuXHQgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGxvYWRlci5fb25Db21wbGV0ZUl0ZW0odGhpcywgXCJcIiwgMCwgW10pO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwbG9hZGVyLl9vbkVycm9ySXRlbSh0aGlzLCBcIlwiLCAwLCBbXSk7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBjYW5jZWw6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogQ2FuY2VscyB1cGxvYWRpbmcgb2YgRmlsZUl0ZW1cblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2FuY2VsKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMudXBsb2FkZXIuY2FuY2VsSXRlbSh0aGlzKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgcmVtb3ZlOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJlbW92ZXMgYSBGaWxlSXRlbVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmUoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy51cGxvYWRlci5yZW1vdmVGcm9tUXVldWUodGhpcyk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIG9uQmVmb3JlVXBsb2FkOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvbkJlZm9yZVVwbG9hZCgpIHt9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIG9uUHJvZ3Jlc3M6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogQ2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBwcm9ncmVzc1xuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25Qcm9ncmVzcyhwcm9ncmVzcykge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgb25TdWNjZXNzOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyp9IHJlc3BvbnNlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gc3RhdHVzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaGVhZGVyc1xuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvblN1Y2Nlc3MocmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycykge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgb25FcnJvcjoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSByZXNwb25zZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHN0YXR1c1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGhlYWRlcnNcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25FcnJvcihyZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKSB7fVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBvbkNhbmNlbDoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSByZXNwb25zZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHN0YXR1c1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGhlYWRlcnNcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25DYW5jZWwocmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycykge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgb25Db21wbGV0ZToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSByZXNwb25zZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHN0YXR1c1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGhlYWRlcnNcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25Db21wbGV0ZShyZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKSB7fVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfb25CZWZvcmVVcGxvYWQ6IHtcblx0ICAgICAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqXG5cdCAgICAgICAgICAgICAgICAgKiBQUklWQVRFXG5cdCAgICAgICAgICAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKi9cblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogSW5uZXIgY2FsbGJhY2tcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX29uQmVmb3JlVXBsb2FkKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNSZWFkeSA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1VwbG9hZGluZyA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1VwbG9hZGVkID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1N1Y2Nlc3MgPSBmYWxzZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQ2FuY2VsID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0Vycm9yID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9ncmVzcyA9IDA7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkJlZm9yZVVwbG9hZCgpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfb25Qcm9ncmVzczoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBJbm5lciBjYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHByb2dyZXNzXG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfb25Qcm9ncmVzcyhwcm9ncmVzcykge1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvZ3Jlc3MgPSBwcm9ncmVzcztcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLm9uUHJvZ3Jlc3MocHJvZ3Jlc3MpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfb25TdWNjZXNzOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIElubmVyIGNhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyp9IHJlc3BvbnNlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gc3RhdHVzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaGVhZGVyc1xuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX29uU3VjY2VzcyhyZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1JlYWR5ID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1VwbG9hZGluZyA9IGZhbHNlO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNVcGxvYWRlZCA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1N1Y2Nlc3MgPSB0cnVlO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNDYW5jZWwgPSBmYWxzZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzRXJyb3IgPSBmYWxzZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2dyZXNzID0gMTAwO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5kZXggPSBudWxsO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMub25TdWNjZXNzKHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfb25FcnJvcjoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBJbm5lciBjYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSByZXNwb25zZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHN0YXR1c1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGhlYWRlcnNcblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkVycm9yKHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpIHtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzUmVhZHkgPSBmYWxzZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzVXBsb2FkaW5nID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1VwbG9hZGVkID0gdHJ1ZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzU3VjY2VzcyA9IGZhbHNlO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNDYW5jZWwgPSBmYWxzZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzRXJyb3IgPSB0cnVlO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvZ3Jlc3MgPSAwO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5kZXggPSBudWxsO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMub25FcnJvcihyZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX29uQ2FuY2VsOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIElubmVyIGNhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0geyp9IHJlc3BvbnNlXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge051bWJlcn0gc3RhdHVzXG5cdCAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gaGVhZGVyc1xuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX29uQ2FuY2VsKHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpIHtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzUmVhZHkgPSBmYWxzZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzVXBsb2FkaW5nID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1VwbG9hZGVkID0gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1N1Y2Nlc3MgPSBmYWxzZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQ2FuY2VsID0gdHJ1ZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmlzRXJyb3IgPSBmYWxzZTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2dyZXNzID0gMDtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmluZGV4ID0gbnVsbDtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQ2FuY2VsKHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfb25Db21wbGV0ZToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBJbm5lciBjYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHsqfSByZXNwb25zZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHN0YXR1c1xuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGhlYWRlcnNcblx0ICAgICAgICAgICAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkNvbXBsZXRlKHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpIHtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQ29tcGxldGUocmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycyk7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVtb3ZlQWZ0ZXJVcGxvYWQpIHRoaXMucmVtb3ZlKCk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9kZXN0cm95OiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIERlc3Ryb3lzIGEgRmlsZUl0ZW1cblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2Rlc3Ryb3koKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2lucHV0KSB0aGlzLl9pbnB1dC5yZW1vdmUoKTtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fZm9ybSkgdGhpcy5fZm9ybS5yZW1vdmUoKTtcblx0ICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5fZm9ybTtcblx0ICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5faW5wdXQ7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9wcmVwYXJlVG9VcGxvYWRpbmc6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUHJlcGFyZXMgdG8gdXBsb2FkaW5nXG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcHJlcGFyZVRvVXBsb2FkaW5nKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5kZXggPSB0aGlzLmluZGV4IHx8ICsrdGhpcy51cGxvYWRlci5fbmV4dEluZGV4O1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNSZWFkeSA9IHRydWU7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9yZXBsYWNlTm9kZToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBSZXBsYWNlcyBpbnB1dCBlbGVtZW50IG9uIGhpcyBjbG9uZVxuXHQgICAgICAgICAgICAgICAgICogQHBhcmFtIHtKUUxpdGV8alF1ZXJ5fSBpbnB1dFxuXHQgICAgICAgICAgICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX3JlcGxhY2VOb2RlKGlucHV0KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIGNsb25lID0gJGNvbXBpbGUoaW5wdXQuY2xvbmUoKSkoaW5wdXQuc2NvcGUoKSk7XG5cdCAgICAgICAgICAgICAgICAgICAgY2xvbmUucHJvcChcInZhbHVlXCIsIG51bGwpOyAvLyBGRiBmaXhcblx0ICAgICAgICAgICAgICAgICAgICBpbnB1dC5jc3MoXCJkaXNwbGF5XCIsIFwibm9uZVwiKTtcblx0ICAgICAgICAgICAgICAgICAgICBpbnB1dC5hZnRlcihjbG9uZSk7IC8vIHJlbW92ZSBqcXVlcnkgZGVwZW5kZW5jeVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cblx0ICAgICAgICByZXR1cm4gRmlsZUl0ZW07XG5cdCAgICB9KSgpO1xuXG5cdCAgICByZXR1cm4gRmlsZUl0ZW07XG5cdH07XG5cblx0bW9kdWxlLmV4cG9ydHMuJGluamVjdCA9IFtcIiRjb21waWxlXCIsIFwiRmlsZUxpa2VPYmplY3RcIl07XG5cbi8qKiovIH0sXG4vKiA2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblxuXHR2YXIgX2ludGVyb3BSZXF1aXJlID0gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqW1wiZGVmYXVsdFwiXSA6IG9iajsgfTtcblxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGtleSBpbiBwcm9wcykgeyB2YXIgcHJvcCA9IHByb3BzW2tleV07IHByb3AuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKHByb3AudmFsdWUpIHByb3Aud3JpdGFibGUgPSB0cnVlOyB9IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpOyB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0pKCk7XG5cblx0dmFyIF9jbGFzc0NhbGxDaGVjayA9IGZ1bmN0aW9uIChpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9O1xuXG5cdHZhciBDT05GSUcgPSBfaW50ZXJvcFJlcXVpcmUoX193ZWJwYWNrX3JlcXVpcmVfXygxKSk7XG5cblx0dmFyIGV4dGVuZCA9IGFuZ3VsYXIuZXh0ZW5kO1xuXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIEZpbGVEaXJlY3RpdmUgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIC8qKlxuXHQgICAgICAgICAqIENyZWF0ZXMgaW5zdGFuY2Ugb2Yge0ZpbGVEaXJlY3RpdmV9IG9iamVjdFxuXHQgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMudXBsb2FkZXJcblx0ICAgICAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBvcHRpb25zLmVsZW1lbnRcblx0ICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucy5ldmVudHNcblx0ICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gb3B0aW9ucy5wcm9wXG5cdCAgICAgICAgICogQGNvbnN0cnVjdG9yXG5cdCAgICAgICAgICovXG5cblx0ICAgICAgICBmdW5jdGlvbiBGaWxlRGlyZWN0aXZlKG9wdGlvbnMpIHtcblx0ICAgICAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZpbGVEaXJlY3RpdmUpO1xuXG5cdCAgICAgICAgICAgIGV4dGVuZCh0aGlzLCBvcHRpb25zKTtcblx0ICAgICAgICAgICAgdGhpcy51cGxvYWRlci5fZGlyZWN0aXZlc1t0aGlzLnByb3BdLnB1c2godGhpcyk7XG5cdCAgICAgICAgICAgIHRoaXMuX3NhdmVMaW5rcygpO1xuXHQgICAgICAgICAgICB0aGlzLmJpbmQoKTtcblx0ICAgICAgICB9XG5cblx0ICAgICAgICBfY3JlYXRlQ2xhc3MoRmlsZURpcmVjdGl2ZSwge1xuXHQgICAgICAgICAgICBiaW5kOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIEJpbmRzIGV2ZW50cyBoYW5kbGVzXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMuZXZlbnRzKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcm9wID0gdGhpcy5ldmVudHNba2V5XTtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmJpbmQoa2V5LCB0aGlzW3Byb3BdKTtcblx0ICAgICAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIHVuYmluZDoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBVbmJpbmRzIGV2ZW50cyBoYW5kbGVzXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHVuYmluZCgpIHtcblx0ICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5ldmVudHMpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnVuYmluZChrZXksIHRoaXMuZXZlbnRzW2tleV0pO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgZGVzdHJveToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBEZXN0cm95cyBkaXJlY3RpdmVcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSB0aGlzLnVwbG9hZGVyLl9kaXJlY3RpdmVzW3RoaXMucHJvcF0uaW5kZXhPZih0aGlzKTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLnVwbG9hZGVyLl9kaXJlY3RpdmVzW3RoaXMucHJvcF0uc3BsaWNlKGluZGV4LCAxKTtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLnVuYmluZCgpO1xuXHQgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuZWxlbWVudCA9IG51bGw7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9zYXZlTGlua3M6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogU2F2ZXMgbGlua3MgdG8gZnVuY3Rpb25zXG5cdCAgICAgICAgICAgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2F2ZUxpbmtzKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLmV2ZW50cykge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJvcCA9IHRoaXMuZXZlbnRzW2tleV07XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNbcHJvcF0gPSB0aGlzW3Byb3BdLmJpbmQodGhpcyk7XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cblx0ICAgICAgICByZXR1cm4gRmlsZURpcmVjdGl2ZTtcblx0ICAgIH0pKCk7XG5cblx0ICAgIC8qKlxuXHQgICAgICogTWFwIG9mIGV2ZW50c1xuXHQgICAgICogQHR5cGUge09iamVjdH1cblx0ICAgICAqL1xuXHQgICAgRmlsZURpcmVjdGl2ZS5wcm90b3R5cGUuZXZlbnRzID0ge307XG5cblx0ICAgIHJldHVybiBGaWxlRGlyZWN0aXZlO1xuXHR9O1xuXG5cdG1vZHVsZS5leHBvcnRzLiRpbmplY3QgPSBbXTtcblxuLyoqKi8gfSxcbi8qIDcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdHZhciBfaW50ZXJvcFJlcXVpcmUgPSBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmpbXCJkZWZhdWx0XCJdIDogb2JqOyB9O1xuXG5cdHZhciBfY3JlYXRlQ2xhc3MgPSAoZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIga2V5IGluIHByb3BzKSB7IHZhciBwcm9wID0gcHJvcHNba2V5XTsgcHJvcC5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAocHJvcC52YWx1ZSkgcHJvcC53cml0YWJsZSA9IHRydWU7IH0gT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcyk7IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTtcblxuXHR2YXIgX2dldCA9IGZ1bmN0aW9uIGdldChvYmplY3QsIHByb3BlcnR5LCByZWNlaXZlcikgeyB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBwcm9wZXJ0eSk7IGlmIChkZXNjID09PSB1bmRlZmluZWQpIHsgdmFyIHBhcmVudCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmplY3QpOyBpZiAocGFyZW50ID09PSBudWxsKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gZWxzZSB7IHJldHVybiBnZXQocGFyZW50LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpOyB9IH0gZWxzZSBpZiAoXCJ2YWx1ZVwiIGluIGRlc2MgJiYgZGVzYy53cml0YWJsZSkgeyByZXR1cm4gZGVzYy52YWx1ZTsgfSBlbHNlIHsgdmFyIGdldHRlciA9IGRlc2MuZ2V0OyBpZiAoZ2V0dGVyID09PSB1bmRlZmluZWQpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSByZXR1cm4gZ2V0dGVyLmNhbGwocmVjZWl2ZXIpOyB9IH07XG5cblx0dmFyIF9pbmhlcml0cyA9IGZ1bmN0aW9uIChzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9O1xuXG5cdHZhciBfY2xhc3NDYWxsQ2hlY2sgPSBmdW5jdGlvbiAoaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfTtcblxuXHR2YXIgQ09ORklHID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oMSkpO1xuXG5cdHZhciBleHRlbmQgPSBhbmd1bGFyLmV4dGVuZDtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChGaWxlRGlyZWN0aXZlKSB7XG5cdCAgICB2YXIgRmlsZVNlbGVjdCA9IChmdW5jdGlvbiAoX0ZpbGVEaXJlY3RpdmUpIHtcblx0ICAgICAgICAvKipcblx0ICAgICAgICAgKiBDcmVhdGVzIGluc3RhbmNlIG9mIHtGaWxlU2VsZWN0fSBvYmplY3Rcblx0ICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuXHQgICAgICAgICAqL1xuXG5cdCAgICAgICAgZnVuY3Rpb24gRmlsZVNlbGVjdChvcHRpb25zKSB7XG5cdCAgICAgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBGaWxlU2VsZWN0KTtcblxuXHQgICAgICAgICAgICB2YXIgZXh0ZW5kZWRPcHRpb25zID0gZXh0ZW5kKG9wdGlvbnMsIHtcblx0ICAgICAgICAgICAgICAgIC8vIE1hcCBvZiBldmVudHNcblx0ICAgICAgICAgICAgICAgIGV2ZW50czoge1xuXHQgICAgICAgICAgICAgICAgICAgICRkZXN0cm95OiBcImRlc3Ryb3lcIixcblx0ICAgICAgICAgICAgICAgICAgICBjaGFuZ2U6IFwib25DaGFuZ2VcIlxuXHQgICAgICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgICAgIC8vIE5hbWUgb2YgcHJvcGVydHkgaW5zaWRlIHVwbG9hZGVyLl9kaXJlY3RpdmUgb2JqZWN0XG5cdCAgICAgICAgICAgICAgICBwcm9wOiBcInNlbGVjdFwiXG5cdCAgICAgICAgICAgIH0pO1xuXG5cdCAgICAgICAgICAgIF9nZXQoT2JqZWN0LmdldFByb3RvdHlwZU9mKEZpbGVTZWxlY3QucHJvdG90eXBlKSwgXCJjb25zdHJ1Y3RvclwiLCB0aGlzKS5jYWxsKHRoaXMsIGV4dGVuZGVkT3B0aW9ucyk7XG5cblx0ICAgICAgICAgICAgaWYgKCF0aGlzLnVwbG9hZGVyLmlzSFRNTDUpIHtcblx0ICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5yZW1vdmVBdHRyKFwibXVsdGlwbGVcIik7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgdGhpcy5lbGVtZW50LnByb3AoXCJ2YWx1ZVwiLCBudWxsKTsgLy8gRkYgZml4XG5cdCAgICAgICAgfVxuXG5cdCAgICAgICAgX2luaGVyaXRzKEZpbGVTZWxlY3QsIF9GaWxlRGlyZWN0aXZlKTtcblxuXHQgICAgICAgIF9jcmVhdGVDbGFzcyhGaWxlU2VsZWN0LCB7XG5cdCAgICAgICAgICAgIGdldE9wdGlvbnM6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmV0dXJucyBvcHRpb25zXG5cdCAgICAgICAgICAgICAgICAgKiBAcmV0dXJuIHtPYmplY3R8dW5kZWZpbmVkfVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRPcHRpb25zKCkge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgZ2V0RmlsdGVyczoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBSZXR1cm5zIGZpbHRlcnNcblx0ICAgICAgICAgICAgICAgICAqIEByZXR1cm4ge0FycmF5PEZ1bmN0aW9uPnxTdHJpbmd8dW5kZWZpbmVkfVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRGaWx0ZXJzKCkge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgaXNFbXB0eUFmdGVyU2VsZWN0aW9uOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIElmIHJldHVybnMgXCJ0cnVlXCIgdGhlbiBIVE1MSW5wdXRFbGVtZW50IHdpbGwgYmUgY2xlYXJlZFxuXHQgICAgICAgICAgICAgICAgICogQHJldHVybnMge0Jvb2xlYW59XG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGlzRW1wdHlBZnRlclNlbGVjdGlvbigpIHtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gISF0aGlzLmVsZW1lbnQuYXR0cihcIm11bHRpcGxlXCIpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBvbkNoYW5nZToge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBFdmVudCBoYW5kbGVyXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9uQ2hhbmdlKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBmaWxlcyA9IHRoaXMudXBsb2FkZXIuaXNIVE1MNSA/IHRoaXMuZWxlbWVudFswXS5maWxlcyA6IHRoaXMuZWxlbWVudFswXTtcblx0ICAgICAgICAgICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHRoaXMuZ2V0T3B0aW9ucygpO1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBmaWx0ZXJzID0gdGhpcy5nZXRGaWx0ZXJzKCk7XG5cblx0ICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMudXBsb2FkZXIuaXNIVE1MNSkgdGhpcy5kZXN0cm95KCk7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy51cGxvYWRlci5hZGRUb1F1ZXVlKGZpbGVzLCBvcHRpb25zLCBmaWx0ZXJzKTtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0VtcHR5QWZ0ZXJTZWxlY3Rpb24oKSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucHJvcChcInZhbHVlXCIsIG51bGwpO1xuXHQgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucmVwbGFjZVdpdGgodGhpcy5lbGVtZW50ID0gdGhpcy5lbGVtZW50LmNsb25lKHRydWUpKTsgLy8gSUUgZml4XG5cdCAgICAgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cblx0ICAgICAgICByZXR1cm4gRmlsZVNlbGVjdDtcblx0ICAgIH0pKEZpbGVEaXJlY3RpdmUpO1xuXG5cdCAgICByZXR1cm4gRmlsZVNlbGVjdDtcblx0fTtcblxuXHRtb2R1bGUuZXhwb3J0cy4kaW5qZWN0ID0gW1wiRmlsZURpcmVjdGl2ZVwiXTtcblxuLyoqKi8gfSxcbi8qIDggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdHZhciBfaW50ZXJvcFJlcXVpcmUgPSBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmpbXCJkZWZhdWx0XCJdIDogb2JqOyB9O1xuXG5cdHZhciBfY3JlYXRlQ2xhc3MgPSAoZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIga2V5IGluIHByb3BzKSB7IHZhciBwcm9wID0gcHJvcHNba2V5XTsgcHJvcC5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAocHJvcC52YWx1ZSkgcHJvcC53cml0YWJsZSA9IHRydWU7IH0gT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcyk7IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTtcblxuXHR2YXIgX2dldCA9IGZ1bmN0aW9uIGdldChvYmplY3QsIHByb3BlcnR5LCByZWNlaXZlcikgeyB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBwcm9wZXJ0eSk7IGlmIChkZXNjID09PSB1bmRlZmluZWQpIHsgdmFyIHBhcmVudCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmplY3QpOyBpZiAocGFyZW50ID09PSBudWxsKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gZWxzZSB7IHJldHVybiBnZXQocGFyZW50LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpOyB9IH0gZWxzZSBpZiAoXCJ2YWx1ZVwiIGluIGRlc2MgJiYgZGVzYy53cml0YWJsZSkgeyByZXR1cm4gZGVzYy52YWx1ZTsgfSBlbHNlIHsgdmFyIGdldHRlciA9IGRlc2MuZ2V0OyBpZiAoZ2V0dGVyID09PSB1bmRlZmluZWQpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSByZXR1cm4gZ2V0dGVyLmNhbGwocmVjZWl2ZXIpOyB9IH07XG5cblx0dmFyIF9pbmhlcml0cyA9IGZ1bmN0aW9uIChzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9O1xuXG5cdHZhciBfY2xhc3NDYWxsQ2hlY2sgPSBmdW5jdGlvbiAoaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfTtcblxuXHR2YXIgQ09ORklHID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oMSkpO1xuXG5cdHZhciBleHRlbmQgPSBhbmd1bGFyLmV4dGVuZDtcblx0dmFyIGZvckVhY2ggPSBhbmd1bGFyLmZvckVhY2g7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoRmlsZURpcmVjdGl2ZSkge1xuXHQgICAgdmFyIEZpbGVEcm9wID0gKGZ1bmN0aW9uIChfRmlsZURpcmVjdGl2ZSkge1xuXHQgICAgICAgIC8qKlxuXHQgICAgICAgICAqIENyZWF0ZXMgaW5zdGFuY2Ugb2Yge0ZpbGVEcm9wfSBvYmplY3Rcblx0ICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuXHQgICAgICAgICAqL1xuXG5cdCAgICAgICAgZnVuY3Rpb24gRmlsZURyb3Aob3B0aW9ucykge1xuXHQgICAgICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRmlsZURyb3ApO1xuXG5cdCAgICAgICAgICAgIHZhciBleHRlbmRlZE9wdGlvbnMgPSBleHRlbmQob3B0aW9ucywge1xuXHQgICAgICAgICAgICAgICAgLy8gTWFwIG9mIGV2ZW50c1xuXHQgICAgICAgICAgICAgICAgZXZlbnRzOiB7XG5cdCAgICAgICAgICAgICAgICAgICAgJGRlc3Ryb3k6IFwiZGVzdHJveVwiLFxuXHQgICAgICAgICAgICAgICAgICAgIGRyb3A6IFwib25Ecm9wXCIsXG5cdCAgICAgICAgICAgICAgICAgICAgZHJhZ292ZXI6IFwib25EcmFnT3ZlclwiLFxuXHQgICAgICAgICAgICAgICAgICAgIGRyYWdsZWF2ZTogXCJvbkRyYWdMZWF2ZVwiXG5cdCAgICAgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICAgICAgLy8gTmFtZSBvZiBwcm9wZXJ0eSBpbnNpZGUgdXBsb2FkZXIuX2RpcmVjdGl2ZSBvYmplY3Rcblx0ICAgICAgICAgICAgICAgIHByb3A6IFwiZHJvcFwiXG5cdCAgICAgICAgICAgIH0pO1xuXG5cdCAgICAgICAgICAgIF9nZXQoT2JqZWN0LmdldFByb3RvdHlwZU9mKEZpbGVEcm9wLnByb3RvdHlwZSksIFwiY29uc3RydWN0b3JcIiwgdGhpcykuY2FsbCh0aGlzLCBleHRlbmRlZE9wdGlvbnMpO1xuXHQgICAgICAgIH1cblxuXHQgICAgICAgIF9pbmhlcml0cyhGaWxlRHJvcCwgX0ZpbGVEaXJlY3RpdmUpO1xuXG5cdCAgICAgICAgX2NyZWF0ZUNsYXNzKEZpbGVEcm9wLCB7XG5cdCAgICAgICAgICAgIGdldE9wdGlvbnM6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmV0dXJucyBvcHRpb25zXG5cdCAgICAgICAgICAgICAgICAgKiBAcmV0dXJuIHtPYmplY3R8dW5kZWZpbmVkfVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRPcHRpb25zKCkge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgZ2V0RmlsdGVyczoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBSZXR1cm5zIGZpbHRlcnNcblx0ICAgICAgICAgICAgICAgICAqIEByZXR1cm4ge0FycmF5PEZ1bmN0aW9uPnxTdHJpbmd8dW5kZWZpbmVkfVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRGaWx0ZXJzKCkge31cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgb25Ecm9wOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIEV2ZW50IGhhbmRsZXJcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25Ecm9wKGV2ZW50KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIHRyYW5zZmVyID0gdGhpcy5fZ2V0VHJhbnNmZXIoZXZlbnQpO1xuXHQgICAgICAgICAgICAgICAgICAgIGlmICghdHJhbnNmZXIpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgICAgICAgICAgICAgIH12YXIgb3B0aW9ucyA9IHRoaXMuZ2V0T3B0aW9ucygpO1xuXHQgICAgICAgICAgICAgICAgICAgIHZhciBmaWx0ZXJzID0gdGhpcy5nZXRGaWx0ZXJzKCk7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5fcHJldmVudEFuZFN0b3AoZXZlbnQpO1xuXHQgICAgICAgICAgICAgICAgICAgIGZvckVhY2godGhpcy51cGxvYWRlci5fZGlyZWN0aXZlcy5vdmVyLCB0aGlzLl9yZW1vdmVPdmVyQ2xhc3MsIHRoaXMpO1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMudXBsb2FkZXIuYWRkVG9RdWV1ZSh0cmFuc2Zlci5maWxlcywgb3B0aW9ucywgZmlsdGVycyk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIG9uRHJhZ092ZXI6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogRXZlbnQgaGFuZGxlclxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvbkRyYWdPdmVyKGV2ZW50KSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdmFyIHRyYW5zZmVyID0gdGhpcy5fZ2V0VHJhbnNmZXIoZXZlbnQpO1xuXHQgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5faGF2ZUZpbGVzKHRyYW5zZmVyLnR5cGVzKSkge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgICAgICAgICAgICAgfXRyYW5zZmVyLmRyb3BFZmZlY3QgPSBcImNvcHlcIjtcblx0ICAgICAgICAgICAgICAgICAgICB0aGlzLl9wcmV2ZW50QW5kU3RvcChldmVudCk7XG5cdCAgICAgICAgICAgICAgICAgICAgZm9yRWFjaCh0aGlzLnVwbG9hZGVyLl9kaXJlY3RpdmVzLm92ZXIsIHRoaXMuX2FkZE92ZXJDbGFzcywgdGhpcyk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIG9uRHJhZ0xlYXZlOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIEV2ZW50IGhhbmRsZXJcblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gb25EcmFnTGVhdmUoZXZlbnQpIHtcblx0ICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldCA9PT0gdGhpcy5lbGVtZW50WzBdKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICAgICAgICAgICAgICB9dGhpcy5fcHJldmVudEFuZFN0b3AoZXZlbnQpO1xuXHQgICAgICAgICAgICAgICAgICAgIGZvckVhY2godGhpcy51cGxvYWRlci5fZGlyZWN0aXZlcy5vdmVyLCB0aGlzLl9yZW1vdmVPdmVyQ2xhc3MsIHRoaXMpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfZ2V0VHJhbnNmZXI6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogSGVscGVyXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRUcmFuc2ZlcihldmVudCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBldmVudC5kYXRhVHJhbnNmZXIgPyBldmVudC5kYXRhVHJhbnNmZXIgOiBldmVudC5vcmlnaW5hbEV2ZW50LmRhdGFUcmFuc2ZlcjsgLy8galF1ZXJ5IGZpeDtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX3ByZXZlbnRBbmRTdG9wOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIEhlbHBlclxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcHJldmVudEFuZFN0b3AoZXZlbnQpIHtcblx0ICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHQgICAgICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfaGF2ZUZpbGVzOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJldHVybnMgXCJ0cnVlXCIgaWYgdHlwZXMgY29udGFpbnMgZmlsZXNcblx0ICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSB0eXBlc1xuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGF2ZUZpbGVzKHR5cGVzKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgaWYgKCF0eXBlcykge1xuXHQgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgICAgICAgICAgICAgICAgfWlmICh0eXBlcy5pbmRleE9mKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0eXBlcy5pbmRleE9mKFwiRmlsZXNcIikgIT09IC0xO1xuXHQgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZXMuY29udGFpbnMpIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVzLmNvbnRhaW5zKFwiRmlsZXNcIik7XG5cdCAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgX2FkZE92ZXJDbGFzczoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBDYWxsYmFja1xuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfYWRkT3ZlckNsYXNzKGl0ZW0pIHtcblx0ICAgICAgICAgICAgICAgICAgICBpdGVtLmFkZE92ZXJDbGFzcygpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfcmVtb3ZlT3ZlckNsYXNzOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIENhbGxiYWNrXG5cdCAgICAgICAgICAgICAgICAgKi9cblxuXHQgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW1vdmVPdmVyQ2xhc3MoaXRlbSkge1xuXHQgICAgICAgICAgICAgICAgICAgIGl0ZW0ucmVtb3ZlT3ZlckNsYXNzKCk7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9KTtcblxuXHQgICAgICAgIHJldHVybiBGaWxlRHJvcDtcblx0ICAgIH0pKEZpbGVEaXJlY3RpdmUpO1xuXG5cdCAgICByZXR1cm4gRmlsZURyb3A7XG5cdH07XG5cblx0bW9kdWxlLmV4cG9ydHMuJGluamVjdCA9IFtcIkZpbGVEaXJlY3RpdmVcIl07XG5cbi8qKiovIH0sXG4vKiA5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblxuXHR2YXIgX2ludGVyb3BSZXF1aXJlID0gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqW1wiZGVmYXVsdFwiXSA6IG9iajsgfTtcblxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gKGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGtleSBpbiBwcm9wcykgeyB2YXIgcHJvcCA9IHByb3BzW2tleV07IHByb3AuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKHByb3AudmFsdWUpIHByb3Aud3JpdGFibGUgPSB0cnVlOyB9IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpOyB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0pKCk7XG5cblx0dmFyIF9nZXQgPSBmdW5jdGlvbiBnZXQob2JqZWN0LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpIHsgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgcHJvcGVydHkpOyBpZiAoZGVzYyA9PT0gdW5kZWZpbmVkKSB7IHZhciBwYXJlbnQgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Yob2JqZWN0KTsgaWYgKHBhcmVudCA9PT0gbnVsbCkgeyByZXR1cm4gdW5kZWZpbmVkOyB9IGVsc2UgeyByZXR1cm4gZ2V0KHBhcmVudCwgcHJvcGVydHksIHJlY2VpdmVyKTsgfSB9IGVsc2UgaWYgKFwidmFsdWVcIiBpbiBkZXNjICYmIGRlc2Mud3JpdGFibGUpIHsgcmV0dXJuIGRlc2MudmFsdWU7IH0gZWxzZSB7IHZhciBnZXR0ZXIgPSBkZXNjLmdldDsgaWYgKGdldHRlciA9PT0gdW5kZWZpbmVkKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gcmV0dXJuIGdldHRlci5jYWxsKHJlY2VpdmVyKTsgfSB9O1xuXG5cdHZhciBfaW5oZXJpdHMgPSBmdW5jdGlvbiAoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfTtcblxuXHR2YXIgX2NsYXNzQ2FsbENoZWNrID0gZnVuY3Rpb24gKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH07XG5cblx0dmFyIENPTkZJRyA9IF9pbnRlcm9wUmVxdWlyZShfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKTtcblxuXHR2YXIgZXh0ZW5kID0gYW5ndWxhci5leHRlbmQ7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoRmlsZURpcmVjdGl2ZSkge1xuXHQgICAgdmFyIEZpbGVPdmVyID0gKGZ1bmN0aW9uIChfRmlsZURpcmVjdGl2ZSkge1xuXHQgICAgICAgIC8qKlxuXHQgICAgICAgICAqIENyZWF0ZXMgaW5zdGFuY2Ugb2Yge0ZpbGVEcm9wfSBvYmplY3Rcblx0ICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgICAgICAgICAqIEBjb25zdHJ1Y3RvclxuXHQgICAgICAgICAqL1xuXG5cdCAgICAgICAgZnVuY3Rpb24gRmlsZU92ZXIob3B0aW9ucykge1xuXHQgICAgICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRmlsZU92ZXIpO1xuXG5cdCAgICAgICAgICAgIHZhciBleHRlbmRlZE9wdGlvbnMgPSBleHRlbmQob3B0aW9ucywge1xuXHQgICAgICAgICAgICAgICAgLy8gTWFwIG9mIGV2ZW50c1xuXHQgICAgICAgICAgICAgICAgZXZlbnRzOiB7XG5cdCAgICAgICAgICAgICAgICAgICAgJGRlc3Ryb3k6IFwiZGVzdHJveVwiXG5cdCAgICAgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICAgICAgLy8gTmFtZSBvZiBwcm9wZXJ0eSBpbnNpZGUgdXBsb2FkZXIuX2RpcmVjdGl2ZSBvYmplY3Rcblx0ICAgICAgICAgICAgICAgIHByb3A6IFwib3ZlclwiLFxuXHQgICAgICAgICAgICAgICAgLy8gT3ZlciBjbGFzc1xuXHQgICAgICAgICAgICAgICAgb3ZlckNsYXNzOiBcIm52LWZpbGUtb3ZlclwiXG5cdCAgICAgICAgICAgIH0pO1xuXG5cdCAgICAgICAgICAgIF9nZXQoT2JqZWN0LmdldFByb3RvdHlwZU9mKEZpbGVPdmVyLnByb3RvdHlwZSksIFwiY29uc3RydWN0b3JcIiwgdGhpcykuY2FsbCh0aGlzLCBleHRlbmRlZE9wdGlvbnMpO1xuXHQgICAgICAgIH1cblxuXHQgICAgICAgIF9pbmhlcml0cyhGaWxlT3ZlciwgX0ZpbGVEaXJlY3RpdmUpO1xuXG5cdCAgICAgICAgX2NyZWF0ZUNsYXNzKEZpbGVPdmVyLCB7XG5cdCAgICAgICAgICAgIGFkZE92ZXJDbGFzczoge1xuXHQgICAgICAgICAgICAgICAgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBBZGRzIG92ZXIgY2xhc3Ncblx0ICAgICAgICAgICAgICAgICAqL1xuXG5cdCAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gYWRkT3ZlckNsYXNzKCkge1xuXHQgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hZGRDbGFzcyh0aGlzLmdldE92ZXJDbGFzcygpKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgcmVtb3ZlT3ZlckNsYXNzOiB7XG5cdCAgICAgICAgICAgICAgICAvKipcblx0ICAgICAgICAgICAgICAgICAqIFJlbW92ZXMgb3ZlciBjbGFzc1xuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmVPdmVyQ2xhc3MoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKHRoaXMuZ2V0T3ZlckNsYXNzKCkpO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBnZXRPdmVyQ2xhc3M6IHtcblx0ICAgICAgICAgICAgICAgIC8qKlxuXHQgICAgICAgICAgICAgICAgICogUmV0dXJucyBvdmVyIGNsYXNzXG5cdCAgICAgICAgICAgICAgICAgKiBAcmV0dXJucyB7U3RyaW5nfVxuXHQgICAgICAgICAgICAgICAgICovXG5cblx0ICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRPdmVyQ2xhc3MoKSB7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMub3ZlckNsYXNzO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cblx0ICAgICAgICByZXR1cm4gRmlsZU92ZXI7XG5cdCAgICB9KShGaWxlRGlyZWN0aXZlKTtcblxuXHQgICAgcmV0dXJuIEZpbGVPdmVyO1xuXHR9O1xuXG5cdG1vZHVsZS5leHBvcnRzLiRpbmplY3QgPSBbXCJGaWxlRGlyZWN0aXZlXCJdO1xuXG4vKioqLyB9LFxuLyogMTAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdHZhciBfaW50ZXJvcFJlcXVpcmUgPSBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmpbXCJkZWZhdWx0XCJdIDogb2JqOyB9O1xuXG5cdHZhciBDT05GSUcgPSBfaW50ZXJvcFJlcXVpcmUoX193ZWJwYWNrX3JlcXVpcmVfXygxKSk7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoJHBhcnNlLCBGaWxlVXBsb2FkZXIsIEZpbGVTZWxlY3QpIHtcblxuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHJpYnV0ZXMpIHtcblx0ICAgICAgICAgICAgdmFyIHVwbG9hZGVyID0gc2NvcGUuJGV2YWwoYXR0cmlidXRlcy51cGxvYWRlcik7XG5cblx0ICAgICAgICAgICAgaWYgKCEodXBsb2FkZXIgaW5zdGFuY2VvZiBGaWxlVXBsb2FkZXIpKSB7XG5cdCAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiXFxcIlVwbG9hZGVyXFxcIiBtdXN0IGJlIGFuIGluc3RhbmNlIG9mIEZpbGVVcGxvYWRlclwiKTtcblx0ICAgICAgICAgICAgfVxuXG5cdCAgICAgICAgICAgIHZhciBvYmplY3QgPSBuZXcgRmlsZVNlbGVjdCh7XG5cdCAgICAgICAgICAgICAgICB1cGxvYWRlcjogdXBsb2FkZXIsXG5cdCAgICAgICAgICAgICAgICBlbGVtZW50OiBlbGVtZW50XG5cdCAgICAgICAgICAgIH0pO1xuXG5cdCAgICAgICAgICAgIG9iamVjdC5nZXRPcHRpb25zID0gJHBhcnNlKGF0dHJpYnV0ZXMub3B0aW9ucykuYmluZChvYmplY3QsIHNjb3BlKTtcblx0ICAgICAgICAgICAgb2JqZWN0LmdldEZpbHRlcnMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICByZXR1cm4gYXR0cmlidXRlcy5maWx0ZXJzO1xuXHQgICAgICAgICAgICB9O1xuXHQgICAgICAgIH1cblx0ICAgIH07XG5cdH07XG5cblx0bW9kdWxlLmV4cG9ydHMuJGluamVjdCA9IFtcIiRwYXJzZVwiLCBcIkZpbGVVcGxvYWRlclwiLCBcIkZpbGVTZWxlY3RcIl07XG5cbi8qKiovIH0sXG4vKiAxMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0dmFyIF9pbnRlcm9wUmVxdWlyZSA9IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9ialtcImRlZmF1bHRcIl0gOiBvYmo7IH07XG5cblx0dmFyIENPTkZJRyA9IF9pbnRlcm9wUmVxdWlyZShfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKTtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICgkcGFyc2UsIEZpbGVVcGxvYWRlciwgRmlsZURyb3ApIHtcblxuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHJpYnV0ZXMpIHtcblx0ICAgICAgICAgICAgdmFyIHVwbG9hZGVyID0gc2NvcGUuJGV2YWwoYXR0cmlidXRlcy51cGxvYWRlcik7XG5cblx0ICAgICAgICAgICAgaWYgKCEodXBsb2FkZXIgaW5zdGFuY2VvZiBGaWxlVXBsb2FkZXIpKSB7XG5cdCAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiXFxcIlVwbG9hZGVyXFxcIiBtdXN0IGJlIGFuIGluc3RhbmNlIG9mIEZpbGVVcGxvYWRlclwiKTtcblx0ICAgICAgICAgICAgfVxuXG5cdCAgICAgICAgICAgIGlmICghdXBsb2FkZXIuaXNIVE1MNSkgcmV0dXJuO1xuXG5cdCAgICAgICAgICAgIHZhciBvYmplY3QgPSBuZXcgRmlsZURyb3Aoe1xuXHQgICAgICAgICAgICAgICAgdXBsb2FkZXI6IHVwbG9hZGVyLFxuXHQgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudFxuXHQgICAgICAgICAgICB9KTtcblxuXHQgICAgICAgICAgICBvYmplY3QuZ2V0T3B0aW9ucyA9ICRwYXJzZShhdHRyaWJ1dGVzLm9wdGlvbnMpLmJpbmQob2JqZWN0LCBzY29wZSk7XG5cdCAgICAgICAgICAgIG9iamVjdC5nZXRGaWx0ZXJzID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIGF0dHJpYnV0ZXMuZmlsdGVycztcblx0ICAgICAgICAgICAgfTtcblx0ICAgICAgICB9XG5cdCAgICB9O1xuXHR9O1xuXG5cdG1vZHVsZS5leHBvcnRzLiRpbmplY3QgPSBbXCIkcGFyc2VcIiwgXCJGaWxlVXBsb2FkZXJcIiwgXCJGaWxlRHJvcFwiXTtcblxuLyoqKi8gfSxcbi8qIDEyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblxuXHR2YXIgX2ludGVyb3BSZXF1aXJlID0gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqW1wiZGVmYXVsdFwiXSA6IG9iajsgfTtcblxuXHR2YXIgQ09ORklHID0gX2ludGVyb3BSZXF1aXJlKF9fd2VicGFja19yZXF1aXJlX18oMSkpO1xuXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKEZpbGVVcGxvYWRlciwgRmlsZU92ZXIpIHtcblxuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHJpYnV0ZXMpIHtcblx0ICAgICAgICAgICAgdmFyIHVwbG9hZGVyID0gc2NvcGUuJGV2YWwoYXR0cmlidXRlcy51cGxvYWRlcik7XG5cblx0ICAgICAgICAgICAgaWYgKCEodXBsb2FkZXIgaW5zdGFuY2VvZiBGaWxlVXBsb2FkZXIpKSB7XG5cdCAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiXFxcIlVwbG9hZGVyXFxcIiBtdXN0IGJlIGFuIGluc3RhbmNlIG9mIEZpbGVVcGxvYWRlclwiKTtcblx0ICAgICAgICAgICAgfVxuXG5cdCAgICAgICAgICAgIHZhciBvYmplY3QgPSBuZXcgRmlsZU92ZXIoe1xuXHQgICAgICAgICAgICAgICAgdXBsb2FkZXI6IHVwbG9hZGVyLFxuXHQgICAgICAgICAgICAgICAgZWxlbWVudDogZWxlbWVudFxuXHQgICAgICAgICAgICB9KTtcblxuXHQgICAgICAgICAgICBvYmplY3QuZ2V0T3ZlckNsYXNzID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIGF0dHJpYnV0ZXMub3ZlckNsYXNzIHx8IG9iamVjdC5vdmVyQ2xhc3M7XG5cdCAgICAgICAgICAgIH07XG5cdCAgICAgICAgfVxuXHQgICAgfTtcblx0fTtcblxuXHRtb2R1bGUuZXhwb3J0cy4kaW5qZWN0ID0gW1wiRmlsZVVwbG9hZGVyXCIsIFwiRmlsZU92ZXJcIl07XG5cbi8qKiovIH1cbi8qKioqKiovIF0pXG59KTtcbjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFuZ3VsYXItZmlsZS11cGxvYWQuanMubWFwXG5cbi8vIC0tQXV0aG9yIE11cmFnaWppbWFuYSBSaWNoYXJkIDxiZWFzdGFyNDU3QGdtYWlsLmNvbT5cbi8vIHZhciBzeW5jID0gYW5ndWxhci5tb2R1bGUoXCJzeW5jXCIsIFtcIm5nUm91dGVcIixcImFuZ3VsYXJGaWxlVXBsb2FkXCIsXCJpb25pY1wiLFwibmdSZXNvdXJjZVwiLFwidWkuYm9vdHN0cmFwXCIsXCJpbmZpbml0ZS1zY3JvbGxcIl0pO1xuLy8gbW9kdWxlLmV4cG9ydHMgPSBtb25nb29zZS5tb2RlbCgnYXBwQ29uZmlnJywge1xuXG5hbmd1bGFyLm1vZHVsZSgnQXV0aE1hbmFnZXInLFtdKS5zZXJ2aWNlKCdTZXNzaW9uU2VydmljZScsIFtmdW5jdGlvbigpe1xuICAgIHZhciB1c2VySXNBdXRoZW50aWNhdGVkID0gZmFsc2U7XG5cbiAgICB0aGlzLnNldFVzZXJBdXRoZW50aWNhdGVkID0gZnVuY3Rpb24odmFsdWUpe1xuICAgICAgICB1c2VySXNBdXRoZW50aWNhdGVkID0gdmFsdWU7XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0VXNlckF1dGhlbnRpY2F0ZWQgPSBmdW5jdGlvbigpe1xuICAgICAgICByZXR1cm4gdXNlcklzQXV0aGVudGljYXRlZDtcbiAgICB9O1xufV0pO1xuXG52YXIgc3luYyA9IGFuZ3VsYXIubW9kdWxlKFwic3luY1wiLCBbXCJuZ1JvdXRlXCIsXCJhbmd1bGFyRmlsZVVwbG9hZFwiLFwidWkuYm9vdHN0cmFwXCIsXCJ1aS5yb3V0ZXJcIixcImluZmluaXRlLXNjcm9sbFwiLCduZ01hdGVyaWFsJywgJ25nTWVzc2FnZXMnLCAnbWF0ZXJpYWwuc3ZnQXNzZXRzQ2FjaGUnLCduZy1tZmInLCdwZGYnLCduZ0NvbnRleHRNZW51JywnYW5ndWxhci1sb2FkaW5nLWJhcicsJ25nRmlsZVNhdmVyJywnQXV0aE1hbmFnZXInLCduZ0RpYWxvZyddKTtcblxuXG52YXIgTG9nZ2VyPWFuZ3VsYXIubW9kdWxlKFwiTG9nZ2VyXCIsW10pO1xuTG9nZ2VyLnJ1bihbJyRyb290U2NvcGUnLGZ1bmN0aW9uKCRyb290U2NvcGUpe1xuXG4gICAgICAvLyAkcm9vdFNjb3BlLmVuZFBvaW50PSdodHRwczovL3N0cmVhbXVwYm94LmNvbSc7XG4gICAgICAkcm9vdFNjb3BlLmVuZFBvaW50PSdodHRwOi8vc3luY21lLmNvbTo4MDAwJztcbn1dKTtcbndpbmRvdy5yb3V0ZXMgPVxue1xuICAgIFwiL0ZpbGVzXCI6IHtcbiAgICAgICAgdXJsOiBcIi9GaWxlc1wiLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2ZpbGVzLmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyOiAnRmlsZXNDb250cm9sbGVyJyxcbiAgICAgICAgcmVxdWlyZUxvZ2luOiB0cnVlXG4gICAgICB9LFxuICAgICAgXCJwcmV2aWV3XCI6e1xuICAgICAgICB1cmw6ICcvIS86cHJldmlldy86ZXh0ZW5zaW9uLzpvZi86dXNlcicsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3MvZmlsZVByZXZpZXcuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXIgOiAncHJldmlld0NvbnRyb2xsZXInXG4gICAgICB9LFxuXG4gICAgICBcIi9Hcm91cHNcIjoge1xuICAgICAgICAgIHVybDogXCIvR3JvdXBzXCIsXG4gICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9ncm91cHMuaHRtbCcsXG4gICAgICAgICAgY29udHJvbGxlcjogJ0dyb3VwQ29udHJvbGxlcicsXG4gICAgICAgICAgcmVxdWlyZUxvZ2luOiB0cnVlXG4gICAgICB9XG59O1xuXG5cbnN5bmMucnVuKFsnJHJvb3RTY29wZScsJyRsb2cnLGZ1bmN0aW9uKCRyb290U2NvcGUsJGxvZyl7XG4gICRyb290U2NvcGUuZW5kUG9pbnQ9J2h0dHA6Ly9zeW5jbWUuY29tOjgwMDAnO1xuICAgLy8gJHJvb3RTY29wZS5lbmRQb2ludD0naHR0cHM6Ly9zdHJlYW11cGJveC5jb20nO1xuXG5cbiAgJHJvb3RTY29wZS4kb24oJyRyb3V0ZUNoYW5nZVN0YXJ0JyxmdW5jdGlvbihldmVudCwgbmV4dCwgY3VycmVudCl7XG4gICAgZm9yKHZhciBpIGluIHdpbmRvdy5yb3V0ZXMpIHtcblxuICAgICAgICBpZihuZXh0LmluZGV4T2YoaSkgIT0gLTEpIHtcbiAgICAgICAgICAgIGlmKHdpbmRvdy5yb3V0ZXNbaV0ucmVxdWlyZUxvZ2luICYmICFTZXNzaW9uU2VydmljZS5nZXRVc2VyQXV0aGVudGljYXRlZCgpKSB7XG4gICAgICAgICAgICAgICAgYWxlcnQoXCJZb3UgbmVlZCB0byBiZSBhdXRoZW50aWNhdGVkIHRvIHNlZSB0aGlzIHBhZ2UhXCIpO1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgIH1cbiAgfSk7XG59XSk7XG5zeW5jLnByb3ZpZGVyKHtcblxuICAgICRleGNlcHRpb25IYW5kbGVyOiBmdW5jdGlvbigpe1xuICAgICAgICB2YXIgaGFuZGxlciA9IGZ1bmN0aW9uKGV4Y2VwdGlvbiwgY2F1c2UpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhleGNlcHRpb24pO1xuXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy4kZ2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlcjtcbiAgICAgICAgfTtcbiAgICB9XG59KTtcbnN5bmMuY29uZmlnKFsnJHNjZVByb3ZpZGVyJywnJGh0dHBQcm92aWRlcicsJyRtZFRoZW1pbmdQcm92aWRlcicsJ2NmcExvYWRpbmdCYXJQcm92aWRlcicsZnVuY3Rpb24oJHNjZVByb3ZpZGVyLCRodHRwUHJvdmlkZXIsJG1kVGhlbWluZ1Byb3ZpZGVyLGNmcExvYWRpbmdCYXJQcm92aWRlcikge1xuICAgIGRlbGV0ZSAkaHR0cFByb3ZpZGVyLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydYLVJlcXVlc3RlZC1XaXRoJ107XG4gICAgJGh0dHBQcm92aWRlci5kZWZhdWx0cy5oZWFkZXJzLnBvc3RbJ0FjY2VwdCddID0gJ2FwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdCc7XG4gICAgJGh0dHBQcm92aWRlci5kZWZhdWx0cy5oZWFkZXJzLnBvc3RbJ0FjY2VwdCddID0gJ2FwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdCc7XG4gICAgLy9zZXQgYXV0aG9yaXphdGlvbiBmb3Igb2F1dGgyLjAgZm9yIHByb3RlY3Rpb25cblxuXG4gICAgJGh0dHBQcm92aWRlci5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnYXV0aG9yaXphdGlvbiddID0gJ0JlYXJlciA4RXVxY01Oa0YyeVA1MERpY3B2OWhMUlJwN1dPU2FiUGxDdTIybGlZJztcblxuICAgIC8vICRodHRwUHJvdmlkZXIuZGVmYXVsdHMudXNlWERvbWFpbiA9IHRydWU7XG4gICAgJHNjZVByb3ZpZGVyLmVuYWJsZWQoZmFsc2UpO1xuXG4gICAgY2ZwTG9hZGluZ0JhclByb3ZpZGVyLmluY2x1ZGVCYXIgPSBmYWxzZTtcbn1dKTtcbnN5bmMuY29uZmlnKFsnJHN0YXRlUHJvdmlkZXInLCckdXJsUm91dGVyUHJvdmlkZXInLGZ1bmN0aW9uKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIsJHNjb3BlKXtcbiAgICAgICAgLy8gJHBhcnNlUHJvdmlkZXIudW53cmFwUHJvbWlzZXModHJ1ZSkgO1xuICAgICAgICAgIGZvcih2YXIgcGF0aCBpbiB3aW5kb3cucm91dGVzKSB7XG5cbiAgICAgICAgICAgICAgLy8gaWYobmV4dC5pbmRleE9mKHBhdGgpICE9IC0xKSB7XG4gICAgICAgICAgICAgIC8vICAgICBpZih3aW5kb3cucm91dGVzW3BhdGhdLnJlcXVpcmVMb2dpbiAmJiAhU2Vzc2lvblNlcnZpY2UuZ2V0VXNlckF1dGhlbnRpY2F0ZWQoKSkge1xuICAgICAgICAgICAgICAvLyAgICAgICAgIGFsZXJ0KFwiWW91IG5lZWQgdG8gYmUgYXV0aGVudGljYXRlZCB0byBzZWUgdGhpcyBwYWdlIVwiKTtcbiAgICAgICAgICAgICAgLy8gICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAvLyAgICAgfVxuICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKHBhdGgsIHdpbmRvdy5yb3V0ZXNbcGF0aF0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy9GaWxlcycpO1xuXG59XSk7XG5cbi8vIH0pO1xuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLWRvbmUgd2l0aCBNdXJhZ2lqaW1hbmEgUmljaGFyZCA8YmVhc3RhcjQ1N0BnbWFpbC5jb20+LS0tLS0tLS0tLS0tLS0tLy9cbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1kZWFsIHdpdGggdXNlcidzIGFjdGlvbnMgYW5kIGludGVyYWN0aW9uIHdpdGggb3RoZXIgdXNlcnMtLS0tLS0tLS0tLS0tLS0vL1xuXG47KGZ1bmN0aW9uKHdpbmRvdywgYW5ndWxhciwgdW5kZWZpbmVkKSB7XG5cbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIHZhciBtZmIgPSBhbmd1bGFyLm1vZHVsZSgnbmctbWZiJywgW10pO1xuXG4gIG1mYi5ydW4oWyckdGVtcGxhdGVDYWNoZScsIGZ1bmN0aW9uKCR0ZW1wbGF0ZUNhY2hlKSB7XG4gICAgJHRlbXBsYXRlQ2FjaGUucHV0KCduZy1tZmItbWVudS1kZWZhdWx0LnRwbC5odG1sJyxcbiAgICAgICc8dWwgY2xhc3M9XCJtZmItY29tcG9uZW50LS17e3Bvc2l0aW9ufX0gbWZiLXt7ZWZmZWN0fX1cIicgK1xuICAgICAgJyAgICBkYXRhLW1mYi10b2dnbGU9XCJ7e3RvZ2dsaW5nTWV0aG9kfX1cIiBkYXRhLW1mYi1zdGF0ZT1cInt7bWVudVN0YXRlfX1cIj4nICtcbiAgICAgICcgIDxsaSBjbGFzcz1cIm1mYi1jb21wb25lbnRfX3dyYXBcIj4nICtcbiAgICAgICcgICAgPGEgbmctY2xpY2s9XCJjbGlja2VkKClcIiBuZy1tb3VzZWVudGVyPVwiaG92ZXJlZCgpXCIgbmctbW91c2VsZWF2ZT1cImhvdmVyZWQoKVwiJyArXG4gICAgICAnICAgICAgIG5nLWF0dHItZGF0YS1tZmItbGFiZWw9XCJ7e2xhYmVsfX1cIiBjbGFzcz1cIm1mYi1jb21wb25lbnRfX2J1dHRvbi0tbWFpblwiPicgK1xuICAgICAgJyAgICAgPGkgY2xhc3M9XCJtZmItY29tcG9uZW50X19tYWluLWljb24tLXJlc3Rpbmcge3tyZXN0aW5nfX1cIj48L2k+JyArXG4gICAgICAnICAgICA8aSBjbGFzcz1cIm1mYi1jb21wb25lbnRfX21haW4taWNvbi0tYWN0aXZlIHt7YWN0aXZlfX1cIj48L2k+JyArXG4gICAgICAnICAgIDwvYT4nICtcbiAgICAgICcgICAgPHVsIGNsYXNzPVwibWZiLWNvbXBvbmVudF9fbGlzdFwiIG5nLXRyYW5zY2x1ZGU+JyArXG4gICAgICAnICAgIDwvdWw+JyArXG4gICAgICAnPC9saT4nICtcbiAgICAgICc8L3VsPidcbiAgICApO1xuXG4gICAgJHRlbXBsYXRlQ2FjaGUucHV0KCduZy1tZmItbWVudS1tZC50cGwuaHRtbCcsXG4gICAgICAnPHVsIGNsYXNzPVwibWZiLWNvbXBvbmVudC0te3twb3NpdGlvbn19IG1mYi17e2VmZmVjdH19XCInICtcbiAgICAgICcgICAgZGF0YS1tZmItdG9nZ2xlPVwie3t0b2dnbGluZ01ldGhvZH19XCIgZGF0YS1tZmItc3RhdGU9XCJ7e21lbnVTdGF0ZX19XCI+JyArXG4gICAgICAnICA8bGkgY2xhc3M9XCJtZmItY29tcG9uZW50X193cmFwXCI+JyArXG4gICAgICAnICAgIDxhIG5nLWNsaWNrPVwiY2xpY2tlZCgpXCIgbmctbW91c2VlbnRlcj1cImhvdmVyZWQoKVwiIG5nLW1vdXNlbGVhdmU9XCJob3ZlcmVkKClcIicgK1xuICAgICAgJyAgICAgICBzdHlsZT1cImJhY2tncm91bmQ6IHRyYW5zcGFyZW50OyBib3gtc2hhZG93OiBub25lO1wiJyArXG4gICAgICAnICAgICAgIG5nLWF0dHItZGF0YS1tZmItbGFiZWw9XCJ7e2xhYmVsfX1cIiBjbGFzcz1cIm1mYi1jb21wb25lbnRfX2J1dHRvbi0tbWFpblwiPicgK1xuICAgICAgJyAgICAgPG1kLWJ1dHRvbiBjbGFzcz1cIm1kLWZhYiBtZC1hY2NlbnRcIiBhcmlhLWxhYmVsPXt7bGFiZWx9fSBzdHlsZT1cInBvc2l0aW9uOnJlbGF0aXZlOyBtYXJnaW46IDA7IHBhZGRpbmc6MDtcIj4nICtcbiAgICAgICcgICAgICAgPG1kLWljb24gc3R5bGU9XCJsZWZ0OiAwOyBwb3NpdGlvbjogcmVsYXRpdmU7XCIgbWQtc3ZnLWljb249XCJ7e3Jlc3Rpbmd9fVwiJyArXG4gICAgICAnICAgICAgICAgY2xhc3M9XCJtZmItY29tcG9uZW50X19tYWluLWljb24tLXJlc3RpbmdcIj48L21kLWljb24+JyArXG4gICAgICAnICAgICAgIDxtZC1pY29uIHN0eWxlPVwicG9zaXRpb246cmVsYXRpdmU7XCIgbWQtc3ZnLWljb249XCJ7e2FjdGl2ZX19XCInICtcbiAgICAgICcgICAgICAgICBjbGFzcz1cIm1mYi1jb21wb25lbnRfX21haW4taWNvbi0tYWN0aXZlXCI+PC9tZC1pY29uPicgK1xuICAgICAgJyAgICAgPC9tZC1idXR0b24+JyArXG4gICAgICAnICAgIDwvYT4nICtcbiAgICAgICcgICAgPHVsIGNsYXNzPVwibWZiLWNvbXBvbmVudF9fbGlzdFwiIG5nLXRyYW5zY2x1ZGU+JyArXG4gICAgICAnICAgIDwvdWw+JyArXG4gICAgICAnPC9saT4nICtcbiAgICAgICc8L3VsPidcbiAgICApO1xuXG4gICAgJHRlbXBsYXRlQ2FjaGUucHV0KCduZy1tZmItYnV0dG9uLWRlZmF1bHQudHBsLmh0bWwnLFxuICAgICAgJzxsaT4nICtcbiAgICAgICcgIDxhIGRhdGEtbWZiLWxhYmVsPVwie3tsYWJlbH19XCIgY2xhc3M9XCJtZmItY29tcG9uZW50X19idXR0b24tLWNoaWxkXCI+JyArXG4gICAgICAnICAgIDxpIGNsYXNzPVwibWZiLWNvbXBvbmVudF9fY2hpbGQtaWNvbiB7e2ljb259fVwiPicgK1xuICAgICAgJyAgICA8L2k+JyArXG4gICAgICAnICA8L2E+JyArXG4gICAgICAnPC9saT4nXG4gICAgKTtcblxuICAgICR0ZW1wbGF0ZUNhY2hlLnB1dCgnbmctbWZiLWJ1dHRvbi1tZC50cGwuaHRtbCcsXG4gICAgICAnPGxpPicgK1xuICAgICAgJyAgPGEgaHJlZj1cIlwiIGRhdGEtbWZiLWxhYmVsPVwie3tsYWJlbH19XCIgY2xhc3M9XCJtZmItY29tcG9uZW50X19idXR0b24tLWNoaWxkXCIgJyArXG4gICAgICAnICAgICBzdHlsZT1cImJhY2tncm91bmQ6IHRyYW5zcGFyZW50OyBib3gtc2hhZG93OiBub25lO1wiPicgK1xuICAgICAgJyAgICAgPG1kLWJ1dHRvbiBzdHlsZT1cIm1hcmdpbjogMDtcIiBjbGFzcz1cIm1kLWZhYiBtZC1hY2NlbnRcIiBhcmlhLWxhYmVsPXt7bGFiZWx9fT4nICtcbiAgICAgICcgICAgICAgPG1kLWljb24gbWQtc3ZnLXNyYz1cImltZy9pY29ucy9hbmRyb2lkLnN2Z1wiPjwvbWQtaWNvbj4nICtcbiAgICAgICcgICAgICAgPG1kLWljb24gbWQtc3ZnLWljb249XCJ7e2ljb259fVwiPjwvbWQtaWNvbj4nICtcbiAgICAgICcgICAgIDwvbWQtYnV0dG9uPicgK1xuICAgICAgJyAgPC9hPicgK1xuICAgICAgJzwvbGk+J1xuICAgICk7XG4gIH1dKTtcblxuICBtZmIuZGlyZWN0aXZlKCdtZmJCdXR0b25DbG9zZScsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgcmVxdWlyZTogJ15tZmJNZW51JyxcbiAgICAgIGxpbms6IGZ1bmN0aW9uKCRzY29wZSwgJGVsZW1lbnQsICRhdHRycywgbWZiTWVudUNvbnRyb2xsZXIpIHtcbiAgICAgICAgJGVsZW1lbnQuYmluZCgnY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBtZmJNZW51Q29udHJvbGxlci5jbG9zZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgfTtcblxuICB9KTtcblxuICBtZmIuZGlyZWN0aXZlKCdtZmJNZW51JywgWyckdGltZW91dCcsIGZ1bmN0aW9uKCR0aW1lb3V0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlc3RyaWN0OiAnRUEnLFxuICAgICAgdHJhbnNjbHVkZTogdHJ1ZSxcbiAgICAgIHJlcGxhY2U6IHRydWUsXG4gICAgICBzY29wZToge1xuICAgICAgICBwb3NpdGlvbjogJ0AnLFxuICAgICAgICBlZmZlY3Q6ICdAJyxcbiAgICAgICAgbGFiZWw6ICdAJyxcbiAgICAgICAgcmVzdGluZzogJ0ByZXN0aW5nSWNvbicsXG4gICAgICAgIGFjdGl2ZTogJ0BhY3RpdmVJY29uJyxcbiAgICAgICAgbWFpbkFjdGlvbjogJyYnLFxuICAgICAgICBtZW51U3RhdGU6ICc9PycsXG4gICAgICAgIHRvZ2dsaW5nTWV0aG9kOiAnQCdcbiAgICAgIH0sXG4gICAgICB0ZW1wbGF0ZVVybDogZnVuY3Rpb24oZWxlbSwgYXR0cnMpIHtcbiAgICAgICAgcmV0dXJuIGF0dHJzLnRlbXBsYXRlVXJsIHx8ICduZy1tZmItbWVudS1kZWZhdWx0LnRwbC5odG1sJztcbiAgICAgIH0sXG4gICAgICBjb250cm9sbGVyOiBbJyRzY29wZScsICckYXR0cnMnLCBmdW5jdGlvbigkc2NvcGUsICRhdHRycykge1xuICAgICAgICB2YXIgb3BlblN0YXRlID0gJ29wZW4nLFxuICAgICAgICAgIGNsb3NlZFN0YXRlID0gJ2Nsb3NlZCc7XG5cbiAgICAgICAgLy8gQXR0YWNoZWQgdG9nZ2xlLCBvcGVuIGFuZCBjbG9zZSB0byB0aGUgY29udHJvbGxlciB0byBnaXZlIG90aGVyXG4gICAgICAgIC8vIGRpcmVjdGl2ZSBhY2Nlc3NcbiAgICAgICAgdGhpcy50b2dnbGUgPSB0b2dnbGU7XG4gICAgICAgIHRoaXMuY2xvc2UgPSBjbG9zZTtcbiAgICAgICAgdGhpcy5vcGVuID0gb3BlbjtcblxuICAgICAgICAkc2NvcGUuY2xpY2tlZCA9IGNsaWNrZWQ7XG4gICAgICAgICRzY29wZS5ob3ZlcmVkID0gaG92ZXJlZDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0IHRoZSBzdGF0ZSB0byB1c2VyLWRlZmluZWQgdmFsdWUuIEZhbGxiYWNrIHRvIGNsb3NlZCBpZiBub1xuICAgICAgICAgKiB2YWx1ZSBpcyBwYXNzZWQgZnJvbSB0aGUgb3V0c2lkZS5cbiAgICAgICAgICovXG4gICAgICAgIGlmICghJHNjb3BlLm1lbnVTdGF0ZSkge1xuICAgICAgICAgICRzY29wZS5tZW51U3RhdGUgPSBjbG9zZWRTdGF0ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiBvbiB0b3VjaCBkZXZpY2UgQU5EICdob3ZlcicgbWV0aG9kIGlzIHNlbGVjdGVkOlxuICAgICAgICAgKiB3YWl0IGZvciB0aGUgZGlnZXN0IHRvIHBlcmZvcm0gYW5kIHRoZW4gY2hhbmdlIGhvdmVyIHRvIGNsaWNrLlxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKF9pc1RvdWNoRGV2aWNlKCkgJiYgX2lzSG92ZXJBY3RpdmUoKSkge1xuICAgICAgICAgICR0aW1lb3V0KHVzZUNsaWNrKTtcbiAgICAgICAgfVxuXG4gICAgICAgICRhdHRycy4kb2JzZXJ2ZSgnbWVudVN0YXRlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgJHNjb3BlLmN1cnJlbnRTdGF0ZSA9ICRzY29wZS5tZW51U3RhdGU7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGZ1bmN0aW9uIGNsaWNrZWQoKSB7XG4gICAgICAgICAgLy8gSWYgdGhlcmUgaXMgYSBtYWluIGFjdGlvbiwgbGV0J3MgZmlyZSBpdFxuICAgICAgICAgIGlmICgkc2NvcGUubWFpbkFjdGlvbikge1xuICAgICAgICAgICAgJHNjb3BlLm1haW5BY3Rpb24oKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIV9pc0hvdmVyQWN0aXZlKCkpIHtcbiAgICAgICAgICAgIHRvZ2dsZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBmdW5jdGlvbiBob3ZlcmVkKCkge1xuICAgICAgICAgIGlmIChfaXNIb3ZlckFjdGl2ZSgpKSB7XG4gICAgICAgICAgICAvL3RvZ2dsZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogSW52ZXJ0IHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBtZW51LlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gdG9nZ2xlKCkge1xuICAgICAgICAgIGlmICgkc2NvcGUubWVudVN0YXRlID09PSBvcGVuU3RhdGUpIHtcbiAgICAgICAgICAgIGNsb3NlKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG9wZW4oKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBvcGVuKCkge1xuICAgICAgICAgICRzY29wZS5tZW51U3RhdGUgPSBvcGVuU3RhdGU7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBjbG9zZSgpIHtcbiAgICAgICAgICAkc2NvcGUubWVudVN0YXRlID0gY2xvc2VkU3RhdGU7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2hlY2sgaWYgd2UncmUgb24gYSB0b3VjaC1lbmFibGVkIGRldmljZS5cbiAgICAgICAgICogUmVxdWlyZXMgTW9kZXJuaXpyIHRvIHJ1biwgb3RoZXJ3aXNlIHNpbXBseSByZXR1cm5zIGZhbHNlXG4gICAgICAgICAqL1xuICAgICAgICBmdW5jdGlvbiBfaXNUb3VjaERldmljZSgpIHtcbiAgICAgICAgICByZXR1cm4gd2luZG93Lk1vZGVybml6ciAmJiBNb2Rlcm5penIudG91Y2g7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBfaXNIb3ZlckFjdGl2ZSgpIHtcbiAgICAgICAgICByZXR1cm4gJHNjb3BlLnRvZ2dsaW5nTWV0aG9kID09PSAnaG92ZXInO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbnZlcnQgdGhlIHRvZ2dsaW5nIG1ldGhvZCB0byAnY2xpY2snLlxuICAgICAgICAgKiBUaGlzIGlzIHVzZWQgd2hlbiAnaG92ZXInIGlzIHNlbGVjdGVkIGJ5IHRoZSB1c2VyXG4gICAgICAgICAqIGJ1dCBhIHRvdWNoIGRldmljZSBpcyBlbmFibGVkLlxuICAgICAgICAgKi9cbiAgICAgICAgZnVuY3Rpb24gdXNlQ2xpY2soKSB7XG4gICAgICAgICAgJHNjb3BlLiRhcHBseShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRzY29wZS50b2dnbGluZ01ldGhvZCA9ICdjbGljayc7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1dXG4gICAgfTtcbiAgfV0pO1xuXG4gIG1mYi5kaXJlY3RpdmUoJ21mYkJ1dHRvbicsIFtmdW5jdGlvbigpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVxdWlyZTogJ15tZmJNZW51JyxcbiAgICAgIHJlc3RyaWN0OiAnRUEnLFxuICAgICAgdHJhbnNjbHVkZTogdHJ1ZSxcbiAgICAgIHJlcGxhY2U6IHRydWUsXG4gICAgICBzY29wZToge1xuICAgICAgICBpY29uOiAnQCcsXG4gICAgICAgIGxhYmVsOiAnQCdcbiAgICAgIH0sXG4gICAgICB0ZW1wbGF0ZVVybDogZnVuY3Rpb24oZWxlbSwgYXR0cnMpIHtcbiAgICAgICAgcmV0dXJuIGF0dHJzLnRlbXBsYXRlVXJsIHx8ICduZy1tZmItYnV0dG9uLWRlZmF1bHQudHBsLmh0bWwnO1xuICAgICAgfVxuICAgIH07XG4gIH1dKTtcblxufSkod2luZG93LCBhbmd1bGFyKTtcblxuc3luYy5kaXJlY3RpdmUoJ2xlZnRNZW51JyxmdW5jdGlvbigpe1xuICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0FFJyxcbiAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgIGRhdGE6ICc9JyxcbiAgICAgICAgICAgIHVzZXI6ICc9JyxcbiAgICAgICAgICAgIHR5cGU6ICc9J1xuICAgICAgICB9LFxuICAgICAgICB0ZW1wbGF0ZVVybDogXCJkaXJlY3RpdmVzL2xlZnRNZW51Lmh0bWxcIlxuICAgIH07XG59KTtcbnN5bmMuZGlyZWN0aXZlKCdmZWVkcycsZnVuY3Rpb24oKXtcbiAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdBRScsXG4gICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICBwb3N0czogJz0nLFxuICAgICAgICAgICAgcmVwbGllczogJz0nLFxuICAgICAgICAgICAgY3JlYXRlUG9zdDonPSdcbiAgICAgICAgfSxcbiAgICAgICAgdGVtcGxhdGVVcmw6IFwiZGlyZWN0aXZlcy9taWRkbGVDb250ZW50Lmh0bWxcIlxuICAgIH07XG59KTtcbnN5bmMuZGlyZWN0aXZlKCdoZWFkZXInLGZ1bmN0aW9uKCl7XG4gIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiAnQUUnLFxuICAgICAgICBzY29wZToge1xuICAgICAgICAgICAgZGF0YTogJz0nLFxuICAgICAgICAgICAgdXNlcjogJz0nLFxuICAgICAgICAgICAgdHlwZTogJz0nXG4gICAgICAgIH0sXG4gICAgICAgIHRlbXBsYXRlVXJsOiBcIi4vZGlyZWN0aXZlcy9oZWFkZXIuaHRtbFwiXG5cbiAgICB9O1xufSk7XG5cblxuc3luYy5kaXJlY3RpdmUoJ2tleWJpbmRpbmcnLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgIGludm9rZTogJyYnXG4gICAgICAgIH0sXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWwsIGF0dHIpIHtcbiAgICAgICAgICAgIE1vdXNldHJhcC5iaW5kKGF0dHIub24sIHNjb3BlLmludm9rZSk7XG4gICAgICAgIH1cbiAgICB9O1xufSk7XG5cbi8qIGdsb2JhbCAkd2luZG93ICovXG4vKiBnbG9iYWwgTG9nZ2VyICovXG5cbkxvZ2dlci5jb250cm9sbGVyKCdsb2dpbkNvbnRyb2xsZXInLFsnJHNjb3BlJywnJGh0dHAnLCckcm9vdFNjb3BlJywnJHdpbmRvdycsIGZ1bmN0aW9uICgkc2NvcGUsJGh0dHAsJHJvb3RTY29wZSwkd2luZG93KSB7XG4gICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgICdjcmVkZWRlbnRpYWwtbm90LWZvdW5kJyAgICAgICA6ICdDcmVkZW50aWFscyBub3QgZm91bmQhJyxcbiAgICAgICAgJ3N1Y2Nlc3MnICAgICAgICAgICAgICAgICAgICAgIDogJ2xvZ2dpbmcgaW4uLi4nXG4gICAgfTtcbiAgJHNjb3BlLmxvZ2luID0gZnVuY3Rpb24gKGluZm8pXG4gIHtcbiAgICAvL2JlZm9yZSBub3RpZnkgdGhhdCB3ZSBhcmUgbG9nZ2luZ2luXG4gICAgJCgnLmxvZ2luLWZvcm0tbWFpbi1tZXNzYWdlJykuYWRkQ2xhc3MoJ3Nob3cgc3VjY2VzcycpLmh0bWwob3B0aW9uc1snc3VjY2VzcyddKTtcbiAgICAkaHR0cC5wb3N0KCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL3Nlc3Npb25zJyxpbmZvKVxuICAgIC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgICAgICBpZihyZXNwb25zZSA9PT1cIjFcIil7XG4gICAgICAgICAgICBSZWRpcmVjdGluZygpO1xuXG4gICAgICAgIH1lbHNlIGlmKHJlc3BvbnNlID09PSBcIjBcIil7XG4gICAgICAgICAgICAgJCgnLmxvZ2luLWZvcm0tbWFpbi1tZXNzYWdlJykuYWRkQ2xhc3MoJ3Nob3cgZXJyb3InKS5odG1sKG9wdGlvbnNbJ2NyZWRlZGVudGlhbC1ub3QtZm91bmQnXSk7XG4gICAgICAgIH1lbHNlIGlmKHJlc3BvbnNlID09PSBcIm5vdFZlcmlmaWVkXCIpe1xuICAgICAgICAgICAgbm90VmVyaWZpZWQoKTtcbiAgICAgICAgfVxuICAgIH0pXG4gICAgLmVycm9yKGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdlcnJvcjonKyBlcnJvcik7XG4gICAgfSlcbiAgICBmdW5jdGlvbiBub3RWZXJpZmllZCgpe1xuICAgICAgICAgJHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy9ub3RWZXJpZmllZCc7XG4gICAgfVxuICAgIGZ1bmN0aW9uIFJlZGlyZWN0aW5nKCl7XG4gICAgICAgICR3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvc3luYyc7XG4gICAgfVxuICB9XG59XSk7XG5cbkxvZ2dlci5jb250cm9sbGVyKCdSZWdpc3RlckNvbnRyb2xsZXInLCBbJyRzY29wZScsJyRyb290U2NvcGUnLCckaHR0cCcsZnVuY3Rpb24gKCRzY29wZSwkcm9vdFNjb3BlLCRodHRwKSB7XG4gICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgICdwYXNzd29yZC1ub3RNYXRjaCc6ICdwYXNzd29yZCBkbyBub3QgbWF0Y2gnLFxuICAgICAgICAnU2lnblVwSW5Qcm9ncmVzcycgOiAnV2FpdCB3ZSBhcmUgc2V0dGluZyB1cCB5b3VyIGFjY291bnQuJ1xuICAgIH07XG4gICAgJHNjb3BlLnJlZ2lzdGVyPWZ1bmN0aW9uKHVzZXIpe1xuICAgICAgJCgnLnJlZ2lzdGVyLWZvcm0tbWFpbi1tZXNzYWdlJykuYWRkQ2xhc3MoJ3Nob3cgc3VjY2VzcycpLmh0bWwob3B0aW9uc1snU2lnblVwSW5Qcm9ncmVzcyddKTtcbiAgICAgICAgaWYoJCgnI3Bhc3N3b3JkJykudmFsKCkgIT0gJCgnI3Bhc3N3b3JkLWNvbmZpcm0nKS52YWwoKSl7XG4gICAgICAgICAgJCgnLnJlZ2lzdGVyLWZvcm0tbWFpbi1tZXNzYWdlJykuYWRkQ2xhc3MoJ3Nob3cgZXJyb3InKS5odG1sKG9wdGlvbnNbJ3Bhc3N3b3JkLW5vdE1hdGNoJ10pO1xuICAgICAgICAgIHNldFRpbWVvdXQobWVzc2FnZVJlbW92ZSwgMjAwMCk7XG4gICAgICAgICAgZnVuY3Rpb24gbWVzc2FnZVJlbW92ZSgpe1xuICAgICAgICAgICAgICAkKCcucmVnaXN0ZXItZm9ybS1tYWluLW1lc3NhZ2UnKS5yZW1vdmVDbGFzcygnc2hvdyBlcnJvcicpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHVzZXJuYW1lPSQoJyN1c2VybmFtZScpLnZhbCgpO1xuICAgICAgICB2YXIgZW1haWw9JCgnI2VtYWlsJykudmFsKCk7XG5cblxuICAgICAgICBqUXVlcnkucG9zdCgnL3Nlc3Npb25zJywge3VzZXJuYW1lOiB1c2VybmFtZSwgcGFzc3dvcmQ6dXNlci5wYXNzd29yZCwgZW1haWw6ZW1haWwsIG9wdGlvbjp1c2VyLm9wdGlvbiwgcGhvbmU6dXNlci5waG9uZX0sIGZ1bmN0aW9uKGRhdGEsIHRleHRTdGF0dXMsIHhocikge1xuICAgICAgICAgICAgaWYoZGF0YSA9PSAxKXtcbiAgICAgICAgICAgICAgICAgUmVkaXJlY3RpbmcoKTtcbiAgICAgICAgICAgIH1lbHNlIGlmKGRhdGEgPT0wKXtcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnd2UgYXJlIGZpcmVkIHRoaXMgY2FuIG5vdCBoYXBwZW4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkuZXJyb3IoZnVuY3Rpb24oZXJyb3IpIHtcblxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICAgICAgZnVuY3Rpb24gUmVkaXJlY3RpbmcoKXtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9ICcvY2hlY2tFbWFpbCc7XG4gICAgICAgIH1cbiAgICB9XG59XSk7XG5cbkxvZ2dlci5kaXJlY3RpdmUoJ3VuaXF1ZVVzZXJuYW1lJywgWydpc1VzZXJuYW1lQXZhaWxhYmxlJyxmdW5jdGlvbihpc1VzZXJuYW1lQXZhaWxhYmxlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgcmVxdWlyZTogJ25nTW9kZWwnLFxuICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsIG5nTW9kZWwpIHtcbiAgICAgICAgICAgIG5nTW9kZWwuJGFzeW5jVmFsaWRhdG9ycy51bmlxdWVVc2VybmFtZSA9IGlzVXNlcm5hbWVBdmFpbGFibGU7XG4gICAgICAgIH1cbiAgICB9O1xufV0pO1xuTG9nZ2VyLmZhY3RvcnkoJ2lzVXNlcm5hbWVBdmFpbGFibGUnLCBbJyRxJywnJGh0dHAnLCckcm9vdFNjb3BlJyxmdW5jdGlvbigkcSwgJGh0dHAsJHJvb3RTY29wZSkge1xuICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICAnYnRuLWxvYWRpbmcnOiAnPGkgY2xhc3M9XCJmYSBmYS1zcGlubmVyIGZhLXB1bHNlXCI+PC9pPicsXG4gICAgICAgICdidG4tc3VjY2Vzcyc6ICc8aSBjbGFzcz1cImZhIGZhLWNoZWNrXCI+PC9pPicsXG4gICAgICAgICdidG4tZXJyb3InOiAnPGkgY2xhc3M9XCJmYSBmYS1yZW1vdmVcIj48L2k+JyxcbiAgICAgICAgJ21zZy1zdWNjZXNzJzogJ0FsbCBHb29kISBSZWRpcmVjdGluZy4uLicsXG4gICAgICAgICdtc2ctdXNlcm5hbWUtYXZhaWxhYmxlJzogJ2dvb2QgdXNlcm5hbWUgYXZhaWxhYmxlIScsXG4gICAgICAgICdtc2ctdXNlcm5hbWUtdGFrZW4nICAgIDogJ29vcHMgdXNlcm5hbWUgdGFrZW4nLFxuICAgICAgICAnbXNnLWVtYWlsLXRha2VuJyAgICAgICA6ICdlbWFpbCB0YWtlbicsXG4gICAgICAgICdtc2cteW91ci1waG9uZS1zdWNrJyAgIDogJ3lvdXIgcGhvbmUgaXMgbm90IHZhbGlkJyxcbiAgICAgICAgJ3VzZUFKQVgnOiB0cnVlLFxuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHVzZXJuYW1lKSB7XG5cbiAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuICAgICAgICAkaHR0cC5nZXQoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL3VzZXJzP3VzZXJuYW1lPScgKyB1c2VybmFtZSArICcmYWNjZXNzX3Rva2VuPUJjN0RXUzdLS1JMdHhtZGRVWkkxVDFsWnUySjFZaFI4T0xYR1dOWm4nKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgaWYoZGF0YT09J2F2YWlsYWJsZScpe1xuICAgICAgICAgICAgICAgICQoJy5yZWdpc3Rlci1mb3JtLW1haW4tbWVzc2FnZScpLmFkZENsYXNzKCdzaG93IHN1Y2Nlc3MnKS5odG1sKG9wdGlvbnNbJ21zZy11c2VybmFtZS1hdmFpbGFibGUnXSk7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChtZXNzYWdlUmVtb3ZlLCAyMDAwKTtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBtZXNzYWdlUmVtb3ZlKCl7XG4gICAgICAgICAgICAgICAgICAgICQoJy5yZWdpc3Rlci1mb3JtLW1haW4tbWVzc2FnZScpLnJlbW92ZUNsYXNzKCdzaG93IHN1Y2Nlc3MnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9ZWxzZSBpZihkYXRhPT0ndGFrZW4nKXtcbiAgICAgICAgICAgICAgICAkKCcucmVnaXN0ZXItZm9ybS1tYWluLW1lc3NhZ2UnKS5hZGRDbGFzcygnc2hvdyBlcnJvcicpLmh0bWwob3B0aW9uc1snbXNnLXVzZXJuYW1lLXRha2VuJ10pO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQodXNlcm5hbWVUYWtlbiwgMjAwMCk7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gdXNlcm5hbWVUYWtlbigpe1xuICAgICAgICAgICAgICAgICAgICAkKCcucmVnaXN0ZXItZm9ybS1tYWluLW1lc3NhZ2UnKS5yZW1vdmVDbGFzcygnc2hvdyBlcnJvcicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdCgpO1xuICAgICAgICB9KS5lcnJvcihmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfVxufV0pO1xuTG9nZ2VyLmRpcmVjdGl2ZSgndW5pcXVlRW1haWwnLCBbJ2lzRW1haWxBdmFpbGFibGUnLGZ1bmN0aW9uKGlzRW1haWxBdmFpbGFibGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgICByZXF1aXJlOiAnbmdNb2RlbCcsXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgbmdNb2RlbCkge1xuICAgICAgICAgICAgbmdNb2RlbC4kYXN5bmNWYWxpZGF0b3JzLnVuaXF1ZUVtYWlsID0gaXNFbWFpbEF2YWlsYWJsZTtcbiAgICAgICAgfVxuICAgIH07XG59XSk7XG5Mb2dnZXIuZmFjdG9yeSgnaXNFbWFpbEF2YWlsYWJsZScsIFsnJHEnLCckaHR0cCcsJyRyb290U2NvcGUnLGZ1bmN0aW9uICgkcSwgJGh0dHAsICRyb290U2NvcGUpIHtcbiAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgJ2J0bi1sb2FkaW5nJzogJzxpIGNsYXNzPVwiZmEgZmEtc3Bpbm5lciBmYS1wdWxzZVwiPjwvaT4nLFxuICAgICAgICAnYnRuLXN1Y2Nlc3MnOiAnPGkgY2xhc3M9XCJmYSBmYS1jaGVja1wiPjwvaT4nLFxuICAgICAgICAnYnRuLWVycm9yJzogJzxpIGNsYXNzPVwiZmEgZmEtcmVtb3ZlXCI+PC9pPicsXG4gICAgICAgICdtc2ctc3VjY2Vzcyc6ICdBbGwgR29vZCEgUmVkaXJlY3RpbmcuLi4nLFxuICAgICAgICAnbXNnLXVzZXJuYW1lLWF2YWlsYWJsZSc6ICdnb29kIHVzZXJuYW1lIGF2YWlsYWJsZSEnLFxuICAgICAgICAnbXNnLXVzZXJuYW1lLXRha2VuJyAgICA6ICdvb3BzIHVzZXJuYW1lIHRha2VuJyxcbiAgICAgICAgJ21zZy1lbWFpbC10YWtlbicgICAgICAgOiAnZW1haWwgdGFrZW4nLFxuICAgICAgICAnbXNnLWVtYWlsLWF2YWlsYWJsZScgICA6ICdlbWFpbCBhdmFpbGFibGUnLFxuICAgICAgICAnbXNnLXlvdXItcGhvbmUtc3VjaycgICA6ICd5b3VyIHBob25lIGlzIG5vdCB2YWxpZCcsXG4gICAgICAgICd1c2VBSkFYJzogdHJ1ZSxcbiAgICB9O1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uKGVtYWlsKSB7XG4gICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgICRodHRwLmdldCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvdXNlcnM/ZW1haWw9JyArIGVtYWlsICsgJyZhY2Nlc3NfdG9rZW49QmM3RFdTN0tLUkx0eG1kZFVaSTFUMWxadTJKMVloUjhPTFhHV05abicpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSl7XG5cbiAgICAgICAgICAgIGlmKGRhdGE9PSdlbWFpbC1hdmFpbGFibGUnKXtcbiAgICAgICAgICAgICAgICAkKCcucmVnaXN0ZXItZm9ybS1tYWluLW1lc3NhZ2UnKS5hZGRDbGFzcygnc2hvdyBzdWNjZXNzJykuaHRtbChvcHRpb25zWydtc2ctZW1haWwtYXZhaWxhYmxlJ10pO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQobWVzc2FnZVJlbW92ZSwgMjAwMCk7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gbWVzc2FnZVJlbW92ZSgpe1xuICAgICAgICAgICAgICAgICAgICAkKCcucmVnaXN0ZXItZm9ybS1tYWluLW1lc3NhZ2UnKS5yZW1vdmVDbGFzcygnc2hvdyBzdWNjZXNzJyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9ZWxzZSBpZihkYXRhPT0nZW1haWwtdGFrZW4nKXtcbiAgICAgICAgICAgICAgICAkKCcucmVnaXN0ZXItZm9ybS1tYWluLW1lc3NhZ2UnKS5hZGRDbGFzcygnc2hvdyBlcnJvcicpLmh0bWwob3B0aW9uc1snbXNnLWVtYWlsLXRha2VuJ10pO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQobWVzc2FnZUVtYWlsVGFrZW4sIDIwMDApO1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG1lc3NhZ2VFbWFpbFRha2VuKCl7XG4gICAgICAgICAgICAgICAgICAgICQoJy5yZWdpc3Rlci1mb3JtLW1haW4tbWVzc2FnZScpLnJlbW92ZUNsYXNzKCdzaG93IGVycm9yJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdCgpO1xuICAgICAgICAgfSkuZXJyb3IoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgICAgICB9KTtcbiAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgIH07XG59XSk7XG5cbnN5bmMuc2VydmljZSgnRmV0Y2hlcicsWyckaHR0cCcsJyRxJywnJHJvb3RTY29wZScsZnVuY3Rpb24gRmlsZXMgKCRodHRwLCRxLCRyb290U2NvcGUpIHtcbiAgICB0aGlzLmZldGNoID0gZnVuY3Rpb24ob2JqZWN0KXtcbiAgICAgIHZhciBkaWZmZXJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAvL2Rvd24gZW5kcG9pbnQgcmV0dXJuIGFsbCBmaWxlcyBJIG93blxuICAgICAgJGh0dHAuZ2V0KCRyb290U2NvcGUuZW5kUG9pbnQgKycvYXBpL3YxLz8rcXVlcnk9JysncXVlcnkrRmV0Y2hVc2Vycycrb2JqZWN0KVxuICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgIGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgfSlcbiAgICAgIC5lcnJvcihmdW5jdGlvbihlcnJvcikge1xuICAgICAgICAgIGRpZmZlcmVkLnJlamVjdChlcnJvcik7XG4gICAgICB9KVxuICAgICAgcmV0dXJuIGRpZmZlcmVkLnByb21pc2U7XG4gICAgfTtcbn1dKTtcblxuc3luYy5zZXJ2aWNlKCdGaWxlcycsIFsnJGh0dHAnLCckcScsJyRyb290U2NvcGUnLGZ1bmN0aW9uIEZpbGVzICgkaHR0cCwkcSwkcm9vdFNjb3BlKSB7XG4gICAgdGhpcy5nZXRHcm91cEZpbGVzID1mdW5jdGlvbihncm91cElkKSB7XG4gICAgICAgIHZhciBkaWZmZXJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgIC8vZG93biBlbmRwb2ludCByZXR1cm4gYWxsIGZpbGVzIEkgb3duXG4gICAgICAgICRodHRwLmdldCgkcm9vdFNjb3BlLmVuZFBvaW50ICsnL2FwaS92MS9ncm91cHMvJytncm91cElkKycvZ3JvdXBmaWxlcycpXG4gICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgICAgIGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgICB9KVxuICAgICAgICAuZXJyb3IoZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgICAgIGRpZmZlcmVkLnJlamVjdChlcnJvcik7XG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuICAgIH07XG4gICAgXG5cbiAgICB0aGlzLnNpbmdsZSA9IGZ1bmN0aW9uKGZpbGUpe1xuICAgICAgdmFyIHByb21pc2UgPSAkcS5kZWZlcigpO1xuICAgICAgJGh0dHAuZ2V0KCRyb290U2NvcGUuZW5kUG9pbnQrICcvcHJldmlldy8nKyBmaWxlKVxuICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICBwcm9taXNlLnJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgfSlcbiAgICAgIC5lcnJvcihmdW5jdGlvbihlcnIpe1xuICAgICAgICBwcm9taXNlLnJlamVjdChlcnIpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gcHJvbWlzZS5wcm9taXNlO1xuICAgIH07XG4gICAgdGhpcy5nZXRCb3hGaWxlcyA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciBncm91cElkID0gMTsvL2J5IGRlZmF1bHQgdGhpcyBjYW4gYmUgYW55IG51bWJlclxuICAgICAgICB2YXIgZGlmZmVyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICAvL3RoZSBpZGVhIGlzIHRvIGdldCBhIGZpbGUgZWl0aGVyIGZyb20gZ3JvdXBzIG9yIGluZGl2aWR1YWwgYWNjb3VudCBncm91cCBpcyBvcHRpb25hbFxuICAgICAgICAkaHR0cC5nZXQoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL2ZpbGVzLycrZ3JvdXBJZCsnL2JveGZpbGVzJylcbiAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgIGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgICB9KVxuICAgICAgICAuZXJyb3IoZnVuY3Rpb24oZXJyKXtcbiAgICAgICAgICBkaWZmZXJlZC5yZWplY3QoZXJyKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuICAgIH07XG4gICAgdGhpcy5nZXRNaW1lVHlwZSA9IGZ1bmN0aW9uKGZpbGVfbmFtZSl7XG4gICAgICB2YXIgcHJvbWlzZSA9ICRxLmRlZmVyKCk7XG4gICAgICAkaHR0cC5nZXQoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL2ZpbGVzL21pbWVUeXBlLycrIGZpbGVfbmFtZSlcbiAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgICBwcm9taXNlLnJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgfSlcbiAgICAgIC5lcnJvcihmdW5jdGlvbihlcnIpe1xuICAgICAgICAgIHByb21pc2UucmVqZWN0KGVycik7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBwcm9taXNlLnByb21pc2U7XG4gICAgfTtcbiAgICB0aGlzLmRvd25sb2FkRmlsZSA9IGZ1bmN0aW9uKGZpbGVfbmFtZSl7XG5cbiAgICAgIHZhciBwcm9taXNlID0gJHEuZGVmZXIoKTtcbiAgICAgIC8vaGFyZCBjb2RlZCBhIHVzZXIgU3RyaW1VcCEgbmVlZCB0byBpbmplY3QgaGltIGR5YW1pY2FsbHlcbiAgICAgICRodHRwLmdldCgkcm9vdFNjb3BlLmVuZFBvaW50KyAnL2FwaS92MS9maWxlcy9kb3dubG9hZC8nK2ZpbGVfbmFtZSsnL29mLycrICdTdHJpbVVwJylcbiAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgcHJvbWlzZS5yZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgIH0pXG4gICAgICAuZXJyb3IoZnVuY3Rpb24oZXJyKXtcbiAgICAgICAgcHJvbWlzZS5yZWplY3QoZXJyKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHByb21pc2UucHJvbWlzZTtcbiAgICB9O1xuICAgIHJldHVybiB0aGlzO1xufV0pO1xuXG5zeW5jLnNlcnZpY2UoJ1Blb3BsZScsIFsnJHEnLCckaHR0cCcsJyRyb290U2NvcGUnLGZ1bmN0aW9uICgkcSwgJGh0dHAsICRyb290U2NvcGUpIHtcblx0dGhpcy5nZXQgID0gZnVuY3Rpb24gKCl7XG5cdFx0dmFyIGRpZmZlcmVkID0gJHEuZGVmZXIoKTtcblx0XHQkaHR0cC5nZXQoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL3N1Z2dlc3Rpb25zJylcblx0XHQuc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSl7XG5cdFx0XHRkaWZmZXJlZC5yZXNvbHZlKHJlc3BvbnNlKTtcblx0XHR9KVxuXHRcdC5lcnJvcihmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0ZGlmZmVyZWQucmVqZWN0KGVycm9yKTtcblx0XHR9KVxuXHRcdHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuXHR9XG5cdHRoaXMuYWxsSWZvbGxvdyA9IGZ1bmN0aW9uICgpIHtcblx0XHR2YXIgZGlmZmVyZWQgPSAkcS5kZWZlcigpO1xuXHRcdCRodHRwLmdldCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvbWUvZm9sbG93aW5ncycpXG5cdFx0LnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcG9uc2Upe1xuXHRcdFx0ZGlmZmVyZWQucmVzb2x2ZShyZXNwb25zZSk7XG5cdFx0fSlcblx0XHQuZXJyb3IoZnVuY3Rpb24oZXJyKXtcblx0XHRcdGRpZmZlcmVkLnJlamVjdChlcnIpO1xuXHRcdH0pXG5cdFx0cmV0dXJuIGRpZmZlcmVkLnByb21pc2U7XG5cdH1cblx0dGhpcy51bkZvbGxvdyA9IGZ1bmN0aW9uKGlkKXtcblx0XHR2YXIgZGlmZmVyZWQgPSAkcS5kZWZlcigpO1xuXHRcdCRodHRwLmRlbGV0ZSgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvbWUvZm9sbG93aW5nLycgK2lkKVxuXHRcdC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblx0XHRcdGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuXHRcdH0pXG5cdFx0LmVycm9yKGZ1bmN0aW9uKGVycil7XG5cdFx0XHRkaWZmZXJlZC5yZWplY3QoZXJyKTtcblx0XHR9KVxuXHRcdHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuXHR9XG5cdHRoaXMuZm9sbG93ID0gZnVuY3Rpb24ocGFyYW0pe1xuXHRcdHZhciBkaWZmZXJlZCA9ICRxLmRlZmVyKCk7XG5cdFx0JGh0dHAucHV0KCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS9tZS9mb2xsb3dpbmdzJywgcGFyYW0pXG5cdFx0LnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcG9uc2Upe1xuXHRcdFx0ZGlmZmVyZWQucmVzb2x2ZShyZXNwb25zZSk7XG5cdFx0fSlcblx0XHQuZXJyb3IoZnVuY3Rpb24oZXJyb3Ipe1xuXHRcdFx0ZGlmZmVyZWQucmVqZWN0KGVycm9yKTtcblx0XHR9KVxuXHRcdHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuXHR9XG5cdHJldHVybiB0aGlzO1xufV0pO1xuXG5zeW5jLnNlcnZpY2UoJ1NoYXJlJyxbJyRsb2cnLCckaHR0cCcsJyRxJywnJHJvb3RTY29wZScsIGZ1bmN0aW9uICgkbG9nLCRodHRwLCRxLCRyb290U2NvcGUpIHtcblx0dGhpcy5zaGFyZSA9IGZ1bmN0aW9uKHNoYXJlYmxlT2JqKXtcblx0XHR2YXIgZGlmZmVyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICAkaHR0cC5wb3N0KCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS9zaGFyZScsc2hhcmVibGVPYmopXG4gICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgICAgIGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgICB9KVxuICAgICAgICAuZXJyb3IoZnVuY3Rpb24oZXJyKXtcbiAgICAgICAgICAgIGRpZmZlcmVkLnJlamVjdChlcnIpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGRpZmZlcmVkLnByb21pc2U7XG5cdH07XG5cdHRoaXMuZ2V0VXNlciA9IGZ1bmN0aW9uKHVzZXIpe1xuXG5cdFx0dmFyIGRpZmZlcmVkID0gJHEuZGVmZXIoKTtcblx0XHQkaHR0cC5nZXQoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL21lL3VzZXJzLycrIHVzZXIpXG5cdFx0LnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcG9uc2Upe1xuXHRcdFx0ZGlmZmVyZWQucmVzb2x2ZShyZXNwb25zZSk7XG5cdFx0fSlcblx0XHQuZXJyb3IoZnVuY3Rpb24oZXJyKXtcblx0XHRcdGRpZmZlcmVkLnJlamVjdChlcnIpO1xuXHRcdH0pO1xuXHRcdHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuXHR9O1xuXHR0aGlzLmZpbGVNaW1lID0gZnVuY3Rpb24oZmlsZSl7XG5cdFx0dmFyIGRpZmZlcmVkID0gJHEuZGVmZXIoKTtcblx0XHQkaHR0cC5nZXQoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL21pbWVUeXBlLycrIGZpbGUpXG5cdFx0LnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcG9uc2Upe1xuXHRcdFx0ZGlmZmVyZWQucmVzb2x2ZShyZXNwb25zZSk7XG5cdFx0fSlcblx0XHQuZXJyb3IoZnVuY3Rpb24oZXJyKXtcblx0XHRcdGRpZmZlcmVkLnJlamVjdChlcnIpO1xuXHRcdH0pO1xuXHRcdHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuXHR9O1xuICAgIHJldHVybiB0aGlzO1xufV0pO1xuc3luYy5zZXJ2aWNlKCdVc2VyJywgWyckaHR0cCcsJyRxJywnJHJvb3RTY29wZScsZnVuY3Rpb24gRmlsZXMgKCRodHRwLCRxLCRyb290U2NvcGUpIHtcblx0dGhpcy5pbmZvID0gZnVuY3Rpb24oKXtcblx0XHR2YXIgcHJvbWlzZSA9ICRxLmRlZmVyKCk7XG5cdFx0JGh0dHAuZ2V0KCRyb290U2NvcGUuZW5kUG9pbnQgK1wiL2FwaS92MS91c2Vycy9pbmZvXCIpXG5cdFx0LnN1Y2Nlc3MoZnVuY3Rpb24ocmVzKXtcblx0XHRcdHByb21pc2UucmVzb2x2ZShyZXMpO1xuXHRcdH0pXG5cdFx0LmVycm9yKGZ1bmN0aW9uKCkge1xuXHRcdFx0cHJvbWlzZS5yZWplY3QoKTtcblx0XHR9KTtcblx0XHRyZXR1cm4gcHJvbWlzZS5wcm9taXNlO1xuXHR9O1xuXHR0aGlzLmdyb3VwcyA9IGZ1bmN0aW9uKHVzZXIpe1xuICAgICAgdmFyIGRpZmZlcmVkID0gJHEuZGVmZXIoKTtcbiAgICAgICRodHRwLmdldCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvbWUvZ3JvdXBzJylcbiAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgZGlmZmVyZWQucmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICB9KVxuICAgICAgLmVycm9yKGZ1bmN0aW9uKGVycil7XG4gICAgICAgIGRpZmZlcmVkLnJlamVjdChlcnIpO1xuICAgICAgfSlcbiAgICAgIHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuICAgIH1cbiAgICBcblx0cmV0dXJuIHRoaXM7XG59XSlcbi8qIGdsb2JhbCBzeW5jICovXG5zeW5jLnNlcnZpY2UoJ05vdGlmaWNhdGlvbicsIFsnJGh0dHAnLCAnJHEnLCAnJHJvb3RTY29wZScsIGZ1bmN0aW9uIE5vdGlmaWNhdGlvbigkaHR0cCwgJHEsICRyb290U2NvcGUpIHtcbiAgICB0aGlzLmdldE5vdGlmaWNhdGlvbiA9IGZ1bmN0aW9uICh1c2VyX2lkKSB7XG4gICAgICAgIHZhciBkaWZmZXJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgICRodHRwLmdldCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvbm90aWZpY2F0aW9ucycsIHtjYWNoZTogZmFsc2V9KVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgZGlmZmVyZWQucmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGRpZmZlcmVkLnJlamVjdChlcnJvcik7XG4gICAgICAgICAgICB9KVxuICAgICAgICByZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcbiAgICB9XG4gICAgdGhpcy5jcmVhdGVOb3RpZmljYXRpb24gPSBmdW5jdGlvbiAoTm90aWZpY2F0aW9uKSB7XG4gICAgICAgIHZhciBkaWZmZXJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgICRodHRwLnBvc3QoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL25vdGlmaWNhdGlvbnMnLCBOb3RpZmljYXRpb24pXG4gICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICBkaWZmZXJlZC5yZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgZGlmZmVyZWQucmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcbiAgICB9XG4gICAgdGhpcy5kZWxldGVOb3RpZmljYXRpb24gPSBmdW5jdGlvbiAobm90aWZpY2F0aW9uKSB7XG4gICAgICAgIHZhciBkaWZmZXJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgICRodHRwLmRlbGV0ZSgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvbm90aWZpY2F0aW9ucy8nICsgbm90aWZpY2F0aW9uKVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgZGlmZmVyZWQucmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGRpZmZlcmVkLnJlamVjdChlcnJvcik7XG4gICAgICAgICAgICB9KVxuICAgICAgICByZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbn1dKTtcblxuc3luYy5jb250cm9sbGVyKCdub3RpZmljYXRpb25Db250cm9sbGVyJywgWyckc2NvcGUnLCdOb3RpZmljYXRpb24nLCckbG9nJywgZnVuY3Rpb24gKCRzY29wZSxOb3RpZmljYXRpb24sJGxvZykge1xuICAgICRzY29wZS5pbml0ID0gZnVuY3Rpb24oKXtcbiAgICAgICAgJHNjb3BlLmdldE5vdGlmaWNhdGlvbigpO1xuICAgIH1cbiAgICAkc2NvcGUuY2xlYXJOb3RpZmljYXRpb24gPSBmdW5jdGlvbihub3RpZmljYXRpb24pe1xuXG5cbiAgICAgIE5vdGlmaWNhdGlvbi5jbGVhck5vdGlmaWNhdGlvbihub3RpZmljYXRpb24pXG4gICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgIC8vbG9hZCByZW1haW5pbmcgbm90aWZpY2F0aW9uXG4gICAgICAgICRzY29wZS5nZXROb3RpZmljYXRpb24oKTtcbiAgICAgIH0sZnVuY3Rpb24oZXJyKXtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICAkc2NvcGUuZ2V0Tm90aWZpY2F0aW9uID0gZnVuY3Rpb24oKXtcbiAgICAgICAgTm90aWZpY2F0aW9uLmdldE5vdGlmaWNhdGlvbigpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7XG4gICAgICAgICAgICAvLyAkbG9nLmluZm8ocmVzdWx0KTtcbiAgICAgICAgICAgICRzY29wZS5ub3RpZmljYXRpb25zID0gcmVzdWx0O1xuICAgICAgICAgICAgXG4gICAgICAgIH0sZnVuY3Rpb24oZXJyb3Ipe1xuICAgICAgICAgICAgLy8gJGxvZy5pbmZvKGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgICRzY29wZS5pbml0KCk7XG59XSk7XG5zeW5jLmRpcmVjdGl2ZSgnbm90aWZ5JyxbZnVuY3Rpb24oKXtcbiAgcmV0dXJue1xuICAgIHJlc3RyaWN0OidBRScsXG4gICAgc2NvcGU6e1xuXG4gICAgfSxcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWwsIGlBdHRycyl7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgIHZhciB0aXRsZT0nVGhpcyB3aWxsIGJlIHRpdGxlJztcbiAgICAgICAgICAgICAgdmFyIGRlc2M9J01vc3QgcG9wdWxhciBhcnRpY2xlLic7XG4gICAgICAgICAgICAgIHZhciB1cmw9J3N5bmMuY29tOjgwMDAnO1xuICAgICAgICAgICAgICBub3RpZnlCcm93c2VyKHRpdGxlLGRlc2MsdXJsKTtcbiAgICAgICAgICB9LCAyMDAwKTtcbiAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCl7XG4gICAgICAgICAgICAgICAgaWYgKE5vdGlmaWNhdGlvbi5wZXJtaXNzaW9uICE9PSBcImdyYW50ZWRcIil7XG4gICAgICAgICAgICAgICAgICBOb3RpZmljYXRpb24ucmVxdWVzdFBlcm1pc3Npb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBmdW5jdGlvbiBub3RpZnlCcm93c2VyKHRpdGxlLGRlc2MsdXJsKVxuICAgICAge1xuICAgICAgICBpZiAoIU5vdGlmaWNhdGlvbikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0Rlc2t0b3Agbm90aWZpY2F0aW9ucyBub3QgYXZhaWxhYmxlIGluIHlvdXIgYnJvd3Nlci4uJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoTm90aWZpY2F0aW9uLnBlcm1pc3Npb24gIT09IFwiZ3JhbnRlZFwiKXtcbiAgICAgICAgICBOb3RpZmljYXRpb24ucmVxdWVzdFBlcm1pc3Npb24oKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICB2YXIgbm90aWZpY2F0aW9uID0gbmV3IE5vdGlmaWNhdGlvbih0aXRsZSwge1xuICAgICAgICAgICAgaWNvbjonaHR0cHM6Ly9saDMuZ29vZ2xldXNlcmNvbnRlbnQuY29tLy1hQ0ZpSzRiYVhYNC9Wam1HSm9qc1FfSS9BQUFBQUFBQU5KZy9oLXNMVlgxTTV6QS9zNDgtSWM0Mi9lZ2dzbWFsbC5wbmcnLFxuICAgICAgICAgICAgYm9keTogZGVzYyxcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIFJlbW92ZSB0aGUgbm90aWZpY2F0aW9uIGZyb20gTm90aWZpY2F0aW9uIENlbnRlciB3aGVuIGNsaWNrZWQuXG4gICAgICAgIG5vdGlmaWNhdGlvbi5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgd2luZG93Lm9wZW4odXJsKTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gQ2FsbGJhY2sgZnVuY3Rpb24gd2hlbiB0aGUgbm90aWZpY2F0aW9uIGlzIGNsb3NlZC5cbiAgICAgICAgbm90aWZpY2F0aW9uLm9uY2xvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ05vdGlmaWNhdGlvbiBjbG9zZWQnKTtcbiAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufV0pXG5cbnN5bmMuZmFjdG9yeSgndXNlckludGVyYWN0aW9uTm90aWZpY2F0aW9uJywgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgICAgICB0b2FzdHIuc3VjY2VzcyhtZXNzYWdlLCBcIlN1Y2Nlc3NcIik7XG4gICAgICAgIH0sXG4gICAgICAgIHdhcm46IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgICAgICB0b2FzdHIud2FybmluZyhtZXNzYWdlLCBcIkhleVwiKTtcbiAgICAgICAgfSxcbiAgICAgICAgaW5mbzogZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIHRvYXN0ci5pbmZvKG1lc3NhZ2UsIFwiRllJXCIpO1xuICAgICAgICB9LFxuICAgICAgICBlcnJvcjogZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIHRvYXN0ci5lcnJvcihtZXNzYWdlLCBcIk9oIE5vXCIpO1xuICAgICAgICB9XG4gICAgfTtcbn0pO1xuXG5zeW5jLmZhY3RvcnkoJ3VzZXJJbnRlcmFjdGlvbk5vdGlmaWNhdGlvbicsIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MobWVzc2FnZSwgXCJTdWNjZXNzXCIpO1xuICAgICAgICB9LFxuICAgICAgICB3YXJuOiBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgdG9hc3RyLndhcm5pbmcobWVzc2FnZSwgXCJIZXlcIik7XG4gICAgICAgIH0sXG4gICAgICAgIGluZm86IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgICAgICB0b2FzdHIuaW5mbyhtZXNzYWdlLCBcIkZZSVwiKTtcbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgICAgICB0b2FzdHIuZXJyb3IobWVzc2FnZSwgXCJPaCBOb1wiKTtcbiAgICAgICAgfVxuICAgIH07XG59KTtcblxuXG5zeW5jLmNvbnRyb2xsZXIoJ3VwbG9hZERpYWxvZ0N0cmwnLCBbJyRzY29wZScsJyR1aWJNb2RhbCcsJyRtZERpYWxvZycsJyRtZE1lZGlhJywgZnVuY3Rpb24gKCRzY29wZSwkdWliTW9kYWwsICRtZERpYWxvZywgJG1kTWVkaWEpIHtcblxuXHRcdFx0XHQvL2RlY2xhcmUgZ2xvYmFsIGZ1bmN0aW9uIGZvciBzaG9ydGN1dFxuXHRcdFx0XHQkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0JG1kRGlhbG9nLmhpZGUoKTtcblx0XHRcdFx0fTtcblx0XHQgICAgJHNjb3BlLmN1c3RvbUZ1bGxzY3JlZW4gPSAkbWRNZWRpYSgneHMnKSB8fCAkbWRNZWRpYSgnc20nKTtcblx0XHQgICAgJHNjb3BlLnVwbG9hZCA9IGZ1bmN0aW9uKGV2KSB7XG5cdFx0ICAgICAgJG1kRGlhbG9nLnNob3coe1xuXHRcdFx0XHRcdFx0cGFyZW50OiBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQuYm9keSksXG5cdFx0ICAgICAgICBjb250cm9sbGVyOiBEaWFsb2dDb250cm9sbGVyLFxuXHRcdCAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy91cGxvYWQudHBsLmh0bWwnLFxuXHRcdCAgICAgICAgcGFyZW50OiBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQuYm9keSksXG5cdFx0ICAgICAgICB0YXJnZXRFdmVudDogZXYsXG5cdFx0ICAgICAgICBjbGlja091dHNpZGVUb0Nsb3NlOmZhbHNlXG5cdFx0ICAgICAgfSlcblx0XHQgICAgICAudGhlbihmdW5jdGlvbihhbnN3ZXIpIHtcblx0XHQgICAgICAgICAgICAkc2NvcGUuc3RhdHVzID0gJ1lvdSBzYWlkIHRoZSBpbmZvcm1hdGlvbiB3YXMgXCInICsgYW5zd2VyICsgJ1wiLic7XG5cdFx0ICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuXHRcdCAgICAgICAgICAgICRzY29wZS5zdGF0dXMgPSAnWW91IGNhbmNlbGxlZCB0aGUgZGlhbG9nLic7XG5cdFx0ICAgICAgICAgIH0pO1xuXHRcdCAgICB9O1xuXHRcdFx0XHRmdW5jdGlvbiBEaWFsb2dDb250cm9sbGVyKCRzY29wZSwgJG1kRGlhbG9nKSB7XG5cdFx0XHRcdCAgJHNjb3BlLmhpZGUgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0ICAgICRtZERpYWxvZy5oaWRlKCk7XG5cdFx0XHRcdCAgfTtcblx0XHRcdFx0ICAkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdCAgICAkbWREaWFsb2cuY2FuY2VsKCk7XG5cdFx0XHRcdCAgfTtcblx0XHRcdFx0ICAkc2NvcGUuYW5zd2VyID0gZnVuY3Rpb24oYW5zd2VyKSB7XG5cdFx0XHRcdCAgICAkbWREaWFsb2cuaGlkZShhbnN3ZXIpO1xuXHRcdFx0XHQgIH07XG5cdFx0XHRcdH1cblx0XHRcdFx0RGlhbG9nQ29udHJvbGxlci4kaW5qZWN0ID0gW1wiJHNjb3BlXCIsIFwiJG1kRGlhbG9nXCJdO1xufV0pO1xuc3luYy5jb250cm9sbGVyKCdzaGFyZUNvbnRyb2xsZXInLCBbJyRzY29wZScsJyR1aWJNb2RhbCcsJyRtZERpYWxvZycsJyRtZE1lZGlhJywndXJsU2hvcnRlbmVyJywnU2hhcmUnLCdVc2VyJywgZnVuY3Rpb24gKCRzY29wZSwkdWliTW9kYWwsICRtZERpYWxvZywgJG1kTWVkaWEsdXJsU2hvcnRlbmVyLFNoYXJlLFVzZXIpIHtcblxuXHQvL2RlY2xhcmUgZ2xvYmFsIGZ1bmN0aW9uIGZvciBzaG9ydGN1dFxuXHQkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24oKSB7XG5cdFx0JG1kRGlhbG9nLmhpZGUoKTtcblx0fTtcblx0JHNjb3BlLmN1c3RvbUZ1bGxzY3JlZW4gPSAkbWRNZWRpYSgneHMnKSB8fCAkbWRNZWRpYSgnc20nKTtcblx0JHNjb3BlLnNoYXJlID0gZnVuY3Rpb24oZXYsZmlsZU5hbWUpIHtcblxuXHRcdCRtZERpYWxvZy5zaG93KHtcblx0XHRcdHBhcmVudDogYW5ndWxhci5lbGVtZW50KGRvY3VtZW50LmJvZHkpLFxuXHRcdFx0Y29udHJvbGxlcjogRGlhbG9nQ29udHJvbGxlcixcblx0XHRcdHRlbXBsYXRlVXJsOiAndmlld3Mvc2hhcmUudHBsLmh0bWwnLFxuXHRcdFx0cGFyZW50OiBhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQuYm9keSksXG5cdFx0XHR0YXJnZXRFdmVudDogZXYsXG5cdFx0XHRjbGlja091dHNpZGVUb0Nsb3NlOmZhbHNlXG5cdFx0fSlcblx0XHQudGhlbihmdW5jdGlvbihhbnN3ZXIpIHtcblx0XHRcdFx0XHQkc2NvcGUuc3RhdHVzID0gJ1lvdSBzYWlkIHRoZSBpbmZvcm1hdGlvbiB3YXMgXCInICsgYW5zd2VyICsgJ1wiLic7XG5cdFx0XHRcdH0sIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdCRzY29wZS5zdGF0dXMgPSAnWW91IGNhbmNlbGxlZCB0aGUgZGlhbG9nLic7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRmdW5jdGlvbiBEaWFsb2dDb250cm9sbGVyKCRzY29wZSwgJG1kRGlhbG9nKSB7XG5cdFx0XHRcdFx0Ly8gY29uc29sZS5sb2coJ3NoYXJlZEZpbGUnKyBmaWxlTmFtZSk7XG5cdFx0XHRcdFx0JHNjb3BlLmdldEZpbGUgPSBmdW5jdGlvbigpe1xuXHRcdFx0XHRcdFx0cmV0dXJuICRzY29wZS5maWxlPXVybFNob3J0ZW5lci5tYWtlU2hvcnQoZmlsZU5hbWUpO1xuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0JHNjb3BlLmhpZGUgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdCRtZERpYWxvZy5oaWRlKCk7XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHQkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHQkbWREaWFsb2cuY2FuY2VsKCk7XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHQkc2NvcGUuYW5zd2VyID0gZnVuY3Rpb24oYW5zd2VyKSB7XG5cdFx0XHRcdFx0XHQkbWREaWFsb2cuaGlkZShhbnN3ZXIpO1xuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH1cblx0XHRcdFx0RGlhbG9nQ29udHJvbGxlci4kaW5qZWN0ID0gW1wiJHNjb3BlXCIsIFwiJG1kRGlhbG9nXCJdO1xuXG5cdH07XG5cblxuXG5cdCRzY29wZS5zaGFyZUZpbGUgPSBmdW5jdGlvbih2bSl7XG5cblx0XHR2YXIgZW1haWxzPXZtLmVtYWlscztcblx0XHR2YXIgZW1haWxfYXJyYXkgPSBlbWFpbHMuc3BsaXQoJywnKTtcblx0XHR2YXIgaTtcblx0XHRmb3IgKCBpPTA7IGkgPCBlbWFpbF9hcnJheS5sZW5ndGg7IGkrKyApIHtcblx0XHRcdC8vdmFsaWRhdGUgZWFjaCBlbWFpbCB0byBzaGFyZSB3aXRoXG5cdFx0XHRTaGFyZS5zaGFyZSh2bSlcblx0XHRcdC50aGVuKGZ1bmN0aW9uKHJlcyl7XG5cdFx0XHRcdGNvbnNvbGUubG9nKHJlcyk7XG5cdFx0XHR9KS5jYXRjaCgpO1xuXHRcdFx0Ly8gY29uc29sZS5sb2coZW1haWxfYXJyYXlbaV0pO1xuXG5cdFx0fVxuXHR9XG5cbn1dKTtcblxuLyogZ2xvYmFsIHN5bmMgKi9cbi8qKlxuICogIENyZWF0ZWQgYnkgTXVyYWdpamltYW5hIFJpY2hhcmQgb24gMTAvMjAvMTUuXG4gKiAgQmVhc3RhcjQ1N0BnbWFpbC5jb20gLCBzeW5jQGdtYWlsLmNvbSAsIGNoZWNrIHdpdGggbWUhXG4gKi9cbi8qSSB1c2UgQ2FtZWxDYXNlIHdoaWxlIHJlbmFtaW5nIG15IGZ1bmN0aW9ucyAqL1xuLyphbmQgaSB1c2Ugc25ha2UgY2FzZSB3aGlsZSByZW5hbWluZyB2YXJpYWJsZXMgKi9cbi8qcG9zdCBzZXJ2aWNlICovXG5cbnN5bmMuc2VydmljZSgnUG9zdCcsIFsnJGh0dHAnLCAnJHEnLCAnJHJvb3RTY29wZScsIGZ1bmN0aW9uIFBvc3QoJGh0dHAsICRxLCAkcm9vdFNjb3BlKSB7XG4gICAgdGhpcy5nZXRQb3N0ID0gZnVuY3Rpb24gKHVzZXJfaWQpIHtcbiAgICAgICAgdmFyIGRpZmZlcmVkID0gJHEuZGVmZXIoKTtcbiAgICAgICAgJGh0dHAuZ2V0KCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS9tZS9wb3N0cz91c2VyX2lkJyArIHVzZXJfaWQsIHtjYWNoZTogZmFsc2V9KVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cbiAgICAgICAgICAgICAgICBkaWZmZXJlZC5yZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgZGlmZmVyZWQucmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcbiAgICB9O1xuICAgIHRoaXMucGFydGljaXBhdGUgPSBmdW5jdGlvbihvYmope1xuICAgICAgdmFyIGRpZmZlcmVkID0gJHEuZGVmZXIoKTtcbiAgICAgICRodHRwLnB1dCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvbWUvcG9zdHMvJyxvYmopXG4gICAgICAuc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgIGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgfSlcbiAgICAgIC5lcnJvcihmdW5jdGlvbihlcnIpe1xuICAgICAgICBkaWZmZXJlZC5yZWplY3QoZXJyKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIGRpZmZlcmVkLnByb21pc2U7XG4gICAgfTtcbiAgICB0aGlzLmNyZWF0ZVBvc3QgPSBmdW5jdGlvbiAocG9zdCkge1xuICAgICAgICB2YXIgZGlmZmVyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICAkaHR0cC5wb3N0KCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS9tZS9wb3N0cycsIHBvc3QpXG4gICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICBkaWZmZXJlZC5yZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgZGlmZmVyZWQucmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcbiAgICB9O1xuICAgIHRoaXMuZGVsZXRlUG9zdCA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICB2YXIgZGlmZmVyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICAkaHR0cC5kZWxldGUoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL21lL3Bvc3RzLycgKyBpZClcbiAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBkaWZmZXJlZC5yZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuICAgIH07XG4gICAgcmV0dXJuIHRoaXM7XG59XSk7XG5cbnN5bmMuY29udHJvbGxlcignUG9zdGluZ0NvbnRyb2xsZXInLCBbXG4gICckc2NvcGUnLFxuICAnUG9zdCcsXG4gICckdGltZW91dCcsXG4gICdVc2VyJyxcbiAgJyRpbnRlcnZhbCcsXG4gICdOb3RpZmljYXRpb24nLFxuICAvLyAnJGlvbmljTGlzdERlbGVnYXRlJyxcbiAgJyRsb2cnLFxuICAndXNlckludGVyYWN0aW9uTm90aWZpY2F0aW9uJyxcbiAgZnVuY3Rpb24gKFxuICAkc2NvcGUsXG4gIFBvc3QsXG4gICR0aW1lb3V0LFxuICBVc2VyLFxuICAkaW50ZXJ2YWwsXG4gIE5vdGlmaWNhdGlvbixcbiAgJGlvbmljTGlzdERlbGVnYXRlLFxuICAkbG9nLFxuICB1c2VySW50ZXJhY3Rpb25Ob3RpZmljYXRpb25cbikge1xuXG4gICAgJHNjb3BlLmluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICRzY29wZS5wb3N0TG9hZGVyKCk7XG4gICAgICAgICRzY29wZS5nZXRVc2VyKCk7XG5cbiAgICB9O1xuXG4gICAgJGludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJHNjb3BlLnBvc3RMb2FkZXIoKTtcbiAgICB9LCA4MDAwKTtcbiAgICAkc2NvcGUuZ2V0VXNlciA9ZnVuY3Rpb24oKXtcblxuICAgICAgVXNlci5faWQoKVxuICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuXG4gICAgICAgICRzY29wZS51c2VyID0gcmVzcG9uc2U7XG4gICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICAgIH0sZnVuY3Rpb24oZXJyKXtcbiAgICAgICAgLy9xdWl0IHNsaW50bHlcbiAgICAgIH0pO1xuICAgIH07XG4gICAgJHNjb3BlLmxvYWRNb3JlID0gZnVuY3Rpb24oKXtcblxuICAgIH07XG4gICAgJHNjb3BlLnBhcnRpY2lwYXRlSW50b1Bvc3QgPSBmdW5jdGlvbihwb3N0LHVzZXIpe1xuICAgICAgLy8gY29uc29sZS5sb2codXNlcik7XG4gICAgICB2YXIgb2JqID17XG4gICAgICAgICdwb3N0X2lkJzpwb3N0LFxuICAgICAgICAndXNlcl9pZCc6dXNlclxuICAgICAgfTtcbiAgICAgIFBvc3QucGFydGljaXBhdGUob2JqKVxuICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAkc2NvcGUucG9zdExvYWRlcigpO1xuICAgICAgfSxmdW5jdGlvbihlcnIpe1xuICAgICAgICAvL3F1aXQgc2xlbnRseVxuXG4gICAgICB9KTtcbiAgICB9O1xuICAgICRzY29wZS5wb3N0TG9hZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkc2NvcGUuZGF0YUxvYWRpbmcgPSB0cnVlO1xuICAgICAgICBQb3N0LmdldFBvc3QoKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHRyZWUpIHtcblxuICAgICAgICAgICAgICAgICRzY29wZS5wb3N0cyA9dHJlZTtcbiAgICAgICAgICAgICAgICAvL25hdmlnYXRlIHRyb3VnaCB0cmVlIHJlc3BvbnNlIHdoaWNoIGlzIHJlcXVpcmUgbXVjaCBhdHRlbnRpb25cbiAgICAgICAgICAgICAgICAkc2NvcGUuZnJpZW5kcz1bXTtcbiAgICAgICAgICAgICAgICAkc2NvcGUucmVwbGllcz1bXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRyZWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRyZWVbaV0uaGFzT3duUHJvcGVydHkoJ2ZyaWVuZHMnKSAmJiB0cmVlW2ldWydyZXBsaWVzJ10gICYmIHRyZWVbaV1bJ2ZyaWVuZHMnXSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZnJpZW5kcy5wdXNoKHRyZWVbaV0uZnJpZW5kcyk7XG4gICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnJlcGxpZXMucHVzaCh0cmVlW2ldLnJlcGxpZXMpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRyZWVbaV0uaGFzT3duUHJvcGVydHkoJ2ZyaWVuZHMnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmZyaWVuZHMgPSBmcmllbmRzLmNvbmNhdCh0cmF2ZXJzZSh0cmVlW2ldLmZyaWVuZHMpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5yZXBsaWVzID0gcmVwbGllcy5jb25jYXQodHJhdmVyc2UodHJlZVtpXS5yZXBsaWVzKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICAkc2NvcGUuaW1hZ2VEZXNjID0gZnVuY3Rpb24oaW5kZXgpe1xuICAgICAgLy9zaG93IGltYWdlcyB3aXRoIGRpZmZlcmVudCBwaXhlbFxuICAgICAgc3dpdGNoIChpbmRleCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgcmV0dXJuICc2MHB4JztcblxuICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHJldHVybiBcIjYwcHhcIjtcblxuICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHJldHVybiBcIjYwcHhcIjtcblxuICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIHJldHVybiBcIjYwcHhcIjtcblxuICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgIHJldHVybiBcIjYwcHhcIjtcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gXCI2MHB4XCI7XG5cbiAgICAgIH1cbiAgICAgIGNvbnNvbGUubG9nKGluZGV4KTtcbiAgICB9O1xuICAgICRzY29wZS5zaGFyZSA9IGZ1bmN0aW9uKGlkKXtcbiAgICAgICAgJGlvbmljTGlzdERlbGVnYXRlLmNsb3NlT3B0aW9uQnV0dG9ucygpO1xuICAgICAgICAkbG9nLmluZm8oaWQpO1xuICAgIH07XG4gICAgJHNjb3BlLmNyZWF0ZVBvc3QgPSBmdW5jdGlvbiAocG9zdGluZykge1xuICAgICAgLy9pZiBpbWFnZSBpcyB1cGxvYWRlZCB1cGxvYWRlZFxuICAgICAgICB2YXIgX3RoaXMgPSB7IG1lc3NhZ2U6IHBvc3RpbmcgfTtcbiAgICAgICAgUG9zdC5jcmVhdGVQb3N0KF90aGlzKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHBvc3RDcmVhdGVkKSB7XG4gICAgICAgICAgICAgICAgICAkc2NvcGUubWVzc2FnZSA9ICcnO1xuICAgICAgICAgICAgICAgICAgJHNjb3BlLnBvc3RzLnB1c2gocG9zdENyZWF0ZWQpO1xuICAgICAgICAgICAgICAgICAgdXNlckludGVyYWN0aW9uTm90aWZpY2F0aW9uLnN1Y2Nlc3MoXCJOZXcgUG9zdCBmZWVkIGNyZWF0ZWQhXCIpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XG5cbiAgICAgICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUuaW5pdCgpO1xufV0pO1xuc3luYy5kaXJlY3RpdmUoJ2ZlZWRzVXBsb2FkZXInLFtmdW5jdGlvbigpe1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnQUUnLFxuICAgIHJlcGxhY2U6IGZhbHNlLFxuICAgIHRlbXBsYXRlVXJsOiAnQXBwL2pzL3NjcmlwdHMvdmlld3MvZmVlZEF0dGFjaG1lbnQuaHRtbCcsXG4gICAgc2NvcGU6IHtcbiAgICAgIGFjdGlvbjogJ0AnXG4gICAgfSxcbiAgICBjb250cm9sbGVyOiBbJyRzY29wZScsIGZ1bmN0aW9uICgkc2NvcGUpIHtcbiAgICAgICRzY29wZS5wcm9ncmVzcyA9IDA7XG4gICAgICAkc2NvcGUuYXZhdGFyID0gJyc7XG4gICAgICAkc2NvcGUuc2VuZEZpbGUgPSBmdW5jdGlvbihlbCkge1xuICAgICAgICB2YXIgJGZvcm0gPSAkKGVsKS5wYXJlbnRzKCdmb3JtJyk7XG4gICAgICAgIGlmICgkKGVsKS52YWwoKSA9PT0gJycpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgJGZvcm0uYXR0cignYWN0aW9uJywgJHNjb3BlLmFjdGlvbik7XG4gICAgICAgICRzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgJHNjb3BlLnByb2dyZXNzID0gMDtcbiAgICAgICAgfSk7XG4gICAgICAgICRmb3JtLmFqYXhTdWJtaXQoe1xuICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgXHRiZWZvcmVTZW5kOiBmdW5jdGlvbiAoeGhyKSB7XG4gICAgICAgIFx0XHR4aHIuc2V0UmVxdWVzdEhlYWRlcignYXV0aG9yaXphdGlvbicsICdCZWFyZXIgT3FGaXJRUzQ0UlFUalJ1V25pWGpkSFpKUVhkQ3VFeDQ5cnE4Slk1QScpO1xuICAgICAgICBcdH0sXG4gICAgICAgICAgdXBsb2FkUHJvZ3Jlc3M6IGZ1bmN0aW9uKGV2dCwgcG9zLCB0b3QsIHBlcmNDb21wbGV0ZSkge1xuICAgICAgICAgICAgJHNjb3BlLiRhcHBseShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgLy8gdXBsb2FkIHRoZSBwcm9ncmVzcyBiYXIgZHVyaW5nIHRoZSB1cGxvYWRcbiAgICAgICAgICAgICAgLy8gJHNjb3BlLnByb2dyZXNzID0gcGVyY2VudENvbXBsZXRlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oZXZ0LCBzdGF0dXNUZXh0LCByZXNwb25zZSwgZm9ybSkge1xuICAgICAgICAgICAgLy8gcmVtb3ZlIHRoZSBhY3Rpb24gYXR0cmlidXRlIGZyb20gdGhlIGZvcm1cbiAgICAgICAgICAgICRmb3JtLnJlbW92ZUF0dHIoJ2FjdGlvbicpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzcG9uc2UsIHN0YXR1cywgeGhyLCBmb3JtKSB7XG4gICAgICAgICAgICB2YXIgYXIgPSAkKGVsKS52YWwoKS5zcGxpdCgnXFxcXCcpLFxuICAgICAgICAgICAgICBmaWxlbmFtZSA9ICBhclthci5sZW5ndGgtMV07XG4gICAgICAgICAgICAvLyByZW1vdmUgdGhlIGFjdGlvbiBhdHRyaWJ1dGUgZnJvbSB0aGUgZm9ybVxuICAgICAgICAgICAgJGZvcm0ucmVtb3ZlQXR0cignYWN0aW9uJyk7XG4gICAgICAgICAgICAkc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAkc2NvcGUuYXZhdGFyID0gZmlsZW5hbWU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfV0sXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW0sIGF0dHJzLCBjdHJsKSB7XG5cbiAgICAgIGVsZW0uZmluZCgnLmZha2UtdXBsb2FkZXInKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgZWxlbS5maW5kKCdpbnB1dFt0eXBlPVwiZmlsZVwiXScpLmNsaWNrKCk7XG4gICAgICB9KTtcblxuICAgIH1cbiAgfTtcbn1dKTtcblxuLyogZ2xvYmFsICR1aWJNb2RhbEluc3RhbmNlICovXG4vKiBnbG9iYWwgTW9kYWxJbnN0YW5jZUN0cmwgKi9cbi8qIGdsb2JhbCAkdWliTW9kYWwgKi9cbi8qIGdsb2JhbCBzeW5jICovXG4vKiBnbG9iYWwgc3luYyAqL1xuc3luYy5jb250cm9sbGVyKCdGaWxlc0NvbnRyb2xsZXInLFxuIFtcblx0JyRzY29wZScsJ0ZpbGVzJywnJGxvZycsJyR3aW5kb3cnLCdVc2VyJywnJHVpYk1vZGFsJywnJGludGVydmFsJywncGRmRGVsZWdhdGUnLCckdGltZW91dCcsJyRzdGF0ZVBhcmFtcycsJyRyb290U2NvcGUnLCckZXhjZXB0aW9uSGFuZGxlcicsJ0ZldGNoZXInLCBmdW5jdGlvbiAoXG5cdFx0JHNjb3BlLCBGaWxlcywkbG9nLCR3aW5kb3csVXNlciwkdWliTW9kYWwsJGludGVydmFsLHBkZkRlbGVnYXRlLCR0aW1lb3V0LCRzdGF0ZVBhcmFtcywkcm9vdFNjb3BlLCRleGNlcHRpb25IYW5kbGVyLEZldGNoZXIpIHtcblxuXHQgICRzY29wZS5pbml0ID0gZnVuY3Rpb24oKXtcbiAgICAgIC8vIGFsZXJ0KCdoZXJlIEkgYW0gY2FsbGVkJyk7XG5cbiAgICAgIC8vbG9hZCBhbGwgYm94IGZpbGVzXG5cdFx0ICAgICRzY29wZS5hbGwoKTtcbiAgICAgICAgJHNjb3BlLmNyYXp5KCk7XG5cdCAgfTtcblxuXG5cdCAgLy8gJGludGVydmFsKGZ1bmN0aW9uICgpIHtcblx0XHRcdC8vICRzY29wZS5hbGwoKTtcbiAgIC8vICB9LCA4MDAwKTtcblxuICAgJHNjb3BlLmNyYXp5ID0gZnVuY3Rpb24oKXtcbiAgICAgIHZhciB1c2Vycz0ne3VzZXJze2VtYWlsLGlkfX0nO1xuXG4gICAgICBGZXRjaGVyLmZldGNoKHVzZXJzKVxuICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzKXtcbiAgICAgICAgJHNjb3BlLmNyYXp5ICA9IHJlcztcbiAgICAgICAgY29uc29sZS5sb2cocmVzKTtcblxuICAgICAgfSwgZnVuY3Rpb24oZXJyb3Ipe1xuICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG5cbiAgICAgIH0pXG4gICAgfTtcblx0ICRzY29wZS5hbGwgPSBmdW5jdGlvbigpe1xuICAgICRzY29wZS5kYXRhTG9hZGluZyA9IHRydWU7XG5cdFx0RmlsZXMuZ2V0Qm94RmlsZXMoKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24ocmVzKXtcblxuXHRcdFx0XHQkc2NvcGUuZmlsZXMgXHQ9XHRyZXM7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcyk7XG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcil7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGVycm9yKTtcblx0XHRcdH0pXG4gICAgICAuZmluYWxseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgJHNjb3BlLmRhdGFMb2FkaW5nID0gZmFsc2U7XG4gICAgIH0pO1xuXHQgfTtcbiAgJHNjb3BlLmZpbGVUeXBlICA9IGZ1bmN0aW9uKHR5cGUpIHtcblxuICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgJ3BkZic6XG4gICAgICAgICAgcmV0dXJuICdpbWcvcGRmLnBuZyc7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2ZvbGRlcic6XG4gICAgICAgICAgcmV0dXJuICdpbWcvdW5pdmVyc2FsX2ZvbGRlci5wbmcnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdmb2xkZXIrJzpcbiAgICAgICAgICByZXR1cm4gJ2ltZy9BZGRfZm9sZGVyLnBuZyc7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3BocCc6XG4gICAgICAgICAgcmV0dXJuICdpbWcvY29kZS5wbmcnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICd0eHQnOlxuICAgICAgICByZXR1cm4gJ2ltZy9jb2RlLnBuZyc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdkb2N4JzpcbiAgICAgICAgICByZXR1cm4gJ2ltZy93b3JkLnBuZyc7XG4gICAgICAgIGNhc2UgJ2pwZyc6XG4gICAgICAgICAgcmV0dXJuICdmYSBmYS1pbWFnZSc7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3BuZyc6XG4gICAgICAgICAgcmV0dXJuICdpbWcvdmlkZW8ucG5nJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnanBlZyc6XG4gICAgICAgICAgICByZXR1cm4gJ2ltZy91bml2ZXJzYWxfZm9sZGVyLnBuZyc7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3ppcCc6XG4gICAgICAgICByZXR1cm4gJ2ltZy96aXAucG5nJztcbiAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gJ2ltZy91bml2ZXJzYWxfZm9sZGVyLnBuZyc7XG4gICAgICB9XG4gIH07XG5cblx0JHNjb3BlLmluaXQoKTtcbn1dKTtcblxuc3luYy5kaXJlY3RpdmUoJ2RyYWdnYWJsZScsIGZ1bmN0aW9uKCkge1xuXG4gICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiAnQUUnLFxuICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcbiAgICAgICAgICAgdmFyIGVsID0gZWxlbWVudFswXTtcblxuICAgICAgICAgICAgZWwuZHJhZ2dhYmxlID0gdHJ1ZTtcblxuICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICAgICAgICAnZHJhZ3N0YXJ0JyxcbiAgICAgICAgICAgICAgICBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZHJhZyBldmVudCBzdGFydGVkJyk7XG4gICAgICAgICAgICAgICAgICAgIGUuZGF0YVRyYW5zZmVyLmVmZmVjdEFsbG93ZWQgPSAnbW92ZSc7XG4gICAgICAgICAgICAgICAgICAgIGUuZGF0YVRyYW5zZmVyLnNldERhdGEoJ1RleHQnLCB0aGlzLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKCdkcmFnJyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGZhbHNlXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgICAgICdkcmFnZW5kJyxcbiAgICAgICAgICAgICAgICBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdkcmFnIGV2ZW50IHJlbGVhc2VkJyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZSgnZHJhZycpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBmYWxzZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH07XG59KTtcblxuc3luYy5kaXJlY3RpdmUoJ2Ryb3BwYWJsZScsIFsndXNlckludGVyYWN0aW9uTm90aWZpY2F0aW9uJywnRmlsZXMnLGZ1bmN0aW9uKHVzZXJJbnRlcmFjdGlvbk5vdGlmaWNhdGlvbixGaWxlcykge1xuICAgIHJldHVybiB7XG4gICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICBkcm9wOiAnJicsXG4gICAgICAgICAgICBiaW46ICc9Jy8vIHBhcmVudFxuICAgICAgICB9LFxuICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCkge1xuICAgICAgICAgICAgLy8gYWdhaW4gd2UgbmVlZCB0aGUgbmF0aXZlIG9iamVjdFxuICAgICAgICAgICAgdmFyIGVsID0gZWxlbWVudFswXTtcbiAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgICAgICdkcmFnb3ZlcicsXG4gICAgICAgICAgICAgIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgIGUuZGF0YVRyYW5zZmVyLmRyb3BFZmZlY3QgPSAnbW92ZSc7XG4gICAgICAgICAgICAgICAgICAvLyBhbGxvd3MgdXMgdG8gZHJvcFxuXG4gICAgICAgICAgICAgICAgICBpZiAoZS5wcmV2ZW50RGVmYXVsdCkgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKCdvdmVyJyk7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGZhbHNlXG4gICAgICAgICAgKTtcbiAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICAgICAgJ2RyYWdlbnRlcicsXG4gICAgICAgICAgICAgIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LmFkZCgnb3ZlcicpO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBmYWxzZVxuICAgICAgICAgICk7XG5cbiAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgICAnZHJhZ2xlYXZlJyxcbiAgICAgICAgICAgICAgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QucmVtb3ZlKCdvdmVyJyk7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGZhbHNlXG4gICAgICAgICAgKTtcbiAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgJ2Ryb3AnLFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gU3RvcHMgc29tZSBicm93c2VycyBmcm9tIHJlZGlyZWN0aW5nLlxuICAgICAgICAgICAgICAgICAgICBpZiAoZS5zdG9wUHJvcGFnYXRpb24pIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QucmVtb3ZlKCdvdmVyJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGJpbklkID0gdGhpcy5pZDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlLmRhdGFUcmFuc2Zlci5nZXREYXRhKCdUZXh0JykpO1xuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnSXRlbSBub3cgaXM6JytpdGVtKTtcblxuXG4gICAgICAgICAgICAgICAgICAgIHRyeXtcbiAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxsIHRoZSBwYXNzZWQgZHJvcCBmdW5jdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBlbmRDaGlsZChpdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbihzY29wZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmbiA9IHNjb3BlLmRyb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJ3VuZGVmaW5lZCcgIT09IHR5cGVvZiBmbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm4oaXRlbS5pZCwgYmluSWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1jYXRjaChlKXtcbiAgICAgICAgICAgICAgICAgICAgICAvL3Rocm93IGVycm9yIHRoYXQgaGFwcGVuIHdoZW4gZmlsZSBpcyBkcm9wcGVkIGluIGl0J3Mgb3duIGxvY2F0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgLy9naXZlIHNvbWUgYWxlcnQgdG8gbm90aWZ5IHdoYXQgaGFwcG5lZFxuICAgICAgICAgICAgICAgICAgICAgIC8vIHRocm93KCBuZXcgRXJyb3IoZSkpXG4gICAgICAgICAgICAgICAgICAgICAgLy8gdXNlckludGVyYWN0aW9uTm90aWZpY2F0aW9uLmVycm9yKFwiRHJvcCBGaWxlIG9uIGZvbGRlciB0byBtb3ZlIGl0IVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBmYWxzZVxuICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxufV0pO1xuc3luYy5jb250cm9sbGVyKCdEcmFnRHJvcEN0cmwnLCBbJyRzY29wZScsJ0ZpbGVzJywnJGludGVydmFsJyxmdW5jdGlvbigkc2NvcGUsRmlsZXMsJGludGVydmFsKSB7XG5cblxuICAgICRzY29wZS5oYW5kbGVEcm9wID0gZnVuY3Rpb24oKSB7XG4gICAgICAvLyAxKWlmIG1vdmVkIG9ubHkgd2hlbiBpdCByZWFjaCBvbiBmb2xkZXIgYWxsb3cgbW92ZVxuICAgICAgLy8gMil0YWtlIHRoIGlkIG9mIGZpbGUgbW92ZWQgYW5kIHRha2UgaWQgb2YgZm9sZGVyIG1vdmUgZmlsZSBpbnRvIGZvbGRlclxuXG4gICAgICAgLy9tb3ZlIHRoZSBpdGVtIGludG8gd2hlcmUgaXQgaXMgZHJvcGVkXG4gICAgICAgLy90aGUgZmlyc3QgdGhpbmcgaGVyZSBpcyB0byByZWNhbGN1bGF0ZSB0aGUgYXJyYXkgdG8ga2VlcCB0aGUgYXJyYW5nZW1lbnQgaW50YWN0XG5cblxuICAgIH1cbn1dKTtcblxuc3luYy5jb250cm9sbGVyKCdwcmV2aWV3Q29udHJvbGxlcicsXG4gW1xuXHQnJHNjb3BlJywncGRmRGVsZWdhdGUnLCckdGltZW91dCcsJyRzdGF0ZVBhcmFtcycsJyRyb290U2NvcGUnLCckZXhjZXB0aW9uSGFuZGxlcicsJ0ZpbGVzJywgJ0ZpbGVTYXZlcicsJ0Jsb2InLGZ1bmN0aW9uIChcblx0XHQkc2NvcGUscGRmRGVsZWdhdGUsJHRpbWVvdXQsJHN0YXRlUGFyYW1zLCRyb290U2NvcGUsJGV4Y2VwdGlvbkhhbmRsZXIsRmlsZXMsRmlsZVNhdmVyLCBCbG9iKSB7XG5cbiAgICAgIC8vZ2V0IG1pbWUgdHlwZSBvZiBhbnlGaWxlIHRoYXQgY29tZXMgaW4gbXkgaG9vZCFcblxuICAgICAgXG5cbiAgICAgIGlmKCRzdGF0ZVBhcmFtcy5wcmV2aWV3ICYmICRzdGF0ZVBhcmFtcy5leHRlbnNpb24gPT0gJ3BkZicpe1xuICAgICAgICAkc2NvcGUucHJldmlld2FibGUgPSB0cnVlO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy9hIHVzZXIgU3RyaW1VcCBpcyBpbmplY3RlZCBpbiBiZWxsb3cgdXJsIGl0IHNob3VsZCBiZSBkeW5hbWljIGluIGZ1dHVyZSFcbiAgICAgICAgICAgICRzY29wZS5wZGZVcmwgPSAkcm9vdFNjb3BlLmVuZFBvaW50KyAnL3ByZXZpZXcvJysgJHN0YXRlUGFyYW1zLnByZXZpZXcrJy9vZi8nKydTdHJpbVVwJztcblxuICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcGRmRGVsZWdhdGUuJGdldEJ5SGFuZGxlKCdteS1wZGYtY29udGFpbmVyJykuem9vbUluKDAuNSk7XG4gICAgICAgICAgICB9LCAzMDAwKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuXG4gICAgICAgICAgIHRocm93KCBuZXcgRXJyb3IoZSkpXG4gICAgICAgIH1cbiAgICAgIH1lbHNlIGlmKCRzdGF0ZVBhcmFtcy5wcmV2aWV3ICYmICRzdGF0ZVBhcmFtcy5leHRlbnNpb24gPT0gJ2pwZyd8fCRzdGF0ZVBhcmFtcy5leHRlbnNpb24gPT0gJ3BuZycpe1xuICAgICAgICAkc2NvcGUuZmlsZV9uYW1lID0gJHN0YXRlUGFyYW1zLnByZXZpZXc7XG4gICAgICAgICRzY29wZS5wcmV2aWV3YWJsZSA9IGZhbHNlO1xuICAgICAgICAvL2FzIGJ5IG5vdyBpbWFnZXMgYXJlIG5vdCByZWFkeSB0byBiZSBwcmV2aWV3ZWQgc28gc2V0IGl0IHRvIGZhbHNlIXByb3ZpZGUgb25seSBvcHRpb24gdG8gZG93bmxvYWQgdGhlbSFcbiAgICAgICAgICAvLyAkc2NvcGUucHJldmlld2FibGUgPSBmYWxzZTtcbiAgICAgICAgICAvLyBGaWxlcy5zaW5nbGUoJHN0YXRlUGFyYW1zLnByZXZpZXcpXG4gICAgICAgICAgLy8gLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgIC8vICAgJHNjb3BlLmltYWdlUHJldmlldyA9IHJlc3BvbnNlO1xuICAgICAgICAgIC8vIH0sZnVuY3Rpb24oZXJyKXtcbiAgICAgICAgICAvLyAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgLy8gfSk7XG4gICAgICB9ZWxzZSB7XG4gICAgICAgIC8vc2VuZCBhIGZpbGVuYW1lIHRvIGEgZG93bmxvYWQgYnV0dG9uXG4gICAgICAgICRzY29wZS5maWxlX25hbWUgPSAkc3RhdGVQYXJhbXMucHJldmlldztcbiAgICAgICAgJHNjb3BlLnByZXZpZXdhYmxlID0gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgICRzY29wZS5nb05leHQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAkc2NvcGUuaW5jcmVtZW50ID0gMTtcbiAgICAgICAgICBwZGZEZWxlZ2F0ZS4kZ2V0QnlIYW5kbGUoJ215LXBkZi1jb250YWluZXInKS5uZXh0KCRzY29wZS5pbmNyZW1lbnQrMSk7XG4gICAgICB9O1xuICAgICAgLy90aGlzIG9wdGlvbiBkb3duIGhlcmUgb2YgZG93bmxvYWRpbmcgYSBmaWxlIHdhcyBuaWNlIGJ1dCBzdGlsbCBoYXZlIHNvbWUgZHJvd2JhY2tcblxuICAgICAgLy8gJHNjb3BlLmRvd25sb2FkID0gZnVuY3Rpb24oZmlsZV9uYW1lKXtcblxuICAgICAgLy8gICBGaWxlcy5kb3dubG9hZEZpbGUoZmlsZV9uYW1lKVxuICAgICAgLy8gICAudGhlbihmdW5jdGlvbihmaWxlX3dyaXRlbil7XG4gICAgICAgICAgICBcbiAgICAgIC8vICAgICBGaWxlcy5nZXRNaW1lVHlwZSgkc3RhdGVQYXJhbXMucHJldmlldylcbiAgICAgIC8vICAgICAgIC50aGVuKGZ1bmN0aW9uKG1pbWVUeXBlKXtcblxuICAgICAgLy8gICAgICAgICB2YXIgYmxvYiA9IG5ldyBCbG9iKFtmaWxlX3dyaXRlbl0sIHtcbiAgICAgIC8vICAgICAgICAgICAgIHR5cGU6IG1pbWVUeXBlLFxuICAgICAgLy8gICAgICAgICB9KTtcbiAgICAgIC8vICAgICAgICAgRmlsZVNhdmVyLnNhdmVBcyhibG9iLCAkc3RhdGVQYXJhbXMucHJldmlldyk7XG5cbiAgICAgIC8vICAgICAgIH0sZnVuY3Rpb24oZXJyKXtcbiAgICAgIC8vICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIC8vICAgICAgIH0pO1xuXG4gICAgICAgICAgXG5cbiAgICAgIC8vICAgfSxmdW5jdGlvbihlcnIpe1xuICAgICAgLy8gICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAvLyAgIH0pO1xuICAgICAgLy8gfTtcbiAgICAgICRzY29wZS5nb1ByZXYgPSBmdW5jdGlvbihwYWdlKXtcbiAgICAgICAgICBwZGZEZWxlZ2F0ZS4kZ2V0QnlIYW5kbGUoJ215LXBkZi1jb250YWluZXInKS5wcmV2KCRzY29wZS5pbmNyZW1lbnQtMSk7XG4gICAgICB9O1xufV0pO1xuXG5zeW5jLmRpcmVjdGl2ZSgnZmlsZURvd25sb2FkJywgW2Z1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICAgICAgICByZXBsYWNlOiB0cnVlLFxuICAgICAgICAgICAgdGVtcGxhdGU6ICc8YnV0dG9uIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0XCIgZGF0YS1uZy1jbGljaz1cImRvd25sb2FkKClcIj48c3BhbiBjbGFzcz1cIlwiPjwvc3Bhbj5Eb3dubG9hZDwvYnV0dG9uPicsXG4gICAgICAgICAgICBjb250cm9sbGVyOiBbJyRyb290U2NvcGUnLCAnJHNjb3BlJywgJyRlbGVtZW50JywgJyRhdHRycycsICckdGltZW91dCcsIGZ1bmN0aW9uICgkcm9vdFNjb3BlLCAkc2NvcGUsICRlbGVtZW50LCAkYXR0cnMsICR0aW1lb3V0KSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnByb2dyZXNzID0gMDtcblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHByZXBhcmUodXJsKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGRpYWxvZ3Mud2FpdChcIlBsZWFzZSB3YWl0XCIsIFwiWW91ciBkb3dubG9hZCBzdGFydHMgaW4gYSBmZXcgc2Vjb25kcy5cIiwgJHNjb3BlLnByb2dyZXNzKTtcbiAgICAgICAgICAgICAgICAgICAgZmFrZVByb2dyZXNzKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHN1Y2Nlc3ModXJsKSB7XG4gICAgICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdCgnZGlhbG9ncy53YWl0LmNvbXBsZXRlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGVycm9yKHJlc3BvbnNlLCB1cmwpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gZGlhbG9ncy5lcnJvcihcIkNvdWxkbid0IHByb2Nlc3MgeW91ciBkb3dubG9hZCFcIik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZmFrZVByb2dyZXNzKCkge1xuICAgICAgICAgICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnByb2dyZXNzIDwgOTUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucHJvZ3Jlc3MgKz0gKDk2IC0gJHNjb3BlLnByb2dyZXNzKSAvIDI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gJHJvb3RTY29wZS4kYnJvYWRjYXN0KCdkaWFsb2dzLndhaXQucHJvZ3Jlc3MnLCB7ICdwcm9ncmVzcyc6ICRzY29wZS5wcm9ncmVzcyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWtlUHJvZ3Jlc3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSwgMjUwKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAkc2NvcGUuZG93bmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5wcm9ncmVzcyA9IDA7XG4gICAgICAgICAgICAgICAgICAgICQuZmlsZURvd25sb2FkKCdodHRwOi8vc3luY21lLmNvbTo4MDAwL2FwaS92MS9maWxlcy9kb3dubG9hZC9waHB4Rm5saGVEVkU1ajVtY1ZEWC5wbmcvb2YvU3RyaW1VcD9hY2Nlc3NfdG9rZW49QmM3RFdTN0tLUkx0eG1kZFVaSTFUMWxadTJKMVloUjhPTFhHV05abicsIHsgcHJlcGFyZUNhbGxiYWNrOiBwcmVwYXJlLCBzdWNjZXNzQ2FsbGJhY2s6IHN1Y2Nlc3MsIGZhaWxDYWxsYmFjazogZXJyb3IgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfV1cbiAgICAgICAgfVxufV0pO1xuXG4vKiBnbG9iYWwgc3luYyAqL1xuXCJ1c2Ugc3RyaWN0XCI7XG5zeW5jLmNvbnRyb2xsZXIoJ1Blb3BsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsJ1Blb3BsZScsZnVuY3Rpb24gKCRzY29wZSwgUGVvcGxlKSB7XG5cdFx0JHNjb3BlLmluaXQgPSBmdW5jdGlvbigpe1xuXHRcdFx0JHNjb3BlLmdldFBlb3BsZVRvRm9sbG93KCk7XG5cdFx0fVxuXHRcdCRzY29wZS5nZXRQZW9wbGVUb0ZvbGxvdyAgPSBmdW5jdGlvbigpe1xuXHRcdFx0UGVvcGxlLmdldCgpXG5cdFx0XHQudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG5cdFx0XHRcdFxuXHRcdFx0XHQkc2NvcGUucGVvcGxlID0gcmVzcG9uc2U7XG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcil7XG5cblx0XHRcdH0pXG5cdFx0fVxuXHRcdCRzY29wZS4kb24oJ2ZvbGxvd01lbWJlcicsZnVuY3Rpb24oZXZlbnQscGFyYW1zKXtcblx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRQZW9wbGUuZm9sbG93KHBhcmFtcylcblx0XHRcdC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblx0XHRcdFx0Ly9jb25zb2xlLmxvZyhyZXNwb25zZSk7XG5cdFx0XHRcdCRzY29wZS5nZXRQZW9wbGVUb0ZvbGxvdygpO1xuXHRcdFx0fSxmdW5jdGlvbihlcnJvcil7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGVycm9yKTtcblx0XHRcdH0pXG5cdFx0fSk7XG5cdFx0JHNjb3BlLmZvbGxvdyA9IGZ1bmN0aW9uKGlkKXtcblx0XHRcdHZhciBmb2xsb3cgPXtpZDogaWQsIG9wdGlvbjonYWRkUGVvcGxlJ307XG5cdFx0XHQkc2NvcGUuJGVtaXQoXCJmb2xsb3dNZW1iZXJcIiwgZm9sbG93KTtcblx0XHR9XG5cdFx0JHNjb3BlLmluaXQoKTtcbn1dKTtcblxuLyogZ2xvYmFsIEZpbGVzICovXG4vKiBnbG9iYWwgc3luYyAqL1xuLyogZ2xvYmFsICRzY29wZSAqL1xuLyogZ2xvYmFsIGFuZ3VsYXIgKi9cbi8qQXV0aG9yIE11cmFnaWppbWFuYSBGb3VuZGVyICYgQ0VPIG9mIHN5bmMgY2FsbCBoaW0gb24gU3RyaW1VcEBnbWFpbC5jb20qL1xuXG5zeW5jLnNlcnZpY2UoJ0dyb3VwJywgW1xuXHQnJGh0dHAnLFxuXHQnJHJvb3RTY29wZScsXG5cdCckcScsZnVuY3Rpb24gR3JvdXAgKFxuXHRcdCRodHRwLFxuXHRcdCRyb290U2NvcGUsXG5cdFx0JHEpIHtcblx0dGhpcy5jcmVhdGUgXHRcdD1cdGZ1bmN0aW9uKG5hbWUpe1xuXHRcdHZhciBkaWZmZXJlZCBcdD1cdCRxLmRlZmVyKCk7XG5cdFx0JGh0dHAucG9zdCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvbWUvZ3JvdXBzJywgbmFtZSlcblx0XHQuc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSl7XG5cdFx0XHRkaWZmZXJlZC5yZXNvbHZlKHJlc3BvbnNlKTtcblx0XHR9KVxuXHRcdC5lcnJvcihmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0ZGlmZmVyZWQucmVqZWN0KGVycm9yKTtcblx0XHR9KVxuXHRcdHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuXHR9XG5cdHRoaXMuZGVsZXRlIFx0XHQ9XHRmdW5jdGlvbihpZCl7XG5cdFx0dmFyIGRpZmZlcmVkIFx0PVx0JHEuZGVmZXIoKTtcblx0XHQkaHR0cC5kZWxldGUoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL21lL2dyb3Vwcy8nK2lkKVxuXHRcdC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblx0XHRcdGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuXHRcdH0pXG5cdFx0LmVycm9yKGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRkaWZmZXJlZC5yZWplY3QoZXJyb3IpO1xuXHRcdH0pXG5cdFx0cmV0dXJuIGRpZmZlcmVkLnByb21pc2U7XG5cdH1cblx0dGhpcy5teUdyb3Vwc1x0XHQ9XHRmdW5jdGlvbigpe1xuXHRcdHZhciBkaWZmZXJlZCBcdD1cdCRxLmRlZmVyKCk7XG5cblx0XHQkaHR0cC5nZXQoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL21lL2dyb3VwcycpXG5cdFx0LnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcG9uc2Upe1xuXHRcdFx0ZGlmZmVyZWQucmVzb2x2ZShyZXNwb25zZSk7XG5cdFx0fSlcblx0XHQuZXJyb3IoZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdGNvbnNvbGUubG9nKCdkaWZmZXJlZCBzbG93OicgKyBlcnJvcik7XG5cdFx0XHRkaWZmZXJlZC5yZWplY3QoZXJyb3IpO1xuXHRcdH0pXG5cdFx0cmV0dXJuIGRpZmZlcmVkLnByb21pc2U7XG5cdH1cblxuXHR0aGlzLmFkZFBlb3BsZSBcdD1cdGZ1bmN0aW9uKG1lbWJlcil7XG5cdFx0dmFyIGRpZmZlcmVkIFx0PVx0JHEuZGVmZXIoKTtcblx0XHQkaHR0cC5wdXQoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL21lL2dyb3Vwcy8nK0pTT04uc3RyaW5naWZ5KG1lbWJlcikpXG5cdFx0LnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcG9uc2Upe1xuXHRcdFx0ZGlmZmVyZWQucmVzb2x2ZShyZXNwb25zZSk7XG5cdFx0fSlcblx0XHQuZXJyb3IoZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdGRpZmZlcmVkLnJlc29sdmUoZXJyb3IpO1xuXHRcdH0pXG5cdFx0cmV0dXJuIGRpZmZlcmVkLnByb21pc2U7XG5cdH07XG5cdHRoaXMuYWRkRmlsZVRvR3JvdXAgPSBmdW5jdGlvbihmaWxlT2JqKXtcblx0XHR2YXIgZGlmZmVyZWQgPSAkcS5kZWZlcigpO1xuXHRcdCRodHRwLnB1dCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvbWUvZ3JvdXBzLycrIEpTT04uc3RyaW5naWZ5KGZpbGVPYmopKVxuXHRcdC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblx0XHRcdGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuXHRcdH0pXG5cdFx0LmVycm9yKGZ1bmN0aW9uKGVycil7XG5cdFx0XHRkaWZmZXJlZC5yZWplY3QoZXJyKTtcblx0XHR9KVxuXHRcdHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuXHR9XG5cdHRoaXMucmVtb3ZlUGVvcGxlIFx0PVx0ZnVuY3Rpb24obWVtYmVyKXtcblx0XHR2YXIgZGlmZmVyZWQgXHQ9XHQkcS5kZWZlcigpO1xuXHRcdCRodHRwLnB1dCgkcm9vdFNjb3BlLmVuZFBvaW50ICsnL2FwaS92MS9tZS9ncm91cHMvJytKU09OLnN0cmluZ2lmeShtZW1iZXIpKVxuXHRcdC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblx0XHRcdGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuXHRcdH0pXG5cdFx0LmVycm9yKGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRkaWZmZXJlZC5yZWplY3QoZXJyb3IpO1xuXHRcdH0pXG5cdFx0cmV0dXJuIGRpZmZlcmVkLnByb21pc2U7XG5cdH1cbiAgdGhpcy5zdWdnZXN0UGVvcGxlID0gZnVuY3Rpb24oaWQpe1xuXG4gICAgXHR2YXIgZGlmZmVyZWQgPSAkcS5kZWZlcigpO1xuICAgIFx0JGh0dHAuZ2V0KCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS9tZS9ncm91cHMvJyArIGlkKVxuICAgIFx0LnN1Y2Nlc3MoZnVuY3Rpb24ocmVzKXtcbiAgICBcdFx0ZGlmZmVyZWQucmVzb2x2ZShyZXMpO1xuICAgIFx0fSlcbiAgICBcdC5lcnJvcihmdW5jdGlvbihlcnIpIHtcbiAgICBcdFx0ZGlmZmVyZWQucmVqZWN0KGVycik7XG4gICAgXHR9KVxuICAgIFx0cmV0dXJuIGRpZmZlcmVkLnByb21pc2U7XG4gICAgfVxuXHRyZXR1cm4gdGhpcztcbn1dKTtcblxuc3luYy5jb250cm9sbGVyKCdHcm91cENvbnRyb2xsZXInLCBbXG5cdCckc2NvcGUnLFxuXHQnR3JvdXAnLFxuXHQnVXNlcicsXG5cdCdGaWxlcycsXG5cdCd1c2VySW50ZXJhY3Rpb25Ob3RpZmljYXRpb24nLFxuXHRmdW5jdGlvbiBHcm91cENvbnRyb2xsZXIgKFxuXHRcdCRzY29wZSxcblx0XHRHcm91cCxcblx0XHRVc2VyLFxuXHRcdEZpbGVzLFxuXHRcdHVzZXJJbnRlcmFjdGlvbk5vdGlmaWNhdGlvblxuXHQpIHtcblx0JHNjb3BlLmluaXQgXHQ9XHRmdW5jdGlvbigpe1xuXHRcdCRzY29wZS5teUdyb3VwcygpO1xuXG5cdFx0JHNjb3BlLnN1Z2dlc3RlZFBlb3BsZVRvR3JvdXAoKTsvL29mY2F1c2UgdGhleSBhcmUgYXJsZWFkeSB5b3VyIGZyaWVuZCBidXQgbm90IHBhcnRpY2lwYW50IGluIHlvdXIgc3R1ZmYgd29yayFcblx0fVxuXHQkc2NvcGUudXNlcklkIFx0XHRcdFx0PVx0ZnVuY3Rpb24oKXtcblx0XHRVc2VyLl9pZCgpXG5cdFx0LnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuXHRcdFx0JHNjb3BlLnVzZXJJZCBcdD1cdHJlc3BvbnNlO1xuXHRcdH0sIGZ1bmN0aW9uKGVycm9yKXtcblx0XHRcdGNvbnNvbGUubG9nKGVycm9yKTtcblx0XHR9KTtcblx0fTtcblx0JHNjb3BlLm15R3JvdXBzIFx0XHRcdD1cdGZ1bmN0aW9uKCl7XG5cdFx0R3JvdXAubXlHcm91cHMoKVxuXHRcdC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblx0XHRcdCRzY29wZS5ncm91cCBcdD0gcmVzcG9uc2U7XG5cdFx0fSwgZnVuY3Rpb24oZXJyb3Ipe1xuXHRcdH0pO1xuXHR9O1xuXHQkc2NvcGUuc3VnZ2VzdGVkUGVvcGxlVG9Hcm91cCBcdD1cdGZ1bmN0aW9uKGlkKXtcblx0XHQvL2NsZWFyaW5nIGFsbCB2aWV3IHJlbmRlcmVkIGJlZm9yZVxuXHRcdCRzY29wZS5zaG93RmlsZXM9ZmFsc2U7XG5cdFx0JHNjb3BlLnNob3dHcm91cD1mYWxzZTtcblx0XHQkc2NvcGUuc2hvd0JveD1mYWxzZTtcblx0XHRpZighYW5ndWxhci5pc1VuZGVmaW5lZChpZCkpe1xuXHRcdFx0R3JvdXAuc3VnZ2VzdFBlb3BsZShpZCkudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG5cdFx0XHRcdC8vIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcblx0XHRcdFx0JHNjb3BlLmZvbGxvd2VycyA9IHJlc3BvbnNlO1xuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3Ipe1xuXHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcik7XG5cdFx0XHR9KTtcblx0XHR9XG5cdH07XG5cdCRzY29wZS4kb24oJ3JlZnJlc2hHcm91cCcsZnVuY3Rpb24oKXtcbiAgICAgICAkc2NvcGUuaW5pdCgpO1xuICBcdH0pO1xuXHQkc2NvcGUuJG9uKCdncm91cERlbGV0ZWQnLCBmdW5jdGlvbiAoZXZlbnQsIGFyZ3MpIHtcblx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdCRzY29wZS5teUdyb3VwcygpO1xuXHR9KTtcblx0JHNjb3BlLiRvbignZ3JvdXBUb2JpbmR3aXRoJywgZnVuY3Rpb24gKGV2ZW50LCBncm91cGlkKSB7XG5cdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgJHNjb3BlLmVtaXR0ZWQgPWdyb3VwaWQ7XG4gICAgICAgIGlmKCAkc2NvcGUuc2hvd0ZpbGVzID09IHRydWUpe1xuICAgICAgICAgICAgJHNjb3BlLnNob3dGaWxlcz1mYWxzZTtcbiAgICAgICAgfVxuICAgICAgICAkc2NvcGUuc3VnZ2VzdGVkUGVvcGxlVG9Hcm91cChncm91cGlkKTtcbiAgICAgICAgJHNjb3BlLmFkZFBlb3BsZT10cnVlO1xuXHR9KTtcblx0JHNjb3BlLmdldEdyb3VwRmlsZXMgPSBmdW5jdGlvbihvd25lcil7XG4gICAgRmlsZXMuZ2V0R3JvdXBGaWxlcyhvd25lcilcblx0XHQudGhlbihmdW5jdGlvbih0cmVlKXtcblx0XHRcdCRzY29wZS5maWxlcyA9IHRyZWU7XG5cdFx0XHRcdC8vbmF2aWdhdGUgdHJvdWdoIHRyZWUgcmVzcG9uc2Ugd2hpY2ggaXMgcmVxdWlyZSBtdWNoIGF0dGVudGlvblxuXHRcdFx0XHQkc2NvcGUuZ3JvdXBzPVtdO1xuXHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHRyZWUubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRcdGlmICh0cmVlW2ldLmhhc093blByb3BlcnR5KCdncm91cHMnKSAmJiB0cmVlW2ldWydncm91cHMnXSkge1xuXHRcdFx0XHRcdFx0XHRcdCRzY29wZS5ncm91cHMucHVzaCh0cmVlW2ldLmZyaWVuZHMpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmICh0cmVlW2ldLmhhc093blByb3BlcnR5KCdncm91cHMnKSkge1xuXHRcdFx0XHRcdFx0XHRcdCRzY29wZS5ncm91cHMgPSBncm91cHMuY29uY2F0KHRyYXZlcnNlKHRyZWVbaV0uZ3JvdXBzKSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHR9LCBmdW5jdGlvbihlcnJvcil7XG5cdFx0XHRjb25zb2xlLmxvZyhlcnJvcik7XG5cdFx0fSk7XG4gIH07XG5cdCRzY29wZS5nZXRCb3hGaWxlcyA9IGZ1bmN0aW9uKGdyb3VwSWQpe1xuXHRcdCRzY29wZS5lbWl0dGVkID1ncm91cElkO1xuICBcdEZpbGVzLmdldEJveEZpbGVzKGdyb3VwSWQpXG5cdFx0LnRoZW4oZnVuY3Rpb24odHJlZSl7XG5cdFx0XHQkc2NvcGUuZmlsZXMgPSB0cmVlO1xuXHRcdFx0XHQvL25hdmlnYXRlIHRyb3VnaCB0cmVlIHJlc3BvbnNlIHdoaWNoIGlzIHJlcXVpcmUgbXVjaCBhdHRlbnRpb25cblx0XHRcdFx0JHNjb3BlLmdyb3Vwcz1bXTtcblx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCB0cmVlLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0XHRpZiAodHJlZVtpXS5oYXNPd25Qcm9wZXJ0eSgnZ3JvdXBzJykgJiYgdHJlZVtpXVsnZ3JvdXBzJ10pIHtcblx0XHRcdFx0XHRcdFx0XHQkc2NvcGUuZ3JvdXBzLnB1c2godHJlZVtpXS5mcmllbmRzKTtcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAodHJlZVtpXS5oYXNPd25Qcm9wZXJ0eSgnZ3JvdXBzJykpIHtcblx0XHRcdFx0ICAgICAgICAgICAgJHNjb3BlLmdyb3VwcyA9IGdyb3Vwcy5jb25jYXQodHJhdmVyc2UodHJlZVtpXS5ncm91cHMpKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdH0sIGZ1bmN0aW9uKGVycm9yKXtcblx0XHRcdGNvbnNvbGUubG9nKGVycm9yKTtcblx0XHR9KTtcbiAgfTtcbiRzY29wZS4kb24oJ3Nob3dPcHRpb25zJyxmdW5jdGlvbihfLHBhcmFtcyl7XG4gICAgIGlmKHBhcmFtcy5vd25lciA9PT1cImJveFwiKXtcblx0XHRcdCAkc2NvcGUuYWRkUGVvcGxlPWZhbHNlO1xuXHRcdFx0ICRzY29wZS5zaG93R3JvdXA9ZmFsc2U7XG4gICAgICAgJHNjb3BlLnNob3dCb3g9dHJ1ZTtcbiAgICAgICBpZiggJHNjb3BlLmFkZFBlb3BsZSA9PSB0cnVlKXtcbiAgICAgICAgICAgJHNjb3BlLmFkZFBlb3BsZT1mYWxzZTtcbiAgICAgICB9XG5cdFx0XHQgLy9zZXQgZmlsZXMgc2NvcGUgdG8gc2hvdyBmaWxlcyBvZiBib3ggZmlsZXMgaXMgcmVwZWF0ZWQgaW4gdmlldyBkaXJlY3RpdmVcbiAgICAgICAkc2NvcGUuZ2V0Qm94RmlsZXMgKHBhcmFtcy5ncm91cF9pZCk7XG5cdFx0IH1lbHNlIGlmIChwYXJhbXMub3duZXIgPT09IFwiZ3JvdXBcIikge1xuXHRcdFx0ICRzY29wZS5zaG93Qm94PWZhbHNlO1xuXHRcdFx0ICRzY29wZS5hZGRQZW9wbGU9ZmFsc2U7XG5cdFx0XHQgJHNjb3BlLnNob3dHcm91cD10cnVlO1xuXHRcdFx0IGlmKCAkc2NvcGUuYWRkUGVvcGxlID09IHRydWUpe1xuXHRcdFx0XHRcdCAkc2NvcGUuYWRkUGVvcGxlPWZhbHNlO1xuXHRcdFx0IH1cblx0XHRcdCAvL2NoYW5nZSBmaWxlcyB0byBuZXcgc2NvcGUgZmlsZXMgdG8gc2hvdyBmaWxlcyBvZiBncm91cHMgIGlzIHJlcGVhdGVkIGluIHZpZXcgZGlyZWN0aXZlXG5cdFx0XHQgJHNjb3BlLmdldEdyb3VwRmlsZXMgKHBhcmFtcy5ncm91cF9pZCk7XG5cdFx0IH1cbn0pO1xuJHNjb3BlLmluaXQoKTtcbn1dKTtcbnN5bmMuZGlyZWN0aXZlKCdteUdyb3VwcycsIFtcblx0J0dyb3VwJyxcblx0J1JlcG9ydCcsXG5cdCd1c2VySW50ZXJhY3Rpb25Ob3RpZmljYXRpb24nLFxuXHRmdW5jdGlvbiBteUdyb3VwcyAoXG5cdFx0R3JvdXAsXG5cdFx0UmVwb3J0LFxuXHRcdHVzZXJJbnRlcmFjdGlvbk5vdGlmaWNhdGlvbixcblx0XHROb3RpZmljYXRpb24pIHtcblx0cmV0dXJuIHtcblx0XHRwcmlvcml0eTogMTAsXG5cdFx0dGVtcGxhdGVVcmw6ICdBcHAvc2NyaXB0cy9qcy9kaXJlY3RpdmVzL2dyb3Vwcy5odG1sJyxcblx0XHRyZXN0cmljdDogJ0UnLFxuXHRcdHNjb3BlOiB7XG5cdFx0XHQgIGlkOiAnPXVzZXJJZCcsXG4gICAgICAgICAgZ3JvdXBzOiAnPScsXG4gICAgICAgICAgZm9sbG93ZXJzOiAnPScsXG4gICAgICAgICAgZW1pdHRlZDonPScsXG4gICAgICAgICAgc2hvd1Blb3BsZTonPScsXG4gICAgICAgICAgc2hvd0dyb3VwICAgOiAgJz0nLFxuICAgICAgICAgIGZpbGVzICAgOiAgJz0nLFxuXHQgIFx0XHRcdHNob3dCb3g6ICAnPSdcblx0XHR9LFxuXHRcdGxpbms6IGZ1bmN0aW9uIChzY29wZSwgaUVsZW1lbnQsIGlBdHRycykge1xuXHRcdFx0c2NvcGUuZGVsZXRlR3JvdXAgPSBmdW5jdGlvbihpZCl7XG5cdFx0XHRcdEdyb3VwLmRlbGV0ZShpZClcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24ocmVzKXtcblx0XHRcdFx0XHRcdHVzZXJJbnRlcmFjdGlvbk5vdGlmaWNhdGlvbi5pbmZvKFwiR3JvdXAgZGVsZXRlZFwiKTtcblx0XHRcdFx0XHQgXHRzY29wZS4kZW1pdChcImdyb3VwRGVsZXRlZFwiLCAnZ3JvdXAgZGVsZXRlZCcpO1xuXHRcdFx0XHR9LCBmdW5jdGlvbihlcnIpe1xuXHRcdFx0XHRcdFJlcG9ydC5zZW5kKCdkZWxldGUgZ3JvdXAgZXJyb3I6JytlcnIpXG5cdFx0XHRcdFx0LnRoZW4oZnVuY3Rpb24oKXt9LCBmdW5jdGlvbigpe30pO1xuXHRcdFx0XHR9KVxuXHRcdFx0fTtcbiAgICAgIHNjb3BlLmNyZWF0ZUdyb3VwXHQ9XHRmdW5jdGlvbihuYW1lKXtcbiAgICAgICAgICBHcm91cC5jcmVhdGUobmFtZSlcbiAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR1c2VySW50ZXJhY3Rpb25Ob3RpZmljYXRpb24uc3VjY2VzcyhcIkNyZWF0ZWQgbmV3IEdyb3VwXCIpO1xuICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLiRlbWl0KCdyZWZyZXNoR3JvdXAnLG51bGwpO1xuICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oZXJyb3Ipe1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9O1xuXHRcdFx0c2NvcGUuaW5pdEFkZFBlb3BsZSA9IGZ1bmN0aW9uKGdyb3VwaWQpe1xuXHRcdFx0XHRzY29wZS4kZW1pdChcImdyb3VwVG9iaW5kd2l0aFwiLCBncm91cGlkKTtcblx0XHRcdH07XG5cblx0XHRcdHNjb3BlLmFkZFBlb3BsZSA9IGZ1bmN0aW9uKHBhcmFtcyl7XG5cdFx0XHRcdHZhciBuZXdQYXJhbXMgPXtcblx0XHRcdFx0XHQnb3B0aW9uJzonYWRkTWVtYmVyJyxcblx0XHRcdFx0XHQndXNlcklkJzpwYXJhbXMudXNlcklkLFxuXHRcdFx0XHRcdCdncm91cElkJzpwYXJhbXMuZ3JvdXBJZFxuXHRcdFx0XHR9XG5cdFx0XHRcdGlmKGFuZ3VsYXIuaXNVbmRlZmluZWQocGFyYW1zKSl7XG5cdFx0XHRcdFx0Ly93b24ndCBoYXBwZW4hb3IgaWYgdGkgaGFwcGVuIHdlIHF1aXRcblx0XHRcdFx0fWVsc2V7XG5cblx0XHRcdFx0XHRHcm91cC5hZGRQZW9wbGUobmV3UGFyYW1zKVxuXHRcdFx0XHRcdC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSl7XG5cdFx0XHRcdFx0XHQvL3JlZnJlc2ggZ3JvdXAgd2l0aCBuZXcgbWVtYmVyIHN0YXR1c1xuXHRcdFx0XHRcdFx0XHR1c2VySW50ZXJhY3Rpb25Ob3RpZmljYXRpb24uc3VjY2VzcyhcIkFkZGVkIE1lbWJlciBpbiBncm91cC5cIik7XG4gICAgICAgICAgICAgIHNjb3BlLmluaXRBZGRQZW9wbGUocGFyYW1zLmdyb3VwSWQpO1xuICAgICAgICAgICAgICBzY29wZS4kZW1pdCgncmVmcmVzaEdyb3VwJywnJyk7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcblx0XHRcdFx0XHR9LCBmdW5jdGlvbiAoZXJyb3Isc3RhdHVzKXtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRzY29wZS5yZW1vdmVQZW9wbGUgPSBmdW5jdGlvbihwYXJhbXMpe1xuXG5cdFx0XHRcdHZhciBuZXdQYXJhbXMgPXtcblx0XHRcdFx0XHQnb3B0aW9uJzoncmVtb3ZlTWVtYmVyJyxcblx0XHRcdFx0XHQndXNlcklkJzpwYXJhbXMudXNlcklkLFxuXHRcdFx0XHRcdCdncm91cElkJzpwYXJhbXMuZ3JvdXBJZFxuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYoYW5ndWxhci5pc1VuZGVmaW5lZChwYXJhbXMpKXtcblx0XHRcdFx0XHQvL3dvbid0IGhhcHBlbiFvciBpZiB0aSBoYXBwZW4gd2UgcXVpdCB0b28gYmFkIGhpZXJhY2h5IVxuXHRcdFx0XHR9ZWxzZXtcblx0XHRcdFx0R3JvdXAucmVtb3ZlUGVvcGxlKG5ld1BhcmFtcylcblx0XHRcdFx0XHQudGhlbihmdW5jdGlvbiAocmVzcG9uc2Upe1xuXHRcdFx0XHRcdFx0XHR1c2VySW50ZXJhY3Rpb25Ob3RpZmljYXRpb24uaW5mbyhcIlJlbW92ZWQgTWVtYmVyIGluIGdyb3VwLlwiKTtcblx0ICAgICAgICAgICAgc2NvcGUuaW5pdEFkZFBlb3BsZShwYXJhbXMuZ3JvdXBJZCk7XG5cdCAgICAgICAgICAgIHNjb3BlLiRlbWl0KCdyZWZyZXNoR3JvdXAnLCcnKTtcbiAgICAgICAgICAgIFx0Y29uc29sZS5sb2cocmVzcG9uc2UpO1xuXHRcdFx0XHRcdH0sIGZ1bmN0aW9uIChlcnJvcixzdGF0dXMpe1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0XHRzY29wZS5yZW1vdmVGcm9tR3JvdXAgPSBmdW5jdGlvbigpe1xuXHRcdFx0XHRjb25zb2xlLmxvZygnd2UgY2FuIHJlbW92ZSBmaWxlIGluIGdyb3VwJyk7XG5cdFx0XHR9XG5cdFx0XHRzY29wZS5hZGRGaWxlVG9Hcm91cCA9IGZ1bmN0aW9uKHBhcmFtcyl7XG5cdFx0XHRcdHZhciBmaWxlT2JqID17XG5cdFx0XHRcdFx0J29wdGlvbic6J2FkZEZpbGVzJyxcblx0XHRcdFx0XHQnZmlsZUlkJzpwYXJhbXMuZmlsZUlkLFxuXHRcdFx0XHRcdCdncm91cElkJzpwYXJhbXMuZ3JvdXBJZFxuXHRcdFx0XHR9XG5cblx0XHRcdFx0R3JvdXAuYWRkRmlsZVRvR3JvdXAoZmlsZU9iailcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcblx0XHRcdFx0XHQvLyB1c2VySW50ZXJhY3Rpb25Ob3RpZmljYXRpb24uc3VjY2VzcyhcIkEgZmlsZSBpcyBhZGRlZCBpbiBncm91cFwiKTtcblx0XHRcdFx0fSxmdW5jdGlvbihlcnIpe1xuXHRcdFx0XHRcdHVzZXJJbnRlcmFjdGlvbk5vdGlmaWNhdGlvbi53YXJuKFwiU29tZSBlcnJvciBvY2N1cmVkIGR1cmluZyBhZGRpbmcgZmlsZVwiKTtcblx0XHRcdFx0fSlcblxuXHRcdFx0fVxuXHRcdFx0c2NvcGUuZmlsZXNJbkJveCA9IGZ1bmN0aW9uKGdyb3VwaWQpe1xuXHRcdFx0XHR2YXIgcGFyYW1zID17J2dyb3VwX2lkJzpncm91cGlkLCdvd25lcic6J2JveCd9O1xuXHRcdFx0XHRzY29wZS4kZW1pdCgnc2hvd09wdGlvbnMnLHBhcmFtcyk7XG5cblx0XHRcdH1cblx0XHRcdHNjb3BlLmZpbGVzSW5Hcm91cCA9IGZ1bmN0aW9uKGdyb3VwaWQpe1xuXG5cdFx0XHRcdHZhciBwYXJhbXMgPXsnZ3JvdXBfaWQnOmdyb3VwaWQsJ293bmVyJzonZ3JvdXAnfTtcblx0XHRcdFx0c2NvcGUuJGVtaXQoJ3Nob3dPcHRpb25zJyxwYXJhbXMpO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcbn1dKTtcblxuc3luYy5zZXJ2aWNlKCdSZXBvcnQnLCBbZnVuY3Rpb24gUmVwb3J0ICgkaHR0cCwkcSwkcm9vdFNjb3BlKSB7XG5cdHRoaXMuc2VuZCA9IGZ1bmN0aW9uKGlzc3VlKXtcblx0XHR2YXIgZGlmZmVyZWQgPSAkcS5kZWZlcigpO1xuXHRcdCRodHRwLnBvc3QoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL2lzc3VlcycsIGlzc3VlKVxuXHRcdC5zdWNjZXNzKGZ1bmN0aW9uKHJlcyl7XG5cdFx0XHRkaWZmZXJlZC5yZXNvbHZlKHJlcyk7XG5cdFx0fSlcblx0XHQuZXJyb3IoZnVuY3Rpb24oZXJyKSB7XG5cdFx0XHRkaWZmZXJlZC5yZWplY3QoZXJyKTtcblx0XHR9KVxuXHRcdHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuXHR9XG5cdHJldHVybiB0aGlzO1xufV0pO1xuXG4vKiBnbG9iYWwgc3luYyAqL1xuc3luYy5zZXJ2aWNlKCdTZXR0aW5ncycsIFsnJGh0dHAnLCckcm9vdFNjb3BlJywnJHEnLGZ1bmN0aW9uICgkaHR0cCwkcm9vdFNjb3BlLCRxKSB7XG5cdHRoaXMuY3VycmVudCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciBkaWZmZXJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgICRodHRwLmdldCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvc2V0dGluZ3MnKVxuICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbihyZXNwKXtcbiAgICAgICAgICAgIGRpZmZlcmVkLnJlc29sdmUocmVzcCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5lcnJvcihmdW5jdGlvbihlcnIpe1xuICAgICAgICAgICAgZGlmZmVyZWQucmVqZWN0KGVycik7XG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbn1dKTtcblxuc3luYy5jb250cm9sbGVyKCdTZXR0aW5nc0NvbnRyb2xsZXInLCBbJyRzY29wZScsJ1NldHRpbmdzJywnJGxvZycsIGZ1bmN0aW9uICgkc2NvcGUsU2V0dGluZ3MsJGxvZykge1xuXHQkc2NvcGUuaW5pdCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICRzY29wZS5sb2FkQ3VycmVudFNldHRpbmdzKCk7XG4gICAgfVxuICAgICAkc2NvcGUubG9hZEN1cnJlbnRTZXR0aW5ncyA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICBTZXR0aW5ncy5jdXJyZW50KCkudGhlbihmdW5jdGlvbihyZXNwKXtcbiAgICAgICAgICAgICAkc2NvcGUuc2V0dGluZ3MgPSByZXNwO1xuICAgICAgICAgfSwgZnVuY3Rpb24oZXJyKXtcbiAgICAgICAgICAgICAkbG9nLmluZm8oJ2VycnJvciBwcmV2ZW50IHByb21pc2UgdG8gYmUgZnVsbGZpbGwnKTtcbiAgICAgICAgIH0pO1xuICAgICB9XG4gICAgICRzY29wZS5pbml0KCk7XG59XSk7XG5cbi8qIGdsb2JhbCBzeW5jICovXG5zeW5jLmNvbnRyb2xsZXIoJ1NoYXJlQ29udHJvbGxlcicsIFtcblx0JyRzY29wZScsXG5cdCckcm9vdFNjb3BlJyxcblx0JyRyb3V0ZVBhcmFtcycsXG5cdCckcm91dGUnLFxuXHQnJGxvZycsXG5cdCckdWliTW9kYWwnLFxuXHQnU2hhcmUnLFxuXHQnVXNlcicsXG5cdGZ1bmN0aW9uIChcblx0XHQkc2NvcGUsXG5cdFx0JHJvb3RTY29wZSxcblx0XHQkcm91dGVQYXJhbXMsXG5cdFx0JHJvdXRlLFxuXHRcdCRsb2csXG5cdFx0JHVpYk1vZGFsLFxuXHRcdFNoYXJlLFxuXHRcdFVzZXJcblx0KSBcbntcblxuXHQkc2NvcGUuc2hhcmUgPSBmdW5jdGlvbihmaWxlX2lkKXtcblx0XHQvLyBhbGVydCgnaGVyZScpO1xuXHRcdGNvbnNvbGUubG9nKGZpbGVfaWQpO1xuXHR9O1xufVxuXSk7XG5cbi8qIGdsb2JhbCBzeW5jICovXG4vKiBnbG9iYWwgYW5ndWxhciAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyXG5cbiAgICBzeW5jLmNvbnRyb2xsZXIoJ1VwbG9hZENvbnRyb2xsZXInLCBbJyRzY29wZScsICdGaWxlVXBsb2FkZXInLCckcm9vdFNjb3BlJywnRmlsZXMnLCBmdW5jdGlvbigkc2NvcGUsIEZpbGVVcGxvYWRlciwkcm9vdFNjb3BlLEZpbGVzKSB7XG4gICAgICAgIHZhciB1cGxvYWRlciA9ICRzY29wZS51cGxvYWRlciA9IG5ldyBGaWxlVXBsb2FkZXIoe1xuICAgICAgICAgICAgdXJsOiAkcm9vdFNjb3BlLmVuZFBvaW50KycvYXBpL3YxL3VwbG9hZCdcbiAgICAgICAgfSk7XG4gICAgICAgIC8vRklMVEVSU1xuICAgICAgICB1cGxvYWRlci5maWx0ZXJzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogJ2N1c3RvbUZpbHRlcicsXG4gICAgICAgICAgICBmbjogZnVuY3Rpb24oaXRlbSAvKntGaWxlfEZpbGVMaWtlT2JqZWN0fSovLCBvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucXVldWUubGVuZ3RoIDwgMTA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAvL0NBTExCQUNLU1xuICAgICAgICB1cGxvYWRlci5vbldoZW5BZGRpbmdGaWxlRmFpbGVkID0gZnVuY3Rpb24oaXRlbSAvKntGaWxlfEZpbGVMaWtlT2JqZWN0fSovLCBmaWx0ZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnb25XaGVuQWRkaW5nRmlsZUZhaWxlZCcsIGl0ZW0sIGZpbHRlciwgb3B0aW9ucyk7XG4gICAgICAgIH07XG4gICAgICAgIHVwbG9hZGVyLm9uQWZ0ZXJBZGRpbmdGaWxlID0gZnVuY3Rpb24oZmlsZUl0ZW0pIHtcbiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnb25BZnRlckFkZGluZ0ZpbGUnLCBmaWxlSXRlbSk7XG4gICAgICAgIH07XG4gICAgICAgIHVwbG9hZGVyLm9uQWZ0ZXJBZGRpbmdBbGwgPSBmdW5jdGlvbihhZGRlZEZpbGVJdGVtcykge1xuICAgICAgICAgICAgY29uc29sZS5pbmZvKCdvbkFmdGVyQWRkaW5nQWxsJywgYWRkZWRGaWxlSXRlbXMpO1xuICAgICAgICB9O1xuICAgICAgICB1cGxvYWRlci5vbkJlZm9yZVVwbG9hZEl0ZW0gPSBmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgICAgICBjb25zb2xlLmluZm8oJ29uQmVmb3JlVXBsb2FkSXRlbScsIGl0ZW0pO1xuICAgICAgICB9O1xuICAgICAgICB1cGxvYWRlci5vblByb2dyZXNzSXRlbSA9IGZ1bmN0aW9uKGZpbGVJdGVtLCBwcm9ncmVzcykge1xuICAgICAgICAgICAgY29uc29sZS5pbmZvKCdvblByb2dyZXNzSXRlbScsIGZpbGVJdGVtLCBwcm9ncmVzcyk7XG4gICAgICAgIH07XG4gICAgICAgIHVwbG9hZGVyLm9uUHJvZ3Jlc3NBbGwgPSBmdW5jdGlvbihwcm9ncmVzcykge1xuICAgICAgICAgICAgY29uc29sZS5pbmZvKCdvblByb2dyZXNzQWxsJywgcHJvZ3Jlc3MpO1xuICAgICAgICB9O1xuICAgICAgICB1cGxvYWRlci5vblN1Y2Nlc3NJdGVtID0gZnVuY3Rpb24oZmlsZUl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnb25TdWNjZXNzSXRlbScsIGZpbGVJdGVtLCByZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKTtcbiAgICAgICAgfTtcbiAgICAgICAgdXBsb2FkZXIub25FcnJvckl0ZW0gPSBmdW5jdGlvbihmaWxlSXRlbSwgcmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycykge1xuICAgICAgICAgICAgY29uc29sZS5pbmZvKCdvbkVycm9ySXRlbScsIGZpbGVJdGVtLCByZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKTtcbiAgICAgICAgfTtcbiAgICAgICAgdXBsb2FkZXIub25DYW5jZWxJdGVtID0gZnVuY3Rpb24oZmlsZUl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnb25DYW5jZWxJdGVtJywgZmlsZUl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpO1xuICAgICAgICB9O1xuICAgICAgICB1cGxvYWRlci5vbkNvbXBsZXRlSXRlbSA9IGZ1bmN0aW9uKGZpbGVJdGVtLCByZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKSB7XG4gICAgICAgICAgICBjb25zb2xlLmluZm8oJ29uQ29tcGxldGVJdGVtJywgZmlsZUl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpO1xuICAgICAgICB9O1xuICAgICAgICB1cGxvYWRlci5vbkNvbXBsZXRlQWxsID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgRmlsZXMuZ2V0Qm94RmlsZXMoKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzKXtcbiAgICAgICAgICAgICAgJHNjb3BlLmZpbGVzIFx0PVx0cmVzO1xuXG4gICAgICAgICAgICB9LCBmdW5jdGlvbihlcnJvcil7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZmluYWxseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmRhdGFMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc29sZS5pbmZvKCdvbkNvbXBsZXRlQWxsJyk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnNvbGUuaW5mbygndXBsb2FkZXInLCB1cGxvYWRlcik7XG4gICAgfV0pO1xuXG5zeW5jLnNlcnZpY2UoJ3VybFNob3J0ZW5lcicsW2Z1bmN0aW9uKCl7XG4gIHRoaXMubWFrZVNob3J0ID0gZnVuY3Rpb24obG9uZ1VybCl7XG4gICAgcmV0dXJuIGxvbmdVcmw7XG4gIH07XG4gIC8vIHRoaXMubWFrZVNob3J0ID0gZnVuY3Rpb24obG9uZ1VybClcbiAgLy8ge1xuICAvLyAgIC8vICB2YXIgbG9uZ1VybD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxvbmd1cmxcIikudmFsdWU7XG4gIC8vICAgICB2YXIgcmVxdWVzdCA9IGdhcGkuY2xpZW50LnVybHNob3J0ZW5lci51cmwuaW5zZXJ0KHtcbiAgLy8gICAgICdyZXNvdXJjZSc6IHtcbiAgLy8gICAgICAgJ2xvbmdVcmwnOiBsb25nVXJsXG4gIC8vIFx0fVxuICAvLyAgICAgfSk7XG4gIC8vICAgICByZXF1ZXN0LmV4ZWN1dGUoZnVuY3Rpb24ocmVzcG9uc2UpXG4gIC8vIFx0e1xuICAvL1xuICAvLyBcdFx0aWYocmVzcG9uc2UuaWQgIT0gbnVsbClcbiAgLy8gXHRcdHtcbiAgLy8gXHRcdFx0c3RyID1cIjxiPkxvbmcgVVJMOjwvYj5cIitsb25nVXJsK1wiPGJyPlwiO1xuICAvLyBcdFx0XHRzdHIgKz1cIjxiPnlvdXIgRmlsZSBpczo8L2I+IDxhIGhyZWY9J1wiK3Jlc3BvbnNlLmlkK1wiJz5cIityZXNwb25zZS5pZCtcIjwvYT48YnI+XCI7XG4gIC8vIFx0XHRcdHJldHVybiBzdHI7XG4gIC8vIFx0XHR9XG4gIC8vIFx0XHRlbHNlXG4gIC8vIFx0XHR7XG4gIC8vIFx0XHRcdGNvbnNvbGUubG9nKFwiZXJyb3I6IHVuYWJsZSB0byBjcmVhdGUgc2hvcnQgdXJsXCIpO1xuICAvLyBcdFx0fVxuICAvL1xuICAvLyAgICAgfSk7XG4gIC8vICB9XG4gIC8vXG4gIC8vIHRoaXMuZ2V0U2hvcnRJbmZvID0gZnVuY3Rpb24oKVxuICAvLyAge1xuICAvLyAgICAgIHZhciBzaG9ydFVybD1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNob3J0dXJsXCIpLnZhbHVlO1xuICAvL1xuICAvLyAgICAgIHZhciByZXF1ZXN0ID0gZ2FwaS5jbGllbnQudXJsc2hvcnRlbmVyLnVybC5nZXQoe1xuICAvLyAgICAgICAgJ3Nob3J0VXJsJzogc2hvcnRVcmwsXG4gIC8vICBcdCAgICAgJ3Byb2plY3Rpb24nOidGVUxMJ1xuICAvLyAgICAgIH0pO1xuICAvLyAgICAgIHJlcXVlc3QuZXhlY3V0ZShmdW5jdGlvbihyZXNwb25zZSlcbiAgLy8gIFx0e1xuICAvLyAgXHRcdGlmKHJlc3BvbnNlLmxvbmdVcmwhPSBudWxsKVxuICAvLyAgXHRcdHtcbiAgLy8gIFx0XHRcdHN0ciA9XCI8Yj5Mb25nIFVSTDo8L2I+XCIrcmVzcG9uc2UubG9uZ1VybCtcIjxicj5cIjtcbiAgLy8gIFx0XHRcdHN0ciArPVwiPGI+Q3JlYXRlIE9uOjwvYj5cIityZXNwb25zZS5jcmVhdGVkK1wiPGJyPlwiO1xuICAvLyAgXHRcdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJvdXRwdXRcIikuaW5uZXJIVE1MID0gc3RyO1xuICAvLyAgXHRcdH1cbiAgLy8gIFx0XHRlbHNlXG4gIC8vICBcdFx0e1xuICAvLyAgXHRcdFx0Y29uc29sZS5sb2coXCJlcnJvcjogdW5hYmxlIHRvIGdldCBVUkwgaW5mb3JtYXRpb25cIik7XG4gIC8vICBcdFx0fVxuICAvL1xuICAvLyAgICAgIH0pO1xuICAvL1xuICAvLyAgfVxuICAvLyAgZnVuY3Rpb24gbG9hZCgpXG4gIC8vICB7XG4gIC8vICBcdGdhcGkuY2xpZW50LnNldEFwaUtleSgnQUl6YVN5RFNuN3o3VjFmNkgzeVhyZ0FsZ1ZHdzUyZFNFbXFBTEljJyk7IC8vZ2V0IHlvdXIgb3dubiBCcm93c2VyIEFQSSBLRVlcbiAgLy8gIFx0Z2FwaS5jbGllbnQubG9hZCgndXJsc2hvcnRlbmVyJywgJ3YxJyxmdW5jdGlvbigpe30pO1xuICAvLyAgfVxuICAvLyAgd2luZG93Lm9ubG9hZCA9IGxvYWQ7XG59XSk7XG5cbiAgLy9cbiAgLy8gKGZ1bmN0aW9uKGkscyxvLGcscixhLG0pe2lbJ0dvb2dsZUFuYWx5dGljc09iamVjdCddPXI7aVtyXT1pW3JdfHxmdW5jdGlvbigpe1xuICAvLyAoaVtyXS5xPWlbcl0ucXx8W10pLnB1c2goYXJndW1lbnRzKX0saVtyXS5sPTEqbmV3IERhdGUoKTthPXMuY3JlYXRlRWxlbWVudChvKSxcbiAgLy8gbT1zLmdldEVsZW1lbnRzQnlUYWdOYW1lKG8pWzBdO2EuYXN5bmM9MTthLnNyYz1nO20ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYSxtKVxuICAvLyB9KSh3aW5kb3csZG9jdW1lbnQsJ3NjcmlwdCcsJy8vd3d3Lmdvb2dsZS1hbmFseXRpY3MuY29tL2FuYWx5dGljcy5qcycsJ2dhJyk7XG4gIC8vXG4gIC8vIGdhKCdjcmVhdGUnLCAnVUEtNjQ5NTU4NjYtMicsICdhdXRvJyk7XG4gIC8vIGdhKCdzZW5kJywgJ3BhZ2V2aWV3Jyk7XG5cbiAgICAgICAgLy90aGlzIGZ1bmN0aW9uIGNhbiByZW1vdmUgYW4gYXJyYXkgZWxlbWVudC5cbiAgICAgICAgICAgIEFycmF5LnJlbW92ZSA9IGZ1bmN0aW9uKGFycmF5LCBmcm9tLCB0bykge1xuICAgICAgICAgICAgICAgIHZhciByZXN0ID0gYXJyYXkuc2xpY2UoKHRvIHx8IGZyb20pICsgMSB8fCBhcnJheS5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIGFycmF5Lmxlbmd0aCA9IGZyb20gPCAwID8gYXJyYXkubGVuZ3RoICsgZnJvbSA6IGZyb207XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFycmF5LnB1c2guYXBwbHkoYXJyYXksIHJlc3QpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciB0b3RhbF9wb3B1cHMgPSAwO1xuICAgICAgICAgICAgdmFyIHBvcHVwcyA9IFtdO1xuICAgICAgICAgICAgZnVuY3Rpb24gY2xvc2VfcG9wdXAoaWQpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZm9yKHZhciBpaWkgPSAwOyBpaWkgPCBwb3B1cHMubGVuZ3RoOyBpaWkrKylcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGlmKGlkID09IHBvcHVwc1tpaWldKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBBcnJheS5yZW1vdmUocG9wdXBzLCBpaWkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCkuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxjdWxhdGVfcG9wdXBzKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9kaXNwbGF5cyB0aGUgcG9wdXBzLiBEaXNwbGF5cyBiYXNlZCBvbiB0aGUgbWF4aW11bSBudW1iZXIgb2YgcG9wdXBzIHRoYXQgY2FuIGJlIGRpc3BsYXllZCBvbiB0aGUgY3VycmVudCB2aWV3cG9ydCB3aWR0aFxuICAgICAgICAgICAgZnVuY3Rpb24gZGlzcGxheV9wb3B1cHMoKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHZhciByaWdodCA9IDIyMDtcblxuICAgICAgICAgICAgICAgIHZhciBpaWkgPSAwO1xuICAgICAgICAgICAgICAgIGZvcihpaWk7IGlpaSA8IHRvdGFsX3BvcHVwczsgaWlpKyspXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBpZihwb3B1cHNbaWlpXSAhPSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocG9wdXBzW2lpaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5yaWdodCA9IHJpZ2h0ICsgXCJweFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQgPSByaWdodCArIDMyMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZvcih2YXIgampqID0gaWlpOyBqamogPCBwb3B1cHMubGVuZ3RoOyBqamorKylcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocG9wdXBzW2pqal0pO1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICB0aGlzIHNjcmlwdCBoYXMgYmVlbiBhZGRlZCBieSBtZSBmb3IgbXkgY3VzdG9tZVxuXG4gICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgJC5hamF4U2V0dXAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1gtQ1NSRi1UT0tFTic6ICQoJ21ldGFbbmFtZT1cImNzcmYtdG9rZW5cIl0nKS5hdHRyKCdjb250ZW50JylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgJChcIiNjaGF0XCIpLmtleXByZXNzKGZ1bmN0aW9uKGV2dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoZXZ0LndoaWNoID09IDEzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoXCJ3ZSBhcmUgbGlzdG5pbmcgdG8gZW50ZXIgZXZlbnRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpdXNlcm5hbWUgPSAkKCcjc2hvdXRfdXNlcm5hbWUnKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGltZXNzYWdlID0gJCgnI3Nob3V0X21lc3NhZ2UnKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zdF9kYXRhID0geyd1c2VybmFtZSc6aXVzZXJuYW1lLCAnbWVzc2FnZSc6aW1lc3NhZ2V9O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vc2VuZCBkYXRhIHRvIFwic2hvdXQucGhwXCIgdXNpbmcgalF1ZXJ5ICQucG9zdCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQucG9zdCgnc2hvdXQucGhwJywgcG9zdF9kYXRhLCBmdW5jdGlvbihkYXRhKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYXBwZW5kIGRhdGEgaW50byBtZXNzYWdlYm94IHdpdGggalF1ZXJ5IGZhZGUgZWZmZWN0IVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJChkYXRhKS5oaWRlKCkuYXBwZW5kVG8oJy5tZXNzYWdlX2JveCcpLmZhZGVJbigpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2tlZXAgc2Nyb2xsZWQgdG8gYm90dG9tIG9mIGNoYXQhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsdG9oID0gJCgnLm1lc3NhZ2VfYm94JylbMF0uc2Nyb2xsSGVpZ2h0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLm1lc3NhZ2VfYm94Jykuc2Nyb2xsVG9wKHNjcm9sbHRvaCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vcmVzZXQgdmFsdWUgb2YgbWVzc2FnZSBib3hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNzaG91dF9tZXNzYWdlJykudmFsKCcnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5mYWlsKGZ1bmN0aW9uKGVycikge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYWxlcnQgSFRUUCBzZXJ2ZXIgZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoZXJyLnN0YXR1c1RleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vdG9nZ2xlIGhpZGUvc2hvdyBzaG91dCBib3hcbiAgICAgICAgICAgICAgICAgICAgJChcIi5jbG9zZV9idG5cIikuY2xpY2soZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vZ2V0IENTUyBkaXNwbGF5IHN0YXRlIG9mIC50b2dnbGVfY2hhdCBlbGVtZW50XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdG9nZ2xlU3RhdGUgPSAkKCcudG9nZ2xlX2NoYXQnKS5jc3MoJ2Rpc3BsYXknKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy90b2dnbGUgc2hvdy9oaWRlIGNoYXQgYm94XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcudG9nZ2xlX2NoYXQnKS5zbGlkZVRvZ2dsZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3VzZSB0b2dnbGVTdGF0ZSB2YXIgdG8gY2hhbmdlIGNsb3NlL29wZW4gaWNvbiBpbWFnZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYodG9nZ2xlU3RhdGUgPT0gJ2Jsb2NrJylcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiLmhlYWRlciBkaXZcIikuYXR0cignY2xhc3MnLCAnb3Blbl9idG4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIuaGVhZGVyIGRpdlwiKS5hdHRyKCdjbGFzcycsICdjbG9zZV9idG4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8qZG9uZSBhZGRpbmcgbXkgY3VzdG9tIHNjcmlwdHMqL1xuICAgICAgICAgICAgLy9jcmVhdGVzIG1hcmt1cCBmb3IgYSBuZXcgcG9wdXAuIEFkZHMgdGhlIGlkIHRvIHBvcHVwcyBhcnJheS5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHJlZ2lzdGVyX3BvcHVwKGlkLCBuYW1lKVxuICAgICAgICAgICAge1xuXG4gICAgICAgICAgICAgICAgZm9yKHZhciBpaWkgPSAwOyBpaWkgPCBwb3B1cHMubGVuZ3RoOyBpaWkrKylcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIC8vYWxyZWFkeSByZWdpc3RlcmVkLiBCcmluZyBpdCB0byBmcm9udC5cbiAgICAgICAgICAgICAgICAgICAgaWYoaWQgPT0gcG9wdXBzW2lpaV0pXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIEFycmF5LnJlbW92ZShwb3B1cHMsIGlpaSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVwcy51bnNoaWZ0KGlkKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsY3VsYXRlX3BvcHVwcygpO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50PSc8ZGl2IGNsYXNzPVwicG9wdXAtYm94IGNoYXQtcG9wdXBcIiBpZD1cIicrIGlkICsnXCI+JztcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudCA9ZWxlbWVudCArICc8ZGl2IHN0eWxlPVwiYmFja2dyb3VuZDojZGRkO2NvbG9yOiNmZmY7XCIgY2xhc3M9XCJoZWFkZXJcIj5Hcm91cDxkaXYgY2xhc3M9XCJjbG9zZV9idG5cIj4mbmJzcDs8L2Rpdj48L2Rpdj4nO1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50ID1lbGVtZW50ICsgJyA8ZGl2IGNsYXNzPVwidG9nZ2xlX2NoYXRcIj4nO1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50ID1lbGVtZW50ICsgJzxkaXYgY2xhc3M9XCJtZXNzYWdlX2JveFwiPjwvZGl2Pic7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQgPWVsZW1lbnQgKyAnPHRleHRhcmVhIHN0eWxlPVwiYmFja2dyb3VuZDp3aGl0ZTttYXJnaW4tdG9wOjE4MHB4O1wiIGlkPVwiY2hhdFwiIGNsYXNzPVwiZm9ybS1jb250cm9sXCIgcm93cz1cIjNcIiByZXF1aXJlZD1cInJlcXVpcmVkXCI+PC90ZXh0YXJlYT4nO1xuICAgICAgICAgICAgICAgICAgICAvLyBlbGVtZW50ID1lbGVtZW50ICtcbiAgICAgICAgICAgICAgICAgICAgLy8gZWxlbWVudCA9IGVsZW1lbnQgKyAnPGRpdiBjbGFzcz1cInBvcHVwLWhlYWQtcmlnaHRcIj48YSBocmVmPVwiamF2YXNjcmlwdDpjbG9zZV9wb3B1cChcXCcnKyBpZCArJ1xcJyk7XCI+JiMxMDAwNTs8L2E+PC9kaXY+JztcbiAgICAgICAgICAgICAgICAvLyB2YXIgZWxlbWVudCA9ICc8ZGl2IGNsYXNzPVwicG9wdXAtYm94IGNoYXQtcG9wdXBcIiBpZD1cIicrIGlkICsnXCI+JztcbiAgICAgICAgICAgICAgICAvLyBlbGVtZW50ID0gZWxlbWVudCArICc8ZGl2IGNsYXNzPVwicG9wdXAtaGVhZFwiPic7XG4gICAgICAgICAgICAgICAgLy8gZWxlbWVudCA9IGVsZW1lbnQgKyAnPGRpdiBjbGFzcz1cInBvcHVwLWhlYWQtbGVmdFwiPicrIG5hbWUgKyc8L2Rpdj4nO1xuICAgICAgICAgICAgICAgIC8vIGVsZW1lbnQgPSBlbGVtZW50ICsgJzxkaXYgY2xhc3M9XCJwb3B1cC1oZWFkLXJpZ2h0XCI+PGEgaHJlZj1cImphdmFzY3JpcHQ6Y2xvc2VfcG9wdXAoXFwnJysgaWQgKydcXCcpO1wiPiYjMTAwMDU7PC9hPjwvZGl2Pic7XG4gICAgICAgICAgICAgICAgLy8gZWxlbWVudCA9IGVsZW1lbnQgKyAnPGRpdiBzdHlsZT1cImNsZWFyOiBib3RoO1wiPjwvZGl2PjwvZGl2PjxwIG9uY2xpY2s9XCJ0KClcIiBpZD1cIm1cIj48L3A+PGRpdiBjbGFzcz1cInBvcHVwLW1lc3NhZ2VzXCI+PHRleHRhcmVhICBjbGFzcz1cInRvcFwiPjwvdGV4dGFyZWE+PC9kaXY+PC9kaXY+JztcblxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYm9keVwiKVswXS5pbm5lckhUTUwgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJvZHlcIilbMF0uaW5uZXJIVE1MICsgZWxlbWVudDtcblxuICAgICAgICAgICAgICAgIHBvcHVwcy51bnNoaWZ0KGlkKTtcblxuICAgICAgICAgICAgICAgIGNhbGN1bGF0ZV9wb3B1cHMoKTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL2NhbGN1bGF0ZSB0aGUgdG90YWwgbnVtYmVyIG9mIHBvcHVwcyBzdWl0YWJsZSBhbmQgdGhlbiBwb3B1bGF0ZSB0aGUgdG9hdGFsX3BvcHVwcyB2YXJpYWJsZS5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGNhbGN1bGF0ZV9wb3B1cHMoKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHZhciB3aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgICAgICAgICAgIGlmKHdpZHRoIDwgNTQwKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdG90YWxfcG9wdXBzID0gMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgd2lkdGggPSB3aWR0aCAtIDIwMDtcbiAgICAgICAgICAgICAgICAgICAgLy8zMjAgaXMgd2lkdGggb2YgYSBzaW5nbGUgcG9wdXAgYm94XG4gICAgICAgICAgICAgICAgICAgIHRvdGFsX3BvcHVwcyA9IHBhcnNlSW50KHdpZHRoLzMyMCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZGlzcGxheV9wb3B1cHMoKTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL3JlY2FsY3VsYXRlIHdoZW4gd2luZG93IGlzIGxvYWRlZCBhbmQgYWxzbyB3aGVuIHdpbmRvdyBpcyByZXNpemVkLlxuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgY2FsY3VsYXRlX3BvcHVwcyk7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgY2FsY3VsYXRlX3BvcHVwcyk7XG4vL0F1dGhvciBNdXJhZ2lqaW1hbmEgUmljaGFyZCBzdHJpbXVwQGdtYWlsLmNvbSBiZWFzdGFyNDU3QGdtYWlsLmNvbVxuXG4gIHN5bmMuY29udHJvbGxlcignTWVzc2FnZUNvbnRyb2xsZXInLCBbXCIkaHR0cFwiLCBcIiRzY29wZVwiLCBcIiRxXCIsIFwiJHJvb3RTY29wZVwiLCBmdW5jdGlvbiAoJGh0dHAsJHNjb3BlLCRxLCRyb290U2NvcGUpIHtcbiAgICAgICAkLmFqYXhTZXR1cCh7XG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgJ1gtQ1NSRi1UT0tFTic6ICQoJ21ldGFbbmFtZT1cImNzcmYtdG9rZW5cIl0nKS5hdHRyKCdjb250ZW50JylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICBcbiAgICAgICAgICRzY29wZS5uYW1lPVwiTXVyYWdpamltYW5hXCI7XG4gICAgICAgICB2YXIgcG9zdHM9JGh0dHAuZ2V0KCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS9wb3N0JyksXG4gICAgICAgICAgICAgaW5zdGl0dXRpb25zPSRodHRwLmdldCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvcG9zdCcpO1xuXG4gICAgICAgICAgJHEuYWxsKFtwb3N0cyxpbnN0aXR1dGlvbnNdKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICAgICAgdmFyIHRtcCA9IFtdO1xuICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHJlc3VsdCwgZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgdG1wLnB1c2gocmVzcG9uc2UuZGF0YSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB0bXA7XG4gICAgICAgICAgfSkudGhlbihmdW5jdGlvbih0bXBSZXN1bHQpIHtcbiAgICAgICAgICAgICAgLy8gcG9zdHM9dG1wUmVzdWx0O1xuICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhhbmd1bGFyLnRvSnNvbih0bXBSZXN1bHRbMF0sIHRydWUpKTtcbiAgICAgICAgICAgICRzY29wZS5wb3N0cyA9IHRtcFJlc3VsdFswXTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICQoJy5wb3N0LWluJykuYXR3aG8oe1xuICAgICAgICAgICAgYXQ6IFwiQFwiLFxuICAgICAgICAgICAgZGF0YTpbJ1BldGVyJywgJ1RvbScsICdBbm5lJ10sXG5cbiAgICAgICAgIH0pO1xuXG4gIH1dKTtcblxuXG5zeW5jLmNvbnRyb2xsZXIoXCJUdXRvcmlhbE1vZGFsXCIsIFtcIiRzY29wZVwiLCBmdW5jdGlvbigkc2NvcGUpIHtcblxuICAkc2NvcGUub3BlbiA9IGZ1bmN0aW9uKCkge1xuICAgICRzY29wZS5zaG93TW9kYWwgPSB0cnVlO1xuICB9O1xuICAkc2NvcGUub2sgPSBmdW5jdGlvbigpIHtcbiAgICAkc2NvcGUuc2hvd01vZGFsID0gZmFsc2U7XG4gIH07XG5cbiAgJHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uKCkge1xuICAgICRzY29wZS5zaG93TW9kYWwgPSBmYWxzZTtcbiAgfTtcblxufV0pO1xuXG5zeW5jLmNvbnRyb2xsZXIoXCJTdHJpbWluTW9kYWxcIiwgW1wiJHNjb3BlXCIsIGZ1bmN0aW9uKCRzY29wZSkge1xuXG4gICRzY29wZS5vcGVuID0gZnVuY3Rpb24oKSB7XG4gICAgJHNjb3BlLnNob3dNb2RhbCA9IHRydWU7XG4gIH07XG4gICRzY29wZS5vayA9IGZ1bmN0aW9uKCkge1xuICAgICRzY29wZS5zaG93TW9kYWwgPSBmYWxzZTtcbiAgfTtcblxuICAkc2NvcGUuY2FuY2VsID0gZnVuY3Rpb24oKSB7XG4gICAgJHNjb3BlLnNob3dNb2RhbCA9IGZhbHNlO1xuICB9O1xuXG59XSk7XG4iLCIvKiBnbG9iYWwgc3luYyAqL1xuLyoqXG4gKiAgQ3JlYXRlZCBieSBNdXJhZ2lqaW1hbmEgUmljaGFyZCBvbiAxMC8yMC8xNS5cbiAqICBCZWFzdGFyNDU3QGdtYWlsLmNvbSAsIHN5bmNAZ21haWwuY29tICwgY2hlY2sgd2l0aCBtZSFcbiAqL1xuLypJIHVzZSBDYW1lbENhc2Ugd2hpbGUgcmVuYW1pbmcgbXkgZnVuY3Rpb25zICovXG4vKmFuZCBpIHVzZSBzbmFrZSBjYXNlIHdoaWxlIHJlbmFtaW5nIHZhcmlhYmxlcyAqL1xuLypwb3N0IHNlcnZpY2UgKi9cblxuc3luYy5zZXJ2aWNlKCdQb3N0JywgWyckaHR0cCcsICckcScsICckcm9vdFNjb3BlJywgZnVuY3Rpb24gUG9zdCgkaHR0cCwgJHEsICRyb290U2NvcGUpIHtcbiAgICB0aGlzLmdldFBvc3QgPSBmdW5jdGlvbiAodXNlcl9pZCkge1xuICAgICAgICB2YXIgZGlmZmVyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICAkaHR0cC5nZXQoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL21lL3Bvc3RzP3VzZXJfaWQnICsgdXNlcl9pZCwge2NhY2hlOiBmYWxzZX0pXG4gICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAocmVzcG9uc2UpIHtcblxuICAgICAgICAgICAgICAgIGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBkaWZmZXJlZC5yZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuICAgIH07XG4gICAgdGhpcy5wYXJ0aWNpcGF0ZSA9IGZ1bmN0aW9uKG9iail7XG4gICAgICB2YXIgZGlmZmVyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgJGh0dHAucHV0KCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS9tZS9wb3N0cy8nLG9iailcbiAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgZGlmZmVyZWQucmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICB9KVxuICAgICAgLmVycm9yKGZ1bmN0aW9uKGVycil7XG4gICAgICAgIGRpZmZlcmVkLnJlamVjdChlcnIpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcbiAgICB9O1xuICAgIHRoaXMuY3JlYXRlUG9zdCA9IGZ1bmN0aW9uIChwb3N0KSB7XG4gICAgICAgIHZhciBkaWZmZXJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgICRodHRwLnBvc3QoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL21lL3Bvc3RzJywgcG9zdClcbiAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBkaWZmZXJlZC5yZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuICAgIH07XG4gICAgdGhpcy5kZWxldGVQb3N0ID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIHZhciBkaWZmZXJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgICRodHRwLmRlbGV0ZSgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvbWUvcG9zdHMvJyArIGlkKVxuICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgZGlmZmVyZWQucmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGRpZmZlcmVkLnJlamVjdChlcnJvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGRpZmZlcmVkLnByb21pc2U7XG4gICAgfTtcbiAgICByZXR1cm4gdGhpcztcbn1dKTtcblxuc3luYy5jb250cm9sbGVyKCdQb3N0aW5nQ29udHJvbGxlcicsIFtcbiAgJyRzY29wZScsXG4gICdQb3N0JyxcbiAgJyR0aW1lb3V0JyxcbiAgJ1VzZXInLFxuICAnJGludGVydmFsJyxcbiAgJ05vdGlmaWNhdGlvbicsXG4gIC8vICckaW9uaWNMaXN0RGVsZWdhdGUnLFxuICAnJGxvZycsXG4gICd1c2VySW50ZXJhY3Rpb25Ob3RpZmljYXRpb24nLFxuICBmdW5jdGlvbiAoXG4gICRzY29wZSxcbiAgUG9zdCxcbiAgJHRpbWVvdXQsXG4gIFVzZXIsXG4gICRpbnRlcnZhbCxcbiAgTm90aWZpY2F0aW9uLFxuICAkaW9uaWNMaXN0RGVsZWdhdGUsXG4gICRsb2csXG4gIHVzZXJJbnRlcmFjdGlvbk5vdGlmaWNhdGlvblxuKSB7XG5cbiAgICAkc2NvcGUuaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJHNjb3BlLnBvc3RMb2FkZXIoKTtcbiAgICAgICAgJHNjb3BlLmdldFVzZXIoKTtcblxuICAgIH07XG5cbiAgICAkaW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICAkc2NvcGUucG9zdExvYWRlcigpO1xuICAgIH0sIDgwMDApO1xuICAgICRzY29wZS5nZXRVc2VyID1mdW5jdGlvbigpe1xuXG4gICAgICBVc2VyLl9pZCgpXG4gICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG5cbiAgICAgICAgJHNjb3BlLnVzZXIgPSByZXNwb25zZTtcbiAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgICAgfSxmdW5jdGlvbihlcnIpe1xuICAgICAgICAvL3F1aXQgc2xpbnRseVxuICAgICAgfSk7XG4gICAgfTtcbiAgICAkc2NvcGUubG9hZE1vcmUgPSBmdW5jdGlvbigpe1xuXG4gICAgfTtcbiAgICAkc2NvcGUucGFydGljaXBhdGVJbnRvUG9zdCA9IGZ1bmN0aW9uKHBvc3QsdXNlcil7XG4gICAgICAvLyBjb25zb2xlLmxvZyh1c2VyKTtcbiAgICAgIHZhciBvYmogPXtcbiAgICAgICAgJ3Bvc3RfaWQnOnBvc3QsXG4gICAgICAgICd1c2VyX2lkJzp1c2VyXG4gICAgICB9O1xuICAgICAgUG9zdC5wYXJ0aWNpcGF0ZShvYmopXG4gICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgICRzY29wZS5wb3N0TG9hZGVyKCk7XG4gICAgICB9LGZ1bmN0aW9uKGVycil7XG4gICAgICAgIC8vcXVpdCBzbGVudGx5XG5cbiAgICAgIH0pO1xuICAgIH07XG4gICAgJHNjb3BlLnBvc3RMb2FkZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICRzY29wZS5kYXRhTG9hZGluZyA9IHRydWU7XG4gICAgICAgIFBvc3QuZ2V0UG9zdCgpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAodHJlZSkge1xuXG4gICAgICAgICAgICAgICAgJHNjb3BlLnBvc3RzID10cmVlO1xuICAgICAgICAgICAgICAgIC8vbmF2aWdhdGUgdHJvdWdoIHRyZWUgcmVzcG9uc2Ugd2hpY2ggaXMgcmVxdWlyZSBtdWNoIGF0dGVudGlvblxuICAgICAgICAgICAgICAgICRzY29wZS5mcmllbmRzPVtdO1xuICAgICAgICAgICAgICAgICRzY29wZS5yZXBsaWVzPVtdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHJlZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHJlZVtpXS5oYXNPd25Qcm9wZXJ0eSgnZnJpZW5kcycpICYmIHRyZWVbaV1bJ3JlcGxpZXMnXSAgJiYgdHJlZVtpXVsnZnJpZW5kcyddICkge1xuICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5mcmllbmRzLnB1c2godHJlZVtpXS5mcmllbmRzKTtcbiAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVwbGllcy5wdXNoKHRyZWVbaV0ucmVwbGllcyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHJlZVtpXS5oYXNPd25Qcm9wZXJ0eSgnZnJpZW5kcycpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZnJpZW5kcyA9IGZyaWVuZHMuY29uY2F0KHRyYXZlcnNlKHRyZWVbaV0uZnJpZW5kcykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnJlcGxpZXMgPSByZXBsaWVzLmNvbmNhdCh0cmF2ZXJzZSh0cmVlW2ldLnJlcGxpZXMpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgICRzY29wZS5pbWFnZURlc2MgPSBmdW5jdGlvbihpbmRleCl7XG4gICAgICAvL3Nob3cgaW1hZ2VzIHdpdGggZGlmZmVyZW50IHBpeGVsXG4gICAgICBzd2l0Y2ggKGluZGV4KSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICByZXR1cm4gJzYwcHgnO1xuXG4gICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgcmV0dXJuIFwiNjBweFwiO1xuXG4gICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgcmV0dXJuIFwiNjBweFwiO1xuXG4gICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgcmV0dXJuIFwiNjBweFwiO1xuXG4gICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgcmV0dXJuIFwiNjBweFwiO1xuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBcIjYwcHhcIjtcblxuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coaW5kZXgpO1xuICAgIH07XG4gICAgJHNjb3BlLnNoYXJlID0gZnVuY3Rpb24oaWQpe1xuICAgICAgICAkaW9uaWNMaXN0RGVsZWdhdGUuY2xvc2VPcHRpb25CdXR0b25zKCk7XG4gICAgICAgICRsb2cuaW5mbyhpZCk7XG4gICAgfTtcbiAgICAkc2NvcGUuY3JlYXRlUG9zdCA9IGZ1bmN0aW9uIChwb3N0aW5nKSB7XG4gICAgICAvL2lmIGltYWdlIGlzIHVwbG9hZGVkIHVwbG9hZGVkXG4gICAgICAgIHZhciBfdGhpcyA9IHsgbWVzc2FnZTogcG9zdGluZyB9O1xuICAgICAgICBQb3N0LmNyZWF0ZVBvc3QoX3RoaXMpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocG9zdENyZWF0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICRzY29wZS5tZXNzYWdlID0gJyc7XG4gICAgICAgICAgICAgICAgICAkc2NvcGUucG9zdHMucHVzaChwb3N0Q3JlYXRlZCk7XG4gICAgICAgICAgICAgICAgICB1c2VySW50ZXJhY3Rpb25Ob3RpZmljYXRpb24uc3VjY2VzcyhcIk5ldyBQb3N0IGZlZWQgY3JlYXRlZCFcIik7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcblxuICAgICAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS5pbml0KCk7XG59XSk7XG5zeW5jLmRpcmVjdGl2ZSgnZmVlZHNVcGxvYWRlcicsW2Z1bmN0aW9uKCl7XG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdBRScsXG4gICAgcmVwbGFjZTogZmFsc2UsXG4gICAgdGVtcGxhdGVVcmw6ICdBcHAvanMvc2NyaXB0cy92aWV3cy9mZWVkQXR0YWNobWVudC5odG1sJyxcbiAgICBzY29wZToge1xuICAgICAgYWN0aW9uOiAnQCdcbiAgICB9LFxuICAgIGNvbnRyb2xsZXI6IFsnJHNjb3BlJywgZnVuY3Rpb24gKCRzY29wZSkge1xuICAgICAgJHNjb3BlLnByb2dyZXNzID0gMDtcbiAgICAgICRzY29wZS5hdmF0YXIgPSAnJztcbiAgICAgICRzY29wZS5zZW5kRmlsZSA9IGZ1bmN0aW9uKGVsKSB7XG4gICAgICAgIHZhciAkZm9ybSA9ICQoZWwpLnBhcmVudHMoJ2Zvcm0nKTtcbiAgICAgICAgaWYgKCQoZWwpLnZhbCgpID09PSAnJykge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICAkZm9ybS5hdHRyKCdhY3Rpb24nLCAkc2NvcGUuYWN0aW9uKTtcbiAgICAgICAgJHNjb3BlLiRhcHBseShmdW5jdGlvbigpIHtcbiAgICAgICAgICAkc2NvcGUucHJvZ3Jlc3MgPSAwO1xuICAgICAgICB9KTtcbiAgICAgICAgJGZvcm0uYWpheFN1Ym1pdCh7XG4gICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICBcdGJlZm9yZVNlbmQ6IGZ1bmN0aW9uICh4aHIpIHtcbiAgICAgICAgXHRcdHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdhdXRob3JpemF0aW9uJywgJ0JlYXJlciBPcUZpclFTNDRSUVRqUnVXbmlYamRIWkpRWGRDdUV4NDlycThKWTVBJyk7XG4gICAgICAgIFx0fSxcbiAgICAgICAgICB1cGxvYWRQcm9ncmVzczogZnVuY3Rpb24oZXZ0LCBwb3MsIHRvdCwgcGVyY0NvbXBsZXRlKSB7XG4gICAgICAgICAgICAkc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAvLyB1cGxvYWQgdGhlIHByb2dyZXNzIGJhciBkdXJpbmcgdGhlIHVwbG9hZFxuICAgICAgICAgICAgICAvLyAkc2NvcGUucHJvZ3Jlc3MgPSBwZXJjZW50Q29tcGxldGU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVycm9yOiBmdW5jdGlvbihldnQsIHN0YXR1c1RleHQsIHJlc3BvbnNlLCBmb3JtKSB7XG4gICAgICAgICAgICAvLyByZW1vdmUgdGhlIGFjdGlvbiBhdHRyaWJ1dGUgZnJvbSB0aGUgZm9ybVxuICAgICAgICAgICAgJGZvcm0ucmVtb3ZlQXR0cignYWN0aW9uJyk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXNwb25zZSwgc3RhdHVzLCB4aHIsIGZvcm0pIHtcbiAgICAgICAgICAgIHZhciBhciA9ICQoZWwpLnZhbCgpLnNwbGl0KCdcXFxcJyksXG4gICAgICAgICAgICAgIGZpbGVuYW1lID0gIGFyW2FyLmxlbmd0aC0xXTtcbiAgICAgICAgICAgIC8vIHJlbW92ZSB0aGUgYWN0aW9uIGF0dHJpYnV0ZSBmcm9tIHRoZSBmb3JtXG4gICAgICAgICAgICAkZm9ybS5yZW1vdmVBdHRyKCdhY3Rpb24nKTtcbiAgICAgICAgICAgICRzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICRzY29wZS5hdmF0YXIgPSBmaWxlbmFtZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICB9XSxcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbSwgYXR0cnMsIGN0cmwpIHtcblxuICAgICAgZWxlbS5maW5kKCcuZmFrZS11cGxvYWRlcicpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICBlbGVtLmZpbmQoJ2lucHV0W3R5cGU9XCJmaWxlXCJdJykuY2xpY2soKTtcbiAgICAgIH0pO1xuXG4gICAgfVxuICB9O1xufV0pO1xuIiwiLyogZ2xvYmFsICR1aWJNb2RhbEluc3RhbmNlICovXG4vKiBnbG9iYWwgTW9kYWxJbnN0YW5jZUN0cmwgKi9cbi8qIGdsb2JhbCAkdWliTW9kYWwgKi9cbi8qIGdsb2JhbCBzeW5jICovXG4vKiBnbG9iYWwgc3luYyAqL1xuc3luYy5jb250cm9sbGVyKCdGaWxlc0NvbnRyb2xsZXInLFxuIFtcblx0JyRzY29wZScsJ0ZpbGVzJywnJGxvZycsJyR3aW5kb3cnLCdVc2VyJywnJHVpYk1vZGFsJywnJGludGVydmFsJywncGRmRGVsZWdhdGUnLCckdGltZW91dCcsJyRzdGF0ZVBhcmFtcycsJyRyb290U2NvcGUnLCckZXhjZXB0aW9uSGFuZGxlcicsJ0ZldGNoZXInLCBmdW5jdGlvbiAoXG5cdFx0JHNjb3BlLCBGaWxlcywkbG9nLCR3aW5kb3csVXNlciwkdWliTW9kYWwsJGludGVydmFsLHBkZkRlbGVnYXRlLCR0aW1lb3V0LCRzdGF0ZVBhcmFtcywkcm9vdFNjb3BlLCRleGNlcHRpb25IYW5kbGVyLEZldGNoZXIpIHtcblxuXHQgICRzY29wZS5pbml0ID0gZnVuY3Rpb24oKXtcbiAgICAgIC8vIGFsZXJ0KCdoZXJlIEkgYW0gY2FsbGVkJyk7XG5cbiAgICAgIC8vbG9hZCBhbGwgYm94IGZpbGVzXG5cdFx0ICAgICRzY29wZS5hbGwoKTtcbiAgICAgICAgJHNjb3BlLmNyYXp5KCk7XG5cdCAgfTtcblxuXG5cdCAgLy8gJGludGVydmFsKGZ1bmN0aW9uICgpIHtcblx0XHRcdC8vICRzY29wZS5hbGwoKTtcbiAgIC8vICB9LCA4MDAwKTtcblxuICAgJHNjb3BlLmNyYXp5ID0gZnVuY3Rpb24oKXtcbiAgICAgIHZhciB1c2Vycz0ne3VzZXJze2VtYWlsLGlkfX0nO1xuXG4gICAgICBGZXRjaGVyLmZldGNoKHVzZXJzKVxuICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzKXtcbiAgICAgICAgJHNjb3BlLmNyYXp5ICA9IHJlcztcbiAgICAgICAgY29uc29sZS5sb2cocmVzKTtcblxuICAgICAgfSwgZnVuY3Rpb24oZXJyb3Ipe1xuICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG5cbiAgICAgIH0pXG4gICAgfTtcblx0ICRzY29wZS5hbGwgPSBmdW5jdGlvbigpe1xuICAgICRzY29wZS5kYXRhTG9hZGluZyA9IHRydWU7XG5cdFx0RmlsZXMuZ2V0Qm94RmlsZXMoKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24ocmVzKXtcblxuXHRcdFx0XHQkc2NvcGUuZmlsZXMgXHQ9XHRyZXM7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcyk7XG5cdFx0XHR9LCBmdW5jdGlvbihlcnJvcil7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGVycm9yKTtcblx0XHRcdH0pXG4gICAgICAuZmluYWxseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgJHNjb3BlLmRhdGFMb2FkaW5nID0gZmFsc2U7XG4gICAgIH0pO1xuXHQgfTtcbiAgJHNjb3BlLmZpbGVUeXBlICA9IGZ1bmN0aW9uKHR5cGUpIHtcblxuICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgJ3BkZic6XG4gICAgICAgICAgcmV0dXJuICdpbWcvcGRmLnBuZyc7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2ZvbGRlcic6XG4gICAgICAgICAgcmV0dXJuICdpbWcvdW5pdmVyc2FsX2ZvbGRlci5wbmcnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdmb2xkZXIrJzpcbiAgICAgICAgICByZXR1cm4gJ2ltZy9BZGRfZm9sZGVyLnBuZyc7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3BocCc6XG4gICAgICAgICAgcmV0dXJuICdpbWcvY29kZS5wbmcnO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICd0eHQnOlxuICAgICAgICByZXR1cm4gJ2ltZy9jb2RlLnBuZyc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdkb2N4JzpcbiAgICAgICAgICByZXR1cm4gJ2ltZy93b3JkLnBuZyc7XG4gICAgICAgIGNhc2UgJ2pwZyc6XG4gICAgICAgICAgcmV0dXJuICdmYSBmYS1pbWFnZSc7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3BuZyc6XG4gICAgICAgICAgcmV0dXJuICdpbWcvdmlkZW8ucG5nJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnanBlZyc6XG4gICAgICAgICAgICByZXR1cm4gJ2ltZy91bml2ZXJzYWxfZm9sZGVyLnBuZyc7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3ppcCc6XG4gICAgICAgICByZXR1cm4gJ2ltZy96aXAucG5nJztcbiAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gJ2ltZy91bml2ZXJzYWxfZm9sZGVyLnBuZyc7XG4gICAgICB9XG4gIH07XG5cblx0JHNjb3BlLmluaXQoKTtcbn1dKTtcblxuc3luYy5kaXJlY3RpdmUoJ2RyYWdnYWJsZScsIGZ1bmN0aW9uKCkge1xuXG4gICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiAnQUUnLFxuICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcbiAgICAgICAgICAgdmFyIGVsID0gZWxlbWVudFswXTtcblxuICAgICAgICAgICAgZWwuZHJhZ2dhYmxlID0gdHJ1ZTtcblxuICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICAgICAgICAnZHJhZ3N0YXJ0JyxcbiAgICAgICAgICAgICAgICBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZHJhZyBldmVudCBzdGFydGVkJyk7XG4gICAgICAgICAgICAgICAgICAgIGUuZGF0YVRyYW5zZmVyLmVmZmVjdEFsbG93ZWQgPSAnbW92ZSc7XG4gICAgICAgICAgICAgICAgICAgIGUuZGF0YVRyYW5zZmVyLnNldERhdGEoJ1RleHQnLCB0aGlzLmlkKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKCdkcmFnJyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGZhbHNlXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgICAgICdkcmFnZW5kJyxcbiAgICAgICAgICAgICAgICBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdkcmFnIGV2ZW50IHJlbGVhc2VkJyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LnJlbW92ZSgnZHJhZycpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBmYWxzZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH07XG59KTtcblxuc3luYy5kaXJlY3RpdmUoJ2Ryb3BwYWJsZScsIFsndXNlckludGVyYWN0aW9uTm90aWZpY2F0aW9uJywnRmlsZXMnLGZ1bmN0aW9uKHVzZXJJbnRlcmFjdGlvbk5vdGlmaWNhdGlvbixGaWxlcykge1xuICAgIHJldHVybiB7XG4gICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICBkcm9wOiAnJicsXG4gICAgICAgICAgICBiaW46ICc9Jy8vIHBhcmVudFxuICAgICAgICB9LFxuICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCkge1xuICAgICAgICAgICAgLy8gYWdhaW4gd2UgbmVlZCB0aGUgbmF0aXZlIG9iamVjdFxuICAgICAgICAgICAgdmFyIGVsID0gZWxlbWVudFswXTtcbiAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgICAgICdkcmFnb3ZlcicsXG4gICAgICAgICAgICAgIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgIGUuZGF0YVRyYW5zZmVyLmRyb3BFZmZlY3QgPSAnbW92ZSc7XG4gICAgICAgICAgICAgICAgICAvLyBhbGxvd3MgdXMgdG8gZHJvcFxuXG4gICAgICAgICAgICAgICAgICBpZiAoZS5wcmV2ZW50RGVmYXVsdCkgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QuYWRkKCdvdmVyJyk7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGZhbHNlXG4gICAgICAgICAgKTtcbiAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICAgICAgJ2RyYWdlbnRlcicsXG4gICAgICAgICAgICAgIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMuY2xhc3NMaXN0LmFkZCgnb3ZlcicpO1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBmYWxzZVxuICAgICAgICAgICk7XG5cbiAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgICAnZHJhZ2xlYXZlJyxcbiAgICAgICAgICAgICAgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QucmVtb3ZlKCdvdmVyJyk7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGZhbHNlXG4gICAgICAgICAgKTtcbiAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgJ2Ryb3AnLFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gU3RvcHMgc29tZSBicm93c2VycyBmcm9tIHJlZGlyZWN0aW5nLlxuICAgICAgICAgICAgICAgICAgICBpZiAoZS5zdG9wUHJvcGFnYXRpb24pIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGFzc0xpc3QucmVtb3ZlKCdvdmVyJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGJpbklkID0gdGhpcy5pZDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlLmRhdGFUcmFuc2Zlci5nZXREYXRhKCdUZXh0JykpO1xuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnSXRlbSBub3cgaXM6JytpdGVtKTtcblxuXG4gICAgICAgICAgICAgICAgICAgIHRyeXtcbiAgICAgICAgICAgICAgICAgICAgICAvLyBjYWxsIHRoZSBwYXNzZWQgZHJvcCBmdW5jdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBlbmRDaGlsZChpdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbihzY29wZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmbiA9IHNjb3BlLmRyb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJ3VuZGVmaW5lZCcgIT09IHR5cGVvZiBmbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm4oaXRlbS5pZCwgYmluSWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1jYXRjaChlKXtcbiAgICAgICAgICAgICAgICAgICAgICAvL3Rocm93IGVycm9yIHRoYXQgaGFwcGVuIHdoZW4gZmlsZSBpcyBkcm9wcGVkIGluIGl0J3Mgb3duIGxvY2F0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgLy9naXZlIHNvbWUgYWxlcnQgdG8gbm90aWZ5IHdoYXQgaGFwcG5lZFxuICAgICAgICAgICAgICAgICAgICAgIC8vIHRocm93KCBuZXcgRXJyb3IoZSkpXG4gICAgICAgICAgICAgICAgICAgICAgLy8gdXNlckludGVyYWN0aW9uTm90aWZpY2F0aW9uLmVycm9yKFwiRHJvcCBGaWxlIG9uIGZvbGRlciB0byBtb3ZlIGl0IVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBmYWxzZVxuICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxufV0pO1xuc3luYy5jb250cm9sbGVyKCdEcmFnRHJvcEN0cmwnLCBbJyRzY29wZScsJ0ZpbGVzJywnJGludGVydmFsJyxmdW5jdGlvbigkc2NvcGUsRmlsZXMsJGludGVydmFsKSB7XG5cblxuICAgICRzY29wZS5oYW5kbGVEcm9wID0gZnVuY3Rpb24oKSB7XG4gICAgICAvLyAxKWlmIG1vdmVkIG9ubHkgd2hlbiBpdCByZWFjaCBvbiBmb2xkZXIgYWxsb3cgbW92ZVxuICAgICAgLy8gMil0YWtlIHRoIGlkIG9mIGZpbGUgbW92ZWQgYW5kIHRha2UgaWQgb2YgZm9sZGVyIG1vdmUgZmlsZSBpbnRvIGZvbGRlclxuXG4gICAgICAgLy9tb3ZlIHRoZSBpdGVtIGludG8gd2hlcmUgaXQgaXMgZHJvcGVkXG4gICAgICAgLy90aGUgZmlyc3QgdGhpbmcgaGVyZSBpcyB0byByZWNhbGN1bGF0ZSB0aGUgYXJyYXkgdG8ga2VlcCB0aGUgYXJyYW5nZW1lbnQgaW50YWN0XG5cblxuICAgIH1cbn1dKTtcbiIsInN5bmMuY29udHJvbGxlcigncHJldmlld0NvbnRyb2xsZXInLFxuIFtcblx0JyRzY29wZScsJ3BkZkRlbGVnYXRlJywnJHRpbWVvdXQnLCckc3RhdGVQYXJhbXMnLCckcm9vdFNjb3BlJywnJGV4Y2VwdGlvbkhhbmRsZXInLCdGaWxlcycsICdGaWxlU2F2ZXInLCdCbG9iJyxmdW5jdGlvbiAoXG5cdFx0JHNjb3BlLHBkZkRlbGVnYXRlLCR0aW1lb3V0LCRzdGF0ZVBhcmFtcywkcm9vdFNjb3BlLCRleGNlcHRpb25IYW5kbGVyLEZpbGVzLEZpbGVTYXZlciwgQmxvYikge1xuXG4gICAgICAvL2dldCBtaW1lIHR5cGUgb2YgYW55RmlsZSB0aGF0IGNvbWVzIGluIG15IGhvb2QhXG5cbiAgICAgIFxuXG4gICAgICBpZigkc3RhdGVQYXJhbXMucHJldmlldyAmJiAkc3RhdGVQYXJhbXMuZXh0ZW5zaW9uID09ICdwZGYnKXtcbiAgICAgICAgJHNjb3BlLnByZXZpZXdhYmxlID0gdHJ1ZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vYSB1c2VyIFN0cmltVXAgaXMgaW5qZWN0ZWQgaW4gYmVsbG93IHVybCBpdCBzaG91bGQgYmUgZHluYW1pYyBpbiBmdXR1cmUhXG4gICAgICAgICAgICAkc2NvcGUucGRmVXJsID0gJHJvb3RTY29wZS5lbmRQb2ludCsgJy9wcmV2aWV3LycrICRzdGF0ZVBhcmFtcy5wcmV2aWV3Kycvb2YvJysnU3RyaW1VcCc7XG5cbiAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHBkZkRlbGVnYXRlLiRnZXRCeUhhbmRsZSgnbXktcGRmLWNvbnRhaW5lcicpLnpvb21JbigwLjUpO1xuICAgICAgICAgICAgfSwgMzAwMCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcblxuICAgICAgICAgICB0aHJvdyggbmV3IEVycm9yKGUpKVxuICAgICAgICB9XG4gICAgICB9ZWxzZSBpZigkc3RhdGVQYXJhbXMucHJldmlldyAmJiAkc3RhdGVQYXJhbXMuZXh0ZW5zaW9uID09ICdqcGcnfHwkc3RhdGVQYXJhbXMuZXh0ZW5zaW9uID09ICdwbmcnKXtcbiAgICAgICAgJHNjb3BlLmZpbGVfbmFtZSA9ICRzdGF0ZVBhcmFtcy5wcmV2aWV3O1xuICAgICAgICAkc2NvcGUucHJldmlld2FibGUgPSBmYWxzZTtcbiAgICAgICAgLy9hcyBieSBub3cgaW1hZ2VzIGFyZSBub3QgcmVhZHkgdG8gYmUgcHJldmlld2VkIHNvIHNldCBpdCB0byBmYWxzZSFwcm92aWRlIG9ubHkgb3B0aW9uIHRvIGRvd25sb2FkIHRoZW0hXG4gICAgICAgICAgLy8gJHNjb3BlLnByZXZpZXdhYmxlID0gZmFsc2U7XG4gICAgICAgICAgLy8gRmlsZXMuc2luZ2xlKCRzdGF0ZVBhcmFtcy5wcmV2aWV3KVxuICAgICAgICAgIC8vIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgICAvLyAgICRzY29wZS5pbWFnZVByZXZpZXcgPSByZXNwb25zZTtcbiAgICAgICAgICAvLyB9LGZ1bmN0aW9uKGVycil7XG4gICAgICAgICAgLy8gICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgIC8vIH0pO1xuICAgICAgfWVsc2Uge1xuICAgICAgICAvL3NlbmQgYSBmaWxlbmFtZSB0byBhIGRvd25sb2FkIGJ1dHRvblxuICAgICAgICAkc2NvcGUuZmlsZV9uYW1lID0gJHN0YXRlUGFyYW1zLnByZXZpZXc7XG4gICAgICAgICRzY29wZS5wcmV2aWV3YWJsZSA9IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAkc2NvcGUuZ29OZXh0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgJHNjb3BlLmluY3JlbWVudCA9IDE7XG4gICAgICAgICAgcGRmRGVsZWdhdGUuJGdldEJ5SGFuZGxlKCdteS1wZGYtY29udGFpbmVyJykubmV4dCgkc2NvcGUuaW5jcmVtZW50KzEpO1xuICAgICAgfTtcbiAgICAgIC8vdGhpcyBvcHRpb24gZG93biBoZXJlIG9mIGRvd25sb2FkaW5nIGEgZmlsZSB3YXMgbmljZSBidXQgc3RpbGwgaGF2ZSBzb21lIGRyb3diYWNrXG5cbiAgICAgIC8vICRzY29wZS5kb3dubG9hZCA9IGZ1bmN0aW9uKGZpbGVfbmFtZSl7XG5cbiAgICAgIC8vICAgRmlsZXMuZG93bmxvYWRGaWxlKGZpbGVfbmFtZSlcbiAgICAgIC8vICAgLnRoZW4oZnVuY3Rpb24oZmlsZV93cml0ZW4pe1xuICAgICAgICAgICAgXG4gICAgICAvLyAgICAgRmlsZXMuZ2V0TWltZVR5cGUoJHN0YXRlUGFyYW1zLnByZXZpZXcpXG4gICAgICAvLyAgICAgICAudGhlbihmdW5jdGlvbihtaW1lVHlwZSl7XG5cbiAgICAgIC8vICAgICAgICAgdmFyIGJsb2IgPSBuZXcgQmxvYihbZmlsZV93cml0ZW5dLCB7XG4gICAgICAvLyAgICAgICAgICAgICB0eXBlOiBtaW1lVHlwZSxcbiAgICAgIC8vICAgICAgICAgfSk7XG4gICAgICAvLyAgICAgICAgIEZpbGVTYXZlci5zYXZlQXMoYmxvYiwgJHN0YXRlUGFyYW1zLnByZXZpZXcpO1xuXG4gICAgICAvLyAgICAgICB9LGZ1bmN0aW9uKGVycil7XG4gICAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAvLyAgICAgICB9KTtcblxuICAgICAgICAgIFxuXG4gICAgICAvLyAgIH0sZnVuY3Rpb24oZXJyKXtcbiAgICAgIC8vICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgLy8gICB9KTtcbiAgICAgIC8vIH07XG4gICAgICAkc2NvcGUuZ29QcmV2ID0gZnVuY3Rpb24ocGFnZSl7XG4gICAgICAgICAgcGRmRGVsZWdhdGUuJGdldEJ5SGFuZGxlKCdteS1wZGYtY29udGFpbmVyJykucHJldigkc2NvcGUuaW5jcmVtZW50LTEpO1xuICAgICAgfTtcbn1dKTtcblxuc3luYy5kaXJlY3RpdmUoJ2ZpbGVEb3dubG9hZCcsIFtmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZSxcbiAgICAgICAgICAgIHRlbXBsYXRlOiAnPGJ1dHRvbiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdFwiIGRhdGEtbmctY2xpY2s9XCJkb3dubG9hZCgpXCI+PHNwYW4gY2xhc3M9XCJcIj48L3NwYW4+RG93bmxvYWQ8L2J1dHRvbj4nLFxuICAgICAgICAgICAgY29udHJvbGxlcjogWyckcm9vdFNjb3BlJywgJyRzY29wZScsICckZWxlbWVudCcsICckYXR0cnMnLCAnJHRpbWVvdXQnLCBmdW5jdGlvbiAoJHJvb3RTY29wZSwgJHNjb3BlLCAkZWxlbWVudCwgJGF0dHJzLCAkdGltZW91dCkge1xuICAgICAgICAgICAgICAgICRzY29wZS5wcm9ncmVzcyA9IDA7XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBwcmVwYXJlKHVybCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBkaWFsb2dzLndhaXQoXCJQbGVhc2Ugd2FpdFwiLCBcIllvdXIgZG93bmxvYWQgc3RhcnRzIGluIGEgZmV3IHNlY29uZHMuXCIsICRzY29wZS5wcm9ncmVzcyk7XG4gICAgICAgICAgICAgICAgICAgIGZha2VQcm9ncmVzcygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBzdWNjZXNzKHVybCkge1xuICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRicm9hZGNhc3QoJ2RpYWxvZ3Mud2FpdC5jb21wbGV0ZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBlcnJvcihyZXNwb25zZSwgdXJsKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGRpYWxvZ3MuZXJyb3IoXCJDb3VsZG4ndCBwcm9jZXNzIHlvdXIgZG93bmxvYWQhXCIpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGZha2VQcm9ncmVzcygpIHtcbiAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5wcm9ncmVzcyA8IDk1KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnByb2dyZXNzICs9ICg5NiAtICRzY29wZS5wcm9ncmVzcykgLyAyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICRyb290U2NvcGUuJGJyb2FkY2FzdCgnZGlhbG9ncy53YWl0LnByb2dyZXNzJywgeyAncHJvZ3Jlc3MnOiAkc2NvcGUucHJvZ3Jlc3MgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFrZVByb2dyZXNzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sIDI1MCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgJHNjb3BlLmRvd25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucHJvZ3Jlc3MgPSAwO1xuICAgICAgICAgICAgICAgICAgICAkLmZpbGVEb3dubG9hZCgnaHR0cDovL3N5bmNtZS5jb206ODAwMC9hcGkvdjEvZmlsZXMvZG93bmxvYWQvcGhweEZubGhlRFZFNWo1bWNWRFgucG5nL29mL1N0cmltVXA/YWNjZXNzX3Rva2VuPUJjN0RXUzdLS1JMdHhtZGRVWkkxVDFsWnUySjFZaFI4T0xYR1dOWm4nLCB7IHByZXBhcmVDYWxsYmFjazogcHJlcGFyZSwgc3VjY2Vzc0NhbGxiYWNrOiBzdWNjZXNzLCBmYWlsQ2FsbGJhY2s6IGVycm9yIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1dXG4gICAgICAgIH1cbn1dKTtcbiIsIi8qIGdsb2JhbCBzeW5jICovXG5cInVzZSBzdHJpY3RcIjtcbnN5bmMuY29udHJvbGxlcignUGVvcGxlQ29udHJvbGxlcicsIFsnJHNjb3BlJywnUGVvcGxlJyxmdW5jdGlvbiAoJHNjb3BlLCBQZW9wbGUpIHtcblx0XHQkc2NvcGUuaW5pdCA9IGZ1bmN0aW9uKCl7XG5cdFx0XHQkc2NvcGUuZ2V0UGVvcGxlVG9Gb2xsb3coKTtcblx0XHR9XG5cdFx0JHNjb3BlLmdldFBlb3BsZVRvRm9sbG93ICA9IGZ1bmN0aW9uKCl7XG5cdFx0XHRQZW9wbGUuZ2V0KClcblx0XHRcdC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblx0XHRcdFx0XG5cdFx0XHRcdCRzY29wZS5wZW9wbGUgPSByZXNwb25zZTtcblx0XHRcdH0sIGZ1bmN0aW9uKGVycm9yKXtcblxuXHRcdFx0fSlcblx0XHR9XG5cdFx0JHNjb3BlLiRvbignZm9sbG93TWVtYmVyJyxmdW5jdGlvbihldmVudCxwYXJhbXMpe1xuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFBlb3BsZS5mb2xsb3cocGFyYW1zKVxuXHRcdFx0LnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuXHRcdFx0XHQvL2NvbnNvbGUubG9nKHJlc3BvbnNlKTtcblx0XHRcdFx0JHNjb3BlLmdldFBlb3BsZVRvRm9sbG93KCk7XG5cdFx0XHR9LGZ1bmN0aW9uKGVycm9yKXtcblx0XHRcdFx0Y29uc29sZS5sb2coZXJyb3IpO1xuXHRcdFx0fSlcblx0XHR9KTtcblx0XHQkc2NvcGUuZm9sbG93ID0gZnVuY3Rpb24oaWQpe1xuXHRcdFx0dmFyIGZvbGxvdyA9e2lkOiBpZCwgb3B0aW9uOidhZGRQZW9wbGUnfTtcblx0XHRcdCRzY29wZS4kZW1pdChcImZvbGxvd01lbWJlclwiLCBmb2xsb3cpO1xuXHRcdH1cblx0XHQkc2NvcGUuaW5pdCgpO1xufV0pO1xuIiwiLyogZ2xvYmFsIEZpbGVzICovXG4vKiBnbG9iYWwgc3luYyAqL1xuLyogZ2xvYmFsICRzY29wZSAqL1xuLyogZ2xvYmFsIGFuZ3VsYXIgKi9cbi8qQXV0aG9yIE11cmFnaWppbWFuYSBGb3VuZGVyICYgQ0VPIG9mIHN5bmMgY2FsbCBoaW0gb24gU3RyaW1VcEBnbWFpbC5jb20qL1xuXG5zeW5jLnNlcnZpY2UoJ0dyb3VwJywgW1xuXHQnJGh0dHAnLFxuXHQnJHJvb3RTY29wZScsXG5cdCckcScsZnVuY3Rpb24gR3JvdXAgKFxuXHRcdCRodHRwLFxuXHRcdCRyb290U2NvcGUsXG5cdFx0JHEpIHtcblx0dGhpcy5jcmVhdGUgXHRcdD1cdGZ1bmN0aW9uKG5hbWUpe1xuXHRcdHZhciBkaWZmZXJlZCBcdD1cdCRxLmRlZmVyKCk7XG5cdFx0JGh0dHAucG9zdCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvbWUvZ3JvdXBzJywgbmFtZSlcblx0XHQuc3VjY2VzcyhmdW5jdGlvbihyZXNwb25zZSl7XG5cdFx0XHRkaWZmZXJlZC5yZXNvbHZlKHJlc3BvbnNlKTtcblx0XHR9KVxuXHRcdC5lcnJvcihmdW5jdGlvbihlcnJvcikge1xuXHRcdFx0ZGlmZmVyZWQucmVqZWN0KGVycm9yKTtcblx0XHR9KVxuXHRcdHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuXHR9XG5cdHRoaXMuZGVsZXRlIFx0XHQ9XHRmdW5jdGlvbihpZCl7XG5cdFx0dmFyIGRpZmZlcmVkIFx0PVx0JHEuZGVmZXIoKTtcblx0XHQkaHR0cC5kZWxldGUoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL21lL2dyb3Vwcy8nK2lkKVxuXHRcdC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblx0XHRcdGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuXHRcdH0pXG5cdFx0LmVycm9yKGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRkaWZmZXJlZC5yZWplY3QoZXJyb3IpO1xuXHRcdH0pXG5cdFx0cmV0dXJuIGRpZmZlcmVkLnByb21pc2U7XG5cdH1cblx0dGhpcy5teUdyb3Vwc1x0XHQ9XHRmdW5jdGlvbigpe1xuXHRcdHZhciBkaWZmZXJlZCBcdD1cdCRxLmRlZmVyKCk7XG5cblx0XHQkaHR0cC5nZXQoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL21lL2dyb3VwcycpXG5cdFx0LnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcG9uc2Upe1xuXHRcdFx0ZGlmZmVyZWQucmVzb2x2ZShyZXNwb25zZSk7XG5cdFx0fSlcblx0XHQuZXJyb3IoZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdGNvbnNvbGUubG9nKCdkaWZmZXJlZCBzbG93OicgKyBlcnJvcik7XG5cdFx0XHRkaWZmZXJlZC5yZWplY3QoZXJyb3IpO1xuXHRcdH0pXG5cdFx0cmV0dXJuIGRpZmZlcmVkLnByb21pc2U7XG5cdH1cblxuXHR0aGlzLmFkZFBlb3BsZSBcdD1cdGZ1bmN0aW9uKG1lbWJlcil7XG5cdFx0dmFyIGRpZmZlcmVkIFx0PVx0JHEuZGVmZXIoKTtcblx0XHQkaHR0cC5wdXQoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL21lL2dyb3Vwcy8nK0pTT04uc3RyaW5naWZ5KG1lbWJlcikpXG5cdFx0LnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcG9uc2Upe1xuXHRcdFx0ZGlmZmVyZWQucmVzb2x2ZShyZXNwb25zZSk7XG5cdFx0fSlcblx0XHQuZXJyb3IoZnVuY3Rpb24oZXJyb3IpIHtcblx0XHRcdGRpZmZlcmVkLnJlc29sdmUoZXJyb3IpO1xuXHRcdH0pXG5cdFx0cmV0dXJuIGRpZmZlcmVkLnByb21pc2U7XG5cdH07XG5cdHRoaXMuYWRkRmlsZVRvR3JvdXAgPSBmdW5jdGlvbihmaWxlT2JqKXtcblx0XHR2YXIgZGlmZmVyZWQgPSAkcS5kZWZlcigpO1xuXHRcdCRodHRwLnB1dCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvbWUvZ3JvdXBzLycrIEpTT04uc3RyaW5naWZ5KGZpbGVPYmopKVxuXHRcdC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblx0XHRcdGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuXHRcdH0pXG5cdFx0LmVycm9yKGZ1bmN0aW9uKGVycil7XG5cdFx0XHRkaWZmZXJlZC5yZWplY3QoZXJyKTtcblx0XHR9KVxuXHRcdHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuXHR9XG5cdHRoaXMucmVtb3ZlUGVvcGxlIFx0PVx0ZnVuY3Rpb24obWVtYmVyKXtcblx0XHR2YXIgZGlmZmVyZWQgXHQ9XHQkcS5kZWZlcigpO1xuXHRcdCRodHRwLnB1dCgkcm9vdFNjb3BlLmVuZFBvaW50ICsnL2FwaS92MS9tZS9ncm91cHMvJytKU09OLnN0cmluZ2lmeShtZW1iZXIpKVxuXHRcdC5zdWNjZXNzKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblx0XHRcdGRpZmZlcmVkLnJlc29sdmUocmVzcG9uc2UpO1xuXHRcdH0pXG5cdFx0LmVycm9yKGZ1bmN0aW9uKGVycm9yKSB7XG5cdFx0XHRkaWZmZXJlZC5yZWplY3QoZXJyb3IpO1xuXHRcdH0pXG5cdFx0cmV0dXJuIGRpZmZlcmVkLnByb21pc2U7XG5cdH1cbiAgdGhpcy5zdWdnZXN0UGVvcGxlID0gZnVuY3Rpb24oaWQpe1xuXG4gICAgXHR2YXIgZGlmZmVyZWQgPSAkcS5kZWZlcigpO1xuICAgIFx0JGh0dHAuZ2V0KCRyb290U2NvcGUuZW5kUG9pbnQgKyAnL2FwaS92MS9tZS9ncm91cHMvJyArIGlkKVxuICAgIFx0LnN1Y2Nlc3MoZnVuY3Rpb24ocmVzKXtcbiAgICBcdFx0ZGlmZmVyZWQucmVzb2x2ZShyZXMpO1xuICAgIFx0fSlcbiAgICBcdC5lcnJvcihmdW5jdGlvbihlcnIpIHtcbiAgICBcdFx0ZGlmZmVyZWQucmVqZWN0KGVycik7XG4gICAgXHR9KVxuICAgIFx0cmV0dXJuIGRpZmZlcmVkLnByb21pc2U7XG4gICAgfVxuXHRyZXR1cm4gdGhpcztcbn1dKTtcblxuc3luYy5jb250cm9sbGVyKCdHcm91cENvbnRyb2xsZXInLCBbXG5cdCckc2NvcGUnLFxuXHQnR3JvdXAnLFxuXHQnVXNlcicsXG5cdCdGaWxlcycsXG5cdCd1c2VySW50ZXJhY3Rpb25Ob3RpZmljYXRpb24nLFxuXHRmdW5jdGlvbiBHcm91cENvbnRyb2xsZXIgKFxuXHRcdCRzY29wZSxcblx0XHRHcm91cCxcblx0XHRVc2VyLFxuXHRcdEZpbGVzLFxuXHRcdHVzZXJJbnRlcmFjdGlvbk5vdGlmaWNhdGlvblxuXHQpIHtcblx0JHNjb3BlLmluaXQgXHQ9XHRmdW5jdGlvbigpe1xuXHRcdCRzY29wZS5teUdyb3VwcygpO1xuXG5cdFx0JHNjb3BlLnN1Z2dlc3RlZFBlb3BsZVRvR3JvdXAoKTsvL29mY2F1c2UgdGhleSBhcmUgYXJsZWFkeSB5b3VyIGZyaWVuZCBidXQgbm90IHBhcnRpY2lwYW50IGluIHlvdXIgc3R1ZmYgd29yayFcblx0fVxuXHQkc2NvcGUudXNlcklkIFx0XHRcdFx0PVx0ZnVuY3Rpb24oKXtcblx0XHRVc2VyLl9pZCgpXG5cdFx0LnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuXHRcdFx0JHNjb3BlLnVzZXJJZCBcdD1cdHJlc3BvbnNlO1xuXHRcdH0sIGZ1bmN0aW9uKGVycm9yKXtcblx0XHRcdGNvbnNvbGUubG9nKGVycm9yKTtcblx0XHR9KTtcblx0fTtcblx0JHNjb3BlLm15R3JvdXBzIFx0XHRcdD1cdGZ1bmN0aW9uKCl7XG5cdFx0R3JvdXAubXlHcm91cHMoKVxuXHRcdC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblx0XHRcdCRzY29wZS5ncm91cCBcdD0gcmVzcG9uc2U7XG5cdFx0fSwgZnVuY3Rpb24oZXJyb3Ipe1xuXHRcdH0pO1xuXHR9O1xuXHQkc2NvcGUuc3VnZ2VzdGVkUGVvcGxlVG9Hcm91cCBcdD1cdGZ1bmN0aW9uKGlkKXtcblx0XHQvL2NsZWFyaW5nIGFsbCB2aWV3IHJlbmRlcmVkIGJlZm9yZVxuXHRcdCRzY29wZS5zaG93RmlsZXM9ZmFsc2U7XG5cdFx0JHNjb3BlLnNob3dHcm91cD1mYWxzZTtcblx0XHQkc2NvcGUuc2hvd0JveD1mYWxzZTtcblx0XHRpZighYW5ndWxhci5pc1VuZGVmaW5lZChpZCkpe1xuXHRcdFx0R3JvdXAuc3VnZ2VzdFBlb3BsZShpZCkudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG5cdFx0XHRcdC8vIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcblx0XHRcdFx0JHNjb3BlLmZvbGxvd2VycyA9IHJlc3BvbnNlO1xuXHRcdFx0fSwgZnVuY3Rpb24oZXJyb3Ipe1xuXHRcdFx0XHRjb25zb2xlLmxvZyhlcnJvcik7XG5cdFx0XHR9KTtcblx0XHR9XG5cdH07XG5cdCRzY29wZS4kb24oJ3JlZnJlc2hHcm91cCcsZnVuY3Rpb24oKXtcbiAgICAgICAkc2NvcGUuaW5pdCgpO1xuICBcdH0pO1xuXHQkc2NvcGUuJG9uKCdncm91cERlbGV0ZWQnLCBmdW5jdGlvbiAoZXZlbnQsIGFyZ3MpIHtcblx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdCRzY29wZS5teUdyb3VwcygpO1xuXHR9KTtcblx0JHNjb3BlLiRvbignZ3JvdXBUb2JpbmR3aXRoJywgZnVuY3Rpb24gKGV2ZW50LCBncm91cGlkKSB7XG5cdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgJHNjb3BlLmVtaXR0ZWQgPWdyb3VwaWQ7XG4gICAgICAgIGlmKCAkc2NvcGUuc2hvd0ZpbGVzID09IHRydWUpe1xuICAgICAgICAgICAgJHNjb3BlLnNob3dGaWxlcz1mYWxzZTtcbiAgICAgICAgfVxuICAgICAgICAkc2NvcGUuc3VnZ2VzdGVkUGVvcGxlVG9Hcm91cChncm91cGlkKTtcbiAgICAgICAgJHNjb3BlLmFkZFBlb3BsZT10cnVlO1xuXHR9KTtcblx0JHNjb3BlLmdldEdyb3VwRmlsZXMgPSBmdW5jdGlvbihvd25lcil7XG4gICAgRmlsZXMuZ2V0R3JvdXBGaWxlcyhvd25lcilcblx0XHQudGhlbihmdW5jdGlvbih0cmVlKXtcblx0XHRcdCRzY29wZS5maWxlcyA9IHRyZWU7XG5cdFx0XHRcdC8vbmF2aWdhdGUgdHJvdWdoIHRyZWUgcmVzcG9uc2Ugd2hpY2ggaXMgcmVxdWlyZSBtdWNoIGF0dGVudGlvblxuXHRcdFx0XHQkc2NvcGUuZ3JvdXBzPVtdO1xuXHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHRyZWUubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRcdGlmICh0cmVlW2ldLmhhc093blByb3BlcnR5KCdncm91cHMnKSAmJiB0cmVlW2ldWydncm91cHMnXSkge1xuXHRcdFx0XHRcdFx0XHRcdCRzY29wZS5ncm91cHMucHVzaCh0cmVlW2ldLmZyaWVuZHMpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmICh0cmVlW2ldLmhhc093blByb3BlcnR5KCdncm91cHMnKSkge1xuXHRcdFx0XHRcdFx0XHRcdCRzY29wZS5ncm91cHMgPSBncm91cHMuY29uY2F0KHRyYXZlcnNlKHRyZWVbaV0uZ3JvdXBzKSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHR9LCBmdW5jdGlvbihlcnJvcil7XG5cdFx0XHRjb25zb2xlLmxvZyhlcnJvcik7XG5cdFx0fSk7XG4gIH07XG5cdCRzY29wZS5nZXRCb3hGaWxlcyA9IGZ1bmN0aW9uKGdyb3VwSWQpe1xuXHRcdCRzY29wZS5lbWl0dGVkID1ncm91cElkO1xuICBcdEZpbGVzLmdldEJveEZpbGVzKGdyb3VwSWQpXG5cdFx0LnRoZW4oZnVuY3Rpb24odHJlZSl7XG5cdFx0XHQkc2NvcGUuZmlsZXMgPSB0cmVlO1xuXHRcdFx0XHQvL25hdmlnYXRlIHRyb3VnaCB0cmVlIHJlc3BvbnNlIHdoaWNoIGlzIHJlcXVpcmUgbXVjaCBhdHRlbnRpb25cblx0XHRcdFx0JHNjb3BlLmdyb3Vwcz1bXTtcblx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCB0cmVlLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0XHRpZiAodHJlZVtpXS5oYXNPd25Qcm9wZXJ0eSgnZ3JvdXBzJykgJiYgdHJlZVtpXVsnZ3JvdXBzJ10pIHtcblx0XHRcdFx0XHRcdFx0XHQkc2NvcGUuZ3JvdXBzLnB1c2godHJlZVtpXS5mcmllbmRzKTtcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAodHJlZVtpXS5oYXNPd25Qcm9wZXJ0eSgnZ3JvdXBzJykpIHtcblx0XHRcdFx0ICAgICAgICAgICAgJHNjb3BlLmdyb3VwcyA9IGdyb3Vwcy5jb25jYXQodHJhdmVyc2UodHJlZVtpXS5ncm91cHMpKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdH0sIGZ1bmN0aW9uKGVycm9yKXtcblx0XHRcdGNvbnNvbGUubG9nKGVycm9yKTtcblx0XHR9KTtcbiAgfTtcbiRzY29wZS4kb24oJ3Nob3dPcHRpb25zJyxmdW5jdGlvbihfLHBhcmFtcyl7XG4gICAgIGlmKHBhcmFtcy5vd25lciA9PT1cImJveFwiKXtcblx0XHRcdCAkc2NvcGUuYWRkUGVvcGxlPWZhbHNlO1xuXHRcdFx0ICRzY29wZS5zaG93R3JvdXA9ZmFsc2U7XG4gICAgICAgJHNjb3BlLnNob3dCb3g9dHJ1ZTtcbiAgICAgICBpZiggJHNjb3BlLmFkZFBlb3BsZSA9PSB0cnVlKXtcbiAgICAgICAgICAgJHNjb3BlLmFkZFBlb3BsZT1mYWxzZTtcbiAgICAgICB9XG5cdFx0XHQgLy9zZXQgZmlsZXMgc2NvcGUgdG8gc2hvdyBmaWxlcyBvZiBib3ggZmlsZXMgaXMgcmVwZWF0ZWQgaW4gdmlldyBkaXJlY3RpdmVcbiAgICAgICAkc2NvcGUuZ2V0Qm94RmlsZXMgKHBhcmFtcy5ncm91cF9pZCk7XG5cdFx0IH1lbHNlIGlmIChwYXJhbXMub3duZXIgPT09IFwiZ3JvdXBcIikge1xuXHRcdFx0ICRzY29wZS5zaG93Qm94PWZhbHNlO1xuXHRcdFx0ICRzY29wZS5hZGRQZW9wbGU9ZmFsc2U7XG5cdFx0XHQgJHNjb3BlLnNob3dHcm91cD10cnVlO1xuXHRcdFx0IGlmKCAkc2NvcGUuYWRkUGVvcGxlID09IHRydWUpe1xuXHRcdFx0XHRcdCAkc2NvcGUuYWRkUGVvcGxlPWZhbHNlO1xuXHRcdFx0IH1cblx0XHRcdCAvL2NoYW5nZSBmaWxlcyB0byBuZXcgc2NvcGUgZmlsZXMgdG8gc2hvdyBmaWxlcyBvZiBncm91cHMgIGlzIHJlcGVhdGVkIGluIHZpZXcgZGlyZWN0aXZlXG5cdFx0XHQgJHNjb3BlLmdldEdyb3VwRmlsZXMgKHBhcmFtcy5ncm91cF9pZCk7XG5cdFx0IH1cbn0pO1xuJHNjb3BlLmluaXQoKTtcbn1dKTtcbnN5bmMuZGlyZWN0aXZlKCdteUdyb3VwcycsIFtcblx0J0dyb3VwJyxcblx0J1JlcG9ydCcsXG5cdCd1c2VySW50ZXJhY3Rpb25Ob3RpZmljYXRpb24nLFxuXHRmdW5jdGlvbiBteUdyb3VwcyAoXG5cdFx0R3JvdXAsXG5cdFx0UmVwb3J0LFxuXHRcdHVzZXJJbnRlcmFjdGlvbk5vdGlmaWNhdGlvbixcblx0XHROb3RpZmljYXRpb24pIHtcblx0cmV0dXJuIHtcblx0XHRwcmlvcml0eTogMTAsXG5cdFx0dGVtcGxhdGVVcmw6ICdBcHAvc2NyaXB0cy9qcy9kaXJlY3RpdmVzL2dyb3Vwcy5odG1sJyxcblx0XHRyZXN0cmljdDogJ0UnLFxuXHRcdHNjb3BlOiB7XG5cdFx0XHQgIGlkOiAnPXVzZXJJZCcsXG4gICAgICAgICAgZ3JvdXBzOiAnPScsXG4gICAgICAgICAgZm9sbG93ZXJzOiAnPScsXG4gICAgICAgICAgZW1pdHRlZDonPScsXG4gICAgICAgICAgc2hvd1Blb3BsZTonPScsXG4gICAgICAgICAgc2hvd0dyb3VwICAgOiAgJz0nLFxuICAgICAgICAgIGZpbGVzICAgOiAgJz0nLFxuXHQgIFx0XHRcdHNob3dCb3g6ICAnPSdcblx0XHR9LFxuXHRcdGxpbms6IGZ1bmN0aW9uIChzY29wZSwgaUVsZW1lbnQsIGlBdHRycykge1xuXHRcdFx0c2NvcGUuZGVsZXRlR3JvdXAgPSBmdW5jdGlvbihpZCl7XG5cdFx0XHRcdEdyb3VwLmRlbGV0ZShpZClcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24ocmVzKXtcblx0XHRcdFx0XHRcdHVzZXJJbnRlcmFjdGlvbk5vdGlmaWNhdGlvbi5pbmZvKFwiR3JvdXAgZGVsZXRlZFwiKTtcblx0XHRcdFx0XHQgXHRzY29wZS4kZW1pdChcImdyb3VwRGVsZXRlZFwiLCAnZ3JvdXAgZGVsZXRlZCcpO1xuXHRcdFx0XHR9LCBmdW5jdGlvbihlcnIpe1xuXHRcdFx0XHRcdFJlcG9ydC5zZW5kKCdkZWxldGUgZ3JvdXAgZXJyb3I6JytlcnIpXG5cdFx0XHRcdFx0LnRoZW4oZnVuY3Rpb24oKXt9LCBmdW5jdGlvbigpe30pO1xuXHRcdFx0XHR9KVxuXHRcdFx0fTtcbiAgICAgIHNjb3BlLmNyZWF0ZUdyb3VwXHQ9XHRmdW5jdGlvbihuYW1lKXtcbiAgICAgICAgICBHcm91cC5jcmVhdGUobmFtZSlcbiAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR1c2VySW50ZXJhY3Rpb25Ob3RpZmljYXRpb24uc3VjY2VzcyhcIkNyZWF0ZWQgbmV3IEdyb3VwXCIpO1xuICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLiRlbWl0KCdyZWZyZXNoR3JvdXAnLG51bGwpO1xuICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oZXJyb3Ipe1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9O1xuXHRcdFx0c2NvcGUuaW5pdEFkZFBlb3BsZSA9IGZ1bmN0aW9uKGdyb3VwaWQpe1xuXHRcdFx0XHRzY29wZS4kZW1pdChcImdyb3VwVG9iaW5kd2l0aFwiLCBncm91cGlkKTtcblx0XHRcdH07XG5cblx0XHRcdHNjb3BlLmFkZFBlb3BsZSA9IGZ1bmN0aW9uKHBhcmFtcyl7XG5cdFx0XHRcdHZhciBuZXdQYXJhbXMgPXtcblx0XHRcdFx0XHQnb3B0aW9uJzonYWRkTWVtYmVyJyxcblx0XHRcdFx0XHQndXNlcklkJzpwYXJhbXMudXNlcklkLFxuXHRcdFx0XHRcdCdncm91cElkJzpwYXJhbXMuZ3JvdXBJZFxuXHRcdFx0XHR9XG5cdFx0XHRcdGlmKGFuZ3VsYXIuaXNVbmRlZmluZWQocGFyYW1zKSl7XG5cdFx0XHRcdFx0Ly93b24ndCBoYXBwZW4hb3IgaWYgdGkgaGFwcGVuIHdlIHF1aXRcblx0XHRcdFx0fWVsc2V7XG5cblx0XHRcdFx0XHRHcm91cC5hZGRQZW9wbGUobmV3UGFyYW1zKVxuXHRcdFx0XHRcdC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSl7XG5cdFx0XHRcdFx0XHQvL3JlZnJlc2ggZ3JvdXAgd2l0aCBuZXcgbWVtYmVyIHN0YXR1c1xuXHRcdFx0XHRcdFx0XHR1c2VySW50ZXJhY3Rpb25Ob3RpZmljYXRpb24uc3VjY2VzcyhcIkFkZGVkIE1lbWJlciBpbiBncm91cC5cIik7XG4gICAgICAgICAgICAgIHNjb3BlLmluaXRBZGRQZW9wbGUocGFyYW1zLmdyb3VwSWQpO1xuICAgICAgICAgICAgICBzY29wZS4kZW1pdCgncmVmcmVzaEdyb3VwJywnJyk7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcblx0XHRcdFx0XHR9LCBmdW5jdGlvbiAoZXJyb3Isc3RhdHVzKXtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRzY29wZS5yZW1vdmVQZW9wbGUgPSBmdW5jdGlvbihwYXJhbXMpe1xuXG5cdFx0XHRcdHZhciBuZXdQYXJhbXMgPXtcblx0XHRcdFx0XHQnb3B0aW9uJzoncmVtb3ZlTWVtYmVyJyxcblx0XHRcdFx0XHQndXNlcklkJzpwYXJhbXMudXNlcklkLFxuXHRcdFx0XHRcdCdncm91cElkJzpwYXJhbXMuZ3JvdXBJZFxuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYoYW5ndWxhci5pc1VuZGVmaW5lZChwYXJhbXMpKXtcblx0XHRcdFx0XHQvL3dvbid0IGhhcHBlbiFvciBpZiB0aSBoYXBwZW4gd2UgcXVpdCB0b28gYmFkIGhpZXJhY2h5IVxuXHRcdFx0XHR9ZWxzZXtcblx0XHRcdFx0R3JvdXAucmVtb3ZlUGVvcGxlKG5ld1BhcmFtcylcblx0XHRcdFx0XHQudGhlbihmdW5jdGlvbiAocmVzcG9uc2Upe1xuXHRcdFx0XHRcdFx0XHR1c2VySW50ZXJhY3Rpb25Ob3RpZmljYXRpb24uaW5mbyhcIlJlbW92ZWQgTWVtYmVyIGluIGdyb3VwLlwiKTtcblx0ICAgICAgICAgICAgc2NvcGUuaW5pdEFkZFBlb3BsZShwYXJhbXMuZ3JvdXBJZCk7XG5cdCAgICAgICAgICAgIHNjb3BlLiRlbWl0KCdyZWZyZXNoR3JvdXAnLCcnKTtcbiAgICAgICAgICAgIFx0Y29uc29sZS5sb2cocmVzcG9uc2UpO1xuXHRcdFx0XHRcdH0sIGZ1bmN0aW9uIChlcnJvcixzdGF0dXMpe1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0XHRzY29wZS5yZW1vdmVGcm9tR3JvdXAgPSBmdW5jdGlvbigpe1xuXHRcdFx0XHRjb25zb2xlLmxvZygnd2UgY2FuIHJlbW92ZSBmaWxlIGluIGdyb3VwJyk7XG5cdFx0XHR9XG5cdFx0XHRzY29wZS5hZGRGaWxlVG9Hcm91cCA9IGZ1bmN0aW9uKHBhcmFtcyl7XG5cdFx0XHRcdHZhciBmaWxlT2JqID17XG5cdFx0XHRcdFx0J29wdGlvbic6J2FkZEZpbGVzJyxcblx0XHRcdFx0XHQnZmlsZUlkJzpwYXJhbXMuZmlsZUlkLFxuXHRcdFx0XHRcdCdncm91cElkJzpwYXJhbXMuZ3JvdXBJZFxuXHRcdFx0XHR9XG5cblx0XHRcdFx0R3JvdXAuYWRkRmlsZVRvR3JvdXAoZmlsZU9iailcblx0XHRcdFx0LnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcblx0XHRcdFx0XHQvLyB1c2VySW50ZXJhY3Rpb25Ob3RpZmljYXRpb24uc3VjY2VzcyhcIkEgZmlsZSBpcyBhZGRlZCBpbiBncm91cFwiKTtcblx0XHRcdFx0fSxmdW5jdGlvbihlcnIpe1xuXHRcdFx0XHRcdHVzZXJJbnRlcmFjdGlvbk5vdGlmaWNhdGlvbi53YXJuKFwiU29tZSBlcnJvciBvY2N1cmVkIGR1cmluZyBhZGRpbmcgZmlsZVwiKTtcblx0XHRcdFx0fSlcblxuXHRcdFx0fVxuXHRcdFx0c2NvcGUuZmlsZXNJbkJveCA9IGZ1bmN0aW9uKGdyb3VwaWQpe1xuXHRcdFx0XHR2YXIgcGFyYW1zID17J2dyb3VwX2lkJzpncm91cGlkLCdvd25lcic6J2JveCd9O1xuXHRcdFx0XHRzY29wZS4kZW1pdCgnc2hvd09wdGlvbnMnLHBhcmFtcyk7XG5cblx0XHRcdH1cblx0XHRcdHNjb3BlLmZpbGVzSW5Hcm91cCA9IGZ1bmN0aW9uKGdyb3VwaWQpe1xuXG5cdFx0XHRcdHZhciBwYXJhbXMgPXsnZ3JvdXBfaWQnOmdyb3VwaWQsJ293bmVyJzonZ3JvdXAnfTtcblx0XHRcdFx0c2NvcGUuJGVtaXQoJ3Nob3dPcHRpb25zJyxwYXJhbXMpO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcbn1dKTtcblxuc3luYy5zZXJ2aWNlKCdSZXBvcnQnLCBbZnVuY3Rpb24gUmVwb3J0ICgkaHR0cCwkcSwkcm9vdFNjb3BlKSB7XG5cdHRoaXMuc2VuZCA9IGZ1bmN0aW9uKGlzc3VlKXtcblx0XHR2YXIgZGlmZmVyZWQgPSAkcS5kZWZlcigpO1xuXHRcdCRodHRwLnBvc3QoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL2lzc3VlcycsIGlzc3VlKVxuXHRcdC5zdWNjZXNzKGZ1bmN0aW9uKHJlcyl7XG5cdFx0XHRkaWZmZXJlZC5yZXNvbHZlKHJlcyk7XG5cdFx0fSlcblx0XHQuZXJyb3IoZnVuY3Rpb24oZXJyKSB7XG5cdFx0XHRkaWZmZXJlZC5yZWplY3QoZXJyKTtcblx0XHR9KVxuXHRcdHJldHVybiBkaWZmZXJlZC5wcm9taXNlO1xuXHR9XG5cdHJldHVybiB0aGlzO1xufV0pO1xuIiwiLyogZ2xvYmFsIHN5bmMgKi9cbnN5bmMuc2VydmljZSgnU2V0dGluZ3MnLCBbJyRodHRwJywnJHJvb3RTY29wZScsJyRxJyxmdW5jdGlvbiAoJGh0dHAsJHJvb3RTY29wZSwkcSkge1xuXHR0aGlzLmN1cnJlbnQgPSBmdW5jdGlvbigpe1xuICAgICAgICB2YXIgZGlmZmVyZWQgPSAkcS5kZWZlcigpO1xuICAgICAgICAkaHR0cC5nZXQoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL3NldHRpbmdzJylcbiAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24ocmVzcCl7XG4gICAgICAgICAgICBkaWZmZXJlZC5yZXNvbHZlKHJlc3ApO1xuICAgICAgICB9KVxuICAgICAgICAuZXJyb3IoZnVuY3Rpb24oZXJyKXtcbiAgICAgICAgICAgIGRpZmZlcmVkLnJlamVjdChlcnIpO1xuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gZGlmZmVyZWQucHJvbWlzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG59XSk7XG5cbnN5bmMuY29udHJvbGxlcignU2V0dGluZ3NDb250cm9sbGVyJywgWyckc2NvcGUnLCdTZXR0aW5ncycsJyRsb2cnLCBmdW5jdGlvbiAoJHNjb3BlLFNldHRpbmdzLCRsb2cpIHtcblx0JHNjb3BlLmluaXQgPSBmdW5jdGlvbigpe1xuICAgICAgICAkc2NvcGUubG9hZEN1cnJlbnRTZXR0aW5ncygpO1xuICAgIH1cbiAgICAgJHNjb3BlLmxvYWRDdXJyZW50U2V0dGluZ3MgPSBmdW5jdGlvbigpe1xuICAgICAgICAgU2V0dGluZ3MuY3VycmVudCgpLnRoZW4oZnVuY3Rpb24ocmVzcCl7XG4gICAgICAgICAgICAgJHNjb3BlLnNldHRpbmdzID0gcmVzcDtcbiAgICAgICAgIH0sIGZ1bmN0aW9uKGVycil7XG4gICAgICAgICAgICAgJGxvZy5pbmZvKCdlcnJyb3IgcHJldmVudCBwcm9taXNlIHRvIGJlIGZ1bGxmaWxsJyk7XG4gICAgICAgICB9KTtcbiAgICAgfVxuICAgICAkc2NvcGUuaW5pdCgpO1xufV0pO1xuIiwiLyogZ2xvYmFsIHN5bmMgKi9cbnN5bmMuY29udHJvbGxlcignU2hhcmVDb250cm9sbGVyJywgW1xuXHQnJHNjb3BlJyxcblx0JyRyb290U2NvcGUnLFxuXHQnJHJvdXRlUGFyYW1zJyxcblx0JyRyb3V0ZScsXG5cdCckbG9nJyxcblx0JyR1aWJNb2RhbCcsXG5cdCdTaGFyZScsXG5cdCdVc2VyJyxcblx0ZnVuY3Rpb24gKFxuXHRcdCRzY29wZSxcblx0XHQkcm9vdFNjb3BlLFxuXHRcdCRyb3V0ZVBhcmFtcyxcblx0XHQkcm91dGUsXG5cdFx0JGxvZyxcblx0XHQkdWliTW9kYWwsXG5cdFx0U2hhcmUsXG5cdFx0VXNlclxuXHQpIFxue1xuXG5cdCRzY29wZS5zaGFyZSA9IGZ1bmN0aW9uKGZpbGVfaWQpe1xuXHRcdC8vIGFsZXJ0KCdoZXJlJyk7XG5cdFx0Y29uc29sZS5sb2coZmlsZV9pZCk7XG5cdH07XG59XG5dKTtcbiIsIi8qIGdsb2JhbCBzeW5jICovXG4vKiBnbG9iYWwgYW5ndWxhciAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5hbmd1bGFyXG5cbiAgICBzeW5jLmNvbnRyb2xsZXIoJ1VwbG9hZENvbnRyb2xsZXInLCBbJyRzY29wZScsICdGaWxlVXBsb2FkZXInLCckcm9vdFNjb3BlJywnRmlsZXMnLCBmdW5jdGlvbigkc2NvcGUsIEZpbGVVcGxvYWRlciwkcm9vdFNjb3BlLEZpbGVzKSB7XG4gICAgICAgIHZhciB1cGxvYWRlciA9ICRzY29wZS51cGxvYWRlciA9IG5ldyBGaWxlVXBsb2FkZXIoe1xuICAgICAgICAgICAgdXJsOiAkcm9vdFNjb3BlLmVuZFBvaW50KycvYXBpL3YxL3VwbG9hZCdcbiAgICAgICAgfSk7XG4gICAgICAgIC8vRklMVEVSU1xuICAgICAgICB1cGxvYWRlci5maWx0ZXJzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogJ2N1c3RvbUZpbHRlcicsXG4gICAgICAgICAgICBmbjogZnVuY3Rpb24oaXRlbSAvKntGaWxlfEZpbGVMaWtlT2JqZWN0fSovLCBvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucXVldWUubGVuZ3RoIDwgMTA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAvL0NBTExCQUNLU1xuICAgICAgICB1cGxvYWRlci5vbldoZW5BZGRpbmdGaWxlRmFpbGVkID0gZnVuY3Rpb24oaXRlbSAvKntGaWxlfEZpbGVMaWtlT2JqZWN0fSovLCBmaWx0ZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnb25XaGVuQWRkaW5nRmlsZUZhaWxlZCcsIGl0ZW0sIGZpbHRlciwgb3B0aW9ucyk7XG4gICAgICAgIH07XG4gICAgICAgIHVwbG9hZGVyLm9uQWZ0ZXJBZGRpbmdGaWxlID0gZnVuY3Rpb24oZmlsZUl0ZW0pIHtcbiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnb25BZnRlckFkZGluZ0ZpbGUnLCBmaWxlSXRlbSk7XG4gICAgICAgIH07XG4gICAgICAgIHVwbG9hZGVyLm9uQWZ0ZXJBZGRpbmdBbGwgPSBmdW5jdGlvbihhZGRlZEZpbGVJdGVtcykge1xuICAgICAgICAgICAgY29uc29sZS5pbmZvKCdvbkFmdGVyQWRkaW5nQWxsJywgYWRkZWRGaWxlSXRlbXMpO1xuICAgICAgICB9O1xuICAgICAgICB1cGxvYWRlci5vbkJlZm9yZVVwbG9hZEl0ZW0gPSBmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgICAgICBjb25zb2xlLmluZm8oJ29uQmVmb3JlVXBsb2FkSXRlbScsIGl0ZW0pO1xuICAgICAgICB9O1xuICAgICAgICB1cGxvYWRlci5vblByb2dyZXNzSXRlbSA9IGZ1bmN0aW9uKGZpbGVJdGVtLCBwcm9ncmVzcykge1xuICAgICAgICAgICAgY29uc29sZS5pbmZvKCdvblByb2dyZXNzSXRlbScsIGZpbGVJdGVtLCBwcm9ncmVzcyk7XG4gICAgICAgIH07XG4gICAgICAgIHVwbG9hZGVyLm9uUHJvZ3Jlc3NBbGwgPSBmdW5jdGlvbihwcm9ncmVzcykge1xuICAgICAgICAgICAgY29uc29sZS5pbmZvKCdvblByb2dyZXNzQWxsJywgcHJvZ3Jlc3MpO1xuICAgICAgICB9O1xuICAgICAgICB1cGxvYWRlci5vblN1Y2Nlc3NJdGVtID0gZnVuY3Rpb24oZmlsZUl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnb25TdWNjZXNzSXRlbScsIGZpbGVJdGVtLCByZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKTtcbiAgICAgICAgfTtcbiAgICAgICAgdXBsb2FkZXIub25FcnJvckl0ZW0gPSBmdW5jdGlvbihmaWxlSXRlbSwgcmVzcG9uc2UsIHN0YXR1cywgaGVhZGVycykge1xuICAgICAgICAgICAgY29uc29sZS5pbmZvKCdvbkVycm9ySXRlbScsIGZpbGVJdGVtLCByZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKTtcbiAgICAgICAgfTtcbiAgICAgICAgdXBsb2FkZXIub25DYW5jZWxJdGVtID0gZnVuY3Rpb24oZmlsZUl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnb25DYW5jZWxJdGVtJywgZmlsZUl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpO1xuICAgICAgICB9O1xuICAgICAgICB1cGxvYWRlci5vbkNvbXBsZXRlSXRlbSA9IGZ1bmN0aW9uKGZpbGVJdGVtLCByZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKSB7XG4gICAgICAgICAgICBjb25zb2xlLmluZm8oJ29uQ29tcGxldGVJdGVtJywgZmlsZUl0ZW0sIHJlc3BvbnNlLCBzdGF0dXMsIGhlYWRlcnMpO1xuICAgICAgICB9O1xuICAgICAgICB1cGxvYWRlci5vbkNvbXBsZXRlQWxsID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgRmlsZXMuZ2V0Qm94RmlsZXMoKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzKXtcbiAgICAgICAgICAgICAgJHNjb3BlLmZpbGVzIFx0PVx0cmVzO1xuXG4gICAgICAgICAgICB9LCBmdW5jdGlvbihlcnJvcil7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZmluYWxseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmRhdGFMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc29sZS5pbmZvKCdvbkNvbXBsZXRlQWxsJyk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnNvbGUuaW5mbygndXBsb2FkZXInLCB1cGxvYWRlcik7XG4gICAgfV0pO1xuIiwic3luYy5zZXJ2aWNlKCd1cmxTaG9ydGVuZXInLFtmdW5jdGlvbigpe1xuICB0aGlzLm1ha2VTaG9ydCA9IGZ1bmN0aW9uKGxvbmdVcmwpe1xuICAgIHJldHVybiBsb25nVXJsO1xuICB9O1xuICAvLyB0aGlzLm1ha2VTaG9ydCA9IGZ1bmN0aW9uKGxvbmdVcmwpXG4gIC8vIHtcbiAgLy8gICAvLyAgdmFyIGxvbmdVcmw9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsb25ndXJsXCIpLnZhbHVlO1xuICAvLyAgICAgdmFyIHJlcXVlc3QgPSBnYXBpLmNsaWVudC51cmxzaG9ydGVuZXIudXJsLmluc2VydCh7XG4gIC8vICAgICAncmVzb3VyY2UnOiB7XG4gIC8vICAgICAgICdsb25nVXJsJzogbG9uZ1VybFxuICAvLyBcdH1cbiAgLy8gICAgIH0pO1xuICAvLyAgICAgcmVxdWVzdC5leGVjdXRlKGZ1bmN0aW9uKHJlc3BvbnNlKVxuICAvLyBcdHtcbiAgLy9cbiAgLy8gXHRcdGlmKHJlc3BvbnNlLmlkICE9IG51bGwpXG4gIC8vIFx0XHR7XG4gIC8vIFx0XHRcdHN0ciA9XCI8Yj5Mb25nIFVSTDo8L2I+XCIrbG9uZ1VybCtcIjxicj5cIjtcbiAgLy8gXHRcdFx0c3RyICs9XCI8Yj55b3VyIEZpbGUgaXM6PC9iPiA8YSBocmVmPSdcIityZXNwb25zZS5pZCtcIic+XCIrcmVzcG9uc2UuaWQrXCI8L2E+PGJyPlwiO1xuICAvLyBcdFx0XHRyZXR1cm4gc3RyO1xuICAvLyBcdFx0fVxuICAvLyBcdFx0ZWxzZVxuICAvLyBcdFx0e1xuICAvLyBcdFx0XHRjb25zb2xlLmxvZyhcImVycm9yOiB1bmFibGUgdG8gY3JlYXRlIHNob3J0IHVybFwiKTtcbiAgLy8gXHRcdH1cbiAgLy9cbiAgLy8gICAgIH0pO1xuICAvLyAgfVxuICAvL1xuICAvLyB0aGlzLmdldFNob3J0SW5mbyA9IGZ1bmN0aW9uKClcbiAgLy8gIHtcbiAgLy8gICAgICB2YXIgc2hvcnRVcmw9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaG9ydHVybFwiKS52YWx1ZTtcbiAgLy9cbiAgLy8gICAgICB2YXIgcmVxdWVzdCA9IGdhcGkuY2xpZW50LnVybHNob3J0ZW5lci51cmwuZ2V0KHtcbiAgLy8gICAgICAgICdzaG9ydFVybCc6IHNob3J0VXJsLFxuICAvLyAgXHQgICAgICdwcm9qZWN0aW9uJzonRlVMTCdcbiAgLy8gICAgICB9KTtcbiAgLy8gICAgICByZXF1ZXN0LmV4ZWN1dGUoZnVuY3Rpb24ocmVzcG9uc2UpXG4gIC8vICBcdHtcbiAgLy8gIFx0XHRpZihyZXNwb25zZS5sb25nVXJsIT0gbnVsbClcbiAgLy8gIFx0XHR7XG4gIC8vICBcdFx0XHRzdHIgPVwiPGI+TG9uZyBVUkw6PC9iPlwiK3Jlc3BvbnNlLmxvbmdVcmwrXCI8YnI+XCI7XG4gIC8vICBcdFx0XHRzdHIgKz1cIjxiPkNyZWF0ZSBPbjo8L2I+XCIrcmVzcG9uc2UuY3JlYXRlZCtcIjxicj5cIjtcbiAgLy8gIFx0XHRcdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwib3V0cHV0XCIpLmlubmVySFRNTCA9IHN0cjtcbiAgLy8gIFx0XHR9XG4gIC8vICBcdFx0ZWxzZVxuICAvLyAgXHRcdHtcbiAgLy8gIFx0XHRcdGNvbnNvbGUubG9nKFwiZXJyb3I6IHVuYWJsZSB0byBnZXQgVVJMIGluZm9ybWF0aW9uXCIpO1xuICAvLyAgXHRcdH1cbiAgLy9cbiAgLy8gICAgICB9KTtcbiAgLy9cbiAgLy8gIH1cbiAgLy8gIGZ1bmN0aW9uIGxvYWQoKVxuICAvLyAge1xuICAvLyAgXHRnYXBpLmNsaWVudC5zZXRBcGlLZXkoJ0FJemFTeURTbjd6N1YxZjZIM3lYcmdBbGdWR3c1MmRTRW1xQUxJYycpOyAvL2dldCB5b3VyIG93bm4gQnJvd3NlciBBUEkgS0VZXG4gIC8vICBcdGdhcGkuY2xpZW50LmxvYWQoJ3VybHNob3J0ZW5lcicsICd2MScsZnVuY3Rpb24oKXt9KTtcbiAgLy8gIH1cbiAgLy8gIHdpbmRvdy5vbmxvYWQgPSBsb2FkO1xufV0pO1xuIiwiLy9BdXRob3IgTXVyYWdpamltYW5hIFJpY2hhcmQgc3RyaW11cEBnbWFpbC5jb20gYmVhc3RhcjQ1N0BnbWFpbC5jb21cblxuICBzeW5jLmNvbnRyb2xsZXIoJ01lc3NhZ2VDb250cm9sbGVyJywgZnVuY3Rpb24gKCRodHRwLCRzY29wZSwkcSwkcm9vdFNjb3BlKSB7XG4gICAgICAgJC5hamF4U2V0dXAoe1xuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICdYLUNTUkYtVE9LRU4nOiAkKCdtZXRhW25hbWU9XCJjc3JmLXRva2VuXCJdJykuYXR0cignY29udGVudCcpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgXG4gICAgICAgICAkc2NvcGUubmFtZT1cIk11cmFnaWppbWFuYVwiO1xuICAgICAgICAgdmFyIHBvc3RzPSRodHRwLmdldCgkcm9vdFNjb3BlLmVuZFBvaW50ICsgJy9hcGkvdjEvcG9zdCcpLFxuICAgICAgICAgICAgIGluc3RpdHV0aW9ucz0kaHR0cC5nZXQoJHJvb3RTY29wZS5lbmRQb2ludCArICcvYXBpL3YxL3Bvc3QnKTtcblxuICAgICAgICAgICRxLmFsbChbcG9zdHMsaW5zdGl0dXRpb25zXSkudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICAgIHZhciB0bXAgPSBbXTtcbiAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChyZXN1bHQsIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgIHRtcC5wdXNoKHJlc3BvbnNlLmRhdGEpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gdG1wO1xuICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24odG1wUmVzdWx0KSB7XG4gICAgICAgICAgICAgIC8vIHBvc3RzPXRtcFJlc3VsdDtcbiAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYW5ndWxhci50b0pzb24odG1wUmVzdWx0WzBdLCB0cnVlKSk7XG4gICAgICAgICAgICAkc2NvcGUucG9zdHMgPSB0bXBSZXN1bHRbMF07XG4gICAgICAgICAgfSk7XG4gICAgICAgICAkKCcucG9zdC1pbicpLmF0d2hvKHtcbiAgICAgICAgICAgIGF0OiBcIkBcIixcbiAgICAgICAgICAgIGRhdGE6WydQZXRlcicsICdUb20nLCAnQW5uZSddLFxuXG4gICAgICAgICB9KTtcblxuICB9KTtcbiIsIlxuc3luYy5jb250cm9sbGVyKFwiVHV0b3JpYWxNb2RhbFwiLCBmdW5jdGlvbigkc2NvcGUpIHtcblxuICAkc2NvcGUub3BlbiA9IGZ1bmN0aW9uKCkge1xuICAgICRzY29wZS5zaG93TW9kYWwgPSB0cnVlO1xuICB9O1xuICAkc2NvcGUub2sgPSBmdW5jdGlvbigpIHtcbiAgICAkc2NvcGUuc2hvd01vZGFsID0gZmFsc2U7XG4gIH07XG5cbiAgJHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uKCkge1xuICAgICRzY29wZS5zaG93TW9kYWwgPSBmYWxzZTtcbiAgfTtcblxufSk7XG5cbnN5bmMuY29udHJvbGxlcihcIlN0cmltaW5Nb2RhbFwiLCBmdW5jdGlvbigkc2NvcGUpIHtcblxuICAkc2NvcGUub3BlbiA9IGZ1bmN0aW9uKCkge1xuICAgICRzY29wZS5zaG93TW9kYWwgPSB0cnVlO1xuICB9O1xuICAkc2NvcGUub2sgPSBmdW5jdGlvbigpIHtcbiAgICAkc2NvcGUuc2hvd01vZGFsID0gZmFsc2U7XG4gIH07XG5cbiAgJHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uKCkge1xuICAgICRzY29wZS5zaG93TW9kYWwgPSBmYWxzZTtcbiAgfTtcblxufSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
